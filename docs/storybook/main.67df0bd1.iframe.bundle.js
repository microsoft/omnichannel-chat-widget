/*! For license information please see main.67df0bd1.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$")],module,!1),window.__playwright_addon_hot_reload_time__=Date.now()}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src/common/Constants.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return Constants})),__webpack_require__.d(__webpack_exports__,"m",(function(){return Regex})),__webpack_require__.d(__webpack_exports__,"i",(function(){return HtmlIdNames})),__webpack_require__.d(__webpack_exports__,"h",(function(){return HtmlClassNames})),__webpack_require__.d(__webpack_exports__,"g",(function(){return HtmlAttributeNames})),__webpack_require__.d(__webpack_exports__,"o",(function(){return WebChatMiddlewareConstants})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AMSConstants})),__webpack_require__.d(__webpack_exports__,"l",(function(){return MimeTypes})),__webpack_require__.d(__webpack_exports__,"k",(function(){return LocaleConstants})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ChatSDKError})),__webpack_require__.d(__webpack_exports__,"f",(function(){return EnvironmentVersion})),__webpack_require__.d(__webpack_exports__,"e",(function(){return E2VVOptions})),__webpack_require__.d(__webpack_exports__,"j",(function(){return LiveWorkItemState})),__webpack_require__.d(__webpack_exports__,"n",(function(){return TranscriptConstants})),__webpack_require__.d(__webpack_exports__,"b",(function(){return AriaTelemetryConstants}));var _class;__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Constants=_createClass((function Constants(){_classCallCheck(this,Constants)}));Constants.magicCodeBroadcastChannel="MagicCodeChannel",Constants.magicCodeResponseBroadcastChannel="MagicCodeResponseChannel",Constants.systemMessageTag="system",Constants.userMessageTag="user",Constants.historyMessageTag="history",Constants.agentEndConversationMessageTag="agentendconversation",Constants.supervisorForceCloseMessageTag="supervisorforceclosedconversation",Constants.receivedMessageClassName="ms_lcw_webchat_received_message",Constants.sentMessageClassName="ms_lcw_webchat_sent_message",Constants.webchatChannelId="webchat",Constants.markdown="markdown",Constants.actionType="actionType",Constants.String="string",Constants.ChatMessagesJson="chatMessagesJson",Constants.truePascal="True",Constants.true="true",Constants.false="false",Constants.maximumUnreadMessageCount=99,Constants.userParticipantTypeTag="User",Constants.botParticipantTypeTag="Bot",Constants.channelIdKey="ChannelId-",Constants.ChannelId="lcw",Constants.CustomerTag="FromCustomer",Constants.GifContentType="image/gif",Constants.video="video",Constants.audio="audio",Constants.controlsList="controlsList",Constants.nodownload="nodownload",Constants.activity="activity",Constants.payload="payload",Constants.text="text",Constants.blank="_blank",Constants.visitorIdPrefix="8:",Constants.left="left",Constants.queuePositionMessageTag="queueposition",Constants.averageWaitTimeMessageTag="averagewaittime",Constants.message="message",Constants.hiddenTag="Hidden",Constants.prefixTimestampTag="ServerMessageTimestamp_",Constants.acsChannel="ACS_CHANNEL",Constants.publicMessageTag="public",Constants.supportedAdaptiveCardContentTypes=["application/vnd.microsoft.card.adaptive","application/vnd.microsoft.card.audio","application/vnd.microsoft.card.hero","application/vnd.microsoft.card.receipt","application/vnd.microsoft.card.thumbnail","application/vnd.microsoft.card.signin","application/vnd.microsoft.card.oauth"],Constants.maxUploadFileSize="500000",Constants.imageRegex=/(\.)(jpeg|jpg|jiff|png|gif|bmp|webp)$/i,Constants.audioMediaRegex=/(\.)(aac|aiff|alac|amr|flac|mp2|mp3|pcm|wav|wma)$/i,Constants.videoMediaRegex=/(\.)(avchd|avi|flv|mpe|mpeg|mpg|mpv|mp4|m4p|m4v|mov|qt|swf|webm|wmv)$/i,Constants.chromeSupportedInlineMediaRegex=/(\.)(aac|mp3|wav|mp4)$/i,Constants.firefoxSupportedInlineMediaRegex=/(\.)(aac|flac|mp3|wav|mp4|mov)$/i,Constants.CallAdded="callAdded",Constants.LocalVideoStreamAdded="localVideoStreamAdded",Constants.LocalVideoStreamRemoved="localVideoStreamRemoved",Constants.RemoteVideoStreamAdded="remoteVideoStreamAdded",Constants.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",Constants.CallDisconnected="callDisconnected",Constants.IncomingCallEnded="incomingCallEnded",Constants.VoiceVideoInitialize="voiceVideoInitialize",Constants.VoiceVideoInitializeException="voiceVideoInitializeOnException",Constants.VoiceVideoLoading="voiceVideoLoading",Constants.VoiceVideoNotLoaded="voiceVideoNotLoaded",Constants.VoiceVideoLoadingException="voiceVideoLoadingOnException",Constants.VoiceVideoAcceptCallException="voiceVideoAcceptCallOnException",Constants.VoiceVideoAcceptCallWithVideoException="voiceVideoAcceptCallWithVideoException",Constants.defaultDownloadTranscriptError="Download transcript failed.",Constants.ProactiveChatInviteTimeoutInMs=6e4,Constants.InputSubmit="InputSubmit",Constants.ReconnectIdAttributeName="oc.reconnectid",Constants.LiveChatWidget="LiveChatWidgetNew",Constants.GuidPattern="xx-x-4m-ym-xxx",Constants.Default="default",Constants.Zero="zero",Constants.Title="title",Constants.Target="target",Constants.Blank="_blank",Constants.TargetRelationship="rel",Constants.TargetRelationshipAttributes="noopener noreferrer",Constants.OpenLinkIconCssClass="webchat__markdown__external-link-icon",Constants.internetConnectionTestUrl="https://ocsdk-prod.azureedge.net/public/connecttest.txt",Constants.internetConnectionTestUrlText="Omnichannel Connect Test",Constants.ChatWidgetStateChangedPrefix="ChatWidgetStateChanged",Constants.PostChatLoadingDurationInMs=2e3,Constants.BrowserUnloadConfirmationMessage="Do you want to leave chat?",Constants.CacheTtlInMinutes=15,Constants.LWICheckOnVisibilityTimeout=18e4;var Regex=(_class=_createClass((function Regex(){_classCallCheck(this,Regex)})),_class.EmailRegex="(?:[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-zA-Z0-9-]*[a-zA-Z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])",_class),HtmlIdNames=_createClass((function HtmlIdNames(){_classCallCheck(this,HtmlIdNames)}));HtmlIdNames.MSLiveChatWidget="MSLiveChatWidget";var HtmlClassNames=_createClass((function HtmlClassNames(){_classCallCheck(this,HtmlClassNames)}));HtmlClassNames.webChatBannerCloseButton="webchat__toast__dismissButton",HtmlClassNames.webChatBannerExpandButton="webchat__toaster__expandIcon",_createClass((function HtmlElementSelectors(){_classCallCheck(this,HtmlElementSelectors)})).sendBoxSelector='textarea[data-id="webchat-sendbox-input"]';var HtmlAttributeNames=_createClass((function HtmlAttributeNames(){_classCallCheck(this,HtmlAttributeNames)}));HtmlAttributeNames.role="role",HtmlAttributeNames.navigation="navigation",HtmlAttributeNames.ariaLabel="aria-label",HtmlAttributeNames.ariaLive="aria-live",HtmlAttributeNames.ariaDisabled="aria-disabled",HtmlAttributeNames.form="form",HtmlAttributeNames.ariaLabelledby="aria-labelledby",HtmlAttributeNames.tabindex="tabindex",HtmlAttributeNames.ariaRequired="aria-required",HtmlAttributeNames.ariaDesribedby="aria-describedby",HtmlAttributeNames.ariaHidden="aria-hidden",HtmlAttributeNames.disabled="disabled",HtmlAttributeNames.hidden="hidden",HtmlAttributeNames.download="download",HtmlAttributeNames.href="href",HtmlAttributeNames.region="region",HtmlAttributeNames.button="button",HtmlAttributeNames.input="Input",HtmlAttributeNames.style="style",HtmlAttributeNames.head="head",HtmlAttributeNames.type="type",HtmlAttributeNames.csstext="text/css",HtmlAttributeNames.listItem="LI",HtmlAttributeNames.unorderedList="UL",HtmlAttributeNames.div="div",HtmlAttributeNames.aTagName="a",HtmlAttributeNames.noopenerTag="noopener",HtmlAttributeNames.noreferrerTag="noreferrer",HtmlAttributeNames.adaptiveCardClassName="ac-adaptiveCard",HtmlAttributeNames.adaptiveCardTextBlockClassName="ac-textBlock",HtmlAttributeNames.adaptiveCardToggleInputClassName="ac-toggleInput",HtmlAttributeNames.adaptiveCardActionSetClassName="ac-actionSet";var WebChatMiddlewareConstants=_createClass((function WebChatMiddlewareConstants(){_classCallCheck(this,WebChatMiddlewareConstants)}));WebChatMiddlewareConstants.nextVisibleActivity="nextVisibleActivity",WebChatMiddlewareConstants.timeBetweenTimestampGroups=3e5,WebChatMiddlewareConstants.maxTextLength=6e3,WebChatMiddlewareConstants.adaptiveCard="AdaptiveCard";var AMSConstants=_createClass((function AMSConstants(){_classCallCheck(this,AMSConstants)}));AMSConstants.supportedImagesMimeTypes=["image/jpeg","image/png","image/gif","image/heic","image/webp"],AMSConstants.maxSupportedImageSize=20,AMSConstants.maxSupportedFileSize=300;var MimeTypes=_createClass((function MimeTypes(){_classCallCheck(this,MimeTypes)}));MimeTypes.UnknownFileType="application/octet-stream";var ElementType,ChatSDKError,EnvironmentVersion,E2VVOptions,LiveWorkItemState,LocaleConstants=_createClass((function LocaleConstants(){_classCallCheck(this,LocaleConstants)}));LocaleConstants.RTL_LOCALES=["1025","1037"],function(ElementType){ElementType.CallingContainerSDK="CallingContainerSDK"}(ElementType||(ElementType={})),function(ChatSDKError){ChatSDKError.WidgetUseOutsideOperatingHour="WidgetUseOutsideOperatingHour"}(ChatSDKError||(ChatSDKError={})),function(EnvironmentVersion){EnvironmentVersion.prod="prod",EnvironmentVersion.dogfood="df",EnvironmentVersion.int="int",EnvironmentVersion.test="test"}(EnvironmentVersion||(EnvironmentVersion={})),function(E2VVOptions){E2VVOptions.NoCalling="192350000",E2VVOptions.VideoAndVoiceCalling="192350001",E2VVOptions.VoiceOnly="192350002"}(E2VVOptions||(E2VVOptions={})),function(LiveWorkItemState){LiveWorkItemState.Active="Active",LiveWorkItemState.Closed="Closed",LiveWorkItemState.Open="Open",LiveWorkItemState.Waiting="Waiting",LiveWorkItemState.WrapUp="WrapUp"}(LiveWorkItemState||(LiveWorkItemState={}));var TranscriptConstants=_createClass((function TranscriptConstants(){_classCallCheck(this,TranscriptConstants)}));TranscriptConstants.ChatTranscriptsBodyColor="#F5F5F5",TranscriptConstants.TranscriptMessageEmojiMessageType="http://schema.skype.com/emoji",TranscriptConstants.ChatTranscriptDownloadFile="ChatTranscripts.html",TranscriptConstants.DefaultFileAttachmentName="Untitled.txt",TranscriptConstants.CustomerDialogColor="#E8E8E8",TranscriptConstants.CustomerFontColor="black",TranscriptConstants.AdaptiveCardType="adaptivecard",TranscriptConstants.InternalMode="internal",TranscriptConstants.AgentDialogColor="#2266E3",TranscriptConstants.AgentFontColor="white";var AriaTelemetryConstants=_createClass((function AriaTelemetryConstants(){_classCallCheck(this,AriaTelemetryConstants)}));AriaTelemetryConstants.GERMANY_ENDPOINT="https://de.pipe.aria.microsoft.com/Collector/3.0/",AriaTelemetryConstants.GCCH_ENDPOINT="https://tb.pipe.aria.microsoft.com/Collector/3.0/",AriaTelemetryConstants.DOD_ENDPOINT="https://pf.pipe.aria.microsoft.com/Collector/3.0",AriaTelemetryConstants.EUROPE_ENDPOINT="https://eu-mobile.events.data.microsoft.com/Collector/3.0/",AriaTelemetryConstants.MOONCAKE_ENDPOINT="",AriaTelemetryConstants.Public="Public",AriaTelemetryConstants.EU="Europe",AriaTelemetryConstants.lcwEUDomainNames=["crm4.omnichannelengagementhub.com","crm12.omnichannelengagementhub.com","crm16.omnichannelengagementhub.com","crm17.omnichannelengagementhub.com","crm19.omnichannelengagementhub.com"]},"./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$":function(module,exports,__webpack_require__){var map={"./OmniChannelLiveChatWidget.stories.tsx":"./stories/OmniChannelLiveChatWidget.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"},"./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$":function(module,exports,__webpack_require__){var map={"./OmniChannelLiveChatWidget.stories.tsx":"./stories/OmniChannelLiveChatWidget.stories.tsx","./component-stories/CallingContainer.stories.tsx":"./stories/component-stories/CallingContainer.stories.tsx","./component-stories/ChatButton.stories.tsx":"./stories/component-stories/ChatButton.stories.tsx","./component-stories/ConfirmationPane.stories.tsx":"./stories/component-stories/ConfirmationPane.stories.tsx","./component-stories/CurrentCall.stories.tsx":"./stories/component-stories/CurrentCall.stories.tsx","./component-stories/Footer.stories.tsx":"./stories/component-stories/Footer.stories.tsx","./component-stories/Header.stories.tsx":"./stories/component-stories/Header.stories.tsx","./component-stories/IncomingCall.stories.tsx":"./stories/component-stories/IncomingCall.stories.tsx","./component-stories/InputValidationPane.stories.tsx":"./stories/component-stories/InputValidationPane.stories.tsx","./component-stories/LoadingPane.stories.tsx":"./stories/component-stories/LoadingPane.stories.tsx","./component-stories/OOOHPane.stories.tsx":"./stories/component-stories/OOOHPane.stories.tsx","./component-stories/PostChatSurveyPane.stories.tsx":"./stories/component-stories/PostChatSurveyPane.stories.tsx","./component-stories/PreChatSurveyPane.stories.tsx":"./stories/component-stories/PreChatSurveyPane.stories.tsx","./component-stories/ProactiveChatPane.stories.tsx":"./stories/component-stories/ProactiveChatPane.stories.tsx","./component-stories/ReconnectChatPane.stories.tsx":"./stories/component-stories/ReconnectChatPane.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"},"./stories/.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./stories/OmniChannelLiveChatWidget.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultWithSurvey",(function(){return DefaultWithSurvey})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var ScenarioType,LogLevel,BroadcastEvent,TelemetryEvent,react=__webpack_require__("./node_modules/react/index.js"),cjs=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),ChatContextStore=Object(react.createContext)(void 0),hooks_useChatContextStore=function useChatContextStore(){var context=Object(react.useContext)(ChatContextStore);if(!context)throw new Error("This hook can only be used on component that is descendants of <ChatContextStore.Provider>");return context},ChatSDKStore=Object(react.createContext)(void 0),hooks_useChatSDKStore=function useChatSDKStore(){var sdk=Object(react.useContext)(ChatSDKStore);if(!sdk)throw new Error("This hook is not called on component that is descendants of <ChatSDKStore.Provider>, or ChatSDK is not passed into LiveChatWidget component.");return sdk},ChatAdapterStore=(__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),Object(react.createContext)([void 0,function(adapter){}]));__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}!function(ScenarioType){ScenarioType.CONFIG_VALIDATION="LCW_ConfigValidationEvents",ScenarioType.LOAD="LCW_LoadEvents",ScenarioType.ACTIONS="LCW_ActionEvents",ScenarioType.SDK="LCW_SDKEvents",ScenarioType.IC3_CLIENT="LCW_IC3ClientEvents",ScenarioType.OCCHATSDK="LCW_OCCHATSDKEvents",ScenarioType.WEBCHAT="LCW_WebChatEvents",ScenarioType.CALLING="LCW_Calling",ScenarioType.UNDEFINED="LCW_Undefined",ScenarioType.ACS_ADAPTER="LCW_ACSAdapterEvents"}(ScenarioType||(ScenarioType={})),function(LogLevel){LogLevel.INFO="INFO",LogLevel.DEBUG="DEBUG",LogLevel.WARN="WARN",LogLevel.ERROR="ERROR"}(LogLevel||(LogLevel={})),function(BroadcastEvent){BroadcastEvent.LoadPostChatSurvey="LoadPostChatSurvey",BroadcastEvent.ChatEnded="ChatEnded",BroadcastEvent.NewMessageNotification="NewMessageNotification",BroadcastEvent.UnreadMessageCount="UnreadMessageCount",BroadcastEvent.StartProactiveChat="StartProactiveChat",BroadcastEvent.ProactiveChatStartChat="ProactiveChatStartChat",BroadcastEvent.ProactiveChatStartPopoutChat="ProactiveChatStartPopoutChat",BroadcastEvent.ProactiveChatIsInPopoutMode="ProactiveChatIsInPopoutMode",BroadcastEvent.ResetProactiveChatParams="ResetProactiveChatParams",BroadcastEvent.InvalidAdaptiveCardFormat="InvalidAdaptiveCardFormat",BroadcastEvent.NewMessageSent="NewMessageSent",BroadcastEvent.NewMessageReceived="NewMessageReceived",BroadcastEvent.HistoryMessageReceived="HistoryMessageReceived",BroadcastEvent.RedirectPageRequest="RedirectPageRequest",BroadcastEvent.StartChat="StartChat",BroadcastEvent.StartUnauthenticatedReconnectChat="StartUnauthenticatedReconnectChat",BroadcastEvent.InitiateEndChat="InitiateEndChat",BroadcastEvent.SetCustomContext="SetCustomContext",BroadcastEvent.ChatRetrievedFromCache="ChatRetrievedFromCache",BroadcastEvent.MaximizeChat="MaximizeChat",BroadcastEvent.ChatInitiated="ChatInitiated",BroadcastEvent.CloseChat="CloseChat",BroadcastEvent.InitiateEndChatOnBrowserUnload="InitiateEndChatOnBrowserUnload",BroadcastEvent.ClosePopoutWindow="ClosePopoutWindow",BroadcastEvent.RaiseErrorEvent="RaiseErrorEvent",BroadcastEvent.NetworkDisconnected="NetworkDisconnected",BroadcastEvent.NetworkReconnected="NetworkReconnected",BroadcastEvent.SigninCardReceived="SignInCardReceived",BroadcastEvent.BotAuthConfigRequest="BotAuthConfigRequest",BroadcastEvent.BotAuthConfigResponse="BotAuthConfigResponse",BroadcastEvent.HideChatVisibilityChangeEvent="hideChatVisibilityChangeEvent",BroadcastEvent.UpdateSessionDataForTelemetry="UpdateSessionDataForTelemetry",BroadcastEvent.UpdateConversationDataForTelemetry="UpdateConversationDataForTelemetry"}(BroadcastEvent||(BroadcastEvent={})),function(TelemetryEvent){TelemetryEvent.CallAdded="CallAdded",TelemetryEvent.LocalVideoStreamAdded="LocalVideoStreamAdded",TelemetryEvent.LocalVideoStreamRemoved="LocalVideoStreamRemoved",TelemetryEvent.RemoteVideoStreamAdded="RemoteVideoStreamAdded",TelemetryEvent.RemoteVideoStreamRemoved="RemoteVideoStreamRemoved",TelemetryEvent.CallDisconnected="CallDisconnected",TelemetryEvent.CallDisconnectedException="CallDisconnectedException",TelemetryEvent.IncomingCallEnded="incomingCallEnded",TelemetryEvent.VoiceVideoSdkInitialize="VoiceVideoSdkInitialize",TelemetryEvent.VoiceVideoSdkInitializeException="VoiceVideoSdkInitializeException",TelemetryEvent.VoiceVideoLoading="VoiceVideoLoading",TelemetryEvent.VoiceVideoNotLoaded="VoiceVideoNotLoaded",TelemetryEvent.VoiceVideoLoadingException="VoiceVideoLoadingException",TelemetryEvent.VoiceVideoAcceptCallException="VoiceVideoAcceptCallException",TelemetryEvent.VoiceVideoAcceptCallWithVideoException="VoiceVideoAcceptCallWithVideoException",TelemetryEvent.VideoCallAcceptButtonClick="VideoCallAcceptButtonClick",TelemetryEvent.VoiceCallAcceptButtonClick="VoiceCallAcceptButtonClick",TelemetryEvent.CallRejectClick="CallRejectClick",TelemetryEvent.CallRejectClickException="CallRejectClickException",TelemetryEvent.ToggleMuteButtonClick="ToggleMuteButtonClick",TelemetryEvent.ToggleMuteButtonClickException="ToggleMuteButtonClickException",TelemetryEvent.ToggleCameraButtonClick="ToggleCameraButtonClick",TelemetryEvent.ToggleCameraButtonClickException="ToggleCameraButtonClickException",TelemetryEvent.EndCallButtonClick="EndCallButtonClick",TelemetryEvent.EndCallButtonClickException="EndCallButtonClickException",TelemetryEvent.CallingSDKInitSuccess="CallingSDKInitSuccess",TelemetryEvent.CallingSDKInitFailed="CallingSDKInitFailed",TelemetryEvent.CallingSDKLoadSuccess="CallingSDKLoadSuccess",TelemetryEvent.CallingSDKLoadFailed="CallingSDKLoadFailed",TelemetryEvent.GetConversationDetailsCallFailed="GetConversationDetailsCallFailed",TelemetryEvent.EndChatSDKCallFailed="EndChatSDKCallFailed",TelemetryEvent.GetChatReconnectContextSDKCallFailed="GetChatReconnectContextSDKCallFailed",TelemetryEvent.ParseAdaptiveCardFailed="ParseAdaptiveCardFailed",TelemetryEvent.ClientDataStoreProviderFailed="ClientDataStoreProviderFailed",TelemetryEvent.InMemoryDataStoreFailed="InMemoryDataStoreFailed",TelemetryEvent.ChatVisibilityChanged="ChatVisibilityChanged",TelemetryEvent.WebChatLoaded="WebChatLoaded",TelemetryEvent.LCWChatButtonClicked="LCWChatButtonClicked",TelemetryEvent.LCWChatButtonShow="LCWChatButtonShow",TelemetryEvent.WidgetLoadStarted="WidgetLoadStarted",TelemetryEvent.WidgetLoadComplete="WidgetLoadComplete",TelemetryEvent.WidgetLoadFailed="WidgetLoadFailed",TelemetryEvent.StartChatMethodException="StartChatMethodException",TelemetryEvent.CloseChatCall="CloseChatCall",TelemetryEvent.CloseChatMethodException="CloseChatMethodException",TelemetryEvent.PrechatSurveyLoaded="PrechatSurveyLoaded",TelemetryEvent.PrechatSubmitted="PrechatSubmitted",TelemetryEvent.StartChatSDKCall="StartChatCall",TelemetryEvent.StartChatEventRecevied="StartChatEventReceived",TelemetryEvent.EndChatSDKCall="EndChatSDKCall",TelemetryEvent.EndChatEventReceived="EndChatEventReceived",TelemetryEvent.WindowClosed="WindowClosed",TelemetryEvent.OnNewMessageFailed="OnNewMessageFailed",TelemetryEvent.OnNewMessageAudioNotificationFailed="OnNewMessageAudioNotificationFailed",TelemetryEvent.DownloadTranscriptResponseNullOrUndefined="DownloadTranscriptResponseNullOrUndefined",TelemetryEvent.EmailTranscriptSent="EmailTranscriptSent",TelemetryEvent.EmailTranscriptFailed="EmailTranscriptFailed",TelemetryEvent.ErrorUIPaneLoaded="ErrorUIPaneLoaded",TelemetryEvent.DownloadTranscriptFailed="DownloadTranscriptFailed",TelemetryEvent.StartChatFailed="StartChatFailed",TelemetryEvent.IC3ThreadUpdateEventReceived="IC3ThreadUpdateEventReceived",TelemetryEvent.ConfirmationCancelButtonClicked="ConfirmationCancelButtonClicked",TelemetryEvent.ConfirmationConfirmButtonClicked="ConfirmationConfirmButtonClicked",TelemetryEvent.LoadingPaneLoaded="LoadingPaneLoaded",TelemetryEvent.EmailTranscriptLoaded="EmailTranscriptLoaded",TelemetryEvent.OutOfOfficePaneLoaded="OutOfOfficePaneLoaded",TelemetryEvent.ConfirmationPaneLoaded="ConfirmationPaneLoaded",TelemetryEvent.ProactiveChatPaneLoaded="ProactiveChatPaneLoaded",TelemetryEvent.ReconnectChatPaneLoaded="ReconnectChatPaneLoaded",TelemetryEvent.HeaderCloseButtonClicked="HeaderCloseButtonClicked",TelemetryEvent.HeaderMinimizeButtonClicked="HeaderMinimizeButtonClicked",TelemetryEvent.DownloadTranscriptButtonClicked="DownloadTranscriptButtonClicked",TelemetryEvent.EmailTranscriptButtonClicked="EmailTranscriptButtonClicked",TelemetryEvent.EmailTranscriptCancelButtonClicked="EmailTranscriptCancelButtonClicked",TelemetryEvent.AudioToggleButtonClicked="AudioToggleButtonClicked",TelemetryEvent.SuppressBotMagicCodeSucceeded="SuppressBotMagicCodeSucceeded",TelemetryEvent.SuppressBotMagicCodeFailed="SuppressBotMagicCodeFailed",TelemetryEvent.GetConversationDetailsException="GetConversationDetailsException",TelemetryEvent.AppStatesException="AppStatesException",TelemetryEvent.BrowserUnloadEventStarted="BrowserUnloadEventStarted",TelemetryEvent.GetAuthTokenCalled="GetAuthTokenCalled",TelemetryEvent.GetAuthTokenFailed="GetAuthTokenFailed",TelemetryEvent.ReceivedNullOrEmptyToken="ReceivedNullOrEmptyToken",TelemetryEvent.CustomerVoiceResponsePageLoaded="CustomerVoiceResponsePageLoaded",TelemetryEvent.CustomerVoiceFormResponseSubmitted="CustomerVoiceFormResponseSubmitted",TelemetryEvent.CustomerVoiceFormResponseError="CustomerVoiceFormResponseError",TelemetryEvent.BotAuthActivityEmptySasUrl="BotAuthActivityEmptySasUrl",TelemetryEvent.SetBotAuthProviderFetchConfig="SetBotAuthProviderFetchConfig",TelemetryEvent.SetBotAuthProviderHideCard="SetBotAuthProviderHideCard",TelemetryEvent.SetBotAuthProviderDisplayCard="SetBotAuthProviderDisplayCard",TelemetryEvent.SetBotAuthProviderNotFound="SetBotAuthProviderNotFound",TelemetryEvent.ProcessingHTMLTextMiddlewareFailed="ProcessingHTMLTextMiddlewareFailed",TelemetryEvent.ProcessingSanitizationMiddlewareFailed="ProcessingSanitizationMiddlewareFailed",TelemetryEvent.FormatTagsMiddlewareJSONStringifyFailed="FormatTagsMiddlewareJSONStringifyFailed",TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed="AttachmentUploadValidatorMiddlewareFailed",TelemetryEvent.QueuePositionMessageRecieved="QueuePositionMessageRecieved",TelemetryEvent.AverageWaitTimeMessageRecieved="AverageWaitTimeMessageRecieved",TelemetryEvent.DataMaskingRuleApplied="DataMaskingRuleApplied",TelemetryEvent.DataMaskingRuleApplyFailed="DataMaskingRuleApplyFailed",TelemetryEvent.IC3ClientEvent="IC3ClientEvent",TelemetryEvent.ConversationEndedThreadEventReceived="ConversationEndedThreadEventReceived",TelemetryEvent.ConversationEndedByCustomer="ConversationEndedByCustomer",TelemetryEvent.ConversationEndedByAgent="ConversationEndedByAgent",TelemetryEvent.InvalidConfiguration="InvalidConfiguration",TelemetryEvent.SendTypingIndicatorSucceeded="SendTypingIndicatorSucceeded",TelemetryEvent.SendTypingIndicatorFailed="SendTypingIndicatorFailed",TelemetryEvent.WebChatEvent="WebChatEvent",TelemetryEvent.PreChatSurveyStartChatMethodFailed="PreChatSurveyStartChatMethodFailed",TelemetryEvent.ChatAlreadyTriggered="ChatAlreadyTriggered",TelemetryEvent.StartProactiveChatEventReceived="StartProactiveChatEventReceived",TelemetryEvent.StartProactiveChatMethodFailed="StartProactiveChatMethodFailed",TelemetryEvent.ProactiveChatAccepted="ProactiveChatAccepted",TelemetryEvent.ProactiveChatRejected="ProactiveChatRejected",TelemetryEvent.IncomingProactiveChatScreenLoaded="IncomingProactiveChatScreenLoaded",TelemetryEvent.ProactiveChatClosed="ProactiveChatClosed",TelemetryEvent.ReconnectChatContinueConversation="ReconnectChatContinueConversation",TelemetryEvent.ReconnectChatStartNewConversation="ReconnectChatStartNewConversation",TelemetryEvent.ReconnectChatMinimize="ReconnectChatMinimize",TelemetryEvent.MessageSent="MessageSent",TelemetryEvent.MessageReceived="MessageReceived",TelemetryEvent.SystemMessageReceived="SystemMessageReceived",TelemetryEvent.HistoryMessageReceived="HistoryMessageReceived",TelemetryEvent.CustomContextReceived="CustomContextReceived",TelemetryEvent.NetworkDisconnected="NetworkDisconnected",TelemetryEvent.NetworkReconnected="NetworkReconnected",TelemetryEvent.LinkModePostChatWorkflowStarted="LinkModePostChatWorkflowStarted",TelemetryEvent.EmbedModePostChatWorkflowStarted="EmbedModePostChatWorkflowStarted",TelemetryEvent.PostChatWorkflowFromCustomer="PostChatWorkflowFromCustomer",TelemetryEvent.PostChatWorkflowFromAgent="PostChatWorkflowFromAgent",TelemetryEvent.PostChatWorkflowFromBot="PostChatWorkflowFromBot",TelemetryEvent.PostChatContextCallSucceed="PostChatContextCallSucceed",TelemetryEvent.PostChatContextCallFailed="PostChatContextCallFailed",TelemetryEvent.PostChatSurveyLoadingPaneLoaded="PostChatSurveyLoadingPaneLoaded",TelemetryEvent.PostChatSurveyLoaded="PostChatSurveyLoaded",TelemetryEvent.ChatDisconnectThreadEventReceived="ChatDisconnectThreadEventReceived"}(TelemetryEvent||(TelemetryEvent={}));var TelemetryConstants=function(){function TelemetryConstants(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TelemetryConstants)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TelemetryConstants,null,[{key:"map",value:function map(eventTypeOrScenarioType){switch(eventTypeOrScenarioType){case TelemetryEvent.ParseAdaptiveCardFailed:case TelemetryEvent.ReceivedNullOrEmptyToken:case TelemetryEvent.GetAuthTokenCalled:case TelemetryEvent.SuppressBotMagicCodeSucceeded:case TelemetryEvent.SuppressBotMagicCodeFailed:return ScenarioType.CONFIG_VALIDATION;case TelemetryEvent.WebChatLoaded:case TelemetryEvent.WidgetLoadComplete:case TelemetryEvent.WidgetLoadFailed:case TelemetryEvent.IncomingProactiveChatScreenLoaded:case TelemetryEvent.LCWChatButtonShow:case TelemetryEvent.PrechatSurveyLoaded:case TelemetryEvent.LoadingPaneLoaded:case TelemetryEvent.PostChatSurveyLoadingPaneLoaded:case TelemetryEvent.PostChatSurveyLoaded:case TelemetryEvent.EmailTranscriptLoaded:case TelemetryEvent.OutOfOfficePaneLoaded:case TelemetryEvent.ConfirmationPaneLoaded:case TelemetryEvent.ProactiveChatPaneLoaded:return ScenarioType.LOAD;case TelemetryEvent.PrechatSubmitted:case TelemetryEvent.LCWChatButtonClicked:case TelemetryEvent.ProactiveChatAccepted:case TelemetryEvent.ProactiveChatRejected:case TelemetryEvent.ProactiveChatClosed:case TelemetryEvent.ProcessingHTMLTextMiddlewareFailed:case TelemetryEvent.DataMaskingRuleApplied:case TelemetryEvent.ConversationEndedThreadEventReceived:case TelemetryEvent.InvalidConfiguration:case TelemetryEvent.DownloadTranscriptResponseNullOrUndefined:case TelemetryEvent.EmailTranscriptSent:case TelemetryEvent.EmailTranscriptFailed:case TelemetryEvent.DownloadTranscriptFailed:case TelemetryEvent.IC3ThreadUpdateEventReceived:case TelemetryEvent.ConfirmationCancelButtonClicked:case TelemetryEvent.ConfirmationConfirmButtonClicked:case TelemetryEvent.PreChatSurveyStartChatMethodFailed:case TelemetryEvent.HeaderCloseButtonClicked:case TelemetryEvent.HeaderMinimizeButtonClicked:case TelemetryEvent.MessageSent:case TelemetryEvent.MessageReceived:case TelemetryEvent.CustomContextReceived:case TelemetryEvent.BrowserUnloadEventStarted:case TelemetryEvent.NetworkDisconnected:case TelemetryEvent.NetworkReconnected:case TelemetryEvent.AudioToggleButtonClicked:case TelemetryEvent.EmailTranscriptCancelButtonClicked:case TelemetryEvent.CustomerVoiceResponsePageLoaded:case TelemetryEvent.CustomerVoiceFormResponseSubmitted:case TelemetryEvent.CustomerVoiceFormResponseError:case TelemetryEvent.LinkModePostChatWorkflowStarted:case TelemetryEvent.EmbedModePostChatWorkflowStarted:case TelemetryEvent.PostChatWorkflowFromCustomer:case TelemetryEvent.PostChatWorkflowFromAgent:case TelemetryEvent.PostChatWorkflowFromBot:case TelemetryEvent.AppStatesException:return ScenarioType.ACTIONS;case TelemetryEvent.StartChatSDKCall:case TelemetryEvent.StartChatEventRecevied:case TelemetryEvent.StartChatMethodException:case TelemetryEvent.CloseChatMethodException:case TelemetryEvent.StartProactiveChatEventReceived:case TelemetryEvent.StartProactiveChatMethodFailed:case TelemetryEvent.OnNewMessageFailed:case TelemetryEvent.OnNewMessageAudioNotificationFailed:case TelemetryEvent.GetConversationDetailsCallFailed:case TelemetryEvent.EndChatSDKCall:case TelemetryEvent.EndChatEventReceived:case TelemetryEvent.EndChatSDKCallFailed:case TelemetryEvent.PostChatContextCallFailed:case TelemetryEvent.PostChatContextCallSucceed:case TelemetryEvent.GetConversationDetailsException:return ScenarioType.SDK;case TelemetryEvent.VideoCallAcceptButtonClick:case TelemetryEvent.CallAdded:case TelemetryEvent.LocalVideoStreamAdded:case TelemetryEvent.LocalVideoStreamRemoved:case TelemetryEvent.RemoteVideoStreamAdded:case TelemetryEvent.RemoteVideoStreamRemoved:case TelemetryEvent.CallDisconnected:case TelemetryEvent.CallDisconnectedException:case TelemetryEvent.IncomingCallEnded:case TelemetryEvent.VoiceVideoSdkInitialize:case TelemetryEvent.VoiceVideoSdkInitializeException:case TelemetryEvent.VoiceVideoLoading:case TelemetryEvent.VoiceVideoNotLoaded:case TelemetryEvent.VoiceVideoLoadingException:case TelemetryEvent.VoiceVideoAcceptCallException:case TelemetryEvent.VoiceVideoAcceptCallWithVideoException:case TelemetryEvent.VoiceCallAcceptButtonClick:case TelemetryEvent.CallRejectClick:case TelemetryEvent.CallRejectClickException:case TelemetryEvent.ToggleMuteButtonClick:case TelemetryEvent.ToggleMuteButtonClickException:case TelemetryEvent.ToggleCameraButtonClick:case TelemetryEvent.ToggleCameraButtonClickException:case TelemetryEvent.EndCallButtonClick:case TelemetryEvent.EndCallButtonClickException:case TelemetryEvent.CallingSDKInitSuccess:case TelemetryEvent.CallingSDKInitFailed:case TelemetryEvent.CallingSDKLoadSuccess:case TelemetryEvent.CallingSDKLoadFailed:return ScenarioType.CALLING;default:return ScenarioType.ACTIONS}}},{key:"mapEventToScenario",value:function mapEventToScenario(eventTypeOrScenarioType){return TelemetryConstants.map(eventTypeOrScenarioType)}}]),TelemetryConstants}(),Constants=__webpack_require__("./src/common/Constants.ts"),Stack=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js");__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.ends-with.js");function DataStoreManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DataStoreManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DataStoreManager_createClass(Constructor,protoProps,staticProps){return protoProps&&DataStoreManager_defineProperties(Constructor.prototype,protoProps),staticProps&&DataStoreManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var _class,DataStoreManager=DataStoreManager_createClass((function DataStoreManager(){!function DataStoreManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DataStoreManager)}));function KeyCodes_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function KeyCodes_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function KeyCodes_createClass(Constructor,protoProps,staticProps){return protoProps&&KeyCodes_defineProperties(Constructor.prototype,protoProps),staticProps&&KeyCodes_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}DataStoreManager.clientDataStore=void 0;var KeyCodes=(_class=KeyCodes_createClass((function KeyCodes(){!function KeyCodes_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KeyCodes)})),_class.ENTER="Enter",_class.TAB="Tab",_class),dist=__webpack_require__("./node_modules/md5-typescript/dist/index.js"),AriaSDK=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/external/aria/webjs/AriaSDK.js"),Enums=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/external/aria/common/Enums.js"),defaultAriaConfig={collectorUriForTelemetry:"",ariaTelemetryKey:"c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083",ariaTelemetryApplicationName:"D365_Omnichannel_Client_Public_Prod",disableCookieUsage:!0};function TelemetryManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TelemetryManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function TelemetryManager_createClass(Constructor,protoProps,staticProps){return protoProps&&TelemetryManager_defineProperties(Constructor.prototype,protoProps),staticProps&&TelemetryManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function TelemetryManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TelemetryTimers=TelemetryManager_createClass((function TelemetryTimers(){TelemetryManager_classCallCheck(this,TelemetryTimers)}));TelemetryTimers.LcwLoadToChatButtonTimer=void 0,TelemetryTimers.ProactiveChatScreenTimer=void 0,TelemetryTimers.WidgetLoadTimer=void 0;var TelemetryManager=TelemetryManager_createClass((function TelemetryManager(){TelemetryManager_classCallCheck(this,TelemetryManager)}));TelemetryManager.InternalTelemetryData=void 0;var loggers=[],TelemetryManager_RegisterLoggers=function RegisterLoggers(){var logTelemetry=function logTelemetry(telemetryEvent){loggers.map((function(logger){var _logLevel,_payload$scenarioType,_payload,logLevel=null!==(_logLevel=telemetryEvent.logLevel)&&void 0!==_logLevel?_logLevel:LogLevel.INFO,scenarioType=null!==(_payload$scenarioType=null===(_payload=telemetryEvent.payload)||void 0===_payload?void 0:_payload.scenarioType)&&void 0!==_payload$scenarioType?_payload$scenarioType:ScenarioType.UNDEFINED,telemetryInput=function parseInput(payload){var scenarioType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ScenarioType.UNDEFINED;return{scenarioType:scenarioType==ScenarioType.UNDEFINED?TelemetryConstants.mapEventToScenario(payload.Event):scenarioType,payload:payload}}(null==telemetryEvent?void 0:telemetryEvent.payload,scenarioType);telemetryInput.telemetryInfo={telemetryInfo:TelemetryHelper_TelemetryHelper.buildTelemetryEvent(logLevel,telemetryInput)},logger.log(logLevel,telemetryInput)}))};return function registerLoggers(){var _TelemetryManager$Int,_TelemetryManager$Int2,_TelemetryManager$Int3,_TelemetryManager$Int4,_TelemetryManager$Int5,_TelemetryManager$Int6,_TelemetryManager$Int7,_TelemetryManager$Int8;if(!1!==(null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int||null===(_TelemetryManager$Int2=_TelemetryManager$Int.telemetryConfig)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.disableConsoleLog)&&!1!==(null===(_TelemetryManager$Int3=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int3||null===(_TelemetryManager$Int4=_TelemetryManager$Int3.telemetryConfig)||void 0===_TelemetryManager$Int4?void 0:_TelemetryManager$Int4.telemetryDisabled)||cjs.BroadcastService.getAnyMessage().subscribe((function(event){event.payload&&event.eventName in TelemetryEvent&&logTelemetry(event)})),!1===(null===(_TelemetryManager$Int5=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int5||null===(_TelemetryManager$Int6=_TelemetryManager$Int5.telemetryConfig)||void 0===_TelemetryManager$Int6?void 0:_TelemetryManager$Int6.disableConsoleLog)&&loggers.push(function consoleLogger(){var consoleLogger={log:function log(logLevel,telemetryInput){var payload=null!=telemetryInput&&telemetryInput.payload&&Object.keys(null==telemetryInput?void 0:telemetryInput.payload).length>0?null==telemetryInput?void 0:telemetryInput.payload:"",telemetryInfo=null!=telemetryInput&&telemetryInput.telemetryInfo&&Object.keys(null==telemetryInput?void 0:telemetryInput.telemetryInfo).length>0?null==telemetryInput?void 0:telemetryInput.telemetryInfo:"";try{switch(logLevel){case LogLevel.INFO:console.info(Constants.d.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.DEBUG:console.debug(Constants.d.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.WARN:console.warn(Constants.d.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.ERROR:console.error(Constants.d.LiveChatWidget,payload,telemetryInfo);break;default:console.debug(Constants.d.LiveChatWidget,payload,telemetryInfo)}}catch(ex){console.error("An unexpected error occurred in the Telemetry client: "+ex)}},dispose:function dispose(){console.log("disposing loggers")}};return consoleLogger}()),!1===(null===(_TelemetryManager$Int7=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int7||null===(_TelemetryManager$Int8=_TelemetryManager$Int7.telemetryConfig)||void 0===_TelemetryManager$Int8?void 0:_TelemetryManager$Int8.telemetryDisabled)){var _TelemetryManager$Int9,_TelemetryManager$Int22,_TelemetryManager$Int23,_TelemetryManager$Int10,_TelemetryManager$Int11,_TelemetryManager$Int12,_TelemetryManager$Int13,_TelemetryManager$Int14,_TelemetryManager$Int15,_TelemetryManager$Int16,_TelemetryManager$Int17,_TelemetryManager$Int18,_TelemetryManager$Int19,_TelemetryManager$Int20,_TelemetryManager$Int21;if(null!==(_TelemetryManager$Int9=TelemetryManager.InternalTelemetryData)&&void 0!==_TelemetryManager$Int9&&_TelemetryManager$Int9.ariaConfig)loggers.push(function ariaTelemetryLogger(ariaTelemetryKey,disabledCookieUsage,collectiorUriForTelemetry,ariaTelemetryApplicationName){var _logger,logger=function logger(){if(isNullOrUndefined(_logger)&&!isNullOrEmptyString(ariaTelemetryKey)){var configuration={disableCookiesUsage:disabledCookieUsage};if(isNullOrEmptyString(collectiorUriForTelemetry)){if(TelemetryManager.InternalTelemetryData.environmentVersion==Constants.f.prod){var _TelemetryManager$Int,orgUrl=null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int?void 0:_TelemetryManager$Int.orgUrl;isNullOrUndefined(orgUrl)||utils_getDomain(orgUrl)===Constants.b.EU&&(configuration.collectorUri=Constants.b.EUROPE_ENDPOINT)}}else configuration.collectorUri=collectiorUriForTelemetry;try{void 0===(_logger=AriaSDK.AWTLogManager.initialize(ariaTelemetryKey,configuration))&&(_logger=AriaSDK.AWTLogManager.getLogger(ariaTelemetryKey))}catch(error){console.log(error)}}return _logger};return{log:function log(logLevel,telemetryInput){try{var _telemetryInput$telem,telemetryInfo=null==telemetryInput||null===(_telemetryInput$telem=telemetryInput.telemetryInfo)||void 0===_telemetryInput$telem?void 0:_telemetryInput$telem.telemetryInfo,eventProperties={name:telemetryInput.scenarioType,properties:{}};if(telemetryInfo){Object.keys(telemetryInfo).forEach((function(key,index){if(!isNullOrUndefined(telemetryInfo[key])&&!isNullOrEmptyString(telemetryInfo[key])){var property={value:"object"==typeof telemetryInfo[key]?JSON.stringify(telemetryInfo[key]):telemetryInfo[key],type:"number"==typeof telemetryInfo[key]?Enums.AWTPropertyType.Double:Enums.AWTPropertyType.String,pii:Enums.AWTPiiKind.NotSet,cc:Enums.AWTCustomerContentKind.NotSet};eventProperties.properties[key]=property}}));var nameProperty={value:Constants.d.LiveChatWidget,type:Enums.AWTPropertyType.String,pii:Enums.AWTPiiKind.GenericData,cc:Enums.AWTCustomerContentKind.NotSet};eventProperties.properties[ariaTelemetryApplicationName]=nameProperty}logger()?logger().logEvent(eventProperties):console.log("Unable to initialize aria logger")}catch(error){console.error("Error in logging telemetry to Aria logger:"+error)}},dispose:function dispose(){AriaSDK.AWTLogManager.flush((function(){console.log("Aria logger disposed")}))}}}(null!==(_TelemetryManager$Int10=null===(_TelemetryManager$Int11=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int11||null===(_TelemetryManager$Int12=_TelemetryManager$Int11.ariaConfig)||void 0===_TelemetryManager$Int12?void 0:_TelemetryManager$Int12.ariaTelemetryKey)&&void 0!==_TelemetryManager$Int10?_TelemetryManager$Int10:defaultAriaConfig.ariaTelemetryKey,null!==(_TelemetryManager$Int13=null===(_TelemetryManager$Int14=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int14||null===(_TelemetryManager$Int15=_TelemetryManager$Int14.ariaConfig)||void 0===_TelemetryManager$Int15?void 0:_TelemetryManager$Int15.disableCookieUsage)&&void 0!==_TelemetryManager$Int13?_TelemetryManager$Int13:defaultAriaConfig.disableCookieUsage,null!==(_TelemetryManager$Int16=null===(_TelemetryManager$Int17=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int17||null===(_TelemetryManager$Int18=_TelemetryManager$Int17.ariaConfig)||void 0===_TelemetryManager$Int18?void 0:_TelemetryManager$Int18.collectorUriForTelemetry)&&void 0!==_TelemetryManager$Int16?_TelemetryManager$Int16:defaultAriaConfig.collectorUriForTelemetry,null!==(_TelemetryManager$Int19=null===(_TelemetryManager$Int20=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int20||null===(_TelemetryManager$Int21=_TelemetryManager$Int20.ariaConfig)||void 0===_TelemetryManager$Int21?void 0:_TelemetryManager$Int21.ariaTelemetryApplicationName)&&void 0!==_TelemetryManager$Int19?_TelemetryManager$Int19:defaultAriaConfig.ariaTelemetryApplicationName));var customLoggers=null===(_TelemetryManager$Int22=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int22||null===(_TelemetryManager$Int23=_TelemetryManager$Int22.telemetryConfig)||void 0===_TelemetryManager$Int23?void 0:_TelemetryManager$Int23.telemetryLoggers;customLoggers&&customLoggers.map((function(logger){loggers.push(logger)}))}}()};function TelemetryHelper_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TelemetryHelper_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var TelemetryHelper_TelemetryHelper=function(){function TelemetryHelper(){!function TelemetryHelper_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TelemetryHelper)}return function TelemetryHelper_createClass(Constructor,protoProps,staticProps){return protoProps&&TelemetryHelper_defineProperties(Constructor.prototype,protoProps),staticProps&&TelemetryHelper_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TelemetryHelper,null,[{key:"buildTelemetryEvent",value:function buildTelemetryEvent(level,input){switch(input.scenarioType){case ScenarioType.LOAD:return TelemetryHelper.conformToLoadContract(level,input);case ScenarioType.IC3_CLIENT:return TelemetryHelper.conformToIC3ClientContract(level,input);case ScenarioType.WEBCHAT:return TelemetryHelper.conformToWebChatContract(level,input);case ScenarioType.OCCHATSDK:return TelemetryHelper.conformToOCChatSDKContract(level,input);case ScenarioType.ACTIONS:return TelemetryHelper.conformToActionsContract(level,input);case ScenarioType.CALLING:return TelemetryHelper.conformToCallingContract(level,input);case ScenarioType.ACS_ADAPTER:return TelemetryHelper.conformToACSAdapterContract(level,input);default:case ScenarioType.CONFIG_VALIDATION:return TelemetryHelper.conformToConfigValidationContract(level,input)}}},{key:"populateBasicProperties",value:function populateBasicProperties(level,telemetryData){var _TelemetryManager$Int,_TelemetryManager$Int2,_TelemetryManager$Int3,_TelemetryManager$Int4,_TelemetryManager$Int5,_TelemetryManager$Int6,_TelemetryManager$Int7,_TelemetryManager$Int8,_TelemetryManager$Int9,_TelemetryManager$Int10,_TelemetryManager$Int11,_TelemetryManager$Int12,_TelemetryManager$Int13,_TelemetryManager$Int14;return{WidgetId:null!==(_TelemetryManager$Int=null===(_TelemetryManager$Int2=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.widgetId)&&void 0!==_TelemetryManager$Int?_TelemetryManager$Int:"",ChatId:null!==(_TelemetryManager$Int3=null===(_TelemetryManager$Int4=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int4?void 0:_TelemetryManager$Int4.chatId)&&void 0!==_TelemetryManager$Int3?_TelemetryManager$Int3:"",ChannelId:null!==(_TelemetryManager$Int5=null===(_TelemetryManager$Int6=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int6?void 0:_TelemetryManager$Int6.channelId)&&void 0!==_TelemetryManager$Int5?_TelemetryManager$Int5:"lcw2.0",ConversationId:null!==(_TelemetryManager$Int7=null===(_TelemetryManager$Int8=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int8?void 0:_TelemetryManager$Int8.conversationId)&&void 0!==_TelemetryManager$Int7?_TelemetryManager$Int7:"",OrganizationId:null!==(_TelemetryManager$Int9=null===(_TelemetryManager$Int10=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int10?void 0:_TelemetryManager$Int10.orgId)&&void 0!==_TelemetryManager$Int9?_TelemetryManager$Int9:"",LCWRuntimeId:null!==(_TelemetryManager$Int11=null===(_TelemetryManager$Int12=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int12?void 0:_TelemetryManager$Int12.lcwRuntimeId)&&void 0!==_TelemetryManager$Int11?_TelemetryManager$Int11:"",CurrentRequestId:null!==(_TelemetryManager$Int13=null===(_TelemetryManager$Int14=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int14?void 0:_TelemetryManager$Int14.currentRequestId)&&void 0!==_TelemetryManager$Int13?_TelemetryManager$Int13:"",LogLevel:level}}},{key:"populate",value:function populate(level,telemetryData,configure){var event=TelemetryHelper.populateBasicProperties(level,telemetryData);return configure(event),event}},{key:"conformToActionsContract",value:function conformToActionsContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Event=payload.Event,event.ActionType=payload.ActionType,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Description=payload.Description,event.CustomProperties=JSON.stringify(payload.CustomProperties)}))}},{key:"conformToWebChatContract",value:function conformToWebChatContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Event=payload.type,event.EventInfo=payload.name,event.Dimensions=payload.dimensions,event.Data=payload.data,event.Duration=payload.duration,event.ExceptionDetails=JSON.stringify(payload.error)}))}},{key:"conformToConfigValidationContract",value:function conformToConfigValidationContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int15,_TelemetryManager$Int16,_TelemetryManager$Int17;event.Event=payload.Event,event.RequestId=payload.RequestId,event.LCWVersion=null===(_TelemetryManager$Int15=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int15?void 0:_TelemetryManager$Int15.environmentVersion,event.CloudType=payload.CloudType,event.Domain=null===(_TelemetryManager$Int16=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int16?void 0:_TelemetryManager$Int16.hostName,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Language=(null===(_TelemetryManager$Int17=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int17?void 0:_TelemetryManager$Int17.chatWidgetLocaleLCID)||"",event.Description=payload.Data}))}},{key:"conformToLoadContract",value:function conformToLoadContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int18,_TelemetryManager$Int19,_TelemetryManager$Int20,_TelemetryManager$Int21,_TelemetryManager$Int22,_TelemetryManager$Int23;event.Event=payload.Event,event.ResourcePath=payload.ResourcePath,event.WidgetState=payload.WidgetState,event.ChatState=payload.ChatState,event.ChatType=payload.ChatType,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.OCChatSDKVersion=null!==(_TelemetryManager$Int18=null===(_TelemetryManager$Int19=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int19?void 0:_TelemetryManager$Int19.OCChatSDKVersion)&&void 0!==_TelemetryManager$Int18?_TelemetryManager$Int18:"",event.OCChatWidgetVersion=null!==(_TelemetryManager$Int20=null===(_TelemetryManager$Int21=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int21?void 0:_TelemetryManager$Int21.chatWidgetVersion)&&void 0!==_TelemetryManager$Int20?_TelemetryManager$Int20:"",event.OCChatComponentsVersion=null!==(_TelemetryManager$Int22=null===(_TelemetryManager$Int23=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int23?void 0:_TelemetryManager$Int23.chatComponentVersion)&&void 0!==_TelemetryManager$Int22?_TelemetryManager$Int22:""}))}},{key:"conformToIC3ClientContract",value:function conformToIC3ClientContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int24;event.Event=payload.Event,event.IC3ClientVersion=null===(_TelemetryManager$Int24=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int24?void 0:_TelemetryManager$Int24.IC3ClientVersion,event.SubscriptionId=payload.SubscriptionId,event.EndpointUrl=payload.EndpointUrl,event.EndpointId=payload.EndpointId,event.ErrorCode=payload.ErrorCode,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.ShouldBubbleToHost=payload.ShouldBubbleToHost,event.Description=payload.Description}))}},{key:"conformToACSAdapterContract",value:function conformToACSAdapterContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Description=payload.Description,event.ACSUserId=payload.ACSUserId,event.ChatThreadId=payload.ChatThreadId,event.ChatMessageId=payload.ChatMessageId,event.TimeStamp=payload.TimeStamp,event.Event=payload.Event,event.ErrorCode=payload.ErrorCode,event.ExceptionDetails=payload.ExceptionDetails}))}},{key:"conformToCallingContract",value:function conformToCallingContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.CallId=payload.CallId,event.Event=payload.Event,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Description=payload.Description}))}},{key:"conformToOCChatSDKContract",value:function conformToOCChatSDKContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int25;event.RequestId=payload.RequestId,event.Event=payload.Event,event.OCChatSDKVersion=null!==(_TelemetryManager$Int25=TelemetryManager.InternalTelemetryData.OCChatSDKVersion)&&void 0!==_TelemetryManager$Int25?_TelemetryManager$Int25:"",event.TransactionId=payload.TransactionId,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails)}))}},{key:"addChatConfigDataToTelemetry",value:function addChatConfigDataToTelemetry(chatConfig,telemetryInternalData){var _chatConfig$ChatWidge,telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.chatWidgetLocaleLCID=null===(_chatConfig$ChatWidge=chatConfig.ChatWidgetLanguage)||void 0===_chatConfig$ChatWidge?void 0:_chatConfig$ChatWidge.msdyn_localeid,telemetryDataLocal}},{key:"addWidgetDataToTelemetry",value:function addWidgetDataToTelemetry(telemetryConfig,telemetryInternalData){var _telemetryConfig$LCWR,telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.widgetId=null==telemetryConfig?void 0:telemetryConfig.appId,telemetryDataLocal.orgId=null==telemetryConfig?void 0:telemetryConfig.orgId,telemetryDataLocal.orgUrl=null==telemetryConfig?void 0:telemetryConfig.orgUrl,telemetryDataLocal.lcwRuntimeId=null!==(_telemetryConfig$LCWR=telemetryConfig.LCWRuntimeId)&&void 0!==_telemetryConfig$LCWR?_telemetryConfig$LCWR:utils_newGuid(),telemetryDataLocal}},{key:"addSessionDataToTelemetry",value:function addSessionDataToTelemetry(chatSession,telemetryInternalData){var _chatSession$chatToke,_chatSession$chatToke2,telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.chatId=null==chatSession||null===(_chatSession$chatToke=chatSession.chatToken)||void 0===_chatSession$chatToke?void 0:_chatSession$chatToke.chatId,telemetryDataLocal.currentRequestId=null==chatSession||null===(_chatSession$chatToke2=chatSession.chatToken)||void 0===_chatSession$chatToke2?void 0:_chatSession$chatToke2.requestId,telemetryInternalData}},{key:"addConversationDataToTelemetry",value:function addConversationDataToTelemetry(liveWorkItem,telemetryInternalData){var telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.conversationId=liveWorkItem.conversationId,telemetryDataLocal}}]),TelemetryHelper}();TelemetryHelper_TelemetryHelper.callId=void 0,TelemetryHelper_TelemetryHelper.elapsedTime=void 0,TelemetryHelper_TelemetryHelper.logCallingEvent=function(logLevel,payload,callId){var _payload$Event,telemetryEvent={eventName:null!==(_payload$Event=null==payload?void 0:payload.Event)&&void 0!==_payload$Event?_payload$Event:"",logLevel:logLevel,payload:Object.assign({},payload,{CallId:callId})};cjs.BroadcastService.postMessage(telemetryEvent)},TelemetryHelper_TelemetryHelper.logLoadingEvent=function(logLevel,payload){var _payload$Event2,telemetryEvent={eventName:null!==(_payload$Event2=null==payload?void 0:payload.Event)&&void 0!==_payload$Event2?_payload$Event2:"",logLevel:logLevel,payload:Object.assign({},payload)};cjs.BroadcastService.postMessage(telemetryEvent)},TelemetryHelper_TelemetryHelper.logActionEvent=function(logLevel,payload){var _payload$Event3,telemetryEvent={eventName:null!==(_payload$Event3=null==payload?void 0:payload.Event)&&void 0!==_payload$Event3?_payload$Event3:"",logLevel:logLevel,payload:Object.assign({},payload)};cjs.BroadcastService.postMessage(telemetryEvent)},TelemetryHelper_TelemetryHelper.logSDKEvent=function(logLevel,payload){var _payload$Event4,_TelemetryManager$Int26,telemetryEvent={eventName:null!==(_payload$Event4=null==payload?void 0:payload.Event)&&void 0!==_payload$Event4?_payload$Event4:"",logLevel:logLevel,payload:Object.assign({},payload,{TransactionId:utils_newGuid(),RequestId:null===(_TelemetryManager$Int26=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int26?void 0:_TelemetryManager$Int26.currentRequestId})};cjs.BroadcastService.postMessage(telemetryEvent)},TelemetryHelper_TelemetryHelper.logConfigDataEvent=function(logLevel,payload){var _payload$Event5,telemetryEvent={eventName:null!==(_payload$Event5=null==payload?void 0:payload.Event)&&void 0!==_payload$Event5?_payload$Event5:"",logLevel:logLevel,payload:Object.assign({},payload)};cjs.BroadcastService.postMessage(telemetryEvent)},TelemetryHelper_TelemetryHelper.logWebChatEvent=function(logLevel,payload){var telemetryEvent={eventName:TelemetryEvent.WebChatEvent,logLevel:logLevel,payload:Object.assign({},payload,{type:TelemetryEvent.WebChatEvent,scenarioType:ScenarioType.WEBCHAT})};cjs.BroadcastService.postMessage(telemetryEvent)};function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getElementBySelector=function getElementBySelector(selector){return"string"==typeof selector?document.querySelector(selector):selector},setTabIndices=function setTabIndices(elements,tabIndexMap,shouldBeFocusable){if(elements)if(shouldBeFocusable){for(var index=0;index<elements.length;index++)tabIndexMap.has(elements[index].id)&&(elements[index].tabIndex=tabIndexMap.get(elements[index].id));tabIndexMap.clear()}else for(var _index2=0;_index2<elements.length;_index2++)tabIndexMap.set(elements[_index2].id,elements[_index2].tabIndex),elements[_index2].tabIndex=-1},findParentFocusableElementsWithoutChildContainer=function findParentFocusableElementsWithoutChildContainer(elementId){var childContainer=document.getElementById(elementId);if(!childContainer)return null;var parentContainer=childContainer.parentElement;if(!parentContainer)return null;var parentFocusableElements=findAllFocusableElement(parentContainer);if(!parentFocusableElements)return null;for(var index=0;index<parentFocusableElements.length;index++)childContainer.contains(parentFocusableElements[index])&&(parentFocusableElements.splice(index,1),index--);return parentFocusableElements},findAllFocusableElement=function findAllFocusableElement(parent){var container=getElementBySelector(parent);return null!==container?Array.prototype.slice.call(container.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')):null},utils_preventFocusToMoveOutOfElement=function preventFocusToMoveOutOfElement(elementId){var container=document.getElementById(elementId);if(container){var focusableElements=findAllFocusableElement(container);if(focusableElements){var firstFocusableElement=focusableElements[0],lastFocusableElement=focusableElements[focusableElements.length-1];firstFocusableElement.onkeydown=function(e){e.shiftKey&&e.key===KeyCodes.TAB&&(e.preventDefault(),null==lastFocusableElement||lastFocusableElement.focus())},lastFocusableElement.onkeydown=function(e){e.shiftKey||e.key!==KeyCodes.TAB||(e.preventDefault(),null==firstFocusableElement||firstFocusableElement.focus())}}}},setFocusOnSendBox=function setFocusOnSendBox(){setFocusOnElement('textarea[data-id="webchat-sendbox-input"]')},setFocusOnElement=function setFocusOnElement(selector){var element=getElementBySelector(selector);null==element||element.focus()},escapeHtml=function escapeHtml(inputString){var entityMap={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(inputString).replace(/[<>"'/]/g,(function(s){return entityMap[s]}))},getIconText=function getIconText(text){if(text){var initials=text.split(/\s/).reduce((function(response,word){return response+word.slice(0,1)}),"");return initials.length>1?initials.substring(0,2).toUpperCase():text.substring(0,2).toUpperCase()}return""},changeLanguageCodeFormatForWebChat=function changeLanguageCodeFormatForWebChat(languageCode){return languageCode.slice(0,-2)+languageCode.slice(-2).toUpperCase()},getTimestampHourMinute=function getTimestampHourMinute(timestampStr){var yearFormat,monthDayFormat,date=new Date(timestampStr),now=new Date;return isNaN(date.getTime())?"":(date.getFullYear()!==now.getFullYear()&&(yearFormat="numeric",monthDayFormat="2-digit"),date.getMonth()===now.getMonth()&&date.getDate()===now.getDate()||(monthDayFormat="2-digit"),date.toLocaleTimeString(navigator.language,{year:yearFormat,month:monthDayFormat,day:monthDayFormat,hour:"numeric",minute:"2-digit"}))},utils_extractPreChatSurveyResponseValues=function extractPreChatSurveyResponseValues(preChatSurvey,values){if(preChatSurvey&&"{}"!==preChatSurvey&&values)try{var _step2,body=JSON.parse(preChatSurvey).body,type={Type:Constants.d.InputSubmit},computedValues=[],_iterator2=_createForOfIteratorHelper(values);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var val=_step2.value;computedValues[body[val.index].id]=val.value}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return Object.assign({},type,computedValues)}catch(ex){throw new Error("PreChatSurvey Response parse error: "+ex)}return{}},isNullOrUndefined=function isNullOrUndefined(obj){return null==obj},isNullOrEmptyString=function isNullOrEmptyString(s){return isNullOrUndefined(s)||""===s},utils_newGuid=function newGuid(){for(var guidPattern=Constants.d.GuidPattern,newGuid="",i=0;i<guidPattern.length;i++){var randomString=Math.floor(Math.random()*Date.now());switch(guidPattern[i]){case"x":newGuid+=randomString.toString(16).substring(0,4);break;case"m":newGuid+=randomString.toString(16).substring(0,3);break;case"y":newGuid+=(3&randomString|8).toString(16);break;default:newGuid+=guidPattern[i]}}return newGuid},createTimer=function createTimer(){var timeStart=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-timeStart}}},utils_getDomain=function getDomain(hostValue){for(var i=0;i<Constants.b.lcwEUDomainNames.length;i++)if(hostValue.endsWith(Constants.b.lcwEUDomainNames[i]))return Constants.b.EU;return Constants.b.Public},utils_getWidgetCacheId=function getWidgetCacheId(orgId,widgetId,widgetInstanceId){var widgetCacheId=widgetInstanceId+"_"+orgId+"_"+widgetId;return dist.a.init(widgetCacheId)},utils_getWidgetEndChatEventName=function getWidgetEndChatEventName(orgId,widgetId,widgetInstanceId){return isNullOrEmptyString(widgetInstanceId)?BroadcastEvent.ChatEnded+"_"+orgId+"_"+widgetId:BroadcastEvent.ChatEnded+"_"+widgetInstanceId+"_"+orgId+"_"+widgetId},utils_getStateFromCache=function getStateFromCache(orgId,widgetId,widgetInstanceId){try{if(DataStoreManager.clientDataStore){var _DataStoreManager$cli,widgetStateEventName=utils_getWidgetCacheId(orgId,widgetId,widgetInstanceId),widgetStateFromCache=null===(_DataStoreManager$cli=DataStoreManager.clientDataStore)||void 0===_DataStoreManager$cli?void 0:_DataStoreManager$cli.getData(widgetStateEventName,"localStorage");return widgetStateFromCache?JSON.parse(widgetStateFromCache):void 0}return null}catch(error){return console.log(error),null}},isUndefinedOrEmpty=function isUndefinedOrEmpty(object){return!object||0===Object.keys(object).length},addDelayInMs=function addDelayInMs(ms){return new Promise((function(resolve){return setTimeout(resolve,ms)}))},getConversationDetailsCall=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(chatSDK){var conversationDetails;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return conversationDetails=void 0,_context.prev=1,_context.next=4,chatSDK.getConversationDetails();case 4:conversationDetails=_context.sent,_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(1),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetConversationDetailsCallFailed,ExceptionDetails:{exception:"Get Conversation Details Call Failed : "+_context.t0}});case 10:return _context.abrupt("return",conversationDetails);case 11:case"end":return _context.stop()}}),_callee,null,[[1,7]])})));return function getConversationDetailsCall(_x){return _ref.apply(this,arguments)}}();function authHelper_regeneratorRuntime(){authHelper_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function authHelper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var getAuthClientFunction=function getAuthClientFunction(chatConfig){var _msdyn_javascriptclie,_chatConfig$LiveChatC,authClientFunction=void 0;null!=chatConfig&&chatConfig.LiveChatConfigAuthSettings&&(authClientFunction=null!==(_msdyn_javascriptclie=null==chatConfig||null===(_chatConfig$LiveChatC=chatConfig.LiveChatConfigAuthSettings)||void 0===_chatConfig$LiveChatC?void 0:_chatConfig$LiveChatC.msdyn_javascriptclientfunction)&&void 0!==_msdyn_javascriptclie?_msdyn_javascriptclie:void 0);return authClientFunction},handleAuthentication=function(){var _ref=authHelper_asyncToGenerator(authHelper_regeneratorRuntime().mark((function _callee2(chatSDK,chatConfig,getAuthToken){var authClientFunction,token;return authHelper_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(authClientFunction=getAuthClientFunction(chatConfig),!getAuthToken||!authClientFunction){_context2.next=13;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.GetAuthTokenCalled}),_context2.next=5,getAuthToken(authClientFunction);case 5:if(token=_context2.sent,isNullOrEmptyString(token)){_context2.next=11;break}return chatSDK.setAuthTokenProvider(authHelper_asyncToGenerator(authHelper_regeneratorRuntime().mark((function _callee(){return authHelper_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",token);case 1:case"end":return _context.stop()}}),_callee)})))),_context2.abrupt("return",!0);case 11:return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ReceivedNullOrEmptyToken}),_context2.abrupt("return",!1);case 13:return _context2.abrupt("return",!1);case 14:case"end":return _context2.stop()}}),_callee2)})));return function handleAuthentication(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),removeAuthTokenProvider=function removeAuthTokenProvider(chatSDK){chatSDK.authenticatedUserToken=null};function Deferred_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Deferred_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Deferred=function(){function Deferred(){var _this=this;!function Deferred_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Deferred),this._promise=void 0,this._resolve=void 0,this._reject=function(){},this.resolve=function(value){_this._resolve(value)},this.reject=function(value){_this._reject(value)},this._promise=new Promise((function(resolve,reject){_this._resolve=resolve,_this._reject=reject}))}return function Deferred_createClass(Constructor,protoProps,staticProps){return protoProps&&Deferred_defineProperties(Constructor.prototype,protoProps),staticProps&&Deferred_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Deferred,[{key:"promise",get:function get(){return this._promise}}]),Deferred}();function ActivityStreamHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ActivityStreamHandler_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var ConversationState,LiveChatWidgetActionType,NotificationLevel,WebChatActionType,ActivityStreamHandler_ActivityStreamHandler=function(){function ActivityStreamHandler(){!function ActivityStreamHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityStreamHandler)}return function ActivityStreamHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityStreamHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityStreamHandler_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ActivityStreamHandler,null,[{key:"cork",value:function cork(){ActivityStreamHandler.restoreDeferred=new Deferred,ActivityStreamHandler.restorePromise=ActivityStreamHandler.restoreDeferred.promise}},{key:"uncork",value:function uncork(){ActivityStreamHandler.restoreDeferred.resolve()}}]),ActivityStreamHandler}();function WebChatStoreLoader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function WebChatStoreLoader_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function WebChatStoreLoader_createClass(Constructor,protoProps,staticProps){return protoProps&&WebChatStoreLoader_defineProperties(Constructor.prototype,protoProps),staticProps&&WebChatStoreLoader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}ActivityStreamHandler_ActivityStreamHandler.restoreDeferred={resolve:function resolve(){return"initialState"}},ActivityStreamHandler_ActivityStreamHandler.restorePromise=void 0,function(ConversationState){ConversationState[ConversationState.Prechat=0]="Prechat",ConversationState[ConversationState.Loading=1]="Loading",ConversationState[ConversationState.ReconnectChat=2]="ReconnectChat",ConversationState[ConversationState.OutOfOffice=3]="OutOfOffice",ConversationState[ConversationState.ProactiveChat=4]="ProactiveChat",ConversationState[ConversationState.Active=5]="Active",ConversationState[ConversationState.InActive=6]="InActive",ConversationState[ConversationState.PostchatLoading=7]="PostchatLoading",ConversationState[ConversationState.Postchat=8]="Postchat",ConversationState[ConversationState.Closed=9]="Closed"}(ConversationState||(ConversationState={})),function(LiveChatWidgetActionType){LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID=0]="SET_WIDGET_ELEMENT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS=1]="SET_RENDERING_MIDDLEWARE_PROPS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS=2]="SET_MIDDLEWARE_LOCALIZED_TEXTS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_GLOBAL_DIR=3]="SET_GLOBAL_DIR",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_MINIMIZED=4]="SET_MINIMIZED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_STATE=5]="SET_CONVERSATION_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID=6]="SET_PREVIOUS_FOCUSED_ELEMENT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_START_CHAT_FAILING=7]="SET_START_CHAT_FAILING",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS=8]="SET_OUTSIDE_OPERATING_HOURS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE=9]="SET_PRE_CHAT_SURVEY_RESPONSE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CUSTOM_CONTEXT=10]="SET_CUSTOM_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOW_CONFIRMATION=11]="SET_SHOW_CONFIRMATION",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE=12]="SET_SHOW_EMAIL_TRANSCRIPT_PANE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL=13]="SET_PRECHAT_RESPONSE_EMAIL",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION=14]="SET_AUDIO_NOTIFICATION",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_E2VV_ENABLED=15]="SET_E2VV_ENABLED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT=16]="SET_POST_CHAT_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SHOW_CALLING_CONTAINER=17]="SHOW_CALLING_CONTAINER",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_INCOMING_CALL=18]="SET_INCOMING_CALL",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_VIDEO_CALL=19]="DISABLE_VIDEO_CALL",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO=20]="DISABLE_LOCAL_VIDEO",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO=21]="DISABLE_REMOTE_VIDEO",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CHAT_TOKEN=22]="SET_CHAT_TOKEN",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY=23]="SET_START_CHAT_BUTTON_DISPLAY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS=24]="SET_PROACTIVE_CHAT_PARAMS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_TELEMETRY_DATA=25]="SET_TELEMETRY_DATA",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_RECONNECT_ID=26]="SET_RECONNECT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT=27]="SET_UNREAD_MESSAGE_COUNT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON=28]="SET_FOCUS_CHAT_BUTTON",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED=29]="SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY=30]="SET_CONVERSATION_ENDED_BY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_STATE=31]="SET_WIDGET_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT=32]="SET_LIVE_CHAT_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_BOT_OAUTH_SIGNIN_ID=33]="SET_BOT_OAUTH_SIGNIN_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_SIZE=34]="SET_WIDGET_SIZE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID=35]="SET_WIDGET_INSTANCE_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG=36]="SET_LIVE_CHAT_CONFIG",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_POST_CHAT_WORKFLOW_IN_PROGRESS=37]="SET_POST_CHAT_WORKFLOW_IN_PROGRESS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID=38]="SET_INITIAL_CHAT_SDK_REQUEST_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOULD_USE_BOT_SURVEY=39]="SET_SHOULD_USE_BOT_SURVEY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED=40]="SET_CHAT_DISCONNECT_EVENT_RECEIVED"}(LiveChatWidgetActionType||(LiveChatWidgetActionType={})),function(NotificationLevel){NotificationLevel.Success="success",NotificationLevel.Info="info",NotificationLevel.Warning="warn",NotificationLevel.Error="error"}(NotificationLevel||(NotificationLevel={})),function(WebChatActionType){WebChatActionType.DIRECT_LINE_CONNECT_FULFILLED="DIRECT_LINE/CONNECT_FULFILLED",WebChatActionType.DIRECT_LINE_CONNECT="DIRECT_LINE/CONNECT",WebChatActionType.DIRECT_LINE_CONNECT_PENDING="DIRECT_LINE/CONNECT_PENDING",WebChatActionType.DIRECT_LINE_UPDATE_CONNECTION_STATUS="DIRECT_LINE/UPDATE_CONNECTION_STATUS",WebChatActionType.DIRECT_LINE_CONNECT_FULFILLING="DIRECT_LINE/CONNECT_FULFILLING",WebChatActionType.DIRECT_LINE_POST_ACTIVITY="DIRECT_LINE/POST_ACTIVITY",WebChatActionType.DIRECT_LINE_POST_ACTIVITY_PENDING="DIRECT_LINE/POST_ACTIVITY_PENDING",WebChatActionType.DIRECT_LINE_POST_ACTIVITY_FULFILLED="DIRECT_LINE/POST_ACTIVITY_FULFILLED",WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY="DIRECT_LINE/INCOMING_ACTIVITY",WebChatActionType.WEB_CHAT_SET_LANGUAGE="WEB_CHAT/SET_LANGUAGE",WebChatActionType.WEB_CHAT_SEND_MESSAGE="WEB_CHAT/SEND_MESSAGE",WebChatActionType.WEB_CHAT_SET_SEND_TIMEOUT="WEB_CHAT/SET_SEND_TIMEOUT",WebChatActionType.WEB_CHAT_SET_SEND_TYPING_INDICATOR="WEB_CHAT/SET_SEND_TYPING_INDICATOR",WebChatActionType.WEB_CHAT_SET_SUGGESTED_ACTIONS="WEB_CHAT/SET_SUGGESTED_ACTIONS",WebChatActionType.WEB_CHAT_STOP_DICTATE="WEB_CHAT/STOP_DICTATE",WebChatActionType.WEB_CHAT_STOP_SPEAKING="WEB_CHAT/STOP_SPEAKING",WebChatActionType.WEB_CHAT_SEND_EVENT="WEB_CHAT/SEND_EVENT",WebChatActionType.WEB_CHAT_SET_NOTIFICATION="WEB_CHAT/SET_NOTIFICATION",WebChatActionType.WEB_CHAT_DISMISS_NOTIFICATION="WEB_CHAT/DISMISS_NOTIFICATION",WebChatActionType.WEB_CHAT_SET_SEND_BOX="WEB_CHAT/SET_SEND_BOX",WebChatActionType.WEB_CHAT_SEND_FILES="WEB_CHAT/SEND_FILES"}(WebChatActionType||(WebChatActionType={}));var WebChatStoreLoader=WebChatStoreLoader_createClass((function WebChatStoreLoader(){!function WebChatStoreLoader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WebChatStoreLoader)}));function NotificationHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NotificationHandler_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}WebChatStoreLoader.store=void 0;var NotificationScenarios,NotificationHandler_NotificationHandler=function(){function NotificationHandler(){!function NotificationHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NotificationHandler)}return function NotificationHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&NotificationHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&NotificationHandler_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NotificationHandler,null,[{key:"notify",value:function notify(id,level,message){WebChatStoreLoader.store&&(WebChatStoreLoader.store.dispatch({type:WebChatActionType.WEB_CHAT_SET_NOTIFICATION,payload:{id:id,level:level,message:message}}),NotificationHandler.setFocusOnNotificationCloseButton())}},{key:"dismissNotification",value:function dismissNotification(id){WebChatStoreLoader.store&&WebChatStoreLoader.store.dispatch({type:WebChatActionType.WEB_CHAT_DISMISS_NOTIFICATION,payload:{id:id}})}},{key:"notifyError",value:function notifyError(id,message){this.notify(id,NotificationLevel.Error,message)}},{key:"notifyWarning",value:function notifyWarning(id,message){this.notify(id,NotificationLevel.Warning,message)}},{key:"notifyInfo",value:function notifyInfo(id,message){this.notify(id,NotificationLevel.Info,message)}},{key:"notifySuccess",value:function notifySuccess(id,message){this.notify(id,NotificationLevel.Success,message)}},{key:"notifyWithLevel",value:function notifyWithLevel(id,message,level){level?this.notify(id,level,message):this.notifyInfo(id,message)}},{key:"setFocusOnNotificationCloseButton",value:function setFocusOnNotificationCloseButton(){var expandButton=document.querySelector("#"+Constants.i.MSLiveChatWidget+" ."+Constants.h.webChatBannerExpandButton);if(!expandButton){var closeButton=document.querySelector("#"+Constants.i.MSLiveChatWidget+" ."+Constants.h.webChatBannerCloseButton);return closeButton?(closeButton.focus(),void NotificationHandler.registerOnCloseEvent(closeButton)):void 0}expandButton.focus()}},{key:"registerOnCloseEvent",value:function registerOnCloseEvent(button){button.onclick=function(){setFocusOnSendBox()}}}]),NotificationHandler}();!function(NotificationScenarios){NotificationScenarios.Connection="connection",NotificationScenarios.DownloadTranscriptError="download transcript",NotificationScenarios.EmailTranscriptError="email transcript",NotificationScenarios.AttachmentError="attachment",NotificationScenarios.InternetConnection="internet connection",NotificationScenarios.MaxSizeError="max size",NotificationScenarios.ChatDisconnect="chat disconnect"}(NotificationScenarios||(NotificationScenarios={}));var defaultMiddlewareLocalizedTexts={MIDDLEWARE_BANNER_FILE_NULL_ERROR:"There was an error uploading the file, please try again.",MIDDLEWARE_BANNER_FILE_SIZE_WITHOUT_EXTENSION_ERROR:"File {2} exceeds the allowed limit of {0} MB and please upload the file with an appropriate file extension.",MIDDLEWARE_BANNER_FILE_SIZE_EXTENSION_ERROR:"File {2} exceeds the allowed limit of {0} MB and {1} files are not supported.",MIDDLEWARE_BANNER_FILE_WITHOUT_EXTENSION:"File upload error. Please upload the file {2} with an appropriate file extension.",MIDDLEWARE_BANNER_FILE_EXTENSION_ERROR:"{1} files are not supported.",MIDDLEWARE_BANNER_FILE_SIZE_ERROR:"File {2} exceeds the allowed limit of {0} MB.",MIDDLEWARE_BANNER_FILE_IS_EMPTY_ERROR:"This file {2} can't be attached because it's empty. Please try again with a different file.",MIDDLEWARE_BANNER_ERROR_MESSAGE:"Upload failed, please try again.",MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE:"You’re back online.",MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION:"Unable to connect—please check your internet connection.",MIDDLEWARE_MAX_CHARACTER_COUNT_EXCEEDED:"This message is too long. Please shorten your message to avoid sending failure.",MIDDLEWARE_TYPING_INDICATOR_ONE:"{0} is typing ...",MIDDLEWARE_TYPING_INDICATOR_TWO:"{0} and {1} are typing ...",MIDDLEWARE_TYPING_INDICATOR_MULTIPLE:"{0} agents are typing ...",MIDDLEWARE_MESSAGE_SENDING:"Sending ...",MIDDLEWARE_MESSAGE_DELIVERED:"Sent",MIDDLEWARE_MESSAGE_NOT_DELIVERED:"Not Delivered",MIDDLEWARE_MESSAGE_RETRY:"Retry",MIDDLEWARE_BANNER_CHAT_DISCONNECT:"Your conversation has been disconnected. For additional assistance, please start a new chat."};__webpack_require__("./node_modules/core-js/modules/es.array.concat.js");function DefaultActivitySubscriber_regeneratorRuntime(){DefaultActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function DefaultActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var DefaultActivitySubscriber=function(){function DefaultActivitySubscriber(){!function DefaultActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultActivitySubscriber),this.observer=void 0}var _next2;return function DefaultActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultActivitySubscriber,[{key:"next",value:(_next2=function DefaultActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(DefaultActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){return DefaultActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.observer.next(activity),_context.abrupt("return",!1);case 2:case"end":return _context.stop()}}),_callee,this)}))),function next(_x){return _next2.apply(this,arguments)})}]),DefaultActivitySubscriber}();__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function ChatAdapterShim_regeneratorRuntime(){ChatAdapterShim_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return ChatAdapterShim_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function ChatAdapterShim_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChatAdapterShim_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChatAdapterShim_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChatAdapterShim_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ChatAdapterShim_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ChatAdapterShim_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _asyncIterator(iterable){var method,async,sync,retry=2;for("undefined"!=typeof Symbol&&(async=Symbol.asyncIterator,sync=Symbol.iterator);retry--;){if(async&&null!=(method=iterable[async]))return method.call(iterable);if(sync&&null!=(method=iterable[sync]))return new AsyncFromSyncIterator(method.call(iterable));async="@@asyncIterator",sync="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(s){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var done=r.done;return Promise.resolve(r.value).then((function(value){return{value:value,done:done}}))}return AsyncFromSyncIterator=function AsyncFromSyncIterator(s){this.s=s,this.n=s.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function _return(value){var ret=this.s.return;return void 0===ret?Promise.resolve({value:value,done:!0}):AsyncFromSyncIteratorContinuation(ret.apply(this.s,arguments))},throw:function _throw(value){var thr=this.s.return;return void 0===thr?Promise.reject(value):AsyncFromSyncIteratorContinuation(thr.apply(this.s,arguments))}},new AsyncFromSyncIterator(s)}var ChatAdapterShim_ChatAdapterShim=function(){function ChatAdapterShim(chatAdapter){var observable,subscription,observers,_this=this;!function ChatAdapterShim_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChatAdapterShim),this.chatAdapter=void 0,this.activityObserver=void 0,this.subscribers=void 0,this.subscribers=[],this.chatAdapter=Object.assign({},chatAdapter,{activity$:(observable=new window.Observable((function(observer){_this.activityObserver=observer;var abortController=new window.AbortController;return function ChatAdapterShim_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ChatAdapterShim_regeneratorRuntime().mark((function _callee(){var _iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,activity,_i,_arr,subscriber;return ChatAdapterShim_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_context.prev=0,_iteratorAbruptCompletion=!1,_didIteratorError=!1,_context.prev=3,_iterator=_asyncIterator(chatAdapter.activities({signal:abortController.signal}));case 5:return _context.next=7,_iterator.next();case 7:if(!(_iteratorAbruptCompletion=!(_step=_context.sent).done)){_context.next=24;break}activity=_step.value,_i=0,_arr=[].concat(_toConsumableArray(_this.subscribers),[new DefaultActivitySubscriber]);case 10:if(!(_i<_arr.length)){_context.next=21;break}return(subscriber=_arr[_i]).observer=_this.activityObserver,_context.next=15,subscriber.next(activity);case 15:if(activity=_context.sent){_context.next=18;break}return _context.abrupt("break",21);case 18:_i++,_context.next=10;break;case 21:_iteratorAbruptCompletion=!1,_context.next=5;break;case 24:_context.next=30;break;case 26:_context.prev=26,_context.t0=_context.catch(3),_didIteratorError=!0,_iteratorError=_context.t0;case 30:if(_context.prev=30,_context.prev=31,!_iteratorAbruptCompletion||null==_iterator.return){_context.next=35;break}return _context.next=35,_iterator.return();case 35:if(_context.prev=35,!_didIteratorError){_context.next=38;break}throw _iteratorError;case 38:return _context.finish(35);case 39:return _context.finish(30);case 40:observer.complete(),_context.next=46;break;case 43:_context.prev=43,_context.t1=_context.catch(0),observer.error(_context.t1);case 46:case"end":return _context.stop()}}),_callee,null,[[0,43],[3,26,30,40],[31,,35,39]])})))(),function(){abortController.abort()}})),observers=[],new window.Observable((function(observer){return subscription||(subscription=observable.subscribe({complete:function complete(){observers.forEach((function(observer){return observer.complete()}))},error:function error(err){observers.forEach((function(observer){return observer.error(err)}))},next:function next(value){observers.forEach((function(observer){return observer.next(value)}))}})),observers.push(observer),function(){(observers=observers.filter((function(o){return o!==observer}))).length||(subscription.unsubscribe(),subscription=null)}})))})}return function ChatAdapterShim_createClass(Constructor,protoProps,staticProps){return protoProps&&ChatAdapterShim_defineProperties(Constructor.prototype,protoProps),staticProps&&ChatAdapterShim_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ChatAdapterShim,[{key:"addSubscriber",value:function addSubscriber(subscriber){this.subscribers.push(subscriber)}}]),ChatAdapterShim}();function PauseActivitySubscriber_regeneratorRuntime(){PauseActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PauseActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function PauseActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PauseActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var PauseActivitySubscriber_PauseActivitySubscriber=function(){function PauseActivitySubscriber(){!function PauseActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PauseActivitySubscriber),this.observer=void 0}var _next2,_apply;return function PauseActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&PauseActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&PauseActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PauseActivitySubscriber,[{key:"apply",value:(_apply=PauseActivitySubscriber_asyncToGenerator(PauseActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){return PauseActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,ActivityStreamHandler_ActivityStreamHandler.restorePromise;case 2:return _context.abrupt("return",activity);case 3:case"end":return _context.stop()}}),_callee)}))),function apply(_x){return _apply.apply(this,arguments)})},{key:"applicable",value:function applicable(activity){return!0}},{key:"next",value:(_next2=PauseActivitySubscriber_asyncToGenerator(PauseActivitySubscriber_regeneratorRuntime().mark((function _callee2(activity){return PauseActivitySubscriber_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.applicable(activity)){_context2.next=4;break}return _context2.next=3,this.apply(activity);case 3:return _context2.abrupt("return",_context2.sent);case 4:return _context2.abrupt("return",activity);case 5:case"end":return _context2.stop()}}),_callee2,this)}))),function next(_x2){return _next2.apply(this,arguments)})}]),PauseActivitySubscriber}();__webpack_require__("./node_modules/core-js/modules/es.set.js");function BotAuthActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BotAuthActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BotAuthActivitySubscriber_regeneratorRuntime(){BotAuthActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function BotAuthActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var BotAuthActivitySubscriber_response,supportedSignInCardContentTypes=["application/vnd.microsoft.card.signin","application/vnd.microsoft.card.oauth"],botOauthUrlRegex=/[\S]+.botframework.com\/api\/oauth\/signin\?signin=([\S]+)/,BotAuthActivitySubscriber_delay=function delay(t){return new Promise((function(resolve){return setTimeout(resolve,t)}))},extractSignInId=function extractSignInId(signInUrl){var result=botOauthUrlRegex.exec(signInUrl);return result&&result[1]?result[1]:""},extractSasUrl=function(){var _ref=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee(attachment){var sasUrl,signInId,getTestUrlEndpoint,_response,responseJson;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(sasUrl=void 0,attachment&&attachment.content&&attachment.content.tokenPostResource&&attachment.content.tokenPostResource.sasUrl&&(sasUrl=attachment.content.tokenPostResource.sasUrl),sasUrl){_context.next=19;break}return signInId=extractSignInId(attachment.content.buttons[0].value),getTestUrlEndpoint="https://token.botframework.com/api/sas/gettesturl?signInId="+signInId,_context.prev=5,_context.next=8,window.fetch(getTestUrlEndpoint);case 8:if(200!==(_response=_context.sent).status){_context.next=14;break}return _context.next=12,_response.json();case 12:responseJson=_context.sent,sasUrl=responseJson.sasUrl;case 14:_context.next=19;break;case 16:_context.prev=16,_context.t0=_context.catch(5),sasUrl=void 0;case 19:return _context.abrupt("return",sasUrl);case 20:case"end":return _context.stop()}}),_callee,null,[[5,16]])})));return function extractSasUrl(_x){return _ref.apply(this,arguments)}}(),fetchBotAuthConfig=function(){var _ref2=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee2(retries){var botAuthConfigRequestEvent,listener;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderFetchConfig}),botAuthConfigRequestEvent={eventName:BroadcastEvent.BotAuthConfigRequest},cjs.BroadcastService.postMessage(botAuthConfigRequestEvent),listener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.BotAuthConfigResponse).subscribe((function(data){var _data$payload,_data$payload2;BotAuthActivitySubscriber_response=void 0!==(null===(_data$payload=data.payload)||void 0===_data$payload?void 0:_data$payload.response)?null===(_data$payload2=data.payload)||void 0===_data$payload2?void 0:_data$payload2.response:BotAuthActivitySubscriber_response,listener.unsubscribe()})),void 0===BotAuthActivitySubscriber_response){_context2.next=6;break}return _context2.abrupt("return",BotAuthActivitySubscriber_response);case 6:if(1!==retries){_context2.next=8;break}throw new Error;case 8:return _context2.next=10,BotAuthActivitySubscriber_delay(1e3);case 10:return _context2.next=12,fetchBotAuthConfig(--retries);case 12:return _context2.abrupt("return",_context2.sent);case 13:case"end":return _context2.stop()}}),_callee2)})));return function fetchBotAuthConfig(_x2){return _ref2.apply(this,arguments)}}(),BotAuthActivitySubscriber_BotAuthActivitySubscriber=function(){function BotAuthActivitySubscriber(){!function BotAuthActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BotAuthActivitySubscriber),this.observer=void 0,this.signInCardSeen=void 0,this.signInCardSeen=new Set}var _next2,_apply;return function BotAuthActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&BotAuthActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&BotAuthActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BotAuthActivitySubscriber,[{key:"applicable",value:function applicable(activity){var _activity$attachments;return(null==activity||null===(_activity$attachments=activity.attachments)||void 0===_activity$attachments?void 0:_activity$attachments.length)>0&&activity.attachments[0]&&supportedSignInCardContentTypes.indexOf(activity.attachments[0].contentType)>=0}},{key:"apply",value:(_apply=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee3(activity){var attachment,signInUrl,signInId,sasUrl,event;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.observer.next(!1),attachment=activity.attachments[0],signInUrl=attachment.content.buttons[0].value,signInId=extractSignInId(signInUrl)){_context3.next=6;break}return _context3.abrupt("return");case 6:if(!this.signInCardSeen.has(signInId)){_context3.next=8;break}return _context3.abrupt("return");case 8:return this.signInCardSeen.add(signInId),_context3.next=11,extractSasUrl(attachment);case 11:if(sasUrl=_context3.sent,event={eventName:BroadcastEvent.SigninCardReceived,payload:{sasUrl:sasUrl}},sasUrl){_context3.next=18;break}return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.BotAuthActivityEmptySasUrl,Description:"SaS Url is empty"}),_context3.abrupt("return",activity);case 18:cjs.BroadcastService.postMessage(event);case 19:return _context3.prev=19,_context3.next=22,fetchBotAuthConfig(3);case 22:if(!1!==_context3.sent){_context3.next=27;break}TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderHideCard}),_context3.next=29;break;case 27:return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderDisplayCard}),_context3.abrupt("return",activity);case 29:_context3.next=36;break;case 31:return _context3.prev=31,_context3.t0=_context3.catch(19),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderNotFound}),this.signInCardSeen.has(signInId)&&this.signInCardSeen.delete(signInId),_context3.abrupt("return",activity);case 36:case"end":return _context3.stop()}}),_callee3,this,[[19,31]])}))),function apply(_x3){return _apply.apply(this,arguments)})},{key:"next",value:(_next2=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee4(activity){return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!this.applicable(activity)){_context4.next=4;break}return _context4.next=3,this.apply(activity);case 3:return _context4.abrupt("return",_context4.sent);case 4:return _context4.abrupt("return",activity);case 5:case"end":return _context4.stop()}}),_callee4,this)}))),function next(_x4){return _next2.apply(this,arguments)})}]),BotAuthActivitySubscriber}();function createAdapter_regeneratorRuntime(){createAdapter_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var createAdapter=function(){var _ref=function createAdapter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(createAdapter_regeneratorRuntime().mark((function _callee(chatSDK){var chatAdapterOptionalParams,adapter;return createAdapter_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return chatAdapterOptionalParams={IC3Adapter:{options:{callbackOnNotification:function callbackOnNotification(notification){notification.id===NotificationScenarios.InternetConnection&&notification.level==NotificationLevel.Error&&(notification.message=defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION),notification.id===NotificationScenarios.InternetConnection&&notification.level==NotificationLevel.Success&&(notification.message=defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE),notification.id&&notification.message&&NotificationHandler_NotificationHandler.notifyWithLevel(notification.id,notification.message,notification.level)}}}},_context.next=3,chatSDK.createChatAdapter(chatAdapterOptionalParams);case 3:if(adapter=_context.sent,!0===chatSDK.isMockModeOn){_context.next=9;break}return(adapter=new ChatAdapterShim_ChatAdapterShim(adapter)).addSubscriber(new PauseActivitySubscriber_PauseActivitySubscriber),adapter.addSubscriber(new BotAuthActivitySubscriber_BotAuthActivitySubscriber),_context.abrupt("return",adapter.chatAdapter);case 9:return _context.abrupt("return",adapter);case 10:case"end":return _context.stop()}}),_callee)})));return function createAdapter(_x){return _ref.apply(this,arguments)}}(),newMessageEventHandler_createOnNewAdapterActivityHandler=function createOnNewAdapterActivityHandler(chatId,userId){var isHistoryMessageReceivedEventRasied=!1,raiseMessageEvent=function raiseMessageEvent(activity,isHistoryMessage){if((null==activity?void 0:activity.type)===Constants.d.message){var _text,_text2,_activity$channelData4,_activity$from,payload={text:(null==activity||null===(_text=activity.text)||void 0===_text?void 0:_text.length)>=1?"*contents hidden ("+(null==activity||null===(_text2=activity.text)||void 0===_text2?void 0:_text2.length)+" chars)*":"",type:null==activity?void 0:activity.type,timestamp:null==activity?void 0:activity.timestamp,userId:userId,tags:null==activity||null===(_activity$channelData4=activity.channelData)||void 0===_activity$channelData4?void 0:_activity$channelData4.tags,messageType:""};if((null==activity||null===(_activity$from=activity.from)||void 0===_activity$from?void 0:_activity$from.role)===Constants.d.userMessageTag){payload.messageType=Constants.d.userMessageTag;var newMessageSentEvent={eventName:BroadcastEvent.NewMessageSent,payload:payload};cjs.BroadcastService.postMessage(newMessageSentEvent),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.MessageSent,Description:"New message sent"})}else{var _activity$channelData5,_activity$channelData6;if(null!=activity&&null!==(_activity$channelData5=activity.channelData)&&void 0!==_activity$channelData5&&null!==(_activity$channelData6=_activity$channelData5.tags)&&void 0!==_activity$channelData6&&_activity$channelData6.includes(Constants.d.systemMessageTag))payload.messageType=Constants.d.systemMessageTag,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.SystemMessageReceived,Description:"System message received"});else{var _activity$channelData7,_activity$channelData8,_activity$channelData9,messageHasNoText=!(null!=activity&&activity.text),messageHasNoTags=!(null!=activity&&activity.channelData&&null!=activity&&null!==(_activity$channelData7=activity.channelData)&&void 0!==_activity$channelData7&&_activity$channelData7.tags&&0!==(null==activity||null===(_activity$channelData8=activity.channelData)||void 0===_activity$channelData8||null===(_activity$channelData9=_activity$channelData8.tags)||void 0===_activity$channelData9?void 0:_activity$channelData9.length)),messageHasNoAttachments=!(null!=activity&&activity.attachments)||0===(null==activity?void 0:activity.attachments.length);if(messageHasNoTags&&messageHasNoText&&messageHasNoAttachments)return;payload.messageType=Constants.d.userMessageTag}var newMessageReceivedEvent={eventName:isHistoryMessage?BroadcastEvent.HistoryMessageReceived:BroadcastEvent.NewMessageReceived,payload:payload};cjs.BroadcastService.postMessage(newMessageReceivedEvent),isHistoryMessage?isHistoryMessageReceivedEventRasied||(isHistoryMessageReceivedEventRasied=!0,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.HistoryMessageReceived,Description:"History message received",Data:payload})):TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.MessageReceived,Description:"New message received",Data:payload})}}};return function onNewAdapterActivityHandler(activity){var _activity$channelData,_activity$channelData2,_activity$channelData3,isHistoryMessage=(null==activity?void 0:activity.type)===Constants.d.message&&((null==activity||null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData||null===(_activity$channelData2=_activity$channelData.tags)||void 0===_activity$channelData2?void 0:_activity$channelData2.includes(Constants.d.historyMessageTag))||(null==activity||null===(_activity$channelData3=activity.channelData)||void 0===_activity$channelData3?void 0:_activity$channelData3.fromList));raiseMessageEvent(activity,isHistoryMessage)}};__webpack_require__("./node_modules/regenerator-runtime/runtime.js");function reconnectChatHelper_regeneratorRuntime(){reconnectChatHelper_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function reconnectChatHelper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var handleChatReconnect=function(){var _ref=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee(chatSDK,props,dispatch,setAdapter,initStartChat,state){var _props$chatConfig,_props$chatConfig$Liv,isAuthenticatedChat,reconnectChatContext,_props$reconnectChatP2,_props$reconnectChatP3,_reconnectChatContext3,_props$reconnectChatP,_reconnectChatContext2,_reconnectChatContext;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(isReconnectEnabled(props.chatConfig)){_context.next=2;break}return _context.abrupt("return");case 2:return isAuthenticatedChat=!(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveChatConfigAuthSettings)||void 0===_props$chatConfig$Liv||!_props$chatConfig$Liv.msdyn_javascriptclientfunction),_context.next=5,getChatReconnectContext(chatSDK,props.chatConfig,props,isAuthenticatedChat);case 5:if(reconnectChatContext=_context.sent,!reconnectChatHelper_hasReconnectId(reconnectChatContext)){_context.next=21;break}if(!reconnectChatContext.redirectURL||isNullOrEmptyString(reconnectChatContext.redirectURL)){_context.next=10;break}return reconnectChatHelper_redirectPage(reconnectChatContext.redirectURL,null===(_props$reconnectChatP=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP?void 0:_props$reconnectChatP.redirectInSameWindow),_context.abrupt("return");case 10:if(null===(_props$reconnectChatP2=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP2||!_props$reconnectChatP2.reconnectId||isNullOrEmptyString(null===(_props$reconnectChatP3=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP3?void 0:_props$reconnectChatP3.reconnectId)){_context.next=17;break}return _context.next=13,getChatReconnectContext(chatSDK,props.chatConfig,props,isAuthenticatedChat);case 13:return _reconnectChatContext=_context.sent,_context.next=16,setReconnectIdAndStartChat(isAuthenticatedChat,chatSDK,props,dispatch,setAdapter,null!==(_reconnectChatContext2=_reconnectChatContext.reconnectId)&&void 0!==_reconnectChatContext2?_reconnectChatContext2:"",initStartChat);case 16:return _context.abrupt("return");case 17:return state.appStates.conversationState=ConversationState.ReconnectChat,dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:null!==(_reconnectChatContext3=reconnectChatContext.reconnectId)&&void 0!==_reconnectChatContext3?_reconnectChatContext3:""}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.ReconnectChat}),_context.abrupt("return");case 21:case"end":return _context.stop()}}),_callee)})));return function handleChatReconnect(_x,_x2,_x3,_x4,_x5,_x6){return _ref.apply(this,arguments)}}(),getChatReconnectContext=function(){var _ref2=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee2(chatSDK,chatConfig,props,isAuthenticatedChat){var _props$reconnectChatP4,chatReconnectOptionalParams,reconnectChatContext;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,chatReconnectOptionalParams={reconnectId:null===(_props$reconnectChatP4=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP4?void 0:_props$reconnectChatP4.reconnectId},!isAuthenticatedChat){_context2.next=5;break}return _context2.next=5,handleAuthentication(chatSDK,chatConfig,props.getAuthToken);case 5:return _context2.next=7,null==chatSDK?void 0:chatSDK.getChatReconnectContext(chatReconnectOptionalParams);case 7:return reconnectChatContext=_context2.sent,isAuthenticatedChat&&removeAuthTokenProvider(chatSDK),_context2.abrupt("return",reconnectChatContext);case 12:_context2.prev=12,_context2.t0=_context2.catch(0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetChatReconnectContextSDKCallFailed,ExceptionDetails:{exception:_context2.t0}});case 15:case"end":return _context2.stop()}}),_callee2,null,[[0,12]])})));return function getChatReconnectContext(_x7,_x8,_x9,_x10){return _ref2.apply(this,arguments)}}(),setReconnectIdAndStartChat=function(){var _ref3=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee3(isAuthenticatedChat,chatSDK,props,dispatch,setAdapter,reconnectId,initStartChat){var startUnauthenticatedReconnectChat,optionalParams;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return isAuthenticatedChat||(startUnauthenticatedReconnectChat={eventName:BroadcastEvent.StartUnauthenticatedReconnectChat},cjs.BroadcastService.postMessage(startUnauthenticatedReconnectChat)),optionalParams={reconnectId:reconnectId},dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:reconnectId}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context3.next=6,initStartChat(chatSDK,dispatch,setAdapter,props,optionalParams);case 6:case"end":return _context3.stop()}}),_callee3)})));return function setReconnectIdAndStartChat(_x11,_x12,_x13,_x14,_x15,_x16,_x17){return _ref3.apply(this,arguments)}}(),reconnectChatHelper_redirectPage=function redirectPage(redirectURL,redirectInSameWindow){var redirectPageRequest={eventName:BroadcastEvent.RedirectPageRequest,payload:{redirectURL:redirectURL}};cjs.BroadcastService.postMessage(redirectPageRequest),redirectInSameWindow&&(window.location.href=redirectURL)},isReconnectEnabled=function isReconnectEnabled(chatConfig){var _chatConfig$LiveWSAnd,_chatConfig$LiveWSAnd2;return!!chatConfig&&"true"===(null===(_chatConfig$LiveWSAnd=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd||null===(_chatConfig$LiveWSAnd2=_chatConfig$LiveWSAnd.msdyn_enablechatreconnect)||void 0===_chatConfig$LiveWSAnd2?void 0:_chatConfig$LiveWSAnd2.toLowerCase())},reconnectChatHelper_hasReconnectId=function hasReconnectId(reconnectAvailabilityResponse){return reconnectAvailabilityResponse&&!isNullOrUndefined(reconnectAvailabilityResponse.reconnectId)},directLine=(__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/rxjs/add/operator/share.js"),__webpack_require__("./node_modules/rxjs/add/observable/of.js"),__webpack_require__("./node_modules/botframework-directlinejs/lib/directLine.js")),Rx=__webpack_require__("./node_modules/rxjs/Rx.js"),Observable=__webpack_require__("./node_modules/rxjs/Observable.js"),lib=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/index.js");function mockadapter_regeneratorRuntime(){mockadapter_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function mockadapter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function mockadapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function mockadapter_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var DirectLineSenderRole,mockadapter_MockAdapter=function(){function MockAdapter(){var _this=this;!function mockadapter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockAdapter),this.activityObserver=void 0,this.activity$=void 0,this.connectionStatus$=new Rx.BehaviorSubject(directLine.ConnectionStatus.Uninitialized),this.activity$=new Observable.Observable((function(observer){_this.activityObserver=observer,Promise.resolve().then(mockadapter_asyncToGenerator(mockadapter_regeneratorRuntime().mark((function _callee(){return mockadapter_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_this.connectionStatus$.next(directLine.ConnectionStatus.Online);try{_this.connectionStatus$&&_this.connectionStatus$.next(directLine.ConnectionStatus.Online)}catch(err){_this.connectionStatus$.next(directLine.ConnectionStatus.FailedToConnect),console.error(err)}case 2:case"end":return _context.stop()}}),_callee)}))))})).share()}return function mockadapter_createClass(Constructor,protoProps,staticProps){return protoProps&&mockadapter_defineProperties(Constructor.prototype,protoProps),staticProps&&mockadapter_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockAdapter,[{key:"postActivity",value:function postActivity(activity){if(activity){var _activity$text,modActivity,typingActivity,_this$activityObserve,_this$activityObserve2,_this$activityObserve3;if(null!==(_activity$text=activity.text)&&void 0!==_activity$text&&_activity$text.startsWith(":"))modActivity=Object.assign({},activity,{id:Object(lib.uuidv4)(),from:Object.assign({},activity.from,{id:"botId",name:"Bot",role:"bot"}),text:activity.text.substr(1)}),typingActivity={id:Object(lib.uuidv4)(),from:{id:Object(lib.uuidv4)(),name:"Bot",role:"bot"},type:"typing"},null===(_this$activityObserve=this.activityObserver)||void 0===_this$activityObserve||_this$activityObserve.next(modActivity),null===(_this$activityObserve2=this.activityObserver)||void 0===_this$activityObserve2||_this$activityObserve2.next(typingActivity);else modActivity=Object.assign({},activity,{id:Object(lib.uuidv4)(),from:Object.assign({},activity.from,{id:"userId",name:"User",role:"user"})}),null===(_this$activityObserve3=this.activityObserver)||void 0===_this$activityObserve3||_this$activityObserve3.next(modActivity)}return Observable.Observable.of(activity.id||"")}},{key:"end",value:function end(){}}]),MockAdapter}();!function(DirectLineSenderRole){DirectLineSenderRole.User="user",DirectLineSenderRole.Bot="bot",DirectLineSenderRole.Channel="channel"}(DirectLineSenderRole||(DirectLineSenderRole={}));var defaultTimestampContentStyles={color:"#565452",fontFamily:'"Segoe UI", Arial, sans-serif',background:"transparent",fontSize:"11px",lineHeight:"15px",paddingTop:0},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function DeliveredTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DeliveredTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeliveredTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DeliveredTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DeliveredTimestamp_DeliveredTimestamp=function DeliveredTimestamp(_ref){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$m,_state$domainStates$m2,args=_ref.args,role=_ref.role,name=_ref.name,state=_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps),timestamp=args.activity.timestamp;return Object(jsx_runtime.jsxs)(Stack.a,{style:contentStyles,dir:dir,children:[role===DirectLineSenderRole.Bot&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("span",{dir:dir,"aria-hidden":"false",children:[name," - ",getTimestampHourMinute(timestamp)]})}),role===DirectLineSenderRole.User&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("span",{"aria-hidden":"false",dir:dir,children:[" ",getTimestampHourMinute(timestamp)," - ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_DELIVERED)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_DELIVERED]})})]})};DeliveredTimestamp_DeliveredTimestamp.displayName="DeliveredTimestamp";try{DeliveredTimestamp_DeliveredTimestamp.displayName="DeliveredTimestamp",DeliveredTimestamp_DeliveredTimestamp.__docgenInfo={description:"",displayName:"DeliveredTimestamp",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/DeliveredTimestamp.tsx#DeliveredTimestamp"]={docgenInfo:DeliveredTimestamp_DeliveredTimestamp.__docgenInfo,name:"DeliveredTimestamp",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/DeliveredTimestamp.tsx#DeliveredTimestamp"})}catch(__react_docgen_typescript_loader_error){}var defaultTimestampFailedStyles=Object.assign({},defaultTimestampContentStyles,{color:"#A80000"}),defaultTimestampRetryStyles=Object.assign({},defaultTimestampContentStyles,{color:"#0063B1",cursor:"pointer"}),botframework_webchat_lib=__webpack_require__("./node_modules/botframework-webchat/lib/index.js");function NotDeliveredTimestamp_regeneratorRuntime(){NotDeliveredTimestamp_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NotDeliveredTimestamp_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function NotDeliveredTimestamp_slicedToArray(arr,i){return function NotDeliveredTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function NotDeliveredTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function NotDeliveredTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return NotDeliveredTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NotDeliveredTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function NotDeliveredTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NotDeliveredTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SendStatus,NotDeliveredTimestamp_NotDeliveredTimestamp=function NotDeliveredTimestamp(_ref){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_state$domainStates$m,_state$domainStates$m2,_state$domainStates$m3,_state$domainStates$m4,args=_ref.args,timestampRef=Object(react.useRef)(),useFocus=botframework_webchat_lib.hooks.useFocus,usePostActivity=botframework_webchat_lib.hooks.usePostActivity,focus=useFocus(),postActivity=usePostActivity(),activity=args.activity,timestamp=activity.timestamp,state=NotDeliveredTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps),failedTextStyles=Object.assign({},defaultTimestampFailedStyles,null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4?void 0:_state$domainStates$r4.timestampFailedTextStyleProps),retryTextStyles=Object.assign({},defaultTimestampRetryStyles,null===(_state$domainStates$r5=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.timestampRetryTextStyleProps);Object(react.useEffect)((function(){var _timestampRef$current,timestampWebChatNodes=null==timestampRef||null===(_timestampRef$current=timestampRef.current)||void 0===_timestampRef$current?void 0:_timestampRef$current.childNodes;(null==timestampWebChatNodes?void 0:timestampWebChatNodes.length)>1&&(timestampWebChatNodes[1].innerText=getTimestampHourMinute(timestamp))}),[timestampRef]);var onRetryClick=Object(react.useCallback)(NotDeliveredTimestamp_asyncToGenerator(NotDeliveredTimestamp_regeneratorRuntime().mark((function _callee(){var _activity$channelData;return NotDeliveredTimestamp_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return activity.previousClientActivityID=null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData?void 0:_activity$channelData.clientActivityID,_context.next=3,postActivity(activity);case 3:focus("sendBox");case 4:case"end":return _context.stop()}}),_callee)}))),[activity,focus,postActivity]);return Object(jsx_runtime.jsxs)(Stack.a,{style:contentStyles,dir:dir,horizontal:!0,children:[Object(jsx_runtime.jsxs)("span",{children:[" ",getTimestampHourMinute(timestamp)]}),Object(jsx_runtime.jsx)("span",{children:"  -  "}),Object(jsx_runtime.jsxs)("span",{style:failedTextStyles,children:[" ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_NOT_DELIVERED)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_NOT_DELIVERED," "]}),Object(jsx_runtime.jsx)("span",{children:"  -  "}),Object(jsx_runtime.jsxs)("span",{style:retryTextStyles,onClick:onRetryClick,onKeyDown:function onRetryKeyEnter(event){event.code===KeyCodes.ENTER&&(event.preventDefault(),onRetryClick())},tabIndex:0,children:[" ",null!==(_state$domainStates$m3=null===(_state$domainStates$m4=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m4?void 0:_state$domainStates$m4.MIDDLEWARE_MESSAGE_RETRY)&&void 0!==_state$domainStates$m3?_state$domainStates$m3:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_RETRY," "]})]})};NotDeliveredTimestamp_NotDeliveredTimestamp.displayName="NotDeliveredTimestamp";try{NotDeliveredTimestamp_NotDeliveredTimestamp.displayName="NotDeliveredTimestamp",NotDeliveredTimestamp_NotDeliveredTimestamp.__docgenInfo={description:"",displayName:"NotDeliveredTimestamp",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/NotDeliveredTimestamp.tsx#NotDeliveredTimestamp"]={docgenInfo:NotDeliveredTimestamp_NotDeliveredTimestamp.__docgenInfo,name:"NotDeliveredTimestamp",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/NotDeliveredTimestamp.tsx#NotDeliveredTimestamp"})}catch(__react_docgen_typescript_loader_error){}function SendingTimestamp_slicedToArray(arr,i){return function SendingTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SendingTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function SendingTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SendingTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SendingTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function SendingTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SendingTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(SendStatus){SendStatus.Sending="sending",SendStatus.SendFailed="send failed",SendStatus.Sent="sent"}(SendStatus||(SendStatus={}));var SendingTimestamp_SendingTimestamp=function SendingTimestamp(){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$m,_state$domainStates$m2,state=SendingTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps);return Object(jsx_runtime.jsx)(Stack.a,{style:contentStyles,dir:dir,horizontal:!0,children:Object(jsx_runtime.jsxs)("span",{children:[" ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_SENDING)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_SENDING," "]})})};SendingTimestamp_SendingTimestamp.displayName="SendingTimestamp";var defaultTypingIndicatorBubbleStyles={height:"6px",width:"6px",borderRadius:"6px",background:"#315FA2",animationDuration:"2s",animationName:"bounce",animationTimingFunction:"ease",animationIterationCount:"infinite",marginRight:"2px"},defaultTypingIndicatorContainerStyles={marginLeft:"10px",marginBottom:"5px",display:"flex",transition:"all .5s ease",alignItems:"center"},defaultTypingIndicatorMessageStyles={fontFamily:'"Segoe UI", Arial, sans-serif',background:"transparent",fontSize:"12px",lineHeight:"15px",color:"#605e5c",marginLeft:"6px"};function typingIndicatorMiddleware_slicedToArray(arr,i){return function typingIndicatorMiddleware_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function typingIndicatorMiddleware_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function typingIndicatorMiddleware_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return typingIndicatorMiddleware_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return typingIndicatorMiddleware_arrayLikeToArray(o,minLen)}(arr,i)||function typingIndicatorMiddleware_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function typingIndicatorMiddleware_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ConversationEndEntity,typingIndicatorMiddleware_TypingIndicator=function TypingIndicator(_ref){var _state$domainStates$l,_state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,activeTyping=_ref.activeTyping,visible=_ref.visible,chatSDK=hooks_useChatSDKStore(),state=typingIndicatorMiddleware_slicedToArray(hooks_useChatContextStore(),1)[0],debounceTyping=Object(react.useCallback)(function debounceLeading(fn){var timeoutId,ms=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return function(){if(!timeoutId){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];fn.apply(void 0,args)}timeoutId=setTimeout((function(){timeoutId=null}),ms)}}((function(){return null==chatSDK?void 0:chatSDK.sendTypingEvent()})),[]);if(!activeTyping||0===Object.keys(activeTyping).length||1===(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l?void 0:_state$domainStates$l.LiveChatVersion)&&!visible)return null;activeTyping=Object.keys(activeTyping).map((function(key){return activeTyping[key]}));for(var i=0;i<activeTyping.length;i++)if(activeTyping[i].role&&activeTyping[i].role===DirectLineSenderRole.User){var _state$domainStates$l2;if(2===(null===(_state$domainStates$l2=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.LiveChatVersion)&&!visible)return debounceTyping(),null;activeTyping.splice(i,1),i--}var localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,state.domainStates.middlewareLocalizedTexts),message=getTypingIndicatorMessage(activeTyping,localizedTexts),typingIndicatorStyles=Object.assign({},defaultTypingIndicatorContainerStyles,null===(_state$domainStates$r=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r?void 0:_state$domainStates$r.typingIndicatorStyleProps),typingIndicatorBubbleStyles=Object.assign({},defaultTypingIndicatorBubbleStyles,null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.typingIndicatorBubbleStyleProps),typingIndicatorMessageStyles=Object.assign({},defaultTypingIndicatorMessageStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.typingIndicatorMessageStyleProps);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n                @keyframes bounce {\n                    0% {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0);\n                        opacity: .7;\n                    }\n                    20% {\n                        -webkit-transform: translateY(-6px);\n                        transform: translateY(-6px);\n                        opacity: 1;\n                    }\n                    40% {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0);\n                        opacity: .7\n                    }\n                    to {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0)\n                    }\n                }\n            "}),Object(jsx_runtime.jsxs)("div",{style:typingIndicatorStyles,children:[Object(jsx_runtime.jsx)("div",{style:typingIndicatorBubbleStyles}),Object(jsx_runtime.jsx)("div",{style:Object.assign({animationDelay:".166s"},typingIndicatorBubbleStyles)}),Object(jsx_runtime.jsx)("div",{style:Object.assign({animationDelay:".333s"},typingIndicatorBubbleStyles)}),Object(jsx_runtime.jsxs)("div",{style:typingIndicatorMessageStyles,children:[" ",message," "]})]})]})},getTypingIndicatorMessage=function getTypingIndicatorMessage(activeTyping,localizedTexts){if(activeTyping&&0!==activeTyping.length){if(1===activeTyping.length){var message=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_ONE;return message?message.includes("{0}")?message.replace("{0}",activeTyping[0].name):message:""}if(2===activeTyping.length){var firstMember=activeTyping[0].name,lastMember=activeTyping[1].name,_message=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_TWO;return _message?(_message.includes("{0}")&&(_message=_message.replace("{0}",firstMember)),_message.includes("{1}")&&(_message=_message.replace("{1}",lastMember)),_message):""}var _message2=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_MULTIPLE;return _message2?_message2.includes("{0}")?_message2.replace("{0}",activeTyping.length.toString()):_message2:""}return""},defaultAdaptiveCardStyles={background:"white",color:"black"},defaultWebChatContainerStatefulProps={webChatStyles:{avatarSize:32,backgroundColor:"#F7F7F9",botAvatarBackgroundColor:"#315FA2",botAvatarInitials:"WC",bubbleBackground:"#315FA2",bubbleBorderRadius:4,bubbleBorderWidth:0,bubbleFromUserBackground:"White",bubbleFromUserBorderRadius:4,bubbleFromUserBorderWidth:1,bubbleFromUserTextColor:"Black",bubbleImageHeight:240,bubbleMaxWidth:250,bubbleMinHeight:34,bubbleMinWidth:20,bubbleTextColor:"White",hideSendBox:!1,hideUploadButton:!0,primaryFont:"Segoe UI, Arial, sans-serif",rootHeight:"100%",rootWidth:"100%",sendBoxTextWrap:!0,sendBoxHeight:60,sendBoxMaxHeight:96,sendBoxBackground:"White",showAvatarInGroup:!0,suggestedActionsStackedHeight:125,suggestedActionsStackedOverflow:"scroll",typingAnimationDuration:3500},webChatProps:{activityStatusMiddleware:function activityStatusMiddleware(){return function(next){return function(args){var _args$activity=args.activity,tags=_args$activity.channelData.tags,_args$activity$from=_args$activity.from,name=_args$activity$from.name,role=_args$activity$from.role,timestamp=_args$activity.timestamp,sendState=args.sendState,current_tags=tags,current_name=name,current_role=role,current_timestamp=timestamp,sameTimestampGroupTemp=args.sameTimestampGroup;if(args[Constants.o.nextVisibleActivity]){var _args$nextVisibleActi=args.nextVisibleActivity,next_name=_args$nextVisibleActi.from.name,next_timestamp=_args$nextVisibleActi.timestamp,timestampCurrentInMillisecond=Date.parse(current_timestamp),timestampNextInMillisecond=Date.parse(next_timestamp);(current_name!==next_name||timestampNextInMillisecond-timestampCurrentInMillisecond>Constants.o.timeBetweenTimestampGroups)&&(sameTimestampGroupTemp=!1)}return current_tags&&current_tags.includes(Constants.d.systemMessageTag)||sameTimestampGroupTemp&&sendState===SendStatus.Sent?void 0:Object(jsx_runtime.jsxs)("span",{style:{padding:"2px"},children:[sendState===SendStatus.Sending&&Object(jsx_runtime.jsx)(SendingTimestamp_SendingTimestamp,{}),sendState===SendStatus.SendFailed&&Object(jsx_runtime.jsx)(NotDeliveredTimestamp_NotDeliveredTimestamp,{args:args}),sendState===SendStatus.Sent&&Object(jsx_runtime.jsx)(DeliveredTimestamp_DeliveredTimestamp,{args:args,role:current_role,name:current_name})]})}}},groupActivitiesMiddleware:function groupActivitiesMiddleware(){return function(next){return function(args){var items,grouping,lastBin,lastItem,bins,activities=args.activities;if(null!=activities&&activities.length>0){var status=next({activities:activities}).status;return{sender:(items=activities,grouping=function(x,y){return(x.channelData&&x.channelData.tags&&x.channelData.tags.includes(Constants.d.systemMessageTag)?Constants.d.systemMessageTag:x.from.name)===(y.channelData&&y.channelData.tags&&y.channelData.tags.includes(Constants.d.systemMessageTag)?Constants.d.systemMessageTag:y.from.name)},bins=[],items.length>0&&items.forEach((function(item){lastItem&&grouping(lastItem,item)?lastBin.push(item):(lastBin=[item],bins.push(lastBin)),lastItem=item})),bins),status:status}}return function(){return!1}}}},typingIndicatorMiddleware:function typingIndicatorMiddleware(){return function(next){return function(args){var activeTyping=args.activeTyping,visible=args.visible;return Object(jsx_runtime.jsx)(typingIndicatorMiddleware_TypingIndicator,{activeTyping:activeTyping,visible:visible})}}}},containerStyles:{height:"100%",width:"100%",overflowY:"hidden"},disableNewLineMarkdownSupport:!1,disableMarkdownMessageFormatting:!1,hyperlinkTextOverride:!1,directLine:new mockadapter_MockAdapter,adaptiveCardStyles:defaultAdaptiveCardStyles};function endChat_regeneratorRuntime(){endChat_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function endChat_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}!function(ConversationEndEntity){ConversationEndEntity[ConversationEndEntity.Customer=0]="Customer",ConversationEndEntity[ConversationEndEntity.Agent=1]="Agent"}(ConversationEndEntity||(ConversationEndEntity={}));var PostChatSurveyMode,prepareEndChat=function(){var _ref=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state){var authClientFunction;return endChat_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!props.getAuthToken){_context.next=7;break}if(authClientFunction=getAuthClientFunction(props.chatConfig),!props.getAuthToken||!authClientFunction){_context.next=7;break}return _context.next=5,handleAuthentication(chatSDK,props.chatConfig,props.getAuthToken);case 5:_context.sent||TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetAuthTokenFailed,ExceptionDetails:{exception:"Unable to get auth token during end chat"}});case 7:if(!setPostChatContextAndLoadSurvey_checkPostChatEnabled(props,state)){_context.next=20;break}return _context.prev=9,_context.next=12,initiatePostChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state);case 12:_context.next=18;break;case 14:return _context.prev=14,_context.t0=_context.catch(9),_context.next=18,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!0);case 18:_context.next=27;break;case 20:if(state.appStates.conversationEndedBy!==ConversationEndEntity.Agent){_context.next=25;break}dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0}),_context.next=27;break;case 25:return _context.next=27,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!0);case 27:case"end":return _context.stop()}}),_callee,null,[[9,14]])})));return function prepareEndChat(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _ref.apply(this,arguments)}}(),endChat_endChat=function(){var _ref2=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee2(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab){var _props$webChatContain,_chatSDK$omnichannelC,_chatSDK$omnichannelC2,_props$controlProps$w,_props$controlProps,endChatEventName;return endChat_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(skipEndChatSDK){_context2.next=11;break}return _context2.prev=1,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.EndChatSDKCall}),_context2.next=5,null==chatSDK?void 0:chatSDK.endChat();case 5:_context2.next=11;break;case 7:_context2.prev=7,_context2.t0=_context2.catch(1),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndChatSDKCallFailed,ExceptionDetails:{exception:_context2.t0}}),postMessageToOtherTab=!1;case 11:if(dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!1}),!skipCloseChat)try{null==adapter||adapter.end(),setAdapter(void 0),setWebChatStyles(Object.assign({},defaultWebChatContainerStatefulProps.webChatStyles,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.webChatStyles)),WebChatStoreLoader.store=null,dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_WORKFLOW_IN_PROGRESS,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_SHOULD_USE_BOT_SURVEY,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION,payload:null}),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),postMessageToOtherTab&&(endChatEventName=utils_getWidgetEndChatEventName(null==chatSDK||null===(_chatSDK$omnichannelC=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC?void 0:_chatSDK$omnichannelC.orgId,null==chatSDK||null===(_chatSDK$omnichannelC2=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC2?void 0:_chatSDK$omnichannelC2.widgetId,null!==(_props$controlProps$w=null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:""),cjs.BroadcastService.postMessage({eventName:endChatEventName})),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CloseChatCall,Description:"Chat was closed succesfully"})}catch(error){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CloseChatMethodException,ExceptionDetails:{exception:"Failed to endChat: "+error}})}finally{dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0})}case 16:case"end":return _context2.stop()}}),_callee2,null,[[1,7]])})));return function endChat(_x8,_x9,_x10,_x11,_x12,_x13,_x14,_x15,_x16){return _ref2.apply(this,arguments)}}();function setPostChatContextAndLoadSurvey_regeneratorRuntime(){setPostChatContextAndLoadSurvey_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function setPostChatContextAndLoadSurvey_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}!function(PostChatSurveyMode){PostChatSurveyMode.Embed="192350000",PostChatSurveyMode.Link="192350001"}(PostChatSurveyMode||(PostChatSurveyMode={}));var setPostChatContextAndLoadSurvey=function(){var _ref=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee(chatSDK,dispatch,persistedChat){var context;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,persistedChat){_context.next=7;break}return _context.next=4,chatSDK.getPostChatSurveyContext();case 4:context=_context.sent,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatContextCallSucceed,Description:"Postchat context call succeed."}),dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT,payload:context});case 7:_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.PostChatContextCallFailed,ExceptionDetails:{exception:_context.t0}});case 12:cjs.BroadcastService.getMessageByEventName("LoadPostChatSurvey").subscribe((function(msg){dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Postchat})}));case 13:case"end":return _context.stop()}}),_callee,null,[[0,9]])})));return function setPostChatContextAndLoadSurvey(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),setPostChatContextAndLoadSurvey_checkPostChatEnabled=function checkPostChatEnabled(props,state){var _props$chatConfig$Liv,_props$chatConfig,_props$chatConfig$Liv2,_state$domainStates$l,_state$domainStates$l2;return(null!==(_props$chatConfig$Liv=null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv2=_props$chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv2?void 0:_props$chatConfig$Liv2.msdyn_postconversationsurveyenable)&&void 0!==_props$chatConfig$Liv?_props$chatConfig$Liv:null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.msdyn_postconversationsurveyenable)===Constants.d.true},initiatePostChat=function(){var _ref2=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee2(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state){var conversationDetails,error,_error,_error2;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!state.appStates.postChatWorkflowInProgress||state.appStates.conversationEndedBy!==ConversationEndEntity.Customer){_context2.next=4;break}return _context2.next=3,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!0);case 3:return _context2.abrupt("return");case 4:return _context2.next=6,setPostChatContextAndLoadSurvey_getConversationDetailsCall(chatSDK);case 6:if(conversationDetails=_context2.sent,dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_WORKFLOW_IN_PROGRESS,payload:!0}),(null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.d.userParticipantTypeTag){_context2.next=24;break}if(state.appStates.conversationEndedBy!==ConversationEndEntity.Customer){_context2.next=14;break}return _context2.next=12,postChatInitiatedByCustomer(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state,conversationDetails,!1);case 12:case 17:_context2.next=22;break;case 14:if(state.appStates.conversationEndedBy!==ConversationEndEntity.Agent){_context2.next=19;break}return _context2.next=17,postChatInitiatedByAgent(props,setWebChatStyles,dispatch,state);case 19:throw error="Conversation was Ended after agent joined but App State was not set correctly: conversationEndedBy = "+state.appStates.conversationEndedBy,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}}),new Error(error);case 22:case 39:case 44:_context2.next=49;break;case 24:if((null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.d.botParticipantTypeTag){_context2.next=41;break}if(dispatch({type:LiveChatWidgetActionType.SET_SHOULD_USE_BOT_SURVEY,payload:!0}),state.appStates.conversationEndedBy!==ConversationEndEntity.Customer){_context2.next=31;break}return _context2.next=29,postChatInitiatedByCustomer(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state,conversationDetails,!0);case 29:case 34:_context2.next=39;break;case 31:if(state.appStates.conversationEndedBy!==ConversationEndEntity.Agent){_context2.next=36;break}return _context2.next=34,postChatInitiatedByBot(props,setWebChatStyles,dispatch,state);case 36:throw _error="Conversation was Ended after bot joined but App State was not set correctly: conversationEndedBy = "+state.appStates.conversationEndedBy,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:_error}}),new Error(_error);case 41:if(state.appStates.conversationEndedBy!==ConversationEndEntity.Customer){_context2.next=46;break}return _context2.next=44,postChatInitiatedByCustomer(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state,conversationDetails,!1);case 46:throw _error2="ConversationDetails and App state was not set correctly: conversationDetails = "+JSON.stringify(conversationDetails)+" , conversationEndedBy = "+state.appStates.conversationEndedBy,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:_error2}}),new Error(_error2);case 49:case"end":return _context2.stop()}}),_callee2)})));return function initiatePostChat(_x4,_x5,_x6,_x7,_x8,_x9,_x10){return _ref2.apply(this,arguments)}}(),setPostChatContextAndLoadSurvey_linkModePostChatWorkflow=function linkModePostChatWorkflow(props,dispatch,setWebChatStyles){var _props$webChatContain,_props$webChatContain2;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.LinkModePostChatWorkflowStarted}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive}),!1!==(null==props||null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain||null===(_props$webChatContain2=_props$webChatContain.renderingMiddlewareProps)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.hideSendboxOnConversationEnd)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})}))},embedModePostChatWorkflow=function(){var _ref3=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee3(dispatch,state){var loadPostChatEvent,error;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmbedModePostChatWorkflowStarted}),!state.domainStates.postChatContext){_context3.next=9;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.PostchatLoading}),_context3.next=5,addDelayInMs(Constants.d.PostChatLoadingDurationInMs);case 5:loadPostChatEvent={eventName:BroadcastEvent.LoadPostChatSurvey},cjs.BroadcastService.postMessage(loadPostChatEvent),_context3.next=12;break;case 9:throw error="Conversation was Ended but App State was not set correctly: postChatContext = "+state.domainStates.postChatContext,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}}),new Error(error);case 12:case"end":return _context3.stop()}}),_callee3)})));return function embedModePostChatWorkflow(_x11,_x12){return _ref3.apply(this,arguments)}}(),postChatInitiatedByCustomer=function(){var _ref4=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee4(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state,conversationDetails,shouldUseBotSetting){var postChatSurveyMode,_props$chatConfig$Liv3,_props$chatConfig2,_props$chatConfig2$Li,_state$domainStates$l3,_state$domainStates$l4,_props$chatConfig$Liv4,_props$chatConfig3,_props$chatConfig3$Li,_state$domainStates$l5,_state$domainStates$l6,chatSession,_chatSession$chatToke,error;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(postChatSurveyMode="",postChatSurveyMode=shouldUseBotSetting?null!==(_props$chatConfig$Liv3=null===(_props$chatConfig2=props.chatConfig)||void 0===_props$chatConfig2||null===(_props$chatConfig2$Li=_props$chatConfig2.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig2$Li?void 0:_props$chatConfig2$Li.msdyn_postconversationsurveybotsurveymode)&&void 0!==_props$chatConfig$Liv3?_props$chatConfig$Liv3:null===(_state$domainStates$l3=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l3||null===(_state$domainStates$l4=_state$domainStates$l3.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l4?void 0:_state$domainStates$l4.msdyn_postconversationsurveybotsurveymode:null!==(_props$chatConfig$Liv4=null===(_props$chatConfig3=props.chatConfig)||void 0===_props$chatConfig3||null===(_props$chatConfig3$Li=_props$chatConfig3.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig3$Li?void 0:_props$chatConfig3$Li.msdyn_postconversationsurveymode)&&void 0!==_props$chatConfig$Liv4?_props$chatConfig$Liv4:null===(_state$domainStates$l5=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l5||null===(_state$domainStates$l6=_state$domainStates$l5.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l6?void 0:_state$domainStates$l6.msdyn_postconversationsurveymode,(null==conversationDetails?void 0:conversationDetails.canRenderPostChat)!==Constants.d.truePascal){_context4.next=24;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatWorkflowFromCustomer,Description:shouldUseBotSetting?"PostChat Workflow was started by customer using bot settings":"PostChat Workflow was started by customer using agent settings"}),_context4.next=6,null==chatSDK?void 0:chatSDK.getCurrentLiveChatContext();case 6:return chatSession=_context4.sent,_context4.next=9,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!0,!1);case 9:if(chatSession&&(chatSDK.chatToken=null!==(_chatSession$chatToke=chatSession.chatToken)&&void 0!==_chatSession$chatToke?_chatSession$chatToke:{},chatSDK.requestId=chatSession.requestId),postChatSurveyMode!==PostChatSurveyMode.Embed){_context4.next=15;break}return _context4.next=13,embedModePostChatWorkflow(dispatch,state);case 13:_context4.next=22;break;case 15:if(postChatSurveyMode!==PostChatSurveyMode.Link){_context4.next=19;break}setPostChatContextAndLoadSurvey_linkModePostChatWorkflow(props,dispatch,setWebChatStyles),_context4.next=22;break;case 19:throw error="Conversation was Ended but App State was not set correctly: msdyn_postconversationsurveymode = "+postChatSurveyMode,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}}),new Error(error);case 22:_context4.next=26;break;case 24:return _context4.next=26,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!0);case 26:case"end":return _context4.stop()}}),_callee4)})));return function postChatInitiatedByCustomer(_x13,_x14,_x15,_x16,_x17,_x18,_x19,_x20,_x21){return _ref4.apply(this,arguments)}}(),postChatInitiatedByAgent=function(){var _ref5=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee5(props,setWebChatStyles,dispatch,state){var _props$chatConfig$Liv5,_props$chatConfig4,_props$chatConfig4$Li,_state$domainStates$l7,_state$domainStates$l8,postChatSurveyMode,error;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(postChatSurveyMode=null!==(_props$chatConfig$Liv5=null===(_props$chatConfig4=props.chatConfig)||void 0===_props$chatConfig4||null===(_props$chatConfig4$Li=_props$chatConfig4.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig4$Li?void 0:_props$chatConfig4$Li.msdyn_postconversationsurveymode)&&void 0!==_props$chatConfig$Liv5?_props$chatConfig$Liv5:null===(_state$domainStates$l7=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l7||null===(_state$domainStates$l8=_state$domainStates$l7.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l8?void 0:_state$domainStates$l8.msdyn_postconversationsurveymode,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatWorkflowFromAgent,Description:"PostChat Workflow was started by agent"}),postChatSurveyMode!==PostChatSurveyMode.Embed){_context5.next=7;break}return _context5.next=5,embedModePostChatWorkflow(dispatch,state);case 5:_context5.next=14;break;case 7:if(postChatSurveyMode!==PostChatSurveyMode.Link){_context5.next=11;break}setPostChatContextAndLoadSurvey_linkModePostChatWorkflow(props,dispatch,setWebChatStyles),_context5.next=14;break;case 11:throw error="Conversation was Ended but App State was not set correctly: msdyn_postconversationsurveymode = "+postChatSurveyMode,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}}),new Error(error);case 14:case"end":return _context5.stop()}}),_callee5)})));return function postChatInitiatedByAgent(_x22,_x23,_x24,_x25){return _ref5.apply(this,arguments)}}(),postChatInitiatedByBot=function(){var _ref6=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee6(props,setWebChatStyles,dispatch,state){var _props$chatConfig$Liv6,_props$chatConfig5,_props$chatConfig5$Li,_state$domainStates$l9,_state$domainStates$l10,postChatSurveyMode,error;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(postChatSurveyMode=null!==(_props$chatConfig$Liv6=null===(_props$chatConfig5=props.chatConfig)||void 0===_props$chatConfig5||null===(_props$chatConfig5$Li=_props$chatConfig5.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig5$Li?void 0:_props$chatConfig5$Li.msdyn_postconversationsurveybotsurveymode)&&void 0!==_props$chatConfig$Liv6?_props$chatConfig$Liv6:null===(_state$domainStates$l9=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l9||null===(_state$domainStates$l10=_state$domainStates$l9.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l10?void 0:_state$domainStates$l10.msdyn_postconversationsurveybotsurveymode,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatWorkflowFromBot,Description:"PostChat Workflow was started by bot"}),postChatSurveyMode!==PostChatSurveyMode.Embed){_context6.next=7;break}return _context6.next=5,embedModePostChatWorkflow(dispatch,state);case 5:_context6.next=14;break;case 7:if(postChatSurveyMode!==PostChatSurveyMode.Link){_context6.next=11;break}setPostChatContextAndLoadSurvey_linkModePostChatWorkflow(props,dispatch,setWebChatStyles),_context6.next=14;break;case 11:throw error="Conversation was Ended but App State was not set correctly: msdyn_postconversationsurveybotsurveymode = "+postChatSurveyMode,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}}),new Error(error);case 14:case"end":return _context6.stop()}}),_callee6)})));return function postChatInitiatedByBot(_x26,_x27,_x28,_x29){return _ref6.apply(this,arguments)}}(),setPostChatContextAndLoadSurvey_getConversationDetailsCall=function(){var _ref7=setPostChatContextAndLoadSurvey_asyncToGenerator(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee7(chatSDK){var conversationDetails;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return conversationDetails=void 0,_context7.prev=1,_context7.next=4,chatSDK.getConversationDetails();case 4:conversationDetails=_context7.sent,_context7.next=11;break;case 7:_context7.prev=7,_context7.t0=_context7.catch(1),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetConversationDetailsCallFailed,ExceptionDetails:{exception:"Get Conversation Details Call Failed : "+_context7.t0}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.Connection,"Get Conversation Details Call Failed: "+_context7.t0);case 11:return _context7.abrupt("return",conversationDetails);case 12:case"end":return _context7.stop()}}),_callee7,null,[[1,7]])})));return function getConversationDetailsCall(_x30){return _ref7.apply(this,arguments)}}();function updateSessionDataForTelemetry_regeneratorRuntime(){updateSessionDataForTelemetry_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function updateSessionDataForTelemetry_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var updateSessionDataForTelemetry=function(){var _ref=updateSessionDataForTelemetry_asyncToGenerator(updateSessionDataForTelemetry_regeneratorRuntime().mark((function _callee(chatSDK,dispatch){var chatSession,telemetryData;return updateSessionDataForTelemetry_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!chatSDK){_context.next=9;break}return _context.next=3,chatSDK.getCurrentLiveChatContext();case 3:return chatSession=_context.sent,telemetryData=TelemetryHelper_TelemetryHelper.addSessionDataToTelemetry(chatSession,TelemetryManager.InternalTelemetryData),dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.UpdateSessionDataForTelemetry,payload:{chatSession:chatSession}}),_context.next=9,updateConversationDataForTelemetry(chatSDK,dispatch);case 9:case"end":return _context.stop()}}),_callee)})));return function updateSessionDataForTelemetry(_x,_x2){return _ref.apply(this,arguments)}}(),updateConversationDataForTelemetry=function(){var _ref2=updateSessionDataForTelemetry_asyncToGenerator(updateSessionDataForTelemetry_regeneratorRuntime().mark((function _callee2(chatSDK,dispatch){var liveWorkItem,telemetryData;return updateSessionDataForTelemetry_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!chatSDK){_context2.next=7;break}return _context2.next=3,chatSDK.getConversationDetails();case 3:liveWorkItem=_context2.sent,telemetryData=TelemetryHelper_TelemetryHelper.addConversationDataToTelemetry(liveWorkItem,TelemetryManager.InternalTelemetryData),dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.UpdateConversationDataForTelemetry,payload:{liveWorkItem:liveWorkItem}});case 7:case"end":return _context2.stop()}}),_callee2)})));return function updateConversationDataForTelemetry(_x3,_x4){return _ref2.apply(this,arguments)}}();function startChat_regeneratorRuntime(){startChat_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function startChat_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var startChat_widgetInstanceId,startChat_optionalParams={},prepareStartChat=function(){var _ref=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee(props,chatSDK,state,dispatch,setAdapter){var _props$controlProps,isProactiveChat,isPreChatEnabledInProactiveChat;return startChat_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return startChat_optionalParams={},startChat_widgetInstanceId=null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.widgetInstanceId,_context.next=4,handleChatReconnect(chatSDK,props,dispatch,setAdapter,startChat_initStartChat,state);case 4:if(state.appStates.conversationState!==ConversationState.Active&&state.appStates.conversationState!==ConversationState.ReconnectChat){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,canConnectToExistingChat(props,chatSDK,state,dispatch,setAdapter);case 8:if(!_context.sent){_context.next=10;break}return _context.abrupt("return");case 10:isProactiveChat=state.appStates.conversationState===ConversationState.ProactiveChat,isPreChatEnabledInProactiveChat=state.appStates.proactiveChatStates.proactiveChatEnablePrechat,setPreChatAndInitiateChat(chatSDK,dispatch,setAdapter,isProactiveChat,isPreChatEnabledInProactiveChat,void 0,props);case 13:case"end":return _context.stop()}}),_callee)})));return function prepareStartChat(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}(),setPreChatAndInitiateChat=function(){var _ref2=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee2(chatSDK,dispatch,setAdapter,isProactiveChat,proactiveChatEnablePrechatState,state,props){var preChatSurveyResponse,optionalParams;return startChat_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!state){_context2.next=5;break}return _context2.next=3,handleChatReconnect(chatSDK,props,dispatch,setAdapter,startChat_initStartChat,state);case 3:if(state.appStates.conversationState!==ConversationState.Active&&state.appStates.conversationState!==ConversationState.ReconnectChat){_context2.next=5;break}return _context2.abrupt("return");case 5:return!1,_context2.next=8,chatSDK.getPreChatSurvey(false);case 8:if(preChatSurveyResponse=_context2.sent,!(isProactiveChat?preChatSurveyResponse&&proactiveChatEnablePrechatState:preChatSurveyResponse)){_context2.next=14;break}return dispatch({type:LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE,payload:preChatSurveyResponse}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Prechat}),_context2.abrupt("return");case 14:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),optionalParams={isProactiveChat:isProactiveChat},_context2.next=18,startChat_initStartChat(chatSDK,dispatch,setAdapter,props,optionalParams);case 18:case"end":return _context2.stop()}}),_callee2)})));return function setPreChatAndInitiateChat(_x6,_x7,_x8,_x9,_x10,_x11,_x12){return _ref2.apply(this,arguments)}}(),startChat_initStartChat=function(){var _ref3=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee3(chatSDK,dispatch,setAdapter,props,params,persistedState){var _props$controlProps2,isStartChatSuccessful,chatConfig,getAuthToken,hideErrorUIPane,_newAdapter$activity$,_TelemetryTimers$Widg,authClientFunction,_persistedState$domai,_persistedState$domai2,_persistedState$domai3,_persistedState$domai4,_persistedState$domai5,_window$Microsoft,_window$Microsoft$Dyn,_window$Microsoft$Dyn2,_window$Microsoft$Dyn3,defaultOptionalParams,startChatOptionalParams,newAdapter,chatToken,liveChatContext;return startChat_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(isStartChatSuccessful=!1,chatConfig=null==props?void 0:props.chatConfig,getAuthToken=null==props?void 0:props.getAuthToken,hideErrorUIPane=null==props||null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2?void 0:_props$controlProps2.hideErrorUIPane,_context3.prev=4,TelemetryTimers.WidgetLoadTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.WidgetLoadStarted,Description:"Widget loading started"}),authClientFunction=getAuthClientFunction(chatConfig),!getAuthToken||!authClientFunction){_context3.next=15;break}return _context3.next=11,handleAuthentication(chatSDK,chatConfig,getAuthToken);case 11:if(_context3.sent){_context3.next=15;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),_context3.abrupt("return");case 15:return(persistedState||null!=params&&params.liveChatContext)&&cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatRetrievedFromCache,payload:{chatId:null==persistedState||null===(_persistedState$domai=persistedState.domainStates)||void 0===_persistedState$domai||null===(_persistedState$domai2=_persistedState$domai.liveChatContext)||void 0===_persistedState$domai2||null===(_persistedState$domai3=_persistedState$domai2.chatToken)||void 0===_persistedState$domai3?void 0:_persistedState$domai3.chatId,requestId:null==persistedState||null===(_persistedState$domai4=persistedState.domainStates)||void 0===_persistedState$domai4||null===(_persistedState$domai5=_persistedState$domai4.liveChatContext)||void 0===_persistedState$domai5?void 0:_persistedState$domai5.requestId}}),_context3.prev=16,startChat_setCustomContextParams(chatSDK),defaultOptionalParams={sendDefaultInitContext:!0,isProactiveChat:!(null==params||!params.isProactiveChat),portalContactId:null===(_window$Microsoft=window.Microsoft)||void 0===_window$Microsoft||null===(_window$Microsoft$Dyn=_window$Microsoft.Dynamic365)||void 0===_window$Microsoft$Dyn||null===(_window$Microsoft$Dyn2=_window$Microsoft$Dyn.Portal)||void 0===_window$Microsoft$Dyn2||null===(_window$Microsoft$Dyn3=_window$Microsoft$Dyn2.User)||void 0===_window$Microsoft$Dyn3?void 0:_window$Microsoft$Dyn3.contactId},startChatOptionalParams=Object.assign({},params,startChat_optionalParams,defaultOptionalParams),_context3.next=22,chatSDK.startChat(startChatOptionalParams);case 22:isStartChatSuccessful=!0,_context3.next=30;break;case 25:throw _context3.prev=25,_context3.t0=_context3.catch(16),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.StartChatMethodException,ExceptionDetails:{exception:"Failed to setup startChat: "+_context3.t0}}),isStartChatSuccessful=!1,_context3.t0;case 30:return _context3.next=32,createAdapter(chatSDK);case 32:return newAdapter=_context3.sent,setAdapter(newAdapter),_context3.next=36,chatSDK.getChatToken();case 36:if(chatToken=_context3.sent,dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:chatToken}),null==newAdapter||null===(_newAdapter$activity$=newAdapter.activity$)||void 0===_newAdapter$activity$||_newAdapter$activity$.subscribe(newMessageEventHandler_createOnNewAdapterActivityHandler(null==chatToken||chatToken.chatId,null==chatToken?void 0:chatToken.visitorId)),!persistedState){_context3.next=43;break}return dispatch({type:LiveChatWidgetActionType.SET_WIDGET_STATE,payload:persistedState}),setPostChatContextAndLoadSurvey(chatSDK,dispatch,!0),_context3.abrupt("return");case 43:return _context3.next=45,null==chatSDK?void 0:chatSDK.getCurrentLiveChatContext();case 45:return liveChatContext=_context3.sent,dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:liveChatContext}),isStartChatSuccessful&&(ActivityStreamHandler_ActivityStreamHandler.uncork(),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Active})),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.WidgetLoadComplete,Description:"Widget load complete",ElapsedTimeInMilliseconds:null==TelemetryTimers||null===(_TelemetryTimers$Widg=TelemetryTimers.WidgetLoadTimer)||void 0===_TelemetryTimers$Widg?void 0:_TelemetryTimers$Widg.milliSecondsElapsed}),setPostChatContextAndLoadSurvey(chatSDK,dispatch),_context3.next=52,updateSessionDataForTelemetry(chatSDK,dispatch);case 52:_context3.next=67;break;case 54:if(_context3.prev=54,_context3.t1=_context3.catch(4),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.ERROR,{Event:TelemetryEvent.WidgetLoadFailed,ExceptionDetails:{Exception:"Widget load Failed: "+_context3.t1}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.Connection,"Start Chat Failed: "+_context3.t1),_context3.t1.message!==Constants.c.WidgetUseOutsideOperatingHour){_context3.next=62;break}return dispatch({type:LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),_context3.abrupt("return");case 62:if(hideErrorUIPane||(dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!0}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ErrorUIPaneLoaded,Description:"Error UI Pane Loaded"})),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),!0!==isStartChatSuccessful){_context3.next=67;break}return _context3.next=67,forceEndChat(chatSDK);case 67:return _context3.prev=67,startChat_optionalParams={},startChat_widgetInstanceId="",_context3.finish(67);case 71:case"end":return _context3.stop()}}),_callee3,null,[[4,54,67,71],[16,25]])})));return function initStartChat(_x13,_x14,_x15,_x16,_x17,_x18){return _ref3.apply(this,arguments)}}(),forceEndChat=function(){var _ref4=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee4(chatSDK){return startChat_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.ERROR,{Event:TelemetryEvent.WidgetLoadFailed,ExceptionDetails:{Exception:"SessionInit was successful, but widget load failed."}}),null==chatSDK||chatSDK.endChat();case 2:case"end":return _context4.stop()}}),_callee4)})));return function forceEndChat(_x19){return _ref4.apply(this,arguments)}}(),canConnectToExistingChat=function(){var _ref5=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee5(props,chatSDK,state,dispatch,setAdapter){var _chatSDK$omnichannelC,_chatSDK$omnichannelC2,_props$controlProps$w,_props$controlProps3,_persistedState$domai6,persistedState,_persistedState$domai7,_optionalParams;return startChat_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(!0!==state.appStates.hideStartChatButton){_context5.next=2;break}return _context5.abrupt("return",!1);case 2:if(!(persistedState=utils_getStateFromCache(null==chatSDK||null===(_chatSDK$omnichannelC=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC?void 0:_chatSDK$omnichannelC.orgId,null==chatSDK||null===(_chatSDK$omnichannelC2=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC2?void 0:_chatSDK$omnichannelC2.widgetId,null!==(_props$controlProps$w=null==props||null===(_props$controlProps3=props.controlProps)||void 0===_props$controlProps3?void 0:_props$controlProps3.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:""))||isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai6=persistedState.domainStates)||void 0===_persistedState$domai6?void 0:_persistedState$domai6.liveChatContext)){_context5.next=11;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_optionalParams={liveChatContext:null==persistedState||null===(_persistedState$domai7=persistedState.domainStates)||void 0===_persistedState$domai7?void 0:_persistedState$domai7.liveChatContext},_context5.next=8,startChat_initStartChat(chatSDK,dispatch,setAdapter,props,_optionalParams,persistedState);case 8:return _context5.abrupt("return",!0);case 11:return _context5.abrupt("return",!1);case 12:case"end":return _context5.stop()}}),_callee5)})));return function canConnectToExistingChat(_x20,_x21,_x22,_x23,_x24){return _ref5.apply(this,arguments)}}(),startChat_setCustomContextParams=function setCustomContextParams(chatSDK){var _chatSDK$omnichannelC3,_chatSDK$omnichannelC4,_widgetInstanceId,_persistedState$domai8,persistedState=utils_getStateFromCache(null==chatSDK||null===(_chatSDK$omnichannelC3=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC3?void 0:_chatSDK$omnichannelC3.orgId,null==chatSDK||null===(_chatSDK$omnichannelC4=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC4?void 0:_chatSDK$omnichannelC4.widgetId,null!==(_widgetInstanceId=startChat_widgetInstanceId)&&void 0!==_widgetInstanceId?_widgetInstanceId:"");if(!isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai8=persistedState.domainStates)||void 0===_persistedState$domai8?void 0:_persistedState$domai8.customContext)){var _persistedState$domai9,_persistedState$domai10;if(null!=persistedState&&null!==(_persistedState$domai9=persistedState.domainStates.liveChatConfig)&&void 0!==_persistedState$domai9&&_persistedState$domai9.LiveChatConfigAuthSettings){var errorMessage="Use of custom context with authenticated chat is deprecated. The chat would not go through.";throw TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.WARN,{Event:TelemetryEvent.StartChatMethodException,ExceptionDetails:{exception:errorMessage}}),new Error(errorMessage)}startChat_optionalParams=Object.assign({},startChat_optionalParams,{customContext:null==persistedState||null===(_persistedState$domai10=persistedState.domainStates)||void 0===_persistedState$domai10?void 0:_persistedState$domai10.customContext})}},checkIfConversationStillValid=function(){var _ref6=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee6(chatSDK,dispatch,state){var _state$domainStates,_state$domainStates$l,_chatSDK$requestId,requestId,conversationDetails,oldRequestId;return startChat_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return requestId=null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$l=_state$domainStates.liveChatContext)||void 0===_state$domainStates$l?void 0:_state$domainStates$l.requestId,conversationDetails=void 0,oldRequestId=null!==(_chatSDK$requestId=chatSDK.requestId)&&void 0!==_chatSDK$requestId?_chatSDK$requestId:"",dispatch({type:LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID,payload:oldRequestId}),_context6.prev=4,chatSDK.requestId=requestId,_context6.next=8,chatSDK.getConversationDetails();case 8:if(conversationDetails=_context6.sent,0!==Object.keys(conversationDetails).length){_context6.next=12;break}return chatSDK.requestId=oldRequestId,_context6.abrupt("return",!1);case 12:if(conversationDetails.state!==Constants.j.Closed&&conversationDetails.state!==Constants.j.WrapUp){_context6.next=16;break}return dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0}),chatSDK.requestId=oldRequestId,_context6.abrupt("return",!1);case 16:return _context6.abrupt("return",!0);case 19:return _context6.prev=19,_context6.t0=_context6.catch(4),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetConversationDetailsException,ExceptionDetails:{exception:"Conversation is not valid: "+_context6.t0}}),chatSDK.requestId=oldRequestId,_context6.abrupt("return",!1);case 24:case"end":return _context6.stop()}}),_callee6,null,[[4,19]])})));return function checkIfConversationStillValid(_x25,_x26,_x27){return _ref6.apply(this,arguments)}}(),componentController_shouldShowChatButton=function shouldShowChatButton(state){return(state.appStates.isMinimized||state.appStates.conversationState===ConversationState.Closed)&&!1===state.appStates.hideStartChatButton},componentController_shouldShowProactiveChatPane=function shouldShowProactiveChatPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.ProactiveChat},componentController_shouldShowHeader=function shouldShowHeader(state){return!state.appStates.isMinimized&&state.appStates.conversationState!==ConversationState.Closed&&state.appStates.conversationState!==ConversationState.ProactiveChat},shouldShowEmailTranscriptPane=function shouldShowEmailTranscriptPane(state){return state.uiStates.showEmailTranscriptPane},componentController_shouldShowWebChatContainer=function shouldShowWebChatContainer(state){return state.appStates.conversationState===ConversationState.Active||state.appStates.conversationState===ConversationState.InActive},componentController_shouldShowLoadingPane=function shouldShowLoadingPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.Loading},componentController_shouldShowReconnectChatPane=function shouldShowReconnectChatPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.ReconnectChat},componentController_shouldShowPostChatLoadingPane=function shouldShowPostChatLoadingPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.PostchatLoading},componentController_shouldShowOutOfOfficeHoursPane=function shouldShowOutOfOfficeHoursPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.OutOfOffice},componentController_shouldShowPreChatSurveyPane=function shouldShowPreChatSurveyPane(state){return state.appStates.conversationState===ConversationState.Prechat},shouldShowConfirmationPane=function shouldShowConfirmationPane(state){return state.uiStates.showConfirmationPane},componentController_shouldShowPostChatSurveyPane=function shouldShowPostChatSurveyPane(state){return state.appStates.conversationState===ConversationState.Postchat},componentController_shouldShowCallingContainer=function shouldShowCallingContainer(state){return state.appStates.conversationState===ConversationState.Active&&state.appStates.e2vvEnabled};function CallingContainerStateful_regeneratorRuntime(){CallingContainerStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function CallingContainerStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function CallingContainerStateful_slicedToArray(arr,i){return function CallingContainerStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CallingContainerStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function CallingContainerStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CallingContainerStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CallingContainerStateful_arrayLikeToArray(o,minLen)}(arr,i)||function CallingContainerStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CallingContainerStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var CallingContainerStateful_CallingContainerStateful=function CallingContainerStateful(props){var _props$controlProps,_props$controlProps2,_props$controlProps2$,_props$controlProps$c,_props$controlProps3,_props$controlProps3$,_props$controlProps3$2,_props$controlProps$c2,_props$controlProps4,_props$controlProps4$,_props$controlProps4$2,_props$controlProps5,callId,_useChatContextStore2=CallingContainerStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],chatSDK=hooks_useChatSDKStore(),voiceVideoCallingSdk=props.voiceVideoCallingSdk,resetCallingStates=function resetCallingStates(reset){reset&&(dispatch({type:LiveChatWidgetActionType.SHOW_CALLING_CONTAINER,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:!0}))};Object(react.useEffect)((function(){var init=function(){var _ref2=CallingContainerStateful_asyncToGenerator(CallingContainerStateful_regeneratorRuntime().mark((function _callee(){var _controlProps$current,_controlProps$current2,_controlProps$current3,_controlProps$current4;return CallingContainerStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,TelemetryHelper_TelemetryHelper.callId=callId,_context.next=4,voiceVideoCallingSdk.initialize({chatToken:state.domainStates.chatToken,selfVideoHTMLElementId:null===(_controlProps$current=controlProps.currentCallControlProps)||void 0===_controlProps$current||null===(_controlProps$current2=_controlProps$current.nonActionIds)||void 0===_controlProps$current2?void 0:_controlProps$current2.selfVideoTileId,remoteVideoHTMLElementId:null===(_controlProps$current3=controlProps.currentCallControlProps)||void 0===_controlProps$current3||null===(_controlProps$current4=_controlProps$current3.nonActionIds)||void 0===_controlProps$current4?void 0:_controlProps$current4.remoteVideoTileId,OCClient:null==chatSDK?void 0:chatSDK.OCClient});case 4:_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoSdkInitializeException,Description:"Failed to initialize VideoVoiceCalling Sdk:  "+_context.t0});case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})));return function init(){return _ref2.apply(this,arguments)}}();init().then((function(){voiceVideoCallingSdk&&(TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VoiceVideoSdkInitialize,Description:"Initialize VideoVoiceCalling Sdk Success"},callId),voiceVideoCallingSdk.onCallAdded((function(){callId=voiceVideoCallingSdk.callId,TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallAdded},callId),dispatch({type:LiveChatWidgetActionType.SHOW_CALLING_CONTAINER,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!0})})),voiceVideoCallingSdk.onRemoteVideoStreamAdded((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.RemoteVideoStreamAdded},callId);var isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled(),isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled})})),voiceVideoCallingSdk.onLocalVideoStreamAdded((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.LocalVideoStreamAdded},callId);var isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled(),isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled();dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled})})),voiceVideoCallingSdk.onRemoteVideoStreamRemoved((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.RemoteVideoStreamRemoved},callId);var isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled(),isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();isRemoteVideoDisabled&&isLocalVideoDisabled&&dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled})})),voiceVideoCallingSdk.onLocalVideoStreamRemoved((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.LocalVideoStreamRemoved},callId);var isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();!voiceVideoCallingSdk.isRemoteVideoEnabled()&&isLocalVideoDisabled&&dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled})})),voiceVideoCallingSdk.onCallDisconnected((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallDisconnected},callId),resetCallingStates(!0)})),voiceVideoCallingSdk.addEventListener(TelemetryEvent.IncomingCallEnded,(function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.IncomingCallEnded},callId),resetCallingStates(!0)})))})),window.addEventListener("beforeunload",(function(){state.uiStates.isIncomingCall?null==voiceVideoCallingSdk||voiceVideoCallingSdk.rejectCall():null==voiceVideoCallingSdk||voiceVideoCallingSdk.stopCall(),null==voiceVideoCallingSdk||voiceVideoCallingSdk.close(),dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!1}),resetCallingStates(!0)}))}),[]);var controlProps=Object.assign({id:"oc-lcw-callingcontainer",dir:state.domainStates.globalDir,isIncomingCall:state.uiStates.isIncomingCall,hideCallingContainer:!!state.appStates.isMinimized},null==props?void 0:props.controlProps,{incomingCallControlProps:Object.assign({onDeclineCallClick:Object(react.useCallback)(CallingContainerStateful_asyncToGenerator(CallingContainerStateful_regeneratorRuntime().mark((function _callee2(){return CallingContainerStateful_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:try{voiceVideoCallingSdk.rejectCall(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallRejectClick},callId),resetCallingStates(!0)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.CallRejectClickException,ExceptionDetails:{exception:"Failed to reject call:  "+error}},callId)}case 1:case"end":return _context2.stop()}}),_callee2)}))),[voiceVideoCallingSdk]),onAudioCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.acceptCall({withVideo:!1}),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VoiceCallAcceptButtonClick},callId)}catch(err){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoAcceptCallException,ExceptionDetails:{exception:"Failed to accept call without video:  "+err}},callId)}dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0})}),[]),onVideoCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.acceptCall({withVideo:!0}),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VideoCallAcceptButtonClick},callId)}catch(err){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoAcceptCallWithVideoException,ExceptionDetails:{exception:"Failed to accept call with video:  "+err}},callId)}dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:!1})}),[])},null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.incomingCallControlProps),currentCallControlProps:Object.assign({hideCallTimer:!0,onEndCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.stopCall(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.EndCallButtonClick},callId),resetCallingStates(!0)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndCallButtonClickException,ExceptionDetails:{exception:"Failed to End Call:  "+error}},callId)}}),[]),onMicCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.toggleMute(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.ToggleMuteButtonClick},callId)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.ToggleMuteButtonClickException,ExceptionDetails:{exception:"Failed to toggle mute button :  "+error}},callId)}}),[]),onVideoOffClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.toggleLocalVideo(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.ToggleCameraButtonClick},callId)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.ToggleCameraButtonClickException,ExceptionDetails:{exception:"Failed to toggle video button :  "+error}},callId)}}),[]),nonActionIds:Object.assign({},null==props||null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2||null===(_props$controlProps2$=_props$controlProps2.currentCallControlProps)||void 0===_props$controlProps2$?void 0:_props$controlProps2$.nonActionIds,{selfVideoTileId:null!==(_props$controlProps$c=null==props||null===(_props$controlProps3=props.controlProps)||void 0===_props$controlProps3||null===(_props$controlProps3$=_props$controlProps3.currentCallControlProps)||void 0===_props$controlProps3$||null===(_props$controlProps3$2=_props$controlProps3$.nonActionIds)||void 0===_props$controlProps3$2?void 0:_props$controlProps3$2.selfVideoTileId)&&void 0!==_props$controlProps$c?_props$controlProps$c:"selfVideo",remoteVideoTileId:null!==(_props$controlProps$c2=null==props||null===(_props$controlProps4=props.controlProps)||void 0===_props$controlProps4||null===(_props$controlProps4$=_props$controlProps4.currentCallControlProps)||void 0===_props$controlProps4$||null===(_props$controlProps4$2=_props$controlProps4$.nonActionIds)||void 0===_props$controlProps4$2?void 0:_props$controlProps4$2.remoteVideoTileId)&&void 0!==_props$controlProps$c2?_props$controlProps$c2:"remoteVideo"}),videoCallDisabled:state.uiStates.disableVideoCall,selfVideoDisabled:state.uiStates.disableSelfVideo,remoteVideoDisabled:state.uiStates.disableRemoteVideo},null==props||null===(_props$controlProps5=props.controlProps)||void 0===_props$controlProps5?void 0:_props$controlProps5.currentCallControlProps)});return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:state.uiStates.showCallingPopup&&Object(jsx_runtime.jsx)(cjs.CallingContainer,{controlProps:controlProps,styleProps:null==props?void 0:props.styleProps})})},callingcontainerstateful_CallingContainerStateful=CallingContainerStateful_CallingContainerStateful;try{CallingContainerStateful_CallingContainerStateful.displayName="CallingContainerStateful",CallingContainerStateful_CallingContainerStateful.__docgenInfo={description:"",displayName:"CallingContainerStateful",props:{voiceVideoCallingSdk:{defaultValue:null,description:"",name:"voiceVideoCallingSdk",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/callingcontainerstateful/CallingContainerStateful.tsx#CallingContainerStateful"]={docgenInfo:CallingContainerStateful_CallingContainerStateful.__docgenInfo,name:"CallingContainerStateful",path:"src/components/callingcontainerstateful/CallingContainerStateful.tsx#CallingContainerStateful"})}catch(__react_docgen_typescript_loader_error){}var defaultOutOfOfficeChatButtonStyleProps={iconStyleProps:{backgroundColor:"#000000"},subtitleStyleProps:{margin:"0px 10px 0px 10px"}};function ChatButtonStateful_regeneratorRuntime(){ChatButtonStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ChatButtonStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ChatButtonStateful_slicedToArray(arr,i){return function ChatButtonStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ChatButtonStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ChatButtonStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChatButtonStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChatButtonStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ChatButtonStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChatButtonStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ChatButtonStateful_ChatButtonStateful=function ChatButtonStateful(props){var _state$domainStates$l,_state$domainStates$l2,_buttonProps$controlP,_props$buttonProps,_props$buttonProps$co,_props$buttonProps2,_props$buttonProps2$c,_props$buttonProps3,_props$buttonProps3$c,_onClick,_onClick2,_useChatContextStore2=ChatButtonStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],buttonProps=props.buttonProps,outOfOfficeButtonProps=props.outOfOfficeButtonProps,startChat=props.startChat,_useState2=ChatButtonStateful_slicedToArray(Object(react.useState)("True"===(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.OutOfOperatingHours)),2),outOfOperatingHours=_useState2[0],setOutOfOperatingHours=_useState2[1],proactiveChatInNewWindow=Object(react.useRef)(state.appStates.proactiveChatStates.proactiveChatInNewWindow),outOfOfficeStyleProps=Object.assign({},defaultOutOfOfficeChatButtonStyleProps,null==outOfOfficeButtonProps?void 0:outOfOfficeButtonProps.styleProps),controlProps=Object.assign({id:"oc-lcw-chat-button",dir:state.domainStates.globalDir,titleText:"Let's Chat!",subtitleText:"We're online.",hideNotificationBubble:!0===(null==buttonProps||null===(_buttonProps$controlP=buttonProps.controlProps)||void 0===_buttonProps$controlP?void 0:_buttonProps$controlP.hideNotificationBubble)||!1===state.appStates.isMinimized,unreadMessageCount:state.appStates.unreadMessageCount?state.appStates.unreadMessageCount>Constants.d.maximumUnreadMessageCount?null===(_props$buttonProps=props.buttonProps)||void 0===_props$buttonProps||null===(_props$buttonProps$co=_props$buttonProps.controlProps)||void 0===_props$buttonProps$co?void 0:_props$buttonProps$co.largeUnreadMessageString:state.appStates.unreadMessageCount.toString():"0",onClick:(_onClick=ChatButtonStateful_asyncToGenerator(ChatButtonStateful_regeneratorRuntime().mark((function _callee(){var proactiveChatIsInPopoutModeEvent;return ChatButtonStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonClicked}),!proactiveChatInNewWindow.current){_context.next=6;break}proactiveChatIsInPopoutModeEvent={eventName:BroadcastEvent.ProactiveChatIsInPopoutMode},cjs.BroadcastService.postMessage(proactiveChatIsInPopoutModeEvent),_context.next=12;break;case 6:if(!state.appStates.isMinimized){_context.next=10;break}dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),_context.next=12;break;case 10:return _context.next=12,startChat();case 12:case"end":return _context.stop()}}),_callee)}))),function onClick(){return _onClick.apply(this,arguments)}),unreadMessageString:null===(_props$buttonProps2=props.buttonProps)||void 0===_props$buttonProps2||null===(_props$buttonProps2$c=_props$buttonProps2.controlProps)||void 0===_props$buttonProps2$c?void 0:_props$buttonProps2$c.unreadMessageString},null==buttonProps?void 0:buttonProps.controlProps),outOfOfficeControlProps=Object.assign({id:"oc-lcw-chat-button",dir:state.domainStates.globalDir,titleText:"We're Offline",subtitleText:"No agents available",onClick:(_onClick2=ChatButtonStateful_asyncToGenerator(ChatButtonStateful_regeneratorRuntime().mark((function _callee2(){return ChatButtonStateful_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonClicked}),state.appStates.isMinimized?dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}):dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice});case 2:case"end":return _context2.stop()}}),_callee2)}))),function onClick(){return _onClick2.apply(this,arguments)}),unreadMessageString:null===(_props$buttonProps3=props.buttonProps)||void 0===_props$buttonProps3||null===(_props$buttonProps3$c=_props$buttonProps3.controlProps)||void 0===_props$buttonProps3$c?void 0:_props$buttonProps3$c.unreadMessageString},null==outOfOfficeButtonProps?void 0:outOfOfficeButtonProps.controlProps);return Object(react.useEffect)((function(){var _controlProps$id;(state.appStates.outsideOperatingHours&&setOutOfOperatingHours(!0),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonShow,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed}),state.uiStates.focusChatButton)?setFocusOnElement(document.getElementById(null!==(_controlProps$id=null==controlProps?void 0:controlProps.id)&&void 0!==_controlProps$id?_controlProps$id:"oc-lcw-chat-button")):dispatch({type:LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON,payload:!0})}),[]),Object(react.useEffect)((function(){proactiveChatInNewWindow.current=state.appStates.proactiveChatStates.proactiveChatInNewWindow}),[state.appStates.proactiveChatStates.proactiveChatInNewWindow]),Object(jsx_runtime.jsx)(cjs.ChatButton,{componentOverrides:null==buttonProps?void 0:buttonProps.componentOverrides,controlProps:outOfOperatingHours?outOfOfficeControlProps:controlProps,styleProps:outOfOperatingHours?outOfOfficeStyleProps:null==buttonProps?void 0:buttonProps.styleProps})};ChatButtonStateful_ChatButtonStateful.displayName="ChatButtonStateful";var chatbuttonstateful_ChatButtonStateful=ChatButtonStateful_ChatButtonStateful;try{ChatButtonStateful_ChatButtonStateful.displayName="ChatButtonStateful",ChatButtonStateful_ChatButtonStateful.__docgenInfo={description:"",displayName:"ChatButtonStateful",props:{buttonProps:{defaultValue:null,description:"buttonProps: Props for regular chat Button usage\nThese props are used for all regular usages of chat button excluding special scenarios",name:"buttonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeButtonProps:{defaultValue:null,description:"outOfOfficeButtonProps: Props for Out of Office chat Button usage\nThese props are used for styling and control of chat Button during Out Of Office actions",name:"outOfOfficeButtonProps",required:!1,type:{name:"IChatButtonProps"}},startChat:{defaultValue:null,description:"startChat: Internal Prop injected for triggering start of a chat using chatSDK",name:"startChat",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/chatbuttonstateful/ChatButtonStateful.tsx#ChatButtonStateful"]={docgenInfo:ChatButtonStateful_ChatButtonStateful.__docgenInfo,name:"ChatButtonStateful",path:"src/components/chatbuttonstateful/ChatButtonStateful.tsx#ChatButtonStateful"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.map.js");var DimLayer_DimLayer=function DimLayer(_ref){var defaultDimLayerStyles={position:"absolute",borderRadius:"inherit",width:"100%",height:"100%",zIndex:100,backgroundColor:"rgba(0, 0, 0, "+_ref.brightness+")"};return Object(jsx_runtime.jsx)("div",{id:"oc-lcw-dim-layer",style:defaultDimLayerStyles})};DimLayer_DimLayer.displayName="DimLayer";try{DimLayer_DimLayer.displayName="DimLayer",DimLayer_DimLayer.__docgenInfo={description:"",displayName:"DimLayer",props:{brightness:{defaultValue:null,description:"",name:"brightness",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/dimlayer/DimLayer.tsx#DimLayer"]={docgenInfo:DimLayer_DimLayer.__docgenInfo,name:"DimLayer",path:"src/components/dimlayer/DimLayer.tsx#DimLayer"})}catch(__react_docgen_typescript_loader_error){}var hooks_useChatAdapterStore=function useChatAdapterStore(){var adapter=Object(react.useContext)(ChatAdapterStore);if(!adapter)throw new Error("This hook can only be used on component that is descendants of <ChatAdapterStore.Provider>");return adapter};function ConfirmationPaneStateful_regeneratorRuntime(){ConfirmationPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ConfirmationPaneStateful_slicedToArray(arr,i){return function ConfirmationPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ConfirmationPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ConfirmationPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ConfirmationPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ConfirmationPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ConfirmationPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConfirmationPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ConfirmationPaneStateful_ConfirmationPaneStateful=function ConfirmationPaneStateful(props){var _controlProps$brightn,_onConfirm,initialTabIndexMap=new Map,elements=[],_useChatContextStore2=ConfirmationPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],controlProps=(ConfirmationPaneStateful_slicedToArray(hooks_useChatAdapterStore(),1)[0],Object.assign({id:"oc-lcw-confirmation-pane",dir:state.domainStates.globalDir,onConfirm:(_onConfirm=function ConfirmationPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ConfirmationPaneStateful_regeneratorRuntime().mark((function _callee(){return ConfirmationPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationConfirmButtonClicked,Description:"Confirmation pane Confirm button clicked"}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!1}),setTabIndices(elements,initialTabIndexMap,!0),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:ConversationEndEntity.Customer}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedByCustomer,Description:"Conversation is ended by customer."});case 5:case"end":return _context.stop()}}),_callee)}))),function onConfirm(){return _onConfirm.apply(this,arguments)}),onCancel:function onCancel(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationCancelButtonClicked,Description:"Confirmation pane Cancel button clicked."}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!1});var previousFocusedElementId=state.appStates.previousElementIdOnFocusBeforeModalOpen;previousFocusedElementId?(setFocusOnElement("#"+previousFocusedElementId),dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:null})):setFocusOnSendBox(),setTabIndices(elements,initialTabIndexMap,!0)}},null==props?void 0:props.controlProps));return Object(react.useEffect)((function(){utils_preventFocusToMoveOutOfElement(controlProps.id);var focusableElements=findAllFocusableElement("#"+controlProps.id);focusableElements&&focusableElements[0].focus(),elements=findParentFocusableElementsWithoutChildContainer(controlProps.id),setTabIndices(elements,initialTabIndexMap,!1),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationPaneLoaded})}),[]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(DimLayer_DimLayer,{brightness:null!==(_controlProps$brightn=null==controlProps?void 0:controlProps.brightnessValueOnDim)&&void 0!==_controlProps$brightn?_controlProps$brightn:"0.2"}),Object(jsx_runtime.jsx)(cjs.ConfirmationPane,{componentOverrides:null==props?void 0:props.componentOverrides,controlProps:controlProps,styleProps:null==props?void 0:props.styleProps})]})},confirmationpanestateful_ConfirmationPaneStateful=ConfirmationPaneStateful_ConfirmationPaneStateful;try{ConfirmationPaneStateful_ConfirmationPaneStateful.displayName="ConfirmationPaneStateful",ConfirmationPaneStateful_ConfirmationPaneStateful.__docgenInfo={description:"",displayName:"ConfirmationPaneStateful",props:{setPostChatContext:{defaultValue:null,description:"setPostChatContext: Internal Prop injected for setting Post Chat Context",name:"setPostChatContext",required:!0,type:{name:"() => Promise<void>"}},confirmationPaneLocalizedTexts:{defaultValue:null,description:"confirmationPaneLocalizedTexts: Internal Prop injected for setting localized texts",name:"confirmationPaneLocalizedTexts",required:!1,type:{name:"IConfirmationPaneLocalizedTexts"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/confirmationpanestateful/ConfirmationPaneStateful.tsx#ConfirmationPaneStateful"]={docgenInfo:ConfirmationPaneStateful_ConfirmationPaneStateful.__docgenInfo,name:"ConfirmationPaneStateful",path:"src/components/confirmationpanestateful/ConfirmationPaneStateful.tsx#ConfirmationPaneStateful"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js");function EmailTranscriptPaneStateful_regeneratorRuntime(){EmailTranscriptPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EmailTranscriptPaneStateful_slicedToArray(arr,i){return function EmailTranscriptPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EmailTranscriptPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function EmailTranscriptPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EmailTranscriptPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EmailTranscriptPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function EmailTranscriptPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EmailTranscriptPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EmailTranscriptPaneStateful_EmailTranscriptPaneStateful=function EmailTranscriptPaneStateful(props){var _props$controlProps$i,_props$controlProps,_controlProps$brightn,_onSend,initialTabIndexMap=new Map,elements=[],_useChatContextStore2=EmailTranscriptPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],chatSDK=hooks_useChatSDKStore(),_useState2=EmailTranscriptPaneStateful_slicedToArray(Object(react.useState)(""),2),initialEmail=_useState2[0],setInitialEmail=_useState2[1],closeEmailTranscriptPane=function closeEmailTranscriptPane(){dispatch({type:LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE,payload:!1});var previousFocusedElementId=state.appStates.previousElementIdOnFocusBeforeModalOpen;previousFocusedElementId?setFocusOnElement("#"+previousFocusedElementId):setFocusOnSendBox(),dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:null}),setTabIndices(elements,initialTabIndexMap,!0)},controlProps=Object.assign({id:"oclcw-emailTranscriptDialogContainer",dir:state.domainStates.globalDir,onSend:(_onSend=function EmailTranscriptPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(EmailTranscriptPaneStateful_regeneratorRuntime().mark((function _callee(email){var _props$attachmentMess,chatTranscriptBody,_props$bannerMessageO;return EmailTranscriptPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return closeEmailTranscriptPane(),chatTranscriptBody={emailAddress:email,attachmentMessage:null!==(_props$attachmentMess=null==props?void 0:props.attachmentMessage)&&void 0!==_props$attachmentMess?_props$attachmentMess:"The following attachment was uploaded during the conversation:"},_context.prev=2,_context.next=5,null==chatSDK?void 0:chatSDK.emailLiveChatTranscript(chatTranscriptBody);case 5:TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptSent,Description:"Transcript sent to email successfully."}),_context.next=12;break;case 8:_context.prev=8,_context.t0=_context.catch(2),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.EmailTranscriptFailed,ExceptionDetails:{exception:_context.t0}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.EmailTranscriptError,null!==(_props$bannerMessageO=null==props?void 0:props.bannerMessageOnError)&&void 0!==_props$bannerMessageO?_props$bannerMessageO:"Email transcript to "+email+" failed.");case 12:case"end":return _context.stop()}}),_callee,null,[[2,8]])}))),function onSend(_x2){return _onSend.apply(this,arguments)}),onCancel:function onCancel(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptCancelButtonClicked,Description:"Email Transcript cancel button clicked."}),closeEmailTranscriptPane()},checkInput:function checkInput(input){return new RegExp(Constants.m.EmailRegex).test(input)}},props.controlProps,{inputInitialText:null!==(_props$controlProps$i=null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.inputInitialText)&&void 0!==_props$controlProps$i?_props$controlProps$i:initialEmail});return Object(react.useEffect)((function(){utils_preventFocusToMoveOutOfElement(controlProps.id);var focusableElements=findAllFocusableElement("#"+controlProps.id);focusableElements&&focusableElements[0].focus(),elements=findParentFocusableElementsWithoutChildContainer(controlProps.id),setTabIndices(elements,initialTabIndexMap,!1),setInitialEmail(state.appStates.preChatResponseEmail),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptLoaded})}),[initialEmail]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(DimLayer_DimLayer,{brightness:null!==(_controlProps$brightn=null==controlProps?void 0:controlProps.brightnessValueOnDim)&&void 0!==_controlProps$brightn?_controlProps$brightn:"0.2"}),Object(jsx_runtime.jsx)(cjs.InputValidationPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:props.styleProps})]})},emailtranscriptpanestateful_EmailTranscriptPaneStateful=EmailTranscriptPaneStateful_EmailTranscriptPaneStateful;try{EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.displayName="EmailTranscriptPaneStateful",EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.__docgenInfo={description:"",displayName:"EmailTranscriptPaneStateful",props:{attachmentMessage:{defaultValue:null,description:"Attachment message prefix for email chat transcript",name:"attachmentMessage",required:!1,type:{name:"string"}},bannerMessageOnError:{defaultValue:null,description:"Error message shown when failed to send transcript to email",name:"bannerMessageOnError",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/emailtranscriptpanestateful/EmailTranscriptPaneStateful.tsx#EmailTranscriptPaneStateful"]={docgenInfo:EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.__docgenInfo,name:"EmailTranscriptPaneStateful",path:"src/components/emailtranscriptpanestateful/EmailTranscriptPaneStateful.tsx#EmailTranscriptPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var defaultOutOfOfficeHeaderStyleProps={generalStyleProps:{borderRadius:"0px",backgroundColor:"#000000",height:"40px"},titleStyleProps:{margin:"0 0 0 10px",color:"White"}};function HeaderStateful_regeneratorRuntime(){HeaderStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function HeaderStateful_slicedToArray(arr,i){return function HeaderStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function HeaderStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function HeaderStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return HeaderStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HeaderStateful_arrayLikeToArray(o,minLen)}(arr,i)||function HeaderStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HeaderStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var HeaderStateful_HeaderStateful=function HeaderStateful(props){var _state$domainStates$l,_state$domainStates$l2,_headerProps$controlP,_headerProps$controlP2,_headerProps$controlP3,_outOfOfficeHeaderPro,_onCloseClick,_useChatContextStore2=HeaderStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],adapter=HeaderStateful_slicedToArray(hooks_useChatAdapterStore(),1)[0],headerProps=props.headerProps,outOfOfficeHeaderProps=props.outOfOfficeHeaderProps,endChat=props.endChat,_useState2=HeaderStateful_slicedToArray(Object(react.useState)("True"===(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.OutOfOperatingHours)),2),outOfOperatingHours=_useState2[0],setOutOfOperatingHours=_useState2[1],outOfOfficeStyleProps=Object.assign({},defaultOutOfOfficeHeaderStyleProps,null==outOfOfficeHeaderProps?void 0:outOfOfficeHeaderProps.styleProps),conversationState=Object(react.useRef)(state.appStates.conversationState),conversationEndedBy=Object(react.useRef)(state.appStates.conversationEndedBy),controlProps=Object.assign({id:"oc-lcw-header",dir:state.domainStates.globalDir,onMinimizeClick:function onMinimizeClick(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.HeaderMinimizeButtonClicked,Description:"Header Minimize button clicked."}),dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0})},onCloseClick:(_onCloseClick=function HeaderStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(HeaderStateful_regeneratorRuntime().mark((function _callee(){var _props$headerProps$co,_props$headerProps,_props$headerProps$co2,_props$headerProps$co3,closeButtonId;return HeaderStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.HeaderCloseButtonClicked,Description:"Header Close button clicked."}),conversationState.current!==ConversationState.Active&&conversationEndedBy.current!==ConversationEndEntity.Agent){_context.next=5;break}dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!0}),_context.next=10;break;case 5:return _context.next=10,endChat(adapter,!0,!1,!0);case 10:(closeButtonId=null!==(_props$headerProps$co=null===(_props$headerProps=props.headerProps)||void 0===_props$headerProps||null===(_props$headerProps$co2=_props$headerProps.controlProps)||void 0===_props$headerProps$co2||null===(_props$headerProps$co3=_props$headerProps$co2.closeButtonProps)||void 0===_props$headerProps$co3?void 0:_props$headerProps$co3.id)&&void 0!==_props$headerProps$co?_props$headerProps$co:controlProps.id+"-close-button")&&dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:closeButtonId});case 12:case"end":return _context.stop()}}),_callee)}))),function onCloseClick(){return _onCloseClick.apply(this,arguments)})},null==headerProps?void 0:headerProps.controlProps,{hideTitle:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.isStartChatFailing||state.appStates.conversationState===ConversationState.PostchatLoading||(null==headerProps||null===(_headerProps$controlP=headerProps.controlProps)||void 0===_headerProps$controlP?void 0:_headerProps$controlP.hideTitle),hideIcon:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.isStartChatFailing||state.appStates.conversationState===ConversationState.PostchatLoading||(null==headerProps||null===(_headerProps$controlP2=headerProps.controlProps)||void 0===_headerProps$controlP2?void 0:_headerProps$controlP2.hideIcon),hideCloseButton:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.isStartChatFailing||state.appStates.conversationState===ConversationState.PostchatLoading||state.appStates.conversationState===ConversationState.Prechat||state.appStates.conversationState===ConversationState.ReconnectChat||(null==headerProps||null===(_headerProps$controlP3=headerProps.controlProps)||void 0===_headerProps$controlP3?void 0:_headerProps$controlP3.hideCloseButton)}),outOfOfficeControlProps=Object.assign({id:"oc-lcw-header",dir:state.domainStates.globalDir,headerTitleProps:{text:"We're Offline"},onMinimizeClick:function onMinimizeClick(){dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0})}},null==outOfOfficeHeaderProps?void 0:outOfOfficeHeaderProps.controlProps,{hideCloseButton:state.appStates.conversationState===ConversationState.OutOfOffice||(null==outOfOfficeHeaderProps||null===(_outOfOfficeHeaderPro=outOfOfficeHeaderProps.controlProps)||void 0===_outOfOfficeHeaderPro?void 0:_outOfOfficeHeaderPro.hideCloseButton)});return Object(react.useEffect)((function(){state.appStates.outsideOperatingHours&&setOutOfOperatingHours(!0),state.appStates.conversationState&&(conversationState.current=state.appStates.conversationState),conversationEndedBy.current=state.appStates.conversationEndedBy}),[state.appStates]),Object(jsx_runtime.jsx)(cjs.Header,{componentOverrides:null==headerProps?void 0:headerProps.componentOverrides,controlProps:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeControlProps:controlProps,styleProps:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeStyleProps:null==headerProps?void 0:headerProps.styleProps})};HeaderStateful_HeaderStateful.displayName="HeaderStateful";var headerstateful_HeaderStateful=HeaderStateful_HeaderStateful;try{HeaderStateful_HeaderStateful.displayName="HeaderStateful",HeaderStateful_HeaderStateful.__docgenInfo={description:"",displayName:"HeaderStateful",props:{headerProps:{defaultValue:null,description:"headerProps: Props for regular Header usage\nThese props are used for all regular usages of Header excluding special scenarios",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"outOfOfficeHeaderProps: Props for Out of Office Header usage\nThese props are used for styling and control of Header during Out Of Office actions",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},endChat:{defaultValue:null,description:"endChat: Internal Prop injected for triggering end of a chat using chatSDK\n@param adapter : The chat adapter for the live chat session\n@param skipEndChatSDK : If set to true endchat will skip chatSDK endChat call\n@param skipCloseChat : If set to true endchat will skip closing the live chat instance\n@param postMessageToOtherTab : If set to true endchat will send a message to other tabs(multi-tabs)",name:"endChat",required:!0,type:{name:"(adapter: any, skipEndChatSDK?: boolean | undefined, skipCloseChat?: boolean | undefined, postMessageToOtherTab?: boolean | undefined) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/headerstateful/HeaderStateful.tsx#HeaderStateful"]={docgenInfo:HeaderStateful_HeaderStateful.__docgenInfo,name:"HeaderStateful",path:"src/components/headerstateful/HeaderStateful.tsx#HeaderStateful"})}catch(__react_docgen_typescript_loader_error){}var defaultGeneralLoadingPaneStyleProps={position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#315FA2"},Image_types=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.types.js"),ArchiveIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDQ4IDIwNDgiIHdpZHRoPSIxMnB4IiBoZWlnaHQ9IjEycHgiPg0KPHBhdGggZD0iTTE3OTIgMHEyNyAwIDUwIDEwdDQwIDI3IDI4IDQxIDEwIDUwdjQ4MHEwIDQ1LTkgNzd0LTI0IDU4LTMxIDQ2LTMxIDQwLTIzIDQ0LTEwIDU1djk5MnEwIDI3LTEwIDUwdC0yNyA0MC00MSAyOC01MCAxMEgyNTZWMGgxNTM2ek02NDAgMTI4djM4NGgyNTZWMTI4SDY0MHptMTAyNCA4MDBxMC0zMS05LTU0dC0yNC00NC0zMS00MS0zMS00NS0yMy01OC0xMC03OFYxMjhoLTUxMnY1MTJINzY4djEyOEg2NDBWNjQwSDUxMlYxMjhIMzg0djE3OTJoMzg0di0xMjhoMTI4djEyOGg3NjhWOTI4em0xMjgtODAwaC0xMjh2NDgwcTAgMjQgNCA0MnQxMyAzMyAyMCAyOSAyNyAzMnExNS0xNyAyNi0zMXQyMC0zMCAxMy0zMyA1LTQyVjEyOHpNNjQwIDg5NmgxMjh2MTI4SDY0MFY4OTZ6bTAgMjU2aDEyOHYxMjhINjQwdi0xMjh6bTAgMjU2aDEyOHYxMjhINjQwdi0xMjh6bTEyOCAyNTZ2MTI4SDY0MHYtMTI4aDEyOHptMC03NjhWNzY4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4eiIgLz4NCjwvc3ZnPg==",AudioIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xNzkyIDE0MDhxMCA2Mi0yOSAxMDl0LTc2IDgwLTEwNCA1MC0xMTEgMTdxLTU0IDAtMTExLTE3dC0xMDMtNDktNzYtODAtMzAtMTEwcTAtNjEgMjktMTA5dDc2LTgwIDEwNC01MCAxMTEtMTdxNTEgMCAxMDAgMTJ0OTIgMzlWMjI2TDc2OCA0NTB2MTIxNHEwIDYyLTI5IDEwOXQtNzYgODAtMTA0IDUwLTExMSAxN3EtNTQgMC0xMTEtMTd0LTEwMy00OS03Ni04MC0zMC0xMTBxMC02MSAyOS0xMDl0NzYtODAgMTA0LTUwIDExMS0xN3E1MSAwIDEwMCAxMnQ5MiAzOVYzNTBMMTc5MiA2MnYxMzQ2eiIgLz4NCjwvc3ZnPg==",BlankIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik01NDkgMGgxMjQzdjE3NTVsLTI5MyAyOTNIMjU2VjI5M0w1NDkgMHptMTExNSAxNzAxVjEyOEg2MDNMMzg0IDM0N3YxNTczaDEwNjFsMjE5LTIxOXoiIC8+DQo8L3N2Zz4=",ExcelIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMjYxIDE0MjRoMTg5cTItNCAxMi0yM3QyNS00NSAyOS01NSAyOS01MyAyMy00MSAxMC0xN3EyNyA1OSA2MCAxMTh0NjUgMTE2aDE4N2wtMjA5LTMzOSAyMDUtMzMzSDcwN3EtMzEgNTctNjAgMTE0dC02MyAxMTJxLTI5LTU3LTU3LTExM3QtNTctMTEzSDI3OWwxOTkgMzM1LTIxNyAzMzd6bTM3OSA0OTZoMTI4MFY1MTJoLTI1NnEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTBWMTI4SDY0MHYzODRoMzk3cTI0IDAgNDQgOXQzNyAyNSAyNSAzNiA5IDQ1djkyMnEwIDI0LTkgNDR0LTI1IDM3LTM2IDI1LTQ1IDlINjQwdjI1NnptNjQwLTEwMjRWNzY4aDUxMnYxMjhoLTUxMnptMCAyNTZ2LTEyOGg1MTJ2MTI4aC01MTJ6bTAgMjU2di0xMjhoNTEydjEyOGgtNTEyeiIgLz4NCjwvc3ZnPg==",ImageIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yNTYgMTkyMGgxNTM2djEyOEgxMjhWMGgxMTE1bDU0OSA1NDl2OTFoLTY0MFYxMjhIMjU2djE3OTJ6TTEyODAgNTEyaDI5M2wtMjkzLTI5M3YyOTN6bTc2OCAyNTZ2MTAyNEg2NDBWNzY4aDE0MDh6TTc2OCA4OTZ2NDIxbDMyMC0zMTkgNDE2IDQxNiAxNjAtMTYwIDI1NiAyNTZWODk2SDc2OHptOTg3IDc2OGgxMzlsLTIzMC0yMzAtNjkgNzAgMTYwIDE2MHptLTk4NyAwaDgwNWwtNDg1LTQ4Ni0zMjAgMzIxdjE2NXptOTYwLTUxMnEtMjYgMC00NS0xOXQtMTktNDVxMC0yNiAxOS00NXQ0NS0xOXEyNiAwIDQ1IDE5dDE5IDQ1cTAgMjYtMTkgNDV0LTQ1IDE5eiIgLz4NCjwvc3ZnPg==",PowerpointIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMzY4IDc1MnY2NzJoMTUwdi0yMjZoMTAwcTUyIDAgOTctMTV0NzgtNDYgNTMtNzIgMjAtOTdxMC01Ni0xNy05N3QtNTAtNjctNzYtMzktOTctMTNIMzY4em0xNTUyIDExNjhWNTEyaC0yNTZxLTI3IDAtNTAtMTB0LTQwLTI3LTI4LTQxLTEwLTUwVjEyOEg2NDB2Mzg0aDM5N3EyNCAwIDQ0IDl0MzcgMjUgMjUgMzYgOSA0NXY5MjJxMCAyNC05IDQ0dC0yNSAzNy0zNiAyNS00NSA5SDY0MHYyNTZoMTI4MHpNMTUzNiA2NDBxNzkgMCAxNDkgMzB0MTIyIDgyIDgzIDEyMyAzMCAxNDloLTM4NFY2NDB6bS0xMjggMTI4djM4NGgzODRxMCA4MC0zMCAxNDl0LTgyIDEyMi0xMjMgODMtMTQ5IDMwcS0zMyAwLTY1LTZ0LTYzLTE4Vjc5MnEzMS0xMSA2My0xN3Q2NS03em0tODA0IDMwMGgtODZWODgzaDkwcTQ3IDAgNzQgMjB0MjcgNzBxMCA1Mi0yOCA3M3QtNzcgMjJ6IiAvPg0KPC9zdmc+",VideoIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0wIDI1NmgyMDQ4djE0MDhIMFYyNTZ6bTI1NiAxMjgwdi0xMjhIMTI4djEyOGgxMjh6bTAtMjU2di0xMjhIMTI4djEyOGgxMjh6bTAtMjU2Vjg5NkgxMjh2MTI4aDEyOHptMC0yNTZWNjQwSDEyOHYxMjhoMTI4em0wLTI1NlYzODRIMTI4djEyOGgxMjh6bTE0MDggNzg2VjM4NEgzODR2ODIzbDQxMS01NDkgNzQxIDg3OC0zMjktNTU4IDEzNy0xMzcgMzIwIDQ1N3ptMjU2IDIzOHYtMTI4aC0xMjh2MTI4aDEyOHptMC0yNTZ2LTEyOGgtMTI4djEyOGgxMjh6bTAtMjU2Vjg5NmgtMTI4djEyOGgxMjh6bTAtMjU2VjY0MGgtMTI4djEyOGgxMjh6bTAtMjU2VjM4NGgtMTI4djEyOGgxMjh6IiAvPg0KPC9zdmc+",VisioIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNNDkzIDE0MjRoMTYzbDI1NS02NzJINzQ1bC0xNDcgNDI3cS01IDE2LTEwIDMxdC0xMSAzMXEtNDEtMTIzLTgyLTI0NHQtODQtMjQ1SDI0MWwyNDggNjYyIDQgMTB6bTE0NyA0OTZoMTI4MFY1MTJoLTI1NnEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTBWMTI4SDY0MHYzODRoMzk3cTI0IDAgNDQgOXQzNyAyNSAyNSAzNiA5IDQ1djkyMnEwIDI0LTkgNDR0LTI1IDM3LTM2IDI1LTQ1IDlINjQwdjI1NnptOTYwLTEyODBsMTkyIDE5Mi0xMjggMTI4djQ0OGgtMjU2djEyOGgtMTI4di0zODRoMTI4djEyOGgxMjhWOTYwbC0xMjgtMTI4IDE5Mi0xOTJ6IiAvPg0KPC9zdmc+",WordIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMzIwIDE0MjRoMTYxcTItOCA5LTQzdDE4LTgzIDIxLTEwMyAyMi0xMDEgMTYtNzYgOC0zMWw3IDMwcTcgMzAgMTcgNzd0MjMgMTAwIDIzIDEwMyAxOSA4NCAxMCA0M2gxNjBsMTQ4LTY3Mkg4MzRsLTgwIDQzOC0xMDAtNDM4SDUwMmwtOTYgNDQwLTg2LTQ0MEgxNzBsMTUwIDY3MnptMzIwIDQ5NmgxMjgwVjUxMmgtMjU2cS0yNyAwLTUwLTEwdC00MC0yNy0yOC00MS0xMC01MFYxMjhINjQwdjM4NGgzOTdxMjQgMCA0NCA5dDM3IDI1IDI1IDM2IDkgNDV2OTIycTAgMjQtOSA0NHQtMjUgMzctMzYgMjUtNDUgOUg2NDB2MjU2em02NDAtMTAyNFY3NjhoNTEydjEyOGgtNTEyem0wIDI1NnYtMTI4aDUxMnYxMjhoLTUxMnptMCAyNTZ2LTEyOGg1MTJ2MTI4aC01MTJ6IiAvPg0KPC9zdmc+",errorUILoadingPaneStyleProps={generalStyleProps:{position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#FFFFFF"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:2,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:3,alignSelf:"auto"},iconStyleProps:{display:"flex",order:1,alignSelf:"auto",backgroundColor:"#FFFFFF",boxShadow:"#FFFFFF 0px 0px 0px 0px",margin:"0px 0px 0px 0px"},iconImageProps:{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMC8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQnPjxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHBhdGggZD0iTTEzLDE3aC0ydi0yaDJWMTd6IE0xMywxM2gtMlY3aDJWMTN6Ii8+PGc+PHBhdGggZD0iTTEyLDRjNC40LDAsOCwzLjYsOCw4cy0zLjYsOC04LDhzLTgtMy42LTgtOFM3LjYsNCwxMiw0IE0xMiwyQzYuNSwyLDIsNi41LDIsMTJjMCw1LjUsNC41LDEwLDEwLDEwczEwLTQuNSwxMC0xMCAgIEMyMiw2LjUsMTcuNSwyLDEyLDJMMTIsMnoiLz48L2c+PC9zdmc+",imageFit:Image_types.b.center,width:"86px",height:"86px",shouldFadeIn:!1,shouldStartVisible:!0}};function useDebounce(func){var delay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,timer=Object(react.useRef)();Object(react.useEffect)((function(){return function(){timer.current&&clearTimeout(timer.current)}}),[]);var debouncedFunction=function debouncedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var newTimer=setTimeout((function(){func.apply(void 0,args)}),delay);clearTimeout(timer.current),timer.current=newTimer};return debouncedFunction}function useWindowDimensions_slicedToArray(arr,i){return function useWindowDimensions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useWindowDimensions_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useWindowDimensions_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useWindowDimensions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useWindowDimensions_arrayLikeToArray(o,minLen)}(arr,i)||function useWindowDimensions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useWindowDimensions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getWindowDimensions(){var _window=window;return{width:_window.innerWidth,height:_window.innerHeight}}function LoadingPaneStateful_slicedToArray(arr,i){return function LoadingPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LoadingPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LoadingPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LoadingPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LoadingPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function LoadingPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LoadingPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LoadingPaneStateful_LoadingPaneStateful=function LoadingPaneStateful(props){var _loadingPaneProps$sty,_startChatErrorPanePr,_startChatErrorPanePr2,_startChatErrorPanePr3,_startChatErrorPanePr4,state=LoadingPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],loadingPaneProps=props.loadingPaneProps,startChatErrorPaneProps=props.startChatErrorPaneProps,generalLoadingPaneStyleProps=Object.assign({},defaultGeneralLoadingPaneStyleProps,null==loadingPaneProps||null===(_loadingPaneProps$sty=loadingPaneProps.styleProps)||void 0===_loadingPaneProps$sty?void 0:_loadingPaneProps$sty.generalStyleProps),loadingPaneStyleProps=Object.assign({},null==loadingPaneProps?void 0:loadingPaneProps.styleProps,{generalStyleProps:generalLoadingPaneStyleProps}),errorUIStyleProps=Object.assign({},errorUILoadingPaneStyleProps),loadingPaneControlProps=Object.assign({id:"oc-lcw-loading-pane",dir:state.domainStates.globalDir},null==loadingPaneProps?void 0:loadingPaneProps.controlProps),errorUIControlProps=Object.assign({},null==loadingPaneProps?void 0:loadingPaneProps.controlProps,{id:"oc-lcw-alert-pane",dir:state.domainStates.globalDir,titleText:null!==(_startChatErrorPanePr=null==startChatErrorPaneProps||null===(_startChatErrorPanePr2=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr2?void 0:_startChatErrorPanePr2.titleText)&&void 0!==_startChatErrorPanePr?_startChatErrorPanePr:"We are unable to load chat at this time.",subtitleText:null!==(_startChatErrorPanePr3=null==startChatErrorPaneProps||null===(_startChatErrorPanePr4=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr4?void 0:_startChatErrorPanePr4.subtitleText)&&void 0!==_startChatErrorPanePr3?_startChatErrorPanePr3:"Please try again later.",hideSpinner:!0,hideSpinnerText:!0}),_useWindowDimensions=function useWindowDimensions(){var delay=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,_useState2=useWindowDimensions_slicedToArray(Object(react.useState)(getWindowDimensions()),2),windowDimensions=_useState2[0],setWindowDimensions=_useState2[1],debouncedHandleResize=useDebounce((function handleResize(){return setWindowDimensions(getWindowDimensions())}),delay);return Object(react.useEffect)((function(){return window.addEventListener("resize",debouncedHandleResize),function(){return window.removeEventListener("resize",debouncedHandleResize)}}),[]),windowDimensions}(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.LoadingPaneLoaded,Description:"Loading pane loaded."})}),[]),Object(jsx_runtime.jsx)(cjs.LoadingPane,{componentOverrides:null==loadingPaneProps?void 0:loadingPaneProps.componentOverrides,controlProps:state.appStates.isStartChatFailing?errorUIControlProps:loadingPaneControlProps,styleProps:state.appStates.isStartChatFailing?errorUIStyleProps:loadingPaneStyleProps,windowWidth:width,windowHeight:height})};LoadingPaneStateful_LoadingPaneStateful.displayName="LoadingPaneStateful";var loadingpanestateful_LoadingPaneStateful=LoadingPaneStateful_LoadingPaneStateful;try{LoadingPaneStateful_LoadingPaneStateful.displayName="LoadingPaneStateful",LoadingPaneStateful_LoadingPaneStateful.__docgenInfo={description:"",displayName:"LoadingPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/loadingpanestateful/LoadingPaneStateful.tsx#LoadingPaneStateful"]={docgenInfo:LoadingPaneStateful_LoadingPaneStateful.__docgenInfo,name:"LoadingPaneStateful",path:"src/components/loadingpanestateful/LoadingPaneStateful.tsx#LoadingPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var defaultGeneralStyleProps={position:"initial",width:"100%",height:"100%",borderRadius:"0px 0px 4px 4px",borderWidth:"0px",backgroundColor:"#FFFFFF"};function OOOHPaneStateful_slicedToArray(arr,i){return function OOOHPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function OOOHPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function OOOHPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return OOOHPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OOOHPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function OOOHPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OOOHPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var OOOHPaneStateful_OutOfOfficeHoursPaneStateful=function OutOfOfficeHoursPaneStateful(props){var _props$styleProps,state=OOOHPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],generalStyleProps=Object.assign({},defaultGeneralStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps),styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-outofofficehours-pane",dir:state.domainStates.globalDir},props.controlProps);return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.OutOfOfficePaneLoaded})}),[]),Object(jsx_runtime.jsx)(cjs.OutOfOfficeHoursPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:styleProps})};OOOHPaneStateful_OutOfOfficeHoursPaneStateful.displayName="OutOfOfficeHoursPaneStateful";var ooohpanestateful_OOOHPaneStateful=OOOHPaneStateful_OutOfOfficeHoursPaneStateful;try{OOOHPaneStateful_OutOfOfficeHoursPaneStateful.displayName="OutOfOfficeHoursPaneStateful",OOOHPaneStateful_OutOfOfficeHoursPaneStateful.__docgenInfo={description:"",displayName:"OutOfOfficeHoursPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ooohpanestateful/OOOHPaneStateful.tsx#OutOfOfficeHoursPaneStateful"]={docgenInfo:OOOHPaneStateful_OutOfOfficeHoursPaneStateful.__docgenInfo,name:"OutOfOfficeHoursPaneStateful",path:"src/components/ooohpanestateful/OOOHPaneStateful.tsx#OutOfOfficeHoursPaneStateful"})}catch(__react_docgen_typescript_loader_error){}try{OOOHPaneStateful.displayName="OOOHPaneStateful",OOOHPaneStateful.__docgenInfo={description:"",displayName:"OOOHPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ooohpanestateful/OOOHPaneStateful.tsx#OOOHPaneStateful"]={docgenInfo:OOOHPaneStateful.__docgenInfo,name:"OOOHPaneStateful",path:"src/components/ooohpanestateful/OOOHPaneStateful.tsx#OOOHPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var defaultGeneralPostChatLoadingPaneStyleProps={position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#315FA2"};function PostChatLoadingPaneStateful_slicedToArray(arr,i){return function PostChatLoadingPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PostChatLoadingPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PostChatLoadingPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PostChatLoadingPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PostChatLoadingPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PostChatLoadingPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PostChatLoadingPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PostChatLoadingPaneStateful_PostChatLoadingPaneStateful=function PostChatLoadingPaneStateful(props){var _props$styleProps,state=PostChatLoadingPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],generalStyleProps=Object.assign({},defaultGeneralPostChatLoadingPaneStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps),styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-postchatloading-pane",dir:state.domainStates.globalDir,hideIcon:!0,hideTitle:!0,hideSpinner:!0,hideSpinnerText:!0,subtitleText:"Please take a moment to give us feedback about your chat experience. We are loading the survey for you now."},props.controlProps);return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatSurveyLoadingPaneLoaded})}),[]),Object(jsx_runtime.jsx)(cjs.LoadingPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:styleProps})};PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.displayName="PostChatLoadingPaneStateful";var postchatloadingpanestateful_PostChatLoadingPaneStateful=PostChatLoadingPaneStateful_PostChatLoadingPaneStateful;try{PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.displayName="PostChatLoadingPaneStateful",PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.__docgenInfo={description:"",displayName:"PostChatLoadingPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/postchatloadingpanestateful/PostChatLoadingPaneStateful.tsx#PostChatLoadingPaneStateful"]={docgenInfo:PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.__docgenInfo,name:"PostChatLoadingPaneStateful",path:"src/components/postchatloadingpanestateful/PostChatLoadingPaneStateful.tsx#PostChatLoadingPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var CustomerVoiceEvents,defaultGeneralPostChatSurveyPaneStyleProps={position:"initial",height:"100%",width:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",maxHeight:"calc(100% - 80px)"};function PostChatSurveyPaneStateful_slicedToArray(arr,i){return function PostChatSurveyPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PostChatSurveyPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PostChatSurveyPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PostChatSurveyPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PostChatSurveyPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PostChatSurveyPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PostChatSurveyPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(CustomerVoiceEvents){CustomerVoiceEvents.ResponsePageLoaded="ResponsePageLoaded",CustomerVoiceEvents.FormResponseSubmitted="FormResponseSubmitted",CustomerVoiceEvents.FormResponseError="FormResponseError"}(CustomerVoiceEvents||(CustomerVoiceEvents={}));var PostChatSurveyPaneStateful_PostChatSurveyPaneStateful=function PostChatSurveyPaneStateful(props){var _state$domainStates$l,_state$domainStates$l2,_props$styleProps,_props$controlProps$s,_props$controlProps,_props$isCustomerVoic,_state$domainStates$p,_props$isCustomerVoic2,_state$domainStates$p2,state=PostChatSurveyPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],postChatSurveyMode=null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.msdyn_postconversationsurveymode,generalStyleProps=Object.assign({},defaultGeneralPostChatSurveyPaneStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps,{display:state.appStates.isMinimized?"none":""}),surveyInviteLink="";state.appStates.shouldUseBotSurvey&&state.domainStates.postChatContext.botSurveyInviteLink?surveyInviteLink=state.domainStates.postChatContext.botSurveyInviteLink+"&embed="+(postChatSurveyMode===PostChatSurveyMode.Embed).toString()+"&compact="+(null===(_props$isCustomerVoic=props.isCustomerVoiceSurveyCompact)||void 0===_props$isCustomerVoic||_props$isCustomerVoic).toString()+"&lang="+(null!==(_state$domainStates$p=state.domainStates.postChatContext.formsProLocale)&&void 0!==_state$domainStates$p?_state$domainStates$p:"en")+"&showmultilingual=false":surveyInviteLink=state.domainStates.postChatContext.surveyInviteLink+"&embed="+(postChatSurveyMode===PostChatSurveyMode.Embed).toString()+"&compact="+(null===(_props$isCustomerVoic2=props.isCustomerVoiceSurveyCompact)||void 0===_props$isCustomerVoic2||_props$isCustomerVoic2).toString()+"&lang="+(null!==(_state$domainStates$p2=state.domainStates.postChatContext.formsProLocale)&&void 0!==_state$domainStates$p2?_state$domainStates$p2:"en")+"&showmultilingual=false";var styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-postchatsurvey-pane",surveyURL:null!==(_props$controlProps$s=null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.surveyURL)&&void 0!==_props$controlProps$s?_props$controlProps$s:surveyInviteLink},props.controlProps);return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+controlProps.id);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatSurveyLoaded}),window.addEventListener("message",(function(message){var data=message.data;data&&(data===CustomerVoiceEvents.ResponsePageLoaded?TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomerVoiceResponsePageLoaded}):data===CustomerVoiceEvents.FormResponseSubmitted?TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomerVoiceFormResponseSubmitted}):data===CustomerVoiceEvents.FormResponseError&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CustomerVoiceFormResponseError}))}))}),[]),Object(jsx_runtime.jsx)(cjs.PostChatSurveyPane,{controlProps:controlProps,styleProps:styleProps})};PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.displayName="PostChatSurveyPaneStateful";var postchatsurveypanestateful_PostChatSurveyPaneStateful=PostChatSurveyPaneStateful_PostChatSurveyPaneStateful;try{PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.displayName="PostChatSurveyPaneStateful",PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.__docgenInfo={description:"",displayName:"PostChatSurveyPaneStateful",props:{isCustomerVoiceSurveyCompact:{defaultValue:null,description:"",name:"isCustomerVoiceSurveyCompact",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/postchatsurveypanestateful/PostChatSurveyPaneStateful.tsx#PostChatSurveyPaneStateful"]={docgenInfo:PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.__docgenInfo,name:"PostChatSurveyPaneStateful",path:"src/components/postchatsurveypanestateful/PostChatSurveyPaneStateful.tsx#PostChatSurveyPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var markdown_it=__webpack_require__("./node_modules/markdown-it/index.js"),markdown_it_default=__webpack_require__.n(markdown_it),defaultGeneralPreChatSurveyPaneStyleProps={borderStyle:"solid",borderRadius:"inherit",borderWidth:"0px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1",overflowY:"auto",height:"inherit",width:"inherit"},defaultPreChatSurveyLocalizedTexts_PRECHAT_REQUIRED_FIELD_MISSING_MESSAGE="{0} field is required";function PreChatSurveyPaneStateful_regeneratorRuntime(){PreChatSurveyPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PreChatSurveyPaneStateful_slicedToArray(arr,i){return function PreChatSurveyPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PreChatSurveyPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PreChatSurveyPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PreChatSurveyPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PreChatSurveyPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PreChatSurveyPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PreChatSurveyPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PreChatSurveyPaneStateful_PreChatSurveyPaneStateful=function PreChatSurveyPaneStateful(props){var _surveyProps$stylePro,_props$surveyProps$co,_props$surveyProps,_props$surveyProps$co2;window.markdownit=markdown_it_default.a;var _onSubmit,_useChatContextStore2=PreChatSurveyPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],surveyProps=props.surveyProps,initStartChat=props.initStartChat,generalStyleProps=Object.assign({},defaultGeneralPreChatSurveyPaneStyleProps,null==surveyProps||null===(_surveyProps$stylePro=surveyProps.styleProps)||void 0===_surveyProps$stylePro?void 0:_surveyProps$stylePro.generalStyleProps,{display:state.appStates.isMinimized?"none":""}),setPreChatResponseEmail=function setPreChatResponseEmail(preChatResponse){if(preChatResponse)for(var index=0;index<preChatResponse.length;index++)new RegExp(Constants.m.EmailRegex).test(preChatResponse[index].value)&&dispatch({type:LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL,payload:preChatResponse[index].value})},requiredFieldMissingMessage=null!==(_props$surveyProps$co=null===(_props$surveyProps=props.surveyProps)||void 0===_props$surveyProps||null===(_props$surveyProps$co2=_props$surveyProps.controlProps)||void 0===_props$surveyProps$co2?void 0:_props$surveyProps$co2.requiredFieldMissingMessage)&&void 0!==_props$surveyProps$co?_props$surveyProps$co:defaultPreChatSurveyLocalizedTexts_PRECHAT_REQUIRED_FIELD_MISSING_MESSAGE,controlProps=Object.assign({id:"oc-lcw-prechatsurvey-pane",dir:state.domainStates.globalDir,payload:function getAdaptiveCardPayload(payload,requiredFieldMissingMessage){try{return function parseAdaptiveCardPayload(payload,requiredFieldMissingMessage){if(payload&&"{}"!==payload)try{var parsedPayload=JSON.parse(payload.replace("*","&#42;")),body=parsedPayload.body;if(body){var _step,_iterator=_createForOfIteratorHelper(body);try{for(_iterator.s();!(_step=_iterator.n()).done;){var fields=_step.value;if(fields.id&&fields.id.includes(":")){var _parsedId$IsRequired,_parsedId$Name,parsedId=JSON.parse(fields.id);fields.id=parsedId.Id,fields.isRequired=null!==(_parsedId$IsRequired=parsedId.IsRequired)&&void 0!==_parsedId$IsRequired&&_parsedId$IsRequired,fields.isRequired&&(fields.errorMessage=requiredFieldMissingMessage.replace("{0}",null!==(_parsedId$Name=parsedId.Name)&&void 0!==_parsedId$Name?_parsedId$Name:""))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return JSON.stringify(parsedPayload)}catch(ex){throw new Error("Adaptive card pase error: "+ex)}return payload}(payload,requiredFieldMissingMessage)}catch(ex){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.ParseAdaptiveCardFailed,Description:"Adaptive Card JSON Parse Failed.",ExceptionDetails:{exception:ex}})}}(state.domainStates.preChatSurveyResponse,requiredFieldMissingMessage),onSubmit:(_onSubmit=function PreChatSurveyPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(PreChatSurveyPaneStateful_regeneratorRuntime().mark((function _callee(values){var _state$domainStates$t,_state$domainStates,_state$domainStates$t2,_state$domainStates$t3,_state$domainStates$t4,_state$domainStates$w,_persistedState$domai,_persistedState$appSt,persistedState,optionalParams,_persistedState$domai2,prechatResponseValues;return PreChatSurveyPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.PrechatSubmitted}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context.prev=2,persistedState=utils_getStateFromCache(null!==(_state$domainStates$t=null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$t2=_state$domainStates.telemetryInternalData)||void 0===_state$domainStates$t2?void 0:_state$domainStates$t2.orgId)&&void 0!==_state$domainStates$t?_state$domainStates$t:"",null!==(_state$domainStates$t3=null===(_state$domainStates$t4=state.domainStates.telemetryInternalData)||void 0===_state$domainStates$t4?void 0:_state$domainStates$t4.widgetId)&&void 0!==_state$domainStates$t3?_state$domainStates$t3:"",null!==(_state$domainStates$w=state.domainStates.widgetInstanceId)&&void 0!==_state$domainStates$w?_state$domainStates$w:""),optionalParams={},!persistedState||isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai=persistedState.domainStates)||void 0===_persistedState$domai?void 0:_persistedState$domai.liveChatContext)||(null==persistedState||null===(_persistedState$appSt=persistedState.appStates)||void 0===_persistedState$appSt?void 0:_persistedState$appSt.conversationState)!==ConversationState.Active||!1!==state.appStates.hideStartChatButton){_context.next=11;break}return optionalParams={liveChatContext:null==persistedState||null===(_persistedState$domai2=persistedState.domainStates)||void 0===_persistedState$domai2?void 0:_persistedState$domai2.liveChatContext},_context.next=9,initStartChat(optionalParams,persistedState);case 9:_context.next=16;break;case 11:return prechatResponseValues=utils_extractPreChatSurveyResponseValues(state.domainStates.preChatSurveyResponse,values),optionalParams={preChatResponse:prechatResponseValues},setPreChatResponseEmail(values),_context.next=16,initStartChat(optionalParams);case 16:_context.next=21;break;case 18:_context.prev=18,_context.t0=_context.catch(2),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.PreChatSurveyStartChatMethodFailed,Description:"PreChat survey start chat failed.",ExceptionDetails:{exception:"PreChat survey start chat failed: "+_context.t0}});case 21:case"end":return _context.stop()}}),_callee,null,[[2,18]])}))),function onSubmit(_x2){return _onSubmit.apply(this,arguments)})},null==surveyProps?void 0:surveyProps.controlProps),styleProps=Object.assign({},null==surveyProps?void 0:surveyProps.styleProps,{generalStyleProps:generalStyleProps});return Object(react.useEffect)((function(){var adaptiveCardElements=document.getElementsByClassName(Constants.g.adaptiveCardClassName);if(adaptiveCardElements&&adaptiveCardElements.length>0)for(var children=adaptiveCardElements[0].children,value="",index=0;index<children.length;index++){var current=children[index];if(current&&current.className==Constants.g.adaptiveCardTextBlockClassName&&(value=current.innerHTML),current&&current.tagName.toLowerCase()==Constants.g.div&&current.childElementCount>0){var input=current.children[0].children;(null==input?void 0:input.length)>0&&input[0].className!=Constants.g.adaptiveCardToggleInputClassName&&input[0].className!=Constants.g.adaptiveCardActionSetClassName&&input[0].setAttribute(Constants.g.ariaLabel,value)}}var firstElement=findAllFocusableElement("#"+controlProps.id);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PrechatSurveyLoaded})}),[]),Object(jsx_runtime.jsx)(cjs.PreChatSurveyPane,{controlProps:controlProps,styleProps:styleProps})};PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.displayName="PreChatSurveyPaneStateful";var prechatsurveypanestateful_PreChatSurveyPaneStateful=PreChatSurveyPaneStateful_PreChatSurveyPaneStateful;try{PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.displayName="PreChatSurveyPaneStateful",PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.__docgenInfo={description:"",displayName:"PreChatSurveyPaneStateful",props:{surveyProps:{defaultValue:null,description:"",name:"surveyProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},initStartChat:{defaultValue:null,description:"",name:"initStartChat",required:!0,type:{name:"(params?: any, persistedState?: any) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/prechatsurveypanestateful/PreChatSurveyPaneStateful.tsx#PreChatSurveyPaneStateful"]={docgenInfo:PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.__docgenInfo,name:"PreChatSurveyPaneStateful",path:"src/components/prechatsurveypanestateful/PreChatSurveyPaneStateful.tsx#PreChatSurveyPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function ProactiveChatPaneStateful_regeneratorRuntime(){ProactiveChatPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ProactiveChatPaneStateful_slicedToArray(arr,i){return function ProactiveChatPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ProactiveChatPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ProactiveChatPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ProactiveChatPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ProactiveChatPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ProactiveChatPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ProactiveChatPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ProactiveChatPaneStateful_ProactiveChatPaneStateful=function ProactiveChatPaneStateful(props){var _proactiveChatProps$c,_onStart,_useChatContextStore2=ProactiveChatPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],proactiveChatProps=props.proactiveChatProps,startChat=props.startChat,_useState2=ProactiveChatPaneStateful_slicedToArray(Object(react.useState)(!1),2),timeoutRemoved=_useState2[0],setTimeoutRemoved=_useState2[1],controlProps=Object.assign({id:"oc-lcw-proactivechat",dir:state.domainStates.globalDir,onStart:(_onStart=function ProactiveChatPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ProactiveChatPaneStateful_regeneratorRuntime().mark((function _callee(){var _state$domainStates$l,_state$domainStates$l2,startPopoutChatEvent,proactiveChatStarted;return ProactiveChatPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setTimeoutRemoved(!0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatAccepted,Description:"Proactive chat accepted."}),!state.appStates.proactiveChatStates.proactiveChatInNewWindow){_context.next=8;break}startPopoutChatEvent={eventName:BroadcastEvent.ProactiveChatStartPopoutChat},cjs.BroadcastService.postMessage(startPopoutChatEvent),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),_context.next=17;break;case 8:if("True"!==(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.OutOfOperatingHours)){_context.next=13;break}dispatch({type:LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),_context.next=17;break;case 13:return proactiveChatStarted={eventName:BroadcastEvent.ProactiveChatStartChat},cjs.BroadcastService.postMessage(proactiveChatStarted),_context.next=17,startChat();case 17:case"end":return _context.stop()}}),_callee)}))),function onStart(){return _onStart.apply(this,arguments)}),onClose:function onClose(){setTimeoutRemoved(!0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatClosed,Description:"Proactive chat closed."}),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed})}},null==proactiveChatProps?void 0:proactiveChatProps.controlProps,{bodyTitleText:state.appStates.proactiveChatStates.proactiveChatBodyTitle?state.appStates.proactiveChatStates.proactiveChatBodyTitle:null==proactiveChatProps||null===(_proactiveChatProps$c=proactiveChatProps.controlProps)||void 0===_proactiveChatProps$c?void 0:_proactiveChatProps$c.bodyTitleText});return Object(react.useEffect)((function(){var _proactiveChatProps$P;setFocusOnElement(document.getElementById(controlProps.id+"-startbutton")),TelemetryTimers.ProactiveChatScreenTimer=createTimer();var timeoutEvent=setTimeout((function(){!function handleProactiveChatInviteTimeout(){timeoutRemoved||(setTimeoutRemoved(!0),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatRejected,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed,Description:"Proactive chat invitation timed out."}))}()}),null!==(_proactiveChatProps$P=null==proactiveChatProps?void 0:proactiveChatProps.ProactiveChatInviteTimeoutInMs)&&void 0!==_proactiveChatProps$P?_proactiveChatProps$P:Constants.d.ProactiveChatInviteTimeoutInMs);return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatPaneLoaded}),function(){clearTimeout(timeoutEvent)}}),[]),Object(jsx_runtime.jsx)(cjs.ProactiveChatPane,{componentOverrides:null==proactiveChatProps?void 0:proactiveChatProps.componentOverrides,controlProps:controlProps,styleProps:null==proactiveChatProps?void 0:proactiveChatProps.styleProps})};ProactiveChatPaneStateful_ProactiveChatPaneStateful.displayName="ProactiveChatPaneStateful";var proactivechatpanestateful_ProactiveChatPaneStateful=ProactiveChatPaneStateful_ProactiveChatPaneStateful;try{ProactiveChatPaneStateful_ProactiveChatPaneStateful.displayName="ProactiveChatPaneStateful",ProactiveChatPaneStateful_ProactiveChatPaneStateful.__docgenInfo={description:"",displayName:"ProactiveChatPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/proactivechatpanestateful/ProactiveChatPaneStateful.tsx#ProactiveChatPaneStateful"]={docgenInfo:ProactiveChatPaneStateful_ProactiveChatPaneStateful.__docgenInfo,name:"ProactiveChatPaneStateful",path:"src/components/proactivechatpanestateful/ProactiveChatPaneStateful.tsx#ProactiveChatPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function ReconnectChatPaneStateful_regeneratorRuntime(){ReconnectChatPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ReconnectChatPaneStateful_slicedToArray(arr,i){return function ReconnectChatPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReconnectChatPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ReconnectChatPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ReconnectChatPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ReconnectChatPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ReconnectChatPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReconnectChatPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ReconnectChatPaneStateful_ReconnectChatPaneStateful=function ReconnectChatPaneStateful(props){var _useChatContextStore2=ReconnectChatPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],chatSDK=hooks_useChatSDKStore(),reconnectChatProps=props.reconnectChatProps,initStartChat=props.initStartChat,startChat=function(){var _ref=function ReconnectChatPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ReconnectChatPaneStateful_regeneratorRuntime().mark((function _callee(continueChat){var optionalParams,_state$domainStates,preChatSurveyResponse;return ReconnectChatPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),!continueChat||!state.appStates.reconnectId){_context.next=7;break}return optionalParams={reconnectId:state.appStates.reconnectId},_context.next=5,initStartChat(optionalParams);case 5:_context.next=21;break;case 7:return dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),chatSDK.requestId=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.initialChatSdkRequestId,!1,_context.next=12,chatSDK.getPreChatSurvey(false);case 12:if(!(preChatSurveyResponse=_context.sent)){_context.next=18;break}dispatch({type:LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE,payload:preChatSurveyResponse}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Prechat}),_context.next=21;break;case 18:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context.next=21,initStartChat();case 21:case"end":return _context.stop()}}),_callee)})));return function startChat(_x2){return _ref.apply(this,arguments)}}(),controlProps=Object.assign({id:"lcw-components-reconnect-chat-pane",dir:state.domainStates.globalDir,onContinueChat:function onContinueChat(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatContinueConversation,Description:"Reconnect chat continue conversation button clicked."}),startChat(!0)},onStartNewChat:function onStartNewChat(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatStartNewConversation,Description:"Reconnect chat start new conversation button clicked."}),startChat(!1)},onMinimize:function onMinimize(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatMinimize,Description:"Reconnect chat minimized."}),dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0})}},null==reconnectChatProps?void 0:reconnectChatProps.controlProps);return Object(react.useEffect)((function(){setFocusOnElement(document.getElementById(controlProps.id)),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatPaneLoaded})}),[]),Object(jsx_runtime.jsx)(cjs.ReconnectChatPane,{componentOverrides:null==reconnectChatProps?void 0:reconnectChatProps.componentOverrides,controlProps:controlProps,styleProps:null==reconnectChatProps?void 0:reconnectChatProps.styleProps})};ReconnectChatPaneStateful_ReconnectChatPaneStateful.displayName="ReconnectChatPaneStateful";var reconnectchatpanestateful_ReconnectChatPaneStateful=ReconnectChatPaneStateful_ReconnectChatPaneStateful;try{ReconnectChatPaneStateful_ReconnectChatPaneStateful.displayName="ReconnectChatPaneStateful",ReconnectChatPaneStateful_ReconnectChatPaneStateful.__docgenInfo={description:"",displayName:"ReconnectChatPaneStateful",props:{reconnectChatProps:{defaultValue:null,description:"",name:"reconnectChatProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},initStartChat:{defaultValue:null,description:"",name:"initStartChat",required:!0,type:{name:"(params?: any) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/reconnectchatpanestateful/ReconnectChatPaneStateful.tsx#ReconnectChatPaneStateful"]={docgenInfo:ReconnectChatPaneStateful_ReconnectChatPaneStateful.__docgenInfo,name:"ReconnectChatPaneStateful",path:"src/components/reconnectchatpanestateful/ReconnectChatPaneStateful.tsx#ReconnectChatPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var index_es5=__webpack_require__("./node_modules/broadcast-channel/dist/lib/index.es5.js");function BotMagicCodeStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BotMagicCodeStore_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BotMagicCodeStore_createClass(Constructor,protoProps,staticProps){return protoProps&&BotMagicCodeStore_defineProperties(Constructor.prototype,protoProps),staticProps&&BotMagicCodeStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var BotMagicCodeStore=BotMagicCodeStore_createClass((function BotMagicCodeStore(){!function BotMagicCodeStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BotMagicCodeStore)}));BotMagicCodeStore.botOAuthSignInId="";var defaultReceivedMessageAnchorStyles={color:"white"},defaultUserMessageBoxStyles={maxWidth:"90%"},defaultSystemMessageBoxStyles={maxWidth:"90%"};function WebChatContainerStateful_slicedToArray(arr,i){return function WebChatContainerStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function WebChatContainerStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function WebChatContainerStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return WebChatContainerStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WebChatContainerStateful_arrayLikeToArray(o,minLen)}(arr,i)||function WebChatContainerStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WebChatContainerStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var WebChatContainerStateful_WebChatContainerStateful=function WebChatContainerStateful(props){var _props$adaptiveCardSt,_props$adaptiveCardSt2,_props$renderingMiddl,_props$renderingMiddl2,_props$renderingMiddl3,_props$renderingMiddl4,_props$renderingMiddl5,_props$renderingMiddl6,_props$adaptiveCardSt3,_props$adaptiveCardSt4,_props$renderingMiddl7,_props$renderingMiddl8,_props$renderingMiddl9,_props$renderingMiddl10,_props$renderingMiddl11,_props$renderingMiddl12,BasicWebChat=botframework_webchat_lib.Components.BasicWebChat,_useChatContextStore2=WebChatContainerStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],magicCodeBroadcastChannel=new index_es5.BroadcastChannel(Constants.d.magicCodeBroadcastChannel),magicCodeResponseBroadcastChannel=new index_es5.BroadcastChannel(Constants.d.magicCodeResponseBroadcastChannel),containerStyles={root:Object.assign({},defaultWebChatContainerStatefulProps.containerStyles,null==props?void 0:props.containerStyles,{display:state.appStates.isMinimized?"none":""})},localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,null==props?void 0:props.localizedTexts);return Object(react.useEffect)((function(){setFocusOnSendBox(),dispatch({type:LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS,payload:null==props?void 0:props.renderingMiddlewareProps}),dispatch({type:LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS,payload:localizedTexts}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.WebChatLoaded})}),[]),Object(react.useEffect)((function(){magicCodeBroadcastChannel.addEventListener("message",(function eventListener(event){var data=event.data;if(BotMagicCodeStore.botOAuthSignInId===data.signin){var signin=data.signin,action=function postActivity(activity){return{type:WebChatActionType.DIRECT_LINE_POST_ACTIVITY,meta:{method:"keyboard"},payload:{activity:Object.assign({channelData:void 0,text:"",textFormat:"plain",type:Constants.d.message},activity)}}}({text:""+data.code,channelData:{tags:[Constants.d.hiddenTag]}});WebChatStoreLoader.store.dispatch(action);var response=function createMagicCodeSuccessResponse(signin){return{signin:signin,result:"Success"}}(signin);magicCodeResponseBroadcastChannel.postMessage(response),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.SuppressBotMagicCodeSucceeded}),BotMagicCodeStore.botOAuthSignInId="",magicCodeBroadcastChannel.close(),magicCodeResponseBroadcastChannel.close()}else TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SuppressBotMagicCodeFailed,Description:"Signin does not match"})}))}),[]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n\n        .webchat__bubble__content>div#ms_lcw_webchat_adaptive_card {\n            background: "+(null!==(_props$adaptiveCardSt=null==props||null===(_props$adaptiveCardSt2=props.adaptiveCardStyles)||void 0===_props$adaptiveCardSt2?void 0:_props$adaptiveCardSt2.background)&&void 0!==_props$adaptiveCardSt?_props$adaptiveCardSt:defaultAdaptiveCardStyles.background)+";\n        }\n\n        .webchat__stacked-layout__content div.webchat__stacked-layout__message-row div.webchat__bubble--from-user {\n            max-width: "+(null!==(_props$renderingMiddl=null==props||null===(_props$renderingMiddl2=props.renderingMiddlewareProps)||void 0===_props$renderingMiddl2||null===(_props$renderingMiddl3=_props$renderingMiddl2.userMessageBoxStyles)||void 0===_props$renderingMiddl3?void 0:_props$renderingMiddl3.maxWidth)&&void 0!==_props$renderingMiddl?_props$renderingMiddl:null==defaultUserMessageBoxStyles?void 0:defaultUserMessageBoxStyles.maxWidth)+"\n        }\n\n        .webchat__stacked-layout--show-avatar div.webchat__stacked-layout__content div.webchat__stacked-layout__message-row div.webchat__stacked-layout__message {\n            max-width: "+(null!==(_props$renderingMiddl4=null==props||null===(_props$renderingMiddl5=props.renderingMiddlewareProps)||void 0===_props$renderingMiddl5||null===(_props$renderingMiddl6=_props$renderingMiddl5.systemMessageBoxStyles)||void 0===_props$renderingMiddl6?void 0:_props$renderingMiddl6.maxWidth)&&void 0!==_props$renderingMiddl4?_props$renderingMiddl4:null==defaultSystemMessageBoxStyles?void 0:defaultSystemMessageBoxStyles.maxWidth)+'\n        }\n\n        div[class="ac-textBlock"]>p{color:'+(null!==(_props$adaptiveCardSt3=null==props||null===(_props$adaptiveCardSt4=props.adaptiveCardStyles)||void 0===_props$adaptiveCardSt4?void 0:_props$adaptiveCardSt4.color)&&void 0!==_props$adaptiveCardSt3?_props$adaptiveCardSt3:defaultAdaptiveCardStyles.color)+";}\n\n        .ms_lcw_webchat_received_message img.webchat__markdown__external-link-icon { \n            background-image : url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIzIDMgMTggMTgiICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik03LjI1MDEgNC41MDAxN0gxMC43NDk1QzExLjE2MzcgNC41MDAxNyAxMS40OTk1IDQuODM1OTYgMTEuNDk5NSA1LjI1MDE3QzExLjQ5OTUgNS42Mjk4NiAxMS4yMTczIDUuOTQzNjYgMTAuODUxMyA1Ljk5MzMyTDEwLjc0OTUgNi4wMDAxN0g3LjI0OTc0QzYuMDcwNzkgNS45OTk2MSA1LjEwMzQ5IDYuOTA2NTYgNS4wMDc4NiA4LjA2MTEyTDUuMDAwMjggOC4yMjAwM0w1LjAwMzEyIDE2Ljc1MDdDNS4wMDM0MyAxNy45NDE1IDUuOTI4ODUgMTguOTE2MSA3LjA5OTY2IDE4Ljk5NDlMNy4yNTM3MSAxOS4wMDAxTDE1Ljc1MTggMTguOTg4NEMxNi45NDE1IDE4Ljk4NjggMTcuOTE0NSAxOC4wNjIgMTcuOTkzNSAxNi44OTIzTDE3Ljk5ODcgMTYuNzM4NFYxMy4yMzIxQzE3Ljk5ODcgMTIuODE3OSAxOC4zMzQ1IDEyLjQ4MjEgMTguNzQ4NyAxMi40ODIxQzE5LjEyODQgMTIuNDgyMSAxOS40NDIyIDEyLjc2NDMgMTkuNDkxOCAxMy4xMzAzTDE5LjQ5ODcgMTMuMjMyMVYxNi43Mzg0QzE5LjQ5ODcgMTguNzQwNyAxNy45MjkzIDIwLjM3NjkgMTUuOTUyOCAyMC40ODI5TDE1Ljc1MzggMjAuNDg4NEw3LjI1ODI3IDIwLjUwMDFMNy4wNTQ5NSAyMC40OTQ5QzUuMTQyMzkgMjAuMzk1NCAzLjYwODk1IDE4Ljg2MjcgMy41MDgzNyAxNi45NTAyTDMuNTAzMTIgMTYuNzUxMUwzLjUwMDg5IDguMjUyN0wzLjUwNTI5IDguMDUwMkMzLjYwNTM5IDYuMTM3NDkgNS4xMzg2NyA0LjYwNDQ5IDcuMDUwOTYgNC41MDUyN0w3LjI1MDEgNC41MDAxN0gxMC43NDk1SDcuMjUwMVpNMTMuNzQ4MSAzLjAwMTQ2TDIwLjMwMTggMy4wMDE5N0wyMC40MDE0IDMuMDE1NzVMMjAuNTAyMiAzLjA0MzkzTDIwLjU1OSAzLjA2ODAzQzIwLjYxMjIgMy4wOTEyMiAyMC42NjM0IDMuMTIxNjMgMjAuNzExMSAzLjE1ODg1TDIwLjc4MDQgMy4yMjE1NkwyMC44NjQxIDMuMzIwMTRMMjAuOTE4MyAzLjQxMDI1TDIwLjk1NyAzLjUwMDU3TDIwLjk3NjIgMy41NjQ3NkwyMC45ODk4IDMuNjI4NjJMMjAuOTk5MiAzLjcyMjgyTDIwLjk5OTcgMTAuMjU1NEMyMC45OTk3IDEwLjY2OTYgMjAuNjYzOSAxMS4wMDU0IDIwLjI0OTcgMTEuMDA1NEMxOS44NyAxMS4wMDU0IDE5LjU1NjIgMTAuNzIzMiAxOS41MDY1IDEwLjM1NzFMMTkuNDk5NyAxMC4yNTU0TDE5LjQ5ODkgNS41NjE0N0wxMi4yNzk3IDEyLjc4NDdDMTIuMDEzNCAxMy4wNTEgMTEuNTk2OCAxMy4wNzUzIDExLjMwMzEgMTIuODU3NUwxMS4yMTkgMTIuNzg0OUMxMC45NTI3IDEyLjUxODcgMTAuOTI4NCAxMi4xMDIxIDExLjE0NjIgMTEuODA4NEwxMS4yMTg4IDExLjcyNDNMMTguNDM2OSA0LjUwMTQ2SDEzLjc0ODFDMTMuMzY4NCA0LjUwMTQ2IDEzLjA1NDYgNC4yMTkzMSAxMy4wMDUgMy44NTMyNEwxMi45OTgxIDMuNzUxNDZDMTIuOTk4MSAzLjM3MTc3IDEzLjI4MDMgMy4wNTc5NyAxMy42NDY0IDMuMDA4MzFMMTMuNzQ4MSAzLjAwMTQ2WiIgZmlsbD0iI0ZGRkZGRiIgLz48L3N2Zz4) !important;\n            height: '.75em';\n            marginLeft: '.25em';\n            filter:"+(null!==(_props$renderingMiddl7=null==props||null===(_props$renderingMiddl8=props.renderingMiddlewareProps)||void 0===_props$renderingMiddl8||null===(_props$renderingMiddl9=_props$renderingMiddl8.receivedMessageAnchorStyles)||void 0===_props$renderingMiddl9?void 0:_props$renderingMiddl9.filter)&&void 0!==_props$renderingMiddl7?_props$renderingMiddl7:"none")+";\n        }\n        pre {\n            white-space: pre-wrap;\n            white-space: -moz-pre-wrap;\n            white-space: -pre-wrap;\n            white-space: -o-pre-wrap;\n            word-wrap: break-word;\n        }\n        .ms_lcw_webchat_received_message a:link,\n        .ms_lcw_webchat_received_message a:visited,\n        .ms_lcw_webchat_received_message a:hover,\n        .ms_lcw_webchat_received_message a:active {\n            color: "+(null!==(_props$renderingMiddl10=null==props||null===(_props$renderingMiddl11=props.renderingMiddlewareProps)||void 0===_props$renderingMiddl11||null===(_props$renderingMiddl12=_props$renderingMiddl11.receivedMessageAnchorStyles)||void 0===_props$renderingMiddl12?void 0:_props$renderingMiddl12.color)&&void 0!==_props$renderingMiddl10?_props$renderingMiddl10:null==defaultReceivedMessageAnchorStyles?void 0:defaultReceivedMessageAnchorStyles.color)+";\n        } "}),Object(jsx_runtime.jsx)(Stack.a,{styles:containerStyles,children:Object(jsx_runtime.jsx)(BasicWebChat,{})})]})},webchatcontainerstateful_WebChatContainerStateful=WebChatContainerStateful_WebChatContainerStateful;try{WebChatContainerStateful_WebChatContainerStateful.displayName="WebChatContainerStateful",WebChatContainerStateful_WebChatContainerStateful.__docgenInfo={description:"",displayName:"WebChatContainerStateful",props:{containerStyles:{defaultValue:null,description:"",name:"containerStyles",required:!1,type:{name:"IStyle"}},disableNewLineMarkdownSupport:{defaultValue:null,description:"",name:"disableNewLineMarkdownSupport",required:!1,type:{name:"boolean"}},disableMarkdownMessageFormatting:{defaultValue:null,description:"",name:"disableMarkdownMessageFormatting",required:!1,type:{name:"boolean"}},webChatStyles:{defaultValue:null,description:"",name:"webChatStyles",required:!1,type:{name:"StyleOptions"}},webChatProps:{defaultValue:null,description:"",name:"webChatProps",required:!1,type:{name:"IWebChatProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},storeMiddlewares:{defaultValue:null,description:"",name:"storeMiddlewares",required:!1,type:{name:"any[]"}},renderingMiddlewareProps:{defaultValue:null,description:"",name:"renderingMiddlewareProps",required:!1,type:{name:"IRenderingMiddlewareProps"}},localizedTexts:{defaultValue:null,description:"",name:"localizedTexts",required:!1,type:{name:"ILiveChatWidgetLocalizedTexts"}},botMagicCode:{defaultValue:null,description:"",name:"botMagicCode",required:!1,type:{name:"IBotMagicCodeConfig"}},hyperlinkTextOverride:{defaultValue:null,description:"",name:"hyperlinkTextOverride",required:!1,type:{name:"boolean"}},adaptiveCardStyles:{defaultValue:null,description:"",name:"adaptiveCardStyles",required:!1,type:{name:"IAdaptiveCardStyles"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/WebChatContainerStateful.tsx#WebChatContainerStateful"]={docgenInfo:WebChatContainerStateful_WebChatContainerStateful.__docgenInfo,name:"WebChatContainerStateful",path:"src/components/webchatcontainerstateful/WebChatContainerStateful.tsx#WebChatContainerStateful"})}catch(__react_docgen_typescript_loader_error){}var AudioNotificationStateful_AudioNotificationStateful=function AudioNotificationStateful(props){var audioSrc=props.audioSrc,isAudioMuted=props.isAudioMuted,audioRef=Object(react.useRef)(new Audio(audioSrc));return Object(react.useEffect)((function(){cjs.BroadcastService.getMessageByEventName("NewMessageNotification").subscribe((function(msg){audioRef.current.play()}))}),[]),Object(react.useEffect)((function(){audioRef.current.muted=!!isAudioMuted}),[isAudioMuted]),Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})},audionotificationstateful_AudioNotificationStateful=AudioNotificationStateful_AudioNotificationStateful;try{AudioNotificationStateful_AudioNotificationStateful.displayName="AudioNotificationStateful",AudioNotificationStateful_AudioNotificationStateful.__docgenInfo={description:"",displayName:"AudioNotificationStateful",props:{audioSrc:{defaultValue:null,description:"",name:"audioSrc",required:!1,type:{name:"string"}},isAudioMuted:{defaultValue:null,description:"",name:"isAudioMuted",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/footerstateful/audionotificationstateful/AudioNotificationStateful.tsx#AudioNotificationStateful"]={docgenInfo:AudioNotificationStateful_AudioNotificationStateful.__docgenInfo,name:"AudioNotificationStateful",path:"src/components/footerstateful/audionotificationstateful/AudioNotificationStateful.tsx#AudioNotificationStateful"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.string.match.js"),__webpack_require__("./node_modules/core-js/modules/web.url.js");function DownloadTranscriptStateful_regeneratorRuntime(){DownloadTranscriptStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var processCreatedDateTime=function processCreatedDateTime(createdDateTime,chatCount){var formattedDate=new Date(createdDateTime),formattedSplitTimeString=formattedDate.toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"}).split(" "),finalizedTimeString="";return formattedSplitTimeString&&formattedSplitTimeString.length>1&&(finalizedTimeString=formattedSplitTimeString[0]+" "+formattedSplitTimeString[1]),0==chatCount?formattedDate.toLocaleDateString("en-us")+" "+finalizedTimeString:finalizedTimeString},DownloadTranscriptStateful_beautifyChatTranscripts=function beautifyChatTranscripts(chatTranscripts,renderMarkDown,attachmentMessage){var chats=JSON.parse(chatTranscripts).reverse(),bodyStartTag="<body bgcolor='"+Constants.n.ChatTranscriptsBodyColor+"'>",beautifiedChats="",tabIndex=1,previousDisplayName="",chatCount=0;return chats.forEach((function(value){var dialogNameMarginTop="6px",dialogboxMarginleft="40px",displayName="User",iconName="U",isAgentChat=!1,fileAttachmentName=Constants.n.DefaultFileAttachmentName,dialogColor=Constants.n.CustomerDialogColor,fontColor=Constants.n.CustomerFontColor,isSystemMessage=value.tags&&-1!==value.tags.toLowerCase().indexOf(Constants.d.systemMessageTag),isControlMessage=value.isControlMessage&&!0===value.isControlMessage,isAdaptiveCard=value.contentType&&value.contentType.toLowerCase()===Constants.n.AdaptiveCardType,isInternalMessage=value.deliveryMode&&value.deliveryMode.toLowerCase()===Constants.n.InternalMode,isHiddenMessage=value.tags&&-1!==value.tags.toLowerCase().indexOf(Constants.d.hiddenTag.toLowerCase());if(!(isSystemMessage||isControlMessage||isAdaptiveCard||isInternalMessage||isHiddenMessage)){value.from&&(value.from.application?(displayName=value.from.application.displayName,dialogColor=Constants.n.AgentDialogColor,fontColor=Constants.n.AgentFontColor,isAgentChat=!0):value.from.guest?(displayName=value.from.guest.displayName,dialogColor=Constants.n.CustomerDialogColor):value.from.user&&(displayName=value.from.user.displayName,dialogColor=Constants.n.CustomerDialogColor),iconName=function constructIconName(displayName){if(!displayName)return"";var iconName="C",displayNameSplit=displayName.split(" ");return displayNameSplit.length>1?iconName=displayNameSplit[0][0]+displayNameSplit[1][0]:1==displayNameSplit.length&&(iconName=displayNameSplit[0][0]),iconName}(displayName=function processDisplayName(displayName){var matchedTeamsDisplayName=displayName.match(".+:.+");return displayName.indexOf("teamsvisitor")>=0&&matchedTeamsDisplayName&&matchedTeamsDisplayName.length>0&&(displayName="Customer"),displayName}(displayName)),value.attachments&&value.attachments.length>0&&value.attachments[0].name&&(fileAttachmentName=value.attachments[0].name,value.content=attachmentMessage?attachmentMessage+" "+fileAttachmentName:"The following attachment was uploaded during the conversation: "+fileAttachmentName));var displayNamePlaceholder=processCreatedDateTime(value.createdDateTime,chatCount),iconPara="";displayName!==previousDisplayName&&(dialogboxMarginleft="0px",displayNamePlaceholder="<b>"+displayName+" </b> "+processCreatedDateTime(value.createdDateTime,chatCount),iconPara="<div class='circle' style='display:inline-block;float:left;margin-right:5px;width:35px;height:35px;border-radius:20px;color:black;line-height:35px;text-align:center;background:"+dialogColor+";'>                            <font tabindex ='"+tabIndex+"' color ="+fontColor+" style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;'>                                "+iconName+"                            </font>                            </div>",tabIndex++),displayName!==previousDisplayName&&(""===previousDisplayName&&(dialogNameMarginTop="0px"),""!==previousDisplayName&&(dialogNameMarginTop="20px"));var displayNameDiv="<div style='margin-right:-2px;margin-top:"+dialogNameMarginTop+";margin-bottom:-2px;margin-left:42px;top:-2px;position:relative;'>                                    <font tabindex ='"+tabIndex+"' size = '1px' color='#000000' style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:500;'>                                        "+displayNamePlaceholder+"                                    </font>                                </div>";tabIndex++,beautifiedChats=beautifiedChats+"<div class='transcripts' style='width:80%;margin-left:10%;'>"+iconPara+displayNameDiv+("<div class='dialogbox' style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;word-break:break-word;min-height:20px;max-width:80%;display:inline-block;margin-left:"+dialogboxMarginleft+";padding: 10px; background-color:"+dialogColor+"; border-radius: 0px 12px 12px 12px; left: 3px; top: 2px; '>")+"<font tabindex= '"+tabIndex+++"' color ="+fontColor+">"+function processContent(transcriptContent,isAgentChat,renderMarkDown){if(transcriptContent.toString().toLowerCase().indexOf(Constants.n.TranscriptMessageEmojiMessageType)>=0){var matchedEmojiImgTag=transcriptContent.match('<img src="http.*://.+/objects/.+/views.+">');matchedEmojiImgTag&&matchedEmojiImgTag.length>0&&transcriptContent.toString().toLowerCase().indexOf(matchedEmojiImgTag[0])>=0&&(transcriptContent=transcriptContent.replace(matchedEmojiImgTag[0],""))}return!isAgentChat&&transcriptContent.toString().toLowerCase().indexOf("a href")>=0&&transcriptContent.toString().toLowerCase().indexOf("target")>=0&&(transcriptContent=transcriptContent.slice(0,transcriptContent.toString().indexOf("target"))+" style='color:white' "+transcriptContent.slice(transcriptContent.toString().indexOf("target"))),renderMarkDown&&(transcriptContent=renderMarkDown(transcriptContent)),transcriptContent}(value.content,isAgentChat,renderMarkDown)+"</font></div></div>",previousDisplayName=displayName,chatCount++}})),"<!DOCTYPE html><html><meta charset='UTF-8'>"+bodyStartTag+"<div class='allTranscripts' style='max-width:60%;min-width:30%;margin-left:20%;background-color:#FFFFFF;'>"+beautifiedChats+"</div></body></html>"},downloadTranscript=function(){var _ref=function DownloadTranscriptStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(DownloadTranscriptStateful_regeneratorRuntime().mark((function _callee(chatSDK,renderMarkDown,bannerMessageOnError,attachmentMessage){var data,chatTranscripts,byteCharacters,blob,link;return DownloadTranscriptStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,null==chatSDK?void 0:chatSDK.getLiveChatTranscript();case 2:typeof(data=_context.sent)===Constants.d.String&&(data=JSON.parse(data)),null!==data[Constants.d.ChatMessagesJson]&&void 0!==data[Constants.d.ChatMessagesJson]?(chatTranscripts=window.btoa(encodeURIComponent(DownloadTranscriptStateful_beautifyChatTranscripts(data[Constants.d.ChatMessagesJson],renderMarkDown,attachmentMessage))),byteCharacters=decodeURIComponent(window.atob(chatTranscripts)),blob=new Blob([byteCharacters],{type:"text/html;charset=utf-8"}),link=document.createElement("a"),document.body.appendChild(link),link.setAttribute(Constants.g.download,Constants.n.ChatTranscriptDownloadFile),link.setAttribute(Constants.g.href,URL.createObjectURL(blob)),link.setAttribute(Constants.g.ariaHidden,"true"),link.click()):(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DownloadTranscriptResponseNullOrUndefined,ExceptionDetails:{exception:"Download transcript failed: response null or undefined."}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.DownloadTranscriptError,null!=bannerMessageOnError?bannerMessageOnError:Constants.d.defaultDownloadTranscriptError));case 5:case"end":return _context.stop()}}),_callee)})));return function downloadTranscript(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}();function FooterStateful_regeneratorRuntime(){FooterStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function FooterStateful_slicedToArray(arr,i){return function FooterStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FooterStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function FooterStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FooterStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FooterStateful_arrayLikeToArray(o,minLen)}(arr,i)||function FooterStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FooterStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FooterStateful_FooterStateful=function FooterStateful(props){var _footerProps$controlP4,_audioNotificationPro,_footerProps$controlP5,_footerProps$controlP6,_state$appStates$isAu,_onDownloadTranscriptClick,_useChatContextStore2=FooterStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],footerProps=props.footerProps,downloadTranscriptProps=props.downloadTranscriptProps,audioNotificationProps=props.audioNotificationProps,hideFooterDisplay=props.hideFooterDisplay,chatSDK=hooks_useChatSDKStore(),controlProps=Object.assign({id:"oc-lcw-footer",dir:state.domainStates.globalDir,onDownloadTranscriptClick:(_onDownloadTranscriptClick=function FooterStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(FooterStateful_regeneratorRuntime().mark((function _callee(){var _downloadTranscriptPr;return FooterStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.DownloadTranscriptButtonClicked,Description:"Download Transcript button clicked."}),_context.next=4,downloadTranscript(chatSDK,null==downloadTranscriptProps?void 0:downloadTranscriptProps.renderMarkDown,null==downloadTranscriptProps?void 0:downloadTranscriptProps.bannerMessageOnError,null==downloadTranscriptProps?void 0:downloadTranscriptProps.attachmentMessage);case 4:_context.next=10;break;case 6:_context.prev=6,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DownloadTranscriptFailed,ExceptionDetails:{exception:_context.t0}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.DownloadTranscriptError,null!==(_downloadTranscriptPr=null==downloadTranscriptProps?void 0:downloadTranscriptProps.bannerMessageOnError)&&void 0!==_downloadTranscriptPr?_downloadTranscriptPr:Constants.d.defaultDownloadTranscriptError);case 10:case"end":return _context.stop()}}),_callee,null,[[0,6]])}))),function onDownloadTranscriptClick(){return _onDownloadTranscriptClick.apply(this,arguments)}),onEmailTranscriptClick:function onEmailTranscriptClick(){var _footerProps$controlP,_footerProps$controlP2,_footerProps$controlP3;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptButtonClicked,Description:"Email Transcript button clicked."});var emailTranscriptButtonId=null!==(_footerProps$controlP=null==footerProps||null===(_footerProps$controlP2=footerProps.controlProps)||void 0===_footerProps$controlP2||null===(_footerProps$controlP3=_footerProps$controlP2.emailTranscriptButtonProps)||void 0===_footerProps$controlP3?void 0:_footerProps$controlP3.id)&&void 0!==_footerProps$controlP?_footerProps$controlP:controlProps.id+"-emailtranscript-button";emailTranscriptButtonId&&dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:emailTranscriptButtonId}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE,payload:!0})},onAudioNotificationClick:function onAudioNotificationClick(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.AudioToggleButtonClicked,Description:"Audio button clicked."}),dispatch({type:LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION,payload:!state.appStates.isAudioMuted})}},null==footerProps?void 0:footerProps.controlProps,{audioNotificationButtonProps:Object.assign({},null==footerProps||null===(_footerProps$controlP4=footerProps.controlProps)||void 0===_footerProps$controlP4?void 0:_footerProps$controlP4.audioNotificationButtonProps,{isAudioMuted:state.appStates.isAudioMuted})});return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hideFooterDisplay&&Object(jsx_runtime.jsx)(cjs.Footer,{componentOverrides:null==footerProps?void 0:footerProps.componentOverrides,controlProps:controlProps,styleProps:null==footerProps?void 0:footerProps.styleProps}),Object(jsx_runtime.jsx)(audionotificationstateful_AudioNotificationStateful,{audioSrc:null!==(_audioNotificationPro=null==audioNotificationProps?void 0:audioNotificationProps.audioSrc)&&void 0!==_audioNotificationPro?_audioNotificationPro:"data:audio/mpeg;base64,SUQzAwAAAAAHdlRDT04AAAAPAAAB//5PAHQAaABlAHIAAABHRU9CAAAAKAAAAQD//gAA//5TAGYATQBhAHIAawBlAHIAcwAAAAwAAABkAAAAAAAAAEdFT0IAAACWAAABAP/+AAD//lMAZgBDAEQASQBuAGYAbwAAABwAAABkAAAAAQAAAInGktMGzMdMvxsOxb5i8JMcAAAAZAAAAInGktMGzMdMvxsOxb5i8JNEAAAARAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7kgAAAAJbGEnVMYAES2MJOqYwAIxIfWG5l5ARiQ+sNzLyAu5VVJICkoEdcSBICguiWT8M1+LObMz+xmZmZmSxLEtWVAAwDk/2FlJm97zRYscbMDxwTn7P/+IIIfE4Pwf5c+o5BBwnPlw//KO1A/3KqpJAUlAjriQJAUF0SyfhmvxZzZmf2MzMzMyWJYlqyoAGAcn+wspM3veaLFjjZgeOCc/Z//xBBD4nB+D/Ln1HIIOE58uH/5R2oHy4AAYEwYCQYACornvALrRJthkoZCwQ2U3LHoyEkfDBR73wCsVgjxgEYgejJL+aqGEnjK1riqJgctUlZ3CFbLVN+qM7/tv/7xjGtR376n8T9eaxzrGqlGyMmlnEpIceQ2WyiC4AAYEwYCQYACornvALrRJthkoZCwQ2U3LHoyEkfDBR73wCsVgjxgEYgejJL+aqGEnjK1riqJgctUlZ3CFbLVN+qM7/tv/7xjGtR376n8T9eaxzrGqlGyMmlnEpIceQ2WyiAPWUUm2k03cBF3/gh7sHxnWikLoeOYF6ot2W5ayrSXyIkJ7/+5IAEQACJBNYb2zADESCaw3tmAGH/FdVp+2HMP+K6rT9sOaO1cxvOc4FhrEoFjP9QGf/63ZAsImotmLRCLPCYKDmMhZxr1lFJtpNN3ARd/4Ie7B8Z1opC6HjmBeqLdluWsq0l8iJCejtXMbznOBYaxKBYz/UBn/+t2QLCJqLZi0QizwmCg5jIWca1hITbjbYkACEF1WEjAQuALuIqY1pMTpjTLYeh19pmYqy7VMzt3VsnWWo/2l8BzefMLgNLM9fQFP+/JawEktrM6wkJtxtsSABCC6rCRgIXAF3EVMa0mJ0xplsPQ6+0zMVZdqmZ27q2TrLUf7S+A5vPmFwGlmevoCn/fktYCSW1mT2MgklEkAhKx+G3bctrc/DbuK3FNjo/wM4/0+o38fV733h48EgRxLJ6vDgwEgSCev9g4WHAIBQruBAQd/6gQ/icH8H3/7hOD//8Tggc/gh5cHw/7GQSSiSAQlY/DbtuW1ufht3Fbimx0f4Gcf6fUb+Pq977w8eCQI4lk9XhwYCQJBPX+wcLDgEAoV3AgIO/9QIfxOD+D7///uSAEuAApUX2msvYkxSovtNZexJiXhdcee9qTEvC64897Um9wnB//+JwQOfwQ8uD4fhlMRERESQCi3jtVrGdDSrMogSMGKyg+QJyNeDV7GhW3/LVFJ3ujVdFaK0TIJcld3/57yx7rBU6e9T9Q5K3/8sDT6gaDv8RV0AqCoShlMRERESQCi3jtVrGdDSrMogSMGKyg+QJyNeDV7GhW3/LVFJ3ujVdFaK0TIJcld3/57yx7rBU6e9T9Q5K3/8sDT6gaDv8RV0AqCoSLoyCSSACEnBDTuwREZI679w8KNzvhW2awcYIqgeazfwx+9q1uMd4kyZXFxERXCYKNzvxKe/FXeMz7pQwMF2vQe2HBE8N3feVAQ8DLPDEX0XRkEkkAEJOCGndgiIyR137h4UbnfCts1g4wRVA81m/hj97VrcY7xJkyuLiIiuEwUbnfiU9+Ku8Zn3ShgYLteg9sOCJ4bu+8qAh4GWeGIvotaJKSRJSbkERCzoQbgj0ULOhoesI7YqkOqnZdKZjPHHmFpaBCzqJRapTshZaKJRBCTwib5UNP+owf/7kgBsAAJ7F9drW1pMT2L67WtrSYlsW12n6acxLYtrtP005uSm1ckexO49VGeFUnSXX/Ud9NrRJSSJKTcgiIWdCDcEeihZ0ND1hHbFUh1U7LpTMZ448wtLQIWdRKLVKdkLLRRKIISeETfKhp/1GDyU2rkj2J3Hqozwqk6S6/6jvpCSEgpttJpuAVX/k01qCn8ZWFNhjGzmhURPdVBYHfht5yvJ4xhT2bbJbctzlFnI2MUlECIrfOj8BciTTRUtmV+pF1f/ua94t/aPU5SNSg/FVhtzJeQkhIKbbSabgFV/5NNagp/GVhTYYxs5oVET3VQWB34becryeMYU9m2yW3Lc5RZyNjFJRAiK3zo/AXIk00VLZlfqRdX/7mveLf2j1OUjUoPxVYbcyXkLYiS7JJI5IBbcqvBkPtWdFYAElRGqL0Chqc0VJIxZ3b8tkd+SVNbYNk42bD7vRijvI65zBvpuLuFQ4x2WamPXef/8Rv53vaW3CxVwNsQPjylHYNXv1WxEl2SSRyQC25VeDIfas6KwAJKiNUXoFDU5oqSRizu35bL/+5IAkAACoiZU61uSXFREyp1rckuKrHlVre3pMVWPKrW9vSY78kqa2wbJxs2H3ejFHeR1zmDfTcXcKhxjss1Meu8//4jfzve0tuFirgbYgfHlKOwavfqA1iILtttssAEpaVaaw19pCpwYCMS9P8triAQOcT0cIfcR14wzxw4EgbKnLQzJaOFkUYzkwgXC+eNFlk1TIgCMRbJtRKKkV+yy8l7oiDTJmhAALtcISSLbZmnWIgu222ywASlpVprDX2kKnBgIxL0/y2uIBA5xPRwh9xHXjDPHDgSBsqctDMlo4WRRjOTCBcL540WWTVMiAIxFsm1EoqRX7LLyXuiINMmaEAAu1whJIttmad7CS///tbABm870LXky+kfmUkj06o1s4hNH7Iq+nYGvZrxZM/MFw7AZkR0CSlaUJCoDEsQSNHqdCDUyHHOf4VCmFd1HhusNWk+YUu1jFhx51lb8M0L3sJL//+1sAGbzvQteTL6R+ZSSPTqjWziE0fsir6dga9mvFkz8wXDsBmRHQJKVpQkKgMSxBI0ep0INTIcc5/hUKYV3//uSAKUAAsge1GtbkkxZA9qNa3JJiqhlVa1p6TFVDKq1rT0mUeG6w1aT5hS7WMWHHnWVvwzQsPrCTNv/tbABASmUEMTZwvMBADFmUoQPqcYZLnDTNfpGlwxD643Un6+VUurNMB2Eti7ckazq/RVPVcc6FkaLeI0YEa72SeJXsdW/hV67PYy5P1hJm3/2tgAgJTKCGJs4XmAgBizKUIH1OMMlzhpmv0jS4Yh9cbqT9fKqXVmmA7CWxduSNZ1foqnquOdCyNFvEaMCNd7JPEr2Orfwq9dnsZcnaIALb/62MAQI0pgAFBZwhzcxE8QaCFalEAsB5GKz0ho7CvKJ+oRTVQqKn1U0VFrpWy4c0RYWeGNRZobCJzUXhwihAK2AGQGQj2ZkXLZRLVGz/f7VqSWkmXnJOV9hYj9KtogAtv/rYwBAjSmAAUFnCHNzETxBoIVqUQCwHkYrPSGjsK8on6hFNVCoqfVTRUWulbLhzRFhZ4Y1FmhsInNReHCKEArYAZAZCPZmRctlEtUbP9/tWpJaSZeck5X2FiP0qGdjAAN3j/a0AP/7kgC1gAKDGlVrWnpMUGNKrWtPSYwQm0us6klxghNpdZ1JLijLzMNGhCd4yETDLYCMoHrGWlRx03EK7oROWMIRjXQ50rlIUnJlGQpRBEtCcG6zF7JKWFk2UR4nALwGqXKtYouCKfOcxZdb9fN7v9kbuitnYwADd4/2tAAoy8zDRoQneMhEwy2AjKB6xlpUcdNxCu6ETljCEY10OdK5SFJyZRkKUQRLQnBusxeySlhZNlEeJwC8BqlyrWKLginznMWXW/Xze7/ZG7or2iIK3+1sgAD0p+KqlpFbwoDMvBAEYeenYGsCFzhe3JgqDoVYtsDhixLnXfEdFGhEzUwxBAHa6iF0LuT4W0tszkvwB6B6zNyJBPTrQY5lQX2or9G0RBW/2tkAAelPxVUtIreFAZl4IAjDz07A1gQucL25MFQdCrFtgcMWJc674joo0ImamGIIA7XUQuhdyfC2ltmcl+APQPWZuRIJ6daDHMqC+1FfoGh1ERN5n/60ADdOliyF5yshWlHYqWneWxIkiFcSW5M3M1jr9kXtq4oXDDg4NnSAJu//+5IAw4ACwBhTe1h6TlgDCm9rD0nKXF1Hre3pMUuLqPW9vSYzTSyNOJMxS1Ep2/O4IDFrapSwJOf3t+/1////+0OoiJvM//WgAbp0sWQvOVkK0o7FS07y2JEkQriS3Jm5msdfsi9tXFC4YcHBs6QBN3maaWRpxJmKWolO353BAYtbVKWBJz+9v3+vewkq/7WgAATSMoCBDCRFBICRMuIYuSmEBJ5IEi0XxA56mxJ5NP4QxJcvl3vxPpZKhXHO4sjg1l8TycewFQ8O1cAaq63HxBQutc2rewkq/7WgAATSMoCBDCRFBICRMuIYuSmEBJ5IEi0XxA56mxJ5NP4QxJcvl3vxPpZKhXHO4sjg1l8TycewFQ8O1cAaq63HxBQutc2o3rAD3+2oAAGCfSVgNCxBAe2IQlFNGND6kpgquVYxKhqRSFYdzwcp8CjjLtNxoUB6zJxGS31ErCAtFdHj0azBhSpL//////////////////////////////////////////////////////////////////////////////////////uSANeAAm0X1Hs4wkxKIvqPZxhJiWBjR63t6TEsDGj1vb0m///////////////////////////////////////////////////////////////////////////////3rAD3+2oAAGCfSVgNCxBAe2IQlFNGND6kpgquVYxKhqRSFYdzwcp8CjjLtNxoUB6zJxGS31ErCAtFdHj0azBhSpK+wkq/7WgAASwBygOhdwKivAdAqcHGACcKkzawRcdFR2M4nMZ4QYZ+6PWIc6FS2o+aWaDEa3GApbDuFhKYd0oovsJKv+1oAAEsAcoDoXcCorwHQKnBxgAnCpM2sEXHRUdjOJzGeEGGfuj1iHOhUtqPmlmgxGtxgKWw7hYSmHdKKL7CS9/tQAABvBYcsow9BRJcwBwEizwDX0IGnZz+5SnLOXTvf3jGoBVlsf3HKOXqki3XsvABktTfH//////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAXiGNJrGHpMQcMaTWMPSYgAWUen7ecxAAso9P285v///////////////////////////////////////////////////////////////////////////////////////////////////////////////77CS9/tQAABvBYcsow9BRJcwBwEizwDX0IGnZz+5SnLOXTvf3jGoBVlsf3HKOXqki3XsvABktTfGbwEG720AAAflahxWtTVMcKEEs5rjqxISAOjCL97vw5N1Pvc1XB0RRPCk5pspYKPVv0tgk1qHDSObwEG720AAAflahxWtTVMcKEEs5rjqxISAOjCL97vw5N1Pvc1XB0RRPCk5pspYKPVv0tgk1qHDSO/skrfbUAAAc4qRFcEADJh2wITwoFE7zfkoRwgxbHL/ztc3jyemuWVpHUDElKscnC5WHDSMdf/////////////////////////////////////////////////////////////////////////////////////////////////////+5IA/4AGqBdSa1hiTjiC6k1rDEnHCF1DrOWJOOELqHWcsSf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f2SVvtqAAAOcVIiuCABkw7YEJ4UCid5vyUI4QYtjl/52ubx5PTXLK0jqBiSlWOThcrDhpGOpsgQrtJAAABl1nCY5dwwnawgLC3D2x/RGM+gi+FvDOV0lPg0qhm4yIhVKq8v93/pJ5UZmyBCu0kAAAGXWcJjl3DCdrCAsLcPbH9EYz6CL4W8M5XSU+DSqGbjIiFUqry/3f+knlRkv9CI29tAAAFHxlpwlZDA/QGQhIDxFQkBISBIe//2u1sfaioIgPA0hh7hV+/6kGiemv////////////////////////////////////////////////////////////////////////////////////////////////////////////uSAP+ABxUXUetZWk41ouo9aytJxlhbP6xhJzDLC2f1jCTm//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////v9CI29tAAAFHxlpwlZDA/QGQhIDxFQkBISBIe//2u1sfaioIgPA0hh7hV+/6kGiemr/SlP9bQAABdoF1qAFywAQBQTMgVOB/XtIADaNjGdJnhDkv1cos1GpzWas8NPf9wkzV/pSn+toAAAu0C61AC5YAIAoJmQKnA/r2kABtGxjOkzwhyX6uUWajU5rNWeGnv+4SZom0KKusgAAAFplGchOwKjJy3AzyZ6qlw6ENtwfw/ftDKoJeJ9D6v53//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kAD/gAdEFlFp+UnOMQLKLT8pOcY0WUes5Mc4xoso9ZyY5/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////m0KKusgAAAFplGchOwKjJy3AzyZ6qlw6ENtwfw/ftDKoJeJ9D6v52/0pXbWgAAAc7ADtq2CEKYgFOiCV6tsn6BQq+qG5vvO6pQpGJ639lHv9KV21oAAAHOwA7atghCmIBToglerbJ+gUKvqhub7zuqUKRiet/ZR3awSrJ4AAd0/jX1MAaFiAJKIDjhGj7gkcsHX+d5Uz57V1bT36Ylf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAg0DU/p+Rk+J4Gp/T8jJ8UAWUesZEcwoAso9YyI5v//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3awSrJ4AAd0/jX1MAaFiAJKIDjhGj7gkcsHX+d5Uz57V1bT36YlZdSlaLIAAABva4xDJr7qELgHoTpIQioeVVYCmcjLuL0FrhQjLqUrRZAAAAN7XGIZNfdQhcA9CdJCEVDyqrAUzkZdxegtcKESbUpTWiAAAAfSvOQg4JhIcxEm3DZXsiwvKT8v8zrsdX/p/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+5IA/4AIghbOYxkRzCZC2cxjIjmEdCU/pecEsI6Ep/S84Jb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5tSlNaIAAAB9K85CDgmEhzESbcNleyLC8pPy/zOux1f+kIlgIocHFAAAA/fsh1j8dMLBDM4jPVMOCggkZrPrKtkOOCX6AiWAihwcUAAAD9+yHWPx0wsEMziM9Uw4KCCRms+sq2Q44JfoCskDN5gBwAAAP3jeSgDXYABRUdScti0IEw0XbxoI7P9P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uSAP+ACKoJ0Gn5wSwhQToNPzglhHglMefnBKCPBKY8/OCU//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////hWSBm8wA4AAAH7xvJQBrsAAoqOpOWxaECYaLt40Edn+lHhABJh3tAAAAp44rCHDmcsYd4yIYRK4zjpDNHYsu8T5ApaAhaJNTHOhd2iP5NRIeBYHI63gyPCACTDvaAAABTxxWEOHM5Yw7xkQwiVxnHSGaOxZd4nyBS0BC0SamOdC7tEfyaiQ8CwOR1vBjbtdYxXicOI0COLSEeEVIyiD5Kgv5kJdZZpUX/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAeNCE55+cEoIKEJzz84JQa8PS3s4ebo14elvZw83f////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////m3a6xivE4cRoEcWkI8IqRlEHyVBfzIS6yzSogAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5IA/4ALFQlIoY95KhshKRQx7yVAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw=",isAudioMuted:null===state.appStates.isAudioMuted?null!==(_footerProps$controlP5=null==footerProps||null===(_footerProps$controlP6=footerProps.controlProps)||void 0===_footerProps$controlP6?void 0:_footerProps$controlP6.hideAudioNotificationButton)&&void 0!==_footerProps$controlP5&&_footerProps$controlP5:null!==(_state$appStates$isAu=state.appStates.isAudioMuted)&&void 0!==_state$appStates$isAu&&_state$appStates$isAu})]})},footerstateful_FooterStateful=FooterStateful_FooterStateful;try{FooterStateful_FooterStateful.displayName="FooterStateful",FooterStateful_FooterStateful.__docgenInfo={description:"",displayName:"FooterStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/footerstateful/FooterStateful.tsx#FooterStateful"]={docgenInfo:FooterStateful_FooterStateful.__docgenInfo,name:"FooterStateful",path:"src/components/footerstateful/FooterStateful.tsx#FooterStateful"})}catch(__react_docgen_typescript_loader_error){}var createFooter_createFooter=function createFooter(props,state){var _props$controlProps,_props$componentOverr,hideFooterDisplay=!((null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps||!_props$controlProps.hideFooter)&&function shouldShowFooter(state){return!state.appStates.isMinimized&&(state.appStates.conversationState===ConversationState.Active||state.appStates.conversationState===ConversationState.InActive||state.appStates.conversationState===ConversationState.Postchat)}(state));return Object(cjs.decodeComponentString)(null===(_props$componentOverr=props.componentOverrides)||void 0===_props$componentOverr?void 0:_props$componentOverr.footer)||Object(jsx_runtime.jsx)(footerstateful_FooterStateful,{footerProps:props.footerProps,downloadTranscriptProps:props.downloadTranscriptProps,audioNotificationProps:props.audioNotificationProps,hideFooterDisplay:hideFooterDisplay})};try{createFooter_createFooter.displayName="createFooter",createFooter_createFooter.__docgenInfo={description:"",displayName:"createFooter",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/common/createFooter.tsx#createFooter"]={docgenInfo:createFooter_createFooter.__docgenInfo,name:"createFooter",path:"src/components/livechatwidget/common/createFooter.tsx#createFooter"})}catch(__react_docgen_typescript_loader_error){}function createInternetConnectionChangeHandler_regeneratorRuntime(){createInternetConnectionChangeHandler_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function createInternetConnectionChangeHandler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var isInternetConnected=function(){var _ref=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee(){var response,text;return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,fetch(Constants.d.internetConnectionTestUrl);case 3:return response=_context.sent,_context.next=6,response.text();case 6:return text=_context.sent,_context.abrupt("return",text===Constants.d.internetConnectionTestUrlText);case 10:return _context.prev=10,_context.t0=_context.catch(0),_context.abrupt("return",!1);case 13:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function isInternetConnected(){return _ref.apply(this,arguments)}}(),createInternetConnectionChangeHandler=function(){var _ref2=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee3(){var handler;return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:handler=function(){var _ref3=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee2(){return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,isInternetConnected();case 2:_context2.sent?(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.NetworkReconnected}),NotificationHandler_NotificationHandler.notifySuccess(NotificationScenarios.InternetConnection,defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE)):(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.NetworkDisconnected}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.InternetConnection,defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION));case 4:case"end":return _context2.stop()}}),_callee2)})));return function handler(){return _ref3.apply(this,arguments)}}(),window.addEventListener("online",(function(){return handler()}),!1),window.addEventListener("offline",(function(){return handler()}),!1);case 3:case"end":return _context3.stop()}}),_callee3)})));return function createInternetConnectionChangeHandler(){return _ref2.apply(this,arguments)}}();function defaultCacheManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function defaultCacheManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function defaultCacheManager_createClass(Constructor,protoProps,staticProps){return protoProps&&defaultCacheManager_defineProperties(Constructor.prototype,protoProps),staticProps&&defaultCacheManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var defaultCacheManager=defaultCacheManager_createClass((function defaultCacheManager(){!function defaultCacheManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,defaultCacheManager)}));defaultCacheManager.InternalCache={};var defaultInMemoryDataStore_inMemoryDataStore=function inMemoryDataStore(){return{getData:function getData(key){if(defaultCacheManager.InternalCache&&defaultCacheManager.InternalCache[key])return defaultCacheManager.InternalCache[key]},setData:function setData(key,data){try{defaultCacheManager.InternalCache[key]=data}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.InMemoryDataStoreFailed,ExceptionDetails:error,Description:"Unable to set data in default in-memory cache."})}},removeData:function removeData(key){try{defaultCacheManager.InternalCache[key]={}}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.InMemoryDataStoreFailed,ExceptionDetails:error,Description:"Unable to remove data from default in-memory cache."})}}}},defaultClientDataStoreProvider_defaultClientDataStoreProvider=function defaultClientDataStoreProvider(){var cacheTtlinMins=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,ttlInMs=0,isCookieAllowed=function isCookieAllowed(){try{return localStorage,sessionStorage,!0}catch(error){return window.TPCWarningShown||(console.warn("Third party cookies blocked."),window.TPCWarningShown=!0),!1}};0==ttlInMs&&(ttlInMs=60*cacheTtlinMins*1e3);var dataStoreProvider={setData:function setData(key,data,type){if(isCookieAllowed())try{if(key){var item={data:data,expiry:(new Date).getTime()+ttlInMs},strItem=JSON.stringify(item);"localStorage"===type?localStorage.setItem(key,strItem):sessionStorage.setItem(key,strItem)}}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.ClientDataStoreProviderFailed,ExceptionDetails:error,Description:"Unable to store data in localStorage."})}else{var dataToCache={key:key,data:data,type:type};parent.postMessage(dataToCache,"*")}},getData:function getData(key,type){if(!isCookieAllowed())return defaultInMemoryDataStore_inMemoryDataStore().getData(key);var item,itemInJson=void 0;return null!==(item="localStorage"===type?localStorage.getItem(key):sessionStorage.getItem(key))?(itemInJson=JSON.parse(item),(new Date).getTime()>itemInJson.expiry?(localStorage.removeItem(key),null):itemInJson.data):void 0},removeData:function removeData(key,type){return isCookieAllowed()?key?"localStorage"===type?localStorage.removeItem(key):sessionStorage.removeItem(key):void 0:defaultInMemoryDataStore_inMemoryDataStore().removeData(key)}};return dataStoreProvider},defaultScrollBarProps={width:"7px",trackBackgroundColor:"#f1f1f1",thumbBackgroundColor:"#888",thumbBorderRadius:"10px",thumbHoverColor:"#555"},disposeTelemetryLoggers_disposeTelemetryLoggers=function disposeTelemetryLoggers(){!function disposeLoggers(){loggers.map((function(logger){logger.dispose()}))}()},defaultLiveChatWidgetGeneralStyles={position:"absolute",justifyContent:"center",alignItems:"center"},getGeneralStylesForButton_getGeneralStylesForButton=function getGeneralStylesForButton(state){var generalStylesForButton=defaultLiveChatWidgetGeneralStyles;return componentController_shouldShowChatButton(state)||componentController_shouldShowProactiveChatPane(state)||(generalStylesForButton=Object.assign({},defaultLiveChatWidgetGeneralStyles,{boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",borderRadius:"4px",padding:"0.5"})),generalStylesForButton};function initCallingSdk_regeneratorRuntime(){initCallingSdk_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var initCallingSdk=function(){var _ref=function initCallingSdk_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(initCallingSdk_regeneratorRuntime().mark((function _callee(chatSDK,setVoiceVideoCallingSDK){var callingSDK;return initCallingSdk_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!chatSDK.getVoiceVideoCalling){_context.next=8;break}return _context.next=4,chatSDK.getVoiceVideoCalling();case 4:return callingSDK=_context.sent,setVoiceVideoCallingSDK(callingSDK),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallingSDKLoadSuccess}),_context.abrupt("return",!0);case 8:return _context.abrupt("return",!1);case 11:return _context.prev=11,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.CallingSDKLoadFailed,ExceptionDetails:{exception:_context.t0.message}}),_context.abrupt("return",!1);case 15:case"end":return _context.stop()}}),_callee,null,[[0,11]])})));return function initCallingSdk(_x,_x2){return _ref.apply(this,arguments)}}(),defaultConfirmationPaneLocalizedTexts={CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED:"Select Cancel and then select the download or email icon",CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_TRANSCRIPT_ENABLED:"Select Cancel and then select the email icon.",CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_DOWNLOAD_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_DOWNLOAD_TRANSCRIPT_ENABLED:"Select Cancel and then select the download icon.",CLOSE_CONFIRMATION_DIALOG_TITLE_DEFAULT:"Close Chat",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_DEFAULT:"Do you really want to close this chat?"};function attachmentProcessingMiddleware_regeneratorRuntime(){attachmentProcessingMiddleware_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var DirectLineActivityType,MessageTypes,attachmentProcessingMiddleware_createSendFileAction=function createSendFileAction(files){return{payload:{files:files},type:WebChatActionType.WEB_CHAT_SEND_FILES}},storemiddlewares_attachmentProcessingMiddleware=function attachmentProcessingMiddleware(_ref){var dispatch=_ref.dispatch;return function(next){return function(){var _ref2=function attachmentProcessingMiddleware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(attachmentProcessingMiddleware_regeneratorRuntime().mark((function _callee(action){var _action$payload,_action$payload$files,files,dispatchAction,nextAction;return attachmentProcessingMiddleware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!((null==action?void 0:action.type)===WebChatActionType.WEB_CHAT_SEND_FILES&&(null==action||null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$files=_action$payload.files)||void 0===_action$payload$files?void 0:_action$payload$files.length)>0)){_context.next=9;break}if(1!==(files=action.payload.files).length){_context.next=4;break}return _context.abrupt("return",next(action));case 4:return dispatchAction=attachmentProcessingMiddleware_createSendFileAction(files.slice(0,files.length-1)),nextAction=attachmentProcessingMiddleware_createSendFileAction([files[files.length-1]]),_context.next=8,dispatch(dispatchAction);case 8:return _context.abrupt("return",next(nextAction));case 9:return _context.abrupt("return",next(action));case 10:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()}},storemiddlewares_channelDataMiddleware=function channelDataMiddleware(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload,_action$payload$activ;if((null==action?void 0:action.type)===WebChatActionType.DIRECT_LINE_POST_ACTIVITY_PENDING&&null!=action&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&null!==(_action$payload$activ=_action$payload.activity)&&void 0!==_action$payload$activ&&_action$payload$activ.channelData){var channelIdTag=""+Constants.d.channelIdKey+Constants.d.ChannelId,customerMessageTag=""+Constants.d.CustomerTag;action.payload.activity.channelData.tags?(action.payload.activity.channelData.tags.includes(channelIdTag)||action.payload.activity.channelData.tags.push(channelIdTag),action.payload.activity.channelData.tags.includes(customerMessageTag)||action.payload.activity.channelData.tags.push(customerMessageTag)):(action.payload.activity.channelData.tags=[channelIdTag],action.payload.activity.channelData.tags.push(customerMessageTag)),action.payload.activity.channelData.metadata={deliveryMode:lib.DeliveryMode.Bridged}}return next(action)}}};!function(DirectLineActivityType){DirectLineActivityType.Message="message",DirectLineActivityType.Typing="typing"}(DirectLineActivityType||(DirectLineActivityType={})),function(MessageTypes){MessageTypes.User="UserMessage",MessageTypes.Swift="SwiftCard",MessageTypes.System="SystemMessage",MessageTypes.Welcome="Welcome",MessageTypes.Translate="Translate",MessageTypes.Image="LwcImage",MessageTypes.File="LwcFile",MessageTypes.AdaptiveCard="card",MessageTypes.Thread="Thread"}(MessageTypes||(MessageTypes={}));var BrowserVendor,defaultSystemMessageStyles={maxWidth:"100%",color:"#605E5C",background:"transparent",fontSize:"12px",borderRadius:0,minHeight:"auto",fontFamily:"Segoe UI",lineHeight:"16px",padding:"0px 10px 0 10px"},defaultUserMessageStyles={fontSize:"14px"},loggedSystemMessages=new Array,activityMiddleware_handleSystemMessage=function handleSystemMessage(next,args,card,systemMessageStyleProps){var _card$activity,_card$activity$channe,_card$activity$channe2,_card$activity2,_card$activity2$chann,_card$activity3,_card$activity3$chann,_card$activity3$chann2,_card$activity4,_card$activity4$chann,_card$activity5,_card$activity5$chann,_card$nextVisibleActi,_card$nextVisibleActi2,_card$activity6,_card$activity6$chann,_card$activity7,_card$nextVisibleActi3,_card$activity8,systemMessageStyles=Object.assign({},defaultSystemMessageStyles,systemMessageStyleProps);return null!==(_card$activity=card.activity)&&void 0!==_card$activity&&null!==(_card$activity$channe=_card$activity.channelData)&&void 0!==_card$activity$channe&&null!==(_card$activity$channe2=_card$activity$channe.tags)&&void 0!==_card$activity$channe2&&_card$activity$channe2.includes(Constants.d.averageWaitTimeMessageTag)&&loggedSystemMessages.indexOf(null===(_card$activity2=card.activity)||void 0===_card$activity2||null===(_card$activity2$chann=_card$activity2.channelData)||void 0===_card$activity2$chann?void 0:_card$activity2$chann.clientmessageid)<0&&(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.AverageWaitTimeMessageRecieved,Description:"Average wait time message was received"}),loggedSystemMessages.push(card.activity.channelData.clientmessageid)),null!==(_card$activity3=card.activity)&&void 0!==_card$activity3&&null!==(_card$activity3$chann=_card$activity3.channelData)&&void 0!==_card$activity3$chann&&null!==(_card$activity3$chann2=_card$activity3$chann.tags)&&void 0!==_card$activity3$chann2&&_card$activity3$chann2.includes(Constants.d.queuePositionMessageTag)&&loggedSystemMessages.indexOf(null===(_card$activity4=card.activity)||void 0===_card$activity4||null===(_card$activity4$chann=_card$activity4.channelData)||void 0===_card$activity4$chann?void 0:_card$activity4$chann.clientmessageid)<0&&(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.QueuePositionMessageRecieved,Description:"Queue position message was received"}),loggedSystemMessages.push(card.activity.channelData.clientmessageid)),null!==(_card$activity5=card.activity)&&void 0!==_card$activity5&&null!==(_card$activity5$chann=_card$activity5.channelData)&&void 0!==_card$activity5$chann&&_card$activity5$chann.clientmessageid&&(null===(_card$nextVisibleActi=card.nextVisibleActivity)||void 0===_card$nextVisibleActi||null===(_card$nextVisibleActi2=_card$nextVisibleActi.channelData)||void 0===_card$nextVisibleActi2?void 0:_card$nextVisibleActi2.clientmessageid)===(null===(_card$activity6=card.activity)||void 0===_card$activity6||null===(_card$activity6$chann=_card$activity6.channelData)||void 0===_card$activity6$chann?void 0:_card$activity6$chann.clientmessageid)||null!==(_card$activity7=card.activity)&&void 0!==_card$activity7&&_card$activity7.messageid&&(null===(_card$nextVisibleActi3=card.nextVisibleActivity)||void 0===_card$nextVisibleActi3?void 0:_card$nextVisibleActi3.messageid)===(null===(_card$activity8=card.activity)||void 0===_card$activity8?void 0:_card$activity8.messageid)?function(){return!1}:function(){return Object(jsx_runtime.jsx)("div",{style:systemMessageStyles,"aria-hidden":"true",children:card.activity.text},card.activity.id)}},isTagIncluded=function isTagIncluded(card,tag){return isDataTagsPresent(card)&&card.activity.channelData.tags.includes(tag)},isDataTagsPresent=function isDataTagsPresent(card){return card&&card.activity&&card.activity.channelData&&card.activity.channelData.tags&&card.activity.channelData.tags.length>0},activityMiddleware_createActivityMiddleware=function createActivityMiddleware(systemMessageStyleProps,userMessageStyleProps){return function(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(card.activity){var _card$activity$from,_card$activity$channe3;if((null===(_card$activity$from=card.activity.from)||void 0===_card$activity$from?void 0:_card$activity$from.role)===DirectLineSenderRole.Channel)return(null===(_card$activity$channe3=card.activity.channelData)||void 0===_card$activity$channe3?void 0:_card$activity$channe3.type)===MessageTypes.Thread&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.IC3ThreadUpdateEventReceived,Description:"IC3 ThreadUpdateEvent Received"}),function(){return!1};if(isTagIncluded(card,Constants.d.hiddenTag))return function(){return!1};if(isTagIncluded(card,Constants.d.systemMessageTag))return activityMiddleware_handleSystemMessage(0,0,card,systemMessageStyleProps);if(card.activity.text&&card.activity.type===DirectLineActivityType.Message){card.activity.channelData.isHtmlEncoded||card.activity.channelId!==Constants.d.webchatChannelId||(card.activity.text=escapeHtml(card.activity.text),card.activity.channelData.isHtmlEncoded=!0);var userMessageStyles=Object.assign({},defaultUserMessageStyles,userMessageStyleProps);return function(){return Object(jsx_runtime.jsx)("div",{className:card.activity.from.role===DirectLineSenderRole.User?Constants.d.sentMessageClassName:Constants.d.receivedMessageClassName,style:userMessageStyles,"aria-hidden":"true",children:next.apply(void 0,args).apply(void 0,arguments)})}}}return next.apply(void 0,args)}}}};__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.array.last-index-of.js");!function(BrowserVendor){BrowserVendor.CHROME="Chrome",BrowserVendor.FIREFOX="Firefox",BrowserVendor.SAFARI="Safari",BrowserVendor.EDGE="Edge",BrowserVendor.EDGE_CHROMIUM="Edg",BrowserVendor.OPERA="Opera",BrowserVendor.UNKNOWN="Unknown"}(BrowserVendor||(BrowserVendor={}));var userAgent=void 0,getUserAgent=function getUserAgent(){return userAgent||(userAgent=window.navigator.userAgent),userAgent},userAgentContainsString=function userAgentContainsString(searchString){return getUserAgent().indexOf(searchString)>-1},BrowserInfo_getBrowserName=function getBrowserName(){return function isOpera(){return userAgentContainsString("OPR/")}()?BrowserVendor.OPERA:function isEdge(){return userAgentContainsString(BrowserVendor.EDGE)||userAgentContainsString(BrowserVendor.EDGE_CHROMIUM)}()?BrowserVendor.EDGE:userAgentContainsString(BrowserVendor.CHROME)?BrowserVendor.CHROME:userAgentContainsString(BrowserVendor.FIREFOX)?BrowserVendor.FIREFOX:userAgentContainsString(BrowserVendor.SAFARI)?BrowserVendor.SAFARI:BrowserVendor.UNKNOWN},FileAttachmentIconMap={aac:AudioIcon,aiff:AudioIcon,alac:AudioIcon,amr:AudioIcon,avchd:VideoIcon,avi:VideoIcon,bmp:ImageIcon,doc:WordIcon,docx:WordIcon,flac:AudioIcon,flv:VideoIcon,gif:ImageIcon,jiff:ImageIcon,jpeg:ImageIcon,jpg:ImageIcon,mpe:VideoIcon,mpeg:VideoIcon,mpg:VideoIcon,mpv:VideoIcon,mp2:AudioIcon,mp3:AudioIcon,mp4:VideoIcon,m4p:VideoIcon,m4v:VideoIcon,mov:VideoIcon,one:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xOTYzIDEyOHEzNSAwIDYwIDI1dDI1IDYwdjE2MjJxMCAzNS0yNSA2MHQtNjAgMjVINTk3cS0zNSAwLTYwLTI1dC0yNS02MHYtMjk5SDg1cS0zNSAwLTYwLTI1dC0yNS02MFY1OTdxMC0zNSAyNS02MHQ2MC0yNWg0MjdWMjEzcTAtMzUgMjUtNjB0NjAtMjVoMTM2NnpNMzg5IDkzOWwyNDIgNDIwaDE1MlY2ODlINjM1djQyOUw0MDIgNjg5SDI0MXY2NzBoMTQ4VjkzOXptMTUzMSA4NTN2LTI1NmgtMjU2djI1NmgyNTZ6bTAtMzg0di0yNTZoLTI1NnYyNTZoMjU2em0wLTM4NFY3NjhoLTI1NnYyNTZoMjU2em0wLTM4NFYyNTZINjQwdjI1NmgyOTlxMzUgMCA2MCAyNXQyNSA2MHY4NTRxMCAzNS0yNSA2MHQtNjAgMjVINjQwdjI1Nmg4OTZWNjQwaDM4NHoiIC8+DQo8L3N2Zz4=",pcm:AudioIcon,pdf:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xOTIwIDE2NjRoLTEyOHYzODRIMTI4di0zODRIMFY2NDBoMTI4VjBoMTI0M2w0MjEgNDIxdjIxOWgxMjh2MTAyNHpNMTQwOCAzODRoMTY1bC0xNjUtMTY1djE2NXpNMjU2IDY0MGgxNDA4VjUxMmgtMzg0VjEyOEgyNTZ2NTEyem0xNDA4IDEwMjRIMjU2djI1NmgxNDA4di0yNTZ6bTEyOC04OTZIMTI4djc2OGgxNjY0Vjc2OHpNNDQ4IDg5NnE0MCAwIDc1IDE1dDYxIDQxIDQxIDYxIDE1IDc1cTAgNDAtMTUgNzV0LTQxIDYxLTYxIDQxLTc1IDE1aC02NHYxMjhIMjU2Vjg5NmgxOTJ6bTAgMjU2cTI2IDAgNDUtMTl0MTktNDVxMC0yNi0xOS00NXQtNDUtMTloLTY0djEyOGg2NHptNDQ4LTI1NnE1MyAwIDk5IDIwdDgyIDU1IDU1IDgxIDIwIDEwMHEwIDUzLTIwIDk5dC01NSA4Mi04MSA1NS0xMDAgMjBINzY4Vjg5NmgxMjh6bTAgMzg0cTI3IDAgNTAtMTB0NDAtMjcgMjgtNDEgMTAtNTBxMC0yNy0xMC01MHQtMjctNDAtNDEtMjgtNTAtMTB2MjU2em0zODQtMzg0aDMyMHYxMjhoLTE5MnYxMjhoMTkydjEyOGgtMTkydjEyOGgtMTI4Vjg5NnoiIC8+DQo8L3N2Zz4=",png:ImageIcon,ppt:PowerpointIcon,pptx:PowerpointIcon,qt:VideoIcon,rar:ArchiveIcon,swf:VideoIcon,tar:ArchiveIcon,"tar.gz":ArchiveIcon,tgz:ArchiveIcon,txt:BlankIcon,vsd:VisioIcon,vsdx:VisioIcon,wav:AudioIcon,webm:VideoIcon,webp:ImageIcon,wma:AudioIcon,wmv:VideoIcon,xls:ExcelIcon,xlsx:ExcelIcon,zip:ArchiveIcon,zipx:ArchiveIcon,"7z":ArchiveIcon},FileAttachmentIconManager_getFileAttachmentIconData=function getFileAttachmentIconData(extension){var key=extension.startsWith(".")?extension.slice(1):extension||"";return FileAttachmentIconMap[key.toLowerCase()]||BlankIcon},FileAttachmentIconManager_isInlineMediaSupported=function isInlineMediaSupported(attachmentName){switch(BrowserInfo_getBrowserName()){case BrowserVendor.CHROME:case BrowserVendor.OPERA:return Constants.d.chromeSupportedInlineMediaRegex.test(attachmentName);case BrowserVendor.FIREFOX:return Constants.d.firefoxSupportedInlineMediaRegex.test(attachmentName);case BrowserVendor.EDGE:return function isChromiumEdge(){return userAgentContainsString(BrowserVendor.EDGE_CHROMIUM)&&!userAgentContainsString(BrowserVendor.EDGE)}()&&Constants.d.chromeSupportedInlineMediaRegex.test(attachmentName);default:return!1}};try{FileAttachmentIconManager_getFileAttachmentIconData.displayName="getFileAttachmentIconData",FileAttachmentIconManager_getFileAttachmentIconData.__docgenInfo={description:"Get file attachment icon image depending on extension.",displayName:"getFileAttachmentIconData",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#getFileAttachmentIconData"]={docgenInfo:FileAttachmentIconManager_getFileAttachmentIconData.__docgenInfo,name:"getFileAttachmentIconData",path:"src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#getFileAttachmentIconData"})}catch(__react_docgen_typescript_loader_error){}try{FileAttachmentIconManager_isInlineMediaSupported.displayName="isInlineMediaSupported",FileAttachmentIconManager_isInlineMediaSupported.__docgenInfo={description:"",displayName:"isInlineMediaSupported",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#isInlineMediaSupported"]={docgenInfo:FileAttachmentIconManager_isInlineMediaSupported.__docgenInfo,name:"isInlineMediaSupported",path:"src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#isInlineMediaSupported"})}catch(__react_docgen_typescript_loader_error){}var defaultAttachmentAdaptiveCardStyles={borderStyle:"solid",borderColor:"rgb(230, 230, 230)",borderWidth:"1px"},defaultAttachmentContentStyles={width:"200px"},defaultAttachmentDividerStyles={margin:"0",height:"1px",border:"0px",backgroundColor:"#E8EAEC"},defaultAttachmentDownloadIconStyles={height:"12px",width:"12px",marginLeft:"auto !important",padding:"2px !important",fill:"#000000 !important"},defaultAttachmentFileNameStyles={minHeight:"15px",marginLeft:"5px",marginRight:"5px",color:"#000000 !important"},defaultAttachmentIconStyles={direction:"rtl",padding:"0 0 0 8px",lineHeight:0},defaultAttachmentProps_webChatAttachmentId="oc-lcw-webchat-attachment",defaultAttachmentProps_adaptiveCardAttachmentId="ms_lcw_webchat_adaptive_card",defaultAttachmentProps_enableInlinePlaying=!0,defaultAttachmentSizeStyles={display:"none"},defaultAttachmentStyles={display:"flex",alignItems:"center",background:"transparent",fontSize:"12px",lineHeight:"16px",boxSizing:"border-box",borderRadius:"2px",wordBreak:"break-all"};function attachmentMiddleware_slicedToArray(arr,i){return function attachmentMiddleware_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function attachmentMiddleware_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function attachmentMiddleware_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return attachmentMiddleware_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return attachmentMiddleware_arrayLikeToArray(o,minLen)}(arr,i)||function attachmentMiddleware_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function attachmentMiddleware_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var attachmentMiddleware_AttachmentContent=function AttachmentContent(props){return Object(jsx_runtime.jsx)("div",{id:props.id,style:props.style,children:props.children})};attachmentMiddleware_AttachmentContent.displayName="AttachmentContent";var attachmentMiddleware_AttachmentIcon=function AttachmentIcon(props){var _props$src;return Object(jsx_runtime.jsx)("div",{id:props.id,style:props.style,children:Object(jsx_runtime.jsx)("img",{src:null!==(_props$src=props.src)&&void 0!==_props$src?_props$src:FileAttachmentIconManager_getFileAttachmentIconData("txt")})})};attachmentMiddleware_AttachmentIcon.displayName="AttachmentIcon";var attachmentMiddleware_Attachment=function Attachment(props){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_state$domainStates$r6,_state$domainStates$r7,_state$domainStates$r8,_state$domainStates$r9,_state$domainStates$r10,iconData=props.iconData,imageCard=props.imageCard,textCard=props.textCard,renderer=props.renderer,state=attachmentMiddleware_slicedToArray(hooks_useChatContextStore(),1)[0],attachmentId=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2||null===(_state$domainStates$r3=_state$domainStates$r2.attachmentProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.webChatAttachmentId)&&void 0!==_state$domainStates$r?_state$domainStates$r:defaultAttachmentProps_webChatAttachmentId,attachmentDividerStyles=Object.assign({},defaultAttachmentDividerStyles,null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4?void 0:_state$domainStates$r4.attachmentDividerStyles),attachmentIconStyles=Object.assign({},defaultAttachmentIconStyles,null===(_state$domainStates$r5=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.attachmentIconStyles),attachmentStyles=Object.assign({},defaultAttachmentStyles,null===(_state$domainStates$r6=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r6?void 0:_state$domainStates$r6.attachmentStyles),attachmentSizeStylesString=Object.entries(Object.assign({},defaultAttachmentSizeStyles,null===(_state$domainStates$r7=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r7?void 0:_state$domainStates$r7.attachmentSizeStyles)).map((function(_ref){var _ref2=attachmentMiddleware_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentContentStylesString=Object.entries(Object.assign({},defaultAttachmentContentStyles,null===(_state$domainStates$r8=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r8?void 0:_state$domainStates$r8.attachmentContentStyles)).map((function(_ref3){var _ref4=attachmentMiddleware_slicedToArray(_ref3,2),k=_ref4[0],v=_ref4[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentFileNameStylesString=Object.entries(Object.assign({},defaultAttachmentFileNameStyles,null===(_state$domainStates$r9=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r9?void 0:_state$domainStates$r9.attachmentFileNameStyles)).map((function(_ref5){var _ref6=attachmentMiddleware_slicedToArray(_ref5,2),k=_ref6[0],v=_ref6[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentDownloadIconStylesString=Object.entries(Object.assign({},defaultAttachmentDownloadIconStyles,null===(_state$domainStates$r10=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r10?void 0:_state$domainStates$r10.attachmentDownloadIconStyles)).map((function(_ref7){var _ref8=attachmentMiddleware_slicedToArray(_ref7,2),k=_ref8[0],v=_ref8[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";");return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n            .webchat__fileContent__size { "+attachmentSizeStylesString+" }\n            .webchat__fileContent { "+attachmentContentStylesString+" }\n            .webchat__fileContent__fileName { "+attachmentFileNameStylesString+" }\n            .webchat__fileContent__downloadIcon { "+attachmentDownloadIconStylesString+" }\n        "}),Object(jsx_runtime.jsxs)("div",{dir:state.domainStates.globalDir,children:[imageCard&&renderer(imageCard),imageCard&&Object(jsx_runtime.jsx)("hr",{id:attachmentId+"-divider",style:attachmentDividerStyles}),Object(jsx_runtime.jsxs)(attachmentMiddleware_AttachmentContent,{attachment:textCard.attachment,id:attachmentId,style:attachmentStyles,children:[Object(jsx_runtime.jsx)(attachmentMiddleware_AttachmentIcon,{src:iconData,id:attachmentId+"-icon",style:attachmentIconStyles}),textCard&&renderer(textCard)]})]})]})},patchAttachment=function patchAttachment(card,newAttachment){var activity=card.activity,attachment=card.attachment,patchedAttachment=Object.assign({},attachment);patchedAttachment.contentType=newAttachment.contentType,patchedAttachment.thumbnailUrl=newAttachment.thumbnailUrl;var patchedAttachments=activity.attachments.map((function(target){return target===attachment?patchedAttachment:target})),patchedActivity=Object.assign({},activity);return patchedActivity.attachments=patchedAttachments,{activity:patchedActivity,attachment:patchedAttachment}},attachmentMiddleware_genPreviewCardWithAttachment=function genPreviewCardWithAttachment(card,iconData,next){var patchedTextCard=patchAttachment(card,{contentType:Constants.l.UnknownFileType,thumbnailUrl:void 0});return Object(jsx_runtime.jsx)(attachmentMiddleware_Attachment,{iconData:iconData,imageCard:card,textCard:patchedTextCard,renderer:next})};attachmentMiddleware_genPreviewCardWithAttachment.displayName="genPreviewCardWithAttachment";var renderingmiddlewares_attachmentMiddleware=function createAttachmentMiddleware(enableInlinePlaying){return function attachmentMiddleware(){return function(next){return function(){for(var _state$domainStates$r11,_state$domainStates$r12,_state$domainStates$r13,_state$domainStates$r14,_card$activity$channe,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(null==card||!card.activity)return next.apply(void 0,args);var attachments=card.activity.attachments,attachment=card.attachment;if(!attachments||!attachments.length||!attachment)return next.apply(void 0,args);var _ref9=attachment||{content:"",contentType:""},content=_ref9.content,contentType=_ref9.contentType,_ref10=content||{type:""},type=_ref10.type;if(!type&&content&&Constants.d.supportedAdaptiveCardContentTypes.indexOf(contentType)>=0)try{type=(content=JSON.parse(content)).type,card.attachment.content=content}catch(e){var errorData="Unable to parse the adaptive card format";cjs.BroadcastService.postMessage({eventName:BroadcastEvent.InvalidAdaptiveCardFormat,payload:{Message:errorData,ExceptionDetails:e}})}var _useChatContextStore3=hooks_useChatContextStore(),_useChatContextStore4=attachmentMiddleware_slicedToArray(_useChatContextStore3,1),state=_useChatContextStore4[0],attachmentId=null!==(_state$domainStates$r11=null===(_state$domainStates$r12=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r12||null===(_state$domainStates$r13=_state$domainStates$r12.attachmentProps)||void 0===_state$domainStates$r13?void 0:_state$domainStates$r13.adaptiveCardAttachmentId)&&void 0!==_state$domainStates$r11?_state$domainStates$r11:defaultAttachmentProps_adaptiveCardAttachmentId,atttachmentAdaptiveCardStyles=Object.assign({},defaultAttachmentAdaptiveCardStyles,null===(_state$domainStates$r14=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r14?void 0:_state$domainStates$r14.attachmentAdaptiveCardStyles);if(type===Constants.o.adaptiveCard||Constants.d.supportedAdaptiveCardContentTypes.indexOf(contentType)>=0)return Object(jsx_runtime.jsx)("div",{id:attachmentId,style:atttachmentAdaptiveCardStyles,children:next.apply(void 0,args)});null!==(_card$activity$channe=card.activity.channelData)&&void 0!==_card$activity$channe&&_card$activity$channe.middlewareData?attachment.contentUrl=card.activity.channelData.middlewareData[attachment.name]:null!=attachment&&attachment.tempContentUrl&&(attachment.contentUrl=attachment.tempContentUrl);var fileExtension=attachment.name.substring(attachment.name.lastIndexOf(".")+1,attachment.name.length)||attachment.name,imageExtension=Constants.d.imageRegex.test(attachment.name),audioExtension=Constants.d.audioMediaRegex.test(attachment.name),videoExtension=Constants.d.videoMediaRegex.test(attachment.name),iconData=FileAttachmentIconManager_getFileAttachmentIconData(fileExtension);if(imageExtension)return attachmentMiddleware_genPreviewCardWithAttachment(card,iconData,next);if(audioExtension||videoExtension)return enableInlinePlaying&&card.activity.actionType&&card.activity.actionType===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&FileAttachmentIconManager_isInlineMediaSupported(attachment.name)?attachmentMiddleware_genPreviewCardWithAttachment(card,iconData,next):Object(jsx_runtime.jsx)(attachmentMiddleware_Attachment,{iconData:iconData,textCard:patchAttachment(card,{contentType:Constants.l.UnknownFileType,thumbnailUrl:void 0}),renderer:next});var isUnknownImageObject=contentType.toLowerCase().includes("image")&&!imageExtension;return"txt"===fileExtension||isUnknownImageObject?Object(jsx_runtime.jsx)(attachmentMiddleware_Attachment,{iconData:iconData,textCard:patchAttachment(card,{contentType:Constants.l.UnknownFileType,thumbnailUrl:void 0}),renderer:next}):Object(jsx_runtime.jsx)(attachmentMiddleware_Attachment,{iconData:iconData,textCard:card,renderer:next})}}}};try{attachmentMiddleware.displayName="attachmentMiddleware",attachmentMiddleware.__docgenInfo={description:"",displayName:"attachmentMiddleware",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachmentMiddleware.tsx#attachmentMiddleware"]={docgenInfo:attachmentMiddleware.__docgenInfo,name:"attachmentMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachmentMiddleware.tsx#attachmentMiddleware"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.parse-int.js");var validateFileExtension=function validateFileExtension(attachment,allowedFileExtensions){if(!allowedFileExtensions)return!0;var fileName=attachment.name.toLowerCase(),index=fileName.lastIndexOf(".");if(!index)return!1;var fileExtension=fileName.substring(index);return(null==allowedFileExtensions?void 0:allowedFileExtensions.toLowerCase().split(",")).indexOf(fileExtension)>-1},validateFileSize=function validateFileSize(attachmentSize,maxUploadFileSize){return 1e6*maxUploadFileSize>parseInt(attachmentSize)},attachmentUploadValidatorMiddleware_getMaxUploadFileSize=function getMaxUploadFileSize(maxFileSizeSupportedByDynamicsStr,contentType){var maxFileSizeSupportedByDynamics=maxFileSizeSupportedByDynamicsStr&&parseInt(maxFileSizeSupportedByDynamicsStr)?parseInt(maxFileSizeSupportedByDynamicsStr):Constants.a.maxSupportedFileSize,amsAttachmentSizeLimit=attachmentUploadValidatorMiddleware_isImage(contentType)?Constants.a.maxSupportedImageSize:Constants.a.maxSupportedFileSize;return maxFileSizeSupportedByDynamics<amsAttachmentSizeLimit?maxFileSizeSupportedByDynamics:amsAttachmentSizeLimit},attachmentUploadValidatorMiddleware_isImage=function isImage(contentType){return Constants.a.supportedImagesMimeTypes.includes(contentType)},textEllipsis=function textEllipsis(str){var maxLength=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,ellipsis="...";return str.length>maxLength?str.slice(0,maxLength-ellipsis.length)+ellipsis:str},attachmentUploadValidatorMiddleware_buildErrorMessage=function buildErrorMessage(fileName,supportedFileExtension,supportedFileSize,fileIsEmpty,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _localizedTexts$MIDDL,errorMessage="";if(!fileName||!maxUploadFileSize)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided is null"}}),null!==(_localizedTexts$MIDDL=localizedTexts.MIDDLEWARE_BANNER_FILE_NULL_ERROR)&&void 0!==_localizedTexts$MIDDL?_localizedTexts$MIDDL:"";if(supportedFileExtension||supportedFileSize)if(supportedFileSize)if(supportedFileExtension)if(fileIsEmpty){var _errorMessage;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided is empty"}}),null!==(_errorMessage=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_IS_EMPTY_ERROR||"")&&void 0!==_errorMessage&&_errorMessage.includes("{2}")&&(errorMessage=errorMessage.replace("{2}",textEllipsis(fileName)))}else{var _localizedTexts$MIDDL2;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"Unexpected error: supportedFileExtension="+supportedFileExtension+" supportedFileSize="+supportedFileSize+" fileIsEmpty="+!fileIsEmpty}}),errorMessage=null!==(_localizedTexts$MIDDL2=localizedTexts.MIDDLEWARE_BANNER_ERROR_MESSAGE)&&void 0!==_localizedTexts$MIDDL2?_localizedTexts$MIDDL2:""}else errorMessage=attachmentUploadValidatorMiddleware_getFileExtensionErrorMessage(fileName,localizedTexts);else errorMessage=attachmentUploadValidatorMiddleware_getFileSizeErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts);else errorMessage=attachmentUploadValidatorMiddleware_getFileSizeAndFileExtensionErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts);return errorMessage},attachmentUploadValidatorMiddleware_getFileSizeAndFileExtensionErrorMessage=function getFileSizeAndFileExtensionErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _errorMessage3,errorMessage,exceptionDetails,index=fileName.lastIndexOf(".");if(index<0)errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_WITHOUT_EXTENSION_ERROR,exceptionDetails="File exceeded the allowed limit of "+maxUploadFileSize+" MB and File provided without file extension";else{var _errorMessage2,fileExtension=fileName.substring(index);null!==(_errorMessage2=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_EXTENSION_ERROR)&&void 0!==_errorMessage2&&_errorMessage2.includes("{1}")&&(errorMessage=errorMessage.replace("{1}",fileExtension)),exceptionDetails="File exceeds the allowed limit of "+maxUploadFileSize+" MB and "+fileExtension+" files are not supported"}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:exceptionDetails+" Dynamics file size limit="+maxFileSizeSupportedByDynamics+" AMS image size limit="+Constants.a.maxSupportedImageSize+" AMS file size limit="+Constants.a.maxSupportedFileSize}}),null!==(_errorMessage3=errorMessage)&&void 0!==_errorMessage3&&_errorMessage3.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",maxUploadFileSize)),errorMessage?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:""},attachmentUploadValidatorMiddleware_getFileExtensionErrorMessage=function getFileExtensionErrorMessage(fileName,localizedTexts){var errorMessage,index=fileName.lastIndexOf(".");if(index<0)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided without file extension"}}),(errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_WITHOUT_EXTENSION)?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:"";var _errorMessage4,_errorMessage5,fileExtension=fileName.substring(index);return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:fileExtension+" files extension is not supported."}}),null!==(_errorMessage4=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_EXTENSION_ERROR)&&void 0!==_errorMessage4&&_errorMessage4.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",fileExtension)),null!==(_errorMessage5=errorMessage)&&void 0!==_errorMessage5&&_errorMessage5.includes("{1}")&&(errorMessage=errorMessage.replace("{1}",fileExtension)),errorMessage&&errorMessage.length>0?errorMessage:""},attachmentUploadValidatorMiddleware_getFileSizeErrorMessage=function getFileSizeErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _errorMessage6;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File exceeds the allowed limit of "+maxUploadFileSize+"MB. Dynamics file size limit="+maxFileSizeSupportedByDynamics+" AMS image size limit="+Constants.a.maxSupportedImageSize+" AMS file size limit="+Constants.a.maxSupportedFileSize}});var errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_ERROR;return null!==(_errorMessage6=errorMessage)&&void 0!==_errorMessage6&&_errorMessage6.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",maxUploadFileSize)),errorMessage?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:""},attachmentUploadValidatorMiddleware=function createAttachmentUploadValidatorMiddleware(allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts){return function(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY){var _payload$activity,_payload$activity2,_payload$activity2$ch,_payload$activity3,_payload$activity3$at,_payload$activity4,_payload$activity4$ch,_payload$activity4$ch2,payload=action.payload;if(null!=payload&&null!==(_payload$activity=payload.activity)&&void 0!==_payload$activity&&_payload$activity.attachments&&null!=payload&&null!==(_payload$activity2=payload.activity)&&void 0!==_payload$activity2&&null!==(_payload$activity2$ch=_payload$activity2.channelData)&&void 0!==_payload$activity2$ch&&_payload$activity2$ch.attachmentSizes&&(null==payload||null===(_payload$activity3=payload.activity)||void 0===_payload$activity3||null===(_payload$activity3$at=_payload$activity3.attachments)||void 0===_payload$activity3$at?void 0:_payload$activity3$at.length)===(null==payload||null===(_payload$activity4=payload.activity)||void 0===_payload$activity4||null===(_payload$activity4$ch=_payload$activity4.channelData)||void 0===_payload$activity4$ch||null===(_payload$activity4$ch2=_payload$activity4$ch.attachmentSizes)||void 0===_payload$activity4$ch2?void 0:_payload$activity4$ch2.length))return next(function validateAttachment(action,allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts){var _action$payload,_action$payload$activ,_action$payload2,_action$payload2$acti,_action$payload2$acti2,_action$payload3,_action$payload3$acti,_action$payload3$acti2,attachments=null==action||null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ?void 0:_action$payload$activ.attachments,attachmentSizes=null==action||null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti||null===(_action$payload2$acti2=_action$payload2$acti.channelData)||void 0===_action$payload2$acti2?void 0:_action$payload2$acti2.attachmentSizes;if(attachments)for(var i=0;i<attachments.length;i++){var maxUploadFileSize=attachmentUploadValidatorMiddleware_getMaxUploadFileSize(maxFileSizeSupportedByDynamics,attachments[i].contentType),fileExtensionValid=validateFileExtension(attachments[i],allowedFileExtensions),fileSizeValid=validateFileSize(attachmentSizes[i],maxUploadFileSize),fileIsEmpty=0==parseInt(attachmentSizes[i]);fileExtensionValid&&fileSizeValid&&!fileIsEmpty||(NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.AttachmentError,attachmentUploadValidatorMiddleware_buildErrorMessage(attachments[i].name,fileExtensionValid,fileSizeValid,fileIsEmpty,maxUploadFileSize.toString(),maxFileSizeSupportedByDynamics,localizedTexts)),attachments.splice(i,1),attachmentSizes.splice(i,1),i--)}return(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti||null===(_action$payload3$acti2=_action$payload3$acti.attachments)||void 0===_action$payload3$acti2?void 0:_action$payload3$acti2.length)>0?action:{type:"",payload:null}}(action,allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts))}return next(action)}}}},defaultAvatarStyles={width:"32px",height:"32px",borderRadius:"16px",textAlign:"center",backgroundColor:"#315FA2"},defaultAvatarTextStyles={margin:"0",fontFamily:'"Segoe UI", Arial, sans-serif',fontWeight:600,fontSize:"13px",lineHeight:"18px",color:"white",paddingTop:"7px",WebkitUserSelect:"none",MozUserSelect:"none",userSelect:"none"},avatarMiddleware_createAvatarMiddleware=function createAvatarMiddleware(avatarStyleProps,avatarTextStyleProps){return function(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var params=args[0],_params$activity=params.activity,tags=_params$activity.channelData.tags,name=_params$activity.from.name,fromUser=params.fromUser;if(!1!==fromUser||tags&&tags.includes(Constants.d.systemMessageTag))return!1;var avatarStyles=Object.assign({},defaultAvatarStyles,avatarStyleProps),avatarTextStyles=Object.assign({},defaultAvatarTextStyles,avatarTextStyleProps);return function(){return Object(jsx_runtime.jsx)("div",{style:avatarStyles,children:Object(jsx_runtime.jsxs)("p",{style:avatarTextStyles,children:[" ",getIconText(name)," "]})})}}}}},conversationEndMiddleware=function createConversationEndMiddleware(conversationEndCallback){return function(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload;if((null==action?void 0:action.type)==WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.activity){var _activity$from,_activity$from2,_activity$channelData7,_activity$channelData8,_activity$channelData,_activity$channelData2,_activity$channelData3,_activity$channelData4,_activity$channelData5,_activity$channelData6,activity=action.payload.activity;if((null===(_activity$from=activity.from)||void 0===_activity$from?void 0:_activity$from.role)===DirectLineSenderRole.Bot&&"ACS_CHANNEL"===activity.channelId)null!==(_activity$channelData=activity.channelData)&&void 0!==_activity$channelData&&null!==(_activity$channelData2=_activity$channelData.tags)&&void 0!==_activity$channelData2&&_activity$channelData2.includes(Constants.d.systemMessageTag)&&(null!==(_activity$channelData3=activity.channelData)&&void 0!==_activity$channelData3&&null!==(_activity$channelData4=_activity$channelData3.tags)&&void 0!==_activity$channelData4&&_activity$channelData4.includes(Constants.d.agentEndConversationMessageTag)||null!==(_activity$channelData5=activity.channelData)&&void 0!==_activity$channelData5&&null!==(_activity$channelData6=_activity$channelData5.tags)&&void 0!==_activity$channelData6&&_activity$channelData6.includes(Constants.d.supervisorForceCloseMessageTag))&&conversationEndCallback();else if((null===(_activity$from2=activity.from)||void 0===_activity$from2?void 0:_activity$from2.role)===DirectLineSenderRole.Channel&&(null===(_activity$channelData7=activity.channelData)||void 0===_activity$channelData7?void 0:_activity$channelData7.type)===MessageTypes.Thread&&null!==(_activity$channelData8=activity.channelData)&&void 0!==_activity$channelData8&&_activity$channelData8.properties){var _activity$channelData9,_activity$channelData10,_activity$channelData11,_activity$channelData12;(null===(_activity$channelData9=activity.channelData)||void 0===_activity$channelData9||null===(_activity$channelData10=_activity$channelData9.properties)||void 0===_activity$channelData10?void 0:_activity$channelData10.isdeleted)!==Constants.d.truePascal&&null!==(_activity$channelData11=activity.channelData)&&void 0!==_activity$channelData11&&null!==(_activity$channelData12=_activity$channelData11.properties)&&void 0!==_activity$channelData12&&_activity$channelData12.containsExternalEntitiesListeningAll||conversationEndCallback()}}return next(action)}}}},dataMaskingMiddleware=function createDataMaskingMiddleware(dataMaskingInfo){return function(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload;if(function isMaskingforCustomer(maskingInfo){var _maskingInfo$setting;return!(!maskingInfo||0==Object.keys(maskingInfo).length||!maskingInfo.dataMaskingRules||0==Object.keys(maskingInfo.dataMaskingRules).length)&&(null===(_maskingInfo$setting=maskingInfo.setting)||void 0===_maskingInfo$setting||!_maskingInfo$setting.msdyn_maskforcustomer||maskingInfo.setting.msdyn_maskforcustomer)}(dataMaskingInfo)&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.text&&action.type===WebChatActionType.WEB_CHAT_SEND_MESSAGE){var regexCollection=null==dataMaskingInfo?void 0:dataMaskingInfo.dataMaskingRules;return next(function applyDataMasking(action,regexCollection){var text=action.payload.text;if(!regexCollection)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.InvalidConfiguration,ExceptionDetails:{ErrorDetails:"Invalid data masking rules"}}),action;for(var _i=0,_Object$keys=Object.keys(regexCollection);_i<_Object$keys.length;_i++){var ruleId=_Object$keys[_i],item=regexCollection[ruleId];if(item){var ruleInfiniteException=!1,ruleApplied=!1;try{for(var regex=new RegExp(item,"gi"),match=void 0;match=regex.exec(text);){var replaceStr=match[0].replace(/./gi,"#"),modifiedText=text.replace(match[0],replaceStr);if(modifiedText==text){ruleInfiniteException=!0,console.warn("The data masking rule "+item+" is ignored because it matches empty strings. Please modify this rule.");break}ruleApplied=!0,text=modifiedText}}catch(err){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DataMaskingRuleApplyFailed,ExceptionDetails:{RuleId:ruleId,Exception:err}})}ruleApplied&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.DataMaskingRuleApplied,Description:"Data Masking Rule Id: "+ruleId+" applied."}),ruleInfiniteException&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DataMaskingRuleApplyFailed,ExceptionDetails:{RuleId:ruleId,Exception:"The data masking rule matches empty strings."}})}}return action.payload.text=text,action}(action,regexCollection))}return next(action)}}}},markdown_it_for_inline=__webpack_require__("./node_modules/markdown-it-for-inline/index.js"),markdown_it_for_inline_default=__webpack_require__.n(markdown_it_for_inline),defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT="Opens in a new window; external.";function createMarkdown_toConsumableArray(arr){return function createMarkdown_arrayWithoutHoles(arr){if(Array.isArray(arr))return createMarkdown_arrayLikeToArray(arr)}(arr)||function createMarkdown_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function createMarkdown_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return createMarkdown_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return createMarkdown_arrayLikeToArray(o,minLen)}(arr)||function createMarkdown_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function createMarkdown_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var maxMessageSizeValidator=function createMaxMessageSizeValidator(localizedTexts){return function(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.WEB_CHAT_SET_SEND_BOX){var _action$payload,_action$payload$text;if(((null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$text=_action$payload.text)||void 0===_action$payload$text?void 0:_action$payload$text.length)||0)>Constants.o.maxTextLength)return NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.MaxSizeError,localizedTexts.MIDDLEWARE_MAX_CHARACTER_COUNT_EXCEEDED),next(action);NotificationHandler_NotificationHandler.dismissNotification(NotificationScenarios.MaxSizeError)}return next(action)}}}};var storemiddlewares_gifUploadMiddleware=function gifUploadMiddleware(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY){var _activity$attachments,_activity$channelData,_activity$channelData2,_activity$attachments2,activity=action.payload.activity;if((null==activity||null===(_activity$attachments=activity.attachments)||void 0===_activity$attachments?void 0:_activity$attachments.length)===(null==activity||null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData||null===(_activity$channelData2=_activity$channelData.attachmentSizes)||void 0===_activity$channelData2?void 0:_activity$channelData2.length))null==activity||null===(_activity$attachments2=activity.attachments)||void 0===_activity$attachments2||_activity$attachments2.forEach((function(attachment){var thumbnailUrl=attachment.thumbnailUrl,contentUrl=attachment.contentUrl;attachment.contentType===Constants.d.GifContentType&&thumbnailUrl!==contentUrl&&(attachment.thumbnailUrl=contentUrl)}))}return next(action)}}},htmlPlayerMiddleware_disableHTMLPlayerDownloadButton=function disableHTMLPlayerDownloadButton(htmlTag){setTimeout((function(){for(var elements=document.getElementsByTagName(htmlTag),index=0;index<elements.length;index++)if(elements[index].getAttribute(Constants.d.controlsList)){if(-1===elements[index].getAttribute(Constants.d.controlsList).indexOf(Constants.d.nodownload)){var currentControlsListValue=elements[index].getAttribute(Constants.d.controlsList);elements[index].setAttribute(Constants.d.controlsList,currentControlsListValue+" "+Constants.d.nodownload)}}else elements[index].setAttribute(Constants.d.controlsList,Constants.d.nodownload)}),500)},storemiddlewares_htmlPlayerMiddleware=function htmlPlayerMiddleware(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload,_action$payload$activ,_action$payload$activ2;return action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&(null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ||null===(_action$payload$activ2=_action$payload$activ.attachments)||void 0===_action$payload$activ2?void 0:_action$payload$activ2.length)>0&&(htmlPlayerMiddleware_disableHTMLPlayerDownloadButton(Constants.d.video),htmlPlayerMiddleware_disableHTMLPlayerDownloadButton(Constants.d.audio)),next(action)}}},purify=__webpack_require__("./node_modules/dompurify/dist/purify.js"),purify_default=__webpack_require__.n(purify),htmlTextMiddleware_processHTMLText=function processHTMLText(action,text){var htmlNode=function convertTextToHtmlNode(text){if(!text)return"";var element=document.createElement(Constants.g.div);try{text=purify_default.a.sanitize(text),element.innerHTML=text}catch(e){var errorMessage="Failed to purify and set innertHTML with text: "+text;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return element}(text),aNodes=htmlNode.getElementsByTagName(Constants.g.aTagName);if((null==aNodes?void 0:aNodes.length)>0)try{for(var index=0;index<aNodes.length;index++){var _aNode$tagName,aNode=aNodes[index];(null===(_aNode$tagName=aNode.tagName)||void 0===_aNode$tagName?void 0:_aNode$tagName.toLowerCase())===Constants.g.aTagName&&aNode.href&&(aNode.target&&aNode.target===Constants.d.blank||(aNode.target=Constants.d.blank),aNode.rel?(-1===aNode.rel.indexOf(Constants.g.noopenerTag)&&(aNode.rel+=" "+Constants.g.noopenerTag),-1===aNode.rel.indexOf(Constants.g.noreferrerTag)&&(aNode.rel+=" "+Constants.g.noreferrerTag)):aNode.rel=Constants.g.noopenerTag+" "+Constants.g.noreferrerTag)}action=window.simpleUpdateIn(action,[Constants.d.payload,Constants.d.activity,Constants.d.text],(function(){return htmlNode.innerHTML}))}catch(e){var errorMessage="Failed to apply action: ";try{errorMessage+=JSON.stringify(action)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return action},storemiddlewares_htmlTextMiddleware=function htmlTextMiddleware(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY)try{var _action$payload,_action$payload$activ,text=null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ?void 0:_action$payload$activ.text;text&&(action=htmlTextMiddleware_processHTMLText(action,text))}catch(e){var errorMessage="Failed to validate action.";try{errorMessage+=JSON.stringify(action)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return next(action)}}};function preProcessingMiddleware_regeneratorRuntime(){preProcessingMiddleware_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var CardActionType,storemiddlewares_preProcessingMiddleware=function preProcessingMiddleware(_ref){_ref.dispatch;return function(next){return function(){var _ref2=function preProcessingMiddleware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(preProcessingMiddleware_regeneratorRuntime().mark((function _callee(action){var activity;return preProcessingMiddleware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY&&((activity=action.payload.activity).from&&activity.from.role!==Constants.d.userMessageTag||(action=Object.assign({},action,{payload:Object.assign({},action.payload,{activity:Object.assign({},action.payload.activity,{textFormat:Constants.d.markdown})})}))),action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&action.payload.activity&&(action.payload.activity[Constants.d.actionType]=WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY),_context.abrupt("return",next(action));case 3:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()}},storemiddlewares_sanitizationMiddleware=function sanitizationMiddleware(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.WEB_CHAT_SEND_MESSAGE)try{var _action$payload,_DOMPurify$sanitize,text=null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.text;if(text)text=null!==(_DOMPurify$sanitize=purify_default.a.sanitize(text))&&void 0!==_DOMPurify$sanitize?_DOMPurify$sanitize:" "}catch(e){var copyDataForTelemetry=Object.assign({},action,{payload:Object.assign({},action.payload,{text:void 0})}),errorMessage="Failed to apply action: ";try{errorMessage+=JSON.stringify(copyDataForTelemetry)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingSanitizationMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return next(action)}}};!function(CardActionType){CardActionType.OpenUrl="openUrl",CardActionType.SignIn="signin"}(CardActionType||(CardActionType={}));var validCardActionTypes=[CardActionType.OpenUrl,CardActionType.SignIn],cardActionMiddleware_botOauthUrlRegex=/[\S]+.botframework.com\/api\/oauth\/signin\?signin=([\S]+)/,cardActionMiddleware_createCardActionMiddleware=function createCardActionMiddleware(botMagicCodeConfig){return function cardActionMiddleware(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(card.cardAction&&validCardActionTypes.indexOf(card.cardAction.type)>=0&&card.cardAction.value&&!0===(null==botMagicCodeConfig?void 0:botMagicCodeConfig.disabled)&&null!=botMagicCodeConfig&&botMagicCodeConfig.fwdUrl){var baseUrl=window.location.origin,result=cardActionMiddleware_botOauthUrlRegex.exec(card.cardAction.value);result&&(BotMagicCodeStore.botOAuthSignInId=""+result[1]),null!=botMagicCodeConfig&&botMagicCodeConfig.fwdUrl.startsWith(baseUrl)&&(card.cardAction.value+="&fwdUrl="+botMagicCodeConfig.fwdUrl)}return next.apply(void 0,args)}}}},messageTimestampMiddleware_isApplicable=function isApplicable(action){return action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&messageTimestampMiddleware_isPVAConversation(action)&&isPayloadValid(action)&&messageTimestampMiddleware_isValidChannel(action)},isPayloadValid=function isPayloadValid(action){var _action$payload;return null==action||null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.activity},messageTimestampMiddleware_isValidChannel=function isValidChannel(action){var _action$payload2,_action$payload2$acti;return(null==action||null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti?void 0:_action$payload2$acti.channelId)===Constants.d.acsChannel},messageTimestampMiddleware_isPVAConversation=function isPVAConversation(action){return!messageTimestampMiddleware_isTagIncluded(action,Constants.d.systemMessageTag)&&!messageTimestampMiddleware_isTagIncluded(action,Constants.d.publicMessageTag)&&!messageTimestampMiddleware_isRoleUserOn(action)},messageTimestampMiddleware_isTagIncluded=function isTagIncluded(action,tag){return messageTimestampMiddleware_isDataTagsPresent(action)&&action.payload.activity.channelData.tags.includes(tag)},messageTimestampMiddleware_isRoleUserOn=function isRoleUserOn(action){var _action$payload3,_action$payload3$acti,_action$payload3$acti2;return(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti||null===(_action$payload3$acti2=_action$payload3$acti.from)||void 0===_action$payload3$acti2?void 0:_action$payload3$acti2.role)===Constants.d.userMessageTag},isTimestampValid=function isTimestampValid(timeStamp){return/(\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(T)(\d{2})(:{1})(\d{2})(:{1})(\d{2})(.\d+)([Z]{1}))/.test(timeStamp)},messageTimestampMiddleware_isDataTagsPresent=function isDataTagsPresent(action){var _action$payload4,_action$payload4$acti,_action$payload4$acti2;return(null==action||null===(_action$payload4=action.payload)||void 0===_action$payload4||null===(_action$payload4$acti=_action$payload4.activity)||void 0===_action$payload4$acti||null===(_action$payload4$acti2=_action$payload4$acti.channelData)||void 0===_action$payload4$acti2?void 0:_action$payload4$acti2.tags)&&action.payload.activity.channelData.tags.length>0},messageTimestampMiddleware_evaluateTagsAndOverrideTimeStamp=function evaluateTagsAndOverrideTimeStamp(action){var tagValue=tagLookup(action,Constants.d.prefixTimestampTag);if(tagValue){var newTimestamp=messageTimestampMiddleware_extractTimeStamp(tagValue);action.payload.activity.timestamp=function overrideTimeStamp(timestampOriginal,timeStampNew){return isTimestampValid(timeStampNew)?timeStampNew:timestampOriginal}(action.payload.activity.timestamp,newTimestamp)}return action},messageTimestampMiddleware_extractTimeStamp=function extractTimeStamp(timeStamp){if(timeStamp&&timeStamp.length>0){var ts=timeStamp.split(Constants.d.prefixTimestampTag);if(ts&&ts.length>1)return ts[1]}return timeStamp},tagLookup=function tagLookup(action,tag){if(!messageTimestampMiddleware_isDataTagsPresent(action))return null;var value,tags=action.payload.activity.channelData.tags;if(tags&&tags.length>0)for(var i=0;i<tags.length;i++)if((value=tags[i])&&value.indexOf(tag)>-1)return value;return null},renderingmiddlewares_messageTimestampMiddleware=function createMessageTimeStampMiddleware(_ref){_ref.dispatch;return function(next){return function(action){return messageTimestampMiddleware_isApplicable(action)?next(messageTimestampMiddleware_evaluateTagsAndOverrideTimeStamp(action)):next(action)}}};try{messageTimestampMiddleware.displayName="messageTimestampMiddleware",messageTimestampMiddleware.__docgenInfo={description:"",displayName:"messageTimestampMiddleware",props:{dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageTimestampMiddleware.tsx#messageTimestampMiddleware"]={docgenInfo:messageTimestampMiddleware.__docgenInfo,name:"messageTimestampMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageTimestampMiddleware.tsx#messageTimestampMiddleware"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.string.trim.js");function HyperlinkTextOverrideRenderer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function HyperlinkTextOverrideRenderer_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var markdownrenderers_HyperlinkTextOverrideRenderer=function(){function HyperlinkTextOverrideRenderer(hyperlinkTextOverride){!function HyperlinkTextOverrideRenderer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HyperlinkTextOverrideRenderer),this.hyperlinkTextOverride=void 0,this.hyperlinkTextOverride=hyperlinkTextOverride}return function HyperlinkTextOverrideRenderer_createClass(Constructor,protoProps,staticProps){return protoProps&&HyperlinkTextOverrideRenderer_defineProperties(Constructor.prototype,protoProps),staticProps&&HyperlinkTextOverrideRenderer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(HyperlinkTextOverrideRenderer,[{key:"convertTextToHtmlNode",value:function convertTextToHtmlNode(text){var htmlNode=document.createElement(Constants.g.div);try{text=purify_default.a.sanitize(text),htmlNode.innerHTML=text}catch(_unused){return htmlNode}return htmlNode}},{key:"processANode",value:function processANode(htmlNode){for(var aTags=htmlNode.getElementsByTagName(Constants.g.aTagName),index=0;index<aTags.length;index++){var aNode=aTags[index];aNode&&aNode.tagName&&aNode.tagName.toLowerCase()===Constants.g.aTagName&&aNode.href&&(aNode.href!==aNode.text.trim()&&(aNode.text=aNode.href))}}},{key:"applicable",value:function applicable(text){if(!this.hyperlinkTextOverride)return!1;try{var aNodes=this.convertTextToHtmlNode(text).getElementsByTagName(Constants.g.aTagName);return!!aNodes&&aNodes.length&&aNodes.length>0}catch(_unused2){return!1}}},{key:"render",value:function render(text){if(!this.applicable(text))return text;var htmlNode=this.convertTextToHtmlNode(text);return this.processANode(htmlNode),text=htmlNode.innerHTML}}]),HyperlinkTextOverrideRenderer}();function initWebChatComposer_toConsumableArray(arr){return function initWebChatComposer_arrayWithoutHoles(arr){if(Array.isArray(arr))return initWebChatComposer_arrayLikeToArray(arr)}(arr)||function initWebChatComposer_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function initWebChatComposer_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return initWebChatComposer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return initWebChatComposer_arrayLikeToArray(o,minLen)}(arr)||function initWebChatComposer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function initWebChatComposer_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function initWebChatComposer_regeneratorRuntime(){initWebChatComposer_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var initWebChatComposer_initWebChatComposer=function initWebChatComposer(props,chatSDK,setAdapter,state,dispatch,adapter,setWebChatStyles){var _props$webChatContain,_props$webChatContain2,_props$webChatContain3,_props$webChatContain4,_props$webChatContain5,_props$webChatContain6,_props$webChatContain7,_state$domainStates$l4,_state$domainStates$l5,_props$webChatContain14,_props$webChatContain15,_state$domainStates$r,_state$domainStates$r2,_props$webChatContain16,_props$webChatContain17,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_props$webChatContain18,_props$webChatContain19,_defaultWebChatContai,_props$webChatContain20,_props$webChatContain21,_state$domainStates$r6,_state$domainStates$r7,_props$webChatContain22,_props$webChatContain23,_defaultWebChatContai2,_props$webChatContain24,_props$webChatContain25,_defaultWebChatContai3,_props$webChatContain26,_props$webChatContain27,localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.localizedTexts),hyperlinkTextOverride=null!==(_props$webChatContain2=null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3?void 0:_props$webChatContain3.hyperlinkTextOverride)&&void 0!==_props$webChatContain2?_props$webChatContain2:defaultWebChatContainerStatefulProps.hyperlinkTextOverride,disableNewLineMarkdownSupport=null!==(_props$webChatContain4=null===(_props$webChatContain5=props.webChatContainerProps)||void 0===_props$webChatContain5?void 0:_props$webChatContain5.disableNewLineMarkdownSupport)&&void 0!==_props$webChatContain4?_props$webChatContain4:defaultWebChatContainerStatefulProps.disableNewLineMarkdownSupport,markdown=function createMarkdown(disableMarkdownMessageFormatting,disableNewLineMarkdownSupport){var markdown;return disableMarkdownMessageFormatting?(markdown=new markdown_it_default.a(Constants.d.Zero,{html:!0,linkify:!0,breaks:!disableNewLineMarkdownSupport})).enable(["entity","linkify","html_block","html_inline","newline"]):markdown=new markdown_it_default.a(Constants.d.Default,{html:!0,linkify:!0,breaks:!disableNewLineMarkdownSupport}),markdown.use(markdown_it_for_inline_default.a,"url_new_win","link_open",(function(tokens,idx,env){var targetAttrIndex=tokens[idx].attrIndex(Constants.d.Target);~targetAttrIndex?tokens[idx].attrs[targetAttrIndex][1]=Constants.d.Blank:tokens[idx].attrPush([Constants.d.Target,Constants.d.Blank]);var relAttrIndex=tokens[idx].attrIndex(Constants.d.TargetRelationship);if(~relAttrIndex)tokens[idx].attrs[relAttrIndex][1]=Constants.d.TargetRelationshipAttributes;else if(tokens[idx].attrPush([Constants.d.TargetRelationship,Constants.d.TargetRelationshipAttributes]),!disableMarkdownMessageFormatting){tokens[idx].attrPush([Constants.d.Title,defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT]);var iconTokens=markdown.parseInline("!["+defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT+"](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",env)[0].children;iconTokens&&iconTokens.length>0&&(iconTokens[0].attrJoin("class",Constants.d.OpenLinkIconCssClass),tokens.splice.apply(tokens,[idx+2,0].concat(createMarkdown_toConsumableArray(iconTokens))))}})),markdown}(null!==(_props$webChatContain6=null===(_props$webChatContain7=props.webChatContainerProps)||void 0===_props$webChatContain7?void 0:_props$webChatContain7.disableMarkdownMessageFormatting)&&void 0!==_props$webChatContain6?_props$webChatContain6:defaultWebChatContainerStatefulProps.disableMarkdownMessageFormatting,disableNewLineMarkdownSupport),webChatStore=WebChatStoreLoader.store;if(!webChatStore){var _state$domainStates$l,_state$domainStates$l2,_state$domainStates$l3,_ref2,_props$webChatContain10,conversationEndCallback=function(){var _ref=function initWebChatComposer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(initWebChatComposer_regeneratorRuntime().mark((function _callee(){var _props$webChatContain8,_props$webChatContain9;return initWebChatComposer_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:!1!==(null==props||null===(_props$webChatContain8=props.webChatContainerProps)||void 0===_props$webChatContain8||null===(_props$webChatContain9=_props$webChatContain8.renderingMiddlewareProps)||void 0===_props$webChatContain9?void 0:_props$webChatContain9.hideSendboxOnConversationEnd)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})})),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED,payload:!0}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedThreadEventReceived,Description:"Conversation end by agent side or by timeout event received."});case 3:case"end":return _context.stop()}}),_callee)})));return function conversationEndCallback(){return _ref.apply(this,arguments)}}();webChatStore=botframework_webchat_lib.createStore.apply(void 0,[{},storemiddlewares_preProcessingMiddleware,storemiddlewares_attachmentProcessingMiddleware,attachmentUploadValidatorMiddleware(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l?void 0:_state$domainStates$l.allowedFileExtensions,null===(_state$domainStates$l2=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.maxUploadFileSize,localizedTexts),storemiddlewares_channelDataMiddleware,conversationEndMiddleware(conversationEndCallback),dataMaskingMiddleware(null===(_state$domainStates$l3=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l3?void 0:_state$domainStates$l3.DataMaskingInfo),renderingmiddlewares_messageTimestampMiddleware,storemiddlewares_gifUploadMiddleware,storemiddlewares_htmlPlayerMiddleware,storemiddlewares_htmlTextMiddleware,maxMessageSizeValidator(localizedTexts),storemiddlewares_sanitizationMiddleware].concat(initWebChatComposer_toConsumableArray(null!==(_ref2=null===(_props$webChatContain10=props.webChatContainerProps)||void 0===_props$webChatContain10?void 0:_props$webChatContain10.storeMiddlewares)&&void 0!==_ref2?_ref2:[]))),WebChatStoreLoader.store=webChatStore}var markdownRenderers=[new markdownrenderers_HyperlinkTextOverrideRenderer(hyperlinkTextOverride)];return Object.assign({},defaultWebChatContainerStatefulProps.webChatProps,{dir:state.domainStates.globalDir,locale:changeLanguageCodeFormatForWebChat(Object(lib.getLocaleStringFromId)(null===(_state$domainStates$l4=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l4||null===(_state$domainStates$l5=_state$domainStates$l4.ChatWidgetLanguage)||void 0===_state$domainStates$l5?void 0:_state$domainStates$l5.msdyn_localeid)),store:webChatStore,activityMiddleware:null!==(_props$webChatContain14=props.webChatContainerProps)&&void 0!==_props$webChatContain14&&null!==(_props$webChatContain15=_props$webChatContain14.renderingMiddlewareProps)&&void 0!==_props$webChatContain15&&_props$webChatContain15.disableActivityMiddleware?void 0:activityMiddleware_createActivityMiddleware(null===(_state$domainStates$r=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r?void 0:_state$domainStates$r.systemMessageStyleProps,null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.userMessageStyleProps),attachmentMiddleware:null!==(_props$webChatContain16=props.webChatContainerProps)&&void 0!==_props$webChatContain16&&null!==(_props$webChatContain17=_props$webChatContain16.renderingMiddlewareProps)&&void 0!==_props$webChatContain17&&_props$webChatContain17.disableAttachmentMiddleware?void 0:renderingmiddlewares_attachmentMiddleware(null!==(_state$domainStates$r3=null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4||null===(_state$domainStates$r5=_state$domainStates$r4.attachmentProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.enableInlinePlaying)&&void 0!==_state$domainStates$r3?_state$domainStates$r3:defaultAttachmentProps_enableInlinePlaying),activityStatusMiddleware:null!==(_props$webChatContain18=props.webChatContainerProps)&&void 0!==_props$webChatContain18&&null!==(_props$webChatContain19=_props$webChatContain18.renderingMiddlewareProps)&&void 0!==_props$webChatContain19&&_props$webChatContain19.disableActivityStatusMiddleware||null===(_defaultWebChatContai=defaultWebChatContainerStatefulProps.webChatProps)||void 0===_defaultWebChatContai?void 0:_defaultWebChatContai.activityStatusMiddleware,renderMarkdown:function renderMarkdown(text){var _props$webChatContain11,_props$webChatContain12;if(null!==(_props$webChatContain11=props.webChatContainerProps)&&void 0!==_props$webChatContain11&&null!==(_props$webChatContain12=_props$webChatContain11.webChatProps)&&void 0!==_props$webChatContain12&&_props$webChatContain12.renderMarkdown){var _props$webChatContain13;text=null===(_props$webChatContain13=props.webChatContainerProps)||void 0===_props$webChatContain13?void 0:_props$webChatContain13.webChatProps.renderMarkdown(text)}else{var render=disableNewLineMarkdownSupport?markdown.renderInline.bind(markdown):markdown.render.bind(markdown);text=render(text)}return markdownRenderers.forEach((function(renderer){text=renderer.render(text)})),text},avatarMiddleware:null!==(_props$webChatContain20=props.webChatContainerProps)&&void 0!==_props$webChatContain20&&null!==(_props$webChatContain21=_props$webChatContain20.renderingMiddlewareProps)&&void 0!==_props$webChatContain21&&_props$webChatContain21.disableAvatarMiddleware?void 0:avatarMiddleware_createAvatarMiddleware(null===(_state$domainStates$r6=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r6?void 0:_state$domainStates$r6.avatarStyleProps,null===(_state$domainStates$r7=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r7?void 0:_state$domainStates$r7.avatarTextStyleProps),groupActivitiesMiddleware:null!==(_props$webChatContain22=props.webChatContainerProps)&&void 0!==_props$webChatContain22&&null!==(_props$webChatContain23=_props$webChatContain22.renderingMiddlewareProps)&&void 0!==_props$webChatContain23&&_props$webChatContain23.disableGroupActivitiesMiddleware||null===(_defaultWebChatContai2=defaultWebChatContainerStatefulProps.webChatProps)||void 0===_defaultWebChatContai2?void 0:_defaultWebChatContai2.groupActivitiesMiddleware,typingIndicatorMiddleware:null!==(_props$webChatContain24=props.webChatContainerProps)&&void 0!==_props$webChatContain24&&null!==(_props$webChatContain25=_props$webChatContain24.renderingMiddlewareProps)&&void 0!==_props$webChatContain25&&_props$webChatContain25.disableTypingIndicatorMiddleware||null===(_defaultWebChatContai3=defaultWebChatContainerStatefulProps.webChatProps)||void 0===_defaultWebChatContai3?void 0:_defaultWebChatContai3.typingIndicatorMiddleware,onTelemetry:function handleTelemetry(event){var level=event.level;switch(level?level.toUpperCase():""){case LogLevel.DEBUG:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.DEBUG,event);break;case LogLevel.WARN:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.WARN,event);break;case LogLevel.ERROR:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.ERROR,event);break;case LogLevel.INFO:default:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.INFO,event)}},cardActionMiddleware:cardActionMiddleware_createCardActionMiddleware((null===(_props$webChatContain26=props.webChatContainerProps)||void 0===_props$webChatContain26?void 0:_props$webChatContain26.botMagicCode)||void 0),sendTypingIndicator:!0},null===(_props$webChatContain27=props.webChatContainerProps)||void 0===_props$webChatContain27?void 0:_props$webChatContain27.webChatProps)},defaultInternalTelemetryData={environmentVersion:"test",chatWidgetLocaleLCID:"1033",channelId:"lcw2.0"},defaultTelemetryConfiguration={telemetryDisabled:!1,disableConsoleLog:!1,telemetryLoggers:[],ariaConfigurations:defaultAriaConfig,chatWidgetVersion:"0.0.0-0",chatComponentVersion:"0.0.0-0",OCChatSDKVersion:"0.0.0-0"};function LiveChatWidgetStateful_regeneratorRuntime(){LiveChatWidgetStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function LiveChatWidgetStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function LiveChatWidgetStateful_slicedToArray(arr,i){return function LiveChatWidgetStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LiveChatWidgetStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LiveChatWidgetStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LiveChatWidgetStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LiveChatWidgetStateful_arrayLikeToArray(o,minLen)}(arr,i)||function LiveChatWidgetStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LiveChatWidgetStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LiveChatWidgetStateful_LiveChatWidgetStateful=function LiveChatWidgetStateful(props){var _props$webChatContain,_props$styleProps,_chatSDK$omnichannelC,_props$controlProps$w,_props$controlProps,_props$controlProps2,_props$webChatContain3,_ref5,_props$webChatContain4,_props$webChatContain5,_props$styleProps2,_props$controlProps15,_props$controlProps16,_props$componentOverr,_props$controlProps17,_props$componentOverr2,_props$controlProps18,_props$componentOverr3,_props$controlProps19,_props$componentOverr4,_props$controlProps20,_props$componentOverr5,_props$controlProps21,_props$componentOverr6,_props$controlProps22,_props$componentOverr7,_props$controlProps23,_props$controlProps24,_props$componentOverr8,_props$controlProps25,_props$componentOverr9,_props$controlProps26,_props$componentOverr10,_props$componentOverr11,_props$componentOverr12,_useChatContextStore2=LiveChatWidgetStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],_useChatAdapterStore2=LiveChatWidgetStateful_slicedToArray(hooks_useChatAdapterStore(),2),adapter=_useChatAdapterStore2[0],setAdapter=_useChatAdapterStore2[1],_useState2=LiveChatWidgetStateful_slicedToArray(Object(react.useState)(Object.assign({},defaultWebChatContainerStatefulProps.webChatStyles,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.webChatStyles)),2),webChatStyles=_useState2[0],setWebChatStyles=_useState2[1],chatSDK=hooks_useChatSDKStore(),_useState4=LiveChatWidgetStateful_slicedToArray(Object(react.useState)(void 0),2),voiceVideoCallingSDK=_useState4[0],setVoiceVideoCallingSDK=_useState4[1],Composer=botframework_webchat_lib.Components.Composer,canStartProactiveChat=Object(react.useRef)(!0),generalStyles={root:Object.assign({},getGeneralStylesForButton_getGeneralStylesForButton(state),null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyles)},scrollbarProps=Object.assign({},defaultScrollBarProps,null==props?void 0:props.scrollBarProps),broadcastServiceChannelName=function getBroadcastChannelName(widgetId,widgetInstanceId){return widgetInstanceId&&!isNullOrEmptyString(widgetInstanceId)?widgetInstanceId+"_"+widgetId:widgetId}(null==chatSDK||null===(_chatSDK$omnichannelC=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC?void 0:_chatSDK$omnichannelC.widgetId,null!==(_props$controlProps$w=null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:"");Object(cjs.BroadcastServiceInitialize)(broadcastServiceChannelName),TelemetryTimers.LcwLoadToChatButtonTimer=createTimer();var optionalParams,widgetElementId=(null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2?void 0:_props$controlProps2.id)||"oc-lcw",currentMessageCountRef=Object(react.useRef)(0),lastLWICheckTimeRef=Object(react.useRef)(0),widgetStateEventName="",activeCachedChatExist=!1,startChat=function(){var _ref=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee(props,localState){var isChatValid;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(isChatValid=!1,!0!==activeCachedChatExist){_context.next=16;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),localState&&(localState.appStates.conversationState=ConversationState.Loading),_context.next=6,checkIfConversationStillValid(chatSDK,dispatch,state);case 6:if(!0!==(isChatValid=_context.sent)){_context.next=16;break}if(!0!==isReconnectEnabled(props.chatConfig)){_context.next=13;break}return _context.next=11,handleChatReconnect(chatSDK,props,dispatch,setAdapter,startChat_initStartChat,state);case 11:if(state.appStates.conversationState!==ConversationState.Active&&state.appStates.conversationState!==ConversationState.ReconnectChat){_context.next=13;break}return _context.abrupt("return");case 13:return _context.next=15,startChat_initStartChat(chatSDK,dispatch,setAdapter,props,optionalParams);case 15:return _context.abrupt("return");case 16:if(!1!==isChatValid){_context.next=24;break}if(!localState){_context.next=23;break}return _context.next=20,setPreChatAndInitiateChat(chatSDK,dispatch,setAdapter,void 0,void 0,localState,props);case 20:return _context.abrupt("return");case 23:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed});case 24:case"end":return _context.stop()}}),_callee)})));return function startChat(_x2,_x3){return _ref.apply(this,arguments)}}(),setupClientDataStore=function setupClientDataStore(){if(void 0===props.contextDataStore){var _props$controlProps$c,_props$controlProps3,_chatSDK$omnichannelC2,_chatSDK$omnichannelC3,_props$controlProps$w2,_props$controlProps4,cacheTtlInMins=null!==(_props$controlProps$c=null==props||null===(_props$controlProps3=props.controlProps)||void 0===_props$controlProps3?void 0:_props$controlProps3.cacheTtlInMins)&&void 0!==_props$controlProps$c?_props$controlProps$c:Constants.d.CacheTtlInMinutes;DataStoreManager.clientDataStore=defaultClientDataStoreProvider_defaultClientDataStoreProvider(cacheTtlInMins),function registerBroadcastServiceForLocalStorage(orgid,widgetId,widgetInstanceId,ttlInMins){var widgetCacheId=utils_getWidgetCacheId(orgid,widgetId,widgetInstanceId);cjs.BroadcastService.getMessageByEventName(widgetCacheId).subscribe((function(msg){try{defaultClientDataStoreProvider_defaultClientDataStoreProvider(ttlInMins).setData(widgetCacheId,JSON.stringify(msg.payload),"localStorage")}catch(error){console.error("Error in setting data to localstorage",error)}}))}(null==chatSDK||null===(_chatSDK$omnichannelC2=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC2?void 0:_chatSDK$omnichannelC2.orgId,null==chatSDK||null===(_chatSDK$omnichannelC3=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC3?void 0:_chatSDK$omnichannelC3.widgetId,null!==(_props$controlProps$w2=null==props||null===(_props$controlProps4=props.controlProps)||void 0===_props$controlProps4?void 0:_props$controlProps4.widgetInstanceId)&&void 0!==_props$controlProps$w2?_props$controlProps$w2:"",cacheTtlInMins)}else DataStoreManager.clientDataStore=props.contextDataStore};Object(react.useEffect)((function(){var _props$controlProps5,_props$controlProps6,_props$controlProps7,_props$chatConfig,_props$chatConfig$Liv,_props$controlProps$d,_props$controlProps9,_props$chatConfig2,_props$chatConfig2$Ch,_props$controlProps8;(setupClientDataStore(),function registerTelemetryLoggers(props,dispatch){var _props$liveChatContex,_props$liveChatContex2,telemetryConfig=Object.assign({},defaultTelemetryConfiguration,props.telemetryConfig);if(null!==(_props$liveChatContex=props.liveChatContextFromCache)&&void 0!==_props$liveChatContex&&null!==(_props$liveChatContex2=_props$liveChatContex.domainStates)&&void 0!==_props$liveChatContex2&&_props$liveChatContex2.telemetryInternalData){var _props$liveChatContex3,_props$liveChatContex4;TelemetryManager.InternalTelemetryData=null===(_props$liveChatContex3=props.liveChatContextFromCache)||void 0===_props$liveChatContex3||null===(_props$liveChatContex4=_props$liveChatContex3.domainStates)||void 0===_props$liveChatContex4?void 0:_props$liveChatContex4.telemetryInternalData}else{var _telemetryConfig$OCCh,_telemetryConfig$chat,_telemetryConfig$chat2,_props$chatSDK,_props$chatSDK$omnich,_props$chatSDK2,_props$chatSDK2$omnic,_props$chatSDK3,_props$chatSDK3$omnic,telemetryData=Object.assign({},defaultInternalTelemetryData,{telemetryConfig:Object.assign({},defaultTelemetryConfiguration,telemetryConfig),ariaConfig:Object.assign({},defaultAriaConfig,null==telemetryConfig?void 0:telemetryConfig.ariaConfigurations)});props.chatConfig&&(telemetryData=TelemetryHelper_TelemetryHelper.addChatConfigDataToTelemetry(null==props?void 0:props.chatConfig,telemetryData)),(telemetryData=TelemetryHelper_TelemetryHelper.addWidgetDataToTelemetry(telemetryConfig,telemetryData)).OCChatSDKVersion=null!==(_telemetryConfig$OCCh=telemetryConfig.OCChatSDKVersion)&&void 0!==_telemetryConfig$OCCh?_telemetryConfig$OCCh:"0.0.0-0",telemetryData.chatComponentVersion=null!==(_telemetryConfig$chat=telemetryConfig.chatComponentVersion)&&void 0!==_telemetryConfig$chat?_telemetryConfig$chat:"0.0.0-0",telemetryData.chatWidgetVersion=null!==(_telemetryConfig$chat2=telemetryConfig.chatWidgetVersion)&&void 0!==_telemetryConfig$chat2?_telemetryConfig$chat2:"0.0.0-0",telemetryData.orgId=null===(_props$chatSDK=props.chatSDK)||void 0===_props$chatSDK||null===(_props$chatSDK$omnich=_props$chatSDK.omnichannelConfig)||void 0===_props$chatSDK$omnich?void 0:_props$chatSDK$omnich.orgId,telemetryData.widgetId=null===(_props$chatSDK2=props.chatSDK)||void 0===_props$chatSDK2||null===(_props$chatSDK2$omnic=_props$chatSDK2.omnichannelConfig)||void 0===_props$chatSDK2$omnic?void 0:_props$chatSDK2$omnic.widgetId,telemetryData.orgUrl=null===(_props$chatSDK3=props.chatSDK)||void 0===_props$chatSDK3||null===(_props$chatSDK3$omnic=_props$chatSDK3.omnichannelConfig)||void 0===_props$chatSDK3$omnic?void 0:_props$chatSDK3$omnic.orgUrl,TelemetryManager.InternalTelemetryData=telemetryData,dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData})}TelemetryManager_RegisterLoggers()}(props,dispatch),createInternetConnectionChangeHandler(),dispatch({type:LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID,payload:widgetElementId}),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY,payload:(null===(_props$controlProps5=props.controlProps)||void 0===_props$controlProps5?void 0:_props$controlProps5.hideStartChatButton)||!1}),dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!1}),null!==(_props$controlProps6=props.controlProps)&&void 0!==_props$controlProps6&&_props$controlProps6.widgetInstanceId&&!isNullOrEmptyString(null===(_props$controlProps7=props.controlProps)||void 0===_props$controlProps7?void 0:_props$controlProps7.widgetInstanceId))&&dispatch({type:LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID,payload:null===(_props$controlProps8=props.controlProps)||void 0===_props$controlProps8?void 0:_props$controlProps8.widgetInstanceId});(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv?void 0:_props$chatConfig$Liv.msdyn_callingoptions)!==Constants.e.NoCalling&&initCallingSdk(chatSDK,setVoiceVideoCallingSDK).then((function(sdkCreated){sdkCreated&&dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!0})})),props.initialCustomContext&&dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:props.initialCustomContext});var globalDir=null!==(_props$controlProps$d=null===(_props$controlProps9=props.controlProps)||void 0===_props$controlProps9?void 0:_props$controlProps9.dir)&&void 0!==_props$controlProps$d?_props$controlProps$d:function getLocaleDirection(localeLCID){return-1===Constants.k.RTL_LOCALES.indexOf(localeLCID)?"ltr":"rtl"}(null===(_props$chatConfig2=props.chatConfig)||void 0===_props$chatConfig2||null===(_props$chatConfig2$Ch=_props$chatConfig2.ChatWidgetLanguage)||void 0===_props$chatConfig2$Ch?void 0:_props$chatConfig2$Ch.msdyn_localeid);dispatch({type:LiveChatWidgetActionType.SET_GLOBAL_DIR,payload:globalDir}),function setOptionalParams(){var _state$appStates,_state$domainStates;if(isUndefinedOrEmpty(null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.reconnectId))if(isUndefinedOrEmpty(null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.liveChatContext))activeCachedChatExist=!1,optionalParams={};else{var _state$domainStates2;activeCachedChatExist=!0,optionalParams={liveChatContext:null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.liveChatContext}}else activeCachedChatExist=!0,optionalParams={reconnectId:state.appStates.reconnectId}}(),!1===state.appStates.hideStartChatButton&&startChat(props)}),[]),Object(react.useEffect)((function(){!0===state.appStates.hideStartChatButton&&(cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatInitiated}),startChat(props,state))}),[state.appStates.hideStartChatButton]),Object(react.useEffect)((function(){var _chatSDK$omnichannelC8,_chatSDK$omnichannelC9,_props$controlProps$w5,_props$controlProps13;cjs.BroadcastService.getMessageByEventName(BroadcastEvent.SetCustomContext).subscribe((function(msg){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomContextReceived,Description:"CustomContext received."}),dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:null==msg?void 0:msg.payload})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.StartProactiveChat).subscribe((function(msg){var _msg$payload,_msg$payload2,_msg$payload3;(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.StartProactiveChatEventReceived,Description:"Start proactive chat event received."}),!0===canStartProactiveChat.current)?function startProactiveChat(dispatch,notificationConfig,enablePreChat,inNewWindow){dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:notificationConfig&&notificationConfig.message?notificationConfig.message:"",proactiveChatEnablePrechat:null!=enablePreChat&&enablePreChat,proactiveChatInNewWindow:null!=inNewWindow&&inNewWindow}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.ProactiveChat}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.IncomingProactiveChatScreenLoaded,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed,Description:"Incoming proactive chat loaded."})}(dispatch,null==msg||null===(_msg$payload=msg.payload)||void 0===_msg$payload?void 0:_msg$payload.notificationConfig,null==msg||null===(_msg$payload2=msg.payload)||void 0===_msg$payload2?void 0:_msg$payload2.enablePreChat,null==msg||null===(_msg$payload3=msg.payload)||void 0===_msg$payload3?void 0:_msg$payload3.inNewWindow):TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatAlreadyTriggered,Description:"Start proactive chat method called, when chat was already triggered."})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.HideChatVisibilityChangeEvent).subscribe(function(){var _ref2=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee2(event){var _event$payload,_props$controlProps10,_event$payload2,dateNow,conversationDetails;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(void 0===(null==event||null===(_event$payload=event.payload)||void 0===_event$payload?void 0:_event$payload.isChatHidden)){_context2.next=9;break}if(null!==(_props$controlProps10=props.controlProps)&&void 0!==_props$controlProps10&&_props$controlProps10.hideStartChatButton&&dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:null==event||null===(_event$payload2=event.payload)||void 0===_event$payload2?void 0:_event$payload2.isChatHidden}),!((dateNow=Date.now())-lastLWICheckTimeRef.current>Constants.d.LWICheckOnVisibilityTimeout)){_context2.next=9;break}return _context2.next=6,getConversationDetailsCall(chatSDK);case 6:conversationDetails=_context2.sent,lastLWICheckTimeRef.current=dateNow,(null==conversationDetails?void 0:conversationDetails.state)!==Constants.j.WrapUp&&(null==conversationDetails?void 0:conversationDetails.state)!==Constants.j.Closed||(dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!0}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:"Chat disconnected due to timeout, left or removed."}));case 9:case"end":return _context2.stop()}}),_callee2)})));return function(_x4){return _ref2.apply(this,arguments)}}()),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.StartChat).subscribe((function(){var _chatSDK$omnichannelC4,_chatSDK$omnichannelC5,_props$controlProps$w3,_props$controlProps11;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.StartChatEventRecevied,Description:"Start chat event received."});var persistedState=utils_getStateFromCache(null==chatSDK||null===(_chatSDK$omnichannelC4=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC4?void 0:_chatSDK$omnichannelC4.orgId,null==chatSDK||null===(_chatSDK$omnichannelC5=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC5?void 0:_chatSDK$omnichannelC5.widgetId,null!==(_props$controlProps$w3=null==props||null===(_props$controlProps11=props.controlProps)||void 0===_props$controlProps11?void 0:_props$controlProps11.widgetInstanceId)&&void 0!==_props$controlProps$w3?_props$controlProps$w3:"");if(void 0===persistedState)return cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatInitiated}),void prepareStartChat(props,chatSDK,state,dispatch,setAdapter);if(persistedState){var _persistedState$domai,_persistedState$domai2,_persistedState$domai3,_persistedState$domai4;if(persistedState.appStates.conversationState===ConversationState.Closed||persistedState.appStates.conversationState===ConversationState.InActive||persistedState.appStates.conversationState===ConversationState.Postchat)return cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatInitiated}),void prepareStartChat(props,chatSDK,state,dispatch,setAdapter);dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.MaximizeChat,payload:{height:null==persistedState||null===(_persistedState$domai=persistedState.domainStates)||void 0===_persistedState$domai||null===(_persistedState$domai2=_persistedState$domai.widgetSize)||void 0===_persistedState$domai2?void 0:_persistedState$domai2.height,width:null==persistedState||null===(_persistedState$domai3=persistedState.domainStates)||void 0===_persistedState$domai3||null===(_persistedState$domai4=_persistedState$domai3.widgetSize)||void 0===_persistedState$domai4?void 0:_persistedState$domai4.width}})}})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.InitiateEndChat).subscribe(LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee3(){var _chatSDK$omnichannelC6,_chatSDK$omnichannelC7,_props$controlProps$w4,_props$controlProps12,persistedState;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:!1===state.appStates.hideStartChatButton&&((persistedState=utils_getStateFromCache(null==chatSDK||null===(_chatSDK$omnichannelC6=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC6?void 0:_chatSDK$omnichannelC6.orgId,null==chatSDK||null===(_chatSDK$omnichannelC7=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC7?void 0:_chatSDK$omnichannelC7.widgetId,null!==(_props$controlProps$w4=null==props||null===(_props$controlProps12=props.controlProps)||void 0===_props$controlProps12?void 0:_props$controlProps12.widgetInstanceId)&&void 0!==_props$controlProps$w4?_props$controlProps$w4:""))&&persistedState.appStates.conversationState===ConversationState.Active?prepareEndChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state):(!0,!1,endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,true,false))),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.CloseChat});case 2:case"end":return _context3.stop()}}),_callee3)})))),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.InitiateEndChatOnBrowserUnload).subscribe((function(){initiateEndChatOnBrowserUnload()}));var endChatEventName=utils_getWidgetEndChatEventName(null==chatSDK||null===(_chatSDK$omnichannelC8=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC8?void 0:_chatSDK$omnichannelC8.orgId,null==chatSDK||null===(_chatSDK$omnichannelC9=chatSDK.omnichannelConfig)||void 0===_chatSDK$omnichannelC9?void 0:_chatSDK$omnichannelC9.widgetId,null!==(_props$controlProps$w5=null===(_props$controlProps13=props.controlProps)||void 0===_props$controlProps13?void 0:_props$controlProps13.widgetInstanceId)&&void 0!==_props$controlProps$w5?_props$controlProps$w5:"");return cjs.BroadcastService.getMessageByEventName(endChatEventName).subscribe(LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee4(){return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!1),_context4.abrupt("return");case 2:case"end":return _context4.stop()}}),_callee4)})))),state.appStates.conversationEndedBy===ConversationEndEntity.Agent&&endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter),cjs.BroadcastService.getMessageByEventName("WidgetSize").subscribe((function(msg){dispatch({type:LiveChatWidgetActionType.SET_WIDGET_SIZE,payload:null==msg?void 0:msg.payload})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.RaiseErrorEvent).subscribe((function(){dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0})})),function(){disposeTelemetryLoggers_disposeTelemetryLoggers()}}),[]),Object(react.useEffect)((function(){state.appStates.conversationState===ConversationState.Active&&(null==chatSDK||chatSDK.onNewMessage((function(){currentMessageCountRef.current++,dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:currentMessageCountRef.current+1}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.NewMessageNotification})})))}),[state.appStates.conversationState]),Object(react.useEffect)((function(){canStartProactiveChat.current=state.appStates.conversationState===ConversationState.Closed&&!state.appStates.proactiveChatStates.proactiveChatInNewWindow}),[state.appStates.conversationState,state.appStates.proactiveChatStates.proactiveChatInNewWindow]),Object(react.useEffect)((function(){state.appStates.isMinimized?ActivityStreamHandler_ActivityStreamHandler.cork():setTimeout((function(){return ActivityStreamHandler_ActivityStreamHandler.uncork()}),500),currentMessageCountRef.current=-1,dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0});var customEvent={elementType:cjs.ElementType.Custom,eventName:BroadcastEvent.UnreadMessageCount,payload:0};cjs.BroadcastService.postMessage(customEvent)}),[state.appStates.isMinimized]),Object(react.useEffect)((function(){if(!0===state.appStates.isMinimized&&state.appStates.unreadMessageCount>0){var customEvent={elementType:cjs.ElementType.Custom,eventName:BroadcastEvent.UnreadMessageCount,payload:""+state.appStates.unreadMessageCount};cjs.BroadcastService.postMessage(customEvent)}}),[state.appStates.unreadMessageCount]),Object(react.useEffect)((function(){var _props$webChatContain2;setWebChatStyles(Object.assign({},webChatStyles,null===(_props$webChatContain2=props.webChatContainerProps)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.webChatStyles))}),[null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3?void 0:_props$webChatContain3.webChatStyles]),Object(react.useEffect)((function(){var _props$chatSDK,_props$chatSDK$omnich,_props$chatSDK2,_props$chatSDK2$omnic,_props$controlProps$w6,_props$controlProps14,chatWidgetStateChangeEvent={eventName:widgetStateEventName=utils_getWidgetCacheId(null==props||null===(_props$chatSDK=props.chatSDK)||void 0===_props$chatSDK||null===(_props$chatSDK$omnich=_props$chatSDK.omnichannelConfig)||void 0===_props$chatSDK$omnich?void 0:_props$chatSDK$omnich.orgId,null==props||null===(_props$chatSDK2=props.chatSDK)||void 0===_props$chatSDK2||null===(_props$chatSDK2$omnic=_props$chatSDK2.omnichannelConfig)||void 0===_props$chatSDK2$omnic?void 0:_props$chatSDK2$omnic.widgetId,null!==(_props$controlProps$w6=null==props||null===(_props$controlProps14=props.controlProps)||void 0===_props$controlProps14?void 0:_props$controlProps14.widgetInstanceId)&&void 0!==_props$controlProps$w6?_props$controlProps$w6:""),payload:Object.assign({},state)};cjs.BroadcastService.postMessage(chatWidgetStateChangeEvent)}),[state]),Object(react.useEffect)((function(){void 0!==state.appStates.conversationEndedBy&&prepareEndChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,state)}),[state.appStates.conversationEndedBy]),Object(react.useEffect)((function(){state.appStates.conversationEndedByAgentEventReceived&&function handleAgentEndConversation(props,state,dispatch){setPostChatContextAndLoadSurvey_checkPostChatEnabled(props,state)&&state.appStates.postChatWorkflowInProgress||(dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:ConversationEndEntity.Agent}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedByAgent,Description:"Conversation is ended from agent side"}))}(props,state,dispatch)}),[state.appStates.conversationEndedByAgentEventReceived]),Object(react.useEffect)((function(){state.appStates.chatDisconnectEventReceived&&function handleChatDisconnect(props,state,setWebChatStyles){var _state$appStates,_props$webChatContain,_props$webChatContain2;null!=state&&null!==(_state$appStates=state.appStates)&&void 0!==_state$appStates&&_state$appStates.chatDisconnectEventReceived&&(!1!==(null==props||null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain||null===(_props$webChatContain2=_props$webChatContain.renderingMiddlewareProps)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.hideSendboxOnConversationEnd)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})})),NotificationHandler_NotificationHandler.notifyWarning(NotificationScenarios.ChatDisconnect,defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_CHAT_DISCONNECT),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:"Chat disconnected due to timeout, left or removed."}))}(props,state,setWebChatStyles)}),[state.appStates.chatDisconnectEventReceived]);var initiateEndChatOnBrowserUnload=function initiateEndChatOnBrowserUnload(){var _DataStoreManager$cli;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.BrowserUnloadEventStarted,Description:"Browser unload event received."}),endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,!1,!1,!1),null===(_DataStoreManager$cli=DataStoreManager.clientDataStore)||void 0===_DataStoreManager$cli||_DataStoreManager$cli.removeData(widgetStateEventName,"localStorage"),voiceVideoCallingSDK&&(null==voiceVideoCallingSDK||voiceVideoCallingSDK.close()),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ClosePopoutWindow})},webChatProps=initWebChatComposer_initWebChatComposer(props,0,0,state,dispatch,0,setWebChatStyles),prepareStartChatRelay=function prepareStartChatRelay(){return prepareStartChat(props,chatSDK,state,dispatch,setAdapter)},initStartChatRelay=function initStartChatRelay(optionalParams,persistedState){return startChat_initStartChat(chatSDK,dispatch,setAdapter,props,optionalParams,persistedState)},confirmationPaneProps=function initConfirmationPropsComposer(props){var _props$confirmationPa,_props$footerProps$co,_props$footerProps,_props$footerProps$co2,_props$footerProps$co3,_props$footerProps2,_props$footerProps2$c,_props$confirmationPa2,confirmationPaneInputs,confirmationPanelocalizedTexts=Object.assign({},defaultConfirmationPaneLocalizedTexts,null==props||null===(_props$confirmationPa=props.confirmationPaneProps)||void 0===_props$confirmationPa?void 0:_props$confirmationPa.confirmationPaneLocalizedTexts),emailTranscriptDisabled=null!==(_props$footerProps$co=null===(_props$footerProps=props.footerProps)||void 0===_props$footerProps||null===(_props$footerProps$co2=_props$footerProps.controlProps)||void 0===_props$footerProps$co2?void 0:_props$footerProps$co2.hideEmailTranscriptButton)&&void 0!==_props$footerProps$co&&_props$footerProps$co,downloadTranscriptDisabled=null!==(_props$footerProps$co3=null===(_props$footerProps2=props.footerProps)||void 0===_props$footerProps2||null===(_props$footerProps2$c=_props$footerProps2.controlProps)||void 0===_props$footerProps2$c?void 0:_props$footerProps2$c.hideDownloadTranscriptButton)&&void 0!==_props$footerProps$co3&&_props$footerProps$co3;return confirmationPaneInputs=emailTranscriptDisabled||downloadTranscriptDisabled?emailTranscriptDisabled&&!downloadTranscriptDisabled?{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_DOWNLOAD_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_DOWNLOAD_TRANSCRIPT_ENABLED}:!emailTranscriptDisabled&&downloadTranscriptDisabled?{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_TRANSCRIPT_ENABLED}:{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_DEFAULT,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_DEFAULT}:{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED},Object.assign({},props.confirmationPaneProps,{controlProps:Object.assign({titleText:confirmationPaneInputs.title,subtitleText:confirmationPaneInputs.description},null===(_props$confirmationPa2=props.confirmationPaneProps)||void 0===_props$confirmationPa2?void 0:_props$confirmationPa2.controlProps)})}(props);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n            ::-webkit-scrollbar {\n                width: "+scrollbarProps.width+";\n            }\n            \n            ::-webkit-scrollbar-track {\n                background: "+scrollbarProps.trackBackgroundColor+";\n            }\n            \n            ::-webkit-scrollbar-thumb {\n                background: "+scrollbarProps.thumbBackgroundColor+";\n                border-radius: "+scrollbarProps.thumbBorderRadius+";\n            }\n            \n            ::-webkit-scrollbar-thumb:hover {\n                background: "+scrollbarProps.thumbHoverColor+";\n            } \n            "}),Object(jsx_runtime.jsx)(Composer,Object.assign({},webChatProps,{styleOptions:webChatStyles,directLine:null!==(_ref5=null!==(_props$webChatContain4=null===(_props$webChatContain5=props.webChatContainerProps)||void 0===_props$webChatContain5?void 0:_props$webChatContain5.directLine)&&void 0!==_props$webChatContain4?_props$webChatContain4:adapter)&&void 0!==_ref5?_ref5:defaultWebChatContainerStatefulProps.directLine,children:Object(jsx_runtime.jsxs)(Stack.a,{id:widgetElementId,styles:generalStyles,className:null===(_props$styleProps2=props.styleProps)||void 0===_props$styleProps2?void 0:_props$styleProps2.className,children:[!(null!==(_props$controlProps15=props.controlProps)&&void 0!==_props$controlProps15&&_props$controlProps15.hideChatButton)&&!(null!==(_props$controlProps16=props.controlProps)&&void 0!==_props$controlProps16&&_props$controlProps16.hideStartChatButton)&&componentController_shouldShowChatButton(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr=props.componentOverrides)||void 0===_props$componentOverr?void 0:_props$componentOverr.chatButton)||Object(jsx_runtime.jsx)(chatbuttonstateful_ChatButtonStateful,{buttonProps:props.chatButtonProps,outOfOfficeButtonProps:props.outOfOfficeChatButtonProps,startChat:prepareStartChatRelay})),!(null!==(_props$controlProps17=props.controlProps)&&void 0!==_props$controlProps17&&_props$controlProps17.hideProactiveChatPane)&&componentController_shouldShowProactiveChatPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr2=props.componentOverrides)||void 0===_props$componentOverr2?void 0:_props$componentOverr2.proactiveChatPane)||Object(jsx_runtime.jsx)(proactivechatpanestateful_ProactiveChatPaneStateful,{proactiveChatProps:props.proactiveChatPaneProps,startChat:prepareStartChatRelay})),!(null!==(_props$controlProps18=props.controlProps)&&void 0!==_props$controlProps18&&_props$controlProps18.hideHeader)&&componentController_shouldShowHeader(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr3=props.componentOverrides)||void 0===_props$componentOverr3?void 0:_props$componentOverr3.header)||Object(jsx_runtime.jsx)(headerstateful_HeaderStateful,{headerProps:props.headerProps,outOfOfficeHeaderProps:props.outOfOfficeHeaderProps,endChat:function endChatRelay(adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab){return endChat_endChat(props,chatSDK,setAdapter,setWebChatStyles,dispatch,adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab)}})),!(null!==(_props$controlProps19=props.controlProps)&&void 0!==_props$controlProps19&&_props$controlProps19.hideLoadingPane)&&componentController_shouldShowLoadingPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr4=props.componentOverrides)||void 0===_props$componentOverr4?void 0:_props$componentOverr4.loadingPane)||Object(jsx_runtime.jsx)(loadingpanestateful_LoadingPaneStateful,{loadingPaneProps:props.loadingPaneProps,startChatErrorPaneProps:props.startChatErrorPaneProps})),!(null!==(_props$controlProps20=props.controlProps)&&void 0!==_props$controlProps20&&_props$controlProps20.hideOutOfOfficeHoursPane)&&componentController_shouldShowOutOfOfficeHoursPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr5=props.componentOverrides)||void 0===_props$componentOverr5?void 0:_props$componentOverr5.outOfOfficeHoursPane)||Object(jsx_runtime.jsx)(ooohpanestateful_OOOHPaneStateful,Object.assign({},props.outOfOfficeHoursPaneProps))),!(null!==(_props$controlProps21=props.controlProps)&&void 0!==_props$controlProps21&&_props$controlProps21.hideReconnectChatPane)&&componentController_shouldShowReconnectChatPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr6=props.componentOverrides)||void 0===_props$componentOverr6?void 0:_props$componentOverr6.reconnectChatPane)||Object(jsx_runtime.jsx)(reconnectchatpanestateful_ReconnectChatPaneStateful,{reconnectChatProps:props.reconnectChatPaneProps,initStartChat:initStartChatRelay})),!(null!==(_props$controlProps22=props.controlProps)&&void 0!==_props$controlProps22&&_props$controlProps22.hidePreChatSurveyPane)&&componentController_shouldShowPreChatSurveyPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr7=props.componentOverrides)||void 0===_props$componentOverr7?void 0:_props$componentOverr7.preChatSurveyPane)||Object(jsx_runtime.jsx)(prechatsurveypanestateful_PreChatSurveyPaneStateful,{surveyProps:props.preChatSurveyPaneProps,initStartChat:initStartChatRelay})),!(null!==(_props$controlProps23=props.controlProps)&&void 0!==_props$controlProps23&&_props$controlProps23.hideCallingContainer)&&componentController_shouldShowCallingContainer(state)&&Object(jsx_runtime.jsx)(callingcontainerstateful_CallingContainerStateful,Object.assign({voiceVideoCallingSdk:voiceVideoCallingSDK},props.callingContainerProps)),!(null!==(_props$controlProps24=props.controlProps)&&void 0!==_props$controlProps24&&_props$controlProps24.hideWebChatContainer)&&componentController_shouldShowWebChatContainer(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr8=props.componentOverrides)||void 0===_props$componentOverr8?void 0:_props$componentOverr8.webChatContainer)||Object(jsx_runtime.jsx)(webchatcontainerstateful_WebChatContainerStateful,Object.assign({},props.webChatContainerProps))),!(null!==(_props$controlProps25=props.controlProps)&&void 0!==_props$controlProps25&&_props$controlProps25.hideConfirmationPane)&&shouldShowConfirmationPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr9=props.componentOverrides)||void 0===_props$componentOverr9?void 0:_props$componentOverr9.confirmationPane)||Object(jsx_runtime.jsx)(confirmationpanestateful_ConfirmationPaneStateful,Object.assign({},confirmationPaneProps,{setPostChatContext:function setPostChatContextRelay(){return setPostChatContextAndLoadSurvey(chatSDK,dispatch)}}))),!(null!==(_props$controlProps26=props.controlProps)&&void 0!==_props$controlProps26&&_props$controlProps26.hidePostChatLoadingPane)&&componentController_shouldShowPostChatLoadingPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr10=props.componentOverrides)||void 0===_props$componentOverr10?void 0:_props$componentOverr10.postChatLoadingPane)||Object(jsx_runtime.jsx)(postchatloadingpanestateful_PostChatLoadingPaneStateful,Object.assign({},props.postChatLoadingPaneProps))),componentController_shouldShowPostChatSurveyPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr11=props.componentOverrides)||void 0===_props$componentOverr11?void 0:_props$componentOverr11.postChatSurveyPane)||Object(jsx_runtime.jsx)(postchatsurveypanestateful_PostChatSurveyPaneStateful,Object.assign({},props.postChatSurveyPaneProps,props.chatSDK))),createFooter_createFooter(props,state),shouldShowEmailTranscriptPane(state)&&(Object(cjs.decodeComponentString)(null===(_props$componentOverr12=props.componentOverrides)||void 0===_props$componentOverr12?void 0:_props$componentOverr12.emailTranscriptPane)||Object(jsx_runtime.jsx)(emailtranscriptpanestateful_EmailTranscriptPaneStateful,Object.assign({},props.emailTranscriptPane)))]})}))]})},livechatwidgetstateful_LiveChatWidgetStateful=LiveChatWidgetStateful_LiveChatWidgetStateful;try{LiveChatWidgetStateful_LiveChatWidgetStateful.displayName="LiveChatWidgetStateful",LiveChatWidgetStateful_LiveChatWidgetStateful.__docgenInfo={description:"",displayName:"LiveChatWidgetStateful",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/livechatwidgetstateful/LiveChatWidgetStateful.tsx#LiveChatWidgetStateful"]={docgenInfo:LiveChatWidgetStateful_LiveChatWidgetStateful.__docgenInfo,name:"LiveChatWidgetStateful",path:"src/components/livechatwidget/livechatwidgetstateful/LiveChatWidgetStateful.tsx#LiveChatWidgetStateful"})}catch(__react_docgen_typescript_loader_error){}function LiveChatWidget_slicedToArray(arr,i){return function LiveChatWidget_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LiveChatWidget_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LiveChatWidget_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LiveChatWidget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LiveChatWidget_arrayLikeToArray(o,minLen)}(arr,i)||function LiveChatWidget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LiveChatWidget_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LiveChatWidget_LiveChatWidget=function LiveChatWidget(props){var reducer=function createReducer(){return function reducer(state,action){var _action$payload,_action$payload2,_action$payload3;switch(action.type){case LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetElementId:action.payload})});case LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{renderingMiddlewareProps:action.payload})});case LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{middlewareLocalizedTexts:action.payload})});case LiveChatWidgetActionType.SET_GLOBAL_DIR:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{globalDir:"ltr"===action.payload||"rtl"===action.payload?action.payload:"ltr"})});case LiveChatWidgetActionType.SET_MINIMIZED:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{isMinimized:action.payload})});case LiveChatWidgetActionType.SET_CONVERSATION_STATE:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{conversationState:action.payload})});case LiveChatWidgetActionType.SET_START_CHAT_FAILING:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{isStartChatFailing:action.payload})});case LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{outsideOperatingHours:action.payload})});case LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{preChatSurveyResponse:action.payload})});case LiveChatWidgetActionType.SET_CUSTOM_CONTEXT:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{customContext:action.payload})});case LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{previousElementIdOnFocusBeforeModalOpen:action.payload})});case LiveChatWidgetActionType.SET_SHOW_CONFIRMATION:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showConfirmationPane:action.payload})});case LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{postChatContext:action.payload})});case LiveChatWidgetActionType.SHOW_CALLING_CONTAINER:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showCallingPopup:action.payload})});case LiveChatWidgetActionType.SET_INCOMING_CALL:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{isIncomingCall:action.payload})});case LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{focusChatButton:action.payload})});case LiveChatWidgetActionType.DISABLE_VIDEO_CALL:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableVideoCall:action.payload})});case LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableSelfVideo:action.payload})});case LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableRemoteVideo:action.payload})});case LiveChatWidgetActionType.SET_CHAT_TOKEN:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{chatToken:action.payload})});case LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE:return Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showEmailTranscriptPane:action.payload})});case LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{preChatResponseEmail:action.payload})});case LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{isAudioMuted:action.payload})});case LiveChatWidgetActionType.SET_E2VV_ENABLED:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{e2vvEnabled:action.payload})});case LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{hideStartChatButton:action.payload})});case LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{proactiveChatStates:Object.assign({},state.appStates.proactiveChatStates,{proactiveChatBodyTitle:null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.proactiveChatBodyTitle,proactiveChatEnablePrechat:null===(_action$payload2=action.payload)||void 0===_action$payload2?void 0:_action$payload2.proactiveChatEnablePrechat,proactiveChatInNewWindow:null===(_action$payload3=action.payload)||void 0===_action$payload3?void 0:_action$payload3.proactiveChatInNewWindow})})});case LiveChatWidgetActionType.SET_TELEMETRY_DATA:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{telemetryInternalData:action.payload})});case LiveChatWidgetActionType.SET_RECONNECT_ID:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{reconnectId:action.payload})});case LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{unreadMessageCount:action.payload})});case LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{liveChatContext:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_STATE:return Object.assign({},action.payload);case LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{conversationEndedByAgentEventReceived:action.payload})});case LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{conversationEndedBy:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_SIZE:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetSize:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetInstanceId:action.payload})});case LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{liveChatConfig:action.payload})});case LiveChatWidgetActionType.SET_POST_CHAT_WORKFLOW_IN_PROGRESS:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{postChatWorkflowInProgress:action.payload})});case LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID:return Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{initialChatSdkRequestId:action.payload})});case LiveChatWidgetActionType.SET_SHOULD_USE_BOT_SURVEY:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{shouldUseBotSurvey:action.payload})});case LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED:return Object.assign({},state,{appStates:Object.assign({},state.appStates,{chatDisconnectEventReceived:action.payload})});default:return state}}}(),_useReducer=Object(react.useReducer)(reducer,function getLiveChatWidgetContextInitialState(props){var _props$chatSDK,_props$chatSDK$omnich,_props$chatSDK2,_props$chatSDK2$omnic,_props$controlProps$w,_props$controlProps,_props$controlProps$c,_props$controlProps2,_props$webChatContain,widgetCacheId=utils_getWidgetCacheId(null==props||null===(_props$chatSDK=props.chatSDK)||void 0===_props$chatSDK||null===(_props$chatSDK$omnich=_props$chatSDK.omnichannelConfig)||void 0===_props$chatSDK$omnich?void 0:_props$chatSDK$omnich.orgId,null==props||null===(_props$chatSDK2=props.chatSDK)||void 0===_props$chatSDK2||null===(_props$chatSDK2$omnic=_props$chatSDK2.omnichannelConfig)||void 0===_props$chatSDK2$omnic?void 0:_props$chatSDK2$omnic.widgetId,null!==(_props$controlProps$w=null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:""),cacheTtlInMins=null!==(_props$controlProps$c=null==props||null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2?void 0:_props$controlProps2.cacheTtlInMins)&&void 0!==_props$controlProps$c?_props$controlProps$c:Constants.d.CacheTtlInMinutes,initialState=defaultClientDataStoreProvider_defaultClientDataStoreProvider(cacheTtlInMins).getData(widgetCacheId,"localStorage");return isNullOrUndefined(initialState)?{domainStates:{liveChatConfig:props.chatConfig,widgetElementId:"",renderingMiddlewareProps:null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.renderingMiddlewareProps,middlewareLocalizedTexts:defaultMiddlewareLocalizedTexts,preChatSurveyResponse:"{}",chatToken:void 0,postChatContext:void 0,telemetryInternalData:{},globalDir:"ltr",liveChatContext:void 0,customContext:void 0,widgetSize:void 0,widgetInstanceId:"",initialChatSdkRequestId:""},appStates:{conversationState:ConversationState.Closed,isMinimized:!1,previousElementIdOnFocusBeforeModalOpen:null,isStartChatFailing:!1,outsideOperatingHours:!1,preChatResponseEmail:"",isAudioMuted:null,newMessage:!1,hideStartChatButton:!1,reconnectId:void 0,proactiveChatStates:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1},e2vvEnabled:!1,unreadMessageCount:0,conversationEndedByAgentEventReceived:!1,conversationEndedBy:void 0,postChatWorkflowInProgress:!1,shouldUseBotSurvey:!1,chatDisconnectEventReceived:!1},uiStates:{showConfirmationPane:!1,showEmailTranscriptPane:!1,showCallingPopup:!1,isIncomingCall:!0,disableVideoCall:!0,disableRemoteVideo:!0,disableSelfVideo:!0,focusChatButton:!1}}:JSON.parse(initialState)}(props)),_useReducer2=LiveChatWidget_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],_useState2=LiveChatWidget_slicedToArray(Object(react.useState)(void 0),2),adapter=_useState2[0],setAdapter=_useState2[1];return Object(jsx_runtime.jsx)(ChatSDKStore.Provider,{value:props.chatSDK,children:Object(jsx_runtime.jsx)(ChatAdapterStore.Provider,{value:[adapter,setAdapter],children:Object(jsx_runtime.jsx)(ChatContextStore.Provider,{value:[state,dispatch],children:Object(jsx_runtime.jsx)(livechatwidgetstateful_LiveChatWidgetStateful,Object.assign({},props))})})})};LiveChatWidget_LiveChatWidget.displayName="LiveChatWidget";var livechatwidget_LiveChatWidget=LiveChatWidget_LiveChatWidget;try{LiveChatWidget_LiveChatWidget.displayName="LiveChatWidget",LiveChatWidget_LiveChatWidget.__docgenInfo={description:"",displayName:"LiveChatWidget",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/LiveChatWidget.tsx#LiveChatWidget"]={docgenInfo:LiveChatWidget_LiveChatWidget.__docgenInfo,name:"LiveChatWidget",path:"src/components/livechatwidget/LiveChatWidget.tsx#LiveChatWidget"})}catch(__react_docgen_typescript_loader_error){}function mockchatsdk_regeneratorRuntime(){mockchatsdk_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function mockchatsdk_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function mockchatsdk_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var mockchatsdk_MockChatSDK=function(){function MockChatSDK(){!function mockchatsdk_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockChatSDK),this.sleep=function(ms){return new Promise((function(r){return setTimeout(r,ms)}))},this.isMockModeOn=!0}var _startChat;return function mockchatsdk_createClass(Constructor,protoProps,staticProps){return protoProps&&mockchatsdk_defineProperties(Constructor.prototype,protoProps),staticProps&&mockchatsdk_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockChatSDK,[{key:"startChat",value:(_startChat=function mockchatsdk_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(mockchatsdk_regeneratorRuntime().mark((function _callee(){return mockchatsdk_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.sleep(1e3);case 2:case"end":return _context.stop()}}),_callee,this)}))),function startChat(){return _startChat.apply(this,arguments)})},{key:"endChat",value:function endChat(){return null}},{key:"getChatToken",value:function getChatToken(){return null}},{key:"createChatAdapter",value:function createChatAdapter(){return new mockadapter_MockAdapter}},{key:"getPreChatSurvey",value:function getPreChatSurvey(parseToJson){return""}},{key:"getConversationDetails",value:function getConversationDetails(){return{State:"Active"}}},{key:"getCurrentLiveChatContext",value:function getCurrentLiveChatContext(){return{chatToken:{},requestId:""}}},{key:"onNewMessage",value:function onNewMessage(){return null}},{key:"getChatReconnectContext",value:function getChatReconnectContext(){return{reconnectId:"123"}}}]),MockChatSDK}();function OmniChannelLiveChatWidget_stories_regeneratorRuntime(){OmniChannelLiveChatWidget_stories_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function OmniChannelLiveChatWidget_stories_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function OmniChannelLiveChatWidget_stories_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function OmniChannelLiveChatWidget_stories_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}__webpack_exports__.default={title:"Stateful Components/Live Chat Widget",component:livechatwidget_LiveChatWidget};var OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate=function LiveChatWidgetTemplate(args){return Object(jsx_runtime.jsx)(livechatwidget_LiveChatWidget,Object.assign({},args))};OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.displayName="LiveChatWidgetTemplate";var Default=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),liveChatWidgetDefaultProps={chatSDK:new mockchatsdk_MockChatSDK,styleProps:{generalStyles:{width:"360px",height:"560px",top:"20px",left:"20px"}},telemetryConfig:void 0};Default.args=liveChatWidgetDefaultProps;var MockChatSDKSurveyEnabled=function(_MockChatSDK){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(MockChatSDKSurveyEnabled,_MockChatSDK);var _getPostChatSurveyContext,_super=_createSuper(MockChatSDKSurveyEnabled);function MockChatSDKSurveyEnabled(){return OmniChannelLiveChatWidget_stories_classCallCheck(this,MockChatSDKSurveyEnabled),_super.apply(this,arguments)}return function OmniChannelLiveChatWidget_stories_createClass(Constructor,protoProps,staticProps){return protoProps&&OmniChannelLiveChatWidget_stories_defineProperties(Constructor.prototype,protoProps),staticProps&&OmniChannelLiveChatWidget_stories_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockChatSDKSurveyEnabled,[{key:"getPreChatSurvey",value:function getPreChatSurvey(parseToJson){return'{"type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"TextBlock","text":"*Please Enter Name","wrap":true},{"type":"Input.Text","id":"{\\"Id\\":\\"33828761-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Name\\",\\"IsOption\\":false,\\"Order\\":1,\\"IsRequired\\":true,\\"QuestionText\\":\\"Please Enter Name\\"}","maxLength":100},{"type":"TextBlock","text":"Comments","wrap":true},{"type":"Input.Text","id":"{\\"Id\\":\\"5624f385-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Comments\\",\\"IsOption\\":false,\\"Order\\":2,\\"IsRequired\\":false,\\"QuestionText\\":\\"Comments\\"}","isMultiline":true,"maxLength":250},{"type":"TextBlock","text":"Options","wrap":true},{"type":"Input.ChoiceSet","id":"{\\"Id\\":\\"0b5d9408-10b1-ec11-983f-0022481e6d27\\",\\"Name\\":\\"Options\\",\\"IsOption\\":true,\\"Order\\":3,\\"IsRequired\\":false,\\"QuestionText\\":\\"Options\\"}","value":"{\\"Id\\":\\"135d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option2\\"}","style":"compact","isMultiSelect":false,"choices":[{"title":"Option2","value":"{\\"Id\\":\\"135d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option2\\"}"},{"title":"Option3","value":"{\\"Id\\":\\"145d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option3\\"}"},{"title":"Option1","value":"{\\"Id\\":\\"125d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option1\\"}"}]},{"type":"Input.Toggle","id":"{\\"Id\\":\\"63a42fb5-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Consent\\",\\"IsOption\\":false,\\"Order\\":4,\\"IsRequired\\":true,\\"QuestionText\\":\\"Agree to Terms and Conditions\\"}","title":"*Agree to Terms and Conditions","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","isSubtle":true,"text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","data":{"Type":"InputSubmit"},"title":"Submit"}]}'}},{key:"getPostChatSurveyContext",value:(_getPostChatSurveyContext=function OmniChannelLiveChatWidget_stories_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(OmniChannelLiveChatWidget_stories_regeneratorRuntime().mark((function _callee(){return OmniChannelLiveChatWidget_stories_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.sleep(1e3);case 2:return _context.abrupt("return",{surveyInviteLink:"https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbRzBkKrakuj1CvYYDsfs8hTBUMUE4WUJHMEZEMjVPRTBTVUYzSzREN1Q1Ry4u&vt=72f988bf-86f1-41af-91ab-2d7cd011db47_33743ab6-750a-4598-b3d1-902bef8e51fd_637847096240000000_MSIT_Hash_j1mV7GqRPNf7lNpsWeFBAL46SoaB0vDccn8TMRuYnZ0%3d&lang=en-us&showmultilingual=false"});case 3:case"end":return _context.stop()}}),_callee,this)}))),function getPostChatSurveyContext(){return _getPostChatSurveyContext.apply(this,arguments)})},{key:"getConversationDetails",value:function getConversationDetails(){return{conversationId:"3ef7f16f-7d34-46f4-b5d3-fa7ce1b95def",canRenderPostChat:"True"}}}]),MockChatSDKSurveyEnabled}(mockchatsdk_MockChatSDK),MockChatConfig={ChatWidgetLanguage:{msdyn_localeid:"1033",msdyn_languagename:"English - United States"},DataMaskingInfo:{},LiveChatConfigAuthSettings:{},LiveChatVersion:2,LiveWSAndLiveChatEngJoin:{msdyn_postconversationsurveyenable:"true",msdyn_postconversationsurveymode:"192350000"},allowedFileExtensions:"",maxUploadFileSize:""},DefaultWithSurvey=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),liveChatWidgetDefaultWithSurveyProps={chatSDK:new MockChatSDKSurveyEnabled,chatConfig:MockChatConfig,styleProps:{generalStyles:{width:"360px",height:"560px",top:"20px",left:"20px"}},chatButtonProps:{styleProps:{generalStyleProps:{position:"absolute"}}},postChatSurveyPaneProps:{styleProps:{generalStyleProps:{position:"initial",height:"560px",width:"360px",borderRadius:"0 0 4px 4px",overflow:"auto"}}},telemetryConfig:void 0};DefaultWithSurvey.args=liveChatWidgetDefaultWithSurveyProps;var Custom=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),liveChatWidgetCustom={chatSDK:new MockChatSDKSurveyEnabled,chatConfig:MockChatConfig,styleProps:{generalStyles:{width:"423px",height:"600px",bottom:"20px",right:"20px",borderRadius:"10px"}},chatButtonProps:{controlProps:{hideNotificationBubble:!0,hideChatTextContainer:!0},styleProps:{generalStyleProps:{height:"50px",width:"50px",position:"absolute",cursor:"pointer",hoverBackgroundColor:"lightgrey",borderStyle:"",borderRadius:0,borderWidth:"0",boxShadow:""},iconStyleProps:{cursor:"pointer",align:"center",width:"100%",height:"100%",justifyContent:"center",backgroundImage:"url(https://www.freeiconspng.com/uploads/live-chat-icon-20.png)",backgroundSize:"100% 100%",borderStyle:"",borderRadius:0,borderWidth:"0",boxShadow:"","&:hover":{filter:"brightness(0.8)"},margin:0}}},headerProps:{controlProps:{hideIcon:!0,headerTitleProps:{id:"oc-lcw-header-title",text:"Support Chat"}},styleProps:{generalStyleProps:{borderRadius:"0px",backgroundColor:"#1b1a19",height:"40px"},closeButtonStyleProps:{color:"#2266E3"},minimizeButtonStyleProps:{color:"#2266E3"},titleStyleProps:{fontSize:"20px",fontFamily:"Segoe UI",margin:"0 0 0 10px",color:"white",fontWeight:"600"}}},loadingPaneProps:{controlProps:{titleText:"Support Chat",spinnerText:"We will be with you shortly",spinnerSize:3,hideSubtitle:!0,hideIcon:!0,hideSpinnerText:!0},styleProps:{generalStyleProps:{position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0px",borderWidth:"0px",backgroundColor:"#1b1a19",alignItems:"center"},titleStyleProps:{color:"white",margin:"0 0 50px 0",fontSize:"24px",width:"auto",fontFamily:"Segoe UI",order:1,fontWeight:600}}},webChatContainerProps:{webChatStyles:{backgroundColor:"#1b1a19",botAvatarInitials:"",botAvatarImage:"https://www.freeiconspng.com/uploads/female-call-center-agent-vector-icon--people-icons--icons-download-14.png",bubbleBackground:"#0078d4",bubbleBorderRadius:0,bubbleBorderWidth:0,bubbleFromUserBackground:"#F7F7F9",bubbleFromUserBorderRadius:0,bubbleFromUserBorderWidth:0,bubbleFromUserTextColor:"black",bubbleImageHeight:300,bubbleMaxWidth:250,bubbleMinHeight:40,bubbleMinWidth:40,bubbleTextColor:"white",hideSendBox:!1,hideUploadButton:!0,primaryFont:"Segoe UI",rootHeight:"100%",rootWidth:"100%",sendBoxTextWrap:!0,sendBoxHeight:70,sendBoxMaxHeight:120,sendBoxBackground:"#F7F7F9",bubbleFromUserNubOffset:"bottom",bubbleNubOffset:"bottom",bubbleFromUserNubSize:8,bubbleNubSize:8,avatarBorderRadius:0,timestampFormat:"absolute"},renderingMiddlewareProps:{disableTypingIndicatorMiddleware:!0,disableAvatarMiddleware:!0,disableActivityMiddleware:!0}},confirmationPaneProps:{controlProps:{hideSubtitle:!0,titleText:"Are you sure you want to leave the conversation?",confirmButtonText:"Yes",cancelButtonText:"No"},styleProps:{generalStyleProps:{borderRadius:"0px",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",height:"100%",padding:"10px 20px",width:"100%",backgroundColor:"#1b1a19"},titleStyleProps:{fontFamily:"Segoe UI",marginBottom:"15px",color:"white"},confirmButtonStyleProps:{borderRadius:"0",backgroundColor:"#2266E3"},confirmButtonHoveredStyleProps:{borderRadius:"0"},cancelButtonStyleProps:{borderRadius:"0"},cancelButtonHoveredStyleProps:{borderRadius:"0"}}},preChatSurveyPaneProps:{controlProps:{adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#FFFFFF","subtle":"#FFFFFF"}},"backgroundColor":"rgb(27, 26, 25)"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}'},styleProps:{generalStyleProps:{backgroundColor:"#1b1a19",borderWidth:"1px"},adaptiveCardContainerStyleProps:{backgroundColor:"#1b1a19",borderStyle:"none"},customButtonStyleProps:{backgroundColor:"#2266E3",color:"#1b1a19"}}},footerProps:{controlProps:{hideAudioNotificationButton:!0,hideDownloadTranscriptButton:!0,hideEmailTranscriptButton:!0,leftGroup:{children:['{"$$typeof":"$$Symbol:react.element","type":"button","key":"1","ref":null,"props":{"role":"button","style":{"fontSize":"12px","margin":"10px","padding":"5px","fontFamily":"Segoe UI","cursor":"pointer","backgroundColor":"#0078D4","borderRadius":0,"borderStyle":"none","color":"white","fontWeight":400},"children":"Upload Attachment"},"_owner":null,"_store":{}}']},rightGroup:{children:['{"$$typeof":"$$Symbol:react.element","type":"div","key":"1","ref":null,"props":{"style":{"fontSize":"11px","fontFamily":"Segoe UI","margin":"10px","padding":"2px"},"children":"© Microsoft 2022"},"_owner":null,"_store":{}}']}},styleProps:{generalStyleProps:{backgroundColor:"#1b1a19"}}},telemetryConfig:void 0};Custom.args=liveChatWidgetCustom,Default.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},Default.parameters),DefaultWithSurvey.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},DefaultWithSurvey.parameters),Custom.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},Custom.parameters)},"./stories/component-stories/CallingContainer.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"currentCallMode",(function(){return currentCallMode})),__webpack_require__.d(__webpack_exports__,"incomingCall",(function(){return incomingCall}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Calling Container/Default",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.CallingContainer};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.CallingContainer,Object.assign({},args))};Template.displayName="Template";var defaultCallingContainerProps={controlProps:{id:"oc-lcw-callingcontainer",dir:"ltr",isIncomingCall:!1,hideCallingContainer:!1},styleProps:{generalStyleProps:{background:"#000",width:"100%",zIndex:100,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)"}}},currentCallMode=Template.bind({});currentCallMode.args=defaultCallingContainerProps;var incomingCallProps={controlProps:Object.assign({},defaultCallingContainerProps.controlProps,{isIncomingCall:!0}),styleProps:Object.assign({},defaultCallingContainerProps.styleProps)},incomingCall=Template.bind({});incomingCall.args=incomingCallProps,currentCallMode.parameters=Object.assign({storySource:{source:"(args) => <CallingContainer {...args}></CallingContainer>"}},currentCallMode.parameters),incomingCall.parameters=Object.assign({storySource:{source:"(args) => <CallingContainer {...args}></CallingContainer>"}},incomingCall.parameters)},"./stories/component-stories/ChatButton.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ChatButtonDefault",(function(){return ChatButtonDefault})),__webpack_require__.d(__webpack_exports__,"ChatButtonRTL",(function(){return ChatButtonRTL})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample1",(function(){return ChatButtonSample1})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample2",(function(){return ChatButtonSample2})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample3",(function(){return ChatButtonSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/ChatButton",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatButton};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatButton,Object.assign({},args))};Template.displayName="Template";var defaultChatButtonProps={controlProps:{id:"lcw-components-chat-button",dir:"ltr",role:"button",ariaLabel:"live chat button",unreadMessageCount:"0",titleText:"Let's Chat!",subtitleText:"We're online.",onClick:function onClick(){alert("initiate chat")},hideChatButton:!1,hideChatIcon:!1,hideChatTextContainer:!1,hideChatSubtitle:!1,hideChatTitle:!1,hideNotificationBubble:!0},styleProps:{generalStyleProps:{backgroundColor:"#fff",borderColor:"#fff",borderRadius:"100px 100px 100px 99px",borderStyle:"solid",borderWidth:"1px",bottom:"0px",boxShadow:"0 0 4px rgb(102 102 102 / 50%)",cursor:"pointer",display:"flex",height:"60px",margin:"3px 3px 3px 3px",padding:"0px",position:"absolute",right:"0px",selectors:{":hover":{backgroundColor:"lightgrey"},":focus":{outline:"dotted 2px #000"}},width:"180px"},iconStyleProps:{align:"center",backgroundColor:"#315FA2",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"65% 65%",borderColor:"transparent",borderRadius:"50%",borderStyle:"solid",borderWidth:"1px",display:"flex",height:"60px",justifyContent:"center",margin:"-2px -2px -2px -3px",width:"62px"},notificationBubbleStyleProps:{backgroundColor:"#cc4a31",borderRadius:"50%",color:"#fff",fontFamily:"Segoe UI,Arial,sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:"bold",lineHeight:"22px",padding:"1px",position:"absolute",textAlign:"center",top:"-5px",minHeight:"24px",minWidth:"24px"},textContainerStyleProps:{display:"flex",flexDirection:"column",justifyContent:"center"},titleStyleProps:{color:"#262626",cursor:"pointer",display:"block",fontFamily:"'Segoe UI',Arial,sans-serif",fontSize:"16px",fontWeight:"bold",lineHeight:"19px",height:"22px",margin:"0px 14px 0px 14px",overflow:"hidden",textOverflow:"ellipsis !important",whiteSpace:"nowrap",width:"90px"},subtitleStyleProps:{alignItems:"center",color:"#666",cursor:"pointer",display:"block",fontFamily:"'Segoe UI',Arial,sans-serif",fontSize:"12px",fontWeight:"200",margin:"0px 14px 0px 14px",overflow:"hidden",textOverflow:"ellipsis !important",width:"max-content"}}},ChatButtonDefault=Template.bind({});ChatButtonDefault.args=defaultChatButtonProps;var chatButtonRTLProps={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{dir:"rtl",unreadMessageCount:"10",hideNotificationBubble:!1,titleText:"لنتحدث!",subtitleText:"We're online."}),styleProps:Object.assign({},defaultChatButtonProps.styleProps,{notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{backgroundColor:"#d53434"})})},ChatButtonRTL=Template.bind({});ChatButtonRTL.args=chatButtonRTLProps;var chatButtonSample1Props={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{dir:"rtl",unreadMessageCount:"1000",hideNotificationBubble:!1,hideChatIcon:!1,hideChatSubtitle:!0,titleText:"CHAT NOW !!!"}),styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderRadius:"0px 0px 0px 0px",width:"360px",backgroundColor:"#b9f73a",selectors:{":hover":{backgroundColor:"black"}}}),iconStyleProps:Object.assign({},defaultChatButtonProps.styleProps.iconStyleProps,{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CustomChatIconBase64+")",borderRadius:"unset",backgroundColor:"#b9f73a"}),notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{backgroundColor:"#d53434"}),textContainerStyleProps:Object.assign({},defaultChatButtonProps.styleProps.textContainerStyleProps),titleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.titleStyleProps,{width:"280px",fontSize:"40px",color:"#ff0000",height:"32px",lineHeight:"14px"})}},ChatButtonSample1=Template.bind({});ChatButtonSample1.args=chatButtonSample1Props;var chatButtonSample2Props={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{hideChatTextContainer:!0,hideNotificationBubble:!1,unreadMessageCount:"1000"}),styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderStyle:"",boxShadow:"",width:"100px",height:"100px",backgroundColor:""}),iconStyleProps:Object.assign({},defaultChatButtonProps.styleProps.iconStyleProps,{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CustomChatIconBase64+")",left:"",borderRadius:"unset",backgroundColor:"",backgroundSize:"100% 100%",width:"100px",height:"100px"}),notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{left:"60px",backgroundColor:"#d53434"})}},ChatButtonSample2=Template.bind({});ChatButtonSample2.args=chatButtonSample2Props;var chatButtonSample3Props={componentOverrides:{title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{color:"#8A2E2E",fontSize:"12px",fontWeight:"bold",margin:"0px 5px 0px 5px"},dir:"ltr",children:"Initiate new Chat."}),subtitle:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{color:"black",fontSize:"8px",margin:"0px 5px 0px 5px"},dir:"ltr",children:"Click Here!"})),iconContainer:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{})},styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderStyle:"",boxShadow:"",width:"100px",height:"100px",backgroundColor:""})}},ChatButtonSample3=Template.bind({});ChatButtonSample3.args=chatButtonSample3Props,ChatButtonDefault.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonDefault.parameters),ChatButtonRTL.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonRTL.parameters),ChatButtonSample1.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample1.parameters),ChatButtonSample2.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample2.parameters),ChatButtonSample3.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample3.parameters)},"./stories/component-stories/ConfirmationPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneDefault",(function(){return ConfirmationPaneDefault})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneRTL",(function(){return ConfirmationPaneRTL})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample1",(function(){return ConfirmationPaneSample1})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample2",(function(){return ConfirmationPaneSample2})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample3",(function(){return ConfirmationPaneSample3})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample4",(function(){return ConfirmationPaneSample4}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/react/index.js");var _storybook_client_api__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@storybook/addons/dist/esm/hooks.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Stateless Components/Confirmation Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane};var ConfirmationPaneTemplate=function ConfirmationPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane,Object.assign({},args))};ConfirmationPaneTemplate.displayName="ConfirmationPaneTemplate";var defaultConfirmationPaneProps={controlProps:{id:"lcw-components-confirmation-pane",dir:"ltr",hideConfirmationPane:!1,hideTitle:!1,titleText:"Close chat",hideSubtitle:!1,subtitleText:"Do you really want to close this chat?",hideConfirmButton:!1,confirmButtonText:"Close",confirmButtonAriaLabel:"Close Chat",hideCancelButton:!1,cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel. Return to Chat",onConfirm:function onConfirm(){alert("on confirm")},onCancel:function onCancel(){alert("on cancel")}},styleProps:{generalStyleProps:{backgroundColor:"white",borderRadius:"2px",color:"black",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",height:"160px",padding:"10px 20px",width:"262px",position:"absolute",justifyContent:"center",alignItems:"center",display:"flex",flexFlow:"column",zIndex:"9999"},titleStyleProps:{color:"#323130",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"16px",fontWeight:"500",margin:"10px 0 0 0",width:"100%",textAlign:"center"},subtitleStyleProps:{color:"#605e5c",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"400",margin:"14px 0px",width:"100%",textAlign:"center"},buttonGroupStyleProps:{display:"flex",flexFlow:"row",justifyContent:"center",alignItems:"center",gap:"10px"},confirmButtonStyleProps:{backgroundColor:"rgba(9,72,159,1)",color:"white",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"500",height:"32px",width:"80px"},cancelButtonStyleProps:{backgroundColor:"white",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"500",height:"32px",width:"80px"}}},ConfirmationPaneDefault=ConfirmationPaneTemplate.bind({});ConfirmationPaneDefault.args=defaultConfirmationPaneProps;var ConfirmationPaneRTL=ConfirmationPaneTemplate.bind({});ConfirmationPaneRTL.args={controlProps:{dir:"rtl"}};var ConfirmationPaneSample1=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample1.args={controlProps:{id:"oc-lcw-confirmationpane-sample1",titleText:"Big Circle",subtitleText:"This is a big, big circle.",confirmButtonText:"Green",cancelButtonText:"Red"},styleProps:{generalStyleProps:{backgroundColor:"lightgrey",borderColor:"black",borderRadius:"50%",borderStyle:"solid",borderWidth:"2px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",color:"blue",fontFamily:"Times New Roman",fontSize:"10px",fontWeight:"300",height:"300px",margin:"",padding:"60px",width:"300px"},titleStyleProps:{fontFamily:"Times New Roman",fontSize:"30px",fontWeight:"700",borderStyle:"solid",borderWidth:"0 0 3px 0",borderColor:"black"},subtitleStyleProps:{fontSize:"16px",fontWeight:"400",color:"black",fontFamily:"Arial",margin:"30px 0 30px"},confirmButtonStyleProps:{backgroundColor:"green",borderRadius:"50%",height:"70px",margin:"0px 10px 0px 0px",width:"70px",color:"white",lineHeight:"70px"},confirmButtonHoveredStyleProps:{backgroundColor:"green",color:"white"},cancelButtonStyleProps:{backgroundColor:"red",borderRadius:"50%",height:"70px",width:"70px",color:"white",lineHeight:"70px"},cancelButtonHoveredStyleProps:{backgroundColor:"red",color:"white"}}};var ConfirmationPaneSample2=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample2.args={controlProps:{id:"oc-lcw-confirmationpane-sample2",titleText:"Only One Option",hideSubtitle:!0,hideCancelButton:!0,confirmButtonText:"The Only Button"},styleProps:{generalStyleProps:{backgroundColor:"white",borderColor:"grey",borderRadius:"2px",borderStyle:"solid",borderWidth:"1px",color:"blue",fontSize:"10px",fontWeight:"300",height:"130px",margin:"",padding:"10px",width:"150px",justifyContent:"start",alignItems:"start"},titleStyleProps:{fontSize:"14px",fontWeight:"500",borderStyle:"solid",borderWidth:"1px",borderColor:"black",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",width:"100px",textAlign:"end"},confirmButtonStyleProps:{backgroundColor:"black",height:"40px",margin:"",width:"100px",color:"white",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",textAlign:"end",padding:"0"},confirmButtonHoveredStyleProps:{backgroundColor:"black",color:"white"}}};var confirmationPaneSample3Props={controlProps:{id:"oc-lcw-confirmationpane-sample3",titleText:"COLUMN LAYOUT",subtitleText:"Try the buttons below",confirmButtonText:"Row layout",cancelButtonText:"Column layout"},styleProps:{generalStyleProps:{backgroundColor:"lightblue",color:"black",fontSize:"14px",fontWeight:"300",height:"250px",margin:"",padding:"0px",width:"150px",justifyContent:"center",alignItems:"center",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",flexFlow:"column"},titleStyleProps:{fontSize:"16px",fontWeight:"600",width:"100px"},subtitleStyleProps:{width:"100px"},buttonGroupStyleProps:{flexFlow:"column"},confirmButtonStyleProps:{backgroundColor:"white",height:"20px",width:"110px",color:"black",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",padding:"0"},confirmButtonHoveredStyleProps:{backgroundColor:"white",color:"black"},cancelButtonStyleProps:{backgroundColor:"white",height:"20px",margin:"",width:"110px",color:"black",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",padding:"0"},cancelButtonHoveredStyleProps:{backgroundColor:"white",color:"black"}}},ConfirmationPaneSample3=function ConfirmationPaneSample3(args){var _useArgs2=_slicedToArray(Object(_storybook_client_api__WEBPACK_IMPORTED_MODULE_14__.c)(),2),updateArgs=(_useArgs2[0],_useArgs2[1]);return args.controlProps.onConfirm=function switchToRowLayout(){updateArgs(Object.assign({},ConfirmationPaneSample3.args,{controlProps:Object.assign({},ConfirmationPaneSample3.args.controlProps,{titleText:"Row Layout"}),styleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps,{generalStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.generalStyleProps,{flexFlow:"row",buttonFlexDirection:"row",height:"100px",width:"500px"}),titleStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.titleStyleProps,{width:"80px"}),subtitleStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.subtitleStyleProps,{width:"80px"}),buttonGroupStyleProps:{flexFlow:"row"}})}))},args.controlProps.onCancel=function switchToColumnLayout(){updateArgs(confirmationPaneSample3Props)},Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane,Object.assign({},args))};ConfirmationPaneSample3.displayName="ConfirmationPaneSample3",ConfirmationPaneSample3.args=confirmationPaneSample3Props;var confirmationPaneSample4Props={componentOverrides:{title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("h2",{children:"Hello world"}),subtitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("input",{type:"text",placeholder:"This is a subtitle",style:{marginBottom:"10px"}}),confirmButton:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("button",{style:{color:"pink"},children:"Yes"})),cancelButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("button",{style:{color:"yellow"},children:"No"})}},ConfirmationPaneSample4=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample4.args=confirmationPaneSample4Props,ConfirmationPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneDefault.parameters),ConfirmationPaneRTL.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneRTL.parameters),ConfirmationPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample1.parameters),ConfirmationPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample2.parameters),ConfirmationPaneSample3.parameters=Object.assign({storySource:{source:'(args) => {\n    \n    const [_, updateArgs] = useArgs();\n\n    const switchToColumnLayout = () => {\n        updateArgs(confirmationPaneSample3Props);\n    };\n    \n    const switchToRowLayout = () => {\n        updateArgs({\n            ...ConfirmationPaneSample3.args,\n            controlProps: {\n                ...ConfirmationPaneSample3.args.controlProps,\n                titleText: "Row Layout"\n            },\n            styleProps: {\n                ...ConfirmationPaneSample3.args.styleProps,\n                generalStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.generalStyleProps, {\n                    flexFlow: "row",\n                    buttonFlexDirection: "row",\n                    height: "100px",\n                    width: "500px"\n                }),\n                titleStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.titleStyleProps, {\n                    width: "80px"\n                }),\n                subtitleStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.subtitleStyleProps, {\n                    width: "80px"\n                }),\n                buttonGroupStyleProps: {\n                    flexFlow: "row"\n                }\n            }\n        });\n    };\n\n    args.controlProps.onConfirm = switchToRowLayout;\n    args.controlProps.onCancel = switchToColumnLayout;\n    return <ConfirmationPane {...args} ></ConfirmationPane>;\n}'}},ConfirmationPaneSample3.parameters),ConfirmationPaneSample4.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample4.parameters)},"./stories/component-stories/CurrentCall.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultVideoCall",(function(){return DefaultVideoCall})),__webpack_require__.d(__webpack_exports__,"DefaultAudioCall",(function(){return DefaultAudioCall})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"componentOverrides",(function(){return componentOverrides})),__webpack_require__.d(__webpack_exports__,"CustomizedCurrentCall",(function(){return CustomizedCurrentCall}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./stories/component-stories/common/commandbutton/CommandButton.tsx")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Calling Container/Current Call",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CurrentCall};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CurrentCall,Object.assign({},args))};Template.displayName="Template";var defaultCurrentCallProps={controlProps:{id:"currentCall-container",nonActionIds:{currentCallActionGroupId:"currentCall-actionicons",currentCallFooterId:"currentCall-footer",remoteVideoTileId:"remoteVideo",selfVideoTileId:"selfVideo",videoTileGroupId:"currentCall-body"},hideMicButton:!1,hideVideoButton:!1,hideEndCallButton:!1,hideCurrentCallTitle:!1,videoCallDisabled:!1,hideCallTimer:!1,onEndCallClick:function onEndCallClick(){alert("end call clicked")},onMicCallClick:function onMicCallClick(){alert("mute clicked")},onVideoOffClick:function onVideoOffClick(){alert("video off clicked")},middleGroup:{gap:1,children:[]},leftGroup:{gap:1,children:[]},rightGroup:{gap:1,children:[]},endCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"End Call",iconName:"DeclineCall",iconSize:18},micButtonProps:{id:"toggleAudio",type:"icon",ariaLabel:"Mute",toggleAriaLabel:"Unmute",iconName:"Microphone",toggleIconName:"MicOff2",iconSize:18},videoButtonProps:{id:"toggleVideo",type:"icon",ariaLabel:"Turn on camera",toggleAriaLabel:"Turn off camera",iconName:"Video",toggleIconName:"VideoOff",iconSize:18},callTimerProps:{id:"oc-lcw-CurrentCall-timer",showHours:!1,timerStyles:{color:"white",textAlign:"center",backgroundColor:"#3d3c3c",height:"45px",width:"50px",lineHeight:"40px",borderRadius:"2px",margin:"1px"}}},styleProps:{generalStyleProps:{background:"#292828",minHeight:"55px",width:"100%",borderRadius:"0 0 3px 3px"},micButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#3d3c3c",height:"45px",width:"50px",margin:"1px"},micButtonHoverStyleProps:{filter:"brightness(0.8)"},videoOffButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#3d3c3c",height:"45px",width:"50px",margin:"1px"},videoOffButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#DC0000",lineHeight:"50px",height:"45px",width:"50px",fontSize:"18px"},currentCallTimerStyleProps:{borderRadius:"2px",margin:"1px",color:"#FFFFFF",paddingTop:"18px",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif",backgroundColor:"darkgrey",height:"45px",width:"50px",textAlign:"center"},videoTileStyleProps:{width:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},videoTileStyleWithVideoProps:{minHeight:"180px",width:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},remoteVideoStyleProps:{height:"100%",width:"100%",overflow:"hidden"},selfVideoStyleProps:{position:"absolute",right:"8px",bottom:"8px",width:"80px",minHeight:"50px",overflow:"hidden",borderRadius:"2px"},selfVideoMaximizeStyleProps:{position:"relative",width:"100%",minHeight:"50px",overflow:"hidden",borderRadius:"2px"},itemFocusStyleProps:{outline:"2px solid #fff"}}},customizedCurrentCallStyleProps={generalStyleProps:{background:"lightgrey",minHeight:"80px",borderRadius:"0 0 3px 3px"},micButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"double",borderColor:"blue",color:"blue",backgroundColor:"white",lineHeight:"50px",height:"50px",width:"50px",margin:"1px"},micButtonHoverStyleProps:{filter:"brightness(0.8)"},videoOffButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"blue",color:"blue",backgroundColor:"white",height:"50px",width:"50px",margin:"1px"},videoOffButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"red",color:"white",backgroundColor:"red",height:"50px",width:"50px",margin:"1px"},currentCallTimerStyleProps:{borderRadius:"2px",margin:"1px",color:"white",paddingTop:"18px",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif",backgroundColor:"transparent",height:"50px",width:"55px",textAlign:"center"},videoTileStyleProps:{minHeight:"180px",height:"300px",backgroundColor:"transparent",width:"100%",maxWidth:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},remoteVideoStyleProps:{height:"100%",width:"100%",overflow:"hidden",backgroundColor:"#8ab2f2"},selfVideoStyleProps:{position:"absolute",left:"8px",bottom:"8px",width:"80px",height:"60px",overflow:"hidden",borderRadius:"2px",backgroundColor:"aliceblue"},itemFocusStyleProps:{border:"2px dotted blue"}},DefaultVideoCall=Template.bind({});DefaultVideoCall.args=defaultCurrentCallProps;var defaultAudioCallProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{videoCallDisabled:!0}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps)},DefaultAudioCall=Template.bind({});DefaultAudioCall.args=defaultAudioCallProps;var defaultRtl={controlProps:{id:"currentCall-container",nonActionIds:{currentCallActionGroupId:"currentCall-actionicons",currentCallFooterId:"currentCall-footer",remoteVideoTileId:"remoteVideo",selfVideoTileId:"selfVideo",videoTileGroupId:"currentCall-body"},hideMicButton:!1,hideVideoButton:!1,hideEndCallButton:!1,hideCurrentCallTitle:!1,videoCallDisabled:!1,hideCallTimer:!1,onEndCallClick:function onEndCallClick(){alert("end call clicked")},onMicCallClick:function onMicCallClick(){alert("mute clicked")},onVideoOffClick:function onVideoOffClick(){alert("video off clicked")},middleGroup:{gap:1,children:[]},leftGroup:{gap:1,children:[]},rightGroup:{gap:1,children:[]},dir:"rtl",endCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"End Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallRejectButtonBase64,styles:{image:{height:"18px",width:"18px"}}}},micButtonProps:{id:"toggleAudio",type:"icon",ariaLabel:"Mute",toggleAriaLabel:"Unmute",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VoiceOnIconBase64,styles:{image:{height:"16px",width:"16px"}}},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VoiceOffIconBase64,styles:{image:{height:"16px",width:"16px"}}},iconSize:18},videoButtonProps:{id:"toggleVideo",type:"icon",ariaLabel:"Turn camera on",toggleAriaLabel:"Turn camera off",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoOnIconBase64,styles:{image:{height:"16px",width:"16px"}}},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoOffIconBase64,styles:{image:{height:"16px",width:"16px"}}},iconSize:18},callTimerProps:{id:"oc-lcw-CurrentCall-timer"}},styleProps:Object.assign({},defaultCurrentCallProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var currentCallSpeakerButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_4__.a,{iconName:"volume3",type:"icon",styles:customizedCurrentCallStyleProps.micButtonStyleProps}),componentOverridesProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{hideCallTimer:!0,hideVideoButton:!0,hideMicButton:!0,selfVideoDisabled:!1}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps,{generalStyleProps:{background:"#C8C8C8",minHeight:"60px",width:"100%",borderRadius:"4px 4px 4px 4px"},selfVideoStyleProps:{position:"absolute",right:"8px",bottom:"8px",width:"80px",minHeight:"50px",overflow:"hidden",borderRadius:"2px",backgroundColor:"blue"}})},componentOverrides=Template.bind({});componentOverrides.args=componentOverridesProps;var customCallTimerProps=Object.assign({},defaultCurrentCallProps.controlProps.callTimerProps,{showHours:!1}),customizedMiddleGroup=Object.assign({},defaultCurrentCallProps.controlProps.middleGroup,{gap:30,children:[currentCallSpeakerButton]}),customizedProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{hideCallTimer:!0,callTimerProps:customCallTimerProps,middleGroup:customizedMiddleGroup}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps)};customizedProps.styleProps=customizedCurrentCallStyleProps,customizedProps.controlProps.callTimerProps.timerStyles={color:"blue",textAlign:"center",backgroundColor:"transparent",height:"50px",width:"55px",lineHeight:"40px",borderRadius:"2px"};var CustomizedCurrentCall=Template.bind({});CustomizedCurrentCall.args=customizedProps,DefaultVideoCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},DefaultVideoCall.parameters),DefaultAudioCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},DefaultAudioCall.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},Rtl.parameters),componentOverrides.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},componentOverrides.parameters),CustomizedCurrentCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},CustomizedCurrentCall.parameters)},"./stories/component-stories/Footer.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"WithComponentOverrides",(function(){return WithComponentOverrides})),__webpack_require__.d(__webpack_exports__,"Customized",(function(){return Customized}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/PrimaryButton/PrimaryButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/DefaultButton/DefaultButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/IconButton/IconButton.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Footer",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Footer};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Footer,Object.assign({},args))};Template.displayName="Template";var defaultFooterProps={controlProps:{id:"lcw-components-footer",hideDownloadTranscriptButton:!1,hideEmailTranscriptButton:!1,hideAudioNotificationButton:!1,onDownloadTranscriptClick:function onDownloadTranscriptClick(){alert("download transcript clicked")},onEmailTranscriptClick:function onEmailTranscriptClick(){alert("email transcript clicked")},onAudioNotificationClick:function onAudioNotificationClick(){alert("audio notification clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},downloadTranscriptButtonProps:{id:"oc-lcw-footer-downloadtranscript-button",type:"icon",iconName:"Download",ariaLabel:"Download chat transcript"},emailTranscriptButtonProps:{id:"oc-lcw-footer-emailtranscript-button",type:"icon",iconName:"Mail",ariaLabel:"Email Transcript"},audioNotificationButtonProps:{id:"oc-lcw-footer-audionotification-button",ariaLabel:"Turn sound off",toggleAriaLabel:"Turn sound on",iconName:"Volume3",toggleIconName:"Volume0"}},styleProps:{generalStyleProps:{background:"#fff",borderRadius:"0 0 4px 4px",minHeight:"25px",width:"100%",minWidth:"250px",padding:"0 10px 5px 10px"},downloadTranscriptButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},downloadTranscriptButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},emailTranscriptButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},emailTranscriptButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},audioNotificationButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},audioNotificationButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},footerItemFocusStyleProps:{border:"2px dotted #000"}}},iconButtonStyles={root:{margin:0}};var defaultFooterOverridesProps=Object.assign({},defaultFooterProps,{componentOverrides:{DownloadTranscriptButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{text:"Download",onClick:function _downloadClicked(){alert("download clicked")},allowDisabledFocus:!0,styles:iconButtonStyles}),EmailTranscriptButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{text:"Email",onClick:function _emailClicked(){alert("email clicked")},allowDisabledFocus:!0,styles:iconButtonStyles})}}),Default=Template.bind({});Default.args=defaultFooterProps;var defaultRtl={controlProps:Object.assign({},defaultFooterProps.controlProps,{dir:"rtl",hideDownloadTranscriptButton:!0}),styleProps:Object.assign({},defaultFooterProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var WithComponentOverrides=Template.bind({});WithComponentOverrides.args=defaultFooterOverridesProps;var buttonStyleProps={root:{color:"blue",height:25,width:25}},calendarIconButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Calendar"},styles:buttonStyleProps,title:"Calendar"},"calendarIconButton"),emojiIconButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Emoji2"},styles:buttonStyleProps,title:"Sentiment"},"emojiIconButton"),customizedFooterProp={controlProps:{id:"oc-lcw-footer",hideDownloadTranscriptButton:!1,hideEmailTranscriptButton:!1,hideAudioNotificationButton:!1,onDownloadTranscriptClick:function onDownloadTranscriptClick(){alert("download transcript clicked")},onEmailTranscriptClick:function onEmailTranscriptClick(){alert("email transcript clicked")},onAudioNotificationClick:function onAudioNotificationClick(){alert("audio notification clicked")},leftGroup:{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Upload"},styles:buttonStyleProps,title:"Upload"},"uploadIconButton")]},middleGroup:{children:[calendarIconButton]},rightGroup:{children:[emojiIconButton]},downloadTranscriptButtonProps:{id:"oc-lcw-footer-downloadtranscript-button",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.TranscriptDownloadIconBase64},ariaLabel:"Download chat transcript"},emailTranscriptButtonProps:{id:"oc-lcw-footer-emailtranscript-button",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.TranscriptEmailIconBase64},ariaLabel:"Email Transcript"},audioNotificationButtonProps:{id:"oc-lcw-footer-audionotification-button",ariaLabel:"Turn sound off",toggleAriaLabel:"Turn sound on",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AudioNotificationOnIconBase64},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AudioNotificationOffIconBase64}}},styleProps:Object.assign({},defaultFooterProps.styleProps)},Customized=Template.bind({});Customized.args=customizedFooterProp,Default.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Default.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Rtl.parameters),WithComponentOverrides.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},WithComponentOverrides.parameters),Customized.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Customized.parameters)},"./stories/component-stories/Header.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"CustomizedHeader",(function(){return CustomizedHeader})),__webpack_require__.d(__webpack_exports__,"CustomizedHeaderRtl",(function(){return CustomizedHeaderRtl}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/style-utilities/lib/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Icon/FontIcon.js"),_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./stories/component-stories/common/commandbutton/CommandButton.tsx"),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Header",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Header};var defaultHeaderProps={controlProps:{id:"oc-lcw-header",hideIcon:!1,hideTitle:!1,hideCloseButton:!1,hideMinimizeButton:!1,onMinimizeClick:function onMinimizeClick(){alert("minimize clicked")},onCloseClick:function onCloseClick(){alert("close clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},minimizeButtonProps:{id:"oc-lcw-header-minimize-button",type:"icon",iconName:"ChromeMinimize"},closeButtonProps:{id:"oc-lcw-header-close-button",type:"icon",iconName:"ChromeClose"},headerIconProps:{id:"oc-lcw-header-icon",src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ModernChatIconBase64,alt:"Chat Icon"},headerTitleProps:{id:"oc-lcw-header-title",text:"Let's Chat"}},styleProps:{generalStyleProps:{background:"#315fa2",borderRadius:"4px 4px 0 0",padding:"5px",minHeight:"50px",width:"100%",minWidth:"250px"},iconStyleProps:{height:"30px",width:"30px",margin:"5px 10px"},titleStyleProps:{fontSize:16,fontFamily:"Segoe UI, Arial, sans-serif",fontWeight:"450",color:"white",padding:"3px 0"},minimizeButtonStyleProps:{color:"white",margin:"5px 0",fontSize:"12px"},closeButtonStyleProps:{color:"white",margin:"5px 0",fontSize:"12px"},closeButtonHoverStyleProps:{filter:"brightness(0.8)"},minimizeButtonHoverStyleProps:{filter:"brightness(0.8)"},headerItemFocusStyleProps:{border:"2px dotted #000"}}},customHeaderProps={controlProps:{id:"oc-lcw-header",hideIcon:!1,hideTitle:!1,hideCloseButton:!1,hideMinimizeButton:!1,onMinimizeClick:function onMinimizeClick(){alert("minimize clicked")},onCloseClick:function onCloseClick(){alert("close clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},minimizeButtonProps:{id:"oc-lcw-header-minimizebutton",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.MinimizeChatButtonIconBase64,styles:{image:{height:"16px",width:"16px"}}}},closeButtonProps:{id:"oc-lcw-header-closebutton",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CloseChatButtonIconBase64,styles:{image:{height:"16px",width:"16px"}}}},headerIconProps:{id:"oc-lcw-header-icon",src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ModernChatIconBase64,alt:"Chat Icon"},headerTitleProps:{id:"oc-lcw-header-title",text:"Let's Chat"}},styleProps:defaultHeaderProps.styleProps},Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Header,Object.assign({},args))};Template.displayName="Template";var Default=Template.bind({});Default.args=defaultHeaderProps;var customIconClass=Object(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.db)({fontSize:40,margin:"0 0px",color:"yellow"}),stackStyles={root:Object(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.db)({background:"blue",border:"1px solid blue",borderRadius:"50%",padding:"10px",margin:"10px",textAlign:"center",height:"60px",width:"60px"})},customIcon=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{styles:stackStyles,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{"aria-label":"ChatBot",iconName:"ChatBot",className:customIconClass,id:"oc-lcw-header-icon"})},"customIcon"),maximizeHeaderButtonProps={id:"oc-lcw-header-maximizebutton",type:"icon",iconName:"FullScreen",ariaLabel:"Maximize",styles:{color:"White"},onClick:function onClick(){alert("maximize clicked")}},maximizeButton=Object(react__WEBPACK_IMPORTED_MODULE_7__.createElement)(_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_6__.a,Object.assign({},maximizeHeaderButtonProps,{key:"maximizeButton"})),advancedHeaderProps={controlProps:Object.assign({},defaultHeaderProps.controlProps,{hideIcon:!0,leftGroup:{children:[customIcon]},rightGroup:{children:[maximizeButton]},headerTitleProps:{id:"oc-lcw-headertitle",text:"hi, there!"}}),styleProps:{generalStyleProps:{background:"linear-gradient(0deg, rgba(34,193,195,1) 0%, rgba(253,187,45,1) 100%)",border:"1px solid green",borderRadius:"5px 5px 0 0",padding:"5px",resize:"vertical",overflowY:"hidden",maxHeight:"200px",MozBoxShadow:"0px 3px 4px #de1dde",WebkitBoxShadow:"0px 3px 4px #de1dde",boxShadow:"0px 3px 4px #de1dde",minHeight:"60px",width:"100%",minWidth:"250px"},iconStyleProps:{height:"50px",width:"50px"},titleStyleProps:{fontSize:18,fontFamily:"Segoe UI, Arial, sans-serif",fontWeight:600,color:"white"},minimizeButtonStyleProps:{color:"white"},closeButtonStyleProps:{color:"white"},headerItemFocusStyleProps:{border:"2px dotted #000"}}},CustomizedHeader=Template.bind({});CustomizedHeader.args=advancedHeaderProps;var customHeaderRtl={controlProps:Object.assign({},customHeaderProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},customHeaderProps.styleProps)},CustomizedHeaderRtl=Template.bind({});CustomizedHeaderRtl.args=customHeaderRtl,Default.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},Default.parameters),CustomizedHeader.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},CustomizedHeader.parameters),CustomizedHeaderRtl.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},CustomizedHeaderRtl.parameters)},"./stories/component-stories/IncomingCall.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"ComponentOverrides",(function(){return ComponentOverrides}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Label/Label.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Calling Container/Incoming Call",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.IncomingCall};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.IncomingCall,Object.assign({},args))};Template.displayName="Template";var defaultIncomingCallProps={controlProps:{id:"oc-lcw-incomingcall",dir:"ltr",ariaLabel:"Incoming call area",hideAudioCall:!1,hideVideoCall:!1,hideDeclineCall:!1,hideIncomingCallTitle:!1,onDeclineCallClick:function onDeclineCallClick(){alert("download transcript clicked")},onAudioCallClick:function onAudioCallClick(){alert("email transcript clicked")},onVideoCallClick:function onVideoCallClick(){alert("audio notification clicked")},middleGroup:{gap:5,children:[]},leftGroup:{gap:5,children:[]},rightGroup:{gap:5,children:[]},declineCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"Reject call",iconName:"DeclineCall",iconSize:20},audioCallButtonProps:{id:"callAcceptButton",type:"icon",ariaLabel:"Accept voice call",iconName:"IncomingCall",iconSize:20},videoCallButtonProps:{id:"videoCallAcceptButton",type:"icon",ariaLabel:"Accept video Call",iconName:"Video",iconSize:20},incomingCallTitle:{id:"incomingCallMessage",text:"Incoming Call"}},styleProps:{generalStyleProps:{background:"#000",padding:"5px",height:"60px"},audioCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#008000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18},audioCallButtonHoverStyleProps:{filter:"brightness(0.8)"},videoCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#008000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18},videoCallButtonHoverStyleProps:{filter:"brightness(0.8)"},declineCallButtonHoverStyleProps:{filter:"brightness(0.8)",border:"1px solid #000"},declineCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#DC0000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18,marginLeft:"5px"},incomingCallTitleStyleProps:{margin:"0 5px",color:"#FFFFFF",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif"},itemFocusStyleProps:{outline:"2px solid #FFFFFF"}}},Default=Template.bind({});Default.args=defaultIncomingCallProps;var defaultRtl={controlProps:{id:"incomingCallPopup",ariaLabel:"Incoming call area",hideAudioCall:!1,hideVideoCall:!1,hideDeclineCall:!1,hideIncomingCallTitle:!1,onDeclineCallClick:function onDeclineCallClick(){alert("download transcript clicked")},onAudioCallClick:function onAudioCallClick(){alert("email transcript clicked")},onVideoCallClick:function onVideoCallClick(){alert("audio notification clicked")},middleGroup:{gap:5,children:[]},leftGroup:{gap:5,children:[]},rightGroup:{gap:5,children:[]},dir:"rtl",declineCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"Decline Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallRejectButtonBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},audioCallButtonProps:{id:"callAcceptButton",type:"icon",ariaLabel:"Audio Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallAcceptButtonBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},videoCallButtonProps:{id:"videoCallAcceptButton",type:"icon",ariaLabel:"Video Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoCallAcceptButtonIconBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},incomingCallTitle:{id:"incomingCallMessage",text:"Incoming Call"}},styleProps:Object.assign({},defaultIncomingCallProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var componentOverrideProps={incomingCallTitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{horizontal:!0,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AgentIconBase64,styles:{root:{height:"50px",width:"50px"},image:{height:"50px",width:"50px"}}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{verticalAlign:"center",horizontalAlign:"baseline",styles:{root:{paddingLeft:"10px"}},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{styles:{root:{color:"white",fontSize:13,fontWeight:"bold",padding:0}},children:"Omnichannel Agent 007"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{styles:{root:{color:"white",fontSize:11,padding:0}},children:"Incoming call"})]})]})},componentOverridesProps={componentOverrides:Object.assign({},componentOverrideProps),controlProps:Object.assign({},defaultIncomingCallProps.controlProps,{hideVideoCall:!0}),styleProps:Object.assign({},defaultIncomingCallProps.styleProps,{generalStyleProps:{background:"#C8C8C8",padding:"5px",minHeight:"60px",width:"50%",borderRadius:"4px 4px 4px 4px"}})},ComponentOverrides=Template.bind({});ComponentOverrides.args=componentOverridesProps,Default.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},Default.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},Rtl.parameters),ComponentOverrides.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},ComponentOverrides.parameters)},"./stories/component-stories/InputValidationPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultEmailTranscript",(function(){return DefaultEmailTranscript})),__webpack_require__.d(__webpack_exports__,"DefaultRtlEmailTranscript",(function(){return DefaultRtlEmailTranscript})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_src_common_Constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/common/Constants.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Input Validation Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.InputValidationPane};var InputValidationPaneTemplate=function InputValidationPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.InputValidationPane,Object.assign({},args))};InputValidationPaneTemplate.displayName="InputValidationPaneTemplate";var defaultInputValidationPaneProps={controlProps:{id:"oclcw-emailTranscriptDialogContainer",dir:"ltr",hideInputValidationPane:!1,inputValidationPaneAriaLabel:"Email Chat Transcript Pane",hideTitle:!1,titleText:"Email this chat transcript",hideSubtitle:!1,subtitleText:"This will be sent after your chat ends.",inputId:"oclcw-emailTranscriptDialogTextField",inputInitialText:"",hideInput:!1,inputAriaLabel:"Email this chat transcript. This will be sent after your chat ends. Email address text area",inputWithErrorMessageBorderColor:"rgb(164, 38, 44)",invalidInputErrorMessageText:"Enter a valid email address.",isButtonGroupHorizontal:!0,hideSendButton:!1,enableSendButton:!1,sendButtonText:"Send",sendButtonAriaLabel:"Send",hideCancelButton:!1,cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel",onSend:function onSend(input){alert("on send")},onCancel:function onCancel(){alert("on cancel")},checkInput:function checkInput(input){return new RegExp(_src_common_Constants__WEBPACK_IMPORTED_MODULE_7__.m.EmailRegex).test(input)}},styleProps:{generalStyleProps:{backgroundColor:"#fff",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderColor:"rgba(138, 141, 145, .24)",borderTop:"solid",borderTopWidth:"1px",bottom:"0",left:"0",minHeight:"180px",padding:"10px",position:"absolute",width:"100%",zIndex:"9999"},headerGroupStyleProps:{marginBottom:"15px"},titleStyleProps:{color:"#323130",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"18px",fontWeight:"500",marginBottom:"5px"},subtitleStyleProps:{color:"#262626",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",lineHeight:"16px",marginBottom:"10px"},inputStyleProps:{boxSizing:"border-box",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"400",textIndent:"10px",width:"100%"},invalidInputErrorMessageStyleProps:{color:"#a4262c",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"12px",height:"16px,",lineHeight:"16px",marginTop:"4px"},buttonGroupStyleProps:{gap:"10px"},sendButtonStyleProps:{color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontWeight:"500",lineHeight:"19px",textOverflow:"ellipsis",whiteSpace:"nowrap"},cancelButtonStyleProps:{border:"solid",borderColor:"#e0e3e6",borderWidth:"2px",boxSizing:"border-box",color:"#000",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontWeight:"500",lineHeight:"19px",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},customReactNode=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("button",{style:{color:"rgb(255, 255, 255)",backgroundColor:"green",borderRadius:"30px",borderColor:"green",borderStyle:"solid",float:"left",height:"100px",margin:"10px",padding:"10px",width:"100px"},children:"This is a custom button"}),sampleTwoInputValidationPaneProps={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps),styleProps:{headerGroupStyleProps:{marginBottom:"0"},titleStyleProps:{backgroundColor:"yellow",borderRadius:"30px",height:"100px",margin:"10px",padding:"10px",width:"100px"},inputStyleProps:{margin:"10px",width:"300px"},sendButtonStyleProps:{backgroundColor:"purple",borderRadius:"30px",height:"100px",marginLeft:"10px",padding:"10px",width:"100px"},cancelButtonStyleProps:{backgroundColor:"red",borderRadius:"30px",height:"100px",marginLeft:"10px",padding:"10px",width:"100px"}},componentOverrides:{subtitle:customReactNode}},DefaultEmailTranscript=InputValidationPaneTemplate.bind({});DefaultEmailTranscript.args=defaultInputValidationPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps)},DefaultRtlEmailTranscript=InputValidationPaneTemplate.bind({});DefaultRtlEmailTranscript.args=defaultRtlProps;var sample1Props={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{isButtonGroupHorizontal:!1,enableSendButton:!0}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps)},Sample1=InputValidationPaneTemplate.bind({});Sample1.args=sample1Props;var Sample2=InputValidationPaneTemplate.bind({});Sample2.args=sampleTwoInputValidationPaneProps;var customReactNode1=Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{style:{backgroundColor:"purple",color:"white",fontSize:"18px",marginBottom:"10px"},children:"This is a custom div"})),customReactNode2=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{}),sample3Props={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{enableSendButton:!0}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps),componentOverrides:Object.assign({},defaultInputValidationPaneProps.componentOverrides,{input:customReactNode1,invalidInputErrorMessage:customReactNode2})},Sample3=InputValidationPaneTemplate.bind({});Sample3.args=sample3Props,DefaultEmailTranscript.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},DefaultEmailTranscript.parameters),DefaultRtlEmailTranscript.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},DefaultRtlEmailTranscript.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample3.parameters)},"./stories/component-stories/LoadingPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LoadingPaneDefault",(function(){return LoadingPaneDefault})),__webpack_require__.d(__webpack_exports__,"LoadingPaneRTL",(function(){return LoadingPaneRTL})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample2",(function(){return LoadingPaneSample2})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample3",(function(){return LoadingPaneSample3})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample4",(function(){return LoadingPaneSample4}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _fluentui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.types.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Spinner/Spinner.types.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Loading Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingPane};var LoadingPaneTemplate=function LoadingPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingPane,Object.assign({},args))};LoadingPaneTemplate.displayName="LoadingPaneTemplate";var defaultLoadingPaneProps={controlProps:{id:"oc-lcw-loadingpane",dir:"auto",hideLoadingPane:!1,hideIcon:!1,hideTitle:!1,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"live chat support ...",hideSpinner:!1,hideSpinnerText:!1,spinnerText:"Loading ..."},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderWidth:"3px",borderStyle:"solid",backgroundColor:"#315fa2",borderColor:"#F1F1F1",position:"absolute",justifyContent:"center",alignItems:"center"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"14px",color:"#F1F1F1",margin:"0px 0px 0px 0px",textAlign:"center",display:"flex",order:2,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"bold",fontSize:"18px",color:"#F1F1F1",margin:"0px 0px 50px 10px",textAlign:"center",display:"flex",order:3,alignSelf:"auto"},iconStyleProps:{borderRadius:"50%",backgroundColor:"#F1F1F1",boxShadow:"0px 0px 0.5px 7px #3F75AB",width:"86px",height:"86px",margin:"0px 0px 20px 0px",display:"flex",order:1,alignSelf:"auto"},iconImageProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.ModernChatIconBase64,imageFit:_fluentui_react__WEBPACK_IMPORTED_MODULE_2__.b.center,width:"86px",height:"86px",shouldFadeIn:!1,shouldStartVisible:!0},spinnerStyleProps:{width:"42px",height:"42px",margin:"0px 0px 0px 0px",display:"flex",order:4,alignSelf:"auto"},spinnerTextStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"9px",color:"#F1F1F1",margin:"0px 0px 0px 5px",textAlign:"center",order:5,alignSelf:"auto"}}},sampleOneLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample1",dir:"rtl"}),styleProps:Object.assign({},defaultLoadingPaneProps.styleProps)},sampleTwoLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample2",hideIcon:!0,hideTitle:!0,hideSubtitle:!0,hideSpinnerText:!0,spinnerSize:_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a.large}),styleProps:Object.assign({},defaultLoadingPaneProps.styleProps,{generalStyleProps:{borderStyle:"dotted",borderRadius:"50%",borderWidth:"5px",backgroundColor:"#767676",backgroundSize:"250px",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.ModernChatIconBase64+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderColor:"",boxShadow:"0px 0px 10px 5px #B2B2B2",width:"380px",height:"380px",position:"absolute",left:"1%",top:"2%",justifyContent:"center",alignItems:"left",flexFlow:"row wrap"},spinnerStyleProps:{backgroundColor:"black",borderRadius:"40%",backgroundSize:"50px",width:"50px",height:"50px",margin:"250px 0px 0px 0px",order:1,alignSelf:"center"}})},sampleThreeLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample3",hideIcon:!0,titleText:"Please Wait ...",subtitleText:"Loading Content",spinnerText:"Processing ...",spinnerSize:_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a.large}),styleProps:{generalStyleProps:{borderStyle:"solid",borderRadius:"50%",borderWidth:"5px",backgroundColor:"#336669",backgroundSize:"",borderColor:"",boxShadow:"0px 0px 10px 3px #B2B2B2",width:"300px",height:"400px",position:"absolute",left:"15%",top:"20%",justifyContent:"center",alignItems:"left",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Brush Script MT', cursive",fontWeight:"normal",fontSize:"17px",color:"#F1F1F1",width:"100px",height:"10px",margin:"0px 0px 30px 50px",textAlign:"center",order:1,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Courier New', monospace",fontWeight:"bold",fontSize:"22px",color:"#F1F1F1",width:"200px",height:"10px",margin:"0px 0px 50px 0px",textAlign:"center",order:2,alignSelf:"center"},spinnerStyleProps:{borderRadius:"50%",backgroundSize:"80px",width:"80px",height:"80px",margin:"0px 0px 0px 0px",order:4,alignSelf:"center"},spinnerTextStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"9px",color:"#F1F1F1",width:"100px",height:"10px",margin:"0px 0px 0px 4px",textAlign:"center",order:5,alignSelf:"center"}}},LoadingPaneDefault=LoadingPaneTemplate.bind({});LoadingPaneDefault.args=defaultLoadingPaneProps;var LoadingPaneRTL=LoadingPaneTemplate.bind({});LoadingPaneRTL.args=sampleOneLoadingPaneProps;var LoadingPaneSample2=LoadingPaneTemplate.bind({});LoadingPaneSample2.args=sampleTwoLoadingPaneProps;var LoadingPaneSample3=LoadingPaneTemplate.bind({});LoadingPaneSample3.args=sampleThreeLoadingPaneProps;var loadingPaneSample4Props={componentOverrides:{icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LegacyChatIconBase64}),title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h2",{children:"Custom Title"}),subtitle:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{style:{marginBottom:"10px"},children:"Custom Subtitle"})),spinner:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingSpinnerBase64}),spinnerText:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{style:{marginTop:"10px"},children:"Custom Spinner Text"})}},LoadingPaneSample4=LoadingPaneTemplate.bind({});LoadingPaneSample4.args=loadingPaneSample4Props,LoadingPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneDefault.parameters),LoadingPaneRTL.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneRTL.parameters),LoadingPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample2.parameters),LoadingPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample3.parameters),LoadingPaneSample4.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample4.parameters)},"./stories/component-stories/OOOHPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"OOOHPaneDefault",(function(){return OOOHPaneDefault})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample1",(function(){return OOOHPaneSample1})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample2",(function(){return OOOHPaneSample2})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample3",(function(){return OOOHPaneSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/OutOfOfficeHours Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.OutOfOfficeHoursPane};var OOOHPaneTemplate=function OOOHPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.OutOfOfficeHoursPane,Object.assign({},args))};OOOHPaneTemplate.displayName="OOOHPaneTemplate";var defaultOOOHPaneProps={controlProps:{id:"oc-lcw-outofofficehours-pane",dir:"auto",hideOOOHPane:!1,hideTitle:!1,titleText:"Thanks for contacting us. You have reached us outside of our operating hours. An agent will respond when we open."},styleProps:{generalStyleProps:{borderStyle:"solid",width:"360px",height:"560px",borderRadius:0,borderWidth:"3px",backgroundColor:"#FFFFFF",backgroundSize:"",backgroundImage:"",borderColor:"#F1F1F1",position:"absolute",justifyContent:"center",alignItems:"stretch",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"14px",color:"#000000",textAlign:"center",alignSelf:"auto"}}},sampleOneOOOHPaneProps={controlProps:Object.assign({},defaultOOOHPaneProps.controlProps,{id:"oc-lcw-outofofficehourspane-sample1",dir:"rtl"}),styleProps:Object.assign({},defaultOOOHPaneProps.styleProps)},sampleTwoOOOHPaneProps={controlProps:Object.assign({},defaultOOOHPaneProps.controlProps,{id:"oc-lcw-outofofficehourspane-sample2",titleText:"Sorry but we are not operating during these hours!!"}),styleProps:{generalStyleProps:{borderStyle:"dotted solid double dashed",borderRadius:"40%",borderWidth:"5px",backgroundColor:"#FFFFFF",backgroundSize:"200px",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ErrorIconBase64+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderColor:"#F2FFF1",boxShadow:"0px 0px 2px 3px #DDDDD7",width:"450px",height:"350px",position:"absolute",left:"20%",top:"20%",justifyContent:"center",alignItems:"stretch",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"15px",color:"#000000",width:"400px",height:"300px",margin:"275px 0px 0px 20px",textAlign:"center",alignSelf:"auto"}}},OOOHPaneDefault=OOOHPaneTemplate.bind({});OOOHPaneDefault.args=defaultOOOHPaneProps;var OOOHPaneSample1=OOOHPaneTemplate.bind({});OOOHPaneSample1.args=sampleOneOOOHPaneProps;var OOOHPaneSample2=OOOHPaneTemplate.bind({});OOOHPaneSample2.args=sampleTwoOOOHPaneProps;var OOOHPaneSample3Props={componentOverrides:{title:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{textAlign:"center"},children:"Custom Message"}))}},OOOHPaneSample3=OOOHPaneTemplate.bind({});OOOHPaneSample3.args=OOOHPaneSample3Props,OOOHPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneDefault.parameters),OOOHPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample1.parameters),OOOHPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample2.parameters),OOOHPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample3.parameters)},"./stories/component-stories/PostChatSurveyPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PostChatSurveyPaneDefault",(function(){return PostChatSurveyPaneDefault})),__webpack_require__.d(__webpack_exports__,"PostChatSurveyPaneSample1",(function(){return PostChatSurveyPaneSample1}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/PostChatSurvey Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PostChatSurveyPane};var PostChatSurveyPaneTemplate=function PostChatSurveyPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PostChatSurveyPane,Object.assign({},args))};PostChatSurveyPaneTemplate.displayName="PostChatSurveyPaneTemplate";var PostChatSurveyPaneDefault=PostChatSurveyPaneTemplate.bind({});PostChatSurveyPaneDefault.args={controlProps:{id:"oc-lcw-postchatsurvey-pane",title:"Post chat survey pane",surveyURL:"https://tip.customervoice.microsoft.com/Pages/ResponsePage.aspx?id=YkJf70oOwkiRb-bmaZvb3VBXiZokKptMk8ceKB79-oxUQ0lCU0VMQ0IxWUE3WFgzVTJBMjNRNlVISSQlQCNjPTEu&vt=ef5f4262-0e4a-48c2-916f-e6e6699bdbdd_38720c9e-b284-47d0-aea0-f55e9699ee00_637783044550000000_TIP_Hash_07NiQh1yjku%2f4%2fB0UqFs5GZEwGEKXBNwhSuJJERkz3c%3d"},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderStyle:"solid",borderRadius:0,borderWidth:"3px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1"}}};var PostChatSurveyPaneSample1=PostChatSurveyPaneTemplate.bind({});PostChatSurveyPaneSample1.args={controlProps:{id:"oc-lcw-postchatsurvey-pane-sample1",title:"Post chat survey pane",surveyURL:"https://tip.customervoice.microsoft.com/Pages/ResponsePage.aspx?id=YkJf70oOwkiRb-bmaZvb3VBXiZokKptMk8ceKB79-oxUQ0lCU0VMQ0IxWUE3WFgzVTJBMjNRNlVISSQlQCNjPTEu&vt=ef5f4262-0e4a-48c2-916f-e6e6699bdbdd_38720c9e-b284-47d0-aea0-f55e9699ee00_637783044550000000_TIP_Hash_07NiQh1yjku%2f4%2fB0UqFs5GZEwGEKXBNwhSuJJERkz3c%3d"},styleProps:{generalStyleProps:{borderStyle:"solid",borderRadius:"4px",borderWidth:"3px",maxWidth:"390px",maxHeight:"450px",position:"absolute",left:"15%",top:"20%",backgroundColor:"#FFFFFF",borderColor:"#FFFFFF"}}},PostChatSurveyPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <PostChatSurveyPane {...args}></PostChatSurveyPane>"}},PostChatSurveyPaneDefault.parameters),PostChatSurveyPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <PostChatSurveyPane {...args}></PostChatSurveyPane>"}},PostChatSurveyPaneSample1.parameters)},"./stories/component-stories/PreChatSurveyPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneDefault",(function(){return PreChatSurveyPaneDefault})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample1",(function(){return PreChatSurveyPaneSample1})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample2",(function(){return PreChatSurveyPaneSample2})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample3",(function(){return PreChatSurveyPaneSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/PreChatSurvey Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PreChatSurveyPane};var PreChatSurveyPaneTemplate=function PreChatSurveyPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PreChatSurveyPane,Object.assign({},args))};PreChatSurveyPaneTemplate.displayName="PreChatSurveyPaneTemplate";var defaultPreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-default",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#000000"}},"backgroundColor":"#FFFFFF"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"name pls?","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"multi\\nmulti\\nmulti","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"options","isMultiSelect":false,"value":"1","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","isSubtle":true,"text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderStyle:"solid",borderRadius:"4px",borderWidth:"3px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1",overflowY:"auto"},customButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",color:"#FFFFFF"},adaptiveCardContainerStyleProps:{border:"1px solid #ECECEC",borderRadius:"4px",margin:"3%"}}},sampleOnePreChatSurveyPaneProps={controlProps:Object.assign({},defaultPreChatSurveyPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultPreChatSurveyPaneProps.styleProps)},sampleTwoPreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-sample2",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#000000"}},"backgroundColor":"#FFFFFF"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"TextBlock","text":"Fields marked with * are mandatory.","wrap":true,"color":"attention"},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"Name","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"multi\\nmulti\\nmulti","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"options","isMultiSelect":false,"value":"1","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.ChoiceSet","id":"965cc6dc-c6bf-4496-9006-38d686de965a","label":"What option do you want?","style":"expanded","isMultiSelect":false,"value":"1","choices":[{"title":"One","value":"1"},{"title":"Two","value":"2"},{"title":"Three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:Object.assign({},defaultPreChatSurveyPaneProps.styleProps)},sampleThreePreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-sample3",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#C3F60F"}},"backgroundColor":"#6A1E7A"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.5","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"Name","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"c7ed0164-e6a9-4cf6-ab03-819f60d0289f","label":"Company Name","style":"text","maxLength":100,"isRequired":true,"errorMessage":"Company Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"How are you feeling today?","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.Text","id":"03d7114a-5e87-4718-b60d-0e6802176875","label":"Comments","style":"text","isMultiline":true,"maxLength":250,"isRequired":true,"errorMessage":"Comments are required"},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"Please Select One of the following","isMultiSelect":false,"isRequired":true,"errorMessage":"A choice is required","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:{generalStyleProps:{borderStyle:"solid",borderWidth:"4px",backgroundColor:"#6A1E7A",maxWidth:"280px",maxHeight:"420px",position:"absolute",left:"15%",top:"20%",overflowY:"auto"},customButtonStyleProps:{backgroundColor:"#C3F60F",color:"#800080"},adaptiveCardContainerStyleProps:{border:"1px solid #C3F60F",borderRadius:"4px",margin:"10px 10px 0px 10px"}}},PreChatSurveyPaneDefault=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneDefault.args=defaultPreChatSurveyPaneProps;var PreChatSurveyPaneSample1=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample1.args=sampleOnePreChatSurveyPaneProps;var PreChatSurveyPaneSample2=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample2.args=sampleTwoPreChatSurveyPaneProps;var PreChatSurveyPaneSample3=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample3.args=sampleThreePreChatSurveyPaneProps,PreChatSurveyPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneDefault.parameters),PreChatSurveyPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample1.parameters),PreChatSurveyPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample2.parameters),PreChatSurveyPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample3.parameters)},"./stories/component-stories/ProactiveChatPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultRtl",(function(){return DefaultRtl})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Proactive Chat Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatPane};var ProactiveChatPaneTemplate=function ProactiveChatPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatPane,Object.assign({},args))};ProactiveChatPaneTemplate.displayName="ProactiveChatPaneTemplate";var defaultProactiveChatPaneProps={controlProps:{id:"oc-lcw-proactivechat",dir:"ltr",hideProactiveChatPane:!1,proactiveChatPaneAriaLabel:"Proactive Chat Pane",hideTitle:!1,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"Live chat support!",hideCloseButton:!1,closeButtonAriaLabel:"Close Button",isBodyContainerHorizantal:!1,hideBodyTitle:!1,bodyTitleText:"Hi! Have any questions? I am here to help.",hideStartButton:!1,startButtonText:"Chat Now",startButtonAriaLabel:"Chat Now",onClose:function onClose(){alert("on close")},onStart:function onStart(){alert("on start")}},styleProps:{generalStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderRadius:"8px",boxShadow:"0 0 4px rgb(102 102 102 / 50%)",bottom:"0",height:"auto",margin:"3px",minHeight:"133px",position:"absolute",right:"0",width:"245px",zIndex:"9999"},headerContainerStyleProps:{backgroundColor:"rgb(49, 95, 162)",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatBannerBase64+")",backgroundPosition:"initial",backgroundRepeat:"no-repeat",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",height:"90px",padding:"10px 16px 10px 16px"},textContainerStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"19px",width:"95%"},titleStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif"},subtitleStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"18px",fontWeight:"600"},closeButtonStyleProps:{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CloseChatButtonIconBase64+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",color:"#605e5c",cursor:"pointer",height:"14px",lineHeight:"14px",textAlign:"center",width:"14px",zIndex:"inherit"},bodyTitleStyleProps:{color:"rgb(0, 0, 0)",display:"inline-block",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",lineHeight:"19px",padding:"16px",overflow:"hidden",wordBreak:"break-word"},startButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",borderRadius:"40px",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",margin:"20px 16px 20px 16px",padding:"6px 23px 6px 23px",width:"50%",zIndex:"inherit"}}},sampleOneProactiveChatPaneProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps),styleProps:{closeButtonStyleProps:{height:"20px",width:"20px"},closeButtonHoveredStyleProps:{backgroundColor:"rgb(129, 133, 137)"},bodyTitleStyleProps:{alignItems:"center",display:"flex",textAlign:"center"},startButtonStyleProps:{borderRadius:"10px",height:"100px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},sampleTwoProactiveChatPaneProps={controlProps:{id:"oclcw-incomingproactivechat",dir:"ltr",hideProactiveChatPane:!1,proactiveChatPaneAriaLabel:"Proactive Chat Pane",hideTitle:!0,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"Live chat support!",hideCloseButton:!1,isBodyContainerHorizantal:!0,hideBodyTitle:!1,hideStartButton:!1,startButtonText:"Chat Now",startButtonAriaLabel:"Chat Now",onStart:function onStart(){alert("on start")}},componentOverrides:{closeButton:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{color:"rgb(255, 255, 255)",float:"right",backgroundColor:"green",borderRadius:"50px",fontSize:"10px",height:"20px",margin:"10px 10px 0 0",padding:"10px",width:"20px"},children:"End Chat"})),bodyTitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{style:{color:"rgb(255, 255, 255)",backgroundColor:"green",borderRadius:"30px",borderColor:"green",borderStyle:"solid",height:"80px",margin:"30px 15px 0 0",padding:"10px",width:"160px"},children:"This is a custom button"})},styleProps:{generalStyleProps:{borderColor:"black",borderRadius:"50px",borderStyle:"solid",borderWidth:"1px"},headerContainerStyleProps:{backgroundColor:"blue",borderRadius:"50px"},textContainerStyleProps:{borderRadius:"50px",margin:"10px 0 10px 10px"},bodyContainerStyleProps:{borderRadius:"50px",overflow:"auto",padding:"10px"},startButtonStyleProps:{backgroundColor:"black",borderRadius:"50px",height:"100px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},sampleThreeProactiveChatPaneProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps),styleProps:{generalStyleProps:{backgroundColor:"purple",boxShadow:"20px 20px 4px rgb(102 102 102 / 50%)",float:"right",height:"400px",position:"relative"},headerContainerStyleProps:{backgroundColor:"rgb(0, 0, 0)"},closeButtonStyleProps:{height:"20px",width:"20px"},closeButtonHoveredStyleProps:{backgroundColor:"rgb(129, 133, 137)"},bodyContainerStyleProps:{backgroundColor:"yellow",bottom:"20px",left:"20px",padding:"10px",position:"absolute",right:"20px"},startButtonStyleProps:{backgroundColor:"black",height:"30px",padding:"5px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},Default=ProactiveChatPaneTemplate.bind({});Default.args=defaultProactiveChatPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultProactiveChatPaneProps.styleProps)},DefaultRtl=ProactiveChatPaneTemplate.bind({});DefaultRtl.args=defaultRtlProps;var Sample1=ProactiveChatPaneTemplate.bind({});Sample1.args=sampleOneProactiveChatPaneProps;var Sample2=ProactiveChatPaneTemplate.bind({});Sample2.args=sampleTwoProactiveChatPaneProps;var Sample3=ProactiveChatPaneTemplate.bind({});Sample3.args=sampleThreeProactiveChatPaneProps,Default.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Default.parameters),DefaultRtl.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},DefaultRtl.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample3.parameters)},"./stories/component-stories/ReconnectChatPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultRtl",(function(){return DefaultRtl})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3})),__webpack_require__.d(__webpack_exports__,"Sample4",(function(){return Sample4})),__webpack_require__.d(__webpack_exports__,"Sample5",(function(){return Sample5}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Reconnect Chat Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ReconnectChatPane};var ReconnectChatPaneTemplate=function ReconnectChatPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ReconnectChatPane,Object.assign({},args))};ReconnectChatPaneTemplate.displayName="ReconnectChatPaneTemplate";var defaultReconnectChatPaneProps={controlProps:{id:"oc-lcw-reconnectchat-pane",dir:"ltr",hideReconnectChatPane:!1,reconnectChatPaneAriaLabel:"Reconnect Chat Pane",hideTitle:!1,titleText:"Previous session detected",hideSubtitle:!1,subtitleText:"We have detected a previous chat session. Would you like to continue with your previous session?",hideIcon:!1,iconAriaLabel:"Reconnect Chat Pane Icon",isButtonGroupHorizontal:!1,hideContinueChatButton:!1,continueChatButtonText:"Continue conversation",continueChatButtonAriaLabel:"Continue conversation",hideStartNewChatButton:!1,startNewChatButtonText:"Start new conversation",startNewChatButtonAriaLabel:"Start new conversation",onContinueChat:function onContinueChat(){alert("on continue conversation")},onStartNewChat:function onStartNewChat(){alert("on start new conversation")},onMinimize:function onMinimize(){alert("on minimize")}},styleProps:{generalStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderColor:"#E6E6E6",borderRadius:"4px",borderStyle:"solid",borderWidth:"3px",padding:"15px",height:"100%",width:"100%"},wrapperStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderColor:"#E6E6E6",borderRadius:"0 8px 8px 8px",borderStyle:"solid",borderWidth:"1px",padding:"20px",width:"100%"},titleStyleProps:{color:"rgb(0, 0, 0)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",lineHeight:"19px",marginBottom:"10px"},subtitleStyleProps:{color:"rgb(0, 0, 0)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"400",lineHeight:"19px"},iconStyleProps:{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatReconnectIconBase64+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"200px",height:"130px",margin:"0 auto",width:"130px"},buttonGroupStyleProps:{alignItems:"stretch"},continueChatButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",height:"60px",marginBottom:"5px",padding:"4px 10px 5px 10px"},continueChatButtonHoveredStyleProps:{filter:"brightness(0.8)"},startNewChatButtonStyleProps:{backgroundColor:"rgb(0, 0, 0)",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",height:"60px",padding:"4px 10px 5px 10px"},startNewChatButtonHoveredStyleProps:{backgroundColor:"rgb(132, 132, 130)"}}},sampleThreeReconnectChatPaneProps={controlProps:{id:"lcw-components-reconnect-chat-pane",dir:"ltr",hideReconnectChatPane:!1,reconnectChatPaneAriaLabel:"Reconnect Chat Pane",hideTitle:!1,titleText:"Previous session detected",hideSubtitle:!0,subtitleText:"We have detected a previous chat session. Would you like to continue with your previous session?",hideIcon:!1,iconAriaLabel:"Reconnect Chat Pane Icon",isButtonGroupHorizontal:!1,hideContinueChatButton:!1,continueChatButtonText:"Continue conversation",continueChatButtonAriaLabel:"Continue conversation",hideStartNewChatButton:!0,startNewChatButtonText:"Start new conversation",startNewChatButtonAriaLabel:"Start new conversation",onContinueChat:function onContinueChat(){alert("on continue conversation")},onStartNewChat:function onStartNewChat(){alert("on start new conversation")}},styleProps:{generalStyleProps:{backgroundColor:"red",borderColor:"black",borderRadius:"20%",width:"600px"},wrapperStyleProps:{backgroundColor:"green",borderRadius:"20%"},titleStyleProps:{color:"white",fontSize:"20px",textAlign:"center"},buttonGroupStyleProps:{alignItems:"center"},continueChatButtonStyleProps:{fontSize:"20px",height:"200px",width:"200px"}}},Default=ReconnectChatPaneTemplate.bind({});Default.args=defaultReconnectChatPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps)},DefaultRtl=ReconnectChatPaneTemplate.bind({});DefaultRtl.args=defaultRtlProps;var sample1Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{isButtonGroupHorizontal:!0}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{iconStyleProps:{margin:"10px"},continueChatButtonStyleProps:{marginRight:"10px",width:"100%"},startNewChatButtonStyleProps:{width:"100%"}})},Sample1=ReconnectChatPaneTemplate.bind({});Sample1.args=sample1Props;var customReactNode=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h1",{style:{color:"blue",backgroundColor:"yellow"},children:"This is a custom element that overrides the icon"}),sample2Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps),componentOverrides:Object.assign({},defaultReconnectChatPaneProps.componentOverrides,{icon:customReactNode})},Sample2=ReconnectChatPaneTemplate.bind({});Sample2.args=sample2Props;var Sample3=ReconnectChatPaneTemplate.bind({});Sample3.args=sampleThreeReconnectChatPaneProps;var sample4Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{generalStyleProps:{width:"350px"}})},Sample4=ReconnectChatPaneTemplate.bind({});Sample4.args=sample4Props;var customReactNode1=Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("input",{type:"text",placeholder:"Input text"})),sample5Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{isIncomingCall:!0}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{generalStyleProps:{width:"350px"}}),componentOverrides:Object.assign({},defaultReconnectChatPaneProps.componentOverrides,{continueChatButton:customReactNode1})},Sample5=ReconnectChatPaneTemplate.bind({});Sample5.args=sample5Props,Default.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Default.parameters),DefaultRtl.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},DefaultRtl.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample3.parameters),Sample4.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample4.parameters),Sample5.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample5.parameters)},"./stories/component-stories/common/commandbutton/CommandButton.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";var _fluentui_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/DefaultButton/DefaultButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/IconButton/IconButton.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function CommandButton(props){var iconProp=props.imageIconProps?{imageProps:props.imageIconProps}:{iconName:props.iconName,styles:{root:props.styles}},iconButtonStyles={root:props.styles,rootHovered:props.hoverStyles,rootFocused:props.focusStyles},handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((function(){if(null!=props&&props.onClick){var _props$customEvent,customEvent=null!==(_props$customEvent=props.customEvent)&&void 0!==_props$customEvent?_props$customEvent:{eventName:"onClick",elementType:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ElementType.Custom,elementId:null==props?void 0:props.id};_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.BroadcastService.postMessage(customEvent),null==props||props.onClick()}}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:["text"===props.type&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_0__.a,{id:props.id,text:props.text,ariaLabel:props.ariaLabel,onClick:handleOnClick,disabled:props.disabled,className:props.className,styles:iconButtonStyles}),"icon"===props.type&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_1__.a,{id:props.id,iconProps:iconProp,title:props.ariaLabel,ariaLabel:props.ariaLabel,disabled:props.disabled,styles:iconButtonStyles,onClick:handleOnClick,className:props.className})]})}__webpack_exports__.a=CommandButton;try{CommandButton.displayName="CommandButton",CommandButton.__docgenInfo={description:"",displayName:"CommandButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"icon"'}]}},isAudioMuted:{defaultValue:null,description:"",name:"isAudioMuted",required:!1,type:{name:"boolean"}},iconName:{defaultValue:null,description:"",name:"iconName",required:!1,type:{name:"string"}},imageIconProps:{defaultValue:null,description:"",name:"imageIconProps",required:!1,type:{name:"IImageProps"}},toggleIconName:{defaultValue:null,description:"",name:"toggleIconName",required:!1,type:{name:"string"}},imageToggleIconProps:{defaultValue:null,description:"",name:"imageToggleIconProps",required:!1,type:{name:"IImageProps"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string"}},toggleAriaLabel:{defaultValue:null,description:"",name:"toggleAriaLabel",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"IStyle"}},hoverStyles:{defaultValue:null,description:"",name:"hoverStyles",required:!1,type:{name:"IStyle"}},focusStyles:{defaultValue:null,description:"",name:"focusStyles",required:!1,type:{name:"IStyle"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},customEvent:{defaultValue:null,description:"",name:"customEvent",required:!1,type:{name:"ICustomEvent"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/component-stories/common/commandbutton/CommandButton.tsx#CommandButton"]={docgenInfo:CommandButton.__docgenInfo,name:"CommandButton",path:"stories/component-stories/common/commandbutton/CommandButton.tsx#CommandButton"})}catch(__react_docgen_typescript_loader_error){}},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-a11y/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-knobs/dist/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./stories/.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){},10:function(module,exports){},11:function(module,exports){},12:function(module,exports){},13:function(module,exports){},14:function(module,exports){},15:function(module,exports){},16:function(module,exports){},17:function(module,exports){},18:function(module,exports){},19:function(module,exports){},2:function(module,exports){},20:function(module,exports){},21:function(module,exports){},22:function(module,exports){},23:function(module,exports){},24:function(module,exports){},25:function(module,exports){},26:function(module,exports){},27:function(module,exports){},28:function(module,exports){},29:function(module,exports){},3:function(module,exports){},30:function(module,exports){},31:function(module,exports){},32:function(module,exports){},33:function(module,exports){},34:function(module,exports){},35:function(module,exports){},36:function(module,exports){},4:function(module,exports){},5:function(module,exports){},6:function(module,exports){},7:function(module,exports){},8:function(module,exports){},9:function(module,exports){}},[[0,5,6]]]);
//# sourceMappingURL=main.67df0bd1.iframe.bundle.js.map