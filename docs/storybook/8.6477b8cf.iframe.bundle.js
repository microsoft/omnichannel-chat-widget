/*! For license information please see 8.6477b8cf.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return strShimFunction})),__webpack_require__.d(__webpack_exports__,"e",(function(){return strShimObject})),__webpack_require__.d(__webpack_exports__,"g",(function(){return strShimUndefined})),__webpack_require__.d(__webpack_exports__,"f",(function(){return strShimPrototype})),__webpack_require__.d(__webpack_exports__,"c",(function(){return strDefault})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ObjClass})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ObjProto}));var strShimFunction="function",strShimObject="object",strShimUndefined="undefined",strShimPrototype="prototype",strDefault="default",ObjClass=Object,ObjProto=ObjClass[strShimPrototype]},"./node_modules/@microsoft/applicationinsights-shims/dist-es5/TsLibShims.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return __assignFn})),__webpack_require__.d(__webpack_exports__,"b",(function(){return __extendsFn})),__webpack_require__.d(__webpack_exports__,"c",(function(){return __spreadArrayFn}));var _nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js"),_Constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.q)()||{}).Symbol,(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.q)()||{}).Reflect;var __assignFn=_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.bb||function __objAssignFnImpl(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])_Constants__WEBPACK_IMPORTED_MODULE_1__.b.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},_extendStaticsFn=function extendStaticsFn(d,b){return _extendStaticsFn=_Constants__WEBPACK_IMPORTED_MODULE_1__.a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},_extendStaticsFn(d,b)};function __extendsFn(d,b){function __(){this.constructor=d}_typeof(b)!==_Constants__WEBPACK_IMPORTED_MODULE_1__.d&&null!==b&&Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Cb)("Class extends value "+String(b)+" is not a constructor or null"),_extendStaticsFn(d,b),d[_Constants__WEBPACK_IMPORTED_MODULE_1__.f]=null===b?Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.cb)(b):(__[_Constants__WEBPACK_IMPORTED_MODULE_1__.f]=b[_Constants__WEBPACK_IMPORTED_MODULE_1__.f],new __)}function __spreadArrayFn(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}},"./node_modules/@microsoft/applicationinsights-web/dist-es5/applicationinsights-web.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ApplicationInsights",(function(){return AISku_AppInsightsSku})),__webpack_require__.d(__webpack_exports__,"ApplicationInsightsContainer",(function(){return ApplicationInsightsContainer_ApplicationInsightsContainer})),__webpack_require__.d(__webpack_exports__,"AppInsightsCore",(function(){return AppInsightsCore_AppInsightsCore})),__webpack_require__.d(__webpack_exports__,"LoggingSeverity",(function(){return LoggingSeverity})),__webpack_require__.d(__webpack_exports__,"PerfEvent",(function(){return PerfManager_PerfEvent})),__webpack_require__.d(__webpack_exports__,"PerfManager",(function(){return PerfManager_PerfManager})),__webpack_require__.d(__webpack_exports__,"doPerf",(function(){return doPerf})),__webpack_require__.d(__webpack_exports__,"NotificationManager",(function(){return NotificationManager_NotificationManager})),__webpack_require__.d(__webpack_exports__,"BaseTelemetryPlugin",(function(){return BaseTelemetryPlugin_BaseTelemetryPlugin})),__webpack_require__.d(__webpack_exports__,"SeverityLevel",(function(){return SeverityLevel})),__webpack_require__.d(__webpack_exports__,"Event",(function(){return Event_Event})),__webpack_require__.d(__webpack_exports__,"Exception",(function(){return Exception_Exception})),__webpack_require__.d(__webpack_exports__,"Metric",(function(){return Metric_Metric})),__webpack_require__.d(__webpack_exports__,"PageView",(function(){return PageView_PageView})),__webpack_require__.d(__webpack_exports__,"PageViewPerformance",(function(){return PageViewPerformance_PageViewPerformance})),__webpack_require__.d(__webpack_exports__,"RemoteDependencyData",(function(){return RemoteDependencyData_RemoteDependencyData})),__webpack_require__.d(__webpack_exports__,"Trace",(function(){return Trace_Trace})),__webpack_require__.d(__webpack_exports__,"DistributedTracingModes",(function(){return DistributedTracingModes})),__webpack_require__.d(__webpack_exports__,"EventPersistence",(function(){return EventPersistence})),__webpack_require__.d(__webpack_exports__,"Sender",(function(){return Sender_Sender})),__webpack_require__.d(__webpack_exports__,"ApplicationAnalytics",(function(){return AnalyticsPlugin_AnalyticsPlugin})),__webpack_require__.d(__webpack_exports__,"PropertiesPlugin",(function(){return dist_es5_PropertiesPlugin})),__webpack_require__.d(__webpack_exports__,"DependenciesPlugin",(function(){return ajax_AjaxMonitor})),__webpack_require__.d(__webpack_exports__,"CfgSyncPlugin",(function(){return CfgSyncPlugin_CfgSyncPlugin}));var DynamicProto_a,ts_utils=__webpack_require__("./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var Constructor="constructor",Prototype="prototype",strFunction="function",DynInstFuncTable="_dynInstFuncs",DynProxyTag="_isDynProxy",DynClassName="_dynClass",DynClassNamePrefix="_dynCls$",DynInstChkTag="_dynInstChk",DynAllowInstChkTag=DynInstChkTag,DynProtoDefaultOptions="_dfOpts",UnknownValue="_unknown_",str__Proto="__proto__",DynProtoBaseProto="_dyn"+str__Proto,DynProtoCurrent="_dynInstProto",strUseBaseInst="useBaseInst",strSetInstFuncs="setInstFuncs",Obj=Object,_objGetPrototypeOf=Obj.getPrototypeOf,_objGetOwnProps=Obj.getOwnPropertyNames,_gbl=Object(ts_utils.q)(),_gblInst=_gbl.__dynProto$Gbl||(_gbl.__dynProto$Gbl={o:(DynamicProto_a={},DynamicProto_a[strSetInstFuncs]=!0,DynamicProto_a[strUseBaseInst]=!0,DynamicProto_a),n:1e3});function _isObjectOrArrayPrototype(target){return target&&(target===Obj[Prototype]||target===Array[Prototype])}function _isObjectArrayOrFunctionPrototype(target){return _isObjectOrArrayPrototype(target)||target===Function[Prototype]}function _getObjProto(target){var newProto;if(target){if(_objGetPrototypeOf)return _objGetPrototypeOf(target);var curProto=target[str__Proto]||target[Prototype]||(target[Constructor]?target[Constructor][Prototype]:null);newProto=target[DynProtoBaseProto]||curProto,Object(ts_utils.mb)(target,DynProtoBaseProto)||(delete target[DynProtoCurrent],newProto=target[DynProtoBaseProto]=target[DynProtoCurrent]||target[DynProtoBaseProto],target[DynProtoCurrent]=curProto)}return newProto}function _forEachProp(target,func){var props=[];if(_objGetOwnProps)props=_objGetOwnProps(target);else for(var name_1 in target)"string"==typeof name_1&&Object(ts_utils.mb)(target,name_1)&&props.push(name_1);if(props&&props.length>0)for(var lp=0;lp<props.length;lp++)func(props[lp])}function _isDynamicCandidate(target,funcName,skipOwn){return funcName!==Constructor&&_typeof(target[funcName])===strFunction&&(skipOwn||Object(ts_utils.mb)(target,funcName))&&funcName!==str__Proto&&funcName!==Prototype}function _throwTypeError(message){Object(ts_utils.Cb)("DynamicProto: "+message)}function _hasVisited(values,value){for(var lp=values.length-1;lp>=0;lp--)if(values[lp]===value)return!0;return!1}function _populatePrototype(proto,className,target,baseInstFuncs,setInstanceFunc){function _createDynamicPrototype(proto,funcName){var dynProtoProxy=function dynProtoProxy(){var instFunc=function _getInstFunc(target,funcName,proto,currentDynProtoProxy){var instFunc=null;if(target&&Object(ts_utils.mb)(proto,DynClassName)){var instFuncTable=target[DynInstFuncTable]||Object(ts_utils.cb)(null);if((instFunc=(instFuncTable[proto[DynClassName]]||Object(ts_utils.cb)(null))[funcName])||_throwTypeError("Missing ["+funcName+"] "+strFunction),!instFunc[DynInstChkTag]&&!1!==instFuncTable[DynAllowInstChkTag]){for(var canAddInst=!Object(ts_utils.mb)(target,funcName),objProto=_getObjProto(target),visited=[];canAddInst&&objProto&&!_isObjectArrayOrFunctionPrototype(objProto)&&!_hasVisited(visited,objProto);){var protoFunc=objProto[funcName];if(protoFunc){canAddInst=protoFunc===currentDynProtoProxy;break}visited.push(objProto),objProto=_getObjProto(objProto)}try{canAddInst&&(target[funcName]=instFunc),instFunc[DynInstChkTag]=1}catch(e){instFuncTable[DynAllowInstChkTag]=!1}}}return instFunc}(this,funcName,proto,dynProtoProxy)||function _getProtoFunc(funcName,proto,currentDynProtoProxy){var protoFunc=proto[funcName];return protoFunc===currentDynProtoProxy&&(protoFunc=_getObjProto(proto)[funcName]),_typeof(protoFunc)!==strFunction&&_throwTypeError("["+funcName+"] is not a "+strFunction),protoFunc}(funcName,proto,dynProtoProxy);return instFunc.apply(this,arguments)};return dynProtoProxy[DynProxyTag]=1,dynProtoProxy}if(!_isObjectOrArrayPrototype(proto)){var instFuncTable=target[DynInstFuncTable]=target[DynInstFuncTable]||Object(ts_utils.cb)(null);if(!_isObjectOrArrayPrototype(instFuncTable)){var instFuncs_1=instFuncTable[className]=instFuncTable[className]||Object(ts_utils.cb)(null);!1!==instFuncTable[DynAllowInstChkTag]&&(instFuncTable[DynAllowInstChkTag]=!!setInstanceFunc),_isObjectOrArrayPrototype(instFuncs_1)||_forEachProp(target,(function(name){_isDynamicCandidate(target,name,!1)&&target[name]!==baseInstFuncs[name]&&(instFuncs_1[name]=target[name],delete target[name],(!Object(ts_utils.mb)(proto,name)||proto[name]&&!proto[name][DynProxyTag])&&(proto[name]=_createDynamicPrototype(proto,name)))}))}}}function _getObjName(target,unknownValue){return Object(ts_utils.mb)(target,Prototype)?target.name||unknownValue||UnknownValue:((target||{})[Constructor]||{}).name||unknownValue||UnknownValue}function dynamicProto(theClass,target,delegateFunc,options){Object(ts_utils.mb)(theClass,Prototype)||_throwTypeError("theClass is an invalid class definition.");var classProto=theClass[Prototype];(function _checkPrototype(classProto,thisTarget){if(_objGetPrototypeOf){for(var visited=[],thisProto=_getObjProto(thisTarget);thisProto&&!_isObjectArrayOrFunctionPrototype(thisProto)&&!_hasVisited(visited,thisProto);){if(thisProto===classProto)return!0;visited.push(thisProto),thisProto=_getObjProto(thisProto)}return!1}return!0})(classProto,target)||_throwTypeError("["+_getObjName(theClass)+"] not in hierarchy of ["+_getObjName(target)+"]");var className=null;Object(ts_utils.mb)(classProto,DynClassName)?className=classProto[DynClassName]:(className=DynClassNamePrefix+_getObjName(theClass,"_")+"$"+_gblInst.n,_gblInst.n++,classProto[DynClassName]=className);var perfOptions=dynamicProto[DynProtoDefaultOptions],useBaseInst=!!perfOptions[strUseBaseInst];useBaseInst&&options&&void 0!==options[strUseBaseInst]&&(useBaseInst=!!options[strUseBaseInst]);var instFuncs=function _getInstanceFuncs(thisTarget){var instFuncs=Object(ts_utils.cb)(null);return _forEachProp(thisTarget,(function(name){!instFuncs[name]&&_isDynamicCandidate(thisTarget,name,!1)&&(instFuncs[name]=thisTarget[name])})),instFuncs}(target),baseFuncs=function _getBaseFuncs(classProto,thisTarget,instFuncs,useBaseInst){function _instFuncProxy(target,funcHost,funcName){var theFunc=funcHost[funcName];if(theFunc[DynProxyTag]&&useBaseInst){var instFuncTable=target[DynInstFuncTable]||{};!1!==instFuncTable[DynAllowInstChkTag]&&(theFunc=(instFuncTable[funcHost[DynClassName]]||{})[funcName]||theFunc)}return function(){return theFunc.apply(target,arguments)}}var baseFuncs=Object(ts_utils.cb)(null);_forEachProp(instFuncs,(function(name){baseFuncs[name]=_instFuncProxy(thisTarget,instFuncs,name)}));for(var baseProto=_getObjProto(classProto),visited=[];baseProto&&!_isObjectArrayOrFunctionPrototype(baseProto)&&!_hasVisited(visited,baseProto);)_forEachProp(baseProto,(function(name){!baseFuncs[name]&&_isDynamicCandidate(baseProto,name,!_objGetPrototypeOf)&&(baseFuncs[name]=_instFuncProxy(thisTarget,baseProto,name))})),visited.push(baseProto),baseProto=_getObjProto(baseProto);return baseFuncs}(classProto,target,instFuncs,useBaseInst);delegateFunc(target,baseFuncs);var setInstanceFunc=!!_objGetPrototypeOf&&!!perfOptions[strSetInstFuncs];setInstanceFunc&&options&&(setInstanceFunc=!!options[strSetInstFuncs]),_populatePrototype(classProto,className,target,instFuncs,!1!==setInstanceFunc)}dynamicProto[DynProtoDefaultOptions]=_gblInst.o;var TsLibShims=__webpack_require__("./node_modules/@microsoft/applicationinsights-shims/dist-es5/TsLibShims.js"),Constants=__webpack_require__("./node_modules/@microsoft/applicationinsights-shims/dist-es5/Constants.js"),_DYN_TO_LOWER_CASE="toLowerCase",_DYN_LENGTH="length",_DYN_WARN_TO_CONSOLE="warnToConsole",_DYN_THROW_INTERNAL="throwInternal",_DYN_WATCH="watch",_DYN_APPLY="apply",_DYN_PUSH="push",_DYN_SPLICE="splice",_DYN_LOGGER="logger",_DYN_CANCEL="cancel",_DYN_INITIALIZE="initialize",_DYN_IDENTIFIER="identifier",_DYN_REMOVE_NOTIFICATION_0="removeNotificationListener",_DYN_ADD_NOTIFICATION_LIS1="addNotificationListener",_DYN_IS_INITIALIZED="isInitialized",_DYN_GET_PLUGIN="getPlugin",_DYN_NAME="name",_DYN_PROCESS_NEXT="processNext",_DYN_ENABLED="enabled",_DYN_UNLOAD="unload",_DYN_VERSION="version",_DYN_CREATE_NEW="createNew",_DYN_TEARDOWN="teardown",_DYN_DIAG_LOG="diagLog",_DYN__DO_TEARDOWN="_doTeardown",_DYN_UPDATE="update",_DYN_GET_NEXT="getNext",_DYN_SET_NEXT_PLUGIN="setNextPlugin",_DYN_USER_AGENT="userAgent",_DYN_SPLIT="split",_DYN_REPLACE="replace",_DYN_TYPE="type",_DYN_EVT_NAME="evtName",_DYN_STATUS="status",_DYN_GET_ALL_RESPONSE_HEA5="getAllResponseHeaders",_DYN_GET_CTX="getCtx",_DYN_SET_CTX="setCtx",_DYN_ITEMS_RECEIVED="itemsReceived",_DYN_TRACE_FLAGS="traceFlags",_DYN_GET_ATTRIBUTE="getAttribute",UNDEFINED_VALUE=void 0,STR_EMPTY="",STR_CORE="core",STR_DISABLED="disabled",STR_EXTENSION_CONFIG="extensionConfig",STR_PROCESS_TELEMETRY="processTelemetry",STR_PRIORITY="priority",STR_GET_PERF_MGR="getPerfMgr",STR_DOMAIN="domain",STR_PATH="path",STR_NOT_DYNAMIC_ERROR="Not dynamic - ",rCamelCase=/-([a-z])/g,rNormalizeInvalid=/([^\w\d_$])/g,rLeadingNumeric=/^(\d+[\w\d_$])/,HelperFuncs_getObjProto=Object.getPrototypeOf;function isNotNullOrUndefined(value){return!Object(ts_utils.M)(value)}function normalizeJsName(name){var value=name;return value&&Object(ts_utils.R)(value)&&(value=(value=(value=value[_DYN_REPLACE](rCamelCase,(function(_all,letter){return letter.toUpperCase()})))[_DYN_REPLACE](rNormalizeInvalid,"_"))[_DYN_REPLACE](rLeadingNumeric,(function(_all,match){return"_"+match}))),value}function strContains(value,search){return!(!value||!search)&&-1!==Object(ts_utils.ub)(value,search)}function toISOString(date){return date&&date.toISOString()||""}ts_utils.db;function getExceptionName(object){return Object(ts_utils.H)(object)?object[_DYN_NAME]:STR_EMPTY}function setValue(target,field,value,valChk,srcChk){var theValue=value;return target&&((theValue=target[field])===value||srcChk&&!srcChk(theValue)||valChk&&!valChk(value)||(theValue=value,target[field]=theValue)),theValue}function getSetValue(target,field,defValue){var theValue;return target?!(theValue=target[field])&&Object(ts_utils.M)(theValue)&&(theValue=Object(ts_utils.T)(defValue)?{}:defValue,target[field]=theValue):theValue=Object(ts_utils.T)(defValue)?{}:defValue,theValue}function _createProxyFunction(source,funcName){var srcFunc=null,src=null;return Object(ts_utils.I)(source)?srcFunc=source:src=source,function(){var originalArguments=arguments;if(srcFunc&&(src=srcFunc()),src)return src[funcName][_DYN_APPLY](src,originalArguments)}}function proxyFunctionAs(target,name,source,theFunc,overwriteTarget){target&&name&&source&&(!1!==overwriteTarget||Object(ts_utils.T)(target[name]))&&(target[name]=_createProxyFunction(source,theFunc))}function proxyFunctions(target,source,functionsToProxy,overwriteTarget){return target&&source&&Object(ts_utils.O)(target)&&Object(ts_utils.E)(functionsToProxy)&&Object(ts_utils.b)(functionsToProxy,(function(theFuncName){Object(ts_utils.R)(theFuncName)&&proxyFunctionAs(target,theFuncName,source,theFuncName,overwriteTarget)})),target}function optimizeObject(theObject){return theObject&&ts_utils.bb&&(theObject=Object(Constants.a)(Object(ts_utils.bb)({},theObject))),theObject}function objExtend(obj1,obj2,obj3,obj4,obj5,obj6){var theArgs=arguments,extended=theArgs[0]||{},argLen=theArgs[_DYN_LENGTH],deep=!1,idx=1;for(argLen>0&&Object(ts_utils.F)(extended)&&(deep=extended,extended=theArgs[idx]||{},idx++),Object(ts_utils.O)(extended)||(extended={});idx<argLen;idx++){var arg=theArgs[idx],isArgArray=Object(ts_utils.E)(arg),isArgObj=Object(ts_utils.O)(arg);for(var prop in arg){if(isArgArray&&prop in arg||isArgObj&&Object(ts_utils.lb)(arg,prop)){var newValue=arg[prop],isNewArray=void 0;if(deep&&newValue&&((isNewArray=Object(ts_utils.E)(newValue))||Object(ts_utils.P)(newValue))){var clone=extended[prop];isNewArray?Object(ts_utils.E)(clone)||(clone=[]):Object(ts_utils.P)(clone)||(clone={}),newValue=objExtend(deep,clone,newValue)}void 0!==newValue&&(extended[prop]=newValue)}}}return extended}ts_utils.g;function isFeatureEnabled(feature,cfg){var rlt=!1,ft=cfg&&cfg.featureOptIn&&cfg.featureOptIn[feature];if(feature&&ft){var mode=ft.mode;rlt=3==mode||1==mode}return rlt}function getResponseText(xhr){try{return xhr.responseText}catch(e){}return null}function formatErrorMessageXdr(xdr,message){return xdr?"XDomainRequest,Response:"+getResponseText(xdr)||!1:message}function formatErrorMessageXhr(xhr,message){return xhr?"XMLHttpRequest,Status:"+xhr[_DYN_STATUS]+",Response:"+getResponseText(xhr)||!1:message}function prependTransports(theTransports,newTransports){return newTransports&&(Object(ts_utils.N)(newTransports)?theTransports=[newTransports].concat(theTransports):Object(ts_utils.E)(newTransports)&&(theTransports=newTransports.concat(theTransports))),theTransports}var strDisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",strWithCredentials="withCredentials",strTimeout="timeout";function _appendHeader(theHeaders,xhr,name){if(!theHeaders[name]&&xhr&&xhr.getResponseHeader){var value=xhr.getResponseHeader(name);value&&(theHeaders[name]=Object(ts_utils.zb)(value))}return theHeaders}var STR_KILL_DURATION_HEADER="kill-duration",STR_KILL_DURATION_SECONDS_HEADER="kill-duration-seconds",STR_TIME_DELTA_HEADER="time-delta-millis";function _getAllResponseHeaders(xhr,isOneDs){var theHeaders={};return xhr[_DYN_GET_ALL_RESPONSE_HEA5]?theHeaders=function convertAllHeadersToMap(headersString){var headers={};if(Object(ts_utils.R)(headersString)){var headersArray=Object(ts_utils.zb)(headersString)[_DYN_SPLIT](/[\r\n]+/);Object(ts_utils.b)(headersArray,(function(headerEntry){if(headerEntry){var idx=headerEntry.indexOf(": ");if(-1!==idx){var header=Object(ts_utils.zb)(headerEntry.substring(0,idx))[_DYN_TO_LOWER_CASE](),value=Object(ts_utils.zb)(headerEntry.substring(idx+1));headers[header]=value}else headers[Object(ts_utils.zb)(headerEntry)]=1}}))}return headers}(xhr[_DYN_GET_ALL_RESPONSE_HEA5]()):isOneDs&&(theHeaders=_appendHeader(theHeaders,xhr,STR_TIME_DELTA_HEADER),theHeaders=_appendHeader(theHeaders,xhr,STR_KILL_DURATION_HEADER),theHeaders=_appendHeader(theHeaders,xhr,STR_KILL_DURATION_SECONDS_HEADER)),theHeaders}function EnvUtils_typeof(obj){return EnvUtils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EnvUtils_typeof(obj)}var strDocumentMode="documentMode",strLocation="location",strConsole="console",strJSON="JSON",strCrypto="crypto",strMsCrypto="msCrypto",strReactNative="ReactNative",strMsie="msie",strTrident="trident/",strXMLHttpRequest="XMLHttpRequest",_isTrident=null,_navUserAgentCheck=null,_enableMocks=!1,_useXDomainRequest=null,_beaconsSupported=null;function _hasProperty(theClass,property){var supported=!1;if(theClass){try{if(!(supported=property in theClass)){var proto=theClass[Constants.f];proto&&(supported=property in proto)}}catch(e){}if(!supported)try{var tmp=new theClass;supported=!Object(ts_utils.T)(tmp[property])}catch(e){}}return supported}function getLocation(checkForMock){if(checkForMock&&_enableMocks){var mockLocation=Object(ts_utils.s)("__mockLocation");if(mockLocation)return mockLocation}return("undefined"==typeof location?"undefined":EnvUtils_typeof(location))===Constants.e&&location?location:Object(ts_utils.s)(strLocation)}function hasJSON(){return Boolean(("undefined"==typeof JSON?"undefined":EnvUtils_typeof(JSON))===Constants.e&&JSON||null!==Object(ts_utils.s)(strJSON))}function getJSON(){return hasJSON()?JSON||Object(ts_utils.s)(strJSON):null}function isIE(){var nav=Object(ts_utils.w)();if(nav&&(nav[_DYN_USER_AGENT]!==_navUserAgentCheck||null===_isTrident)){var userAgent=((_navUserAgentCheck=nav[_DYN_USER_AGENT])||STR_EMPTY)[_DYN_TO_LOWER_CASE]();_isTrident=strContains(userAgent,strMsie)||strContains(userAgent,strTrident)}return _isTrident}function getIEVersion(userAgentStr){if(void 0===userAgentStr&&(userAgentStr=null),!userAgentStr){var navigator_1=Object(ts_utils.w)()||{};userAgentStr=navigator_1?(navigator_1.userAgent||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var ua=(userAgentStr||STR_EMPTY)[_DYN_TO_LOWER_CASE]();if(strContains(ua,strMsie)){var doc=Object(ts_utils.p)()||{};return Object(ts_utils.X)(parseInt(ua[_DYN_SPLIT](strMsie)[1]),doc[strDocumentMode]||0)}if(strContains(ua,strTrident)){var tridentVer=parseInt(ua[_DYN_SPLIT](strTrident)[1]);if(tridentVer)return tridentVer+4}return null}function isBeaconsSupported(useCached){return null!==_beaconsSupported&&!1!==useCached||(_beaconsSupported=Object(ts_utils.B)()&&Boolean(Object(ts_utils.w)().sendBeacon)),_beaconsSupported}function isFetchSupported(withKeepAlive){var isSupported=!1;try{isSupported=!!Object(ts_utils.s)("fetch");var request=Object(ts_utils.s)("Request");isSupported&&withKeepAlive&&request&&(isSupported=_hasProperty(request,"keepalive"))}catch(e){}return isSupported}function useXDomainRequest(){return null===_useXDomainRequest&&(_useXDomainRequest=("undefined"==typeof XDomainRequest?"undefined":EnvUtils_typeof(XDomainRequest))!==Constants.g)&&isXhrSupported()&&(_useXDomainRequest=_useXDomainRequest&&!_hasProperty(Object(ts_utils.s)(strXMLHttpRequest),"withCredentials")),_useXDomainRequest}function isXhrSupported(){var isSupported=!1;try{isSupported=!!Object(ts_utils.s)(strXMLHttpRequest)}catch(e){}return isSupported}function sendCustomEvent(evtName,cfg,customDetails){var global=Object(ts_utils.q)();if(global&&global.CustomEvent)try{return function dispatchEvent(target,evnt){return!!(target&&target.dispatchEvent&&evnt)&&(target.dispatchEvent(evnt),!0)}(global,function createCustomDomEvent(eventName,details){var event=null,detail={detail:details||null};if(Object(ts_utils.I)(CustomEvent))event=new CustomEvent(eventName,detail);else{var doc=Object(ts_utils.p)();doc&&doc.createEvent&&(event=doc.createEvent("CustomEvent")).initCustomEvent(eventName,!0,!0,detail)}return event}(evtName,{cfg:cfg||null,customDetails:customDetails||null}))}catch(e){}return!1}var UInt32Mask=4294967296,MaxUInt32=4294967295,SEED1=123456789,SEED2=987654321,_mwcSeeded=!1,_mwcW=SEED1,_mwcZ=SEED2;function _mwcSeed(seedValue){seedValue<0&&(seedValue>>>=0),_mwcW=SEED1+seedValue&MaxUInt32,_mwcZ=SEED2-seedValue&MaxUInt32,_mwcSeeded=!0}function _autoSeedMwc(){try{var now=2147483647&Object(ts_utils.Eb)();_mwcSeed((Math.random()*UInt32Mask^now)+now)}catch(e){}}function random32(signed){var value=0,c=function getCrypto(){return Object(ts_utils.s)(strCrypto)}()||function getMsCrypto(){return Object(ts_utils.s)(strMsCrypto)}();return c&&c.getRandomValues&&(value=c.getRandomValues(new Uint32Array(1))[0]&MaxUInt32),0===value&&isIE()&&(_mwcSeeded||_autoSeedMwc(),value=function mwcRandom32(signed){var value=((_mwcZ=36969*(65535&_mwcZ)+(_mwcZ>>16)&MaxUInt32)<<16)+(65535&(_mwcW=18e3*(65535&_mwcW)+(_mwcW>>16)&MaxUInt32))>>>0&MaxUInt32|0;signed||(value>>>=0);return value}()&MaxUInt32),0===value&&(value=Object(ts_utils.W)(UInt32Mask*Math.random()|0)),signed||(value>>>=0),value}function newId(maxLength){void 0===maxLength&&(maxLength=22);for(var number=random32()>>>0,chars=0,result=STR_EMPTY;result[_DYN_LENGTH]<maxLength;)chars++,result+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&number),number>>>=6,5===chars&&(number=(random32()<<2&4294967295|3&number)>>>0,chars=0);return result}var DataCacheHelper_version="3.3.6",instanceName="."+newId(6),_dataUid=0;function _canAcceptData(target){return 1===target.nodeType||9===target.nodeType||!+target.nodeType}function createUniqueNamespace(name,includeVersion){return void 0===includeVersion&&(includeVersion=!1),normalizeJsName(name+_dataUid+++(includeVersion?"."+DataCacheHelper_version:STR_EMPTY)+instanceName)}function createElmNodeData(name){var data={id:createUniqueNamespace("_aiData-"+(name||STR_EMPTY)+"."+DataCacheHelper_version),accept:function accept(target){return _canAcceptData(target)},get:function get(target,name,defValue,addDefault){var theCache=target[data.id];return theCache?theCache[normalizeJsName(name)]:(addDefault&&(theCache=function _getCache(data,target){var theCache=target[data.id];if(!theCache){theCache={};try{_canAcceptData(target)&&Object(ts_utils.eb)(target,data.id,{e:!1,v:theCache})}catch(e){}}return theCache}(data,target),theCache[normalizeJsName(name)]=defValue),defValue)},kill:function kill(target,name){if(target&&target[name])try{delete target[name]}catch(e){}}};return data}function _isConfigDefaults(value){return value&&Object(ts_utils.O)(value)&&(value.isVal||value.fb||Object(ts_utils.lb)(value,"v")||Object(ts_utils.lb)(value,"mrg")||Object(ts_utils.lb)(value,"ref")||value.set)}function _getDefault(dynamicHandler,theConfig,cfgDefaults){var defValue,isDefaultValid=cfgDefaults.dfVal||ts_utils.G;if(theConfig&&cfgDefaults.fb){var fallbacks=cfgDefaults.fb;Object(ts_utils.E)(fallbacks)||(fallbacks=[fallbacks]);for(var lp=0;lp<fallbacks[_DYN_LENGTH];lp++){var fallback=fallbacks[lp],fbValue=theConfig[fallback];if(isDefaultValid(fbValue)?defValue=fbValue:dynamicHandler&&(isDefaultValid(fbValue=dynamicHandler.cfg[fallback])&&(defValue=fbValue),dynamicHandler.set(dynamicHandler.cfg,Object(ts_utils.g)(fallback),fbValue)),isDefaultValid(defValue))break}}return!isDefaultValid(defValue)&&isDefaultValid(cfgDefaults.v)&&(defValue=cfgDefaults.v),defValue}function _resolveDefaultValue(dynamicHandler,theConfig,cfgDefaults){var newValue_1,theValue=cfgDefaults;(cfgDefaults&&_isConfigDefaults(cfgDefaults)&&(theValue=_getDefault(dynamicHandler,theConfig,cfgDefaults)),theValue)&&(_isConfigDefaults(theValue)&&(theValue=_resolveDefaultValue(dynamicHandler,theConfig,theValue)),Object(ts_utils.E)(theValue)?(newValue_1=[])[_DYN_LENGTH]=theValue[_DYN_LENGTH]:Object(ts_utils.P)(theValue)&&(newValue_1={}),newValue_1&&(Object(ts_utils.ib)(theValue,(function(key,value){value&&_isConfigDefaults(value)&&(value=_resolveDefaultValue(dynamicHandler,theConfig,value)),newValue_1[key]=value})),theValue=newValue_1));return theValue}function _applyDefaultValue(dynamicHandler,theConfig,name,defaultValue){var isValid,setFn,defValue,mergeDf,reference,readOnly,blkDynamicValue,theValue,cfgDefaults=defaultValue;_isConfigDefaults(cfgDefaults)?(isValid=cfgDefaults.isVal,setFn=cfgDefaults.set,readOnly=cfgDefaults.rdOnly,blkDynamicValue=cfgDefaults.blkVal,mergeDf=cfgDefaults.mrg,!(reference=cfgDefaults.ref)&&Object(ts_utils.T)(reference)&&(reference=!!mergeDf),defValue=_getDefault(dynamicHandler,theConfig,cfgDefaults)):defValue=defaultValue,blkDynamicValue&&dynamicHandler.blkVal(theConfig,name);var usingDefault=!0,cfgValue=theConfig[name];!cfgValue&&Object(ts_utils.M)(cfgValue)||(theValue=cfgValue,usingDefault=!1,isValid&&theValue!==defValue&&!isValid(theValue)&&(theValue=defValue,usingDefault=!0),setFn&&(usingDefault=(theValue=setFn(theValue,defValue,theConfig))===defValue)),usingDefault?theValue=defValue?_resolveDefaultValue(dynamicHandler,theConfig,defValue):defValue:(Object(ts_utils.P)(theValue)||Object(ts_utils.E)(defValue))&&mergeDf&&defValue&&(Object(ts_utils.P)(defValue)||Object(ts_utils.E)(defValue))&&Object(ts_utils.ib)(defValue,(function(dfName,dfValue){_applyDefaultValue(dynamicHandler,theValue,dfName,dfValue)})),dynamicHandler.set(theConfig,name,theValue),reference&&dynamicHandler.ref(theConfig,name),readOnly&&dynamicHandler.rdOnly(theConfig,name)}var CFG_HANDLER_LINK=Object(ts_utils.Ab)("[[ai_dynCfg_1]]"),BLOCK_DYNAMIC=Object(ts_utils.Ab)("[[ai_blkDynCfg_1]]"),FORCE_DYNAMIC=Object(ts_utils.Ab)("[[ai_frcDynCfg_1]]");function _cfgDeepCopy(source){var target_1;if(source&&(Object(ts_utils.E)(source)?(target_1=[])[_DYN_LENGTH]=source[_DYN_LENGTH]:Object(ts_utils.P)(source)&&(target_1={}),target_1))return Object(ts_utils.ib)(source,(function(key,value){target_1[key]=_cfgDeepCopy(value)})),target_1;return source}function _canMakeDynamic(getFunc,state,value){var result=!1;return value&&!getFunc[state.blkVal]&&((result=value[FORCE_DYNAMIC])||value[BLOCK_DYNAMIC]||(result=Object(ts_utils.P)(value)||Object(ts_utils.E)(value))),result}function throwInvalidAccess(message){Object(ts_utils.Cb)("InvalidAccess:"+message)}var aggregationErrorType,arrayMethodsToPatch=["push","pop","shift","unshift","splice"],DynamicProperty_throwDynamicError=function _throwDynamicError(logger,name,desc,e){logger&&logger[_DYN_THROW_INTERNAL](3,108,"".concat(desc," [").concat(name,"] failed - ")+Object(ts_utils.n)(e))};function _getOwnPropGetter(target,name){var propDesc=Object(ts_utils.kb)(target,name);return propDesc&&propDesc.get}function _setDynamicProperty(state,target,name,value){if(target){var getter=_getOwnPropGetter(target,name);getter&&!!getter[state.prop]?target[name]=value:function _createDynamicProperty(state,theConfig,name,value){var detail={n:name,h:[],trk:function trk(handler){handler&&handler.fn&&(-1===Object(ts_utils.c)(detail.h,handler)&&detail.h[_DYN_PUSH](handler),state.trk(handler,detail))},clr:function clr(handler){var idx=Object(ts_utils.c)(detail.h,handler);-1!==idx&&detail.h[_DYN_SPLICE](idx,1)}},checkDynamic=!0,isObjectOrArray=!1;function _getProperty(){checkDynamic&&(isObjectOrArray=isObjectOrArray||_canMakeDynamic(_getProperty,state,value),value&&!value[CFG_HANDLER_LINK]&&isObjectOrArray&&(value=_makeDynamicObject(state,value,name,"Converting")),checkDynamic=!1);var activeHandler=state.act;return activeHandler&&detail.trk(activeHandler),value}_getProperty[state.prop]={chng:function chng(){state.add(detail)}},Object(ts_utils.eb)(theConfig,detail.n,{g:_getProperty,s:function _setProperty(newValue){if(value!==newValue){_getProperty[state.ro]&&!state.upd&&throwInvalidAccess("["+name+"] is read-only:"+Object(ts_utils.n)(theConfig)),checkDynamic&&(isObjectOrArray=isObjectOrArray||_canMakeDynamic(_getProperty,state,value),checkDynamic=!1);var isReferenced=isObjectOrArray&&_getProperty[state.rf];if(isObjectOrArray)if(isReferenced){Object(ts_utils.ib)(value,(function(key){value[key]=newValue?newValue[key]:UNDEFINED_VALUE}));try{Object(ts_utils.ib)(newValue,(function(key,theValue){_setDynamicProperty(state,value,key,theValue)})),newValue=value}catch(e){DynamicProperty_throwDynamicError((state.hdlr||{})[_DYN_LOGGER],name,"Assigning",e),isObjectOrArray=!1}}else value&&value[CFG_HANDLER_LINK]&&Object(ts_utils.ib)(value,(function(key){var getter=_getOwnPropGetter(value,key);if(getter){var valueState=getter[state.prop];valueState&&valueState.chng()}}));if(newValue!==value){var newIsObjectOrArray=newValue&&_canMakeDynamic(_getProperty,state,newValue);!isReferenced&&newIsObjectOrArray&&(newValue=_makeDynamicObject(state,newValue,name,"Converting")),value=newValue,isObjectOrArray=newIsObjectOrArray}state.add(detail)}}})}(state,target,name,value)}return target}function _setDynamicPropertyState(state,target,name,flags){if(target){var getter=_getOwnPropGetter(target,name),isDynamic=getter&&!!getter[state.prop],inPlace=flags&&flags[0],rdOnly=flags&&flags[1],blkProp=flags&&flags[2];if(!isDynamic){if(blkProp)try{!function blockDynamicConversion(value){if(value&&(Object(ts_utils.P)(value)||Object(ts_utils.E)(value)))try{value[BLOCK_DYNAMIC]=!0}catch(e){}return value}(target)}catch(e){DynamicProperty_throwDynamicError((state.hdlr||{})[_DYN_LOGGER],name,"Blocking",e)}try{_setDynamicProperty(state,target,name,target[name]),getter=_getOwnPropGetter(target,name)}catch(e){DynamicProperty_throwDynamicError((state.hdlr||{})[_DYN_LOGGER],name,"State",e)}}inPlace&&(getter[state.rf]=inPlace),rdOnly&&(getter[state.ro]=rdOnly),blkProp&&(getter[state.blkVal]=!0)}return target}function _makeDynamicObject(state,target,name,desc){try{Object(ts_utils.ib)(target,(function(key,value){_setDynamicProperty(state,target,key,value)})),target[CFG_HANDLER_LINK]||(Object(ts_utils.fb)(target,CFG_HANDLER_LINK,{get:function get(){return state.hdlr}}),function _patchArray(state,target,name){Object(ts_utils.E)(target)&&Object(ts_utils.b)(arrayMethodsToPatch,(function(method){var orgMethod=target[method];target[method]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var result=orgMethod[_DYN_APPLY](this,args);return _makeDynamicObject(state,target,name,"Patching"),result}}))}(state,target,name))}catch(e){DynamicProperty_throwDynamicError((state.hdlr||{})[_DYN_LOGGER],name,desc,e)}return target}var symPrefix="[[ai_",symPostfix="]]";function _createState(cfgHandler){var theState,dynamicPropertySymbol=Object(ts_utils.ab)(symPrefix+"get"+cfgHandler.uid+symPostfix),dynamicPropertyReadOnly=Object(ts_utils.ab)(symPrefix+"ro"+cfgHandler.uid+symPostfix),dynamicPropertyReferenced=Object(ts_utils.ab)(symPrefix+"rf"+cfgHandler.uid+symPostfix),dynamicPropertyBlockValue=Object(ts_utils.ab)(symPrefix+"blkVal"+cfgHandler.uid+symPostfix),dynamicPropertyDetail=Object(ts_utils.ab)(symPrefix+"dtl"+cfgHandler.uid+symPostfix),_waitingHandlers=null,_watcherTimer=null;function _useHandler(activeHandler,callback){var prevWatcher=theState.act;try{theState.act=activeHandler,activeHandler&&activeHandler[dynamicPropertyDetail]&&(Object(ts_utils.b)(activeHandler[dynamicPropertyDetail],(function(detail){detail.clr(activeHandler)})),activeHandler[dynamicPropertyDetail]=[]),callback({cfg:cfgHandler.cfg,set:cfgHandler.set.bind(cfgHandler),setDf:cfgHandler.setDf.bind(cfgHandler),ref:cfgHandler.ref.bind(cfgHandler),rdOnly:cfgHandler.rdOnly.bind(cfgHandler)})}catch(e){var logger=cfgHandler[_DYN_LOGGER];throw logger&&logger[_DYN_THROW_INTERNAL](1,107,Object(ts_utils.n)(e)),e}finally{theState.act=prevWatcher||null}}function _notifyWatchers(){if(_waitingHandlers){var notifyHandlers=_waitingHandlers;_waitingHandlers=null,_watcherTimer&&_watcherTimer[_DYN_CANCEL](),_watcherTimer=null;var watcherFailures_1=[];if(Object(ts_utils.b)(notifyHandlers,(function(handler){if(handler&&(handler[dynamicPropertyDetail]&&(Object(ts_utils.b)(handler[dynamicPropertyDetail],(function(detail){detail.clr(handler)})),handler[dynamicPropertyDetail]=null),handler.fn))try{_useHandler(handler,handler.fn)}catch(e){watcherFailures_1[_DYN_PUSH](e)}})),_waitingHandlers)try{_notifyWatchers()}catch(e){watcherFailures_1[_DYN_PUSH](e)}watcherFailures_1[_DYN_LENGTH]>0&&function throwAggregationError(message,sourceErrors){aggregationErrorType||(aggregationErrorType=Object(ts_utils.i)("AggregationError",(function(self,args){args[_DYN_LENGTH]>1&&(self.errors=args[1])})));var theMessage=message||"One or more errors occurred.";throw Object(ts_utils.b)(sourceErrors,(function(srcError,idx){theMessage+="\n".concat(idx," > ").concat(Object(ts_utils.n)(srcError))})),new aggregationErrorType(theMessage,sourceErrors||[])}("Watcher error(s): ",watcherFailures_1)}}return theState={prop:dynamicPropertySymbol,ro:dynamicPropertyReadOnly,rf:dynamicPropertyReferenced,blkVal:dynamicPropertyBlockValue,hdlr:cfgHandler,add:function _addWatcher(detail){if(detail&&detail.h[_DYN_LENGTH]>0){_waitingHandlers||(_waitingHandlers=[]),_watcherTimer||(_watcherTimer=Object(ts_utils.rb)((function(){_watcherTimer=null,_notifyWatchers()}),0));for(var idx=0;idx<detail.h[_DYN_LENGTH];idx++){var handler=detail.h[idx];handler&&-1===Object(ts_utils.c)(_waitingHandlers,handler)&&_waitingHandlers[_DYN_PUSH](handler)}}},notify:_notifyWatchers,use:_useHandler,trk:function _trackHandler(handler,detail){if(handler){var details=handler[dynamicPropertyDetail]=handler[dynamicPropertyDetail]||[];-1===Object(ts_utils.c)(details,detail)&&details[_DYN_PUSH](detail)}}}}function _createDynamicHandler(logger,target,inPlace){var dynamicHandler=function getDynamicConfigHandler(value){if(value){var handler=value[CFG_HANDLER_LINK]||value;if(handler.cfg&&(handler.cfg===value||handler.cfg[CFG_HANDLER_LINK]===handler))return handler}return null}(target);if(dynamicHandler)return dynamicHandler;var theState,uid=createUniqueNamespace("dyncfg",!0),newTarget=target&&!1!==inPlace?target:_cfgDeepCopy(target);var cfgHandler={uid:null,cfg:newTarget,logger:logger,notify:function _notifyWatchers(){theState.notify()},set:function _setValue(target,name,value){try{target=_setDynamicProperty(theState,target,name,value)}catch(e){DynamicProperty_throwDynamicError(logger,name,"Setting value",e)}return target[name]},setDf:function _applyDefaults(theConfig,defaultValues){return defaultValues&&Object(ts_utils.ib)(defaultValues,(function(name,value){_applyDefaultValue(cfgHandler,theConfig,name,value)})),theConfig},watch:function _watch(configHandler){return function _createAndUseHandler(state,configHandler){var handler={fn:configHandler,rm:function rm(){handler.fn=null,state=null,configHandler=null}};return Object(ts_utils.eb)(handler,"toJSON",{v:function v(){return"WatcherHandler"+(handler.fn?"":"[X]")}}),state.use(handler,configHandler),handler}(theState,configHandler)},ref:function _ref(target,name){var _a;return _setDynamicPropertyState(theState,target,name,(_a={},_a[0]=!0,_a))[name]},rdOnly:function _rdOnly(target,name){var _a;return _setDynamicPropertyState(theState,target,name,(_a={},_a[1]=!0,_a))[name]},blkVal:function _blkPropValue(target,name){var _a;return _setDynamicPropertyState(theState,target,name,(_a={},_a[2]=!0,_a))[name]},_block:function _block(configHandler,allowUpdate){theState.use(null,(function(details){var prevUpd=theState.upd;try{Object(ts_utils.T)(allowUpdate)||(theState.upd=allowUpdate),configHandler(details)}finally{theState.upd=prevUpd}}))}};return Object(ts_utils.eb)(cfgHandler,"uid",{c:!1,e:!1,w:!1,v:uid}),_makeDynamicObject(theState=_createState(cfgHandler),newTarget,"config","Creating"),cfgHandler}function createDynamicConfig(config,defaultConfig,logger,inPlace){var dynamicHandler=_createDynamicHandler(logger,config||{},inPlace);return defaultConfig&&dynamicHandler.setDf(dynamicHandler.cfg,defaultConfig),dynamicHandler}function onConfigChange(config,configHandler,logger){var handler=config[CFG_HANDLER_LINK]||config;return!handler.cfg||handler.cfg!==config&&handler.cfg[CFG_HANDLER_LINK]!==handler?(function _logInvalidAccess(logger,message){logger?(logger[_DYN_WARN_TO_CONSOLE](message),logger[_DYN_THROW_INTERNAL](2,108,message)):throwInvalidAccess(message)}(logger,STR_NOT_DYNAMIC_ERROR+Object(ts_utils.n)(config)),createDynamicConfig(config,null,logger)[_DYN_WATCH](configHandler)):handler[_DYN_WATCH](configHandler)}var DbgExtensionUtils_debugListener,DiagnosticLogger_a,listenerFuncs=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],_aiNamespace=null;function _listenerProxyFunc(name,config){return function(){var args=arguments,dbgExt=getDebugExt(config);if(dbgExt){var listener=dbgExt.listener;listener&&listener[name]&&listener[name][_DYN_APPLY](listener,args)}}}function getDebugExt(config){var ns=_aiNamespace;return ns||!0===config.disableDbgExt||(ns=_aiNamespace||function _getExtensionNamespace(){var target=Object(ts_utils.s)("Microsoft");return target&&(_aiNamespace=target.ApplicationInsights),_aiNamespace}()),ns?ns.ChromeDbgExt:null}var DiagnosticLogger_defaultValues={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},_logFuncs=((DiagnosticLogger_a={})[0]=null,DiagnosticLogger_a[1]="errorToConsole",DiagnosticLogger_a[2]="warnToConsole",DiagnosticLogger_a[3]="debugToConsole",DiagnosticLogger_a);function _sanitizeDiagnosticText(text){return text?'"'+text[_DYN_REPLACE](/\"/g,STR_EMPTY)+'"':STR_EMPTY}function _logToConsole(func,message){var theConsole=function getConsole(){return("undefined"==typeof console?"undefined":EnvUtils_typeof(console))!==Constants.g?console:Object(ts_utils.s)(strConsole)}();if(theConsole){var logFunc="log";theConsole[func]&&(logFunc=func),Object(ts_utils.I)(theConsole[logFunc])&&theConsole[logFunc](message)}}var DiagnosticLogger_InternalLogMessage=function(){function _InternalLogMessage(msgId,msg,isUserAct,properties){void 0===isUserAct&&(isUserAct=!1);this.messageId=msgId,this.message=(isUserAct?"AI: ":"AI (Internal): ")+msgId;var strProps=STR_EMPTY;hasJSON()&&(strProps=getJSON().stringify(properties));var diagnosticText=(msg?" message:"+_sanitizeDiagnosticText(msg):STR_EMPTY)+(properties?" props:"+_sanitizeDiagnosticText(strProps):STR_EMPTY);this.message+=diagnosticText}return _InternalLogMessage.dataType="MessageData",_InternalLogMessage}();function safeGetLogger(core,config){return(core||{})[_DYN_LOGGER]||new DiagnosticLogger_DiagnosticLogger(config)}var DiagnosticLogger_DiagnosticLogger=function(){function DiagnosticLogger(config){this.identifier="DiagnosticLogger",this.queue=[];var _loggingLevelConsole,_loggingLevelTelemetry,_maxInternalMessageLimit,_enableDebug,_unloadHandler,_messageCount=0,_messageLogged={};dynamicProto(DiagnosticLogger,this,(function(_self){function _logInternalMessage(severity,message){if(!function _areInternalMessagesThrottled(){return _messageCount>=_maxInternalMessageLimit}()){var logMessage=!0,messageKey="AITR_"+message.messageId;if(_messageLogged[messageKey]?logMessage=!1:_messageLogged[messageKey]=!0,logMessage&&(severity<=_loggingLevelTelemetry&&(_self.queue[_DYN_PUSH](message),_messageCount++,_debugExtMsg(1===severity?"error":"warn",message)),_messageCount===_maxInternalMessageLimit)){var throttleLimitMessage="Internal events throttle limit per PageView reached for this app.",throttleMessage=new DiagnosticLogger_InternalLogMessage(23,throttleLimitMessage,!1);_self.queue[_DYN_PUSH](throttleMessage),1===severity?_self.errorToConsole(throttleLimitMessage):_self[_DYN_WARN_TO_CONSOLE](throttleLimitMessage)}}}function _debugExtMsg(name,data){var dbgExt=getDebugExt(config||{});dbgExt&&dbgExt[_DYN_DIAG_LOG]&&dbgExt[_DYN_DIAG_LOG](name,data)}_unloadHandler=function _setDefaultsFromConfig(config){return onConfigChange(createDynamicConfig(config,DiagnosticLogger_defaultValues,_self).cfg,(function(details){var config=details.cfg;_loggingLevelConsole=config.loggingLevelConsole,_loggingLevelTelemetry=config.loggingLevelTelemetry,_maxInternalMessageLimit=config.maxMessageLimit,_enableDebug=config.enableDebug}))}(config||{}),_self.consoleLoggingLevel=function(){return _loggingLevelConsole},_self[_DYN_THROW_INTERNAL]=function(severity,msgId,msg,properties,isUserAct){void 0===isUserAct&&(isUserAct=!1);var message=new DiagnosticLogger_InternalLogMessage(msgId,msg,isUserAct,properties);if(_enableDebug)throw Object(ts_utils.n)(message);var logFunc=_logFuncs[severity]||"warnToConsole";if(Object(ts_utils.T)(message.message))_debugExtMsg("throw"+(1===severity?"Critical":"Warning"),message);else{if(isUserAct){var messageKey=+message.messageId;!_messageLogged[messageKey]&&_loggingLevelConsole>=severity&&(_self[logFunc](message.message),_messageLogged[messageKey]=!0)}else _loggingLevelConsole>=severity&&_self[logFunc](message.message);_logInternalMessage(severity,message)}},_self.debugToConsole=function(message){_logToConsole("debug",message),_debugExtMsg("warning",message)},_self[_DYN_WARN_TO_CONSOLE]=function(message){_logToConsole("warn",message),_debugExtMsg("warning",message)},_self.errorToConsole=function(message){_logToConsole("error",message),_debugExtMsg("error",message)},_self.resetInternalMessageCount=function(){_messageCount=0,_messageLogged={}},_self.logInternalMessage=_logInternalMessage,_self[_DYN_UNLOAD]=function(isAsync){_unloadHandler&&_unloadHandler.rm(),_unloadHandler=null}}))}return DiagnosticLogger.__ieDyn=1,DiagnosticLogger}();function _getLogger(logger){return logger||new DiagnosticLogger_DiagnosticLogger}function DiagnosticLogger_throwInternal(logger,severity,msgId,msg,properties,isUserAct){void 0===isUserAct&&(isUserAct=!1),_getLogger(logger)[_DYN_THROW_INTERNAL](severity,msgId,msg,properties,isUserAct)}function _warnToConsole(logger,message){_getLogger(logger)[_DYN_WARN_TO_CONSOLE](message)}var createEnumStyle=ts_utils.j,createValueMap=ts_utils.l,StorageType=createEnumStyle({LocalStorage:0,SessionStorage:1}),DistributedTracingModes=createEnumStyle({AI:0,AI_AND_W3C:1,W3C:2}),EventPersistence=createEnumStyle({Normal:1,Critical:2}),_DynamicConstants_DYN_SPLIT="split",_DynamicConstants_DYN_LENGTH="length",_DynamicConstants_DYN_TO_LOWER_CASE="toLowerCase",_DYN_INGESTIONENDPOINT="ingestionendpoint",_DYN_TO_STRING="toString",_DYN_REMOVE_ITEM="removeItem",_DynamicConstants_DYN_MESSAGE="message",_DYN_STRINGIFY="stringify",_DYN_PATHNAME="pathname",_DYN_MATCH="match",_DYN_CORRELATION_HEADER_E0="correlationHeaderExcludePatterns",_DynamicConstants_DYN_NAME="name",_DYN_SIZE_IN_BYTES="sizeInBytes",_DYN_TYPE_NAME="typeName",_DYN_PARSED_STACK="parsedStack",_DYN_HAS_FULL_STACK="hasFullStack",_DYN_ASSEMBLY="assembly",_DYN_FILE_NAME="fileName",_DYN_LINE="line",_DYN_AI_DATA_CONTRACT="aiDataContract",StorageHelperFuncs_canUseLocalStorage=void 0,_canUseSessionStorage=void 0,_storagePrefix="";function _getLocalStorageObject(){return utlCanUseLocalStorage()?_getVerifiedStorageObject(StorageType.LocalStorage):null}function _getVerifiedStorageObject(storageType){try{if(Object(ts_utils.M)(Object(ts_utils.q)()))return null;var uid=(new Date)[_DYN_TO_STRING](),storage=Object(ts_utils.s)(storageType===StorageType.LocalStorage?"localStorage":"sessionStorage"),name_1=_storagePrefix+uid;storage.setItem(name_1,uid);var fail=storage.getItem(name_1)!==uid;if(storage[_DYN_REMOVE_ITEM](name_1),!fail)return storage}catch(exception){}return null}function _getSessionStorageObject(){return utlCanUseSessionStorage()?_getVerifiedStorageObject(StorageType.SessionStorage):null}function utlSetStoragePrefix(storagePrefix){_storagePrefix=storagePrefix||""}function utlCanUseLocalStorage(reset){return(reset||void 0===StorageHelperFuncs_canUseLocalStorage)&&(StorageHelperFuncs_canUseLocalStorage=!!_getVerifiedStorageObject(StorageType.LocalStorage)),StorageHelperFuncs_canUseLocalStorage}function utlGetLocalStorage(logger,name){var storage=_getLocalStorageObject();if(null!==storage)try{return storage.getItem(name)}catch(e){StorageHelperFuncs_canUseLocalStorage=!1,DiagnosticLogger_throwInternal(logger,2,1,"Browser failed read of local storage. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return null}function utlSetLocalStorage(logger,name,data){var storage=_getLocalStorageObject();if(null!==storage)try{return storage.setItem(name,data),!0}catch(e){StorageHelperFuncs_canUseLocalStorage=!1,DiagnosticLogger_throwInternal(logger,2,3,"Browser failed write to local storage. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return!1}function utlCanUseSessionStorage(reset){return(reset||void 0===_canUseSessionStorage)&&(_canUseSessionStorage=!!_getVerifiedStorageObject(StorageType.SessionStorage)),_canUseSessionStorage}function utlGetSessionStorage(logger,name){var storage=_getSessionStorageObject();if(null!==storage)try{return storage.getItem(name)}catch(e){_canUseSessionStorage=!1,DiagnosticLogger_throwInternal(logger,2,2,"Browser failed read of session storage. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return null}function utlSetSessionStorage(logger,name,data){var storage=_getSessionStorageObject();if(null!==storage)try{return storage.setItem(name,data),!0}catch(e){_canUseSessionStorage=!1,DiagnosticLogger_throwInternal(logger,2,4,"Browser failed write to session storage. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return!1}function utlRemoveSessionStorage(logger,name){var storage=_getSessionStorageObject();if(null!==storage)try{return storage[_DYN_REMOVE_ITEM](name),!0}catch(e){_canUseSessionStorage=!1,DiagnosticLogger_throwInternal(logger,2,6,"Browser failed removal of session storage item. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return!1}var DisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",SampleRate="sampleRate",HttpMethod="http.method",DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",strNotSpecified="not_specified",strIkey="iKey";function dataSanitizeKeyAndAddUniqueness(logger,key,map){var s,origLength=key[_DynamicConstants_DYN_LENGTH],field=function dataSanitizeKey(logger,name){var nameTrunc;name&&(name=Object(ts_utils.zb)(Object(ts_utils.g)(name)))[_DynamicConstants_DYN_LENGTH]>150&&(nameTrunc=Object(ts_utils.yb)(name,0,150),DiagnosticLogger_throwInternal(logger,2,57,"name is too long.  It has been truncated to 150 characters.",{name:name},!0));return nameTrunc||name}(logger,key);if(field[_DynamicConstants_DYN_LENGTH]!==origLength){for(var i=0,uniqueField=field;void 0!==map[uniqueField];)i++,uniqueField=Object(ts_utils.yb)(field,0,147)+(s=void 0,s="00"+i,Object(ts_utils.xb)(s,s[_DynamicConstants_DYN_LENGTH]-3));field=uniqueField}return field}function dataSanitizeString(logger,value,maxLength){var valueTrunc;return void 0===maxLength&&(maxLength=1024),value&&(maxLength=maxLength||1024,(value=Object(ts_utils.zb)(Object(ts_utils.g)(value)))[_DynamicConstants_DYN_LENGTH]>maxLength&&(valueTrunc=Object(ts_utils.yb)(value,0,maxLength),DiagnosticLogger_throwInternal(logger,2,61,"string value is too long. It has been truncated to "+maxLength+" characters.",{value:value},!0))),valueTrunc||value}function dataSanitizeUrl(logger,url){return dataSanitizeInput(logger,url,2048,66)}function dataSanitizeMessage(logger,message){var messageTrunc;return message&&message[_DynamicConstants_DYN_LENGTH]>32768&&(messageTrunc=Object(ts_utils.yb)(message,0,32768),DiagnosticLogger_throwInternal(logger,2,56,"message is too long, it has been truncated to 32768 characters.",{message:message},!0)),messageTrunc||message}function dataSanitizeProperties(logger,properties){if(properties){var tempProps_1={};Object(ts_utils.ib)(properties,(function(prop,value){if(Object(ts_utils.O)(value)&&hasJSON())try{value=getJSON()[_DYN_STRINGIFY](value)}catch(e){DiagnosticLogger_throwInternal(logger,2,49,"custom property is not valid",{exception:e},!0)}value=dataSanitizeString(logger,value,8192),prop=dataSanitizeKeyAndAddUniqueness(logger,prop,tempProps_1),tempProps_1[prop]=value})),properties=tempProps_1}return properties}function dataSanitizeMeasurements(logger,measurements){if(measurements){var tempMeasurements_1={};Object(ts_utils.ib)(measurements,(function(measure,value){measure=dataSanitizeKeyAndAddUniqueness(logger,measure,tempMeasurements_1),tempMeasurements_1[measure]=value})),measurements=tempMeasurements_1}return measurements}function dataSanitizeInput(logger,input,maxLength,_msgId){var inputTrunc;return input&&(input=Object(ts_utils.zb)(Object(ts_utils.g)(input)))[_DynamicConstants_DYN_LENGTH]>maxLength&&(inputTrunc=Object(ts_utils.yb)(input,0,maxLength),DiagnosticLogger_throwInternal(logger,2,_msgId,"input is too long, it has been truncated to "+maxLength+" characters.",{data:input},!0)),inputTrunc||input}function createTelemetryItem(item,baseType,envelopeName,logger,customProperties,systemProperties){envelopeName=dataSanitizeString(logger,envelopeName)||strNotSpecified,(Object(ts_utils.M)(item)||Object(ts_utils.M)(baseType)||Object(ts_utils.M)(envelopeName))&&Object(ts_utils.Bb)("Input doesn't contain all required fields");var iKey="";item[strIkey]&&(iKey=item[strIkey],delete item[strIkey]);var telemetryItem={name:envelopeName,time:toISOString(new Date),iKey:iKey,ext:systemProperties||{},tags:[],data:{},baseType:baseType,baseData:item};return Object(ts_utils.M)(customProperties)||Object(ts_utils.ib)(customProperties,(function(prop,value){telemetryItem.data[prop]=value})),telemetryItem}!function(){function TelemetryItemCreator(){}TelemetryItemCreator.create=createTelemetryItem}();var Event_Event=function(){function Event(logger,name,properties,measurements){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};this.ver=2,this[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,name)||strNotSpecified,this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements)}return Event.envelopeType="Microsoft.ApplicationInsights.{0}.Event",Event.dataType="EventData",Event}(),Trace_Trace=function(){function Trace(logger,message,severityLevel,properties,measurements){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};this.ver=2,message=message||strNotSpecified,this[_DynamicConstants_DYN_MESSAGE]=dataSanitizeMessage(logger,message),this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements),severityLevel&&(this.severityLevel=severityLevel)}return Trace.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Trace.dataType="MessageData",Trace}(),DataPoint=function DataPoint(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Metric_Metric=function(){function Metric(logger,name,value,count,min,max,stdDev,properties,measurements){this.aiDataContract={ver:1,metrics:1,properties:0};this.ver=2;var dataPoint=new DataPoint;dataPoint.count=count>0?count:void 0,dataPoint.max=isNaN(max)||null===max?void 0:max,dataPoint.min=isNaN(min)||null===min?void 0:min,dataPoint[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,name)||strNotSpecified,dataPoint.value=value,dataPoint.stdDev=isNaN(stdDev)||null===stdDev?void 0:stdDev,this.metrics=[dataPoint],this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements)}return Metric.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",Metric.dataType="MetricData",Metric}(),strEmpty="";function msToTimeSpan(totalms){(isNaN(totalms)||totalms<0)&&(totalms=0),totalms=Object(ts_utils.Z)(totalms);var ms=strEmpty+totalms%1e3,sec=strEmpty+Object(ts_utils.W)(totalms/1e3)%60,min=strEmpty+Object(ts_utils.W)(totalms/6e4)%60,hour=strEmpty+Object(ts_utils.W)(totalms/36e5)%24,days=Object(ts_utils.W)(totalms/864e5);return ms=1===ms[_DynamicConstants_DYN_LENGTH]?"00"+ms:2===ms[_DynamicConstants_DYN_LENGTH]?"0"+ms:ms,sec=sec[_DynamicConstants_DYN_LENGTH]<2?"0"+sec:sec,min=min[_DynamicConstants_DYN_LENGTH]<2?"0"+min:min,hour=hour[_DynamicConstants_DYN_LENGTH]<2?"0"+hour:hour,(days>0?days+".":strEmpty)+hour+":"+min+":"+sec+"."+ms}var PageView_PageView=function(){function PageView(logger,name,url,durationMs,properties,measurements,id){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};this.ver=2,this.id=function dataSanitizeId(logger,id){return id?dataSanitizeInput(logger,id,128,69)[_DYN_TO_STRING]():id}(logger,id),this.url=dataSanitizeUrl(logger,url),this[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,name)||strNotSpecified,isNaN(durationMs)||(this.duration=msToTimeSpan(durationMs)),this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements)}return PageView.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",PageView.dataType="PageviewData",PageView}(),PageViewPerformance_PageViewPerformance=function(){function PageViewPerformance(logger,name,url,unused,properties,measurements,cs4BaseData){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};this.ver=2,this.url=dataSanitizeUrl(logger,url),this[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,name)||strNotSpecified,this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements),cs4BaseData&&(this.domProcessing=cs4BaseData.domProcessing,this.duration=cs4BaseData.duration,this.networkConnect=cs4BaseData.networkConnect,this.perfTotal=cs4BaseData.perfTotal,this.receivedResponse=cs4BaseData.receivedResponse,this.sentRequest=cs4BaseData.sentRequest)}return PageViewPerformance.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",PageViewPerformance.dataType="PageviewPerformanceData",PageViewPerformance}(),STACKFRAME_BASE_SIZE=58,IS_FRAME=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,PARSE_FILENAME_LINE_COL=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,PARSE_FILENAME_LINE_ONLY=/([^\(\s\n]+):([0-9]+)$/,NoMethod="<no_method>",strError="error",strStack="stack",strStackDetails="stackDetails",strErrorSrc="errorSrc",strMessage="message",strDescription="description",_parseSequence=[{re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,len:5,m:1,fn:2,ln:3,col:4},{chk:function _ignoreNative(frame){return Object(ts_utils.ub)(frame,"[native")<0},pre:function _scrubAnonymous(frame){return frame.replace(/(\(anonymous\))/,"<anonymous>")},re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,len:4,m:1,fn:2,ln:3},{re:/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,len:3,m:1,fn:2,hdl:_handleFilename},{re:/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,len:2,fn:1,hdl:_handleFilename}];function _stringify(value,convertToString){var result=value;return result&&!Object(ts_utils.R)(result)&&(JSON&&JSON[_DYN_STRINGIFY]?(result=JSON[_DYN_STRINGIFY](value),!convertToString||result&&"{}"!==result||(result=Object(ts_utils.I)(value[_DYN_TO_STRING])?value[_DYN_TO_STRING]():""+value)):result=value+" - (Missing JSON.stringify)"),result||""}function _formatMessage(theEvent,errorType){var evtMessage=theEvent;return theEvent&&(evtMessage&&!Object(ts_utils.R)(evtMessage)&&(evtMessage=theEvent[strMessage]||theEvent[strDescription]||evtMessage),evtMessage&&!Object(ts_utils.R)(evtMessage)&&(evtMessage=_stringify(evtMessage,!0)),theEvent.filename&&(evtMessage=evtMessage+" @"+(theEvent.filename||"")+":"+(theEvent.lineno||"?")+":"+(theEvent.colno||"?"))),errorType&&"String"!==errorType&&"Object"!==errorType&&"Error"!==errorType&&-1===Object(ts_utils.ub)(evtMessage||"",errorType)&&(evtMessage=errorType+": "+evtMessage),evtMessage||""}function _isStackDetails(details){return details&&details.src&&Object(ts_utils.R)(details.src)&&details.obj&&Object(ts_utils.E)(details.obj)}function _convertStackObj(errorStack){var src=errorStack||"";Object(ts_utils.R)(src)||(src=Object(ts_utils.R)(src[strStack])?src[strStack]:""+src);var items=src[_DynamicConstants_DYN_SPLIT]("\n");return{src:src,obj:items}}function _getStackFromErrorObj(errorObj){var details=null;if(errorObj)try{if(errorObj[strStack])details=_convertStackObj(errorObj[strStack]);else if(errorObj[strError]&&errorObj[strError][strStack])details=_convertStackObj(errorObj[strError][strStack]);else if(errorObj.exception&&errorObj.exception[strStack])details=_convertStackObj(errorObj.exception[strStack]);else if(_isStackDetails(errorObj))details=errorObj;else if(_isStackDetails(errorObj[strStackDetails]))details=errorObj[strStackDetails];else if(Object(ts_utils.y)()&&Object(ts_utils.y)().opera&&errorObj[strMessage])details=function _getOperaStack(errorMessage){for(var stack=[],lines=errorMessage[_DynamicConstants_DYN_SPLIT]("\n"),lp=0;lp<lines[_DynamicConstants_DYN_LENGTH];lp++){var entry=lines[lp];lines[lp+1]&&(entry+="@"+lines[lp+1],lp++),stack.push(entry)}return{src:errorMessage,obj:stack}}(errorObj[_DynamicConstants_DYN_MESSAGE]);else if(errorObj.reason&&errorObj.reason[strStack])details=_convertStackObj(errorObj.reason[strStack]);else if(Object(ts_utils.R)(errorObj))details=_convertStackObj(errorObj);else{var evtMessage=errorObj[strMessage]||errorObj[strDescription]||"";Object(ts_utils.R)(errorObj[strErrorSrc])&&(evtMessage&&(evtMessage+="\n"),evtMessage+=" from "+errorObj[strErrorSrc]),evtMessage&&(details=_convertStackObj(evtMessage))}}catch(e){details=_convertStackObj(e)}return details||{src:"",obj:null}}function _parseStack(stack){var parsedStack,frames=stack.obj;if(frames&&frames[_DynamicConstants_DYN_LENGTH]>0){parsedStack=[];var level_1=0,foundStackStart_1=!1,totalSizeInBytes_1=0;Object(ts_utils.b)(frames,(function(frame){if(foundStackStart_1||function _isStackFrame(frame){var result=!1;if(frame&&Object(ts_utils.R)(frame)){var trimmedFrame=Object(ts_utils.zb)(frame);trimmedFrame&&(result=IS_FRAME.test(trimmedFrame))}return result}(frame)){var theFrame=Object(ts_utils.g)(frame);foundStackStart_1=!0;var parsedFrame=function _extractStackFrame(frame,level){var _a,theFrame;if(frame&&Object(ts_utils.R)(frame)&&Object(ts_utils.zb)(frame)){(_a={})[_DYN_AI_DATA_CONTRACT]=stackFrameAiDataContract,_a.level=level,_a.assembly=Object(ts_utils.zb)(frame),_a.method=NoMethod,_a.fileName="",_a.line=0,_a.sizeInBytes=0,theFrame=_a;for(var idx=0;idx<_parseSequence[_DynamicConstants_DYN_LENGTH];){var sequence=_parseSequence[idx];if(sequence.chk&&!sequence.chk(frame))break;sequence.pre&&(frame=sequence.pre(frame));var matches=frame[_DYN_MATCH](sequence.re);if(matches&&matches[_DynamicConstants_DYN_LENGTH]>=sequence.len){sequence.m&&(theFrame.method=Object(ts_utils.zb)(matches[sequence.m]||NoMethod)),sequence.hdl?sequence.hdl(theFrame,sequence,matches):sequence.fn&&(sequence.ln?(theFrame[_DYN_FILE_NAME]=Object(ts_utils.zb)(matches[sequence.fn]||""),theFrame[_DYN_LINE]=parseInt(Object(ts_utils.zb)(matches[sequence.ln]||""))||0):_parseFilename(theFrame,matches[sequence.fn]||""));break}idx++}}return _populateFrameSizeInBytes(theFrame)}(theFrame,level_1);parsedFrame&&(totalSizeInBytes_1+=parsedFrame[_DYN_SIZE_IN_BYTES],parsedStack.push(parsedFrame),level_1++)}}));if(totalSizeInBytes_1>32768)for(var left=0,right=parsedStack[_DynamicConstants_DYN_LENGTH]-1,size=0,acceptedLeft=left,acceptedRight=right;left<right;){if((size+=parsedStack[left][_DYN_SIZE_IN_BYTES]+parsedStack[right][_DYN_SIZE_IN_BYTES])>32768){var howMany=acceptedRight-acceptedLeft+1;parsedStack.splice(acceptedLeft,howMany);break}acceptedLeft=left,acceptedRight=right,left++,right--}}return parsedStack}function _getErrorType(errorType){var typeName="";if(errorType&&!(typeName=errorType.typeName||errorType[_DynamicConstants_DYN_NAME]||""))try{var results=/function (.{1,200})\(/.exec(errorType.constructor[_DYN_TO_STRING]());typeName=results&&results[_DynamicConstants_DYN_LENGTH]>1?results[1]:""}catch(e){}return typeName}function _formatErrorCode(errorObj){if(errorObj)try{if(!Object(ts_utils.R)(errorObj)){var errorType=_getErrorType(errorObj),result=_stringify(errorObj,!1);return result&&"{}"!==result||(errorObj[strError]&&(errorType=_getErrorType(errorObj=errorObj[strError])),result=_stringify(errorObj,!0)),0!==Object(ts_utils.ub)(result,errorType)&&"String"!==errorType?errorType+":"+result:result}}catch(e){}return""+(errorObj||"")}var Exception_Exception=function(){function Exception(logger,exception,properties,measurements,severityLevel,id){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};this.ver=2,!function _isExceptionInternal(value){try{if(Object(ts_utils.O)(value))return"ver"in value&&"exceptions"in value&&"properties"in value}catch(e){}return!1}(exception)?(properties||(properties={}),id&&(properties.id=id),this.exceptions=[_createExceptionDetails(logger,exception,properties)],this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements),severityLevel&&(this.severityLevel=severityLevel),id&&(this.id=id)):(this.exceptions=exception.exceptions||[],this.properties=exception.properties,this.measurements=exception.measurements,exception.severityLevel&&(this.severityLevel=exception.severityLevel),exception.id&&(this.id=exception.id,exception.properties.id=exception.id),exception.problemGroup&&(this.problemGroup=exception.problemGroup),Object(ts_utils.M)(exception.isManual)||(this.isManual=exception.isManual))}return Exception.CreateAutoException=function(message,url,lineNumber,columnNumber,error,evt,stack,errorSrc){var errorType=_getErrorType(error||evt||message);return{message:_formatMessage(message,errorType),url:url,lineNumber:lineNumber,columnNumber:columnNumber,error:_formatErrorCode(error||evt||message),evt:_formatErrorCode(evt||message),typeName:errorType,stackDetails:_getStackFromErrorObj(stack||error||evt),errorSrc:errorSrc}},Exception.CreateFromInterface=function(logger,exception,properties,measurements){var exceptions=exception.exceptions&&Object(ts_utils.d)(exception.exceptions,(function(ex){return function _createExDetailsFromInterface(logger,exception){var parsedStack=Object(ts_utils.E)(exception[_DYN_PARSED_STACK])&&Object(ts_utils.d)(exception[_DYN_PARSED_STACK],(function(frame){return function _stackFrameFromInterface(frame){var _a,parsedFrame=((_a={})[_DYN_AI_DATA_CONTRACT]=stackFrameAiDataContract,_a.level=frame.level,_a.method=frame.method,_a.assembly=frame[_DYN_ASSEMBLY],_a.fileName=frame[_DYN_FILE_NAME],_a.line=frame[_DYN_LINE],_a.sizeInBytes=0,_a);return _populateFrameSizeInBytes(parsedFrame)}(frame)}))||exception[_DYN_PARSED_STACK],exceptionDetails=_createExceptionDetails(logger,Object(TsLibShims.a)(Object(TsLibShims.a)({},exception),{parsedStack:parsedStack}));return exceptionDetails}(logger,ex)}));return new Exception(logger,Object(TsLibShims.a)(Object(TsLibShims.a)({},exception),{exceptions:exceptions}),properties,measurements)},Exception.prototype.toInterface=function(){var _a=this,exceptions=_a.exceptions,properties=_a.properties,measurements=_a.measurements,severityLevel=_a.severityLevel,problemGroup=_a.problemGroup,id=_a.id,isManual=_a.isManual;return{ver:"4.0",exceptions:exceptions instanceof Array&&Object(ts_utils.d)(exceptions,(function(exception){return exception.toInterface()}))||void 0,severityLevel:severityLevel,properties:properties,measurements:measurements,problemGroup:problemGroup,id:id,isManual:isManual}},Exception.CreateSimpleException=function(message,typeName,assembly,fileName,details,line){var _a;return{exceptions:[(_a={},_a[_DYN_HAS_FULL_STACK]=!0,_a.message=message,_a.stack=details,_a.typeName=typeName,_a)]}},Exception.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",Exception.dataType="ExceptionData",Exception.formatError=_formatErrorCode,Exception}(),exDetailsAiDataContract=Object(ts_utils.jb)({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function _toInterface(){var parsedStack=Object(ts_utils.E)(this[_DYN_PARSED_STACK])&&Object(ts_utils.d)(this[_DYN_PARSED_STACK],(function(frame){return function _parsedFrameToInterface(frame){return{level:frame.level,method:frame.method,assembly:frame[_DYN_ASSEMBLY],fileName:frame[_DYN_FILE_NAME],line:frame[_DYN_LINE]}}(frame)}));return{id:this.id,outerId:this.outerId,typeName:this[_DYN_TYPE_NAME],message:this[_DynamicConstants_DYN_MESSAGE],hasFullStack:this[_DYN_HAS_FULL_STACK],stack:this[strStack],parsedStack:parsedStack||void 0}}function _createExceptionDetails(logger,exception,properties){var _a,typeName,message,hasFullStack,theStack,parsedStack;if(function _isExceptionDetailsInternal(value){try{if(Object(ts_utils.O)(value))return"hasFullStack"in value&&"typeName"in value}catch(e){}return!1}(exception))typeName=exception[_DYN_TYPE_NAME],message=exception[_DynamicConstants_DYN_MESSAGE],theStack=exception[strStack],parsedStack=exception[_DYN_PARSED_STACK]||[],hasFullStack=exception[_DYN_HAS_FULL_STACK];else{var error=exception,evt=error&&error.evt;Object(ts_utils.H)(error)||(error=error[strError]||evt||error),typeName=dataSanitizeString(logger,_getErrorType(error))||strNotSpecified,message=dataSanitizeMessage(logger,_formatMessage(exception||error,typeName))||strNotSpecified;var stack=exception[strStackDetails]||_getStackFromErrorObj(exception);parsedStack=_parseStack(stack),Object(ts_utils.E)(parsedStack)&&Object(ts_utils.d)(parsedStack,(function(frame){frame[_DYN_ASSEMBLY]=dataSanitizeString(logger,frame[_DYN_ASSEMBLY]),frame[_DYN_FILE_NAME]=dataSanitizeString(logger,frame[_DYN_FILE_NAME])})),theStack=function dataSanitizeException(logger,exception){var exceptionTrunc;if(exception){var value=""+exception;value[_DynamicConstants_DYN_LENGTH]>32768&&(exceptionTrunc=Object(ts_utils.yb)(value,0,32768),DiagnosticLogger_throwInternal(logger,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:exception},!0))}return exceptionTrunc||exception}(logger,function _formatStackTrace(stackDetails){var stack="";return stackDetails&&(stack=stackDetails.obj?stackDetails.obj.join("\n"):stackDetails.src||""),stack}(stack)),hasFullStack=Object(ts_utils.E)(parsedStack)&&parsedStack[_DynamicConstants_DYN_LENGTH]>0,properties&&(properties[_DYN_TYPE_NAME]=properties[_DYN_TYPE_NAME]||typeName)}return(_a={})[_DYN_AI_DATA_CONTRACT]=exDetailsAiDataContract,_a.id=undefined,_a.outerId=undefined,_a.typeName=typeName,_a.message=message,_a[_DYN_HAS_FULL_STACK]=hasFullStack,_a.stack=theStack,_a.parsedStack=parsedStack,_a.toInterface=_toInterface,_a}function _parseFilename(theFrame,fileName){var lineCol=fileName[_DYN_MATCH](PARSE_FILENAME_LINE_COL);if(lineCol&&lineCol[_DynamicConstants_DYN_LENGTH]>=4)theFrame[_DYN_FILE_NAME]=lineCol[1],theFrame[_DYN_LINE]=parseInt(lineCol[2]);else{var lineNo=fileName[_DYN_MATCH](PARSE_FILENAME_LINE_ONLY);lineNo&&lineNo[_DynamicConstants_DYN_LENGTH]>=3?(theFrame[_DYN_FILE_NAME]=lineNo[1],theFrame[_DYN_LINE]=parseInt(lineNo[2])):theFrame[_DYN_FILE_NAME]=fileName}}function _handleFilename(theFrame,sequence,matches){var filename=theFrame[_DYN_FILE_NAME];sequence.fn&&matches&&matches[_DynamicConstants_DYN_LENGTH]>sequence.fn&&(sequence.ln&&matches[_DynamicConstants_DYN_LENGTH]>sequence.ln?(filename=Object(ts_utils.zb)(matches[sequence.fn]||""),theFrame[_DYN_LINE]=parseInt(Object(ts_utils.zb)(matches[sequence.ln]||""))||0):filename=Object(ts_utils.zb)(matches[sequence.fn]||"")),filename&&_parseFilename(theFrame,filename)}var stackFrameAiDataContract=Object(ts_utils.jb)({level:1,method:1,assembly:0,fileName:0,line:0});function _populateFrameSizeInBytes(frame){var sizeInBytes=STACKFRAME_BASE_SIZE;return frame&&(sizeInBytes+=frame.method[_DynamicConstants_DYN_LENGTH],sizeInBytes+=frame.assembly[_DynamicConstants_DYN_LENGTH],sizeInBytes+=frame.fileName[_DynamicConstants_DYN_LENGTH],sizeInBytes+=frame.level.toString()[_DynamicConstants_DYN_LENGTH],sizeInBytes+=frame.line.toString()[_DynamicConstants_DYN_LENGTH],frame[_DYN_SIZE_IN_BYTES]=sizeInBytes),frame}Constants.g;function generateW3CId(){for(var tmp,hexValues=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],oct=STR_EMPTY,a=0;a<4;a++)oct+=hexValues[15&(tmp=random32())]+hexValues[tmp>>4&15]+hexValues[tmp>>8&15]+hexValues[tmp>>12&15]+hexValues[tmp>>16&15]+hexValues[tmp>>20&15]+hexValues[tmp>>24&15]+hexValues[tmp>>28&15];var clockSequenceHi=hexValues[8+(3&random32())|0];return Object(ts_utils.xb)(oct,0,8)+Object(ts_utils.xb)(oct,9,4)+"4"+Object(ts_utils.xb)(oct,13,3)+clockSequenceHi+Object(ts_utils.xb)(oct,16,3)+Object(ts_utils.xb)(oct,19,12)}var DEFAULT_VERSION="00",INVALID_VERSION="ff",INVALID_TRACE_ID="00000000000000000000000000000000",INVALID_SPAN_ID="0000000000000000";function _isValid(value,len,invalidValue){return!(!value||value[_DYN_LENGTH]!==len||value===invalidValue)&&!!value.match(/^[\da-f]*$/i)}function _formatValue(value,len,defValue){return _isValid(value,len)?value:defValue}function _formatFlags(value){(isNaN(value)||value<0||value>255)&&(value=1);for(var result=value.toString(16);result[_DYN_LENGTH]<2;)result="0"+result;return result}function createTraceParent(traceId,spanId,flags,version){return{version:_isValid(version,2,INVALID_VERSION)?version:DEFAULT_VERSION,traceId:isValidTraceId(traceId)?traceId:generateW3CId(),spanId:isValidSpanId(spanId)?spanId:Object(ts_utils.vb)(generateW3CId(),16),traceFlags:flags>=0&&flags<=255?flags:1}}function isValidTraceId(value){return _isValid(value,32,INVALID_TRACE_ID)}function isValidSpanId(value){return _isValid(value,16,INVALID_SPAN_ID)}function formatTraceParent(value){if(value){var flags=_formatFlags(value[_DYN_TRACE_FLAGS]);_isValid(flags,2)||(flags="01");var version=value[_DYN_VERSION]||DEFAULT_VERSION;return"00"!==version&&"ff"!==version&&(version=DEFAULT_VERSION),"".concat(version.toLowerCase(),"-").concat(_formatValue(value.traceId,32,INVALID_TRACE_ID).toLowerCase(),"-").concat(_formatValue(value.spanId,16,INVALID_SPAN_ID).toLowerCase(),"-").concat(flags.toLowerCase())}return""}var RequestHeaders=createValueMap({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),UrlHelperFuncs_document=Object(ts_utils.p)()||{},_htmlAnchorIdx=0,_htmlAnchorElement=[null,null,null,null,null];function urlParseUrl(url){var anchorIdx=_htmlAnchorIdx,anchorCache=_htmlAnchorElement,tempAnchor=anchorCache[anchorIdx];return UrlHelperFuncs_document.createElement?anchorCache[anchorIdx]||(tempAnchor=anchorCache[anchorIdx]=UrlHelperFuncs_document.createElement("a")):tempAnchor={host:urlParseHost(url,!0)},tempAnchor.href=url,++anchorIdx>=anchorCache[_DynamicConstants_DYN_LENGTH]&&(anchorIdx=0),_htmlAnchorIdx=anchorIdx,tempAnchor}function urlParseHost(url,inclPort){var fullHost=urlParseFullHost(url,inclPort)||"";if(fullHost){var match=fullHost[_DYN_MATCH](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=match&&match[_DynamicConstants_DYN_LENGTH]>3&&Object(ts_utils.R)(match[2])&&match[2][_DynamicConstants_DYN_LENGTH]>0)return match[2]+(match[3]||"")}return fullHost}function urlParseFullHost(url,inclPort){var result=null;if(url){var match=url[_DYN_MATCH](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=match&&match[_DynamicConstants_DYN_LENGTH]>2&&Object(ts_utils.R)(match[2])&&match[2][_DynamicConstants_DYN_LENGTH]>0&&(result=match[2]||"",inclPort&&match[_DynamicConstants_DYN_LENGTH]>2)){var protocol=(match[1]||"")[_DynamicConstants_DYN_TO_LOWER_CASE](),port=match[3]||"";("http"===protocol&&":80"===port||"https"===protocol&&":443"===port)&&(port=""),result+=port}}return result}var _internalEndpoints=[DEFAULT_BREEZE_ENDPOINT+"/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],_correlationIdPrefix="cid-v1:";function isInternalApplicationInsightsEndpoint(endpointUrl){return-1!==Object(ts_utils.c)(_internalEndpoints,endpointUrl[_DynamicConstants_DYN_TO_LOWER_CASE]())}function correlationIdCanIncludeCorrelationHeader(config,requestUrl,currentHost){if(!requestUrl||config&&config.disableCorrelationHeaders)return!1;if(config&&config[_DYN_CORRELATION_HEADER_E0])for(var i=0;i<config.correlationHeaderExcludePatterns[_DynamicConstants_DYN_LENGTH];i++)if(config[_DYN_CORRELATION_HEADER_E0][i].test(requestUrl))return!1;var requestHost=urlParseUrl(requestUrl).host[_DynamicConstants_DYN_TO_LOWER_CASE]();if(!requestHost||-1===Object(ts_utils.ub)(requestHost,":443")&&-1===Object(ts_utils.ub)(requestHost,":80")||(requestHost=(urlParseFullHost(requestUrl,!0)||"")[_DynamicConstants_DYN_TO_LOWER_CASE]()),(!config||!config.enableCorsCorrelation)&&requestHost&&requestHost!==currentHost)return!1;var matchExists_1,includedDomains=config&&config.correlationHeaderDomains;if(includedDomains&&(Object(ts_utils.b)(includedDomains,(function(domain){var regex=new RegExp(domain.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));matchExists_1=matchExists_1||regex.test(requestHost)})),!matchExists_1))return!1;var excludedDomains=config&&config.correlationHeaderExcludedDomains;if(!excludedDomains||0===excludedDomains[_DynamicConstants_DYN_LENGTH])return!0;for(i=0;i<excludedDomains[_DynamicConstants_DYN_LENGTH];i++){if(new RegExp(excludedDomains[i].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(requestHost))return!1}return requestHost&&requestHost[_DynamicConstants_DYN_LENGTH]>0}function correlationIdGetCorrelationContext(responseHeader){if(responseHeader){var correlationId=function correlationIdGetCorrelationContextValue(responseHeader,key){if(responseHeader)for(var keyValues=responseHeader[_DynamicConstants_DYN_SPLIT](","),i=0;i<keyValues[_DynamicConstants_DYN_LENGTH];++i){var keyValue=keyValues[i][_DynamicConstants_DYN_SPLIT]("=");if(2===keyValue[_DynamicConstants_DYN_LENGTH]&&keyValue[0]===key)return keyValue[1]}}(responseHeader,RequestHeaders[1]);if(correlationId&&correlationId!==_correlationIdPrefix)return correlationId}}function dateTimeUtilsNow(){var perf=Object(ts_utils.x)();if(perf&&perf.now&&perf.timing){var now=perf.now()+perf.timing.navigationStart;if(now>0)return now}return Object(ts_utils.Eb)()}function dateTimeUtilsDuration(start,end){var result=null;return 0===start||0===end||Object(ts_utils.M)(start)||Object(ts_utils.M)(end)||(result=end-start),result}function createDistributedTraceContextFromTrace(telemetryTrace,parentCtx){var trace=telemetryTrace||{};return{getName:function getName(){return trace[_DynamicConstants_DYN_NAME]},setName:function setName(newValue){parentCtx&&parentCtx.setName(newValue),trace[_DynamicConstants_DYN_NAME]=newValue},getTraceId:function getTraceId(){return trace.traceID},setTraceId:function setTraceId(newValue){parentCtx&&parentCtx.setTraceId(newValue),isValidTraceId(newValue)&&(trace.traceID=newValue)},getSpanId:function getSpanId(){return trace.parentID},setSpanId:function setSpanId(newValue){parentCtx&&parentCtx.setSpanId(newValue),isValidSpanId(newValue)&&(trace.parentID=newValue)},getTraceFlags:function getTraceFlags(){return trace.traceFlags},setTraceFlags:function setTraceFlags(newTraceFlags){parentCtx&&parentCtx.setTraceFlags(newTraceFlags),trace.traceFlags=newTraceFlags}}}var CookieMgr_a,CookieMgr_b,RemoteDependencyData_RemoteDependencyData=function(){function RemoteDependencyData(logger,id,absoluteUrl,commandName,value,success,resultCode,method,requestAPI,correlationContext,properties,measurements){void 0===requestAPI&&(requestAPI="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};this.ver=2,this.id=id,this.duration=msToTimeSpan(value),this.success=success,this.resultCode=resultCode+"",this.type=dataSanitizeString(logger,requestAPI);var dependencyFields=function AjaxHelperParseDependencyPath(logger,absoluteUrl,method,commandName){var target,name=commandName,data=commandName;if(absoluteUrl&&absoluteUrl[_DynamicConstants_DYN_LENGTH]>0){var parsedUrl=urlParseUrl(absoluteUrl);if(target=parsedUrl.host,!name)if(null!=parsedUrl[_DYN_PATHNAME]){var pathName=0===parsedUrl.pathname[_DynamicConstants_DYN_LENGTH]?"/":parsedUrl[_DYN_PATHNAME];"/"!==pathName.charAt(0)&&(pathName="/"+pathName),data=parsedUrl[_DYN_PATHNAME],name=dataSanitizeString(logger,method?method+" "+pathName:pathName)}else name=dataSanitizeString(logger,absoluteUrl)}else target=commandName,name=commandName;return{target:target,name:name,data:data}}(logger,absoluteUrl,method,commandName);this.data=dataSanitizeUrl(logger,commandName)||dependencyFields.data,this.target=dataSanitizeString(logger,dependencyFields.target),correlationContext&&(this.target="".concat(this.target," | ").concat(correlationContext)),this[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,dependencyFields[_DynamicConstants_DYN_NAME]),this.properties=dataSanitizeProperties(logger,properties),this.measurements=dataSanitizeMeasurements(logger,measurements)}return RemoteDependencyData.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",RemoteDependencyData.dataType="RemoteDependencyData",RemoteDependencyData}();function createDomEvent(eventName){var event=null;if(Object(ts_utils.I)(Event))event=new Event(eventName);else{var doc=Object(ts_utils.p)();doc&&doc.createEvent&&(event=doc.createEvent("Event")).initEvent(eventName,!0,!0)}return event}function _stringToBoolOrDefault(theValue,defaultValue,theConfig){return!theValue&&Object(ts_utils.M)(theValue)?defaultValue:Object(ts_utils.F)(theValue)?theValue:"true"===Object(ts_utils.g)(theValue)[_DYN_TO_LOWER_CASE]()}function cfgDfMerge(defaultValue){return{mrg:!0,v:defaultValue}}function cfgDfSet(setter,defaultValue){return{set:setter,v:defaultValue}}function cfgDfValidate(validator,defaultValue,fallBackName){return{fb:fallBackName,isVal:validator,v:defaultValue}}function cfgDfBoolean(defaultValue,fallBackName){return{fb:fallBackName,set:_stringToBoolOrDefault,v:!!defaultValue}}var _doc,strToGMTString="toGMTString",strToUTCString="toUTCString",strCookie="cookie",strExpires="expires",strIsCookieUseDisabled="isCookieUseDisabled",strDisableCookiesUsage="disableCookiesUsage",strConfigCookieMgr="_ckMgr",_supportsCookies=null,_allowUaSameSite=null,_parsedCookieValue=null,_cookieCache={},_globalCookieConfig={},rootDefaultConfig=((CookieMgr_a={cookieCfg:cfgDfMerge((CookieMgr_b={},CookieMgr_b[STR_DOMAIN]={fb:"cookieDomain",dfVal:isNotNullOrUndefined},CookieMgr_b.path={fb:"cookiePath",dfVal:isNotNullOrUndefined},CookieMgr_b.enabled=UNDEFINED_VALUE,CookieMgr_b.ignoreCookies=UNDEFINED_VALUE,CookieMgr_b.blockedCookies=UNDEFINED_VALUE,CookieMgr_b)),cookieDomain:UNDEFINED_VALUE,cookiePath:UNDEFINED_VALUE})[strDisableCookiesUsage]=UNDEFINED_VALUE,CookieMgr_a);function _getDoc(){!_doc&&(_doc=Object(ts_utils.u)((function(){return Object(ts_utils.p)()})))}function _isMgrEnabled(cookieMgr){return!cookieMgr||cookieMgr.isEnabled()}function _isIgnoredCookie(cookieMgrCfg,name){return!!(name&&cookieMgrCfg&&Object(ts_utils.E)(cookieMgrCfg.ignoreCookies))&&-1!==Object(ts_utils.c)(cookieMgrCfg.ignoreCookies,name)}function _isCfgEnabled(rootConfig,cookieMgrConfig){var isCfgEnabled=cookieMgrConfig[_DYN_ENABLED];if(Object(ts_utils.M)(isCfgEnabled)){var cookieEnabled=void 0;Object(ts_utils.T)(rootConfig[strIsCookieUseDisabled])||(cookieEnabled=!rootConfig[strIsCookieUseDisabled]),Object(ts_utils.T)(rootConfig[strDisableCookiesUsage])||(cookieEnabled=!rootConfig[strDisableCookiesUsage]),isCfgEnabled=cookieEnabled}return isCfgEnabled}function safeGetCookieMgr(core,config){var cookieMgr;if(core)cookieMgr=core.getCookieMgr();else if(config){var cookieCfg=config.cookieCfg;cookieMgr=cookieCfg&&cookieCfg[strConfigCookieMgr]?cookieCfg[strConfigCookieMgr]:createCookieMgr(config)}return cookieMgr||(cookieMgr=function _gblCookieMgr(config,logger){var inst=createCookieMgr[strConfigCookieMgr]||_globalCookieConfig[strConfigCookieMgr];return inst||(inst=createCookieMgr[strConfigCookieMgr]=createCookieMgr(config,logger),_globalCookieConfig[strConfigCookieMgr]=inst),inst}(config,(core||{})[_DYN_LOGGER])),cookieMgr}function createCookieMgr(rootConfig,logger){var cookieMgrConfig,_path,_domain,unloadHandler,_enabled,_getCookieFn,_setCookieFn,_delCookieFn;rootConfig=createDynamicConfig(rootConfig||_globalCookieConfig,null,logger).cfg,unloadHandler=onConfigChange(rootConfig,(function(details){details.setDf(details.cfg,rootDefaultConfig),cookieMgrConfig=details.ref(details.cfg,"cookieCfg"),_path=cookieMgrConfig[STR_PATH]||"/",_domain=cookieMgrConfig[STR_DOMAIN],_enabled=!1!==_isCfgEnabled(rootConfig,cookieMgrConfig),_getCookieFn=cookieMgrConfig.getCookie||_getCookieValue,_setCookieFn=cookieMgrConfig.setCookie||_setCookieValue,_delCookieFn=cookieMgrConfig.delCookie||_setCookieValue}),logger);var cookieMgr={isEnabled:function isEnabled(){var enabled=!1!==_isCfgEnabled(rootConfig,cookieMgrConfig)&&_enabled&&areCookiesSupported(logger),gblManager=_globalCookieConfig[strConfigCookieMgr];return enabled&&gblManager&&cookieMgr!==gblManager&&(enabled=_isMgrEnabled(gblManager)),enabled},setEnabled:function setEnabled(value){_enabled=!1!==value,cookieMgrConfig[_DYN_ENABLED]=value},set:function set(name,value,maxAgeSec,domain,path){var result=!1;if(_isMgrEnabled(cookieMgr)&&!function _isBlockedCookie(cookieMgrCfg,name){return!!(name&&cookieMgrCfg&&Object(ts_utils.E)(cookieMgrCfg.blockedCookies)&&-1!==Object(ts_utils.c)(cookieMgrCfg.blockedCookies,name))||_isIgnoredCookie(cookieMgrCfg,name)}(cookieMgrConfig,name)){var values={},theValue=Object(ts_utils.zb)(value||STR_EMPTY),idx=Object(ts_utils.ub)(theValue,";");if(-1!==idx&&(theValue=Object(ts_utils.zb)(Object(ts_utils.vb)(value,idx)),values=_extractParts(Object(ts_utils.yb)(value,idx+1))),setValue(values,STR_DOMAIN,domain||_domain,ts_utils.S,ts_utils.T),!Object(ts_utils.M)(maxAgeSec)){var _isIE=isIE();if(Object(ts_utils.T)(values[strExpires])){var expireMs=Object(ts_utils.Eb)()+1e3*maxAgeSec;if(expireMs>0){var expiry=new Date;expiry.setTime(expireMs),setValue(values,strExpires,_formatDate(expiry,_isIE?strToGMTString:strToUTCString)||_formatDate(expiry,_isIE?strToGMTString:strToUTCString)||STR_EMPTY,ts_utils.S)}}_isIE||setValue(values,"max-age",STR_EMPTY+maxAgeSec,null,ts_utils.T)}var location_1=getLocation();location_1&&"https:"===location_1.protocol&&(setValue(values,"secure",null,null,ts_utils.T),null===_allowUaSameSite&&(_allowUaSameSite=!function uaDisallowsSameSiteNone(userAgent){if(!Object(ts_utils.R)(userAgent))return!1;if(strContains(userAgent,"CPU iPhone OS 12")||strContains(userAgent,"iPad; CPU OS 12"))return!0;if(strContains(userAgent,"Macintosh; Intel Mac OS X 10_14")&&strContains(userAgent,"Version/")&&strContains(userAgent,"Safari"))return!0;if(strContains(userAgent,"Macintosh; Intel Mac OS X 10_14")&&Object(ts_utils.tb)(userAgent,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))return!0;if(strContains(userAgent,"Chrome/5")||strContains(userAgent,"Chrome/6"))return!0;if(strContains(userAgent,"UnrealEngine")&&!strContains(userAgent,"Chrome"))return!0;if(strContains(userAgent,"UCBrowser/12")||strContains(userAgent,"UCBrowser/11"))return!0;return!1}((Object(ts_utils.w)()||{})[_DYN_USER_AGENT])),_allowUaSameSite&&setValue(values,"SameSite","None",null,ts_utils.T)),setValue(values,STR_PATH,path||_path,null,ts_utils.T),_setCookieFn(name,_formatCookieValue(theValue,values)),result=!0}return result},get:function get(name){var value=STR_EMPTY;return _isMgrEnabled(cookieMgr)&&!_isIgnoredCookie(cookieMgrConfig,name)&&(value=_getCookieFn(name)),value},del:function del(name,path){var result=!1;return _isMgrEnabled(cookieMgr)&&(result=cookieMgr.purge(name,path)),result},purge:function purge(name,path){var _a,result=!1;if(areCookiesSupported(logger)){var values=((_a={})[STR_PATH]=path||"/",_a[strExpires]="Thu, 01 Jan 1970 00:00:01 GMT",_a);isIE()||(values["max-age"]="0"),_delCookieFn(name,_formatCookieValue(STR_EMPTY,values)),result=!0}return result},unload:function unload(isAsync){unloadHandler&&unloadHandler.rm(),unloadHandler=null}};return cookieMgr[strConfigCookieMgr]=cookieMgr,cookieMgr}function areCookiesSupported(logger){if(null===_supportsCookies){_supportsCookies=!1,!_doc&&_getDoc();try{var doc=_doc.v||{};_supportsCookies=void 0!==doc[strCookie]}catch(e){DiagnosticLogger_throwInternal(logger,2,68,"Cannot access document.cookie - "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}}return _supportsCookies}function _extractParts(theValue){var values={};if(theValue&&theValue[_DYN_LENGTH]){var parts=Object(ts_utils.zb)(theValue)[_DYN_SPLIT](";");Object(ts_utils.b)(parts,(function(thePart){if(thePart=Object(ts_utils.zb)(thePart||STR_EMPTY)){var idx=Object(ts_utils.ub)(thePart,"=");-1===idx?values[thePart]=null:values[Object(ts_utils.zb)(Object(ts_utils.vb)(thePart,idx))]=Object(ts_utils.zb)(Object(ts_utils.yb)(thePart,idx+1))}}))}return values}function _formatDate(theDate,func){return Object(ts_utils.I)(theDate[func])?theDate[func]():null}function _formatCookieValue(value,values){var cookieValue=value||STR_EMPTY;return Object(ts_utils.ib)(values,(function(name,theValue){cookieValue+="; "+name+(Object(ts_utils.M)(theValue)?STR_EMPTY:"="+theValue)})),cookieValue}function _getCookieValue(name){var cookieValue=STR_EMPTY;if(!_doc&&_getDoc(),_doc.v){var theCookie=_doc.v[strCookie]||STR_EMPTY;_parsedCookieValue!==theCookie&&(_cookieCache=_extractParts(theCookie),_parsedCookieValue=theCookie),cookieValue=Object(ts_utils.zb)(_cookieCache[name]||STR_EMPTY)}return cookieValue}function _setCookieValue(name,cookieValue){!_doc&&_getDoc(),_doc.v&&(_doc.v[strCookie]=name+"="+cookieValue)}var strOnPrefix="on",strAttachEvent="attachEvent",strAddEventHelper="addEventListener",strDetachEvent="detachEvent",strRemoveEventListener="removeEventListener",strEvents="events",strVisibilityChangeEvt="visibilitychange",strPageHide="pagehide",strUnload="unload",strBeforeUnload="beforeunload",strPageHideNamespace=createUniqueNamespace("aiEvtPageHide"),rRemoveEmptyNs=(createUniqueNamespace("aiEvtPageShow"),/\.[\.]+/g),rRemoveTrailingEmptyNs=/[\.]+$/,_guid=1,elmNodeData=createElmNodeData("events"),eventNamespace=/^([^.]*)(?:\.(.+)|)/;function _normalizeNamespace(name){return name&&name[_DYN_REPLACE]?name[_DYN_REPLACE](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,STR_EMPTY):name}function _getEvtNamespace(eventName,evtNamespace){if(evtNamespace){var theNamespace_1=STR_EMPTY;Object(ts_utils.E)(evtNamespace)?(theNamespace_1=STR_EMPTY,Object(ts_utils.b)(evtNamespace,(function(name){(name=_normalizeNamespace(name))&&("."!==name[0]&&(name="."+name),theNamespace_1+=name)}))):theNamespace_1=_normalizeNamespace(evtNamespace),theNamespace_1&&("."!==theNamespace_1[0]&&(theNamespace_1="."+theNamespace_1),eventName=(eventName||STR_EMPTY)+theNamespace_1)}var parsedEvent=eventNamespace.exec(eventName||STR_EMPTY)||[];return{type:parsedEvent[1],ns:(parsedEvent[2]||STR_EMPTY).replace(rRemoveEmptyNs,".").replace(rRemoveTrailingEmptyNs,STR_EMPTY)[_DYN_SPLIT](".").sort().join(".")}}function _getRegisteredEvents(target,evtName,addDefault){void 0===addDefault&&(addDefault=!0);var aiEvts=elmNodeData.get(target,strEvents,{},addDefault),registeredEvents=aiEvts[evtName];return registeredEvents||(registeredEvents=aiEvts[evtName]=[]),registeredEvents}function _doDetach(obj,evtName,handlerRef,useCapture){obj&&evtName&&evtName[_DYN_TYPE]&&(obj[strRemoveEventListener]?obj[strRemoveEventListener](evtName[_DYN_TYPE],handlerRef,useCapture):obj[strDetachEvent]&&obj[strDetachEvent](strOnPrefix+evtName[_DYN_TYPE],handlerRef))}function _doUnregister(target,events,evtName,unRegFn){for(var idx=events[_DYN_LENGTH];idx--;){var theEvent=events[idx];theEvent&&(evtName.ns&&evtName.ns!==theEvent[_DYN_EVT_NAME].ns||unRegFn&&!unRegFn(theEvent)||(_doDetach(target,theEvent[_DYN_EVT_NAME],theEvent.handler,theEvent.capture),events[_DYN_SPLICE](idx,1)))}}function mergeEvtNamespace(theNamespace,namespaces){return namespaces?_getEvtNamespace("xx",Object(ts_utils.E)(namespaces)?[theNamespace].concat(namespaces):[theNamespace,namespaces]).ns[_DYN_SPLIT]("."):theNamespace}function eventOn(target,eventName,handlerRef,evtNamespace,useCapture){void 0===useCapture&&(useCapture=!1);var result=!1;if(target)try{var evtName=_getEvtNamespace(eventName,evtNamespace);if(result=function _doAttach(obj,evtName,handlerRef,useCapture){var result=!1;return obj&&evtName&&evtName[_DYN_TYPE]&&handlerRef&&(obj[strAddEventHelper]?(obj[strAddEventHelper](evtName[_DYN_TYPE],handlerRef,useCapture),result=!0):obj[strAttachEvent]&&(obj[strAttachEvent](strOnPrefix+evtName[_DYN_TYPE],handlerRef),result=!0)),result}(target,evtName,handlerRef,useCapture),result&&elmNodeData.accept(target)){var registeredEvent={guid:_guid++,evtName:evtName,handler:handlerRef,capture:useCapture};_getRegisteredEvents(target,evtName.type)[_DYN_PUSH](registeredEvent)}}catch(e){}return result}function eventOff(target,eventName,handlerRef,evtNamespace,useCapture){if(void 0===useCapture&&(useCapture=!1),target)try{var evtName_1=_getEvtNamespace(eventName,evtNamespace),found_1=!1;!function _unregisterEvents(target,evtName,unRegFn){if(evtName[_DYN_TYPE])_doUnregister(target,_getRegisteredEvents(target,evtName[_DYN_TYPE]),evtName,unRegFn);else{var eventCache=elmNodeData.get(target,strEvents,{});Object(ts_utils.ib)(eventCache,(function(evtType,events){_doUnregister(target,events,evtName,unRegFn)})),0===Object(ts_utils.nb)(eventCache)[_DYN_LENGTH]&&elmNodeData.kill(target,strEvents)}}(target,evtName_1,(function(regEvent){return!((!evtName_1.ns||handlerRef)&&regEvent.handler!==handlerRef)&&(found_1=!0,!0)})),found_1||_doDetach(target,evtName_1,handlerRef,useCapture)}catch(e){}}function _addEventListeners(events,listener,excludeEvents,evtNamespace){var added=!1;return listener&&events&&events[_DYN_LENGTH]>0&&Object(ts_utils.b)(events,(function(name){name&&(excludeEvents&&-1!==Object(ts_utils.c)(excludeEvents,name)||(added=function addEventHandler(eventName,callback,evtNamespace){var result=!1,w=Object(ts_utils.y)();w&&(result=eventOn(w,eventName,callback,evtNamespace),result=eventOn(w.body,eventName,callback,evtNamespace)||result);var doc=Object(ts_utils.p)();return doc&&(result=eventOn(doc,eventName,callback,evtNamespace)||result),result}(name,listener,evtNamespace)||added))})),added}function removeEventListeners(events,listener,evtNamespace){events&&Object(ts_utils.E)(events)&&Object(ts_utils.b)(events,(function(name){name&&function removeEventHandler(eventName,callback,evtNamespace){var w=Object(ts_utils.y)();w&&(eventOff(w,eventName,callback,evtNamespace),eventOff(w.body,eventName,callback,evtNamespace));var doc=Object(ts_utils.p)();doc&&eventOff(doc,eventName,callback,evtNamespace)}(name,listener,evtNamespace)}))}function addPageUnloadEventListener(listener,excludeEvents,evtNamespace){return function addEventListeners(events,listener,excludeEvents,evtNamespace){var added=!1;return listener&&events&&Object(ts_utils.E)(events)&&!(added=_addEventListeners(events,listener,excludeEvents,evtNamespace))&&excludeEvents&&excludeEvents[_DYN_LENGTH]>0&&(added=_addEventListeners(events,listener,null,evtNamespace)),added}([strBeforeUnload,strUnload,strPageHide],listener,excludeEvents,evtNamespace)}function addPageHideEventListener(listener,excludeEvents,evtNamespace){var newNamespaces=mergeEvtNamespace(strPageHideNamespace,evtNamespace),pageUnloadAdded=_addEventListeners([strPageHide],listener,excludeEvents,newNamespaces);return excludeEvents&&-1!==Object(ts_utils.c)(excludeEvents,strVisibilityChangeEvt)||(pageUnloadAdded=_addEventListeners([strVisibilityChangeEvt],(function _handlePageVisibility(evt){var doc=Object(ts_utils.p)();listener&&doc&&"hidden"===doc.visibilityState&&listener(evt)}),excludeEvents,newNamespaces)||pageUnloadAdded),!pageUnloadAdded&&excludeEvents&&(pageUnloadAdded=addPageHideEventListener(listener,null,evtNamespace)),pageUnloadAdded}var strParentContextKey="ParentContextKey",strChildrenContextKey="ChildrenContextKey",_defaultPerfManager=null,PerfManager_PerfEvent=function(){function PerfEvent(name,payloadDetails,isAsync){var theDetails_1,_self=this;(_self.start=Object(ts_utils.Eb)(),_self[_DYN_NAME]=name,_self.isAsync=isAsync,_self.isChildEvt=function(){return!1},Object(ts_utils.I)(payloadDetails))&&Object(ts_utils.eb)(_self,"payload",{g:function g(){return!theDetails_1&&Object(ts_utils.I)(payloadDetails)&&(theDetails_1=payloadDetails(),payloadDetails=null),theDetails_1}});_self[_DYN_GET_CTX]=function(key){return key?key===PerfEvent[strParentContextKey]||key===PerfEvent[strChildrenContextKey]?_self[key]:(_self.ctx||{})[key]:null},_self[_DYN_SET_CTX]=function(key,value){if(key)if(key===PerfEvent[strParentContextKey])_self[key]||(_self.isChildEvt=function(){return!0}),_self[key]=value;else if(key===PerfEvent[strChildrenContextKey])_self[key]=value;else{(_self.ctx=_self.ctx||{})[key]=value}},_self.complete=function(){var childTime=0,childEvts=_self[_DYN_GET_CTX](PerfEvent[strChildrenContextKey]);if(Object(ts_utils.E)(childEvts))for(var lp=0;lp<childEvts[_DYN_LENGTH];lp++){var childEvt=childEvts[lp];childEvt&&(childTime+=childEvt.time)}_self.time=Object(ts_utils.Eb)()-_self.start,_self.exTime=_self.time-childTime,_self.complete=function(){}}}return PerfEvent.ParentContextKey="parent",PerfEvent.ChildrenContextKey="childEvts",PerfEvent}(),PerfManager_PerfManager=function(){function PerfManager(manager){this.ctx={},dynamicProto(PerfManager,this,(function(_self){_self.create=function(src,payloadDetails,isAsync){return new PerfManager_PerfEvent(src,payloadDetails,isAsync)},_self.fire=function(perfEvent){perfEvent&&(perfEvent.complete(),manager&&Object(ts_utils.I)(manager.perfEvent)&&manager.perfEvent(perfEvent))},_self[_DYN_SET_CTX]=function(key,value){key&&((_self.ctx=_self.ctx||{})[key]=value)},_self[_DYN_GET_CTX]=function(key){return(_self.ctx||{})[key]}}))}return PerfManager.__ieDyn=1,PerfManager}(),doPerfActiveKey="CoreUtils.doPerf";function doPerf(mgrSource,getSource,func,details,isAsync){if(mgrSource){var perfMgr=mgrSource;if(perfMgr[STR_GET_PERF_MGR]&&(perfMgr=perfMgr[STR_GET_PERF_MGR]()),perfMgr){var perfEvt=void 0,currentActive=perfMgr[_DYN_GET_CTX](doPerfActiveKey);try{if(perfEvt=perfMgr.create(getSource(),details,isAsync)){if(currentActive&&perfEvt[_DYN_SET_CTX]&&(perfEvt[_DYN_SET_CTX](PerfManager_PerfEvent[strParentContextKey],currentActive),currentActive[_DYN_GET_CTX]&&currentActive[_DYN_SET_CTX])){var children=currentActive[_DYN_GET_CTX](PerfManager_PerfEvent[strChildrenContextKey]);children||(children=[],currentActive[_DYN_SET_CTX](PerfManager_PerfEvent[strChildrenContextKey],children)),children[_DYN_PUSH](perfEvt)}return perfMgr[_DYN_SET_CTX](doPerfActiveKey,perfEvt),func(perfEvt)}}catch(ex){perfEvt&&perfEvt[_DYN_SET_CTX]&&perfEvt[_DYN_SET_CTX]("exception",ex)}finally{perfEvt&&perfMgr.fire(perfEvt),perfMgr[_DYN_SET_CTX](doPerfActiveKey,currentActive)}}}return func()}var pluginStateData=createElmNodeData("plugin");function _getPluginState(plugin){return pluginStateData.get(plugin,"state",{},!0)}function initializePlugins(processContext,extensions){for(var pluginState,initPlugins=[],lastPlugin=null,proxy=processContext[_DYN_GET_NEXT]();proxy;){var thePlugin=proxy[_DYN_GET_PLUGIN]();if(thePlugin){lastPlugin&&lastPlugin[_DYN_SET_NEXT_PLUGIN]&&thePlugin[STR_PROCESS_TELEMETRY]&&lastPlugin[_DYN_SET_NEXT_PLUGIN](thePlugin);var isInitialized=!!(pluginState=_getPluginState(thePlugin))[_DYN_IS_INITIALIZED];thePlugin[_DYN_IS_INITIALIZED]&&(isInitialized=thePlugin[_DYN_IS_INITIALIZED]()),isInitialized||initPlugins[_DYN_PUSH](thePlugin),lastPlugin=thePlugin,proxy=proxy[_DYN_GET_NEXT]()}}Object(ts_utils.b)(initPlugins,(function(thePlugin){var core=processContext[STR_CORE]();thePlugin[_DYN_INITIALIZE](processContext.getCfg(),core,extensions,processContext[_DYN_GET_NEXT]()),pluginState=_getPluginState(thePlugin),thePlugin[STR_CORE]||pluginState[STR_CORE]||(pluginState[STR_CORE]=core),pluginState[_DYN_IS_INITIALIZED]=!0,delete pluginState[_DYN_TEARDOWN]}))}function sortPlugins(plugins){return plugins.sort((function(extA,extB){var result=0;if(extB){var bHasProcess=extB[STR_PROCESS_TELEMETRY];extA[STR_PROCESS_TELEMETRY]?result=bHasProcess?extA[STR_PRIORITY]-extB[STR_PRIORITY]:1:bHasProcess&&(result=-1)}else result=extA?1:-1;return result}))}var strTelemetryPluginChain="TelemetryPluginChain",strHasRunFlags="_hasRun",strGetTelCtx="_getTelCtx",_chainId=0;function _createInternalContext(telemetryChain,dynamicHandler,_core,startAt){var _nextProxy=null,_onComplete=[];dynamicHandler||(dynamicHandler=createDynamicConfig({},null,_core[_DYN_LOGGER])),null!==startAt&&(_nextProxy=startAt?function _getNextProxyStart(proxy,core,startAt){for(;proxy;){if(proxy[_DYN_GET_PLUGIN]()===startAt)return proxy;proxy=proxy[_DYN_GET_NEXT]()}return createTelemetryProxyChain([startAt],core.config||{},core)}(telemetryChain,_core,startAt):telemetryChain);var context={_next:function _moveNext(){var nextProxy=_nextProxy;if(_nextProxy=nextProxy?nextProxy[_DYN_GET_NEXT]():null,!nextProxy){var onComplete=_onComplete;onComplete&&onComplete[_DYN_LENGTH]>0&&(Object(ts_utils.b)(onComplete,(function(completeDetails){try{completeDetails.func.call(completeDetails.self,completeDetails.args)}catch(e){DiagnosticLogger_throwInternal(_core[_DYN_LOGGER],2,73,"Unexpected Exception during onComplete - "+Object(ts_utils.n)(e))}})),_onComplete=[])}return nextProxy},ctx:{core:function core(){return _core},diagLog:function diagLog(){return safeGetLogger(_core,dynamicHandler.cfg)},getCfg:function getCfg(){return dynamicHandler.cfg},getExtCfg:function _resolveExtCfg(identifier,defaultValues){var newConfig=_getExtCfg(identifier,!0);defaultValues&&Object(ts_utils.ib)(defaultValues,(function(field,defaultValue){if(Object(ts_utils.M)(newConfig[field])){var cfgValue=dynamicHandler.cfg[field];!cfgValue&&Object(ts_utils.M)(cfgValue)||(newConfig[field]=cfgValue)}_applyDefaultValue(dynamicHandler,newConfig,field,defaultValue)}));return dynamicHandler.setDf(newConfig,defaultValues)},getConfig:function _getConfig(identifier,field,defaultValue){void 0===defaultValue&&(defaultValue=!1);var theValue,extConfig=_getExtCfg(identifier,!1),rootConfig=dynamicHandler.cfg;!extConfig||!extConfig[field]&&Object(ts_utils.M)(extConfig[field])?!rootConfig[field]&&Object(ts_utils.M)(rootConfig[field])||(theValue=rootConfig[field]):theValue=extConfig[field];return theValue||!Object(ts_utils.M)(theValue)?theValue:defaultValue},hasNext:function hasNext(){return!!_nextProxy},getNext:function getNext(){return _nextProxy},setNext:function setNext(nextPlugin){_nextProxy=nextPlugin},iterate:function _iterateChain(cb){var nextPlugin;for(;nextPlugin=context._next();){var plugin=nextPlugin[_DYN_GET_PLUGIN]();plugin&&cb(plugin)}},onComplete:function _addOnComplete(onComplete,that){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];onComplete&&_onComplete[_DYN_PUSH]({func:onComplete,self:Object(ts_utils.T)(that)?context.ctx:that,args:args})}}};function _getExtCfg(identifier,createIfMissing){var idCfg=null,cfg=dynamicHandler.cfg;if(cfg&&identifier){var extCfg=cfg[STR_EXTENSION_CONFIG];!extCfg&&createIfMissing&&(extCfg={}),cfg[STR_EXTENSION_CONFIG]=extCfg,(extCfg=dynamicHandler.ref(cfg,STR_EXTENSION_CONFIG))&&(!(idCfg=extCfg[identifier])&&createIfMissing&&(idCfg={}),extCfg[identifier]=idCfg,idCfg=dynamicHandler.ref(extCfg,identifier))}return idCfg}return context}function createProcessTelemetryContext(telemetryChain,cfg,core,startAt){var config=createDynamicConfig(cfg),internalContext=_createInternalContext(telemetryChain,config,core,startAt),context=internalContext.ctx;return context[_DYN_PROCESS_NEXT]=function _processNext(env){var nextPlugin=internalContext._next();return nextPlugin&&nextPlugin[STR_PROCESS_TELEMETRY](env,context),!nextPlugin},context[_DYN_CREATE_NEW]=function _createNew(plugins,startAt){return void 0===plugins&&(plugins=null),Object(ts_utils.E)(plugins)&&(plugins=createTelemetryProxyChain(plugins,config.cfg,core,startAt)),createProcessTelemetryContext(plugins||context[_DYN_GET_NEXT](),config.cfg,core,startAt)},context}function createProcessTelemetryUnloadContext(telemetryChain,core,startAt){var config=createDynamicConfig(core.config),internalContext=_createInternalContext(telemetryChain,config,core,startAt),context=internalContext.ctx;return context[_DYN_PROCESS_NEXT]=function _processNext(unloadState){var nextPlugin=internalContext._next();return nextPlugin&&nextPlugin[_DYN_UNLOAD](context,unloadState),!nextPlugin},context[_DYN_CREATE_NEW]=function _createNew(plugins,startAt){return void 0===plugins&&(plugins=null),Object(ts_utils.E)(plugins)&&(plugins=createTelemetryProxyChain(plugins,config.cfg,core,startAt)),createProcessTelemetryUnloadContext(plugins||context[_DYN_GET_NEXT](),core,startAt)},context}function createProcessTelemetryUpdateContext(telemetryChain,core,startAt){var config=createDynamicConfig(core.config),context=_createInternalContext(telemetryChain,config,core,startAt).ctx;return context[_DYN_PROCESS_NEXT]=function _processNext(updateState){return context.iterate((function(plugin){Object(ts_utils.I)(plugin[_DYN_UPDATE])&&plugin[_DYN_UPDATE](context,updateState)}))},context[_DYN_CREATE_NEW]=function _createNew(plugins,startAt){return void 0===plugins&&(plugins=null),Object(ts_utils.E)(plugins)&&(plugins=createTelemetryProxyChain(plugins,config.cfg,core,startAt)),createProcessTelemetryUpdateContext(plugins||context[_DYN_GET_NEXT](),core,startAt)},context}function createTelemetryProxyChain(plugins,config,core,startAt){var firstProxy=null,add=!startAt;if(Object(ts_utils.E)(plugins)&&plugins[_DYN_LENGTH]>0){var lastProxy_1=null;Object(ts_utils.b)(plugins,(function(thePlugin){if(add||startAt!==thePlugin||(add=!0),add&&thePlugin&&Object(ts_utils.I)(thePlugin[STR_PROCESS_TELEMETRY])){var newProxy=function createTelemetryPluginProxy(plugin,config,core){var chainId,nextProxy=null,hasProcessTelemetry=Object(ts_utils.I)(plugin[STR_PROCESS_TELEMETRY]),hasSetNext=Object(ts_utils.I)(plugin[_DYN_SET_NEXT_PLUGIN]);chainId=plugin?plugin[_DYN_IDENTIFIER]+"-"+plugin[STR_PRIORITY]+"-"+_chainId++:"Unknown-0-"+_chainId++;var proxyChain={getPlugin:function getPlugin(){return plugin},getNext:function getNext(){return nextProxy},processTelemetry:_processTelemetry,unload:_unloadPlugin,update:_updatePlugin,_id:chainId,_setNext:function _setNext(nextPlugin){nextProxy=nextPlugin}};function _getTelCtx(){var itemCtx;return plugin&&Object(ts_utils.I)(plugin[strGetTelCtx])&&(itemCtx=plugin[strGetTelCtx]()),itemCtx||(itemCtx=createProcessTelemetryContext(proxyChain,config,core)),itemCtx}function _processChain(itemCtx,processPluginFn,name,details,isAsync){var hasRun=!1,identifier=plugin?plugin[_DYN_IDENTIFIER]:strTelemetryPluginChain,hasRunContext=itemCtx[strHasRunFlags];return hasRunContext||(hasRunContext=itemCtx[strHasRunFlags]={}),itemCtx.setNext(nextProxy),plugin&&doPerf(itemCtx[STR_CORE](),(function(){return identifier+":"+name}),(function(){hasRunContext[chainId]=!0;try{var nextId=nextProxy?nextProxy._id:STR_EMPTY;nextId&&(hasRunContext[nextId]=!1),hasRun=processPluginFn(itemCtx)}catch(error){var hasNextRun=!nextProxy||hasRunContext[nextProxy._id];hasNextRun&&(hasRun=!0),nextProxy&&hasNextRun||DiagnosticLogger_throwInternal(itemCtx[_DYN_DIAG_LOG](),1,73,"Plugin ["+identifier+"] failed during "+name+" - "+Object(ts_utils.n)(error)+", run flags: "+Object(ts_utils.n)(hasRunContext))}}),details,isAsync),hasRun}function _processTelemetry(env,itemCtx){function _callProcessTelemetry(itemCtx){if(!plugin||!hasProcessTelemetry)return!1;var pluginState=_getPluginState(plugin);return!pluginState[_DYN_TEARDOWN]&&!pluginState[STR_DISABLED]&&(hasSetNext&&plugin[_DYN_SET_NEXT_PLUGIN](nextProxy),plugin[STR_PROCESS_TELEMETRY](env,itemCtx),!0)}_processChain(itemCtx=itemCtx||_getTelCtx(),_callProcessTelemetry,"processTelemetry",(function(){return{item:env}}),!env.sync)||itemCtx[_DYN_PROCESS_NEXT](env)}function _unloadPlugin(unloadCtx,unloadState){function _callTeardown(){var hasRun=!1;if(plugin){var pluginState=_getPluginState(plugin),pluginCore=plugin[STR_CORE]||pluginState[STR_CORE];!plugin||pluginCore&&pluginCore!==unloadCtx.core()||pluginState[_DYN_TEARDOWN]||(pluginState[STR_CORE]=null,pluginState[_DYN_TEARDOWN]=!0,pluginState[_DYN_IS_INITIALIZED]=!1,plugin[_DYN_TEARDOWN]&&!0===plugin[_DYN_TEARDOWN](unloadCtx,unloadState)&&(hasRun=!0))}return hasRun}_processChain(unloadCtx,_callTeardown,"unload",(function(){}),unloadState.isAsync)||unloadCtx[_DYN_PROCESS_NEXT](unloadState)}function _updatePlugin(updateCtx,updateState){function _callUpdate(){var hasRun=!1;if(plugin){var pluginState=_getPluginState(plugin),pluginCore=plugin[STR_CORE]||pluginState[STR_CORE];!plugin||pluginCore&&pluginCore!==updateCtx.core()||pluginState[_DYN_TEARDOWN]||plugin[_DYN_UPDATE]&&!0===plugin[_DYN_UPDATE](updateCtx,updateState)&&(hasRun=!0)}return hasRun}_processChain(updateCtx,_callUpdate,"update",(function(){}),!1)||updateCtx[_DYN_PROCESS_NEXT](updateState)}return Object(ts_utils.jb)(proxyChain)}(thePlugin,config,core);firstProxy||(firstProxy=newProxy),lastProxy_1&&lastProxy_1._setNext(newProxy),lastProxy_1=newProxy}}))}return startAt&&!firstProxy?createTelemetryProxyChain([startAt],config,core):firstProxy}function InstrumentHooks_typeof(obj){return InstrumentHooks_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},InstrumentHooks_typeof(obj)}var _maxHooks,_hookAddMonitor,BaseTelemetryPlugin_a,aiInstrumentHooks="_aiHooks",cbNames=["req","rsp","hkErr","fnErr"];function _arrLoop(arr,fn){if(arr)for(var lp=0;lp<arr[_DYN_LENGTH]&&!fn(arr[lp],lp);lp++);}function _doCallbacks(hooks,callDetails,cbArgs,hookCtx,type){type>=0&&type<=2&&_arrLoop(hooks,(function(hook,idx){var cbks=hook.cbks,cb=cbks[cbNames[type]];if(cb){callDetails.ctx=function(){return hookCtx[idx]=hookCtx[idx]||{}};try{cb[_DYN_APPLY](callDetails.inst,cbArgs)}catch(err){var orgEx=callDetails.err;try{var hookErrorCb=cbks[cbNames[2]];hookErrorCb&&(callDetails.err=err,hookErrorCb[_DYN_APPLY](callDetails.inst,cbArgs))}catch(e){}finally{callDetails.err=orgEx}}}}))}function _getOwner(target,name,checkPrototype,checkParentProto){var owner=null;return target&&(Object(ts_utils.mb)(target,name)?owner=target:checkPrototype&&(owner=_getOwner(HelperFuncs_getObjProto(target),name,checkParentProto,!1))),owner}function _createInstrumentHook(owner,funcName,fn,callbacks){var aiHook=fn&&fn[aiInstrumentHooks];if(!aiHook){var newFunc=function _createFunctionHook(aiHook){return function(){var orgArgs=arguments,hooks=aiHook.h,funcArgs={name:aiHook.n,inst:this,ctx:null,set:function _replaceArg(idx,value){(orgArgs=_createArgs([],orgArgs))[idx]=value,cbArgs=_createArgs([funcArgs],orgArgs)}},hookCtx=[],cbArgs=_createArgs([funcArgs],orgArgs);function _createArgs(target,theArgs){return _arrLoop(theArgs,(function(arg){target[_DYN_PUSH](arg)})),target}funcArgs.evt=Object(ts_utils.s)("event"),_doCallbacks(hooks,funcArgs,cbArgs,hookCtx,0);var theFunc=aiHook.f;if(theFunc)try{funcArgs.rslt=theFunc[_DYN_APPLY](this,orgArgs)}catch(err){throw funcArgs.err=err,_doCallbacks(hooks,funcArgs,cbArgs,hookCtx,3),err}return _doCallbacks(hooks,funcArgs,cbArgs,hookCtx,1),funcArgs.rslt}}(aiHook={i:0,n:funcName,f:fn,h:[]});newFunc[aiInstrumentHooks]=aiHook,owner[funcName]=newFunc}var theHook={id:aiHook.i,cbks:callbacks,rm:function rm(){var id=this.id;_arrLoop(aiHook.h,(function(hook,idx){if(hook.id===id)return aiHook.h[_DYN_SPLICE](idx,1),1}))}};return aiHook.i++,aiHook.h[_DYN_PUSH](theHook),theHook}function InstrumentFunc(target,funcName,callbacks,checkPrototype,checkParentProto){if(void 0===checkPrototype&&(checkPrototype=!0),target&&funcName&&callbacks){var owner=_getOwner(target,funcName,checkPrototype,checkParentProto);if(owner){var fn=owner[funcName];if(InstrumentHooks_typeof(fn)===Constants.d)return _createInstrumentHook(owner,funcName,fn,callbacks)}}return null}function InstrumentEvent(target,evtName,callbacks,checkPrototype,checkParentProto){if(target&&evtName&&callbacks){var owner=_getOwner(target,evtName,checkPrototype,checkParentProto)||target;if(owner)return _createInstrumentHook(owner,evtName,owner[evtName],callbacks)}return null}function createUnloadHandlerContainer(){var handlers=[];return{add:function _addHandler(handler){handler&&handlers[_DYN_PUSH](handler)},run:function _runHandlers(unloadCtx,unloadState){Object(ts_utils.b)(handlers,(function(handler){try{handler(unloadCtx,unloadState)}catch(e){DiagnosticLogger_throwInternal(unloadCtx[_DYN_DIAG_LOG](),2,73,"Unexpected error calling unload handler - "+Object(ts_utils.n)(e))}})),handlers=[]}}}function createUnloadHookContainer(){var _hooks=[];return{run:function _doUnload(logger){var oldHooks=_hooks;_hooks=[],Object(ts_utils.b)(oldHooks,(function(fn){try{(fn.rm||fn.remove).call(fn)}catch(e){DiagnosticLogger_throwInternal(logger,2,73,"Unloading:"+Object(ts_utils.n)(e))}})),_maxHooks&&oldHooks[_DYN_LENGTH]>_maxHooks&&(_hookAddMonitor?_hookAddMonitor("doUnload",oldHooks):DiagnosticLogger_throwInternal(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))},add:function _addHook(hooks){hooks&&(Object(ts_utils.a)(_hooks,hooks),_maxHooks&&_hooks[_DYN_LENGTH]>_maxHooks&&(_hookAddMonitor?_hookAddMonitor("Add",_hooks):DiagnosticLogger_throwInternal(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}}}var BaseTelemetryPlugin_defaultValues=((BaseTelemetryPlugin_a={})[STR_EXTENSION_CONFIG]={isVal:isNotNullOrUndefined,v:{}},BaseTelemetryPlugin_a),BaseTelemetryPlugin_BaseTelemetryPlugin=function(){function BaseTelemetryPlugin(){var _isinitialized,_rootCtx,_nextPlugin,_unloadHandlerContainer,_hookContainer,_self=this;function _getTelCtx(currentCtx){void 0===currentCtx&&(currentCtx=null);var itemCtx=currentCtx;if(!itemCtx){var rootCtx=_rootCtx||createProcessTelemetryContext(null,{},_self[STR_CORE]);itemCtx=_nextPlugin&&_nextPlugin.getPlugin?rootCtx[_DYN_CREATE_NEW](null,_nextPlugin.getPlugin):rootCtx[_DYN_CREATE_NEW](null,_nextPlugin)}return itemCtx}function _setDefaults(config,core,pluginChain){createDynamicConfig(config,BaseTelemetryPlugin_defaultValues,safeGetLogger(core)),!pluginChain&&core&&(pluginChain=core.getProcessTelContext()[_DYN_GET_NEXT]());var nextPlugin=_nextPlugin;_nextPlugin&&_nextPlugin.getPlugin&&(nextPlugin=_nextPlugin.getPlugin()),_self[STR_CORE]=core,_rootCtx=createProcessTelemetryContext(pluginChain,config,core,nextPlugin)}function _initDefaults(){_isinitialized=!1,_self[STR_CORE]=null,_rootCtx=null,_nextPlugin=null,_hookContainer=createUnloadHookContainer(),_unloadHandlerContainer=createUnloadHandlerContainer()}_initDefaults(),dynamicProto(BaseTelemetryPlugin,_self,(function(_self){_self[_DYN_INITIALIZE]=function(config,core,extensions,pluginChain){_setDefaults(config,core,pluginChain),_isinitialized=!0},_self[_DYN_TEARDOWN]=function(unloadCtx,unloadState){var core=_self[STR_CORE];if(core&&(!unloadCtx||core===unloadCtx[STR_CORE]())){var result,unloadDone=!1,theUnloadCtx=unloadCtx||createProcessTelemetryUnloadContext(null,core,_nextPlugin&&_nextPlugin.getPlugin?_nextPlugin.getPlugin():_nextPlugin),theUnloadState=unloadState||{reason:0,isAsync:!1};return _self[_DYN__DO_TEARDOWN]&&!0===_self[_DYN__DO_TEARDOWN](theUnloadCtx,theUnloadState,_unloadCallback)?result=!0:_unloadCallback(),result}function _unloadCallback(){unloadDone||(unloadDone=!0,_unloadHandlerContainer.run(theUnloadCtx,unloadState),_hookContainer.run(theUnloadCtx[_DYN_DIAG_LOG]()),!0===result&&theUnloadCtx[_DYN_PROCESS_NEXT](theUnloadState),_initDefaults())}},_self[_DYN_UPDATE]=function(updateCtx,updateState){var core=_self[STR_CORE];if(core&&(!updateCtx||core===updateCtx[STR_CORE]())){var result,updateDone=!1,theUpdateCtx=updateCtx||createProcessTelemetryUpdateContext(null,core,_nextPlugin&&_nextPlugin.getPlugin?_nextPlugin.getPlugin():_nextPlugin),theUpdateState=updateState||{reason:0};return _self._doUpdate&&!0===_self._doUpdate(theUpdateCtx,theUpdateState,_updateCallback)?result=!0:_updateCallback(),result}function _updateCallback(){updateDone||(updateDone=!0,_setDefaults(theUpdateCtx.getCfg(),theUpdateCtx.core(),theUpdateCtx[_DYN_GET_NEXT]()))}},proxyFunctionAs(_self,"_addUnloadCb",(function(){return _unloadHandlerContainer}),"add"),proxyFunctionAs(_self,"_addHook",(function(){return _hookContainer}),"add"),Object(ts_utils.eb)(_self,"_unloadHooks",{g:function g(){return _hookContainer}})})),_self[_DYN_DIAG_LOG]=function(itemCtx){return _getTelCtx(itemCtx)[_DYN_DIAG_LOG]()},_self[_DYN_IS_INITIALIZED]=function(){return _isinitialized},_self.setInitialized=function(isInitialized){_isinitialized=isInitialized},_self[_DYN_SET_NEXT_PLUGIN]=function(next){_nextPlugin=next},_self[_DYN_PROCESS_NEXT]=function(env,itemCtx){itemCtx?itemCtx[_DYN_PROCESS_NEXT](env):_nextPlugin&&Object(ts_utils.I)(_nextPlugin[STR_PROCESS_TELEMETRY])&&_nextPlugin[STR_PROCESS_TELEMETRY](env,null)},_self._getTelCtx=_getTelCtx}return BaseTelemetryPlugin.__ieDyn=1,BaseTelemetryPlugin}(),_DynamicConstants_DYN_TO_STRING="toString",_DYN_IS_STORAGE_USE_DISAB0="isStorageUseDisabled",dist_es5_DynamicConstants_DYN_LENGTH="length",_DYN_GET_ENTRIES_BY_TYPE="getEntriesByType",_DYN_NAVIGATION_START="navigationStart",_DYN_RESPONSE_START="responseStart",_DYN_REQUEST_START="requestStart",_DYN_LOAD_EVENT_END="loadEventEnd",_DYN_RESPONSE_END="responseEnd",_DYN_CONNECT_END="connectEnd",PageViewManager_PageViewManager=function(){function PageViewManager(appInsights,overridePageViewDuration,core,pageViewPerformanceManager){dynamicProto(PageViewManager,this,(function(_self){var _logger,queueTimer=null,itemQueue=[],pageViewPerformanceSent=!1,firstPageViewSent=!1;function _flushChannels(isAsync){core&&core.flush(isAsync,(function(){}))}function _startTimer(){queueTimer||(queueTimer=Object(ts_utils.rb)((function(){queueTimer=null;var allItems=itemQueue.slice(0),doFlush=!1;itemQueue=[],Object(ts_utils.b)(allItems,(function(item){item()?doFlush=!0:itemQueue.push(item)})),itemQueue[dist_es5_DynamicConstants_DYN_LENGTH]>0&&_startTimer(),doFlush&&_flushChannels(!0)}),100))}function _addQueue(cb){itemQueue.push(cb),_startTimer()}core&&(_logger=core.logger),_self.trackPageView=function(pageView,customProperties){var name=pageView.name;if(Object(ts_utils.M)(name)||"string"!=typeof name){var doc=Object(ts_utils.p)();name=pageView.name=doc&&doc.title||""}var uri=pageView.uri;if(Object(ts_utils.M)(uri)||"string"!=typeof uri){var location_1=getLocation();uri=pageView.uri=location_1&&location_1.href||""}if(!firstPageViewSent){var perf=Object(ts_utils.x)(),navigationEntries=perf&&perf[_DYN_GET_ENTRIES_BY_TYPE]&&perf[_DYN_GET_ENTRIES_BY_TYPE]("navigation");if(navigationEntries&&navigationEntries[0]&&!Object(ts_utils.T)(perf.timeOrigin)){var loadEventStart=navigationEntries[0].loadEventStart;pageView.startTime=new Date(perf.timeOrigin+loadEventStart)}else{var duration_1=(customProperties||pageView.properties||{}).duration||0;pageView.startTime=new Date((new Date).getTime()-duration_1)}firstPageViewSent=!0}if(!pageViewPerformanceManager.isPerformanceTimingSupported())return appInsights.sendPageViewInternal(pageView,customProperties),_flushChannels(!0),void(Object(ts_utils.U)()||DiagnosticLogger_throwInternal(_logger,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."));var customDuration,duration,pageViewSent=!1,start=pageViewPerformanceManager.getPerformanceTiming()[_DYN_NAVIGATION_START];start>0&&(customDuration=dateTimeUtilsDuration(start,+new Date),pageViewPerformanceManager.shouldCollectDuration(customDuration)||(customDuration=void 0)),Object(ts_utils.M)(customProperties)||Object(ts_utils.M)(customProperties.duration)||(duration=customProperties.duration),!overridePageViewDuration&&isNaN(duration)||(isNaN(duration)&&(customProperties||(customProperties={}),customProperties.duration=customDuration),appInsights.sendPageViewInternal(pageView,customProperties),_flushChannels(!0),pageViewSent=!0);customProperties||(customProperties={}),_addQueue((function(){var processed=!1;try{if(pageViewPerformanceManager.isPerformanceTimingDataReady()){processed=!0;var pageViewPerformance={name:name,uri:uri};pageViewPerformanceManager.populatePageViewPerformanceEvent(pageViewPerformance),pageViewPerformance.isValid||pageViewSent?(pageViewSent||(customProperties.duration=pageViewPerformance.durationMs,appInsights.sendPageViewInternal(pageView,customProperties)),pageViewPerformanceSent||(appInsights.sendPageViewPerformanceInternal(pageViewPerformance,customProperties),pageViewPerformanceSent=!0)):(customProperties.duration=customDuration,appInsights.sendPageViewInternal(pageView,customProperties))}else start>0&&dateTimeUtilsDuration(start,+new Date)>6e4&&(processed=!0,pageViewSent||(customProperties.duration=6e4,appInsights.sendPageViewInternal(pageView,customProperties)))}catch(e){DiagnosticLogger_throwInternal(_logger,1,38,"trackPageView failed on page load calculation: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return processed}))},_self.teardown=function(unloadCtx,unloadState){if(queueTimer){queueTimer.cancel(),queueTimer=null;var allItems=itemQueue.slice(0);itemQueue=[],Object(ts_utils.b)(allItems,(function(item){item()&&!0}))}}}))}return PageViewManager.__ieDyn=1,PageViewManager}(),MAX_DURATION_ALLOWED=36e5,botAgentNames=["googlebot","adsbot-google","apis-google","mediapartners-google"];function _isPerformanceTimingSupported(){var perf=Object(ts_utils.x)();return perf&&!!perf.timing}function _isPerformanceTimingDataReady(){var perf=Object(ts_utils.x)(),timing=perf?perf.timing:0;return timing&&timing.domainLookupStart>0&&timing[_DYN_NAVIGATION_START]>0&&timing[_DYN_RESPONSE_START]>0&&timing[_DYN_REQUEST_START]>0&&timing[_DYN_LOAD_EVENT_END]>0&&timing[_DYN_RESPONSE_END]>0&&timing[_DYN_CONNECT_END]>0&&timing.domLoading>0}function _getPerformanceTiming(){return _isPerformanceTimingSupported()?Object(ts_utils.x)().timing:null}function _getPerformanceNavigationTiming(){return function _isPerformanceNavigationTimingSupported(){var perf=Object(ts_utils.x)();return perf&&perf.getEntriesByType&&perf.getEntriesByType("navigation")[dist_es5_DynamicConstants_DYN_LENGTH]>0}()?Object(ts_utils.x)()[_DYN_GET_ENTRIES_BY_TYPE]("navigation")[0]:null}function _shouldCollectDuration(){for(var durations=[],_i=0;_i<arguments.length;_i++)durations[_i]=arguments[_i];var userAgent=(Object(ts_utils.w)()||{}).userAgent,isGoogleBot=!1;if(userAgent)for(var i=0;i<botAgentNames[dist_es5_DynamicConstants_DYN_LENGTH];i++)isGoogleBot=isGoogleBot||-1!==Object(ts_utils.ub)(userAgent.toLowerCase(),botAgentNames[i]);if(isGoogleBot)return!1;for(i=0;i<durations[dist_es5_DynamicConstants_DYN_LENGTH];i++)if(durations[i]<0||durations[i]>=MAX_DURATION_ALLOWED)return!1;return!0}var AnalyticsPlugin_a,PageViewPerformanceManager_PageViewPerformanceManager=function(){function PageViewPerformanceManager(core){var _logger=safeGetLogger(core);dynamicProto(PageViewPerformanceManager,this,(function(_self){_self.populatePageViewPerformanceEvent=function(pageViewPerformance){pageViewPerformance.isValid=!1;var navigationTiming=_getPerformanceNavigationTiming(),timing=_getPerformanceTiming(),total=0,network=0,request=0,response=0,dom=0;(navigationTiming||timing)&&(navigationTiming?(total=navigationTiming.duration,network=0===navigationTiming.startTime?navigationTiming[_DYN_CONNECT_END]:dateTimeUtilsDuration(navigationTiming.startTime,navigationTiming[_DYN_CONNECT_END]),request=dateTimeUtilsDuration(navigationTiming.requestStart,navigationTiming[_DYN_RESPONSE_START]),response=dateTimeUtilsDuration(navigationTiming[_DYN_RESPONSE_START],navigationTiming[_DYN_RESPONSE_END]),dom=dateTimeUtilsDuration(navigationTiming.responseEnd,navigationTiming[_DYN_LOAD_EVENT_END])):(total=dateTimeUtilsDuration(timing[_DYN_NAVIGATION_START],timing[_DYN_LOAD_EVENT_END]),network=dateTimeUtilsDuration(timing[_DYN_NAVIGATION_START],timing[_DYN_CONNECT_END]),request=dateTimeUtilsDuration(timing.requestStart,timing[_DYN_RESPONSE_START]),response=dateTimeUtilsDuration(timing[_DYN_RESPONSE_START],timing[_DYN_RESPONSE_END]),dom=dateTimeUtilsDuration(timing.responseEnd,timing[_DYN_LOAD_EVENT_END])),0===total?DiagnosticLogger_throwInternal(_logger,2,10,"error calculating page view performance.",{total:total,network:network,request:request,response:response,dom:dom}):_self.shouldCollectDuration(total,network,request,response,dom)?total<Object(ts_utils.W)(network)+Object(ts_utils.W)(request)+Object(ts_utils.W)(response)+Object(ts_utils.W)(dom)?DiagnosticLogger_throwInternal(_logger,2,8,"client performance math error.",{total:total,network:network,request:request,response:response,dom:dom}):(pageViewPerformance.durationMs=total,pageViewPerformance.perfTotal=pageViewPerformance.duration=msToTimeSpan(total),pageViewPerformance.networkConnect=msToTimeSpan(network),pageViewPerformance.sentRequest=msToTimeSpan(request),pageViewPerformance.receivedResponse=msToTimeSpan(response),pageViewPerformance.domProcessing=msToTimeSpan(dom),pageViewPerformance.isValid=!0):DiagnosticLogger_throwInternal(_logger,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:total,network:network,request:request,response:response,dom:dom}))},_self.getPerformanceTiming=_getPerformanceTiming,_self.isPerformanceTimingSupported=_isPerformanceTimingSupported,_self.isPerformanceTimingDataReady=_isPerformanceTimingDataReady,_self.shouldCollectDuration=_shouldCollectDuration}))}return PageViewPerformanceManager.__ieDyn=1,PageViewPerformanceManager}(),PageVisitTimeManager_PageVisitTimeManager=function(){function PageVisitTimeManager(logger,pageVisitTimeTrackingHandler){dynamicProto(PageVisitTimeManager,this,(function(_self){_self.trackPreviousPageVisit=function(currentPageName,currentPageUrl){try{var prevPageVisitTimeData=function restartPageVisitTimer(pageName,pageUrl){var prevPageVisitData=null;try{if(prevPageVisitData=function stopPageVisitTimer(){var prevPageVisitData=null;try{if(utlCanUseSessionStorage()){var pageVisitEndTime=Object(ts_utils.Eb)(),pageVisitDataJsonStr=utlGetSessionStorage(logger,"prevPageVisitData");pageVisitDataJsonStr&&hasJSON()&&((prevPageVisitData=getJSON().parse(pageVisitDataJsonStr)).pageVisitTime=pageVisitEndTime-prevPageVisitData.pageVisitStartTime,utlRemoveSessionStorage(logger,"prevPageVisitData"))}}catch(e){_warnToConsole(logger,"Stop page visit timer failed: "+Object(ts_utils.n)(e)),prevPageVisitData=null}return prevPageVisitData}(),utlCanUseSessionStorage()){null!=utlGetSessionStorage(logger,"prevPageVisitData")&&Object(ts_utils.Bb)("Cannot call startPageVisit consecutively without first calling stopPageVisit");var currPageVisitDataStr=getJSON().stringify(new PageVisitTimeManager_PageVisitData(pageName,pageUrl));utlSetSessionStorage(logger,"prevPageVisitData",currPageVisitDataStr)}}catch(e){_warnToConsole(logger,"Call to restart failed: "+Object(ts_utils.n)(e)),prevPageVisitData=null}return prevPageVisitData}(currentPageName,currentPageUrl);prevPageVisitTimeData&&pageVisitTimeTrackingHandler(prevPageVisitTimeData.pageName,prevPageVisitTimeData.pageUrl,prevPageVisitTimeData.pageVisitTime)}catch(e){_warnToConsole(logger,"Auto track page visit time failed, metric will not be collected: "+Object(ts_utils.n)(e))}},Object(ts_utils.eb)(_self,"_logger",{g:function g(){return logger}}),Object(ts_utils.eb)(_self,"pageVisitTimeTrackingHandler",{g:function g(){return pageVisitTimeTrackingHandler}})}))}return PageVisitTimeManager.__ieDyn=1,PageVisitTimeManager}(),PageVisitTimeManager_PageVisitData=function PageVisitData(pageName,pageUrl){this.pageVisitStartTime=Object(ts_utils.Eb)(),this.pageName=pageName,this.pageUrl=pageUrl},Timing_Timing=function Timing(logger,name){var _self=this,_events={};_self.start=function(name){void 0!==_events[name]&&DiagnosticLogger_throwInternal(logger,2,62,"start was called more than once for this event without calling stop.",{name:name,key:name},!0),_events[name]=+new Date},_self.stop=function(name,url,properties,measurements){var start=_events[name];if(isNaN(start))DiagnosticLogger_throwInternal(logger,2,63,"stop was called without a corresponding start.",{name:name,key:name},!0);else{var duration=dateTimeUtilsDuration(start,+new Date);_self.action(name,url,duration,properties,measurements)}delete _events[name],_events[name]=void 0}};function AnalyticsPlugin_typeof(obj){return AnalyticsPlugin_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AnalyticsPlugin_typeof(obj)}function _dispatchEvent(target,evnt){target&&target.dispatchEvent&&evnt&&target.dispatchEvent(evnt)}var MinMilliSeconds=6e4,AnalyticsPlugin_defaultValues=Object(ts_utils.db)(((AnalyticsPlugin_a={sessionRenewalMs:cfgDfSet(_chkConfigMilliseconds,18e5),sessionExpirationMs:cfgDfSet(_chkConfigMilliseconds,864e5),disableExceptionTracking:cfgDfBoolean()}).autoTrackPageVisitTime=cfgDfBoolean(),AnalyticsPlugin_a.overridePageViewDuration=cfgDfBoolean(),AnalyticsPlugin_a.enableUnhandledPromiseRejectionTracking=cfgDfBoolean(),AnalyticsPlugin_a.autoUnhandledPromiseInstrumented=!1,AnalyticsPlugin_a.samplingPercentage=cfgDfValidate((function _chkSampling(value){return!isNaN(value)&&value>0&&value<=100}),100),AnalyticsPlugin_a[_DYN_IS_STORAGE_USE_DISAB0]=cfgDfBoolean(),AnalyticsPlugin_a.isBrowserLinkTrackingEnabled=cfgDfBoolean(),AnalyticsPlugin_a.enableAutoRouteTracking=cfgDfBoolean(),AnalyticsPlugin_a.namePrefix=function cfgDfString(defaultValue){return{isVal:ts_utils.R,v:Object(ts_utils.g)(defaultValue||STR_EMPTY)}}(),AnalyticsPlugin_a.enableDebug=cfgDfBoolean(),AnalyticsPlugin_a.disableFlushOnBeforeUnload=cfgDfBoolean(),AnalyticsPlugin_a.disableFlushOnUnload=cfgDfBoolean(!1,"disableFlushOnBeforeUnload"),AnalyticsPlugin_a.expCfg=cfgDfMerge({inclScripts:!1,expLog:void 0,maxLogs:50}),AnalyticsPlugin_a));function _chkConfigMilliseconds(value,defValue){return(value=value||defValue)<MinMilliSeconds&&(value=MinMilliSeconds),+value}function _updateStorageUsage(extConfig){Object(ts_utils.T)(extConfig[_DYN_IS_STORAGE_USE_DISAB0])||(extConfig[_DYN_IS_STORAGE_USE_DISAB0]?function utlDisableStorage(){StorageHelperFuncs_canUseLocalStorage=!1,_canUseSessionStorage=!1}():function utlEnableStorage(){StorageHelperFuncs_canUseLocalStorage=utlCanUseLocalStorage(!0),_canUseSessionStorage=utlCanUseSessionStorage(!0)}())}var AnalyticsPlugin_AnalyticsPlugin=function(_super){function AnalyticsPlugin(){var _eventTracking,_pageTracking,_pageViewManager,_pageViewPerformanceManager,_pageVisitTimeManager,_preInitTelemetryInitializers,_isBrowserLinkTrackingEnabled,_browserLinkInitializerAdded,_enableAutoRouteTracking,_historyListenerAdded,_disableExceptionTracking,_autoExceptionInstrumented,_enableUnhandledPromiseRejectionTracking,_autoUnhandledPromiseInstrumented,_extConfig,_autoTrackPageVisitTime,_expCfg,_this=_super.call(this)||this;_this.identifier="ApplicationInsightsAnalytics",_this.priority=180,_this.autoRoutePVDelay=500;var _prevUri,_currUri,_evtNamespace,_errorHookCnt;return dynamicProto(AnalyticsPlugin,_this,(function(_self,_base){var _addHook=_base._addHook;function _throwInternal(severity,msgId,msg,properties,isUserAct){_self.diagLog().throwInternal(severity,msgId,msg,properties,isUserAct)}function _initDefaults(){_eventTracking=null,_pageTracking=null,_pageViewManager=null,_pageViewPerformanceManager=null,_pageVisitTimeManager=null,_preInitTelemetryInitializers=null,_isBrowserLinkTrackingEnabled=!1,_browserLinkInitializerAdded=!1,_enableAutoRouteTracking=!1,_historyListenerAdded=!1,_disableExceptionTracking=!1,_autoExceptionInstrumented=!1,_enableUnhandledPromiseRejectionTracking=!1,_autoUnhandledPromiseInstrumented=!1,_autoTrackPageVisitTime=!1,0;var location=getLocation(!0);_prevUri=location&&location.href||"",_currUri=null,_evtNamespace=null,_extConfig=null,_errorHookCnt=0,Object(ts_utils.eb)(_self,"config",{g:function g(){return _extConfig}})}_initDefaults(),_self.getCookieMgr=function(){return safeGetCookieMgr(_self.core)},_self.processTelemetry=function(env,itemCtx){_self.processNext(env,itemCtx)},_self.trackEvent=function(event,customProperties){try{var telemetryItem=createTelemetryItem(event,Event_Event.dataType,Event_Event.envelopeType,_self.diagLog(),customProperties);_self.core.track(telemetryItem)}catch(e){_throwInternal(2,39,"trackTrace failed, trace will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.startTrackEvent=function(name){try{_eventTracking.start(name)}catch(e){_throwInternal(1,29,"startTrackEvent failed, event will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.stopTrackEvent=function(name,properties,measurements){try{_eventTracking.stop(name,void 0,properties,measurements)}catch(e){_throwInternal(1,30,"stopTrackEvent failed, event will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.trackTrace=function(trace,customProperties){try{var telemetryItem=createTelemetryItem(trace,Trace_Trace.dataType,Trace_Trace.envelopeType,_self.diagLog(),customProperties);_self.core.track(telemetryItem)}catch(e){_throwInternal(2,39,"trackTrace failed, trace will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.trackMetric=function(metric,customProperties){try{var telemetryItem=createTelemetryItem(metric,Metric_Metric.dataType,Metric_Metric.envelopeType,_self.diagLog(),customProperties);_self.core.track(telemetryItem)}catch(e){_throwInternal(1,36,"trackMetric failed, metric will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.trackPageView=function(pageView,customProperties){try{var inPv=pageView||{};_pageViewManager.trackPageView(inPv,Object(TsLibShims.a)(Object(TsLibShims.a)(Object(TsLibShims.a)({},inPv.properties),inPv.measurements),customProperties)),_autoTrackPageVisitTime&&_pageVisitTimeManager.trackPreviousPageVisit(inPv.name,inPv.uri)}catch(e){_throwInternal(1,37,"trackPageView failed, page view will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.sendPageViewInternal=function(pageView,properties,systemProperties){var doc=Object(ts_utils.p)();if(doc&&(pageView.refUri=void 0===pageView.refUri?doc.referrer:pageView.refUri),Object(ts_utils.M)(pageView.startTime)){var duration=(properties||pageView.properties||{}).duration||0;pageView.startTime=new Date((new Date).getTime()-duration)}var telemetryItem=createTelemetryItem(pageView,PageView_PageView.dataType,PageView_PageView.envelopeType,_self.diagLog(),properties,systemProperties);_self.core.track(telemetryItem),0},_self.sendPageViewPerformanceInternal=function(pageViewPerformance,properties,systemProperties){var telemetryItem=createTelemetryItem(pageViewPerformance,PageViewPerformance_PageViewPerformance.dataType,PageViewPerformance_PageViewPerformance.envelopeType,_self.diagLog(),properties,systemProperties);_self.core.track(telemetryItem)},_self.trackPageViewPerformance=function(pageViewPerformance,customProperties){var inPvp=pageViewPerformance||{};try{_pageViewPerformanceManager.populatePageViewPerformanceEvent(inPvp),_self.sendPageViewPerformanceInternal(inPvp,customProperties)}catch(e){_throwInternal(1,37,"trackPageViewPerformance failed, page view will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.startTrackPage=function(name){try{if("string"!=typeof name){var doc=Object(ts_utils.p)();name=doc&&doc.title||""}_pageTracking.start(name)}catch(e){_throwInternal(1,31,"startTrackPage failed, page view may not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.stopTrackPage=function(name,url,properties,measurement){try{if("string"!=typeof name){var doc=Object(ts_utils.p)();name=doc&&doc.title||""}if("string"!=typeof url){var loc=getLocation();url=loc&&loc.href||""}_pageTracking.stop(name,url,properties,measurement),_autoTrackPageVisitTime&&_pageVisitTimeManager.trackPreviousPageVisit(name,url)}catch(e){_throwInternal(1,32,"stopTrackPage failed, page view will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self.sendExceptionInternal=function(exception,customProperties,systemProperties){var theError=exception&&(exception.exception||exception.error)||Object(ts_utils.H)(exception)&&exception||{name:exception&&AnalyticsPlugin_typeof(exception),message:exception||strNotSpecified};exception=exception||{};var exceptionPartB=new Exception_Exception(_self.diagLog(),theError,exception.properties||customProperties,exception.measurements,exception.severityLevel,exception.id).toInterface(),doc=Object(ts_utils.p)();if(doc&&(null==_expCfg?void 0:_expCfg.inclScripts)){var scriptsInfo=function findAllScripts(doc){var scripts=doc.getElementsByTagName("script"),result=[];return Object(ts_utils.b)(scripts,(function(script){var src=script[_DYN_GET_ATTRIBUTE]("src");if(src){var crossOrigin=script[_DYN_GET_ATTRIBUTE]("crossorigin"),async=!0===script.hasAttribute("async"),defer=!0===script.hasAttribute("defer"),referrerPolicy=script[_DYN_GET_ATTRIBUTE]("referrerpolicy"),info={url:src};crossOrigin&&(info.crossOrigin=crossOrigin),async&&(info.async=async),defer&&(info.defer=defer),referrerPolicy&&(info.referrerPolicy=referrerPolicy),result[_DYN_PUSH](info)}})),result}(doc);exceptionPartB.properties.exceptionScripts=JSON.stringify(scriptsInfo)}if(null==_expCfg?void 0:_expCfg.expLog){var logs=_expCfg.expLog();logs&&logs.logs&&Object(ts_utils.E)(logs.logs)&&(exceptionPartB.properties.exceptionLog=logs.logs.slice(0,_expCfg.maxLogs).join("\n"))}var telemetryItem=createTelemetryItem(exceptionPartB,Exception_Exception.dataType,Exception_Exception.envelopeType,_self.diagLog(),customProperties,systemProperties);_self.core.track(telemetryItem)},_self.trackException=function(exception,customProperties){exception&&!exception.exception&&exception.error&&(exception.exception=exception.error);try{_self.sendExceptionInternal(exception,customProperties)}catch(e){_throwInternal(1,35,"trackException failed, exception will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}},_self._onerror=function(exception){var error=exception&&exception.error,evt=exception&&exception.evt;try{if(!evt){var _window=Object(ts_utils.y)();_window&&(evt=_window.event)}var url=exception&&exception.url||(Object(ts_utils.p)()||{}).URL,errorSrc=exception.errorSrc||"window.onerror@"+url+":"+(exception.lineNumber||0)+":"+(exception.columnNumber||0),properties={errorSrc:errorSrc,url:url,lineNumber:exception.lineNumber||0,columnNumber:exception.columnNumber||0,message:exception.message};!function isCrossOriginError(message,url,lineNumber,columnNumber,error){return!error&&Object(ts_utils.R)(message)&&("Script error."===message||"Script error"===message)}(exception.message,exception.url,exception.lineNumber,exception.columnNumber,exception.error)?(exception.errorSrc||(exception.errorSrc=errorSrc),_self.trackException({exception:exception,severityLevel:3},properties)):function _sendCORSException(exception,properties){var telemetryItem=createTelemetryItem(exception,Exception_Exception.dataType,Exception_Exception.envelopeType,_self.diagLog(),properties);_self.core.track(telemetryItem)}(Exception_Exception.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url,exception.lineNumber||0,exception.columnNumber||0,error,evt,null,errorSrc),properties)}catch(e){var errorString=error?error.name+", "+error.message:"null";_throwInternal(1,11,"_onError threw exception while logging error, error will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e),errorString:errorString})}},_self.addTelemetryInitializer=function(telemetryInitializer){if(_self.core)return _self.core.addTelemetryInitializer(telemetryInitializer);_preInitTelemetryInitializers||(_preInitTelemetryInitializers=[]),_preInitTelemetryInitializers.push(telemetryInitializer)},_self.initialize=function(config,core,extensions,pluginChain){if(!_self.isInitialized()){Object(ts_utils.M)(core)&&Object(ts_utils.Bb)("Error initializing"),_base.initialize(config,core,extensions,pluginChain);try{_evtNamespace=mergeEvtNamespace(createUniqueNamespace(_self.identifier),core.evtNamespace&&core.evtNamespace()),_preInitTelemetryInitializers&&(Object(ts_utils.b)(_preInitTelemetryInitializers,(function(initializer){core.addTelemetryInitializer(initializer)})),_preInitTelemetryInitializers=null),function _populateDefaults(config){var identifier=_self.identifier,core=_self.core;_self._addHook(onConfigChange(config,(function(){var ctx=createProcessTelemetryContext(null,config,core);_extConfig=ctx.getExtCfg(identifier,AnalyticsPlugin_defaultValues),_autoExceptionInstrumented=_autoExceptionInstrumented||config.autoExceptionInstrumented||_extConfig.autoExceptionInstrumented,_expCfg=_extConfig.expCfg,_autoTrackPageVisitTime=_extConfig.autoTrackPageVisitTime,config.storagePrefix&&utlSetStoragePrefix(config.storagePrefix),_updateStorageUsage(_extConfig),_isBrowserLinkTrackingEnabled=_extConfig.isBrowserLinkTrackingEnabled,function _addDefaultTelemetryInitializers(){if(!_browserLinkInitializerAdded&&_isBrowserLinkTrackingEnabled){var browserLinkPaths_1=["/browserLinkSignalR/","/__browserLink/"],dropBrowserLinkRequests=function dropBrowserLinkRequests(envelope){if(_isBrowserLinkTrackingEnabled&&envelope.baseType===RemoteDependencyData_RemoteDependencyData.dataType){var remoteData=envelope.baseData;if(remoteData)for(var i=0;i<browserLinkPaths_1[dist_es5_DynamicConstants_DYN_LENGTH];i++)if(remoteData.target&&Object(ts_utils.ub)(remoteData.target,browserLinkPaths_1[i])>=0)return!1}return!0};_self._addHook(_self.addTelemetryInitializer(dropBrowserLinkRequests)),_browserLinkInitializerAdded=!0}}()})))}(config),_pageViewPerformanceManager=new PageViewPerformanceManager_PageViewPerformanceManager(_self.core),_pageViewManager=new PageViewManager_PageViewManager(_self,_extConfig.overridePageViewDuration,_self.core,_pageViewPerformanceManager),_pageVisitTimeManager=new PageVisitTimeManager_PageVisitTimeManager(_self.diagLog(),(function(pageName,pageUrl,pageVisitTime){return function trackPageVisitTime(pageName,pageUrl,pageVisitTime){var properties={PageName:pageName,PageUrl:pageUrl};_self.trackMetric({name:"PageVisitTime",average:pageVisitTime,max:pageVisitTime,min:pageVisitTime,sampleCount:1},properties)}(pageName,pageUrl,pageVisitTime)})),(_eventTracking=new Timing_Timing(_self.diagLog(),"trackEvent")).action=function(name,url,duration,properties,measurements){properties||(properties={}),measurements||(measurements={}),properties.duration=duration[_DynamicConstants_DYN_TO_STRING](),_self.trackEvent({name:name,properties:properties,measurements:measurements})},(_pageTracking=new Timing_Timing(_self.diagLog(),"trackPageView")).action=function(name,url,duration,properties,measurements){Object(ts_utils.M)(properties)&&(properties={}),properties.duration=duration[_DynamicConstants_DYN_TO_STRING]();var pageViewItem={name:name,uri:url,properties:properties,measurements:measurements};_self.sendPageViewInternal(pageViewItem,properties)},Object(ts_utils.D)()&&(!function _updateExceptionTracking(){var _window=Object(ts_utils.y)(),locn=getLocation(!0);_self._addHook(onConfigChange(_extConfig,(function(){(_disableExceptionTracking=_extConfig.disableExceptionTracking)||_autoExceptionInstrumented||_extConfig.autoExceptionInstrumented||(_addHook(InstrumentEvent(_window,"onerror",{ns:_evtNamespace,rsp:function rsp(callDetails,message,url,lineNumber,columnNumber,error){_disableExceptionTracking||!0===callDetails.rslt||_self._onerror(Exception_Exception.CreateAutoException(message,url,lineNumber,columnNumber,error,callDetails.evt))}},!1)),_errorHookCnt++,_autoExceptionInstrumented=!0)}))),function _addUnhandledPromiseRejectionTracking(_window,_location){_self._addHook(onConfigChange(_extConfig,(function(){_enableUnhandledPromiseRejectionTracking=!0===_extConfig.enableUnhandledPromiseRejectionTracking,_autoExceptionInstrumented=_autoExceptionInstrumented||_extConfig.autoUnhandledPromiseInstrumented,_enableUnhandledPromiseRejectionTracking&&!_autoUnhandledPromiseInstrumented&&(_addHook(InstrumentEvent(_window,"onunhandledrejection",{ns:_evtNamespace,rsp:function rsp(callDetails,error){_enableUnhandledPromiseRejectionTracking&&!0!==callDetails.rslt&&_self._onerror(Exception_Exception.CreateAutoException(function _getReason(error){if(error&&error.reason){var reason=error.reason;return!Object(ts_utils.R)(reason)&&Object(ts_utils.I)(reason[_DynamicConstants_DYN_TO_STRING])?reason[_DynamicConstants_DYN_TO_STRING]():Object(ts_utils.n)(reason)}return error||""}(error),_location?_location.href:"",0,0,error,callDetails.evt))}},!1)),_errorHookCnt++,_extConfig.autoUnhandledPromiseInstrumented=_autoUnhandledPromiseInstrumented=!0)})))}(_window,locn)}(),function _updateLocationChange(){var win=Object(ts_utils.y)(),locn=getLocation(!0);_self._addHook(onConfigChange(_extConfig,(function(){if(_enableAutoRouteTracking=!0===_extConfig.enableAutoRouteTracking,win&&_enableAutoRouteTracking&&!_historyListenerAdded&&Object(ts_utils.A)()){var _history=Object(ts_utils.r)();Object(ts_utils.I)(_history.pushState)&&Object(ts_utils.I)(_history.replaceState)&&("undefined"==typeof Event?"undefined":AnalyticsPlugin_typeof(Event))!==Constants.g&&function _addHistoryListener(win,history,locn){if(_historyListenerAdded)return;var namePrefix=_extConfig.namePrefix||"";function _popstateHandler(){_enableAutoRouteTracking&&_dispatchEvent(win,createDomEvent(namePrefix+"locationchange"))}function _locationChangeHandler(){if(_currUri?(_prevUri=_currUri,_currUri=locn&&locn.href||""):_currUri=locn&&locn.href||"",_enableAutoRouteTracking){var distributedTraceCtx=function _getDistributedTraceCtx(){var distributedTraceCtx=null;_self.core&&_self.core.getTraceCtx&&(distributedTraceCtx=_self.core.getTraceCtx(!1));if(!distributedTraceCtx){var properties=_self.core.getPlugin("AppInsightsPropertiesPlugin");if(properties){var context=properties.plugin.context;context&&(distributedTraceCtx=createDistributedTraceContextFromTrace(context.telemetryTrace))}}return distributedTraceCtx}();if(distributedTraceCtx){distributedTraceCtx.setTraceId(generateW3CId());var traceLocationName="_unknown_";locn&&locn.pathname&&(traceLocationName=locn.pathname+(locn.hash||"")),distributedTraceCtx.setName(dataSanitizeString(_self.diagLog(),traceLocationName))}Object(ts_utils.rb)(function(uri){_self.trackPageView({refUri:uri,properties:{duration:0}})}.bind(_self,_prevUri),_self.autoRoutePVDelay)}}_addHook(InstrumentEvent(history,"pushState",{ns:_evtNamespace,rsp:function rsp(){_enableAutoRouteTracking&&(_dispatchEvent(win,createDomEvent(namePrefix+"pushState")),_dispatchEvent(win,createDomEvent(namePrefix+"locationchange")))}},!0)),_addHook(InstrumentEvent(history,"replaceState",{ns:_evtNamespace,rsp:function rsp(){_enableAutoRouteTracking&&(_dispatchEvent(win,createDomEvent(namePrefix+"replaceState")),_dispatchEvent(win,createDomEvent(namePrefix+"locationchange")))}},!0)),eventOn(win,namePrefix+"popstate",_popstateHandler,_evtNamespace),eventOn(win,namePrefix+"locationchange",_locationChangeHandler,_evtNamespace),_historyListenerAdded=!0}(win,_history,locn)}})))}())}catch(e){throw _self.setInitialized(!1),e}}},_self._doTeardown=function(unloadCtx,unloadState){_pageViewManager&&_pageViewManager.teardown(unloadCtx,unloadState),eventOff(window,null,null,_evtNamespace),_initDefaults()},_self._getDbgPlgTargets=function(){return[_errorHookCnt,_autoExceptionInstrumented]},Object(ts_utils.eb)(_self,"_pageViewManager",{g:function g(){return _pageViewManager}}),Object(ts_utils.eb)(_self,"_pageViewPerformanceManager",{g:function g(){return _pageViewPerformanceManager}}),Object(ts_utils.eb)(_self,"_pageVisitTimeManager",{g:function g(){return _pageVisitTimeManager}}),Object(ts_utils.eb)(_self,"_evtNamespace",{g:function g(){return"."+_evtNamespace}})})),_this}return Object(TsLibShims.b)(AnalyticsPlugin,_super),AnalyticsPlugin.Version="3.3.6",AnalyticsPlugin}(BaseTelemetryPlugin_BaseTelemetryPlugin),ts_async=__webpack_require__("./node_modules/@nevware21/ts-async/dist/es5/mod/ts-async.js"),_DYN_FEATURE_OPT_IN="featureOptIn";function replaceByNonOverrideCfg(cfg,nonOverrideConfigs,curLevel,maxLevel){try{var exceedMaxLevel=curLevel>maxLevel;exceedMaxLevel&&(cfg=null);var curCfg_1=0==curLevel?Object(ts_utils.hb)({},cfg):cfg;return curCfg_1&&nonOverrideConfigs&&!exceedMaxLevel&&Object(ts_utils.ib)(curCfg_1,(function(key){var nonOverrideVal=nonOverrideConfigs[key];nonOverrideVal&&(Object(ts_utils.O)(curCfg_1[key])&&Object(ts_utils.O)(nonOverrideVal)?curCfg_1[key]=replaceByNonOverrideCfg(curCfg_1[key],nonOverrideVal,++curLevel,maxLevel):delete curCfg_1[key])})),curCfg_1}catch(e){}return cfg}var CfgSyncPlugin_a,F="featureOptIn.",M=".mode",ON=".onCfg",OFF=".offCfg";function applyCdnfeatureCfg(cdnCfg,core){try{if(!cdnCfg||!cdnCfg.enabled)return null;if(!cdnCfg[_DYN_FEATURE_OPT_IN])return cdnCfg.config;var optInMap=cdnCfg[_DYN_FEATURE_OPT_IN],cdnConfig_1=cdnCfg.config||{};return Object(ts_utils.ib)(optInMap,(function(key){var featureVal=function resolveCdnFeatureCfg(field,cdnCfg,userOptInDetails){var _a;if(!cdnCfg||!cdnCfg.enabled)return null;var cdnFt=(cdnCfg[_DYN_FEATURE_OPT_IN]||{})[field]||{mode:1},cdnM=cdnFt.mode,cdnOnV=cdnFt.onCfg,cdnOffV=cdnFt.offCfg,userFt=(userOptInDetails||{})[field]||{mode:2},userM=userFt.mode,userOnV=userFt.onCfg,userOffV=userFt.offCfg,blockCdn=!!userFt.blockCdnCfg,onFld=F+field+ON,offFld=F+field+OFF,mode=userM,onV=userOnV,offV=userOffV;return blockCdn||(4===cdnM||5===cdnM?(mode=4==cdnM?3:2,onV=cdnOnV||userOnV,offV=cdnOffV||userOffV):2===cdnM||2===userM?(mode=2,onV=userOnV||cdnOnV,offV=userOffV||cdnOffV):3===cdnM?(mode=3,onV=userOnV||cdnOnV,offV=userOffV||cdnOffV):1===cdnM&&1===userM&&(mode=1)),(_a={})[F+field+M]=mode,_a[onFld]=onV,_a[offFld]=offV,_a}(key,cdnCfg,core.config[_DYN_FEATURE_OPT_IN]);Object(ts_utils.M)(featureVal)||(Object(ts_utils.ib)(featureVal,(function(config,val){Object(ts_utils.sb)(cdnConfig_1,config,val)})),function _overrideCdnCfgByFeature(field,ftVal,config){var mode=ftVal[F+field+M],val=ftVal[F+field+ON],dVal=ftVal[F+field+OFF],target=null;3===mode&&(target=val);2===mode&&(target=dVal);target&&Object(ts_utils.ib)(target,(function(key,cfg){Object(ts_utils.sb)(config,key,cfg)}))}(key,featureVal,cdnConfig_1))})),cdnConfig_1}catch(e){}return null}var _defaultConfig=Object(ts_utils.db)(((CfgSyncPlugin_a={syncMode:1,blkCdnCfg:undefined,customEvtName:undefined,cfgUrl:undefined,overrideSyncFn:undefined,overrideFetchFn:undefined,onCfgChangeReceive:undefined}).scheduleFetchTimeout=18e5,CfgSyncPlugin_a.nonOverrideConfigs={instrumentationKey:!0,connectionString:!0,endpointUrl:!0},CfgSyncPlugin_a.enableAjax=!1,CfgSyncPlugin_a)),CfgSyncPlugin_CfgSyncPlugin=function(_super){function CfgSyncPlugin(){var _extensionConfig,_mainConfig,_evtName,_evtNamespace,_cfgUrl,_timeoutHandle,_receiveChanges,_broadcastChanges,_blkCdnCfg,_fetchTimeout,_retryCnt,_onCfgChangeReceive,_nonOverrideConfigs,_fetchFn,_overrideFetchFn,_overrideSyncFn,_this=_super.call(this)||this;_this.priority=198,_this.identifier="AppInsightsCfgSyncPlugin";var _enableAjax,_paused=!1;return dynamicProto(CfgSyncPlugin,_this,(function(_self,_base){function _initDefaults(){_mainConfig=null,_evtName=null,_evtNamespace=null,_cfgUrl=null,_receiveChanges=null,_broadcastChanges=null,_nonOverrideConfigs=null,_timeoutHandle=null,_fetchTimeout=null,_retryCnt=null,_blkCdnCfg=null,_enableAjax=!1,_overrideFetchFn=null,_overrideSyncFn=null,_onCfgChangeReceive=null}function _setCfg(config,isAutoSync){if(config){if(_mainConfig=config,isAutoSync&&!_paused)return _sendCfgsyncEvents();if(_receiveChanges&&!_paused)return _self.core.updateCfg(config),!0}return!1}function _eventOff(){try{var global_1=Object(ts_utils.q)();global_1&&eventOff(global_1,null,null,_evtNamespace)}catch(e){}}function _sendCfgsyncEvents(customDetails){try{return _overrideSyncFn&&Object(ts_utils.I)(_overrideSyncFn)?_overrideSyncFn(_mainConfig,customDetails):sendCustomEvent(_evtName,_mainConfig,customDetails)}catch(e){}return!1}function _updateEventListenerName(name){try{return _eventOff(),name&&(_evtName=name,function _addEventListener(){if(_receiveChanges){var global_2=Object(ts_utils.q)();if(global_2)try{eventOn(global_2,_evtName,(function(event){var cfgEvent=event&&event.detail;if(_onCfgChangeReceive&&cfgEvent)_onCfgChangeReceive(cfgEvent);else{var cfg=cfgEvent&&cfgEvent.cfg,newCfg=cfg&&Object(ts_utils.P)(cfg)&&_replaceTartgetByKeys(cfg);newCfg&&_setCfg(newCfg)}}),_evtNamespace,!0)}catch(e){}}}()),!0}catch(e){}return!1}function _fetchSender(url,oncomplete,isAutoSync){var global=Object(ts_utils.q)(),fetchFn=global&&global.fetch||null;if(url&&fetchFn&&Object(ts_utils.I)(fetchFn))try{var init={method:"GET"};_enableAjax||(init[DisabledPropertyName]=!0);var request=new Request(url,init);if(!_enableAjax)try{request[DisabledPropertyName]=!0}catch(e){}Object(ts_async.e)(fetch(request),(function(result){var response=result.value;result.rejected?_doOnComplete(oncomplete,400):response.ok?Object(ts_async.e)(response.text(),(function(res){_doOnComplete(oncomplete,response.status,res.value,isAutoSync)})):_doOnComplete(oncomplete,response.status,null,isAutoSync)}))}catch(e){}}function _xhrSender(url,oncomplete,isAutoSync){try{var xhr_1=new XMLHttpRequest;_enableAjax||(xhr_1[DisabledPropertyName]=!0),xhr_1.open("GET",url),xhr_1.onreadystatechange=function(){xhr_1.readyState===XMLHttpRequest.DONE&&_doOnComplete(oncomplete,xhr_1.status,xhr_1.responseText,isAutoSync)},xhr_1.onerror=function(){_doOnComplete(oncomplete,400)},xhr_1.ontimeout=function(){_doOnComplete(oncomplete,400)},xhr_1.send()}catch(e){}}function _onFetchComplete(status,response,isAutoSync){try{if(status>=200&&status<400&&response){_retryCnt=0;var JSON_1=getJSON();if(JSON_1){var cfg=applyCdnfeatureCfg(JSON_1.parse(response),_self.core),newCfg=cfg&&Object(ts_utils.P)(cfg)&&_replaceTartgetByKeys(cfg);newCfg&&_setCfg(newCfg,isAutoSync)}}else _retryCnt++;_retryCnt<3&&_setupTimer()}catch(e){}}function _doOnComplete(oncomplete,status,response,isAutoSync){try{oncomplete(status,response,isAutoSync)}catch(e){}}function _replaceTartgetByKeys(cfg,level){var _cfg=null;try{cfg&&(_cfg=replaceByNonOverrideCfg(cfg,_nonOverrideConfigs,0,5))}catch(e){}return _cfg}function _setupTimer(){!_timeoutHandle&&_fetchTimeout&&(_timeoutHandle=Object(ts_utils.rb)((function(){_timeoutHandle=null,_fetchFn(_cfgUrl,_onFetchComplete,_broadcastChanges)}),_fetchTimeout)).unref()}function _clearScheduledTimer(){_timeoutHandle&&_timeoutHandle.cancel(),_timeoutHandle=null,_retryCnt=0}_initDefaults(),_self.initialize=function(config,core,extensions,pluginChain){_base.initialize(config,core,extensions,pluginChain),_evtNamespace=mergeEvtNamespace(createUniqueNamespace(_self.identifier),core.evtNamespace&&core.evtNamespace()),function _populateDefaults(config){var identifier=_self.identifier,core=_self.core;_self._addHook(onConfigChange(config,(function(){var ctx=createProcessTelemetryContext(null,config,core);_extensionConfig=ctx.getExtCfg(identifier,_defaultConfig);var preBlkCdn=_blkCdnCfg;_blkCdnCfg=!!_extensionConfig.blkCdnCfg,_enableAjax=!!_extensionConfig.enableAjax,Object(ts_utils.M)(preBlkCdn)||preBlkCdn===_blkCdnCfg||(!_blkCdnCfg&&_cfgUrl?_fetchFn&&_fetchFn(_cfgUrl,_onFetchComplete,_broadcastChanges):_clearScheduledTimer()),Object(ts_utils.M)(_receiveChanges)&&(_receiveChanges=2===_extensionConfig.syncMode),Object(ts_utils.M)(_broadcastChanges)&&(_broadcastChanges=1===_extensionConfig.syncMode);var newEvtName=_extensionConfig.customEvtName||"ai_cfgsync";_evtName!==newEvtName&&(_receiveChanges?_updateEventListenerName(newEvtName):(_eventOff(),_evtName=newEvtName)),Object(ts_utils.M)(_cfgUrl)&&(_cfgUrl=_extensionConfig.cfgUrl),_cfgUrl||(_mainConfig=config,_broadcastChanges&&_sendCfgsyncEvents())}))),_overrideSyncFn=_extensionConfig.overrideSyncFn,_overrideFetchFn=_extensionConfig.overrideFetchFn,_onCfgChangeReceive=_extensionConfig.onCfgChangeReceive,_nonOverrideConfigs=_extensionConfig.nonOverrideConfigs,_fetchTimeout=_extensionConfig.scheduleFetchTimeout,_fetchFn=function _getFetchFnInterface(){var _fetchFn=_overrideFetchFn;Object(ts_utils.M)(_fetchFn)&&(isFetchSupported()?_fetchFn=_fetchSender:isXhrSupported()&&(_fetchFn=_xhrSender));return _fetchFn}(),_retryCnt=0,_cfgUrl&&!_blkCdnCfg&&_fetchFn&&_fetchFn(_cfgUrl,_onFetchComplete,_broadcastChanges)}(config)},_self.getCfg=function(){return _mainConfig},_self.pause=function(){_paused=!0,_clearScheduledTimer()},_self.resume=function(){_paused=!1,_setupTimer()},_self.setCfg=function(config){return _setCfg(config)},_self.sync=function(customDetails){return _sendCfgsyncEvents(customDetails)},_self.updateEventListenerName=function(eventName){return _updateEventListenerName(eventName)},_self._doTeardown=function(unloadCtx,unloadState){_eventOff(),_clearScheduledTimer(),_initDefaults()},_self._getDbgPlgTargets=function(){return[_broadcastChanges,_receiveChanges,_evtName,_blkCdnCfg,_nonOverrideConfigs]},_self.processTelemetry=function(env,itemCtx){_self.processNext(env,itemCtx)}})),_this}return Object(TsLibShims.b)(CfgSyncPlugin,_super),CfgSyncPlugin.__ieDyn=1,CfgSyncPlugin}(BaseTelemetryPlugin_BaseTelemetryPlugin);function _disableEvents(target,evtNamespace){eventOff(target,null,null,evtNamespace)}var ActiveStatus=createEnumStyle({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),SenderPostManager_SenderPostManager=function(){function SenderPostManager(){var _enableSendPromise,_isInitialized,_diagLog,_isOneDs,_onCompleteFuncs,_disableCredentials,_fetchCredentials,_fallbackInst,_disableXhr,_disableBeacon,_disableBeaconSync,_disableFetchKeepAlive,_addNoResponse,_timeoutWrapper,_syncFetchPayload=0;dynamicProto(SenderPostManager,this,(function(_self,_base){var _sendCredentials=!0;function _onError(message,onComplete){DiagnosticLogger_throwInternal(_diagLog,2,26,"Failed to send telemetry.",{message:message}),_doOnComplete(onComplete,400,{})}function _onNoPayloadUrl(onComplete){_onError("No endpoint url is provided for the batch",onComplete)}function _doOnComplete(oncomplete,status,headers,response){try{oncomplete&&oncomplete(status,headers,response)}catch(e){}}function _doBeaconSend(payload,oncomplete){var nav=Object(ts_utils.w)(),url=payload.urlString;if(!url)return _onNoPayloadUrl(oncomplete),!0;url=payload.urlString+(_addNoResponse?"&NoResponseBody=true":"");var data=payload.data,plainTextBatch=_isOneDs?data:new Blob([data],{type:"text/plain;charset=UTF-8"});return nav.sendBeacon(url,plainTextBatch)}function _beaconSender(payload,oncomplete,sync){var data=payload.data;try{if(data)if(_doBeaconSend(payload,oncomplete))!function _onSuccess(res,onComplete){_doOnComplete(onComplete,200,{},res)}("",oncomplete);else{var onRetry=_onCompleteFuncs&&_onCompleteFuncs.beaconOnRetry;onRetry&&Object(ts_utils.I)(onRetry)?onRetry(payload,oncomplete,_doBeaconSend):(_fallbackInst&&_fallbackInst.sendPOST(payload,oncomplete,!0),DiagnosticLogger_throwInternal(_diagLog,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(e){_isOneDs&&_warnToConsole(_diagLog,"Failed to send telemetry using sendBeacon API. Ex:"+Object(ts_utils.n)(e)),_doOnComplete(oncomplete,_isOneDs?0:400,{},"")}}function _xhrSender(payload,oncomplete,sync){var thePromise,resolveFunc,rejectFunc,headers=payload.headers||{};!sync&&_enableSendPromise&&(thePromise=Object(ts_async.b)((function(resolve,reject){resolveFunc=resolve,rejectFunc=reject}))),_isOneDs&&sync&&payload.disableXhrSync&&(sync=!1);var endPointUrl=payload.urlString;if(!endPointUrl)return _onNoPayloadUrl(oncomplete),void(resolveFunc&&resolveFunc(!1));var xhr=function openXhr(method,urlString,withCredentials,disabled,isSync,timeout){function _wrapSetXhrProp(xhr,prop,value){try{xhr[prop]=value}catch(e){}}void 0===disabled&&(disabled=!1),void 0===isSync&&(isSync=!1);var xhr=new XMLHttpRequest;return disabled&&_wrapSetXhrProp(xhr,strDisabledPropertyName,disabled),withCredentials&&_wrapSetXhrProp(xhr,strWithCredentials,withCredentials),xhr.open(method,urlString,!isSync),withCredentials&&_wrapSetXhrProp(xhr,strWithCredentials,withCredentials),!isSync&&timeout&&_wrapSetXhrProp(xhr,strTimeout,timeout),xhr}("POST",endPointUrl,_sendCredentials,!0,sync,payload.timeout);function _doOnReadyFunc(xhr){var onReadyFunc=_onCompleteFuncs&&_onCompleteFuncs.xhrOnComplete;if(onReadyFunc&&Object(ts_utils.I)(onReadyFunc))onReadyFunc(xhr,oncomplete,payload);else{var response=getResponseText(xhr);_doOnComplete(oncomplete,xhr[_DYN_STATUS],_getAllResponseHeaders(xhr,_isOneDs),response)}}return _isOneDs||xhr.setRequestHeader("Content-type","application/json"),Object(ts_utils.b)(Object(ts_utils.nb)(headers),(function(headerName){xhr.setRequestHeader(headerName,headers[headerName])})),xhr.onreadystatechange=function(){_isOneDs||(_doOnReadyFunc(xhr),4===xhr.readyState&&resolveFunc&&resolveFunc(!0))},xhr.onload=function(){_isOneDs&&_doOnReadyFunc(xhr)},xhr.onerror=function(event){_doOnComplete(oncomplete,_isOneDs?xhr[_DYN_STATUS]:400,_getAllResponseHeaders(xhr,_isOneDs),_isOneDs?"":formatErrorMessageXhr(xhr)),rejectFunc&&rejectFunc(event)},xhr.ontimeout=function(){_doOnComplete(oncomplete,_isOneDs?xhr[_DYN_STATUS]:500,_getAllResponseHeaders(xhr,_isOneDs),_isOneDs?"":formatErrorMessageXhr(xhr)),resolveFunc&&resolveFunc(!1)},xhr.send(payload.data),thePromise}function _doFetchSender(payload,oncomplete,sync){var _a,thePromise,resolveFunc,rejectFunc,endPointUrl=payload.urlString,batch=payload.data,plainTextBatch=_isOneDs?batch:new Blob([batch],{type:"application/json"}),requestHeaders=new Headers,batchLength=batch[_DYN_LENGTH],ignoreResponse=!1,responseHandled=!1,headers=payload.headers||{},init=((_a={method:"POST",body:plainTextBatch}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,_a);payload.headers&&Object(ts_utils.nb)(payload.headers)[_DYN_LENGTH]>0&&(Object(ts_utils.b)(Object(ts_utils.nb)(headers),(function(headerName){requestHeaders.append(headerName,headers[headerName])})),init.headers=requestHeaders),_fetchCredentials?init.credentials=_fetchCredentials:_sendCredentials&&_isOneDs&&(init.credentials="include"),sync&&(init.keepalive=!0,_syncFetchPayload+=batchLength,_isOneDs?2===payload._sendReason&&(ignoreResponse=!0,_addNoResponse&&(endPointUrl+="&NoResponseBody=true")):ignoreResponse=!0);var request=new Request(endPointUrl,init);try{request.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0}catch(e){}if(!sync&&_enableSendPromise&&(thePromise=Object(ts_async.b)((function(resolve,reject){resolveFunc=resolve,rejectFunc=reject}))),!endPointUrl)return _onNoPayloadUrl(oncomplete),void(resolveFunc&&resolveFunc(!1));function _handleError(res){_doOnComplete(oncomplete,_isOneDs?0:400,{},_isOneDs?"":res)}function _onFetchComplete(response,payload,value){var status=response[_DYN_STATUS],onCompleteFunc=_onCompleteFuncs.fetchOnComplete;onCompleteFunc&&Object(ts_utils.I)(onCompleteFunc)?onCompleteFunc(response,oncomplete,value||"",payload):_doOnComplete(oncomplete,status,{},value||"")}try{Object(ts_async.e)(fetch(_isOneDs?endPointUrl:request,_isOneDs?init:null),(function(result){if(sync&&(_syncFetchPayload-=batchLength,batchLength=0),!responseHandled)if(responseHandled=!0,result.rejected)_handleError(result.reason&&result.reason.message),rejectFunc&&rejectFunc(result.reason);else{var response_1=result.value;try{_isOneDs||response_1.ok?_isOneDs&&!response_1.body?(_onFetchComplete(response_1,null,""),resolveFunc&&resolveFunc(!0)):Object(ts_async.e)(response_1.text(),(function(resp){_onFetchComplete(response_1,payload,resp.value),resolveFunc&&resolveFunc(!0)})):(_handleError(response_1.statusText),resolveFunc&&resolveFunc(!1))}catch(e){_handleError(Object(ts_utils.n)(e)),rejectFunc&&rejectFunc(e)}}}))}catch(e){responseHandled||(_handleError(Object(ts_utils.n)(e)),rejectFunc&&rejectFunc(e))}return ignoreResponse&&!responseHandled&&(responseHandled=!0,_doOnComplete(oncomplete,200,{}),resolveFunc&&resolveFunc(!0)),_isOneDs&&!responseHandled&&payload.timeout>0&&_timeoutWrapper&&_timeoutWrapper.set((function(){responseHandled||(responseHandled=!0,_doOnComplete(oncomplete,500,{}),resolveFunc&&resolveFunc(!0))}),payload.timeout),thePromise}function _xdrSender(payload,oncomplete,sync){var _window=Object(ts_utils.y)(),xdr=new XDomainRequest,data=payload.data;xdr.onload=function(){var response=getResponseText(xdr),onloadFunc=_onCompleteFuncs&&_onCompleteFuncs.xdrOnComplete;onloadFunc&&Object(ts_utils.I)(onloadFunc)?onloadFunc(xdr,oncomplete,payload):_doOnComplete(oncomplete,200,{},response)},xdr.onerror=function(){_doOnComplete(oncomplete,400,{},_isOneDs?"":formatErrorMessageXdr(xdr))},xdr.ontimeout=function(){_doOnComplete(oncomplete,500,{})},xdr.onprogress=function(){};var hostingProtocol=_window&&_window.location&&_window.location.protocol||"",endpoint=payload.urlString;if(endpoint){if(!_isOneDs&&0!==endpoint.lastIndexOf(hostingProtocol,0)){var msg="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";return DiagnosticLogger_throwInternal(_diagLog,2,40,". "+msg),void _onError(msg,oncomplete)}var endpointUrl=_isOneDs?endpoint:endpoint[_DYN_REPLACE](/^(https?:)/,"");xdr.open("POST",endpointUrl),payload.timeout&&(xdr.timeout=payload.timeout),xdr.send(data),_isOneDs&&sync?_timeoutWrapper&&_timeoutWrapper.set((function(){xdr.send(data)}),0):xdr.send(data)}else _onNoPayloadUrl(oncomplete)}function _initDefaults(){_syncFetchPayload=0,_isInitialized=!1,_enableSendPromise=!1,_diagLog=null,_isOneDs=null,_onCompleteFuncs=null,_disableCredentials=null,_fetchCredentials=null,_fallbackInst=null,_disableXhr=!1,_disableBeacon=!1,_disableBeaconSync=!1,_disableFetchKeepAlive=!1,_addNoResponse=!1,_timeoutWrapper=null}_initDefaults(),_self[_DYN_INITIALIZE]=function(config,diagLog){_diagLog=diagLog,_isInitialized&&DiagnosticLogger_throwInternal(_diagLog,1,28,"Sender is already initialized"),_self.SetConfig(config),_isInitialized=!0},_self._getDbgPlgTargets=function(){return[_isInitialized,_isOneDs,_disableCredentials,_enableSendPromise]},_self.SetConfig=function(config){try{if(_onCompleteFuncs=config.senderOnCompleteCallBack||{},_disableCredentials=!!config.disableCredentials,_fetchCredentials=config.fetchCredentials,_isOneDs=!!config.isOneDs,_enableSendPromise=!!config.enableSendPromise,_disableXhr=!!config.disableXhr,_disableBeacon=!!config.disableBeacon,_disableBeaconSync=!!config.disableBeaconSync,_timeoutWrapper=config.timeWrapper,_addNoResponse=!!config.addNoResponse,_disableFetchKeepAlive=!!config.disableFetchKeepAlive,_fallbackInst={sendPOST:_xhrSender},_isOneDs||(_sendCredentials=!1),_disableCredentials){var location_1=getLocation();location_1&&location_1.protocol&&"file:"===location_1.protocol[_DYN_TO_LOWER_CASE]()&&(_sendCredentials=!1)}return!0}catch(e){}return!1},_self.getSyncFetchPayload=function(){return _syncFetchPayload},_self.getSenderInst=function(transports,sync){return transports&&transports[_DYN_LENGTH]?function _getSenderInterface(transports,syncSupport){var transportType=0,sendPostFunc=null,lp=0;for(;null==sendPostFunc&&lp<transports[_DYN_LENGTH];)transportType=transports[lp],_disableXhr||1!==transportType?2!==transportType||!isFetchSupported(syncSupport)||syncSupport&&_disableFetchKeepAlive?3!==transportType||!isBeaconsSupported()||(syncSupport?_disableBeaconSync:_disableBeacon)||(sendPostFunc=_beaconSender):sendPostFunc=_doFetchSender:useXDomainRequest()?sendPostFunc=_xdrSender:isXhrSupported()&&(sendPostFunc=_xhrSender),lp++;if(sendPostFunc)return{_transport:transportType,_isSync:syncSupport,sendPOST:sendPostFunc};return null}(transports,sync):null},_self.getFallbackInst=function(){return _fallbackInst},_self[_DYN__DO_TEARDOWN]=function(unloadCtx,unloadState){_initDefaults()}}))}return SenderPostManager.__ieDyn=1,SenderPostManager}();function runTargetUnload(target,isAsync){if(target&&target[_DYN_UNLOAD])return target[_DYN_UNLOAD](isAsync)}function doUnloadAll(targets,isAsync,done){var result;return done||(result=Object(ts_async.b)((function(resolved){done=resolved}))),targets&&Object(ts_utils.v)(targets)>0?Object(ts_async.e)(runTargetUnload(targets[0],isAsync),(function(){doUnloadAll(Object(ts_utils.f)(targets,1),isAsync,done)})):done(),result}function parseResponse(response,diagLog){try{if(response&&""!==response){var result=getJSON().parse(response);if(result&&result[_DYN_ITEMS_RECEIVED]&&result[_DYN_ITEMS_RECEIVED]>=result.itemsAccepted&&result.itemsReceived-result.itemsAccepted===result.errors[_DYN_LENGTH])return result}}catch(e){DiagnosticLogger_throwInternal(diagLog,1,43,"Cannot parse the response. "+(e[_DYN_NAME]||Object(ts_utils.n)(e)),{response:response})}return null}function _aiNameFunc(baseName){var aiName="ai."+baseName+".";return function(name){return aiName+name}}var _aiApplication=_aiNameFunc("application"),_aiDevice=_aiNameFunc("device"),_aiLocation=_aiNameFunc("location"),_aiOperation=_aiNameFunc("operation"),_aiSession=_aiNameFunc("session"),_aiUser=_aiNameFunc("user"),_aiCloud=_aiNameFunc("cloud"),_aiInternal=_aiNameFunc("internal"),ContextTagKeys_ContextTagKeys=function(_super){function ContextTagKeys(){return _super.call(this)||this}return Object(TsLibShims.b)(ContextTagKeys,_super),ContextTagKeys}(function createClassFromInterface(defaults){return function class_1(){var _this=this;defaults&&Object(ts_utils.ib)(defaults,(function(field,value){_this[field]=value}))}}({applicationVersion:_aiApplication("ver"),applicationBuild:_aiApplication("build"),applicationTypeId:_aiApplication("typeId"),applicationId:_aiApplication("applicationId"),applicationLayer:_aiApplication("layer"),deviceId:_aiDevice("id"),deviceIp:_aiDevice("ip"),deviceLanguage:_aiDevice("language"),deviceLocale:_aiDevice("locale"),deviceModel:_aiDevice("model"),deviceFriendlyName:_aiDevice("friendlyName"),deviceNetwork:_aiDevice("network"),deviceNetworkName:_aiDevice("networkName"),deviceOEMName:_aiDevice("oemName"),deviceOS:_aiDevice("os"),deviceOSVersion:_aiDevice("osVersion"),deviceRoleInstance:_aiDevice("roleInstance"),deviceRoleName:_aiDevice("roleName"),deviceScreenResolution:_aiDevice("screenResolution"),deviceType:_aiDevice("type"),deviceMachineName:_aiDevice("machineName"),deviceVMName:_aiDevice("vmName"),deviceBrowser:_aiDevice("browser"),deviceBrowserVersion:_aiDevice("browserVersion"),locationIp:_aiLocation("ip"),locationCountry:_aiLocation("country"),locationProvince:_aiLocation("province"),locationCity:_aiLocation("city"),operationId:_aiOperation("id"),operationName:_aiOperation("name"),operationParentId:_aiOperation("parentId"),operationRootId:_aiOperation("rootId"),operationSyntheticSource:_aiOperation("syntheticSource"),operationCorrelationVector:_aiOperation("correlationVector"),sessionId:_aiSession("id"),sessionIsFirst:_aiSession("isFirst"),sessionIsNew:_aiSession("isNew"),userAccountAcquisitionDate:_aiUser("accountAcquisitionDate"),userAccountId:_aiUser("accountId"),userAgent:_aiUser("userAgent"),userId:_aiUser("id"),userStoreRegion:_aiUser("storeRegion"),userAuthUserId:_aiUser("authUserId"),userAnonymousUserAcquisitionDate:_aiUser("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:_aiUser("authUserAcquisitionDate"),cloudName:_aiCloud("name"),cloudRole:_aiCloud("role"),cloudRoleVer:_aiCloud("roleVer"),cloudRoleInstance:_aiCloud("roleInstance"),cloudEnvironment:_aiCloud("environment"),cloudLocation:_aiCloud("location"),cloudDeploymentUnit:_aiCloud("deploymentUnit"),internalNodeName:_aiInternal("nodeName"),internalSdkVersion:_aiInternal("sdkVersion"),internalAgentVersion:_aiInternal("agentVersion"),internalSnippet:_aiInternal("snippet"),internalSdkSrc:_aiInternal("sdkSrc")})),Extensions_UserExt="user",Extensions_DeviceExt="device",Extensions_TraceExt="trace",Extensions_WebExt="web",Extensions_AppExt="app",Extensions_OSExt="os",CtxTagKeys=new ContextTagKeys_ContextTagKeys,Envelope_Envelope=function Envelope(logger,data,name){var _this=this;this.ver=1,this.sampleRate=100,this.tags={},this[_DynamicConstants_DYN_NAME]=dataSanitizeString(logger,name)||strNotSpecified,this.data=data,this.time=toISOString(new Date),this[_DYN_AI_DATA_CONTRACT]={time:1,iKey:1,name:1,sampleRate:function sampleRate(){return 100===_this.sampleRate?4:1},tags:1,data:1}},Data=function Data(baseType,data){this.aiDataContract={baseType:1,baseData:1},this.baseType=baseType,this.baseData=data},STR_DURATION="duration",_DYN_TAGS="tags",_DYN_DEVICE_TYPE="deviceType",_DynamicConstants_DYN_DATA="data",dist_es5_DynamicConstants_DYN_NAME="name",_DYN_TRACE_ID="traceID",applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH="length",_DynamicConstants_DYN_STRINGIFY="stringify",_DynamicConstants_DYN_MEASUREMENTS="measurements",_DynamicConstants_DYN_DATA_TYPE="dataType",_DynamicConstants_DYN_ENVELOPE_TYPE="envelopeType",dist_es5_DynamicConstants_DYN_TO_STRING="toString",strBaseType="baseType",strBaseData="baseData",strProperties="properties",strTrue="true";function _setValueIf(target,field,value){return setValue(target,field,value,ts_utils.S)}function _extractPropsAndMeasurements(data,properties,measurements){Object(ts_utils.M)(data)||Object(ts_utils.ib)(data,(function(key,value){Object(ts_utils.N)(value)?measurements[key]=value:Object(ts_utils.R)(value)?properties[key]=value:hasJSON()&&(properties[key]=getJSON()[_DynamicConstants_DYN_STRINGIFY](value))}))}function _convertPropsUndefinedToCustomDefinedValue(properties,customUndefinedValue){Object(ts_utils.M)(properties)||Object(ts_utils.ib)(properties,(function(key,value){properties[key]=value||customUndefinedValue}))}function _createEnvelope(logger,envelopeType,telemetryItem,data){var envelope=new Envelope_Envelope(logger,data,envelopeType);_setValueIf(envelope,"sampleRate",telemetryItem[SampleRate]),(telemetryItem[strBaseData]||{}).startTime&&(envelope.time=toISOString(telemetryItem[strBaseData].startTime)),envelope.iKey=telemetryItem.iKey;var iKeyNoDashes=telemetryItem.iKey.replace(/-/g,"");return envelope[dist_es5_DynamicConstants_DYN_NAME]=envelope[dist_es5_DynamicConstants_DYN_NAME].replace("{0}",iKeyNoDashes),function _extractPartAExtensions(logger,item,env){var envTags=env[_DYN_TAGS]=env[_DYN_TAGS]||{},itmExt=item.ext=item.ext||{},itmTags=item[_DYN_TAGS]=item[_DYN_TAGS]||[],extUser=itmExt.user;extUser&&(_setValueIf(envTags,CtxTagKeys.userAuthUserId,extUser.authId),_setValueIf(envTags,CtxTagKeys.userId,extUser.id||extUser.localId));var extApp=itmExt.app;extApp&&_setValueIf(envTags,CtxTagKeys.sessionId,extApp.sesId);var extDevice=itmExt.device;extDevice&&(_setValueIf(envTags,CtxTagKeys.deviceId,extDevice.id||extDevice.localId),_setValueIf(envTags,CtxTagKeys[_DYN_DEVICE_TYPE],extDevice.deviceClass),_setValueIf(envTags,CtxTagKeys.deviceIp,extDevice.ip),_setValueIf(envTags,CtxTagKeys.deviceModel,extDevice.model),_setValueIf(envTags,CtxTagKeys[_DYN_DEVICE_TYPE],extDevice[_DYN_DEVICE_TYPE]));var web=item.ext.web;if(web){_setValueIf(envTags,CtxTagKeys.deviceLanguage,web.browserLang),_setValueIf(envTags,CtxTagKeys.deviceBrowserVersion,web.browserVer),_setValueIf(envTags,CtxTagKeys.deviceBrowser,web.browser);var envData=env[_DynamicConstants_DYN_DATA]=env[_DynamicConstants_DYN_DATA]||{},envBaseData=envData[strBaseData]=envData[strBaseData]||{},envProps=envBaseData[strProperties]=envBaseData[strProperties]||{};_setValueIf(envProps,"domain",web.domain),_setValueIf(envProps,"isManual",web.isManual?strTrue:null),_setValueIf(envProps,"screenRes",web.screenRes),_setValueIf(envProps,"userConsent",web.userConsent?strTrue:null)}var extOs=itmExt.os;extOs&&(_setValueIf(envTags,CtxTagKeys.deviceOS,extOs[dist_es5_DynamicConstants_DYN_NAME]),_setValueIf(envTags,CtxTagKeys.deviceOSVersion,extOs.osVer));var extTrace=itmExt.trace;extTrace&&(_setValueIf(envTags,CtxTagKeys.operationParentId,extTrace.parentID),_setValueIf(envTags,CtxTagKeys.operationName,dataSanitizeString(logger,extTrace[dist_es5_DynamicConstants_DYN_NAME])),_setValueIf(envTags,CtxTagKeys.operationId,extTrace[_DYN_TRACE_ID]));for(var tgs={},i=itmTags[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]-1;i>=0;i--){var tg=itmTags[i];Object(ts_utils.ib)(tg,(function(key,value){tgs[key]=value})),itmTags.splice(i,1)}Object(ts_utils.ib)(itmTags,(function(tg,value){tgs[tg]=value}));var theTags=Object(TsLibShims.a)(Object(TsLibShims.a)({},envTags),tgs);theTags[CtxTagKeys.internalSdkVersion]||(theTags[CtxTagKeys.internalSdkVersion]=dataSanitizeString(logger,"javascript:".concat(EnvelopeCreator.Version),64)),env[_DYN_TAGS]=optimizeObject(theTags)}(logger,telemetryItem,envelope),telemetryItem[_DYN_TAGS]=telemetryItem[_DYN_TAGS]||[],optimizeObject(envelope)}function EnvelopeCreatorInit(logger,telemetryItem){Object(ts_utils.M)(telemetryItem[strBaseData])&&DiagnosticLogger_throwInternal(logger,1,46,"telemetryItem.baseData cannot be null.")}var EnvelopeCreator={Version:"3.3.6"};function EventEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var customProperties={},customMeasurements={};telemetryItem[strBaseType]!==Event_Event[_DynamicConstants_DYN_DATA_TYPE]&&(customProperties.baseTypeSource=telemetryItem[strBaseType]),telemetryItem[strBaseType]===Event_Event[_DynamicConstants_DYN_DATA_TYPE]?(customProperties=telemetryItem[strBaseData][strProperties]||{},customMeasurements=telemetryItem[strBaseData][_DynamicConstants_DYN_MEASUREMENTS]||{}):telemetryItem[strBaseData]&&_extractPropsAndMeasurements(telemetryItem[strBaseData],customProperties,customMeasurements),_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],customProperties,customMeasurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(customProperties,customUndefinedValue);var eventName=telemetryItem[strBaseData][dist_es5_DynamicConstants_DYN_NAME],eventData=new Event_Event(logger,eventName,customProperties,customMeasurements),data=new Data(Event_Event[_DynamicConstants_DYN_DATA_TYPE],eventData);return _createEnvelope(logger,Event_Event[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)}var Sender_a,Sender_b,SendBuffer_BaseSendBuffer=function(){function BaseSendBuffer(logger,config){var _buffer=[],_bufferFullMessageSent=!1,_maxRetryCnt=config.maxRetryCnt;this._get=function(){return _buffer},this._set=function(buffer){return _buffer=buffer},dynamicProto(BaseSendBuffer,this,(function(_self){_self.enqueue=function(payload){_self.count()>=config.eventsLimitInMem?_bufferFullMessageSent||(DiagnosticLogger_throwInternal(logger,2,105,"Maximum in-memory buffer size reached: "+_self.count(),!0),_bufferFullMessageSent=!0):(payload.cnt=payload.cnt||0,!Object(ts_utils.M)(_maxRetryCnt)&&payload.cnt>_maxRetryCnt||_buffer.push(payload))},_self.count=function(){return _buffer[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]},_self.size=function(){for(var size=_buffer[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH],lp=0;lp<_buffer[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];lp++)size+=_buffer[lp].item[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];return config.emitLineDelimitedJson||(size+=2),size},_self.clear=function(){_buffer=[],_bufferFullMessageSent=!1},_self.getItems=function(){return _buffer.slice(0)},_self.batchPayloads=function(payloads){if(payloads&&payloads[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0){var payloadStr_1=[];return Object(ts_utils.b)(payloads,(function(payload){payloadStr_1.push(payload.item)})),config.emitLineDelimitedJson?payloadStr_1.join("\n"):"["+payloadStr_1.join(",")+"]"}return null},_self.createNew=function(newLogger,newConfig,canUseSessionStorage){var items=_buffer.slice(0);newLogger=newLogger||logger,newConfig=newConfig||{};var newBuffer=canUseSessionStorage?new SendBuffer_SessionStorageSendBuffer(newLogger,newConfig):new SendBuffer_ArraySendBuffer(newLogger,newConfig);return Object(ts_utils.b)(items,(function(payload){newBuffer.enqueue(payload)})),newBuffer}}))}return BaseSendBuffer.__ieDyn=1,BaseSendBuffer}(),SendBuffer_ArraySendBuffer=function(_super){function ArraySendBuffer(logger,config){var _this=_super.call(this,logger,config)||this;return dynamicProto(ArraySendBuffer,_this,(function(_self,_base){_self.markAsSent=function(payload){_base.clear()},_self.clearSent=function(payload){}})),_this}return Object(TsLibShims.b)(ArraySendBuffer,_super),ArraySendBuffer.__ieDyn=1,ArraySendBuffer}(SendBuffer_BaseSendBuffer),PREVIOUS_KEYS=["AI_buffer","AI_sentBuffer"],SendBuffer_SessionStorageSendBuffer=function(_super){function SessionStorageSendBuffer(logger,config){var _this=_super.call(this,logger,config)||this,_bufferFullMessageSent=!1,_namePrefix=null==config?void 0:config.namePrefix,_b=config.bufferOverride||{getItem:utlGetSessionStorage,setItem:utlSetSessionStorage},getItem=_b.getItem,setItem=_b.setItem,_maxRetryCnt=config.maxRetryCnt;return dynamicProto(SessionStorageSendBuffer,_this,(function(_self,_base){var bufferItems=_getBuffer(SessionStorageSendBuffer.BUFFER_KEY),itemsInSentBuffer=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY),previousItems=function _getPreviousEvents(){var items=[];try{return Object(ts_utils.b)(PREVIOUS_KEYS,(function(key){var events=_getItemsFromPreviousKey(key);if(items=items.concat(events),_namePrefix){var prefixEvents=_getItemsFromPreviousKey(_namePrefix+"_"+key);items=items.concat(prefixEvents)}})),items}catch(e){DiagnosticLogger_throwInternal(logger,2,41,"Transfer events from previous buffers: "+getExceptionName(e)+". previous Buffer items can not be removed",{exception:Object(ts_utils.n)(e)})}return[]}(),notDeliveredItems=itemsInSentBuffer.concat(previousItems),buffer=_self._set(bufferItems.concat(notDeliveredItems));function _removePayloadsFromBuffer(payloads,buffer){var remaining=[],payloadStr=[];return Object(ts_utils.b)(payloads,(function(payload){payloadStr.push(payload.item)})),Object(ts_utils.b)(buffer,(function(value){Object(ts_utils.I)(value)||-1!==Object(ts_utils.c)(payloadStr,value.item)||remaining.push(value)})),remaining}function _getBuffer(key){var prefixedKey=key;return _getBufferBase(prefixedKey=_namePrefix?_namePrefix+"_"+prefixedKey:prefixedKey)}function _getBufferBase(key){try{var bufferJson=getItem(logger,key);if(bufferJson){var buffer_1=getJSON().parse(bufferJson);if(Object(ts_utils.R)(buffer_1)&&(buffer_1=getJSON().parse(buffer_1)),buffer_1&&Object(ts_utils.E)(buffer_1))return buffer_1}}catch(e){DiagnosticLogger_throwInternal(logger,1,42," storage key: "+key+", "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return[]}function _setBuffer(key,buffer){var prefixedKey=key;try{prefixedKey=_namePrefix?_namePrefix+"_"+prefixedKey:prefixedKey;var bufferJson=JSON[_DynamicConstants_DYN_STRINGIFY](buffer);setItem(logger,prefixedKey,bufferJson)}catch(e){setItem(logger,prefixedKey,JSON[_DynamicConstants_DYN_STRINGIFY]([])),DiagnosticLogger_throwInternal(logger,2,41," storage key: "+prefixedKey+", "+getExceptionName(e)+". Buffer cleared",{exception:Object(ts_utils.n)(e)})}}function _getItemsFromPreviousKey(key){try{var items=_getBufferBase(key),transFormedItems_1=[];return Object(ts_utils.b)(items,(function(item){var internalItem={item:item,cnt:0};transFormedItems_1.push(internalItem)})),utlRemoveSessionStorage(logger,key),transFormedItems_1}catch(e){}return[]}buffer[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>SessionStorageSendBuffer.MAX_BUFFER_SIZE&&(buffer[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]=SessionStorageSendBuffer.MAX_BUFFER_SIZE),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,[]),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,buffer),_self.enqueue=function(payload){_self.count()>=SessionStorageSendBuffer.MAX_BUFFER_SIZE?_bufferFullMessageSent||(DiagnosticLogger_throwInternal(logger,2,67,"Maximum buffer size reached: "+_self.count(),!0),_bufferFullMessageSent=!0):(payload.cnt=payload.cnt||0,!Object(ts_utils.M)(_maxRetryCnt)&&payload.cnt>_maxRetryCnt||(_base.enqueue(payload),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,_self._get())))},_self.clear=function(){_base.clear(),_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,_self._get()),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,[]),_bufferFullMessageSent=!1},_self.markAsSent=function(payload){_setBuffer(SessionStorageSendBuffer.BUFFER_KEY,_self._set(_removePayloadsFromBuffer(payload,_self._get())));var sentElements=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);sentElements instanceof Array&&payload instanceof Array&&((sentElements=sentElements.concat(payload))[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>SessionStorageSendBuffer.MAX_BUFFER_SIZE&&(DiagnosticLogger_throwInternal(logger,1,67,"Sent buffer reached its maximum size: "+sentElements[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH],!0),sentElements[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]=SessionStorageSendBuffer.MAX_BUFFER_SIZE),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,sentElements))},_self.clearSent=function(payload){var sentElements=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY);sentElements=_removePayloadsFromBuffer(payload,sentElements),_setBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY,sentElements)},_self.createNew=function(newLogger,newConfig,canUseSessionStorage){canUseSessionStorage=!!canUseSessionStorage;var unsentItems=_self._get().slice(0),sentItems=_getBuffer(SessionStorageSendBuffer.SENT_BUFFER_KEY).slice(0);newLogger=newLogger||logger,newConfig=newConfig||{},_self.clear();var newBuffer=canUseSessionStorage?new SessionStorageSendBuffer(newLogger,newConfig):new SendBuffer_ArraySendBuffer(newLogger,newConfig);return Object(ts_utils.b)(unsentItems,(function(payload){newBuffer.enqueue(payload)})),canUseSessionStorage&&newBuffer.markAsSent(sentItems),newBuffer}})),_this}var _a;return Object(TsLibShims.b)(SessionStorageSendBuffer,_super),_a=SessionStorageSendBuffer,SessionStorageSendBuffer.VERSION="_1",SessionStorageSendBuffer.BUFFER_KEY="AI_buffer"+_a.VERSION,SessionStorageSendBuffer.SENT_BUFFER_KEY="AI_sentBuffer"+_a.VERSION,SessionStorageSendBuffer.MAX_BUFFER_SIZE=2e3,SessionStorageSendBuffer}(SendBuffer_BaseSendBuffer),Serializer_Serializer=function(){function Serializer(logger){dynamicProto(Serializer,this,(function(_self){function _serializeObject(source,name){var output={};if(!source)return DiagnosticLogger_throwInternal(logger,1,48,"cannot serialize object because it is null or undefined",{name:name},!0),output;if(source.__aiCircularRefCheck)return DiagnosticLogger_throwInternal(logger,2,50,"Circular reference detected while serializing object",{name:name},!0),output;if(!source.aiDataContract){if("measurements"===name)output=_serializeStringMap(source,"number",name);else if("properties"===name)output=_serializeStringMap(source,"string",name);else if("tags"===name)output=_serializeStringMap(source,"string",name);else if(Object(ts_utils.E)(source))output=_serializeArray(source,name);else{DiagnosticLogger_throwInternal(logger,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:name},!0);try{getJSON()[_DynamicConstants_DYN_STRINGIFY](source),output=source}catch(e){DiagnosticLogger_throwInternal(logger,1,48,e&&Object(ts_utils.I)(e[dist_es5_DynamicConstants_DYN_TO_STRING])?e[dist_es5_DynamicConstants_DYN_TO_STRING]():"Error serializing object",null,!0)}}return output}return source.__aiCircularRefCheck=!0,Object(ts_utils.ib)(source.aiDataContract,(function(field,contract){var isRequired=Object(ts_utils.I)(contract)?1&contract():1&contract,isHidden=Object(ts_utils.I)(contract)?4&contract():4&contract,isArray=2&contract,isPresent=void 0!==source[field],isObj=Object(ts_utils.O)(source[field])&&null!==source[field];if(!isRequired||isPresent||isArray){if(!isHidden){var value=void 0;void 0!==(value=isObj?isArray?_serializeArray(source[field],field):_serializeObject(source[field],field):source[field])&&(output[field]=value)}}else DiagnosticLogger_throwInternal(logger,1,24,"Missing required field specification. The field is required but not present on source",{field:field,name:name})})),delete source.__aiCircularRefCheck,output}function _serializeArray(sources,name){var output;if(sources)if(Object(ts_utils.E)(sources)){output=[];for(var i=0;i<sources[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];i++){var item=_serializeObject(sources[i],name+"["+i+"]");output.push(item)}}else DiagnosticLogger_throwInternal(logger,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:name},!0);return output}function _serializeStringMap(map,expectedType,name){var output;return map&&(output={},Object(ts_utils.ib)(map,(function(field,value){if("string"===expectedType)void 0===value?output[field]="undefined":null===value?output[field]="null":value[dist_es5_DynamicConstants_DYN_TO_STRING]?output[field]=value[dist_es5_DynamicConstants_DYN_TO_STRING]():output[field]="invalid field: toString() is not defined.";else if("number"===expectedType)if(void 0===value)output[field]="undefined";else if(null===value)output[field]="null";else{var num=parseFloat(value);output[field]=num}else output[field]="invalid field: "+name+" is of unknown type.",DiagnosticLogger_throwInternal(logger,1,output[field],null,!0)}))),output}_self.serialize=function(input){var output=_serializeObject(input,"root");try{return getJSON()[_DynamicConstants_DYN_STRINGIFY](output)}catch(e){DiagnosticLogger_throwInternal(logger,1,48,e&&Object(ts_utils.I)(e[dist_es5_DynamicConstants_DYN_TO_STRING])?e[dist_es5_DynamicConstants_DYN_TO_STRING]():"Error serializing object",null,!0)}}}))}return Serializer.__ieDyn=1,Serializer}(),HashCodeScoreGenerator_HashCodeScoreGenerator=function(){function HashCodeScoreGenerator(){}return HashCodeScoreGenerator.prototype.getHashCodeScore=function(key){return 100*(this.getHashCode(key)/HashCodeScoreGenerator.INT_MAX_VALUE)},HashCodeScoreGenerator.prototype.getHashCode=function(input){if(""===input)return 0;for(;input[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]<8;)input=input.concat(input);for(var hash=5381,i=0;i<input[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];++i)hash=(hash<<5)+hash+input.charCodeAt(i),hash&=hash;return Math.abs(hash)},HashCodeScoreGenerator.INT_MAX_VALUE=2147483647,HashCodeScoreGenerator}(),SamplingScoreGenerator_SamplingScoreGenerator=function SamplingScoreGenerator(){var hashCodeGenerator=new HashCodeScoreGenerator_HashCodeScoreGenerator,keys=new ContextTagKeys_ContextTagKeys;this.getSamplingScore=function(item){return item[_DYN_TAGS]&&item[_DYN_TAGS][keys.userId]?hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS][keys.userId]):item.ext&&item.ext.user&&item.ext.user.id?hashCodeGenerator.getHashCodeScore(item.ext.user.id):item[_DYN_TAGS]&&item[_DYN_TAGS][keys.operationId]?hashCodeGenerator.getHashCodeScore(item[_DYN_TAGS][keys.operationId]):item.ext&&item.ext.telemetryTrace&&item.ext.telemetryTrace[_DYN_TRACE_ID]?hashCodeGenerator.getHashCodeScore(item.ext.telemetryTrace[_DYN_TRACE_ID]):100*Math.random()}},Sample_Sample=function(){function Sample(sampleRate,logger){this.INT_MAX_VALUE=2147483647;var _logger=logger||safeGetLogger(null);(sampleRate>100||sampleRate<0)&&(_logger.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:sampleRate},!0),sampleRate=100),this.sampleRate=sampleRate,this.samplingScoreGenerator=new SamplingScoreGenerator_SamplingScoreGenerator}return Sample.prototype.isSampledIn=function(envelope){var samplingPercentage=this.sampleRate;return null==samplingPercentage||samplingPercentage>=100||(envelope.baseType===Metric_Metric[_DynamicConstants_DYN_DATA_TYPE]||this.samplingScoreGenerator.getSamplingScore(envelope)<samplingPercentage)},Sample}();function Sender_getResponseText(xhr){try{return xhr.responseText}catch(e){}return null}var defaultAppInsightsChannelConfig=Object(ts_utils.db)(((Sender_a={endpointUrl:cfgDfValidate(ts_utils.S,DEFAULT_BREEZE_ENDPOINT+"/v2/track")}).emitLineDelimitedJson=cfgDfBoolean(),Sender_a.maxBatchInterval=15e3,Sender_a.maxBatchSizeInBytes=102400,Sender_a.disableTelemetry=cfgDfBoolean(),Sender_a.enableSessionStorageBuffer=cfgDfBoolean(!0),Sender_a.isRetryDisabled=cfgDfBoolean(),Sender_a.isBeaconApiDisabled=cfgDfBoolean(!0),Sender_a.disableSendBeaconSplit=cfgDfBoolean(!0),Sender_a.disableXhr=cfgDfBoolean(),Sender_a.onunloadDisableFetch=cfgDfBoolean(),Sender_a.onunloadDisableBeacon=cfgDfBoolean(),Sender_a.instrumentationKey=undefined,Sender_a.namePrefix=undefined,Sender_a.samplingPercentage=cfgDfValidate((function Sender_chkSampling(value){return!isNaN(value)&&value>0&&value<=100}),100),Sender_a.customHeaders=undefined,Sender_a.convertUndefined=undefined,Sender_a.eventsLimitInMem=1e4,Sender_a.bufferOverride=!1,Sender_a.httpXHROverride={isVal:function isOverrideFn(httpXHROverride){return httpXHROverride&&httpXHROverride.sendPOST},v:undefined},Sender_a.alwaysUseXhrOverride=cfgDfBoolean(),Sender_a.transports=undefined,Sender_a.retryCodes=undefined,Sender_a.maxRetryCnt={isVal:ts_utils.N,v:10},Sender_a));var EnvelopeTypeCreator=((Sender_b={})[Event_Event.dataType]=EventEnvelopeCreator,Sender_b[Trace_Trace.dataType]=function TraceEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var message=telemetryItem[strBaseData].message,severityLevel=telemetryItem[strBaseData].severityLevel,props=telemetryItem[strBaseData][strProperties]||{},measurements=telemetryItem[strBaseData][_DynamicConstants_DYN_MEASUREMENTS]||{};_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],props,measurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(props,customUndefinedValue);var baseData=new Trace_Trace(logger,message,severityLevel,props,measurements),data=new Data(Trace_Trace[_DynamicConstants_DYN_DATA_TYPE],baseData);return _createEnvelope(logger,Trace_Trace[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b[PageView_PageView.dataType]=function PageViewEnvelopeCreator(logger,telemetryItem,customUndefinedValue){var duration;EnvelopeCreatorInit(logger,telemetryItem);var baseData=telemetryItem[strBaseData];Object(ts_utils.M)(baseData)||Object(ts_utils.M)(baseData[strProperties])||Object(ts_utils.M)(baseData[strProperties][STR_DURATION])?Object(ts_utils.M)(telemetryItem[_DynamicConstants_DYN_DATA])||Object(ts_utils.M)(telemetryItem[_DynamicConstants_DYN_DATA][STR_DURATION])||(duration=telemetryItem[_DynamicConstants_DYN_DATA][STR_DURATION],delete telemetryItem[_DynamicConstants_DYN_DATA][STR_DURATION]):(duration=baseData[strProperties][STR_DURATION],delete baseData[strProperties][STR_DURATION]);var currentContextId,bd=telemetryItem[strBaseData];((telemetryItem.ext||{}).trace||{})[_DYN_TRACE_ID]&&(currentContextId=telemetryItem.ext.trace[_DYN_TRACE_ID]);var id=bd.id||currentContextId,name=bd[dist_es5_DynamicConstants_DYN_NAME],url=bd.uri,properties=bd[strProperties]||{},measurements=bd[_DynamicConstants_DYN_MEASUREMENTS]||{};if(Object(ts_utils.M)(bd.refUri)||(properties.refUri=bd.refUri),Object(ts_utils.M)(bd.pageType)||(properties.pageType=bd.pageType),Object(ts_utils.M)(bd.isLoggedIn)||(properties.isLoggedIn=bd.isLoggedIn[dist_es5_DynamicConstants_DYN_TO_STRING]()),!Object(ts_utils.M)(bd[strProperties])){var pageTags=bd[strProperties];Object(ts_utils.ib)(pageTags,(function(key,value){properties[key]=value}))}_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],properties,measurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(properties,customUndefinedValue);var pageViewData=new PageView_PageView(logger,name,url,duration,properties,measurements,id),data=new Data(PageView_PageView[_DynamicConstants_DYN_DATA_TYPE],pageViewData);return _createEnvelope(logger,PageView_PageView[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b[PageViewPerformance_PageViewPerformance.dataType]=function PageViewPerformanceEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var bd=telemetryItem[strBaseData],name=bd[dist_es5_DynamicConstants_DYN_NAME],url=bd.uri||bd.url,properties=bd[strProperties]||{},measurements=bd[_DynamicConstants_DYN_MEASUREMENTS]||{};_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],properties,measurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(properties,customUndefinedValue);var baseData=new PageViewPerformance_PageViewPerformance(logger,name,url,void 0,properties,measurements,bd),data=new Data(PageViewPerformance_PageViewPerformance[_DynamicConstants_DYN_DATA_TYPE],baseData);return _createEnvelope(logger,PageViewPerformance_PageViewPerformance[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b[Exception_Exception.dataType]=function ExceptionEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var customMeasurements=telemetryItem[strBaseData][_DynamicConstants_DYN_MEASUREMENTS]||{},customProperties=telemetryItem[strBaseData][strProperties]||{};_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],customProperties,customMeasurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(customProperties,customUndefinedValue);var bd=telemetryItem[strBaseData],exData=Exception_Exception.CreateFromInterface(logger,bd,customProperties,customMeasurements),data=new Data(Exception_Exception[_DynamicConstants_DYN_DATA_TYPE],exData);return _createEnvelope(logger,Exception_Exception[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b[Metric_Metric.dataType]=function MetricEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var baseData=telemetryItem[strBaseData],props=baseData[strProperties]||{},measurements=baseData[_DynamicConstants_DYN_MEASUREMENTS]||{};_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],props,measurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(props,customUndefinedValue);var baseMetricData=new Metric_Metric(logger,baseData[dist_es5_DynamicConstants_DYN_NAME],baseData.average,baseData.sampleCount,baseData.min,baseData.max,baseData.stdDev,props,measurements),data=new Data(Metric_Metric[_DynamicConstants_DYN_DATA_TYPE],baseMetricData);return _createEnvelope(logger,Metric_Metric[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b[RemoteDependencyData_RemoteDependencyData.dataType]=function DependencyEnvelopeCreator(logger,telemetryItem,customUndefinedValue){EnvelopeCreatorInit(logger,telemetryItem);var customMeasurements=telemetryItem[strBaseData][_DynamicConstants_DYN_MEASUREMENTS]||{},customProperties=telemetryItem[strBaseData][strProperties]||{};_extractPropsAndMeasurements(telemetryItem[_DynamicConstants_DYN_DATA],customProperties,customMeasurements),Object(ts_utils.M)(customUndefinedValue)||_convertPropsUndefinedToCustomDefinedValue(customProperties,customUndefinedValue);var bd=telemetryItem[strBaseData];if(Object(ts_utils.M)(bd))return _warnToConsole(logger,"Invalid input for dependency data"),null;var method=bd[strProperties]&&bd[strProperties][HttpMethod]?bd[strProperties][HttpMethod]:"GET",remoteDepData=new RemoteDependencyData_RemoteDependencyData(logger,bd.id,bd.target,bd[dist_es5_DynamicConstants_DYN_NAME],bd[STR_DURATION],bd.success,bd.responseCode,method,bd.type,bd.correlationContext,customProperties,customMeasurements),data=new Data(RemoteDependencyData_RemoteDependencyData[_DynamicConstants_DYN_DATA_TYPE],remoteDepData);return _createEnvelope(logger,RemoteDependencyData_RemoteDependencyData[_DynamicConstants_DYN_ENVELOPE_TYPE],telemetryItem,data)},Sender_b),Sender_Sender=function(_super){function Sender(){var _consecutiveErrors,_retryAt,_paused,_timeoutHandle,_serializer,_stamp_specific_redirects,_headers,_this=_super.call(this)||this;_this.priority=1001,_this.identifier="AppInsightsChannelPlugin";var _syncUnloadSender,_offlineListener,_evtNamespace,_endpointUrl,_orgEndpointUrl,_maxBatchSizeInBytes,_beaconSupported,_beaconOnUnloadSupported,_beaconNormalSupported,_customHeaders,_disableTelemetry,_instrumentationKey,_convertUndefined,_isRetryDisabled,_maxBatchInterval,_sessionStorageUsed,_bufferOverrideUsed,_namePrefix,_enableSendPromise,_alwaysUseCustomSend,_disableXhr,_fetchKeepAlive,_xhrSend,_fallbackSend,_disableBeaconSplit,_sendPostMgr,_retryCodes,_syncFetchPayload=0;return dynamicProto(Sender,_this,(function(_self,_base){function _xdrOnLoad(xdr,payload){var responseText=Sender_getResponseText(xdr);if(!xdr||responseText+""!="200"&&""!==responseText){var results=parseResponse(responseText);results&&results.itemsReceived&&results.itemsReceived>results.itemsAccepted&&!_isRetryDisabled?_self._onPartialSuccess(payload,results):_self._onError(payload,formatErrorMessageXdr(xdr))}else _consecutiveErrors=0,_self._onSuccess(payload,0)}function _xhrReadyStateChange(xhr,payload,countOfItemsInPayload){4===xhr.readyState&&_checkResponsStatus(xhr.status,payload,xhr.responseURL,countOfItemsInPayload,formatErrorMessageXhr(xhr),Sender_getResponseText(xhr)||xhr.response)}function _getPayloadArr(payload){try{if(payload){var arr=payload.oriPayload;return arr&&arr[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]?arr:null}}catch(e){}return null}function _validate(telemetryItem,diagLogger){return!_disableTelemetry&&(telemetryItem?telemetryItem.baseData&&!telemetryItem.baseType?(diagLogger&&DiagnosticLogger_throwInternal(diagLogger,1,70,"Cannot send telemetry without baseData and baseType"),!1):(telemetryItem.baseType||(telemetryItem.baseType="EventData"),_self._sender?function _isSampledIn(envelope){return _self._sample.isSampledIn(envelope)}(telemetryItem)?(telemetryItem[SampleRate]=_self._sample.sampleRate,!0):(diagLogger&&DiagnosticLogger_throwInternal(diagLogger,2,33,"Telemetry item was sampled out and not sent",{SampleRate:_self._sample.sampleRate}),!1):(diagLogger&&DiagnosticLogger_throwInternal(diagLogger,1,28,"Sender was not initialized"),!1)):(diagLogger&&DiagnosticLogger_throwInternal(diagLogger,1,7,"Cannot send empty telemetry"),!1))}function _getEnvelope(telemetryItem,diagLogger){var defaultEnvelopeIkey=telemetryItem.iKey||_instrumentationKey,aiEnvelope=Sender.constructEnvelope(telemetryItem,defaultEnvelopeIkey,diagLogger,_convertUndefined);if(aiEnvelope){var doNotSendItem=!1;if(telemetryItem[_DYN_TAGS]&&telemetryItem[_DYN_TAGS].ProcessLegacy&&(Object(ts_utils.b)(telemetryItem[_DYN_TAGS].ProcessLegacy,(function(callBack){try{callBack&&!1===callBack(aiEnvelope)&&(doNotSendItem=!0,_warnToConsole(diagLogger,"Telemetry processor check returns false"))}catch(e){DiagnosticLogger_throwInternal(diagLogger,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)},!0)}})),delete telemetryItem[_DYN_TAGS].ProcessLegacy),!doNotSendItem)return aiEnvelope}else DiagnosticLogger_throwInternal(diagLogger,1,47,"Unable to create an AppInsights envelope")}function _serialize(item){var rlt="",diagLogger=_self.diagLog();try{var valid=_validate(item,diagLogger),envelope=null;valid&&(envelope=_getEnvelope(item,diagLogger)),envelope&&(rlt=_serializer.serialize(envelope))}catch(e){}return rlt}function _batch(arr){var rlt="";return arr&&arr[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]&&(rlt="["+arr.join(",")+"]"),rlt}function _createPayload(data){var headers=_getHeaders();return{urlString:_endpointUrl,data:data,headers:headers}}function _doSend(sendInterface,payload,isAsync,markAsSent){void 0===markAsSent&&(markAsSent=!0);var payloadData=_getPayload(payload),sendPostFunc=sendInterface&&sendInterface.sendPOST;return sendPostFunc&&payloadData?(markAsSent&&_self._buffer.markAsSent(payload),sendPostFunc(payloadData,(function onComplete(status,headers,response){return function _getOnComplete(payload,status,headers,response){200===status&&payload?_self._onSuccess(payload,payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]):response&&_self._onError(payload,response)}(payload,status,0,response)}),!isAsync)):null}function _getPayload(payload){if(Object(ts_utils.E)(payload)&&payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0){var batch=_self._buffer.batchPayloads(payload),headers=_getHeaders();return{data:batch,urlString:_endpointUrl,headers:headers,disableXhrSync:_disableXhr,disableFetchKeepAlive:!_fetchKeepAlive,oriPayload:payload}}return null}function _getHeaders(){try{var headers=_headers||{};return isInternalApplicationInsightsEndpoint(_endpointUrl)&&(headers[RequestHeaders[6]]=RequestHeaders[7]),headers}catch(e){}return null}function _checkMaxSize(incomingPayload){var incomingSize=incomingPayload?incomingPayload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]:0;return _self._buffer.size()+incomingSize>_maxBatchSizeInBytes&&(_offlineListener&&!_offlineListener.isOnline()||_self.triggerSend(!0,null,10),!0)}function _checkResponsStatus(status,payload,responseUrl,countOfItemsInPayload,errorMessage,res){var response=null;if(_self._appId||(response=parseResponse(res))&&response.appId&&(_self._appId=response.appId),(status<200||status>=300)&&0!==status){if((301===status||307===status||308===status)&&!_checkAndUpdateEndPointUrl(responseUrl))return void _self._onError(payload,errorMessage);if(_offlineListener&&!_offlineListener.isOnline()){if(!_isRetryDisabled){_resendPayload(payload,10),DiagnosticLogger_throwInternal(_self.diagLog(),2,40,". Offline - Response Code: ".concat(status,". Offline status: ").concat(!_offlineListener.isOnline(),". Will retry to send ").concat(payload.length," items."))}return}!_isRetryDisabled&&_isRetriable(status)?(_resendPayload(payload),DiagnosticLogger_throwInternal(_self.diagLog(),2,40,". Response code "+status+". Will retry to send "+payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]+" items.")):_self._onError(payload,errorMessage)}else _checkAndUpdateEndPointUrl(responseUrl),206===status?(response||(response=parseResponse(res)),response&&!_isRetryDisabled?_self._onPartialSuccess(payload,response):_self._onError(payload,errorMessage)):(_consecutiveErrors=0,_self._onSuccess(payload,countOfItemsInPayload))}function _checkAndUpdateEndPointUrl(responseUrl){return!(_stamp_specific_redirects>=10)&&(!Object(ts_utils.M)(responseUrl)&&""!==responseUrl&&responseUrl!==_endpointUrl&&(_endpointUrl=responseUrl,++_stamp_specific_redirects,!0))}function _doUnloadSend(payload,isAsync){if(!_syncUnloadSender)return _doSend(_sendPostMgr&&_sendPostMgr.getSenderInst([3],!0),payload,isAsync);_syncUnloadSender(payload,!1)}function _isStringArr(arr){try{if(arr&&arr[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH])return Object(ts_utils.R)(arr[0])}catch(e){}return null}function _fetchKeepAliveSender(payload,isAsync){var transport=null;if(Object(ts_utils.E)(payload)){for(var payloadSize=payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH],lp=0;lp<payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];lp++)payloadSize+=payload[lp].item[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];return _sendPostMgr.getSyncFetchPayload()+payloadSize<=65e3?transport=2:isBeaconsSupported()?transport=3:(transport=1,DiagnosticLogger_throwInternal(_self.diagLog(),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),_doSend(_sendPostMgr&&_sendPostMgr.getSenderInst([transport],!0),payload,isAsync)}return null}function _resendPayload(payload,linearFactor){if(void 0===linearFactor&&(linearFactor=1),payload&&0!==payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]){var buffer=_self._buffer;buffer.clearSent(payload),_consecutiveErrors++;for(var _i=0,payload_1=payload;_i<payload_1.length;_i++){var item=payload_1[_i];item.cnt=item.cnt||0,item.cnt++,buffer.enqueue(item)}!function _setRetryTime(linearFactor){var delayInSeconds,SlotDelayInSeconds=10;if(_consecutiveErrors<=1)delayInSeconds=SlotDelayInSeconds;else{var backOffSlot=(Math.pow(2,_consecutiveErrors)-1)/2,backOffDelay=Object(ts_utils.W)(Math.random()*backOffSlot*SlotDelayInSeconds)+1;backOffDelay*=linearFactor,delayInSeconds=Object(ts_utils.X)(Object(ts_utils.Y)(backOffDelay,3600),SlotDelayInSeconds)}var retryAfterTimeSpan=Object(ts_utils.Eb)()+1e3*delayInSeconds;_retryAt=retryAfterTimeSpan}(linearFactor),_setupTimer()}}function _setupTimer(){if(!_timeoutHandle&&!_paused){var retryInterval=_retryAt?Object(ts_utils.X)(0,_retryAt-Object(ts_utils.Eb)()):0,timerValue=Object(ts_utils.X)(_maxBatchInterval,retryInterval);_timeoutHandle=Object(ts_utils.rb)((function(){_timeoutHandle=null,_self.triggerSend(!0,null,1)}),timerValue)}}function _clearScheduledTimer(){_timeoutHandle&&_timeoutHandle.cancel(),_timeoutHandle=null,_retryAt=null}function _isRetriable(statusCode){return Object(ts_utils.M)(_retryCodes)?401===statusCode||408===statusCode||429===statusCode||500===statusCode||502===statusCode||503===statusCode||504===statusCode:_retryCodes[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]&&_retryCodes.indexOf(statusCode)>-1}function _initDefaults(){_self._sender=null,_self._buffer=null,_self._appId=null,_self._sample=null,_headers={},_offlineListener=null,_consecutiveErrors=0,_retryAt=null,null,_paused=!1,_timeoutHandle=null,_serializer=null,_stamp_specific_redirects=0,_syncFetchPayload=0,_syncUnloadSender=null,_evtNamespace=null,_endpointUrl=null,_orgEndpointUrl=null,_maxBatchSizeInBytes=0,_beaconSupported=!1,_customHeaders=null,_disableTelemetry=!1,_instrumentationKey=null,_convertUndefined=undefined,_isRetryDisabled=!1,_sessionStorageUsed=null,_namePrefix=undefined,_disableXhr=!1,_fetchKeepAlive=!1,_disableBeaconSplit=!1,_xhrSend=null,_fallbackSend=null,_sendPostMgr=null,Object(ts_utils.eb)(_self,"_senderConfig",{g:function g(){return objExtend({},defaultAppInsightsChannelConfig)}})}_initDefaults(),_self.pause=function(){_clearScheduledTimer(),_paused=!0},_self.resume=function(){_paused&&(_paused=!1,_retryAt=null,_checkMaxSize(),_setupTimer())},_self.flush=function(isAsync,callBack,sendReason){if(void 0===isAsync&&(isAsync=!0),!_paused){_clearScheduledTimer();try{return _self.triggerSend(isAsync,null,sendReason||1)}catch(e){DiagnosticLogger_throwInternal(_self.diagLog(),1,22,"flush failed, telemetry will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}}},_self.onunloadFlush=function(){if(!_paused)if(_beaconSupported||_alwaysUseCustomSend)try{return _self.triggerSend(!0,_doUnloadSend,2)}catch(e){DiagnosticLogger_throwInternal(_self.diagLog(),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}else _self.flush(!1)},_self.addHeader=function(name,value){_headers[name]=value},_self.initialize=function(config,core,extensions,pluginChain){_self.isInitialized()&&DiagnosticLogger_throwInternal(_self.diagLog(),1,28,"Sender is already initialized"),_base.initialize(config,core,extensions,pluginChain);var identifier=_self.identifier;_serializer=new Serializer_Serializer(core.logger),_consecutiveErrors=0,_retryAt=null,0,_self._sender=null,_stamp_specific_redirects=0;var diagLog=_self.diagLog();_evtNamespace=mergeEvtNamespace(createUniqueNamespace("Sender"),core.evtNamespace&&core.evtNamespace()),_offlineListener=function createOfflineListener(parentEvtNamespace){var _document=Object(ts_utils.p)(),_navigator=Object(ts_utils.w)(),_isListening=!1,listenerList=[],rState=1;!_navigator||Object(ts_utils.M)(_navigator.onLine)||_navigator.onLine||(rState=2);var uState=0,_currentState=calCurrentState(),_evtNamespace=mergeEvtNamespace(createUniqueNamespace("OfflineListener"),parentEvtNamespace);try{if(_enableEvents(Object(ts_utils.y)())&&(_isListening=!0),_document){var target=_document.body||_document;target.ononline&&_enableEvents(target)&&(_isListening=!0)}}catch(e){_isListening=!1}function _enableEvents(target){var enabled=!1;return target&&(enabled=eventOn(target,"online",_setOnline,_evtNamespace))&&eventOn(target,"offline",_setOffline,_evtNamespace),enabled}function calCurrentState(){return 2!==uState&&2!==rState}function listnerNoticeCheck(){var newState=calCurrentState();_currentState!==newState&&(_currentState=newState,Object(ts_utils.b)(listenerList,(function(callback){var offlineState={isOnline:_currentState,rState:rState,uState:uState};try{callback(offlineState)}catch(e){}})))}function _setOnline(){rState=1,listnerNoticeCheck()}function _setOffline(){rState=2,listnerNoticeCheck()}return{isOnline:function _isOnline(){return _currentState},isListening:function isListening(){return _isListening},unload:function _unload(){var win=Object(ts_utils.y)();if(win&&_isListening){if(_disableEvents(win,_evtNamespace),_document){var target=_document.body||_document;Object(ts_utils.T)(target.ononline)||_disableEvents(target,_evtNamespace)}_isListening=!1}},addListener:function addListener(callback){return listenerList.push(callback),{rm:function rm(){var index=listenerList.indexOf(callback);return index>-1?listenerList.splice(index,1):void 0}}},setOnlineState:function setOnlineState(newState){uState=newState,listnerNoticeCheck()}}}(_evtNamespace),_self._addHook(onConfigChange(config,(function(details){var config=details.cfg;config.storagePrefix&&utlSetStoragePrefix(config.storagePrefix);var senderConfig=createProcessTelemetryContext(null,config,core).getExtCfg(identifier,defaultAppInsightsChannelConfig),curExtUrl=senderConfig.endpointUrl;if(_endpointUrl&&curExtUrl===_endpointUrl){var coreUrl=config.endpointUrl;coreUrl&&coreUrl!==curExtUrl&&(senderConfig.endpointUrl=coreUrl)}Object(ts_utils.Q)(senderConfig.instrumentationKey)&&(senderConfig.instrumentationKey=config.instrumentationKey),Object(ts_utils.eb)(_self,"_senderConfig",{g:function g(){return senderConfig}}),_orgEndpointUrl!==senderConfig.endpointUrl&&(_endpointUrl=_orgEndpointUrl=senderConfig.endpointUrl),core.activeStatus()===ActiveStatus.PENDING?_self.pause():core.activeStatus()===ActiveStatus.ACTIVE&&_self.resume(),_customHeaders&&_customHeaders!==senderConfig.customHeaders&&Object(ts_utils.b)(_customHeaders,(function(customHeader){delete _headers[customHeader.header]})),_maxBatchSizeInBytes=senderConfig.maxBatchSizeInBytes,_beaconSupported=(!1===senderConfig.onunloadDisableBeacon||!1===senderConfig.isBeaconApiDisabled)&&isBeaconsSupported(),_beaconOnUnloadSupported=!1===senderConfig.onunloadDisableBeacon&&isBeaconsSupported(),_beaconNormalSupported=!1===senderConfig.isBeaconApiDisabled&&isBeaconsSupported(),_alwaysUseCustomSend=senderConfig.alwaysUseXhrOverride,_disableXhr=!!senderConfig.disableXhr,_retryCodes=senderConfig.retryCodes;var bufferOverride=senderConfig.bufferOverride,canUseSessionStorage=!!senderConfig.enableSessionStorageBuffer&&(!!bufferOverride||utlCanUseSessionStorage()),namePrefix=senderConfig.namePrefix,shouldUpdate=canUseSessionStorage!==_sessionStorageUsed||canUseSessionStorage&&_namePrefix!==namePrefix||canUseSessionStorage&&_bufferOverrideUsed!==bufferOverride;if(_self._buffer){if(shouldUpdate)try{_self._buffer=_self._buffer.createNew(diagLog,senderConfig,canUseSessionStorage)}catch(e){DiagnosticLogger_throwInternal(_self.diagLog(),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}_checkMaxSize()}else _self._buffer=canUseSessionStorage?new SendBuffer_SessionStorageSendBuffer(diagLog,senderConfig):new SendBuffer_ArraySendBuffer(diagLog,senderConfig);_namePrefix=namePrefix,_sessionStorageUsed=canUseSessionStorage,_bufferOverrideUsed=bufferOverride,_fetchKeepAlive=!senderConfig.onunloadDisableFetch&&isFetchSupported(!0),_disableBeaconSplit=!!senderConfig.disableSendBeaconSplit,_self._sample=new Sample_Sample(senderConfig.samplingPercentage,diagLog),_instrumentationKey=senderConfig.instrumentationKey,Object(ts_utils.Q)(_instrumentationKey)||function _validateInstrumentationKey(instrumentationKey,config){var disableValidation=config.disableInstrumentationKeyValidation;if(!Object(ts_utils.M)(disableValidation)&&disableValidation)return!0;return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(instrumentationKey)}(_instrumentationKey,config)||DiagnosticLogger_throwInternal(diagLog,1,100,"Invalid Instrumentation key "+_instrumentationKey),_customHeaders=senderConfig.customHeaders,Object(ts_utils.R)(_endpointUrl)&&!isInternalApplicationInsightsEndpoint(_endpointUrl)&&_customHeaders&&_customHeaders[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0?Object(ts_utils.b)(_customHeaders,(function(customHeader){_this.addHeader(customHeader.header,customHeader.value)})):_customHeaders=null,_enableSendPromise=senderConfig.enableSendPromise;var sendPostConfig=function _getSendPostMgrConfig(){try{return{enableSendPromise:_enableSendPromise,isOneDs:!1,disableCredentials:!1,disableXhr:_disableXhr,disableBeacon:!_beaconNormalSupported,disableBeaconSync:!_beaconOnUnloadSupported,senderOnCompleteCallBack:{xdrOnComplete:function xdrOnComplete(xdr,oncomplete,payload){var data=_getPayloadArr(payload);if(data)return _xdrOnLoad(xdr,data)},fetchOnComplete:function fetchOnComplete(response,onComplete,resValue,payload){var data=_getPayloadArr(payload);if(data)return _checkResponsStatus(response.status,data,response.url,data[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH],response.statusText,resValue||"")},xhrOnComplete:function xhrOnComplete(request,oncomplete,payload){var data=_getPayloadArr(payload);if(data)return _xhrReadyStateChange(request,data,data[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH])},beaconOnRetry:function beaconOnRetry(data,onComplete,canSend){return function _onBeaconRetry(payload,onComplete,canSend){var internalPayload=payload,data=internalPayload&&internalPayload.oriPayload;if(_disableBeaconSplit)_fallbackSend&&_fallbackSend(data,!0),DiagnosticLogger_throwInternal(_self.diagLog(),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var droppedPayload=[],lp=0;lp<data[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH];lp++){var thePayload=data[lp],arr=[thePayload];canSend(_getPayload(arr),onComplete)?_self._onSuccess(arr,arr[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]):droppedPayload.push(thePayload)}droppedPayload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&(_fallbackSend&&_fallbackSend(droppedPayload,!0),DiagnosticLogger_throwInternal(_self.diagLog(),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}(data,onComplete,canSend)}}}}catch(e){}return null}();_sendPostMgr?_sendPostMgr.SetConfig(sendPostConfig):(_sendPostMgr=new SenderPostManager_SenderPostManager).initialize(sendPostConfig,diagLog);var customInterface=senderConfig.httpXHROverride,httpInterface=null,syncInterface=null,theTransports=prependTransports([3,1,2],senderConfig.transports);httpInterface=_sendPostMgr&&_sendPostMgr.getSenderInst(theTransports,!1);var xhrInterface=_sendPostMgr&&_sendPostMgr.getFallbackInst();_xhrSend=function _xhrSend(payload,isAsync){return _doSend(xhrInterface,payload,isAsync)},_fallbackSend=function _fallbackSend(payload,isAsync){return _doSend(xhrInterface,payload,isAsync,!1)},httpInterface=_alwaysUseCustomSend?customInterface:httpInterface||customInterface||xhrInterface,_self._sender=function(payload,isAsync){return _doSend(httpInterface,payload,isAsync)},_fetchKeepAlive&&(_syncUnloadSender=_fetchKeepAliveSender);var syncTransports=prependTransports([3,1],senderConfig.unloadTransports);_fetchKeepAlive||(syncTransports=syncTransports.filter((function(transport){return 2!==transport}))),syncInterface=_sendPostMgr&&_sendPostMgr.getSenderInst(syncTransports,!0),syncInterface=_alwaysUseCustomSend?customInterface:syncInterface||customInterface,(_alwaysUseCustomSend||senderConfig.unloadTransports||!_syncUnloadSender)&&syncInterface&&(_syncUnloadSender=function _syncUnloadSender(payload,isAsync){return _doSend(syncInterface,payload,isAsync)}),_syncUnloadSender||(_syncUnloadSender=_xhrSend),_disableTelemetry=senderConfig.disableTelemetry,_convertUndefined=senderConfig.convertUndefined||undefined,_isRetryDisabled=senderConfig.isRetryDisabled,_maxBatchInterval=senderConfig.maxBatchInterval})))},_self.processTelemetry=function(telemetryItem,itemCtx){var diagLogger=(itemCtx=_self._getTelCtx(itemCtx)).diagLog();try{if(!_validate(telemetryItem,diagLogger))return;var aiEnvelope=_getEnvelope(telemetryItem,diagLogger);if(!aiEnvelope)return;var payload=_serializer.serialize(aiEnvelope),buffer=_self._buffer;_checkMaxSize(payload);var payloadItem={item:payload,cnt:0};buffer.enqueue(payloadItem),_setupTimer()}catch(e){DiagnosticLogger_throwInternal(diagLogger,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}_self.processNext(telemetryItem,itemCtx)},_self.isCompletelyIdle=function(){return!_paused&&0===_syncFetchPayload&&0===_self._buffer.count()},_self.getOfflineListener=function(){return _offlineListener},_self._xhrReadyStateChange=function(xhr,payload,countOfItemsInPayload){if(!_isStringArr(payload))return _xhrReadyStateChange(xhr,payload,countOfItemsInPayload)},_self.triggerSend=function(async,forcedSender,sendReason){var result;if(void 0===async&&(async=!0),!_paused)try{var buffer=_self._buffer;if(_disableTelemetry)buffer.clear();else{if(buffer.count()>0){var payload=buffer.getItems();!function _notifySendRequest(sendRequest,isAsync){var manager=function _getNotifyMgr(){var func="getNotifyMgr";if(_self.core[func])return _self.core[func]();return _self.core._notificationManager}();if(manager&&manager.eventsSendRequest)try{manager.eventsSendRequest(sendRequest,isAsync)}catch(e){DiagnosticLogger_throwInternal(_self.diagLog(),1,74,"send request notification failed: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}}(sendReason||0,async),result=forcedSender?forcedSender.call(_self,payload,async):_self._sender(payload,async)}+new Date}_clearScheduledTimer()}catch(e){var ieVer=getIEVersion();(!ieVer||ieVer>9)&&DiagnosticLogger_throwInternal(_self.diagLog(),1,40,"Telemetry transmission failed, some telemetry will be lost: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return result},_self.getOfflineSupport=function(){return{getUrl:function getUrl(){return _endpointUrl},createPayload:_createPayload,serialize:_serialize,batch:_batch,shouldProcess:function shouldProcess(evt){return!!_validate(evt)}}},_self._doTeardown=function(unloadCtx,unloadState){_self.onunloadFlush(),runTargetUnload(_offlineListener,!1),_initDefaults()},_self._onError=function(payload,message,event){if(!_isStringArr(payload))return function _onError(payload,message,event){DiagnosticLogger_throwInternal(_self.diagLog(),2,26,"Failed to send telemetry.",{message:message}),_self._buffer&&_self._buffer.clearSent(payload)}(payload,message)},_self._onPartialSuccess=function(payload,results){if(!_isStringArr(payload))return function _onPartialSuccess(payload,results){for(var failed=[],retry=[],errors=results.errors.reverse(),_i=0,errors_1=errors;_i<errors_1.length;_i++){var error=errors_1[_i],extracted=payload.splice(error.index,1)[0];_isRetriable(error.statusCode)?retry.push(extracted):failed.push(extracted)}payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&_self._onSuccess(payload,results.itemsAccepted);failed[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&_self._onError(failed,formatErrorMessageXhr(null,["partial success",results.itemsAccepted,"of",results.itemsReceived].join(" ")));retry[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&(_resendPayload(retry),DiagnosticLogger_throwInternal(_self.diagLog(),2,40,"Partial success. Delivered: "+payload[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]+", Failed: "+failed[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]+". Will retry to send "+retry[applicationinsights_channel_js_dist_es5_DynamicConstants_DYN_LENGTH]+" our of "+results.itemsReceived+" items"))}(payload,results)},_self._onSuccess=function(payload,countOfItemsInPayload){if(!_isStringArr(payload))return function _onSuccess(payload,countOfItemsInPayload){_self._buffer&&_self._buffer.clearSent(payload)}(payload)},_self._xdrOnLoad=function(xdr,payload){if(!_isStringArr(payload))return _xdrOnLoad(xdr,payload)}})),_this}return Object(TsLibShims.b)(Sender,_super),Sender.constructEnvelope=function(orig,iKey,logger,convertUndefined){var envelope;return envelope=iKey===orig.iKey||Object(ts_utils.M)(iKey)?orig:Object(TsLibShims.a)(Object(TsLibShims.a)({},orig),{iKey:iKey}),(EnvelopeTypeCreator[envelope.baseType]||EventEnvelopeCreator)(logger,envelope,convertUndefined)},Sender}(BaseTelemetryPlugin_BaseTelemetryPlugin),_FIELDS_SEPARATOR=";",_FIELD_KEY_VALUE_SEPARATOR="=";function parseConnectionString(connectionString){if(!connectionString)return{};var kvPairs=connectionString[_DynamicConstants_DYN_SPLIT](_FIELDS_SEPARATOR),result=Object(ts_utils.e)(kvPairs,(function(fields,kv){var kvParts=kv[_DynamicConstants_DYN_SPLIT](_FIELD_KEY_VALUE_SEPARATOR);if(2===kvParts[_DynamicConstants_DYN_LENGTH]){var key=kvParts[0][_DynamicConstants_DYN_TO_LOWER_CASE](),value=kvParts[1];fields[key]=value}return fields}),{});if(Object(ts_utils.nb)(result)[_DynamicConstants_DYN_LENGTH]>0){if(result.endpointsuffix){var locationPrefix=result.location?result.location+".":"";result[_DYN_INGESTIONENDPOINT]=result[_DYN_INGESTIONENDPOINT]||"https://"+locationPrefix+"dc."+result.endpointsuffix}result[_DYN_INGESTIONENDPOINT]=result[_DYN_INGESTIONENDPOINT]||DEFAULT_BREEZE_ENDPOINT,Object(ts_utils.tb)(result[_DYN_INGESTIONENDPOINT],"/")&&(result[_DYN_INGESTIONENDPOINT]=result[_DYN_INGESTIONENDPOINT].slice(0,-1))}return result}var ThrottleMgr_ThrottleMgr=function ThrottleMgr(core,namePrefix){var _canUseLocalStorage,_logger,_config,_localStorageObj,_isTriggered,_namePrefix,_queue,_self=this,_isReady=!1,_isSpecificDaysGiven=!1;function _flushMessage(msgID,message,severity,saveUnsentMsg){if(_isReady){var isSampledIn=function _canSampledIn(msgID){try{var cfg=_getCfgByKey(msgID);return function randomValue(maxValue){return maxValue>0?Object(ts_utils.W)(random32()/MaxUInt32*(maxValue+1))>>>0:0}(1e6)<=cfg.limit.samplingRate}catch(e){}return!1}(msgID);if(!isSampledIn)return;var cfg=_getCfgByKey(msgID),localStorageObj=_getLocalStorageObjByKey(msgID),canThrottle=_canThrottle(cfg,_canUseLocalStorage,localStorageObj),throttled=!1,number=0,isTriggered=_isTrigger(msgID);try{canThrottle&&!isTriggered?(number=Object(ts_utils.Y)(cfg.limit.maxSendNumber,localStorageObj.count+1),localStorageObj.count=0,throttled=!0,_isTriggered[msgID]=!0,localStorageObj.preTriggerDate=new Date):(_isTriggered[msgID]=canThrottle,localStorageObj.count+=1);var localStorageName=_getLocalStorageName(msgID);_resetLocalStorage(_logger,localStorageName,localStorageObj);for(var i=0;i<number;i++)_sendMessage(msgID,_logger,message,severity)}catch(e){}return{isThrottled:throttled,throttleNum:number}}return saveUnsentMsg&&_getQueueByKey(msgID).push({msgID:msgID,message:message,severity:severity}),null}function _getCfgByKey(msgID){return _config[msgID]||_config[109]}function _setCfgByKey(msgID,config){var _a,_b;try{var cfg=config||{},curCfg={};curCfg.disabled=!!cfg.disabled;var configInterval=cfg.interval||{};_isSpecificDaysGiven=(null==configInterval?void 0:configInterval.daysOfMonth)&&(null==configInterval?void 0:configInterval.daysOfMonth[_DynamicConstants_DYN_LENGTH])>0,curCfg.interval=function _getIntervalConfig(interval){var monthInterval=null===(interval=interval||{})||void 0===interval?void 0:interval.monthInterval,dayInterval=null==interval?void 0:interval.dayInterval;return Object(ts_utils.M)(monthInterval)&&Object(ts_utils.M)(dayInterval)&&(interval.monthInterval=3,_isSpecificDaysGiven||(interval.daysOfMonth=[28],_isSpecificDaysGiven=!0)),interval={monthInterval:null==interval?void 0:interval.monthInterval,dayInterval:null==interval?void 0:interval.dayInterval,daysOfMonth:null==interval?void 0:interval.daysOfMonth}}(configInterval);var limit={samplingRate:(null===(_a=cfg.limit)||void 0===_a?void 0:_a.samplingRate)||100,maxSendNumber:(null===(_b=cfg.limit)||void 0===_b?void 0:_b.maxSendNumber)||1};curCfg.limit=limit,_config[msgID]=curCfg}catch(e){}}function _canThrottle(config,canUseLocalStorage,localStorageObj){if(config&&!config.disabled&&canUseLocalStorage&&isNotNullOrUndefined(localStorageObj)){var curDate=_getThrottleDate(),date=localStorageObj.date,interval=config.interval,monthCheck=1;if(null==interval?void 0:interval.monthInterval){var monthExpand=12*(curDate.getUTCFullYear()-date.getUTCFullYear())+curDate.getUTCMonth()-date.getUTCMonth();monthCheck=_checkInterval(interval.monthInterval,0,monthExpand)}var dayCheck=1;if(_isSpecificDaysGiven)dayCheck=Object(ts_utils.c)(interval.daysOfMonth,curDate.getUTCDate());else if(null==interval?void 0:interval.dayInterval){var daySpan=Object(ts_utils.W)((curDate.getTime()-date.getTime())/864e5);dayCheck=_checkInterval(interval.dayInterval,0,daySpan)}return monthCheck>=0&&dayCheck>=0}return!1}function _getLocalStorageName(msgKey,prefix){var fix=isNotNullOrUndefined(prefix)?prefix:"";return msgKey?"appInsightsThrottle"+fix+"-"+msgKey:null}function _getThrottleDate(dateStr){try{if(!dateStr)return new Date;var date=new Date(dateStr);if(!isNaN(date.getDate()))return date}catch(e){}return null}function _resetLocalStorage(logger,storageName,obj){try{return utlSetLocalStorage(logger,storageName,Object(ts_utils.zb)(JSON[_DYN_STRINGIFY](obj)))}catch(e){}return!1}function _checkInterval(interval,start,current){return interval<=0?1:current>=start&&(current-start)%interval==0?Object(ts_utils.W)((current-start)/interval)+1:-1}function _sendMessage(msgID,logger,message,severity){DiagnosticLogger_throwInternal(logger,severity||1,msgID,message)}function _getLocalStorageObjByKey(key){try{var curObj=_localStorageObj[key];if(!curObj){var localStorageName=_getLocalStorageName(key,_namePrefix);curObj=function _getLocalStorageObj(value,logger,storageName){try{var storageObj={date:_getThrottleDate(),count:0};if(value){var obj=JSON.parse(value);return{date:_getThrottleDate(obj.date)||storageObj.date,count:obj.count||storageObj.count,preTriggerDate:obj.preTriggerDate?_getThrottleDate(obj.preTriggerDate):void 0}}return _resetLocalStorage(logger,storageName,storageObj),storageObj}catch(e){}return null}(utlGetLocalStorage(_logger,localStorageName),_logger,localStorageName),_localStorageObj[key]=curObj}return _localStorageObj[key]}catch(e){}return null}function _isTrigger(key){var isTrigger=_isTriggered[key];if(Object(ts_utils.M)(isTrigger)){isTrigger=!1;var localStorageObj=_getLocalStorageObjByKey(key);localStorageObj&&(isTrigger=function _isTriggeredOnCurDate(preTriggerDate){try{if(preTriggerDate){var curDate=new Date;return preTriggerDate.getUTCFullYear()===curDate.getUTCFullYear()&&preTriggerDate.getUTCMonth()===curDate.getUTCMonth()&&preTriggerDate.getUTCDate()===curDate.getUTCDate()}}catch(e){}return!1}(localStorageObj.preTriggerDate)),_isTriggered[key]=isTrigger}return _isTriggered[key]}function _getQueueByKey(key){return _queue=_queue||{},Object(ts_utils.M)(_queue[key])&&(_queue[key]=[]),_queue[key]}!function _initConfig(){_logger=safeGetLogger(core),_isTriggered={},_localStorageObj={},_queue={},_config={},_setCfgByKey(109),_namePrefix=isNotNullOrUndefined(namePrefix)?namePrefix:"",core.addUnloadHook(onConfigChange(core.config,(function(details){var coreConfig=details.cfg;_canUseLocalStorage=utlCanUseLocalStorage();var configMgr=coreConfig.throttleMgrCfg||{};Object(ts_utils.ib)(configMgr,(function(key,cfg){_setCfgByKey(parseInt(key),cfg)}))})))}(),_self._getDbgPlgTargets=function(){return[_queue]},_self.getConfig=function(){return _config},_self.canThrottle=function(msgId){var localObj=_getLocalStorageObjByKey(msgId);return _canThrottle(_getCfgByKey(msgId),_canUseLocalStorage,localObj)},_self.isTriggered=function(msgId){return _isTrigger(msgId)},_self.isReady=function(){return _isReady},_self.flush=function(msgId){try{var queue=_getQueueByKey(msgId);if(queue&&queue[_DynamicConstants_DYN_LENGTH]>0){var items=queue.slice(0);return _queue[msgId]=[],Object(ts_utils.b)(items,(function(item){_flushMessage(item.msgID,item[_DynamicConstants_DYN_MESSAGE],item.severity,!1)})),!0}}catch(err){}return!1},_self.flushAll=function(){try{if(_queue){var result_1=!0;return Object(ts_utils.ib)(_queue,(function(key){var isFlushed=_self.flush(parseInt(key));result_1=result_1&&isFlushed})),result_1}}catch(err){}return!1},_self.onReadyState=function(isReady,flushAll){return void 0===flushAll&&(flushAll=!0),(_isReady=!!Object(ts_utils.M)(isReady)||isReady)&&flushAll?_self.flushAll():null},_self.sendMessage=function(msgID,message,severity){return _flushMessage(msgID,message,severity,!0)}},NotificationManager_defaultValues={perfEvtsSendAll:!1};function _runScheduledListeners(asyncNotifications){asyncNotifications.h=null;var callbacks=asyncNotifications.cb;asyncNotifications.cb=[],Object(ts_utils.b)(callbacks,(function(cb){Object(ts_utils.pb)(cb.fn,[cb.arg])}))}function _runListeners(listeners,name,asyncNotifications,callback){Object(ts_utils.b)(listeners,(function(listener){listener&&listener[name]&&(asyncNotifications?(asyncNotifications.cb[_DYN_PUSH]({fn:callback,arg:listener}),asyncNotifications.h=asyncNotifications.h||Object(ts_utils.rb)(_runScheduledListeners,0,asyncNotifications)):Object(ts_utils.pb)(callback,[listener]))}))}var NotificationManager_NotificationManager=function(){function NotificationManager(config){var perfEvtsSendAll,unloadHandler;this.listeners=[];var _listeners=[],_asyncNotifications={h:null,cb:[]},cfgHandler=createDynamicConfig(config,NotificationManager_defaultValues);unloadHandler=cfgHandler[_DYN_WATCH]((function(details){perfEvtsSendAll=!!details.cfg.perfEvtsSendAll})),dynamicProto(NotificationManager,this,(function(_self){Object(ts_utils.eb)(_self,"listeners",{g:function g(){return _listeners}}),_self[_DYN_ADD_NOTIFICATION_LIS1]=function(listener){_listeners[_DYN_PUSH](listener)},_self[_DYN_REMOVE_NOTIFICATION_0]=function(listener){for(var index=Object(ts_utils.c)(_listeners,listener);index>-1;)_listeners[_DYN_SPLICE](index,1),index=Object(ts_utils.c)(_listeners,listener)},_self.eventsSent=function(events){_runListeners(_listeners,"eventsSent",_asyncNotifications,(function(listener){listener.eventsSent(events)}))},_self.eventsDiscarded=function(events,reason){_runListeners(_listeners,"eventsDiscarded",_asyncNotifications,(function(listener){listener.eventsDiscarded(events,reason)}))},_self.eventsSendRequest=function(sendReason,isAsync){_runListeners(_listeners,"eventsSendRequest",isAsync?_asyncNotifications:null,(function(listener){listener.eventsSendRequest(sendReason,isAsync)}))},_self.perfEvent=function(perfEvent){perfEvent&&(!perfEvtsSendAll&&perfEvent.isChildEvt()||_runListeners(_listeners,"perfEvent",null,(function(listener){perfEvent.isAsync?Object(ts_utils.rb)((function(){return listener.perfEvent(perfEvent)}),0):listener.perfEvent(perfEvent)})))},_self.offlineEventsStored=function(events){events&&events[_DYN_LENGTH]&&_runListeners(_listeners,"offlineEventsStored",_asyncNotifications,(function(listener){listener.offlineEventsStored(events)}))},_self.offlineBatchSent=function(batch){batch&&batch.data&&_runListeners(_listeners,"offlineBatchSent",_asyncNotifications,(function(listener){listener.offlineBatchSent(batch)}))},_self.offlineBatchDrop=function(cnt,reason){if(cnt>0){var rn_1=reason||0;_runListeners(_listeners,"offlineBatchDrop",_asyncNotifications,(function(listener){listener.offlineBatchDrop(cnt,rn_1)}))}},_self[_DYN_UNLOAD]=function(isAsync){var waiting,_finishUnload=function _finishUnload(){unloadHandler&&unloadHandler.rm(),unloadHandler=null,_listeners=[],_asyncNotifications.h&&_asyncNotifications.h[_DYN_CANCEL](),_asyncNotifications.h=null,_asyncNotifications.cb=[]};if(_runListeners(_listeners,"unload",null,(function(listener){var asyncUnload=listener[_DYN_UNLOAD](isAsync);asyncUnload&&(waiting||(waiting=[]),waiting[_DYN_PUSH](asyncUnload))})),waiting)return Object(ts_async.b)((function(resolve){return Object(ts_async.e)(Object(ts_async.a)(waiting),(function(){_finishUnload(),resolve()}))}));_finishUnload()}}))}return NotificationManager.__ieDyn=1,NotificationManager}();var AppInsightsCore_a,TelemetryInitializerPlugin_TelemetryInitializerPlugin=function(_super){function TelemetryInitializerPlugin(){var _id,_initializers,_this=_super.call(this)||this;function _initDefaults(){_id=0,_initializers=[]}return _this.identifier="TelemetryInitializerPlugin",_this.priority=199,_initDefaults(),dynamicProto(TelemetryInitializerPlugin,_this,(function(_self,_base){_self.addTelemetryInitializer=function(telemetryInitializer){return function _addInitializer(_initializers,id,telemetryInitializer){var theInitializer={id:id,fn:telemetryInitializer};return Object(ts_utils.a)(_initializers,theInitializer),{remove:function remove(){Object(ts_utils.b)(_initializers,(function(initializer,idx){if(initializer.id===theInitializer.id)return _initializers[_DYN_SPLICE](idx,1),-1}))}}}(_initializers,_id++,telemetryInitializer)},_self[STR_PROCESS_TELEMETRY]=function(item,itemCtx){(function _runInitializers(_initializers,item,logger){for(var doNotSendItem=!1,telemetryInitializersCount=_initializers[_DYN_LENGTH],i=0;i<telemetryInitializersCount;++i){var telemetryInitializer=_initializers[i];if(telemetryInitializer)try{if(!1===telemetryInitializer.fn[_DYN_APPLY](null,[item])){doNotSendItem=!0;break}}catch(e){DiagnosticLogger_throwInternal(logger,2,64,"Telemetry initializer failed: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)},!0)}}return!doNotSendItem})(_initializers,item,itemCtx?itemCtx[_DYN_DIAG_LOG]():_self[_DYN_DIAG_LOG]())&&_self[_DYN_PROCESS_NEXT](item,itemCtx)},_self[_DYN__DO_TEARDOWN]=function(){_initDefaults()}})),_this}return Object(TsLibShims.b)(TelemetryInitializerPlugin,_super),TelemetryInitializerPlugin.__ieDyn=1,TelemetryInitializerPlugin}(BaseTelemetryPlugin_BaseTelemetryPlugin),strValidationError="Plugins must provide initialize method",AppInsightsCore_defaultConfig=Object(ts_utils.db)(((AppInsightsCore_a={cookieCfg:{}}).extensions={rdOnly:!0,ref:!0,v:[]},AppInsightsCore_a.channels={rdOnly:!0,ref:!0,v:[]},AppInsightsCore_a[STR_EXTENSION_CONFIG]={ref:!0,v:{}},AppInsightsCore_a.createPerfMgr=UNDEFINED_VALUE,AppInsightsCore_a.loggingLevelConsole=0,AppInsightsCore_a.diagnosticLogInterval=UNDEFINED_VALUE,AppInsightsCore_a));function _createPerfManager(core,notificationMgr){return new PerfManager_PerfManager(notificationMgr)}function _isPluginPresent(thePlugin,plugins){var exists=!1;return Object(ts_utils.b)(plugins,(function(plugin){if(plugin===thePlugin)return exists=!0,-1})),exists}function _deepMergeConfig(details,target,newValues,merge){newValues&&Object(ts_utils.ib)(newValues,(function(key,value){merge&&Object(ts_utils.P)(value)&&Object(ts_utils.P)(target[key])&&_deepMergeConfig(details,target[key],value,merge),merge&&Object(ts_utils.P)(value)&&Object(ts_utils.P)(target[key])?_deepMergeConfig(details,target[key],value,merge):details.set(target,key,value)}))}function _findWatcher(listeners,newWatcher){var theListener=null,idx=-1;return Object(ts_utils.b)(listeners,(function(listener,lp){if(listener.w===newWatcher)return theListener=listener,idx=lp,-1})),{i:idx,l:theListener}}function _initDebugListener(configHandler,unloadContainer,notificationManager,debugListener){return unloadContainer.add(configHandler[_DYN_WATCH]((function(details){var disableDbgExt=details.cfg.disableDbgExt;!0===disableDbgExt&&debugListener&&(notificationManager[_DYN_REMOVE_NOTIFICATION_0](debugListener),debugListener=null),notificationManager&&!debugListener&&!0!==disableDbgExt&&(debugListener=function getDebugListener(config){if(!DbgExtensionUtils_debugListener){DbgExtensionUtils_debugListener={};for(var lp=0;lp<listenerFuncs[_DYN_LENGTH];lp++)DbgExtensionUtils_debugListener[listenerFuncs[lp]]=_listenerProxyFunc(listenerFuncs[lp],config)}return DbgExtensionUtils_debugListener}(details.cfg),notificationManager[_DYN_ADD_NOTIFICATION_LIS1](debugListener))}))),debugListener}var AppInsightsCore_AppInsightsCore=function(){function AppInsightsCore(){var _configHandler,_isInitialized,_logger,_eventQueue,_notificationManager,_perfManager,_cfgPerfManager,_cookieManager,_pluginChain,_configExtensions,_channelConfig,_channels,_isUnloading,_telemetryInitializerPlugin,_internalLogsEventName,_evtNamespace,_unloadHandlers,_hookContainer,_debugListener,_traceCtx,_instrumentationKey,_cfgListeners,_extensions,_pluginVersionStringArr,_pluginVersionString,_activeStatus,_endpoint,_initInMemoMaxSize,_isStatusSet,_internalLogPoller,_internalLogPollerListening,_forceStopInternalLogPoller;dynamicProto(AppInsightsCore,this,(function(_self){function _setStatus(){_isStatusSet=!0,Object(ts_utils.M)(_instrumentationKey)?(_activeStatus=ActiveStatus.INACTIVE,DiagnosticLogger_throwInternal(_logger,1,112,"ikey can't be resolved from promises")):_activeStatus=ActiveStatus.ACTIVE,_releaseQueues()}function _releaseQueues(){_isInitialized&&(_self.releaseQueue(),_self.pollInternalLogs())}function _startLogPoller(alwaysStart){_internalLogPoller&&_internalLogPoller[_DYN_ENABLED]||_forceStopInternalLogPoller||(alwaysStart||_logger&&_logger.queue[_DYN_LENGTH]>0)&&(_internalLogPollerListening||(_internalLogPollerListening=!0,_addUnloadHook(_configHandler[_DYN_WATCH]((function(details){var interval=details.cfg.diagnosticLogInterval;interval&&interval>0||(interval=1e4);var isRunning=!1;_internalLogPoller&&(isRunning=_internalLogPoller[_DYN_ENABLED],_internalLogPoller[_DYN_CANCEL]()),(_internalLogPoller=Object(ts_utils.k)(_flushInternalLogs,interval)).unref(),_internalLogPoller[_DYN_ENABLED]=isRunning})))),_internalLogPoller[_DYN_ENABLED]=!0);return _internalLogPoller}function _setPluginVersions(){var thePlugins={};_pluginVersionStringArr=[];var _addPluginVersions=function _addPluginVersions(plugins){plugins&&Object(ts_utils.b)(plugins,(function(plugin){if(plugin[_DYN_IDENTIFIER]&&plugin[_DYN_VERSION]&&!thePlugins[plugin.identifier]){var ver=plugin[_DYN_IDENTIFIER]+"="+plugin[_DYN_VERSION];_pluginVersionStringArr[_DYN_PUSH](ver),thePlugins[plugin.identifier]=plugin}}))};_addPluginVersions(_channels),_channelConfig&&Object(ts_utils.b)(_channelConfig,(function(channels){_addPluginVersions(channels)})),_addPluginVersions(_configExtensions)}function _initDefaults(){_isInitialized=!1,(_configHandler=createDynamicConfig({},AppInsightsCore_defaultConfig,_self[_DYN_LOGGER])).cfg.loggingLevelConsole=1,Object(ts_utils.eb)(_self,"config",{g:function g(){return _configHandler.cfg},s:function s(newValue){_self.updateCfg(newValue,!1)}}),Object(ts_utils.eb)(_self,"pluginVersionStringArr",{g:function g(){return _pluginVersionStringArr||_setPluginVersions(),_pluginVersionStringArr}}),Object(ts_utils.eb)(_self,"pluginVersionString",{g:function g(){return _pluginVersionString||(_pluginVersionStringArr||_setPluginVersions(),_pluginVersionString=_pluginVersionStringArr.join(";")),_pluginVersionString||STR_EMPTY}}),Object(ts_utils.eb)(_self,"logger",{g:function g(){return _logger||(_logger=new DiagnosticLogger_DiagnosticLogger(_configHandler.cfg),_configHandler[_DYN_LOGGER]=_logger),_logger},s:function s(newLogger){_configHandler[_DYN_LOGGER]=newLogger,_logger!==newLogger&&(runTargetUnload(_logger,!1),_logger=newLogger)}}),_self[_DYN_LOGGER]=new DiagnosticLogger_DiagnosticLogger(_configHandler.cfg),_extensions=[];var cfgExtensions=_self.config.extensions||[];cfgExtensions.splice(0,cfgExtensions[_DYN_LENGTH]),Object(ts_utils.a)(cfgExtensions,_extensions),_telemetryInitializerPlugin=new TelemetryInitializerPlugin_TelemetryInitializerPlugin,_eventQueue=[],runTargetUnload(_notificationManager,!1),_notificationManager=null,_perfManager=null,_cfgPerfManager=null,runTargetUnload(_cookieManager,!1),_cookieManager=null,_pluginChain=null,_configExtensions=[],_channelConfig=null,_channels=null,_isUnloading=!1,_internalLogsEventName=null,_evtNamespace=createUniqueNamespace("AIBaseCore",!0),_unloadHandlers=createUnloadHandlerContainer(),_traceCtx=null,_instrumentationKey=null,_hookContainer=createUnloadHookContainer(),_cfgListeners=[],_pluginVersionString=null,_pluginVersionStringArr=null,_forceStopInternalLogPoller=!1,_internalLogPoller=null,_internalLogPollerListening=!1,_activeStatus=0,_endpoint=null,_initInMemoMaxSize=null,_isStatusSet=!1,null}function _createTelCtx(){var theCtx=createProcessTelemetryContext(_getPluginChain(),_configHandler.cfg,_self);return theCtx.onComplete(_startLogPoller),theCtx}function _initPluginChain(updateState){var theExtensions=function _validateExtensions(logger,channelPriority,allExtensions){var coreExtensions=[],channels=[],extPriorities={};return Object(ts_utils.b)(allExtensions,(function(ext){(Object(ts_utils.M)(ext)||Object(ts_utils.M)(ext[_DYN_INITIALIZE]))&&Object(ts_utils.Bb)(strValidationError);var extPriority=ext[STR_PRIORITY],identifier=ext[_DYN_IDENTIFIER];ext&&extPriority&&(Object(ts_utils.M)(extPriorities[extPriority])?extPriorities[extPriority]=identifier:_warnToConsole(logger,"Two extensions have same priority #"+extPriority+" - "+extPriorities[extPriority]+", "+identifier)),!extPriority||extPriority<channelPriority?coreExtensions[_DYN_PUSH](ext):channels[_DYN_PUSH](ext)})),{core:coreExtensions,channels:channels}}(_self[_DYN_LOGGER],500,_configExtensions);_pluginChain=null,_pluginVersionString=null,_pluginVersionStringArr=null,_channels=(_channelConfig||[])[0]||[],_channels=sortPlugins(Object(ts_utils.a)(_channels,theExtensions.channels));var allExtensions=Object(ts_utils.a)(sortPlugins(theExtensions[STR_CORE]),_channels);_extensions=Object(ts_utils.jb)(allExtensions);var cfgExtensions=_self.config.extensions||[];cfgExtensions.splice(0,cfgExtensions[_DYN_LENGTH]),Object(ts_utils.a)(cfgExtensions,_extensions);var rootCtx=_createTelCtx();_channels&&_channels[_DYN_LENGTH]>0&&initializePlugins(rootCtx[_DYN_CREATE_NEW](_channels),allExtensions),initializePlugins(rootCtx,allExtensions),updateState&&_doUpdate(updateState)}function _getPlugin(pluginIdentifier){var theExt=null,thePlugin=null,channelHosts=[];return Object(ts_utils.b)(_extensions,(function(ext){if(ext[_DYN_IDENTIFIER]===pluginIdentifier&&ext!==_telemetryInitializerPlugin)return thePlugin=ext,-1;ext.getChannel&&channelHosts[_DYN_PUSH](ext)})),!thePlugin&&channelHosts[_DYN_LENGTH]>0&&Object(ts_utils.b)(channelHosts,(function(host){if(!(thePlugin=host.getChannel(pluginIdentifier)))return-1})),thePlugin&&(theExt={plugin:thePlugin,setEnabled:function setEnabled(enabled){_getPluginState(thePlugin)[STR_DISABLED]=!enabled},isEnabled:function isEnabled(){var pluginState=_getPluginState(thePlugin);return!pluginState[_DYN_TEARDOWN]&&!pluginState[STR_DISABLED]},remove:function remove(isAsync,removeCb){void 0===isAsync&&(isAsync=!0);var pluginsToRemove=[thePlugin];_removePlugins(pluginsToRemove,{reason:1,isAsync:isAsync},(function(removed){removed&&_initPluginChain({reason:32,removed:pluginsToRemove}),removeCb&&removeCb(removed)}))}}),theExt}function _getPluginChain(){if(!_pluginChain){var extensions=(_extensions||[]).slice();-1===Object(ts_utils.c)(extensions,_telemetryInitializerPlugin)&&extensions[_DYN_PUSH](_telemetryInitializerPlugin),_pluginChain=createTelemetryProxyChain(sortPlugins(extensions),_configHandler.cfg,_self)}return _pluginChain}function _removePlugins(thePlugins,unloadState,removeComplete){if(thePlugins&&thePlugins[_DYN_LENGTH]>0){var unloadCtx=createProcessTelemetryUnloadContext(createTelemetryProxyChain(thePlugins,_configHandler.cfg,_self),_self);unloadCtx.onComplete((function(){var removed=!1,newConfigExtensions=[];Object(ts_utils.b)(_configExtensions,(function(plugin,idx){_isPluginPresent(plugin,thePlugins)?removed=!0:newConfigExtensions[_DYN_PUSH](plugin)})),_configExtensions=newConfigExtensions,_pluginVersionString=null,_pluginVersionStringArr=null;var newChannelConfig=[];_channelConfig&&(Object(ts_utils.b)(_channelConfig,(function(queue,idx){var newQueue=[];Object(ts_utils.b)(queue,(function(channel){_isPluginPresent(channel,thePlugins)?removed=!0:newQueue[_DYN_PUSH](channel)})),newChannelConfig[_DYN_PUSH](newQueue)})),_channelConfig=newChannelConfig),removeComplete&&removeComplete(removed),_startLogPoller()})),unloadCtx[_DYN_PROCESS_NEXT](unloadState)}else removeComplete(!1)}function _flushInternalLogs(){if(_logger&&_logger.queue){var queue=_logger.queue.slice(0);_logger.queue[_DYN_LENGTH]=0,Object(ts_utils.b)(queue,(function(logMessage){var item={name:_internalLogsEventName||"InternalMessageId: "+logMessage.messageId,iKey:_instrumentationKey,time:toISOString(new Date),baseType:DiagnosticLogger_InternalLogMessage.dataType,baseData:{message:logMessage.message}};_self.track(item)}))}}function _flushChannels(isAsync,callBack,sendReason,cbTimeout){var waiting=1,doneIterating=!1,cbTimer=null;function doCallback(){waiting--,doneIterating&&0===waiting&&(cbTimer&&cbTimer[_DYN_CANCEL](),cbTimer=null,callBack&&callBack(doneIterating),callBack=null)}(cbTimeout=cbTimeout||5e3,_channels&&_channels[_DYN_LENGTH]>0)&&_createTelCtx()[_DYN_CREATE_NEW](_channels).iterate((function(plugin){if(plugin.flush){waiting++;var handled_1=!1;plugin.flush(isAsync,(function(){handled_1=!0,doCallback()}),sendReason)||handled_1||(isAsync&&null==cbTimer?cbTimer=Object(ts_utils.rb)((function(){cbTimer=null,doCallback()}),cbTimeout):doCallback())}}));return doneIterating=!0,doCallback(),!0}function _doUpdate(updateState){var updateCtx=createProcessTelemetryUpdateContext(_getPluginChain(),_self);updateCtx.onComplete(_startLogPoller),_self._updateHook&&!0===_self._updateHook(updateCtx,updateState)||updateCtx[_DYN_PROCESS_NEXT](updateState)}function _logOrThrowError(message){var logger=_self[_DYN_LOGGER];logger?(DiagnosticLogger_throwInternal(logger,2,73,message),_startLogPoller()):Object(ts_utils.Bb)(message)}function _notifyInvalidEvent(telemetryItem){var manager=_self.getNotifyMgr();manager&&manager.eventsDiscarded([telemetryItem],2)}function _addUnloadHook(hooks){_hookContainer.add(hooks)}_initDefaults(),_self._getDbgPlgTargets=function(){return[_extensions,_eventQueue]},_self[_DYN_IS_INITIALIZED]=function(){return _isInitialized},_self.activeStatus=function(){return _activeStatus},_self._setPendingStatus=function(){_activeStatus=3},_self[_DYN_INITIALIZE]=function(config,extensions,logger,notificationManager){_isUnloading&&Object(ts_utils.Bb)("SDK is still unloading..."),_self[_DYN_IS_INITIALIZED]()&&Object(ts_utils.Bb)("Core cannot be initialized more than once"),_configHandler=createDynamicConfig(config,AppInsightsCore_defaultConfig,logger||_self[_DYN_LOGGER],!1),config=_configHandler.cfg,_addUnloadHook(_configHandler[_DYN_WATCH]((function(details){var rootCfg=details.cfg;if(!(3===_activeStatus)){_initInMemoMaxSize=rootCfg.initInMemoMaxSize||100;var ikey=rootCfg.instrumentationKey,endpointUrl=rootCfg.endpointUrl;if(Object(ts_utils.M)(ikey)){_instrumentationKey=null,_activeStatus=ActiveStatus.INACTIVE;var msg="Please provide instrumentation key";_isInitialized?(DiagnosticLogger_throwInternal(_logger,1,100,msg),_releaseQueues()):Object(ts_utils.Bb)(msg)}else{var promises=[];if(Object(ts_utils.Q)(ikey)?(promises[_DYN_PUSH](ikey),_instrumentationKey=null):_instrumentationKey=ikey,Object(ts_utils.Q)(endpointUrl)?(promises[_DYN_PUSH](endpointUrl),_endpoint=null):_endpoint=endpointUrl,promises[_DYN_LENGTH]){_isStatusSet=!1,_activeStatus=3;var initTimeout=isNotNullOrUndefined(rootCfg.initTimeOut)?rootCfg.initTimeOut:5e4,allPromises=Object(ts_async.c)(promises);Object(ts_utils.rb)((function(){null,_isStatusSet||_setStatus()}),initTimeout),Object(ts_async.e)(allPromises,(function(response){try{if(_isStatusSet)return;if(!response.rejected){var values=response.value;if(values&&values[_DYN_LENGTH]){var ikeyRes=values[0];if(_instrumentationKey=ikeyRes&&ikeyRes.value,values[_DYN_LENGTH]>1){var endpointRes=values[1];_endpoint=endpointRes&&endpointRes.value}}_instrumentationKey&&(config.instrumentationKey=_instrumentationKey,config.endpointUrl=_endpoint)}_setStatus()}catch(e){_isStatusSet||_setStatus()}}))}else _setStatus();var extCfg=details.ref(details.cfg,STR_EXTENSION_CONFIG);Object(ts_utils.ib)(extCfg,(function(key){details.ref(extCfg,key)}))}}}))),_debugListener=_initDebugListener(_configHandler,_hookContainer,(_notificationManager=notificationManager)&&_self.getNotifyMgr(),_debugListener),function _initPerfManager(){var prevCfgPerfMgr;_addUnloadHook(_configHandler[_DYN_WATCH]((function(details){if(details.cfg.enablePerfMgr){var createPerfMgr=details.cfg.createPerfMgr;prevCfgPerfMgr===createPerfMgr&&prevCfgPerfMgr||(createPerfMgr||(createPerfMgr=_createPerfManager),getSetValue(details.cfg,"createPerfMgr",createPerfMgr),prevCfgPerfMgr=createPerfMgr,_cfgPerfManager=null),_perfManager||_cfgPerfManager||!Object(ts_utils.I)(createPerfMgr)||(_cfgPerfManager=createPerfMgr(_self,_self.getNotifyMgr()))}else _cfgPerfManager=null,prevCfgPerfMgr=null})))}(),_self[_DYN_LOGGER]=logger;var cfgExtensions=config.extensions;if((_configExtensions=[])[_DYN_PUSH].apply(_configExtensions,Object(TsLibShims.c)(Object(TsLibShims.c)([],extensions,!1),cfgExtensions,!1)),_channelConfig=config.channels,_initPluginChain(null),_channels&&0!==_channels[_DYN_LENGTH]||Object(ts_utils.Bb)("No channels available"),_channelConfig&&_channelConfig[_DYN_LENGTH]>1){var teeController=_self[_DYN_GET_PLUGIN]("TeeChannelController");teeController&&teeController.plugin||DiagnosticLogger_throwInternal(_logger,1,28,"TeeChannel required")}!function _registerDelayedCfgListener(config,listeners,logger){Object(ts_utils.b)(listeners,(function(listener){var unloadHdl=onConfigChange(config,listener.w,logger);delete listener.w,listener.rm=function(){unloadHdl.rm()}}))}(config,_cfgListeners,_logger),_cfgListeners=null,_isInitialized=!0,_activeStatus===ActiveStatus.ACTIVE&&_releaseQueues()},_self.getChannels=function(){var controls=[];return _channels&&Object(ts_utils.b)(_channels,(function(channel){controls[_DYN_PUSH](channel)})),Object(ts_utils.jb)(controls)},_self.track=function(telemetryItem){doPerf(_self[STR_GET_PERF_MGR](),(function(){return"AppInsightsCore:track"}),(function(){null===telemetryItem&&(_notifyInvalidEvent(telemetryItem),Object(ts_utils.Bb)("Invalid telemetry item")),!telemetryItem[_DYN_NAME]&&Object(ts_utils.M)(telemetryItem[_DYN_NAME])&&(_notifyInvalidEvent(telemetryItem),Object(ts_utils.Bb)("telemetry name required")),telemetryItem.iKey=telemetryItem.iKey||_instrumentationKey,telemetryItem.time=telemetryItem.time||toISOString(new Date),telemetryItem.ver=telemetryItem.ver||"4.0",!_isUnloading&&_self[_DYN_IS_INITIALIZED]()&&_activeStatus===ActiveStatus.ACTIVE?_createTelCtx()[_DYN_PROCESS_NEXT](telemetryItem):_activeStatus!==ActiveStatus.INACTIVE&&_eventQueue[_DYN_LENGTH]<=_initInMemoMaxSize&&_eventQueue[_DYN_PUSH](telemetryItem)}),(function(){return{item:telemetryItem}}),!telemetryItem.sync)},_self.getProcessTelContext=_createTelCtx,_self.getNotifyMgr=function(){return _notificationManager||(_notificationManager=new NotificationManager_NotificationManager(_configHandler.cfg),_self._notificationManager=_notificationManager),_notificationManager},_self[_DYN_ADD_NOTIFICATION_LIS1]=function(listener){_self.getNotifyMgr()[_DYN_ADD_NOTIFICATION_LIS1](listener)},_self[_DYN_REMOVE_NOTIFICATION_0]=function(listener){_notificationManager&&_notificationManager[_DYN_REMOVE_NOTIFICATION_0](listener)},_self.getCookieMgr=function(){return _cookieManager||(_cookieManager=createCookieMgr(_configHandler.cfg,_self[_DYN_LOGGER])),_cookieManager},_self.setCookieMgr=function(cookieMgr){_cookieManager!==cookieMgr&&(runTargetUnload(_cookieManager,!1),_cookieManager=cookieMgr)},_self[STR_GET_PERF_MGR]=function(){return _perfManager||_cfgPerfManager||function getGblPerfMgr(){return _defaultPerfManager}()},_self.setPerfMgr=function(perfMgr){_perfManager=perfMgr},_self.eventCnt=function(){return _eventQueue[_DYN_LENGTH]},_self.releaseQueue=function(){if(_isInitialized&&_eventQueue[_DYN_LENGTH]>0){var eventQueue=_eventQueue;_eventQueue=[],2===_activeStatus?Object(ts_utils.b)(eventQueue,(function(event){event.iKey=event.iKey||_instrumentationKey,_createTelCtx()[_DYN_PROCESS_NEXT](event)})):DiagnosticLogger_throwInternal(_logger,2,20,"core init status is not active")}},_self.pollInternalLogs=function(eventName){return _internalLogsEventName=eventName||null,_forceStopInternalLogPoller=!1,_internalLogPoller&&_internalLogPoller[_DYN_CANCEL](),_startLogPoller(!0)},_self.stopPollingInternalLogs=function(){_forceStopInternalLogPoller=!0,_internalLogPoller&&_internalLogPoller[_DYN_CANCEL](),_flushInternalLogs()},proxyFunctions(_self,(function(){return _telemetryInitializerPlugin}),["addTelemetryInitializer"]),_self[_DYN_UNLOAD]=function(isAsync,unloadComplete,cbTimeout){void 0===isAsync&&(isAsync=!0),_isInitialized||Object(ts_utils.Bb)("SDK is not initialized"),_isUnloading&&Object(ts_utils.Bb)("SDK is still unloading...");var result,unloadState={reason:50,isAsync:isAsync,flushComplete:!1};isAsync&&!unloadComplete&&(result=Object(ts_async.b)((function(resolve){unloadComplete=resolve})));var processUnloadCtx=createProcessTelemetryUnloadContext(_getPluginChain(),_self);function _doUnload(flushComplete){unloadState.flushComplete=flushComplete,_isUnloading=!0,_unloadHandlers.run(processUnloadCtx,unloadState),_self.stopPollingInternalLogs(),processUnloadCtx[_DYN_PROCESS_NEXT](unloadState)}return processUnloadCtx.onComplete((function(){_hookContainer.run(_self[_DYN_LOGGER]),doUnloadAll([_cookieManager,_notificationManager,_logger],isAsync,(function(){_initDefaults(),unloadComplete&&unloadComplete(unloadState)}))}),_self),_flushInternalLogs(),_flushChannels(isAsync,_doUnload,6,cbTimeout)||_doUnload(!1),result},_self[_DYN_GET_PLUGIN]=_getPlugin,_self.addPlugin=function(plugin,replaceExisting,isAsync,addCb){if(!plugin)return addCb&&addCb(!1),void _logOrThrowError(strValidationError);var existingPlugin=_getPlugin(plugin[_DYN_IDENTIFIER]);if(existingPlugin&&!replaceExisting)return addCb&&addCb(!1),void _logOrThrowError("Plugin ["+plugin[_DYN_IDENTIFIER]+"] is already loaded!");var updateState={reason:16};function _addPlugin(removed){_configExtensions[_DYN_PUSH](plugin),updateState.added=[plugin],_initPluginChain(updateState),addCb&&addCb(!0)}if(existingPlugin){var removedPlugins_1=[existingPlugin.plugin];_removePlugins(removedPlugins_1,{reason:2,isAsync:!!isAsync},(function(removed){removed?(updateState.removed=removedPlugins_1,updateState.reason|=32,_addPlugin()):addCb&&addCb(!1)}))}else _addPlugin()},_self.updateCfg=function(newConfig,mergeExisting){var updateState;if(void 0===mergeExisting&&(mergeExisting=!0),_self[_DYN_IS_INITIALIZED]()){updateState={reason:1,cfg:_configHandler.cfg,oldCfg:Object(ts_utils.m)({},_configHandler.cfg),newConfig:Object(ts_utils.m)({},newConfig),merge:mergeExisting},newConfig=updateState.newConfig;var cfg=_configHandler.cfg;newConfig.extensions=cfg.extensions,newConfig.channels=cfg.channels}_configHandler._block((function(details){var theConfig=details.cfg;_deepMergeConfig(details,theConfig,newConfig,mergeExisting),mergeExisting||Object(ts_utils.ib)(theConfig,(function(key){Object(ts_utils.lb)(newConfig,key)||details.set(theConfig,key,UNDEFINED_VALUE)})),details.setDf(theConfig,AppInsightsCore_defaultConfig)}),!0),_configHandler.notify(),updateState&&_doUpdate(updateState)},_self.evtNamespace=function(){return _evtNamespace},_self.flush=_flushChannels,_self.getTraceCtx=function(createNew){return _traceCtx||(_traceCtx=function createDistributedTraceContext(parentCtx){var trace={};return{getName:function getName(){return trace[_DYN_NAME]},setName:function setName(newValue){parentCtx&&parentCtx.setName(newValue),trace[_DYN_NAME]=newValue},getTraceId:function getTraceId(){return trace.traceId},setTraceId:function setTraceId(newValue){parentCtx&&parentCtx.setTraceId(newValue),isValidTraceId(newValue)&&(trace.traceId=newValue)},getSpanId:function getSpanId(){return trace.spanId},setSpanId:function setSpanId(newValue){parentCtx&&parentCtx.setSpanId(newValue),isValidSpanId(newValue)&&(trace.spanId=newValue)},getTraceFlags:function getTraceFlags(){return trace[_DYN_TRACE_FLAGS]},setTraceFlags:function setTraceFlags(newTraceFlags){parentCtx&&parentCtx.setTraceFlags(newTraceFlags),trace[_DYN_TRACE_FLAGS]=newTraceFlags}}}()),_traceCtx},_self.setTraceCtx=function(traceCtx){_traceCtx=traceCtx||null},_self.addUnloadHook=_addUnloadHook,proxyFunctionAs(_self,"addUnloadCb",(function(){return _unloadHandlers}),"add"),_self.onCfgChange=function(handler){return function _createUnloadHook(unloadHook){return Object(ts_utils.eb)({rm:function rm(){unloadHook.rm()}},"toJSON",{v:function v(){return"aicore::onCfgChange<"+JSON.stringify(unloadHook)+">"}})}(_isInitialized?onConfigChange(_configHandler.cfg,handler,_self[_DYN_LOGGER]):function _addDelayedCfgListener(listeners,newWatcher){var theListener=_findWatcher(listeners,newWatcher).l;return theListener||(theListener={w:newWatcher,rm:function rm(){var fnd=_findWatcher(listeners,newWatcher);-1!==fnd.i&&listeners[_DYN_SPLICE](fnd.i,1)}},listeners[_DYN_PUSH](theListener)),theListener}(_cfgListeners,handler))},_self.getWParam=function(){return Object(ts_utils.z)()||_configHandler.cfg.enableWParam?0:-1}}))}return AppInsightsCore.__ieDyn=1,AppInsightsCore}(),InternalConstants_STR_DURATION="duration",STR_PROPERTIES="properties",_DYN_REQUEST_URL="requestUrl",applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH="length",_DynamicConstants_DYN_TRACE_ID="traceID",_DYN_SPAN_ID="spanID",_DynamicConstants_DYN_TRACE_FLAGS="traceFlags",_DYN_CONTEXT="context",_DYN_ABORTED="aborted",_DYN_PERF_MARK="perfMark",_DYN_PERF_TIMING="perfTiming",_DYN_AJAX_DIAGNOSTICS_MES14="ajaxDiagnosticsMessage";function _calcPerfDuration(resourceEntry,start,end){var result=0,from=resourceEntry[start],to=resourceEntry[end];return from&&to&&(result=dateTimeUtilsDuration(from,to)),result}function _setPerfDuration(props,name,resourceEntry,start,end){var result=0,value=_calcPerfDuration(resourceEntry,start,end);return value&&(result=_setPerfValue(props,name,msToTimeSpan(value))),result}function _setPerfValue(props,name,value){var result=0;props&&name&&value&&((props.ajaxPerf=props.ajaxPerf||{})[name]=value,result=1);return result}var ajax_a,ajaxRecord_XHRMonitoringState=function XHRMonitoringState(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.stateChangeAttached=!1},ajaxRecord_ajaxRecord=function(){function ajaxRecord(traceId,spanId,logger,traceCtx){var _logger=logger;this[_DYN_PERF_MARK]=null,this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this[_DYN_ABORTED]=0,this.pageUrl=null,this[_DYN_REQUEST_URL]=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.xhrMonitoringState=new ajaxRecord_XHRMonitoringState,this.clientFailure=0,this[_DynamicConstants_DYN_TRACE_ID]=traceId,this[_DYN_SPAN_ID]=spanId,this[_DynamicConstants_DYN_TRACE_FLAGS]=null==traceCtx?void 0:traceCtx.getTraceFlags(),this.eventTraceCtx=traceCtx?{traceId:traceCtx.getTraceId(),spanId:traceCtx.getSpanId(),traceFlags:traceCtx.getTraceFlags()}:null,dynamicProto(ajaxRecord,this,(function(self){self.getAbsoluteUrl=function(){return self[_DYN_REQUEST_URL]?function urlGetAbsoluteUrl(url){var result,a=urlParseUrl(url);return a&&(result=a.href),result}(self[_DYN_REQUEST_URL]):null},self.getPathName=function(){return self[_DYN_REQUEST_URL]?dataSanitizeUrl(_logger,function urlGetCompleteUrl(method,absoluteUrl){return method?method.toUpperCase()+" "+absoluteUrl:absoluteUrl}(self.method,self[_DYN_REQUEST_URL])):null},self.CreateTrackItem=function(ajaxType,enableRequestHeaderTracking,getResponse){var _a;if(self.ajaxTotalDuration=Object(ts_utils.Z)(1e3*dateTimeUtilsDuration(self.requestSentTime,self.responseFinishedTime))/1e3,self.ajaxTotalDuration<0)return null;var dependency=((_a={id:"|"+self[_DynamicConstants_DYN_TRACE_ID]+"."+self[_DYN_SPAN_ID],target:self.getAbsoluteUrl(),name:self.getPathName(),type:ajaxType,startTime:null,duration:self.ajaxTotalDuration,success:+self.status>=200&&+self.status<400,responseCode:+self.status})[STR_PROPERTIES]={HttpMethod:self.method},_a),props=dependency[STR_PROPERTIES];if(self[_DYN_ABORTED]&&(props[_DYN_ABORTED]=!0),self.requestSentTime&&(dependency.startTime=new Date,dependency.startTime.setTime(self.requestSentTime)),function _populatePerfData(ajaxData,dependency){var resourceEntry=ajaxData[_DYN_PERF_TIMING],props=dependency[STR_PROPERTIES]||{},propsSet=0,strRedirect="redirect",strRedirectStart=strRedirect+"Start",strRedirectEnd=strRedirect="End";if(resourceEntry){propsSet|=_setPerfDuration(props,strRedirect,resourceEntry,strRedirectStart,strRedirectEnd),propsSet|=_setPerfDuration(props,"domainLookup",resourceEntry,"domainLookupStart","domainLookupEnd"),propsSet|=_setPerfDuration(props,"connect",resourceEntry,"connectStart","connectEnd"),propsSet|=_setPerfDuration(props,"request",resourceEntry,"requestStart","requestEnd"),propsSet|=_setPerfDuration(props,"response",resourceEntry,"responseStart","responseEnd"),propsSet|=_setPerfDuration(props,"networkConnect",resourceEntry,"startTime","connectEnd"),propsSet|=_setPerfDuration(props,"sentRequest",resourceEntry,"requestStart","responseEnd");var duration=resourceEntry[InternalConstants_STR_DURATION];duration||(duration=_calcPerfDuration(resourceEntry,"startTime","responseEnd")||0),propsSet|=_setPerfValue(props,InternalConstants_STR_DURATION,duration),propsSet|=_setPerfValue(props,"perfTotal",duration);var serverTiming=resourceEntry.serverTiming;if(serverTiming){var server_1={};Object(ts_utils.b)(serverTiming,(function(value,idx){var name=normalizeJsName(value.name||""+idx),newValue=server_1[name]||{};Object(ts_utils.ib)(value,(function(key,val){("name"!==key&&Object(ts_utils.R)(val)||Object(ts_utils.N)(val))&&(newValue[key]&&(val=newValue[key]+";"+val),!val&&Object(ts_utils.R)(val)||(newValue[key]=val))})),server_1[name]=newValue})),propsSet|=_setPerfValue(props,"serverTiming",server_1)}propsSet|=_setPerfValue(props,"transferSize",resourceEntry.transferSize),propsSet|=_setPerfValue(props,"encodedBodySize",resourceEntry.encodedBodySize),propsSet|=_setPerfValue(props,"decodedBodySize",resourceEntry.decodedBodySize)}else ajaxData[_DYN_PERF_MARK]&&(propsSet|=_setPerfValue(props,"missing",ajaxData.perfAttempts));propsSet&&(dependency[STR_PROPERTIES]=props)}(self,dependency),enableRequestHeaderTracking&&Object(ts_utils.nb)(self.requestHeaders)[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&(props.requestHeaders=self.requestHeaders),getResponse){var response=getResponse();if(response){var correlationContext=response.correlationContext;if(correlationContext&&(dependency.correlationContext=correlationContext),response.headerMap&&Object(ts_utils.nb)(response.headerMap)[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&(props.responseHeaders=response.headerMap),self.errorStatusText)if(self.status>=400){var responseType=response.type;""!==responseType&&"text"!==responseType||(props.responseText=response.responseText?response.statusText+" - "+response.responseText:response.statusText),"json"===responseType&&(props.responseText=response.response?response.statusText+" - "+JSON.stringify(response.response):response.statusText)}else 0===self.status&&(props.responseText=response.statusText||"")}}return dependency},self.getPartAProps=function(){var partA=null,traceCtx=self.eventTraceCtx;if(traceCtx&&(traceCtx.traceId||traceCtx.spanId)){var traceExt=(partA={})[Extensions_TraceExt]={traceID:traceCtx.traceId,parentID:traceCtx.spanId};Object(ts_utils.M)(traceCtx[_DynamicConstants_DYN_TRACE_FLAGS])||(traceExt[_DynamicConstants_DYN_TRACE_FLAGS]=traceCtx[_DynamicConstants_DYN_TRACE_FLAGS])}return partA}}))}return ajaxRecord.__ieDyn=1,ajaxRecord}();function ajax_typeof(obj){return ajax_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},ajax_typeof(obj)}var strDiagLog="diagLog",AJAX_DATA_CONTAINER="_ajaxData",STR_FETCH="fetch",ERROR_HEADER="Failed to monitor XMLHttpRequest",ERROR_PREFIX=", monitoring data for this ajax call ",ERROR_POSTFIX=ERROR_PREFIX+"may be incorrect.",ERROR_NOT_SENT=ERROR_PREFIX+"won't be sent.",CORRELATION_HEADER_ERROR="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",CUSTOM_REQUEST_CONTEXT_ERROR="Failed to add custom defined request context as configured call back may missing a null check.",_markCount=0;var _getAjaxData=function _getAjaxData(xhr,ajaxDataId){return xhr&&ajaxDataId&&xhr[AJAX_DATA_CONTAINER]?(xhr[AJAX_DATA_CONTAINER].i||{})[ajaxDataId]:null},ajax_isHeaderSet=function _isHeaderSet(xhr,name){var isPresent=!1;if(xhr){var headers=(xhr[AJAX_DATA_CONTAINER]||{}).xh;headers&&Object(ts_utils.b)(headers,(function(header){if(header.n===name)return isPresent=!0,-1}))}return isPresent};function _getFailedAjaxDiagnosticsMessage(xhr,ajaxDataId){var result="";try{var ajaxData=_getAjaxData(xhr,ajaxDataId);ajaxData&&ajaxData[_DYN_REQUEST_URL]&&(result+="(url: '"+ajaxData[_DYN_REQUEST_URL]+"')")}catch(e){}return result}function _throwInternalCritical(ajaxMonitorInstance,msgId,message,properties,isUserAct){DiagnosticLogger_throwInternal(ajaxMonitorInstance[strDiagLog](),1,msgId,message,properties,isUserAct)}function _throwInternalWarning(ajaxMonitorInstance,msgId,message,properties,isUserAct){DiagnosticLogger_throwInternal(ajaxMonitorInstance[strDiagLog](),2,msgId,message,properties,isUserAct)}function _createErrorCallbackFunc(ajaxMonitorInstance,internalMessage,message){return function(callDetails){var _a;_throwInternalCritical(ajaxMonitorInstance,internalMessage,message,((_a={})[_DYN_AJAX_DIAGNOSTICS_MES14]=_getFailedAjaxDiagnosticsMessage(callDetails.inst,ajaxMonitorInstance._ajaxDataId),_a.exception=Object(ts_utils.n)(callDetails.err),_a))}}function _indexOf(value,match){return value&&match?Object(ts_utils.ub)(value,match):-1}function ajax_addHandler(container,id,theFunc){var theHandler={id:id,fn:theFunc};return container.push(theHandler),{remove:function remove(){Object(ts_utils.b)(container,(function(initializer,idx){if(initializer.id===theHandler.id)return container.splice(idx,1),-1}))}}}function _processDependencyContainer(core,container,details,message){var result=!0;return Object(ts_utils.b)(container,(function(theFunc,idx){try{!1===theFunc.fn.call(null,details)&&(result=!1)}catch(e){DiagnosticLogger_throwInternal(core&&core.logger,1,64,"Dependency "+message+" [#"+idx+"] failed: "+getExceptionName(e),{exception:Object(ts_utils.n)(e)},!0)}})),result}var DfltAjaxCorrelationHeaderExDomains=Object(ts_utils.jb)(["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"]),_internalExcludeEndpoints=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i],ajax_defaultConfig=Object(ts_utils.jb)(((ajax_a={}).maxAjaxCallsPerView=500,ajax_a.disableAjaxTracking=!1,ajax_a.disableFetchTracking=!1,ajax_a.excludeRequestFromAutoTrackingPatterns=void 0,ajax_a.disableCorrelationHeaders=!1,ajax_a.distributedTracingMode=1,ajax_a.correlationHeaderExcludedDomains=DfltAjaxCorrelationHeaderExDomains,ajax_a.correlationHeaderDomains=void 0,ajax_a.correlationHeaderExcludePatterns=void 0,ajax_a.appId=void 0,ajax_a.enableCorsCorrelation=!1,ajax_a.enableRequestHeaderTracking=!1,ajax_a.enableResponseHeaderTracking=!1,ajax_a.enableAjaxErrorStatusText=!1,ajax_a.enableAjaxPerfTracking=!1,ajax_a.maxAjaxPerfLookupAttempts=3,ajax_a.ajaxPerfLookupDelay=25,ajax_a.ignoreHeaders=["Authorization","X-API-Key","WWW-Authenticate"],ajax_a.addRequestContext=void 0,ajax_a.addIntEndpoints=!0,ajax_a)),ajax_AjaxMonitor=function(_super){function AjaxMonitor(){var _fetchInitialized,_xhrInitialized,_currentWindowHost,_extensionConfig,_enableRequestHeaderTracking,_enableAjaxErrorStatusText,_trackAjaxAttempts,_context,_isUsingW3CHeaders,_isUsingAIHeaders,_markPrefix,_enableAjaxPerfTracking,_maxAjaxCallsPerView,_enableResponseHeaderTracking,_disabledUrls,_disableAjaxTracking,_disableFetchTracking,_excludeRequestFromAutoTrackingPatterns,_addRequestContext,_evtNamespace,_ajaxDataId,_dependencyHandlerId,_dependencyListeners,_dependencyInitializers,_ignoreHeaders,_maxAjaxPerfLookupAttempts,_ajaxPerfLookupDelay,_distributedTracingMode,_appId,_polyfillInitialized,_this=_super.call(this)||this;return _this.identifier=AjaxMonitor.identifier,_this.priority=120,dynamicProto(AjaxMonitor,_this,(function(_self,_base){var _addHook=_base._addHook;function _initDefaults(){var location=getLocation();_fetchInitialized=!1,_xhrInitialized=!1,_polyfillInitialized=!1,_currentWindowHost=location&&location.host&&location.host.toLowerCase(),_extensionConfig=null,_enableRequestHeaderTracking=!1,_enableAjaxErrorStatusText=!1,_trackAjaxAttempts=0,_context=null,_isUsingW3CHeaders=!1,_isUsingAIHeaders=!1,_markPrefix=null,_enableAjaxPerfTracking=!1,_maxAjaxCallsPerView=0,_enableResponseHeaderTracking=!1,_disabledUrls={},_disableAjaxTracking=!1,_disableFetchTracking=!1,_excludeRequestFromAutoTrackingPatterns=null,_addRequestContext=null,_evtNamespace=null,_dependencyHandlerId=0,_dependencyListeners=[],_dependencyInitializers=[],_ajaxDataId=createUniqueNamespace("ajaxData"),_self._ajaxDataId=_ajaxDataId,_ignoreHeaders=null,_maxAjaxPerfLookupAttempts=1,_ajaxPerfLookupDelay=1,_distributedTracingMode=1,_appId=null}function _canIncludeHeaders(header){var rlt=!0;return(header||_ignoreHeaders)&&Object(ts_utils.b)(_ignoreHeaders,(function(key){if(key.toLowerCase()===header.toLowerCase())return rlt=!1,-1})),rlt}function _hookProto(target,funcName,callbacks){_addHook(function InstrumentProto(target,funcName,callbacks){return target?InstrumentFunc(target[Constants.f],funcName,callbacks,!1):null}(target,funcName,callbacks))}function _isDisabledRequest(xhr,request,init){var isDisabled=!1,theUrl=((Object(ts_utils.R)(request)?request:(request||{}).url||"")||"").toLowerCase();if(Object(ts_utils.b)(_excludeRequestFromAutoTrackingPatterns,(function(regex){var theRegex=regex;Object(ts_utils.R)(regex)&&(theRegex=new RegExp(regex)),isDisabled||(isDisabled=theRegex.test(theUrl))})),isDisabled)return isDisabled;var idx=_indexOf(theUrl,"?"),idx2=_indexOf(theUrl,"#");return(-1===idx||-1!==idx2&&idx2<idx)&&(idx=idx2),-1!==idx&&(theUrl=theUrl.substring(0,idx)),Object(ts_utils.M)(xhr)?Object(ts_utils.M)(request)||(isDisabled="object"===ajax_typeof(request)&&!0===request[DisabledPropertyName]||!!init&&!0===init[DisabledPropertyName]):isDisabled=!0===xhr[DisabledPropertyName]||!0===theUrl[DisabledPropertyName],!isDisabled&&theUrl&&isInternalApplicationInsightsEndpoint(theUrl)&&(isDisabled=!0),isDisabled?_disabledUrls[theUrl]||(_disabledUrls[theUrl]=1):_disabledUrls[theUrl]&&(isDisabled=!0),isDisabled}function _isMonitoredXhrInstance(xhr,ajaxData,excludeAjaxDataValidation){var ajaxValidation=!0,initialized=_xhrInitialized;return Object(ts_utils.M)(xhr)||(ajaxValidation=!0===excludeAjaxDataValidation||!Object(ts_utils.M)(ajaxData)),initialized&&ajaxValidation}function _getDistributedTraceCtx(){var distributedTraceCtx=null;return _self.core&&_self.core.getTraceCtx&&(distributedTraceCtx=_self.core.getTraceCtx(!1)),!distributedTraceCtx&&_context&&_context.telemetryTrace&&(distributedTraceCtx=createDistributedTraceContextFromTrace(_context.telemetryTrace)),distributedTraceCtx}function _createMarkId(type,ajaxData){if(ajaxData[_DYN_REQUEST_URL]&&_markPrefix&&_enableAjaxPerfTracking){var performance_1=Object(ts_utils.x)();if(performance_1&&Object(ts_utils.I)(performance_1.mark)){_markCount++;var markId=_markPrefix+type+"#"+_markCount;performance_1.mark(markId);var entries=performance_1.getEntriesByName(markId);entries&&1===entries[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]&&(ajaxData[_DYN_PERF_MARK]=entries[0])}}}function _findPerfResourceEntry(initiatorType,ajaxData,trackCallback,reportError){var perfMark=ajaxData[_DYN_PERF_MARK],performance=Object(ts_utils.x)(),maxAttempts=_maxAjaxPerfLookupAttempts,retryDelay=_ajaxPerfLookupDelay,requestUrl=ajaxData[_DYN_REQUEST_URL],attempt=0;!function locateResourceTiming(){try{if(performance&&perfMark){attempt++;for(var perfTiming=null,entries=performance.getEntries(),lp=entries[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]-1;lp>=0;lp--){var entry=entries[lp];if(entry){if("resource"===entry.entryType)entry.initiatorType!==initiatorType||-1===_indexOf(entry.name,requestUrl)&&-1===_indexOf(requestUrl,entry.name)||(perfTiming=entry);else if("mark"===entry.entryType&&entry.name===perfMark.name){ajaxData[_DYN_PERF_TIMING]=perfTiming;break}if(entry.startTime<perfMark.startTime-1e3)break}}}!perfMark||ajaxData[_DYN_PERF_TIMING]||attempt>=maxAttempts||!1===ajaxData.async?(perfMark&&Object(ts_utils.I)(performance.clearMarks)&&performance.clearMarks(perfMark.name),ajaxData.perfAttempts=attempt,trackCallback()):Object(ts_utils.rb)(locateResourceTiming,retryDelay)}catch(e){reportError(e)}}()}function _getFailedFetchDiagnosticsMessage(input){var result="";try{Object(ts_utils.M)(input)||(result+="(url: '".concat("string"==typeof input?input:input.url,"')"))}catch(e){_throwInternalCritical(_self,15,"Failed to grab failed fetch diagnostics message",{exception:Object(ts_utils.n)(e)})}return result}function _reportFetchMetrics(callDetails,status,input,response,ajaxData,getResponse,properties){function _reportFetchError(msgId,e,failedProps){var errorProps=failedProps||{};errorProps.fetchDiagnosticsMessage=_getFailedFetchDiagnosticsMessage(input),e&&(errorProps.exception=Object(ts_utils.n)(e)),_throwInternalWarning(_self,msgId,"Failed to calculate the duration of the fetch call"+ERROR_NOT_SENT,errorProps)}ajaxData&&(ajaxData.responseFinishedTime=dateTimeUtilsNow(),ajaxData.status=status,_findPerfResourceEntry(STR_FETCH,ajaxData,(function(){var properties,dependency=ajaxData.CreateTrackItem("Fetch",_enableRequestHeaderTracking,getResponse);try{_addRequestContext&&(properties=_addRequestContext({status:status,request:input,response:response}))}catch(e){_throwInternalWarning(_self,104,CUSTOM_REQUEST_CONTEXT_ERROR)}if(dependency){void 0!==properties&&(dependency[STR_PROPERTIES]=Object(TsLibShims.a)(Object(TsLibShims.a)({},dependency.properties),properties));var sysProperties=ajaxData.getPartAProps();_reportDependencyInternal(_dependencyInitializers,_self.core,ajaxData,dependency,null,sysProperties)}else _reportFetchError(14,null,{requestSentTime:ajaxData.requestSentTime,responseFinishedTime:ajaxData.responseFinishedTime})}),(function(e){_reportFetchError(18,e,null)})))}function _reportDependencyInternal(initializers,core,ajaxData,dependency,properties,systemProperties){var result=!0;initializers[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]>0&&(result=_processDependencyContainer(core,initializers,{item:dependency,properties:properties,sysProperties:systemProperties,context:ajaxData?ajaxData[_DYN_CONTEXT]:null,aborted:!!ajaxData&&!!ajaxData[_DYN_ABORTED]},"initializer"));result&&_self.trackDependencyDataInternal(dependency,properties,systemProperties)}_initDefaults(),_self.initialize=function(config,core,extensions,pluginChain){_self.isInitialized()||(_base.initialize(config,core,extensions,pluginChain),_evtNamespace=mergeEvtNamespace(createUniqueNamespace("ajax"),core&&core.evtNamespace&&core.evtNamespace()),function _populateDefaults(config){_self._addHook(onConfigChange(config,(function(details){var ctx=createProcessTelemetryContext(null,details.cfg,_self.core);_extensionConfig=ctx.getExtCfg(AjaxMonitor.identifier,ajax_defaultConfig),_distributedTracingMode=_extensionConfig.distributedTracingMode,_enableRequestHeaderTracking=_extensionConfig.enableRequestHeaderTracking,_enableAjaxErrorStatusText=_extensionConfig.enableAjaxErrorStatusText,_enableAjaxPerfTracking=_extensionConfig.enableAjaxPerfTracking,_maxAjaxCallsPerView=_extensionConfig.maxAjaxCallsPerView,_excludeRequestFromAutoTrackingPatterns=[].concat(_extensionConfig.excludeRequestFromAutoTrackingPatterns||[],!1!==_extensionConfig.addIntEndpoints?_internalExcludeEndpoints:[]),_addRequestContext=_extensionConfig.addRequestContext,_isUsingAIHeaders=0===_distributedTracingMode||1===_distributedTracingMode,_isUsingW3CHeaders=1===_distributedTracingMode||2===_distributedTracingMode,_enableAjaxPerfTracking&&(_markPrefix=_ajaxDataId),_disableAjaxTracking=!!_extensionConfig.disableAjaxTracking,_maxAjaxPerfLookupAttempts=_extensionConfig.maxAjaxPerfLookupAttempts,_ajaxPerfLookupDelay=_extensionConfig.ajaxPerfLookupDelay,_ignoreHeaders=_extensionConfig.ignoreHeaders,_appId=_extensionConfig.appId})))}(config),function _instrumentXhr(){if(!function _supportsAjaxMonitoring(ajaxMonitorInstance,ajaxDataId){var _a,result=!1;if(isXhrSupported()){var proto=XMLHttpRequest[Constants.f];result=!(Object(ts_utils.M)(proto)||Object(ts_utils.M)(proto.open)||Object(ts_utils.M)(proto.send)||Object(ts_utils.M)(proto.abort))}var ieVer=getIEVersion();if(ieVer&&ieVer<9&&(result=!1),result)try{var xhr=new XMLHttpRequest,xhrData={xh:[],i:(_a={},_a[ajaxDataId]={},_a)};xhr[AJAX_DATA_CONTAINER]=xhrData;var theOpen=XMLHttpRequest[Constants.f].open;XMLHttpRequest[Constants.f].open=theOpen}catch(e){result=!1,_throwInternalCritical(ajaxMonitorInstance,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:Object(ts_utils.n)(e)})}return result}(_self,_ajaxDataId))return;_self._addHook(onConfigChange(_extensionConfig,(function(){_disableAjaxTracking=!!_extensionConfig.disableAjaxTracking,_enableRequestHeaderTracking=_extensionConfig.enableRequestHeaderTracking,_disableAjaxTracking||_xhrInitialized||(_hookProto(XMLHttpRequest,"open",{ns:_evtNamespace,req:function req(callDetails,method,url,async){if(!_disableAjaxTracking){var xhr=callDetails.inst,ajaxData=_getAjaxData(xhr,_ajaxDataId);!_isDisabledRequest(xhr,url)&&_isMonitoredXhrInstance(xhr,ajaxData,!0)&&(ajaxData&&ajaxData.xhrMonitoringState.openDone||(ajaxData=function _openHandler(xhr,method,url,async){var _a,distributedTraceCtx=_getDistributedTraceCtx(),traceID=distributedTraceCtx&&distributedTraceCtx.getTraceId()||generateW3CId(),spanID=Object(ts_utils.xb)(generateW3CId(),0,16),xhrRequestData=xhr[AJAX_DATA_CONTAINER]=xhr[AJAX_DATA_CONTAINER]||{xh:[],i:{}},ajaxDataCntr=xhrRequestData.i=xhrRequestData.i||{},ajaxData=ajaxDataCntr[_ajaxDataId]=ajaxDataCntr[_ajaxDataId]||new ajaxRecord_ajaxRecord(traceID,spanID,_self[strDiagLog](),null===(_a=_self.core)||void 0===_a?void 0:_a.getTraceCtx());return ajaxData[_DynamicConstants_DYN_TRACE_FLAGS]=distributedTraceCtx&&distributedTraceCtx.getTraceFlags(),ajaxData.method=method,ajaxData[_DYN_REQUEST_URL]=url,ajaxData.xhrMonitoringState.openDone=!0,ajaxData.requestHeaders={},ajaxData.async=async,ajaxData.errorStatusText=_enableAjaxErrorStatusText,ajaxData}(xhr,method,url,async)),function _attachToOnReadyStateChange(xhr,ajaxData){ajaxData.xhrMonitoringState.stateChangeAttached=eventOn(xhr,"readystatechange",(function(){var _a;try{xhr&&4===xhr.readyState&&_isMonitoredXhrInstance(xhr,ajaxData)&&function _onAjaxComplete(xhr){var ajaxData=_getAjaxData(xhr,_ajaxDataId);function _reportXhrError(e,failedProps){var errorProps=failedProps||{};errorProps.ajaxDiagnosticsMessage=_getFailedAjaxDiagnosticsMessage(xhr,_ajaxDataId),e&&(errorProps.exception=Object(ts_utils.n)(e)),_throwInternalWarning(_self,14,"Failed to calculate the duration of the ajax call"+ERROR_NOT_SENT,errorProps)}ajaxData.responseFinishedTime=dateTimeUtilsNow(),ajaxData.status=xhr.status,_findPerfResourceEntry("xmlhttprequest",ajaxData,(function(){try{var dependency=ajaxData.CreateTrackItem("Ajax",_enableRequestHeaderTracking,(function(){var _a,ajaxResponse=((_a={statusText:xhr.statusText,headerMap:null}).correlationContext=function _getAjaxCorrelationContext(xhr){var _a;try{var responseHeadersString=xhr.getAllResponseHeaders();if(null!==responseHeadersString)if(-1!==_indexOf(responseHeadersString.toLowerCase(),RequestHeaders[8]))return correlationIdGetCorrelationContext(xhr.getResponseHeader(RequestHeaders[0]))}catch(e){_throwInternalWarning(_self,18,CORRELATION_HEADER_ERROR,((_a={})[_DYN_AJAX_DIAGNOSTICS_MES14]=_getFailedAjaxDiagnosticsMessage(xhr,_ajaxDataId),_a.exception=Object(ts_utils.n)(e),_a))}}(xhr),_a.type=xhr.responseType,_a.responseText=function _getResponseText(xhr){try{var responseType=xhr.responseType;if(""===responseType||"text"===responseType)return xhr.responseText}catch(e){}return null}(xhr),_a.response=xhr.response,_a);if(_enableResponseHeaderTracking){var headers=xhr.getAllResponseHeaders();if(headers){var arr=Object(ts_utils.zb)(headers).split(/[\r\n]+/),responseHeaderMap_2={};Object(ts_utils.b)(arr,(function(line){var parts=line.split(": "),header=parts.shift(),value=parts.join(": ");_canIncludeHeaders(header)&&(responseHeaderMap_2[header]=value)})),ajaxResponse.headerMap=responseHeaderMap_2}}return ajaxResponse})),properties=void 0;try{_addRequestContext&&(properties=_addRequestContext({status:xhr.status,xhr:xhr}))}catch(e){_throwInternalWarning(_self,104,CUSTOM_REQUEST_CONTEXT_ERROR)}if(dependency){void 0!==properties&&(dependency[STR_PROPERTIES]=Object(TsLibShims.a)(Object(TsLibShims.a)({},dependency.properties),properties));var sysProperties=ajaxData.getPartAProps();_reportDependencyInternal(_dependencyInitializers,_self.core,ajaxData,dependency,null,sysProperties)}else _reportXhrError(null,{requestSentTime:ajaxData.requestSentTime,responseFinishedTime:ajaxData.responseFinishedTime})}finally{try{var ajaxDataCntr=(xhr[AJAX_DATA_CONTAINER]||{i:{}}).i||{};ajaxDataCntr[_ajaxDataId]&&(ajaxDataCntr[_ajaxDataId]=null)}catch(e){}}}),(function(e){_reportXhrError(e,null)}))}(xhr)}catch(e){var exceptionText=Object(ts_utils.n)(e);exceptionText&&-1!==_indexOf(exceptionText.toLowerCase(),"c00c023f")||_throwInternalCritical(_self,16,ERROR_HEADER+" 'readystatechange' event handler"+ERROR_POSTFIX,((_a={})[_DYN_AJAX_DIAGNOSTICS_MES14]=_getFailedAjaxDiagnosticsMessage(xhr,_ajaxDataId),_a.exception=exceptionText,_a))}}),_evtNamespace)}(xhr,ajaxData))}},hkErr:_createErrorCallbackFunc(_self,15,ERROR_HEADER+".open"+ERROR_POSTFIX)}),_hookProto(XMLHttpRequest,"send",{ns:_evtNamespace,req:function req(callDetails,context){if(!_disableAjaxTracking){var xhr=callDetails.inst,ajaxData=_getAjaxData(xhr,_ajaxDataId);_isMonitoredXhrInstance(xhr,ajaxData)&&!ajaxData.xhrMonitoringState.sendDone&&(_createMarkId("xhr",ajaxData),ajaxData.requestSentTime=dateTimeUtilsNow(),_self.includeCorrelationHeaders(ajaxData,void 0,void 0,xhr),ajaxData.xhrMonitoringState.sendDone=!0)}},hkErr:_createErrorCallbackFunc(_self,17,ERROR_HEADER+ERROR_POSTFIX)}),_hookProto(XMLHttpRequest,"abort",{ns:_evtNamespace,req:function req(callDetails){if(!_disableAjaxTracking){var xhr=callDetails.inst,ajaxData=_getAjaxData(xhr,_ajaxDataId);_isMonitoredXhrInstance(xhr,ajaxData)&&!ajaxData.xhrMonitoringState.abortDone&&(ajaxData[_DYN_ABORTED]=1,ajaxData.xhrMonitoringState.abortDone=!0)}},hkErr:_createErrorCallbackFunc(_self,13,ERROR_HEADER+".abort"+ERROR_POSTFIX)}),_hookProto(XMLHttpRequest,"setRequestHeader",{ns:_evtNamespace,req:function req(callDetails,header,value){if(!_disableAjaxTracking){var xhr=callDetails.inst,ajaxData=_getAjaxData(xhr,_ajaxDataId);ajaxData&&_isMonitoredXhrInstance(xhr,ajaxData)&&(!function _addSharedXhrHeaders(xhr,name,value){if(xhr){var headers=(xhr[AJAX_DATA_CONTAINER]||{}).xh;headers&&headers.push({n:name,v:value})}}(xhr,header,value),_enableRequestHeaderTracking&&_canIncludeHeaders(header)&&(ajaxData.requestHeaders[header]=value))}},hkErr:_createErrorCallbackFunc(_self,71,ERROR_HEADER+".setRequestHeader"+ERROR_POSTFIX)}),_xhrInitialized=!0)})))}(),function _instrumentFetch(){var fetch=function _supportsFetch(){var _global=Object(ts_utils.q)();return!_global||Object(ts_utils.M)(_global.Request)||Object(ts_utils.M)(_global.Request[Constants.f])||Object(ts_utils.M)(_global[STR_FETCH])?null:_global[STR_FETCH]}();if(!fetch)return;var global=Object(ts_utils.q)(),isPolyfill=fetch.polyfill;_self._addHook(onConfigChange(_extensionConfig,(function(){_disableFetchTracking=!!_extensionConfig.disableFetchTracking,_enableResponseHeaderTracking=_extensionConfig.enableResponseHeaderTracking,_disableFetchTracking||_fetchInitialized?isPolyfill&&!_polyfillInitialized&&(_addHook(InstrumentFunc(global,STR_FETCH,{ns:_evtNamespace,req:function req(callDetails,input,init){_isDisabledRequest(null,input,init)}})),_polyfillInitialized=!0):(_addHook(InstrumentFunc(global,STR_FETCH,{ns:_evtNamespace,req:function req(callDetails,input,init){var fetchData;if(!_disableFetchTracking&&_fetchInitialized&&!_isDisabledRequest(null,input,init)&&(!isPolyfill||!_xhrInitialized)){var ctx=callDetails.ctx();fetchData=function _createFetchRecord(input,init){var _a,requestUrl,distributedTraceCtx=_getDistributedTraceCtx(),traceID=distributedTraceCtx&&distributedTraceCtx.getTraceId()||generateW3CId(),spanID=Object(ts_utils.xb)(generateW3CId(),0,16),ajaxData=new ajaxRecord_ajaxRecord(traceID,spanID,_self[strDiagLog](),null===(_a=_self.core)||void 0===_a?void 0:_a.getTraceCtx());ajaxData[_DynamicConstants_DYN_TRACE_FLAGS]=distributedTraceCtx&&distributedTraceCtx.getTraceFlags(),ajaxData.requestSentTime=dateTimeUtilsNow(),ajaxData.errorStatusText=_enableAjaxErrorStatusText,requestUrl=input instanceof Request?(input||{}).url||"":input;if(""===requestUrl){var location_1=getLocation();location_1&&location_1.href&&(requestUrl=Object(ts_utils.wb)(location_1.href,"#")[0])}ajaxData[_DYN_REQUEST_URL]=requestUrl;var method="GET";init&&init.method?method=init.method:input&&input instanceof Request&&(method=input.method);ajaxData.method=method;var requestHeaders={};if(_enableRequestHeaderTracking){new Headers((init?init.headers:0)||input instanceof Request&&input.headers||{}).forEach((function(value,key){_canIncludeHeaders(key)&&(requestHeaders[key]=value)}))}return ajaxData.requestHeaders=requestHeaders,_createMarkId(STR_FETCH,ajaxData),ajaxData}(input,init);var newInit=_self.includeCorrelationHeaders(fetchData,input,init);newInit!==init&&callDetails.set(1,newInit),ctx.data=fetchData}},rsp:function rsp(callDetails,input){if(!_disableFetchTracking){var fetchData_1=callDetails.ctx().data;fetchData_1&&(callDetails.rslt=callDetails.rslt.then((function(response){return _reportFetchMetrics(callDetails,(response||{}).status,input,response,fetchData_1,(function(){var _a,ajaxResponse=((_a={statusText:(response||{}).statusText,headerMap:null}).correlationContext=function _getFetchCorrelationContext(response){if(response&&response.headers)try{return correlationIdGetCorrelationContext(response.headers.get(RequestHeaders[0]))}catch(e){_throwInternalWarning(_self,18,CORRELATION_HEADER_ERROR,{fetchDiagnosticsMessage:_getFailedFetchDiagnosticsMessage(response),exception:Object(ts_utils.n)(e)})}}(response),_a);if(_enableResponseHeaderTracking&&response){var responseHeaderMap_1={};response.headers.forEach((function(value,name){_canIncludeHeaders(name)&&(responseHeaderMap_1[name]=value)})),ajaxResponse.headerMap=responseHeaderMap_1}return ajaxResponse})),response})).catch((function(reason){throw _reportFetchMetrics(callDetails,0,input,null,fetchData_1,null,{error:reason.message||Object(ts_utils.n)(reason)}),reason})))}},hkErr:_createErrorCallbackFunc(_self,15,"Failed to monitor Window.fetch"+ERROR_POSTFIX)},!0,Object(ts_utils.U)())),_fetchInitialized=!0)}))),isPolyfill&&(global[STR_FETCH].polyfill=isPolyfill)}(),function _populateContext(){var propExt=_self.core.getPlugin("AppInsightsPropertiesPlugin");propExt&&(_context=propExt.plugin[_DYN_CONTEXT])}())},_self._doTeardown=function(){_initDefaults()},_self.trackDependencyData=function(dependency,properties){_reportDependencyInternal(_dependencyInitializers,_self.core,null,dependency,properties)},_self.includeCorrelationHeaders=function(ajaxData,input,init,xhr){var currentWindowHost=_self._currentWindowHost||_currentWindowHost;if(function _processDependencyListeners(listeners,core,ajaxData,xhr,input,init){if(listeners[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]>0){var details={core:core,xhr:xhr,input:input,init:init,traceId:ajaxData[_DynamicConstants_DYN_TRACE_ID],spanId:ajaxData[_DYN_SPAN_ID],traceFlags:ajaxData[_DynamicConstants_DYN_TRACE_FLAGS],context:ajaxData[_DYN_CONTEXT]||{},aborted:!!ajaxData[_DYN_ABORTED]};_processDependencyContainer(core,listeners,details,"listener"),ajaxData[_DynamicConstants_DYN_TRACE_ID]=details.traceId,ajaxData[_DYN_SPAN_ID]=details.spanId,ajaxData[_DynamicConstants_DYN_TRACE_FLAGS]=details[_DynamicConstants_DYN_TRACE_FLAGS],ajaxData[_DYN_CONTEXT]=details[_DYN_CONTEXT]}}(_dependencyListeners,_self.core,ajaxData,xhr,input,init),input||""===input){if(correlationIdCanIncludeCorrelationHeader(_extensionConfig,ajaxData.getAbsoluteUrl(),currentWindowHost)){init||(init={});var headers=new Headers(init.headers||input instanceof Request&&input.headers||{});if(_isUsingAIHeaders){var id="|"+ajaxData[_DynamicConstants_DYN_TRACE_ID]+"."+ajaxData[_DYN_SPAN_ID];headers.set(RequestHeaders[3],id),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[3]]=id)}if((appId=_appId||_context&&_context.appId())&&(headers.set(RequestHeaders[0],RequestHeaders[2]+appId),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[0]]=RequestHeaders[2]+appId)),_isUsingW3CHeaders){var traceFlags=ajaxData[_DynamicConstants_DYN_TRACE_FLAGS];Object(ts_utils.M)(traceFlags)&&(traceFlags=1);var traceParent=formatTraceParent(createTraceParent(ajaxData[_DynamicConstants_DYN_TRACE_ID],ajaxData[_DYN_SPAN_ID],traceFlags));headers.set(RequestHeaders[4],traceParent),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[4]]=traceParent)}init.headers=headers}return init}if(xhr){if(correlationIdCanIncludeCorrelationHeader(_extensionConfig,ajaxData.getAbsoluteUrl(),currentWindowHost)){if(_isUsingAIHeaders)if(ajax_isHeaderSet(xhr,RequestHeaders[3]))_throwInternalWarning(_self,71,"Unable to set ["+RequestHeaders[3]+"] as it has already been set by another instance");else{id="|"+ajaxData[_DynamicConstants_DYN_TRACE_ID]+"."+ajaxData[_DYN_SPAN_ID];xhr.setRequestHeader(RequestHeaders[3],id),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[3]]=id)}var appId;if((appId=_appId||_context&&_context.appId())&&(ajax_isHeaderSet(xhr,RequestHeaders[0])?_throwInternalWarning(_self,71,"Unable to set ["+RequestHeaders[0]+"] as it has already been set by another instance"):(xhr.setRequestHeader(RequestHeaders[0],RequestHeaders[2]+appId),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[0]]=RequestHeaders[2]+appId))),_isUsingW3CHeaders){traceFlags=ajaxData[_DynamicConstants_DYN_TRACE_FLAGS];if(Object(ts_utils.M)(traceFlags)&&(traceFlags=1),ajax_isHeaderSet(xhr,RequestHeaders[4]))_throwInternalWarning(_self,71,"Unable to set ["+RequestHeaders[4]+"] as it has already been set by another instance");else{traceParent=formatTraceParent(createTraceParent(ajaxData[_DynamicConstants_DYN_TRACE_ID],ajaxData[_DYN_SPAN_ID],traceFlags));xhr.setRequestHeader(RequestHeaders[4],traceParent),_enableRequestHeaderTracking&&(ajaxData.requestHeaders[RequestHeaders[4]]=traceParent)}}}return xhr}},_self.trackDependencyDataInternal=function(dependency,properties,systemProperties){if(-1===_maxAjaxCallsPerView||_trackAjaxAttempts<_maxAjaxCallsPerView){2!==_distributedTracingMode&&1!==_distributedTracingMode||"string"!=typeof dependency.id||"."===dependency.id[dependency.id[applicationinsights_dependencies_js_dist_es5_DynamicConstants_DYN_LENGTH]-1]||(dependency.id+="."),Object(ts_utils.M)(dependency.startTime)&&(dependency.startTime=new Date);var item=createTelemetryItem(dependency,RemoteDependencyData_RemoteDependencyData.dataType,RemoteDependencyData_RemoteDependencyData.envelopeType,_self[strDiagLog](),properties,systemProperties);_self.core.track(item)}else _trackAjaxAttempts===_maxAjaxCallsPerView&&_throwInternalCritical(_self,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++_trackAjaxAttempts},_self.addDependencyListener=function(dependencyListener){return ajax_addHandler(_dependencyListeners,_dependencyHandlerId++,dependencyListener)},_self.addDependencyInitializer=function(dependencyInitializer){return ajax_addHandler(_dependencyInitializers,_dependencyHandlerId++,dependencyInitializer)}})),_this}return Object(TsLibShims.b)(AjaxMonitor,_super),AjaxMonitor.prototype.processTelemetry=function(item,itemCtx){this.processNext(item,itemCtx)},AjaxMonitor.prototype.addDependencyInitializer=function(dependencyInitializer){return null},AjaxMonitor.identifier="AjaxDependencyPlugin",AjaxMonitor}(BaseTelemetryPlugin_BaseTelemetryPlugin),Application=function Application(){},Device=function Device(){this.id="browser",this.deviceClass="Browser"},Internal_Internal=function Internal(config,unloadHookContainer){var _this=this,unloadHook=onConfigChange(config,(function(){var prefix=config.sdkExtension;_this.sdkVersion=(prefix?prefix+"_":"")+"javascript:3.3.6"}));unloadHookContainer&&unloadHookContainer.add(unloadHook)},Location=function Location(){},Session=function Session(){},Session_SessionManager=function(){function _SessionManager(config,core,unloadHookContainer){var _storageNamePrefix,_cookieUpdatedTimestamp,_sessionExpirationMs,_sessionRenewalMs,_logger=safeGetLogger(core),_cookieManager=safeGetCookieMgr(core);dynamicProto(_SessionManager,this,(function(_self){config||(config={});var unloadHook=onConfigChange(config,(function(details){_sessionExpirationMs=config.sessionExpirationMs||864e5,_sessionRenewalMs=config.sessionRenewalMs||18e5;var sessionCookiePostfix=config.sessionCookiePostfix||config.namePrefix||"";_storageNamePrefix="ai_session"+sessionCookiePostfix}));function _initializeAutomaticSessionWithData(session,sessionData){var isValid=!1,tokens=sessionData.split("|");if(tokens.length>=2)try{var acqMs=+tokens[1]||0,renewalMs=+tokens[2]||0;isNaN(acqMs)||acqMs<=0?DiagnosticLogger_throwInternal(_logger,2,27,"AI session acquisition date is 0, session will be reset"):isNaN(renewalMs)||renewalMs<=0?DiagnosticLogger_throwInternal(_logger,2,27,"AI session renewal date is 0, session will be reset"):tokens[0]&&(session.id=tokens[0],session.acquisitionDate=acqMs,session.renewalDate=renewalMs,isValid=!0)}catch(e){DiagnosticLogger_throwInternal(_logger,1,9,"Error parsing ai_session value ["+(sessionData||"")+"], session will be reset - "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return isValid}function _setCookie(session,nowMs){var acq=session.acquisitionDate;session.renewalDate=nowMs;var renewalPeriodMs=_sessionRenewalMs,acqTimeLeftMs=acq+_sessionExpirationMs-nowMs,cookie=[session.id,acq,nowMs],maxAgeSec=0;maxAgeSec=acqTimeLeftMs<renewalPeriodMs?acqTimeLeftMs/1e3:renewalPeriodMs/1e3;var cookieDomain=config.cookieDomain||null;_cookieManager.set(_storageNamePrefix,cookie.join("|"),_sessionExpirationMs>0?maxAgeSec:null,cookieDomain),_cookieUpdatedTimestamp=nowMs}unloadHookContainer&&unloadHookContainer.add(unloadHook),_self.automaticSession=new Session,_self.update=function(){var nowMs=Object(ts_utils.Eb)(),isExpired=!1,session=_self.automaticSession;if(session.id||(isExpired=!function _initializeAutomaticSession(session,now){var isValid=!1,cookieValue=_cookieManager.get(_storageNamePrefix);if(cookieValue&&Object(ts_utils.I)(cookieValue.split))isValid=_initializeAutomaticSessionWithData(session,cookieValue);else{var storageValue=utlGetLocalStorage(_logger,_storageNamePrefix);storageValue&&(isValid=_initializeAutomaticSessionWithData(session,storageValue))}return isValid||!!session.id}(session)),!isExpired&&_sessionExpirationMs>0){var timeSinceAcqMs=nowMs-session.acquisitionDate,timeSinceRenewalMs=nowMs-session.renewalDate;isExpired=(isExpired=(isExpired=timeSinceAcqMs<0||timeSinceRenewalMs<0)||timeSinceAcqMs>_sessionExpirationMs)||timeSinceRenewalMs>_sessionRenewalMs}isExpired?function _renew(nowMs){var getNewId=config.getNewId||newId;_self.automaticSession.id=getNewId(config.idLength||22),_self.automaticSession.acquisitionDate=nowMs,_setCookie(_self.automaticSession,nowMs),utlCanUseLocalStorage()||DiagnosticLogger_throwInternal(_logger,2,0,"Browser does not support local storage. Session durations will be inaccurate.")}(nowMs):(!_cookieUpdatedTimestamp||nowMs-_cookieUpdatedTimestamp>6e4)&&_setCookie(session,nowMs)},_self.backup=function(){var session=_self.automaticSession;!function _setStorage(guid,acq,renewal){utlSetLocalStorage(_logger,_storageNamePrefix,[guid,acq,renewal].join("|"))}(session.id,session.acquisitionDate,session.renewalDate)}}))}return _SessionManager.__ieDyn=1,_SessionManager}(),TelemetryTrace_TelemetryTrace=function TelemetryTrace(id,parentId,name,logger){this.traceID=id||generateW3CId(),this.parentID=parentId;var location=getLocation();!name&&location&&location.pathname&&(name=location.pathname),this.name=dataSanitizeString(logger,name)};function _validateUserInput(id){return!("string"!=typeof id||!id||id.match(/,|;|=| |\|/))}var User_User=function(){function User(config,core,unloadHookContainer){this.isNewUser=!1,this.isUserCookieSet=!1;var _storageNamePrefix,_logger=safeGetLogger(core),_cookieManager=safeGetCookieMgr(core);dynamicProto(User,this,(function(_self){Object(ts_utils.eb)(_self,"config",{g:function g(){return config}});var unloadHook=onConfigChange(config,(function(){var userCookiePostfix=config.userCookiePostfix||"";_storageNamePrefix=User.userCookieName+userCookiePostfix;var cookie=_cookieManager.get(_storageNamePrefix);if(cookie){_self.isNewUser=!1;var params=cookie.split(User.cookieSeparator);params.length>0&&(_self.id=params[0],_self.isUserCookieSet=!!_self.id)}if(!_self.id){_self.id=_generateNewId(),_setUserCookie(_generateNewCookie(_self.id).join(User.cookieSeparator));var name_1=(config.namePrefix||"")+"ai_session";!function utlRemoveStorage(logger,name){var storage=_getLocalStorageObject();if(null!==storage)try{return storage[_DYN_REMOVE_ITEM](name),!0}catch(e){StorageHelperFuncs_canUseLocalStorage=!1,DiagnosticLogger_throwInternal(logger,2,5,"Browser failed removal of local storage item. "+getExceptionName(e),{exception:Object(ts_utils.n)(e)})}return!1}(_logger,name_1)}_self.accountId=config.accountId||void 0;var authCookie=_cookieManager.get(User.authUserCookieName);if(authCookie){var authCookieString=(authCookie=decodeURI(authCookie)).split(User.cookieSeparator);authCookieString[0]&&(_self.authenticatedId=authCookieString[0]),authCookieString.length>1&&authCookieString[1]&&(_self.accountId=authCookieString[1])}}));function _generateNewId(){var theConfig=config||{};return(theConfig.getNewId||newId)(theConfig.idLength?config.idLength:22)}function _generateNewCookie(userId){var acqStr=toISOString(new Date);return _self.accountAcquisitionDate=acqStr,_self.isNewUser=!0,[userId,acqStr]}function _setUserCookie(cookie){_self.isUserCookieSet=_cookieManager.set(_storageNamePrefix,cookie,31536e3)}unloadHookContainer&&unloadHookContainer.add(unloadHook),_self.setAuthenticatedUserContext=function(authenticatedUserId,accountId,storeInCookie){if(void 0===storeInCookie&&(storeInCookie=!1),!_validateUserInput(authenticatedUserId)||accountId&&!_validateUserInput(accountId))DiagnosticLogger_throwInternal(_logger,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{_self.authenticatedId=authenticatedUserId;var authCookie=_self.authenticatedId;accountId&&(_self.accountId=accountId,authCookie=[_self.authenticatedId,_self.accountId].join(User.cookieSeparator)),storeInCookie&&_cookieManager.set(User.authUserCookieName,encodeURI(authCookie))}},_self.clearAuthenticatedUserContext=function(){_self.authenticatedId=null,_self.accountId=null,_cookieManager.del(User.authUserCookieName)},_self.update=function(userId){_self.id===userId&&_self.isUserCookieSet||_setUserCookie(_generateNewCookie(userId||_generateNewId()).join(User.cookieSeparator))}}))}return User.cookieSeparator="|",User.userCookieName="ai_user",User.authUserCookieName="ai_authUser",User}();function _removeEmpty(target,name){target&&target[name]&&0===Object(ts_utils.nb)(target[name]).length&&delete target[name]}function _nullResult(){return null}var PropertiesPlugin_a,AISku_a,AISku_b,_c,_d,_internalSdkSrc,TelemetryContext_TelemetryContext=function(){function TelemetryContext(core,defaultConfig,previousTraceCtx,unloadHookContainer){var _this=this,logger=core.logger;dynamicProto(TelemetryContext,this,(function(_self){if(_self.appId=_nullResult,_self.getSessionId=_nullResult,_self.application=new Application,_self.internal=new Internal_Internal(defaultConfig,unloadHookContainer),Object(ts_utils.D)()){_self.sessionManager=new Session_SessionManager(defaultConfig,core,unloadHookContainer),_self.device=new Device,_self.location=new Location,_self.user=new User_User(defaultConfig,core,unloadHookContainer);var name_1,traceId=void 0,parentId=void 0;previousTraceCtx&&(traceId=previousTraceCtx.getTraceId(),parentId=previousTraceCtx.getSpanId(),name_1=previousTraceCtx.getName()),_self.telemetryTrace=new TelemetryTrace_TelemetryTrace(traceId,parentId,name_1,logger),_self.session=new Session}_self.getSessionId=function(){var session=_self.session,sesId=null;if(session&&Object(ts_utils.R)(session.id))sesId=session.id;else{var autoSession=(_self.sessionManager||{}).automaticSession;sesId=autoSession&&Object(ts_utils.R)(autoSession.id)?autoSession.id:null}return sesId},_self.applySessionContext=function(evt,itemCtx){setValue(getSetValue(evt.ext,Extensions_AppExt),"sesId",_self.getSessionId(),ts_utils.R)},_self.applyOperatingSystemContxt=function(evt,itemCtx){setValue(evt.ext,Extensions_OSExt,_self.os)},_self.applyApplicationContext=function(evt,itemCtx){var application=_self.application;if(application){var tags=getSetValue(evt,"tags");setValue(tags,CtxTagKeys.applicationVersion,application.ver,ts_utils.R),setValue(tags,CtxTagKeys.applicationBuild,application.build,ts_utils.R)}},_self.applyDeviceContext=function(evt,itemCtx){var device=_self.device;if(device){var extDevice=getSetValue(getSetValue(evt,"ext"),Extensions_DeviceExt);setValue(extDevice,"localId",device.id,ts_utils.R),setValue(extDevice,"ip",device.ip,ts_utils.R),setValue(extDevice,"model",device.model,ts_utils.R),setValue(extDevice,"deviceClass",device.deviceClass,ts_utils.R)}},_self.applyInternalContext=function(evt,itemCtx){var internal=_self.internal;if(internal){var tags=getSetValue(evt,"tags");setValue(tags,CtxTagKeys.internalAgentVersion,internal.agentVersion,ts_utils.R),setValue(tags,CtxTagKeys.internalSdkVersion,dataSanitizeString(logger,internal.sdkVersion,64),ts_utils.R),evt.baseType!==DiagnosticLogger_InternalLogMessage.dataType&&evt.baseType!==PageView_PageView.dataType||(setValue(tags,CtxTagKeys.internalSnippet,internal.snippetVer,ts_utils.R),setValue(tags,CtxTagKeys.internalSdkSrc,internal.sdkSrc,ts_utils.R))}},_self.applyLocationContext=function(evt,itemCtx){var location=_this.location;location&&setValue(getSetValue(evt,"tags",[]),CtxTagKeys.locationIp,location.ip,ts_utils.R)},_self.applyOperationContext=function(evt,itemCtx){var telemetryTrace=_self.telemetryTrace;if(telemetryTrace){var extTrace=getSetValue(getSetValue(evt,"ext"),Extensions_TraceExt,{traceID:void 0,parentID:void 0});setValue(extTrace,"traceID",telemetryTrace.traceID,ts_utils.R,ts_utils.M),setValue(extTrace,"name",telemetryTrace.name,ts_utils.R,ts_utils.M),setValue(extTrace,"parentID",telemetryTrace.parentID,ts_utils.R,ts_utils.M)}},_self.applyWebContext=function(evt,itemCtx){var web=_this.web;web&&setValue(getSetValue(evt,"ext"),Extensions_WebExt,web)},_self.applyUserContext=function(evt,itemCtx){var user=_self.user;if(user){setValue(getSetValue(evt,"tags",[]),CtxTagKeys.userAccountId,user.accountId,ts_utils.R);var extUser=getSetValue(getSetValue(evt,"ext"),Extensions_UserExt);setValue(extUser,"id",user.id,ts_utils.R),setValue(extUser,"authId",user.authenticatedId,ts_utils.R)}},_self.cleanUp=function(evt,itemCtx){var ext=evt.ext;ext&&(_removeEmpty(ext,Extensions_DeviceExt),_removeEmpty(ext,Extensions_UserExt),_removeEmpty(ext,Extensions_WebExt),_removeEmpty(ext,Extensions_OSExt),_removeEmpty(ext,Extensions_AppExt),_removeEmpty(ext,Extensions_TraceExt))}}))}return TelemetryContext.__ieDyn=1,TelemetryContext}(),PropertiesPlugin_defaultConfig=Object(ts_utils.db)(((PropertiesPlugin_a={accountId:null,sessionRenewalMs:18e5,samplingPercentage:100,sessionExpirationMs:864e5,cookieDomain:null,sdkExtension:null,isBrowserLinkTrackingEnabled:!1,appId:null}).getSessionId=null,PropertiesPlugin_a.namePrefix=undefined,PropertiesPlugin_a.sessionCookiePostfix=undefined,PropertiesPlugin_a.userCookiePostfix=undefined,PropertiesPlugin_a.idLength=22,PropertiesPlugin_a.getNewId=null,PropertiesPlugin_a)),dist_es5_PropertiesPlugin=function(_super){function PropertiesPlugin(){var _extensionConfig,_distributedTraceCtx,_previousTraceCtx,_context,_disableUserInitMessage,_this=_super.call(this)||this;return _this.priority=110,_this.identifier="AppInsightsPropertiesPlugin",dynamicProto(PropertiesPlugin,_this,(function(_self,_base){function _initDefaults(){_extensionConfig=null,_distributedTraceCtx=null,_previousTraceCtx=null,_context=null,_disableUserInitMessage=!0}_initDefaults(),Object(ts_utils.eb)(_self,"context",{g:function g(){return _context}}),_self.initialize=function(config,core,extensions,pluginChain){_base.initialize(config,core,extensions,pluginChain),function _populateDefaults(config){var identifier=_self.identifier,core=_self.core;_self._addHook(onConfigChange(config,(function(){var ctx=createProcessTelemetryContext(null,config,core);config.storagePrefix&&utlSetStoragePrefix(config.storagePrefix),_disableUserInitMessage=!1!==config.disableUserInitMessage,_extensionConfig=ctx.getExtCfg(identifier,PropertiesPlugin_defaultConfig),_self._extConfig=_extensionConfig}))),_previousTraceCtx=core.getTraceCtx(!1),_context=new TelemetryContext_TelemetryContext(core,_extensionConfig,_previousTraceCtx,_self._unloadHooks),_distributedTraceCtx=createDistributedTraceContextFromTrace(_self.context.telemetryTrace,_previousTraceCtx),core.setTraceCtx(_distributedTraceCtx),_self.context.appId=function(){var breezeChannel=core.getPlugin("AppInsightsChannelPlugin");return breezeChannel?breezeChannel.plugin._appId:null}}(config)},_self.processTelemetry=function(event,itemCtx){if(!Object(ts_utils.M)(event)){itemCtx=_self._getTelCtx(itemCtx),event.name===PageView_PageView.envelopeType&&itemCtx.diagLog().resetInternalMessageCount();var theContext=_context||{};theContext.session&&"string"!=typeof _context.session.id&&theContext.sessionManager&&theContext.sessionManager.update();var userCtx=theContext.user;if(userCtx&&!userCtx.isUserCookieSet&&userCtx.update(theContext.user.id),function _processTelemetryInternal(evt,itemCtx){getSetValue(evt,"tags",[]),getSetValue(evt,"ext",{});var ctx=_self.context;ctx.applySessionContext(evt,itemCtx),ctx.applyApplicationContext(evt,itemCtx),ctx.applyDeviceContext(evt,itemCtx),ctx.applyOperationContext(evt,itemCtx),ctx.applyUserContext(evt,itemCtx),ctx.applyOperatingSystemContxt(evt,itemCtx),ctx.applyWebContext(evt,itemCtx),ctx.applyLocationContext(evt,itemCtx),ctx.applyInternalContext(evt,itemCtx),ctx.cleanUp(evt,itemCtx)}(event,itemCtx),userCtx&&userCtx.isNewUser&&(userCtx.isNewUser=!1,!_disableUserInitMessage)){var message=new DiagnosticLogger_InternalLogMessage(72,(Object(ts_utils.w)()||{}).userAgent||"");!function DiagnosticLogger_logInternalMessage(logger,severity,message){_getLogger(logger).logInternalMessage(severity,message)}(itemCtx.diagLog(),1,message)}_self.processNext(event,itemCtx)}},_self._doTeardown=function(unloadCtx,unloadState){var core=(unloadCtx||{}).core();core&&core.getTraceCtx&&(core.getTraceCtx(!1)===_distributedTraceCtx&&core.setTraceCtx(_previousTraceCtx));_initDefaults()}})),_this}return Object(TsLibShims.b)(PropertiesPlugin,_super),PropertiesPlugin.__ieDyn=1,PropertiesPlugin}(BaseTelemetryPlugin_BaseTelemetryPlugin),_ignoreUpdateSnippetProperties=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],default_throttle_config={disabled:!0,limit:cfgDfMerge({samplingRate:100,maxSendNumber:1}),interval:cfgDfMerge({monthInterval:3,daysOfMonth:[28]})},defaultConfigValues=((AISku_a={}).connectionString=undefined,AISku_a.endpointUrl=undefined,AISku_a.instrumentationKey=undefined,AISku_a.userOverrideEndpointUrl=undefined,AISku_a.diagnosticLogInterval=cfgDfValidate((function _chkDiagLevel(value){return value&&value>0}),1e4),AISku_a.featureOptIn=((AISku_b={}).iKeyUsage={mode:3},AISku_b.CdnUsage={mode:2},AISku_b.SdkLoaderVer={mode:2},AISku_b),AISku_a.throttleMgrCfg=cfgDfMerge(((_c={})[109]=cfgDfMerge(default_throttle_config),_c[106]=cfgDfMerge(default_throttle_config),_c[111]=cfgDfMerge(default_throttle_config),_c[110]=cfgDfMerge(default_throttle_config),_c)),AISku_a.extensionConfig=cfgDfMerge(((_d={}).AppInsightsCfgSyncPlugin=cfgDfMerge({cfgUrl:"https://js.monitor.azure.com/scripts/b/ai.config.1.cfg.json",syncMode:2}),_d)),AISku_a);var AISku_AppInsightsSku=function(){function AppInsightsSku(snippet){var dependencies,properties,_sender,_snippetVersion,_evtNamespace,_houseKeepingNamespace,_core,_config,_analyticsPlugin,_cfgSyncPlugin,_throttleMgr,_iKeySentMessage,_cdnSentMessage,_sdkVerSentMessage,_this=this;dynamicProto(AppInsightsSku,this,(function(_self){_initDefaults(),Object(ts_utils.eb)(_self,"config",{g:function g(){return _config}}),Object(ts_utils.b)(["pluginVersionStringArr","pluginVersionString"],(function(key){Object(ts_utils.eb)(_self,key,{g:function g(){return _core?_core[key]:null}})})),_snippetVersion=""+(snippet.sv||snippet.version||""),snippet.queue=snippet.queue||[],snippet.version=snippet.version||2;var cfgHandler=createDynamicConfig(snippet.config||{},defaultConfigValues);function _initDefaults(){_evtNamespace=createUniqueNamespace("AISKU"),_houseKeepingNamespace=null,dependencies=null,properties=null,_sender=null,_snippetVersion=null,_throttleMgr=null,_iKeySentMessage=!1,_cdnSentMessage=!1,_sdkVerSentMessage=!1,_cfgSyncPlugin=new CfgSyncPlugin_CfgSyncPlugin}function _removePageEventHandlers(){_houseKeepingNamespace&&(!function removePageUnloadEventListener(listener,evtNamespace){removeEventListeners([strBeforeUnload,strUnload,strPageHide],listener,evtNamespace)}(null,_houseKeepingNamespace),function removePageHideEventListener(listener,evtNamespace){var newNamespaces=mergeEvtNamespace(strPageHideNamespace,evtNamespace);removeEventListeners([strPageHide],listener,newNamespaces),removeEventListeners([strVisibilityChangeEvt],null,newNamespaces)}(null,_houseKeepingNamespace))}function _addUnloadHook(hooks){_core.addUnloadHook(hooks)}_config=cfgHandler.cfg,_analyticsPlugin=new AnalyticsPlugin_AnalyticsPlugin,Object(ts_utils.eb)(_self,"appInsights",{g:function g(){return _analyticsPlugin}}),properties=new dist_es5_PropertiesPlugin,dependencies=new ajax_AjaxMonitor,_sender=new Sender_Sender,_core=new AppInsightsCore_AppInsightsCore,Object(ts_utils.eb)(_self,"core",{g:function g(){return _core}}),_addUnloadHook(onConfigChange(cfgHandler,(function(){var configCs=_config.connectionString;function _parseCs(){return Object(ts_async.d)((function(resolve,reject){Object(ts_async.e)(configCs,(function(res){var curCs=res&&res.value,parsedCs=null;!res.rejected&&curCs&&(_config.connectionString=curCs,parsedCs=parseConnectionString(curCs)),resolve(parsedCs)}))}))}if(Object(ts_utils.Q)(configCs)){var ikeyPromise=Object(ts_async.d)((function(resolve,reject){_parseCs().then((function(cs){var ikey=_config.instrumentationKey;ikey=cs&&cs.instrumentationkey||ikey,resolve(ikey)})).catch((function(e){resolve(null)}))})),url=_config.userOverrideEndpointUrl;Object(ts_utils.M)(url)&&(url=Object(ts_async.d)((function(resolve,reject){_parseCs().then((function(cs){var url=_config.endpointUrl,ingest=cs&&cs.ingestionendpoint;resolve(url=ingest?ingest+"/v2/track":url)})).catch((function(e){resolve(null)}))}))),_config.instrumentationKey=ikeyPromise,_config.endpointUrl=url}if(Object(ts_utils.R)(configCs)&&configCs){var cs=parseConnectionString(configCs),ingest=cs.ingestionendpoint;_config.endpointUrl=_config.userOverrideEndpointUrl?_config.userOverrideEndpointUrl:ingest+"/v2/track",_config.instrumentationKey=cs.instrumentationkey||_config.instrumentationKey}_config.endpointUrl=_config.userOverrideEndpointUrl?_config.userOverrideEndpointUrl:_config.endpointUrl}))),_self.snippet=snippet,_self.flush=function(async,callBack){var result;return void 0===async&&(async=!0),doPerf(_core,(function(){return"AISKU.flush"}),(function(){async&&!callBack&&(result=Object(ts_async.b)((function(resolve){callBack=resolve})));var waiting=1,flushDone=function flushDone(){0===--waiting&&callBack()};Object(ts_utils.b)(_core.getChannels(),(function(channel){channel&&(waiting++,channel.flush(async,flushDone))})),flushDone()}),null,async),result},_self.onunloadFlush=function(async){void 0===async&&(async=!0),Object(ts_utils.b)(_core.getChannels(),(function(channel){channel.onunloadFlush?channel.onunloadFlush():channel.flush(async)}))},_self.loadAppInsights=function(legacyMode,logger,notificationManager){return void 0===legacyMode&&(legacyMode=!1),legacyMode&&Object(ts_utils.Db)("Legacy Mode is no longer supported"),doPerf(_self.core,(function(){return"AISKU.loadAppInsights"}),(function(){_core.initialize(_config,[_sender,properties,dependencies,_analyticsPlugin,_cfgSyncPlugin],logger,notificationManager),Object(ts_utils.eb)(_self,"context",{g:function g(){return properties.context}}),_throttleMgr||(_throttleMgr=new ThrottleMgr_ThrottleMgr(_core));var sdkSrc=function _findSdkSourceFile(){if(_internalSdkSrc)return _internalSdkSrc;var sdkSrc=null,isModule=!1,cdns=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var scrpt=(document||{}).currentScript;scrpt&&(sdkSrc=scrpt.src)}catch(e){}if(sdkSrc){try{var url_1=sdkSrc.toLowerCase();if(url_1){var src_1="";Object(ts_utils.b)(cdns,(function(value,idx){if(-1!==Object(ts_utils.ub)(url_1,value))return src_1="cdn"+(idx+1),-1===Object(ts_utils.ub)(url_1,"/scripts/")&&(-1!==Object(ts_utils.ub)(url_1,"/next/")?src_1+="-next":-1!==Object(ts_utils.ub)(url_1,"/beta/")&&(src_1+="-beta")),_internalSdkSrc=src_1+(isModule?".mod":""),-1}))}}catch(e){}_internalSdkSrc=sdkSrc}return _internalSdkSrc}();sdkSrc&&_self.context&&(_self.context.internal.sdkSrc=sdkSrc),function _updateSnippetProperties(snippet){if(snippet){var snippetVer="";Object(ts_utils.M)(_snippetVersion)||(snippetVer+=_snippetVersion),_self.context&&_self.context.internal&&(_self.context.internal.snippetVer=snippetVer||"-"),Object(ts_utils.ib)(_self,(function(field,value){Object(ts_utils.R)(field)&&!Object(ts_utils.I)(value)&&field&&"_"!==field[0]&&-1===Object(ts_utils.c)(_ignoreUpdateSnippetProperties,field)&&snippet[field]!==value&&(snippet[field]=value)}))}}(_self.snippet),_self.emptyQueue(),_self.pollInternalLogs(),_self.addHousekeepingBeforeUnload(_self),_addUnloadHook(onConfigChange(cfgHandler,(function(){var defaultEnable=!1;_config.throttleMgrCfg[109]&&(defaultEnable=!_config.throttleMgrCfg[109].disabled),!_throttleMgr.isReady()&&_config.extensionConfig&&_config.extensionConfig[_cfgSyncPlugin.identifier]&&defaultEnable&&_throttleMgr.onReadyState(!0),_iKeySentMessage||_config.connectionString||!isFeatureEnabled("iKeyUsage",_config)||(_throttleMgr.sendMessage(106,"See Instrumentation key support at aka.ms/IkeyMigrate"),_iKeySentMessage=!0),!_cdnSentMessage&&_self.context.internal.sdkSrc&&-1!=_self.context.internal.sdkSrc.indexOf("az416426")&&isFeatureEnabled("CdnUsage",_config)&&(_throttleMgr.sendMessage(110,"See Cdn support notice at aka.ms/JsActiveCdn"),_cdnSentMessage=!0),!_sdkVerSentMessage&&parseInt(_snippetVersion)<6&&isFeatureEnabled("SdkLoaderVer",_config)&&(_throttleMgr.sendMessage(111,"An updated Sdk Loader is available, see aka.ms/SnippetVer"),_sdkVerSentMessage=!0)})))})),_self},_self.updateSnippetDefinitions=function(snippet){!function proxyAssign(target,source,chkSet){if(target&&source&&Object(ts_utils.O)(target)&&Object(ts_utils.O)(source)){var _loop_1=function _loop_1(field){if(Object(ts_utils.R)(field)){var value=source[field];Object(ts_utils.I)(value)?chkSet&&!chkSet(field,!0,source,target)||(target[field]=_createProxyFunction(source,field)):chkSet&&!chkSet(field,!1,source,target)||(Object(ts_utils.lb)(target,field)&&delete target[field],Object(ts_utils.eb)(target,field,{g:function g(){return source[field]},s:function s(theValue){source[field]=theValue}}))}};for(var field in source)_loop_1(field)}return target}(snippet,_self,(function(name){return name&&-1===Object(ts_utils.c)(_ignoreUpdateSnippetProperties,name)}))},_self.emptyQueue=function(){try{if(Object(ts_utils.E)(_self.snippet.queue)){for(var length_1=_self.snippet.queue.length,i=0;i<length_1;i++){(0,_self.snippet.queue[i])()}_self.snippet.queue=void 0,delete _self.snippet.queue}}catch(exception){exception&&Object(ts_utils.I)(exception.toString)&&exception.toString()}},_self.addHousekeepingBeforeUnload=function(appInsightsInstance){if(Object(ts_utils.D)()||Object(ts_utils.z)()){var performHousekeeping_1=function performHousekeeping_1(){if(appInsightsInstance.onunloadFlush(!1),Object(ts_utils.I)(_self.core.getPlugin)){var loadedPlugin=_this.core.getPlugin("AppInsightsPropertiesPlugin");if(loadedPlugin){var propertiesPlugin=loadedPlugin.plugin;propertiesPlugin&&propertiesPlugin.context&&propertiesPlugin.context._sessionManager&&propertiesPlugin.context._sessionManager.backup()}}},added_1=!1;_houseKeepingNamespace||(_houseKeepingNamespace=mergeEvtNamespace(_evtNamespace,_core.evtNamespace&&_core.evtNamespace())),_addUnloadHook(onConfigChange(_config,(function(details){var coreConfig=details.cfg,analyticsPlugin=appInsightsInstance.appInsights,extConfig=createProcessTelemetryContext(null,coreConfig,analyticsPlugin.core).getExtCfg(analyticsPlugin.identifier||"ApplicationInsightsAnalytics");_removePageEventHandlers();var excludePageUnloadEvents=coreConfig.disablePageUnloadEvents;extConfig.disableFlushOnBeforeUnload||(addPageUnloadEventListener(performHousekeeping_1,excludePageUnloadEvents,_houseKeepingNamespace)&&(added_1=!0),addPageHideEventListener(performHousekeeping_1,excludePageUnloadEvents,_houseKeepingNamespace)&&(added_1=!0),added_1||function isReactNative(){var nav=Object(ts_utils.w)();return!(!nav||!nav.product)&&nav.product===strReactNative}()||DiagnosticLogger_throwInternal(_core.logger,1,19,"Could not add handler for beforeunload and pagehide")),added_1||extConfig.disableFlushOnUnload||addPageHideEventListener(performHousekeeping_1,excludePageUnloadEvents,_houseKeepingNamespace)})))}},_self.getSender=function(){return _sender},_self.unload=function(isAsync,unloadComplete,cbTimeout){var result,unloadDone=!1;return isAsync&&!unloadComplete&&(result=Object(ts_async.b)((function(resolve){unloadComplete=resolve}))),_self.onunloadFlush(isAsync),_removePageEventHandlers(),_core.unload&&_core.unload(isAsync,(function _unloadCallback(unloadState){unloadDone||(unloadDone=!0,_initDefaults(),unloadComplete&&unloadComplete(unloadState))}),cbTimeout),result},proxyFunctions(_self,_analyticsPlugin,["getCookieMgr","trackEvent","trackPageView","trackPageViewPerformance","trackException","_onerror","trackTrace","trackMetric","startTrackPage","stopTrackPage","startTrackEvent","stopTrackEvent"]),proxyFunctions(_self,(function _getCurrentDependencies(){return dependencies}),["trackDependencyData","addDependencyListener","addDependencyInitializer"]),proxyFunctions(_self,_core,["addTelemetryInitializer","pollInternalLogs","stopPollingInternalLogs","getPlugin","addPlugin","evtNamespace","addUnloadCb","getTraceCtx","updateCfg","onCfgChange"]),proxyFunctions(_self,(function(){var context=properties.context;return context?context.user:null}),["setAuthenticatedUserContext","clearAuthenticatedUserContext"])}))}return AppInsightsSku.prototype.addDependencyInitializer=function(dependencyInitializer){return null},AppInsightsSku}();var ApplicationInsightsContainer_ApplicationInsightsContainer=function(){function ApplicationInsightsContainer(){}return ApplicationInsightsContainer.getAppInsights=function(snippet,version){var theSku=new AISku_AppInsightsSku(snippet);if(version>=2)return theSku.updateSnippetDefinitions(snippet),theSku.loadAppInsights(!1),theSku;Object(ts_utils.Db)("V1 API compatibility is no longer supported")},ApplicationInsightsContainer}(),LoggingSeverity=createEnumStyle({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),SeverityLevel=createEnumStyle({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},"./node_modules/@nevware21/ts-async/dist/es5/mod/ts-async.js":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return createAllPromise})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createPromise})),__webpack_require__.d(__webpack_exports__,"c",(function(){return createSyncAllSettledPromise})),__webpack_require__.d(__webpack_exports__,"d",(function(){return createSyncPromise})),__webpack_require__.d(__webpack_exports__,"e",(function(){return doAwaitResponse}));var _debugState,_debugResult,_debugHandled,_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js"),STR_PROMISE="Promise",REJECTED="rejected";function doAwaitResponse(value,cb){return doAwait(value,(function(value){return cb?cb({status:"fulfilled",rejected:!1,value:value}):value}),(function(reason){return cb?cb({status:REJECTED,rejected:!0,reason:reason}):reason}))}function doAwait(value,resolveFn,rejectFn,finallyFn){var result=value;try{if(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Q)(value))(resolveFn||rejectFn)&&(result=value.then(resolveFn,rejectFn));else try{resolveFn&&(result=resolveFn(value))}catch(err){if(!rejectFn)throw err;result=rejectFn(err)}}finally{finallyFn&&doFinally(result,finallyFn)}return result}function doFinally(value,finallyFn){var result=value;return finallyFn&&(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Q)(value)?result=value.finally?value.finally(finallyFn):value.then((function(value){return finallyFn(),value}),(function(reason){throw finallyFn(),reason})):finallyFn()),result}var _promiseDebugEnabled=!1;var _hasInitEvent,STRING_STATES=["pending","resolving","resolved",REJECTED],DISPATCH_EVENT="dispatchEvent";function _hasInitEventFn(doc){var evt;return doc&&doc.createEvent&&(evt=doc.createEvent("Event")),!!evt&&evt.initEvent}var _hasPromiseRejectionEvent,NODE_UNHANDLED_REJECTION="unhandledRejection",UNHANDLED_REJECTION=NODE_UNHANDLED_REJECTION.toLowerCase(),_currentPromiseId=[],_uniquePromiseId=0,_unhandledRejectionTimeout=10;function dumpFnObj(value){return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.I)(value)?value.toString():Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.n)(value)}function _createPromise(newPromise,processor,executor){var _settledValue,_thePromise,additionalArgs=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.f)(arguments,3),_state=0,_hasResolved=!1,_queue=[],_id=_uniquePromiseId++,_parentId=_currentPromiseId.length>0?_currentPromiseId[_currentPromiseId.length-1]:void 0,_handled=!1,_unHandledRejectionHandler=null;function _then(onResolved,onRejected){try{return _currentPromiseId.push(_id),_handled=!0,_unHandledRejectionHandler&&_unHandledRejectionHandler.cancel(),_unHandledRejectionHandler=null,newPromise((function(resolve,reject){_queue.push((function(){try{var handler=2===_state?onResolved:onRejected,value=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.T)(handler)?_settledValue:Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.I)(handler)?handler(_settledValue):handler;Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Q)(value)?value.then(resolve,reject):handler?resolve(value):3===_state?reject(value):resolve(value)}catch(e){reject(e)}})),_hasResolved&&_processQueue()}),additionalArgs)}finally{_currentPromiseId.pop()}}function _strState(){return STRING_STATES[_state]}function _processQueue(){if(_queue.length>0){var pending=_queue.slice();_queue=[],_handled=!0,_unHandledRejectionHandler&&_unHandledRejectionHandler.cancel(),_unHandledRejectionHandler=null,processor(pending)}}function _createSettleIfFn(newState,allowState){return function(theValue){if(_state===allowState){if(2===newState&&Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Q)(theValue))return _state=1,void theValue.then(_createSettleIfFn(2,1),_createSettleIfFn(3,1));_state=newState,_hasResolved=!0,_settledValue=theValue,_processQueue(),_handled||3!==newState||_unHandledRejectionHandler||(_unHandledRejectionHandler=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.rb)(_notifyUnhandledRejection,_unhandledRejectionTimeout))}}}function _notifyUnhandledRejection(){if(!_handled)if(_handled=!0,Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.L)())process.emit(NODE_UNHANDLED_REJECTION,_settledValue,_thePromise);else{var gbl=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.y)()||Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.q)();!_hasPromiseRejectionEvent&&(_hasPromiseRejectionEvent=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.h)(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.pb)(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.s,[STR_PROMISE+"RejectionEvent"]).v)),function emitEvent(target,evtName,populateEvent,useNewEvent){var doc=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.p)();!_hasInitEvent&&(_hasInitEvent=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.h)(!!Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.pb)(_hasInitEventFn,[doc]).v));var theEvt=_hasInitEvent.v?doc.createEvent("Event"):useNewEvent?new Event(evtName):{};if(populateEvent&&populateEvent(theEvt),_hasInitEvent.v&&theEvt.initEvent(evtName,!1,!0),theEvt&&target[DISPATCH_EVENT])target[DISPATCH_EVENT](theEvt);else{var handler=target["on"+evtName];if(handler)handler(theEvt);else{var theConsole=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.s)("console");theConsole&&(theConsole.error||theConsole.log)(evtName,Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.n)(theEvt))}}}(gbl,UNHANDLED_REJECTION,(function(theEvt){return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.eb)(theEvt,"promise",{g:function g(){return _thePromise}}),theEvt.reason=_settledValue,theEvt}),!!_hasPromiseRejectionEvent.v)}}return _thePromise={then:_then,catch:function _catch(onRejected){return _then(void 0,onRejected)},finally:function _finally(onFinally){var thenFinally=onFinally,catchFinally=onFinally;return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.I)(onFinally)&&(thenFinally=function thenFinally(value){return onFinally&&onFinally(),value},catchFinally=function catchFinally(reason){throw onFinally&&onFinally(),reason}),_then(thenFinally,catchFinally)}},Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.fb)(_thePromise,"state",{get:_strState}),_promiseDebugEnabled&&function _addDebugState$1(thePromise,stateFn,resultFn,handledFn){_debugResult=_debugResult||{toString:function toString(){return"[[PromiseResult]]"}},_debugHandled=_debugHandled||{toString:function toString(){return"[[PromiseIsHandled]]"}};var props={};props[_debugState=_debugState||{toString:function toString(){return"[[PromiseState]]"}}]={get:stateFn},props[_debugResult]={get:resultFn},props[_debugHandled]={get:handledFn},Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.gb)(thePromise,props)}(_thePromise,_strState,(function(){return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.ob)(_settledValue)}),(function(){return _handled})),Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.C)()&&(_thePromise[Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.t)(11)]="IPromise"),_thePromise.toString=function _toString(){return"IPromise"+(_promiseDebugEnabled?"["+_id+(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.T)(_parentId)?"":":"+_parentId)+"]":"")+" "+_strState()+(_hasResolved?" - "+dumpFnObj(_settledValue):"")},function _initialize(){Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.I)(executor)||Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Cb)(STR_PROMISE+": executor is not a function - "+dumpFnObj(executor));var _rejectFn=_createSettleIfFn(3,0);try{executor.call(_thePromise,_createSettleIfFn(2,0),_rejectFn)}catch(e){_rejectFn(e)}}(),_thePromise}function _createAllPromise(newPromise){return function(input){var additionalArgs=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.f)(arguments,1);return newPromise((function(resolve,reject){try{var values_1=[],pending_1=1;Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.V)(input,(function(item,idx){item&&(pending_1++,doAwait(item,(function(value){values_1[idx]=value,0==--pending_1&&resolve(values_1)}),reject))})),0===--pending_1&&resolve(values_1)}catch(e){reject(e)}}),additionalArgs)}}function _createAllSettledPromise(newPromise){return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.h)((function(input){var additionalArgs=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.f)(arguments,1);return newPromise((function(resolve,reject){var values=[],pending=1;function processItem(item,idx){pending++,doAwaitResponse(item,(function(value){value.rejected?values[idx]={status:REJECTED,reason:value.reason}:values[idx]={status:"fulfilled",value:value.value},0==--pending&&resolve(values)}))}try{Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.E)(input)?Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.b)(input,processItem):Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.J)(input)?Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.V)(input,processItem):Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Cb)("Input is not an iterable"),0===--pending&&resolve(values)}catch(e){reject(e)}}),additionalArgs)}))}function syncItemProcessor(pending){Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.b)(pending,(function(fn){try{fn()}catch(e){}}))}function createAsyncPromise(executor,timeout){return _createPromise(createAsyncPromise,function timeoutItemProcessor(timeout){var callbackTimeout=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.N)(timeout)?timeout:0;return function(pending){Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.rb)((function(){syncItemProcessor(pending)}),callbackTimeout)}}(timeout),executor,timeout)}var _promiseCls;function createNativePromise(executor,timeout){!_promiseCls&&(_promiseCls=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.h)(Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.pb)(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.s,[STR_PROMISE]).v||null));var PrmCls=_promiseCls.v;if(!PrmCls)return createAsyncPromise(executor);Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.I)(executor)||Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.Cb)(STR_PROMISE+": executor is not a function - "+Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.n)(executor));var _state=0;var thePromise=new PrmCls((function(resolve,reject){executor((function _resolve(value){_state=2,resolve(value)}),(function _reject(reason){_state=3,reject(reason)}))}));return Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.fb)(thePromise,"state",{get:function _strState(){return STRING_STATES[_state]}}),thePromise}var _allSyncSettledCreator;function createSyncPromise(executor){return _createPromise(createSyncPromise,syncItemProcessor,executor)}function createSyncAllSettledPromise(input,timeout){return!_allSyncSettledCreator&&(_allSyncSettledCreator=_createAllSettledPromise(createSyncPromise)),_allSyncSettledCreator.v(input,timeout)}var _promiseCreator;function createPromise(executor,timeout){return!_promiseCreator&&(_promiseCreator=Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.h)(createNativePromise)),_promiseCreator.v.call(this,executor,timeout)}var createAllPromise=_createAllPromise(createPromise);Object(_nevware21_ts_utils__WEBPACK_IMPORTED_MODULE_0__.t)(11)}).call(this,__webpack_require__("./node_modules/process/browser.js"))},"./node_modules/@nevware21/ts-utils/dist/es5/mod/ts-utils.js":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _pureAssign(func1,func2){return func1||func2}function _pureRef(value,name){return value[name]}__webpack_require__.d(__webpack_exports__,"a",(function(){return arrAppend})),__webpack_require__.d(__webpack_exports__,"b",(function(){return arrForEach})),__webpack_require__.d(__webpack_exports__,"c",(function(){return arrIndexOf})),__webpack_require__.d(__webpack_exports__,"d",(function(){return arrMap})),__webpack_require__.d(__webpack_exports__,"e",(function(){return arrReduce})),__webpack_require__.d(__webpack_exports__,"f",(function(){return arrSlice})),__webpack_require__.d(__webpack_exports__,"g",(function(){return asString})),__webpack_require__.d(__webpack_exports__,"h",(function(){return createCachedValue})),__webpack_require__.d(__webpack_exports__,"i",(function(){return createCustomError})),__webpack_require__.d(__webpack_exports__,"j",(function(){return createEnum})),__webpack_require__.d(__webpack_exports__,"k",(function(){return createTimeout})),__webpack_require__.d(__webpack_exports__,"l",(function(){return createTypeMap})),__webpack_require__.d(__webpack_exports__,"m",(function(){return deepExtend})),__webpack_require__.d(__webpack_exports__,"n",(function(){return dumpObj})),__webpack_require__.d(__webpack_exports__,"o",(function(){return fnCall})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getDocument})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getGlobal})),__webpack_require__.d(__webpack_exports__,"r",(function(){return getHistory})),__webpack_require__.d(__webpack_exports__,"s",(function(){return getInst})),__webpack_require__.d(__webpack_exports__,"t",(function(){return getKnownSymbol})),__webpack_require__.d(__webpack_exports__,"u",(function(){return getLazy})),__webpack_require__.d(__webpack_exports__,"v",(function(){return getLength})),__webpack_require__.d(__webpack_exports__,"w",(function(){return getNavigator})),__webpack_require__.d(__webpack_exports__,"x",(function(){return getPerformance})),__webpack_require__.d(__webpack_exports__,"y",(function(){return getWindow})),__webpack_require__.d(__webpack_exports__,"z",(function(){return hasDocument})),__webpack_require__.d(__webpack_exports__,"A",(function(){return hasHistory})),__webpack_require__.d(__webpack_exports__,"B",(function(){return hasNavigator})),__webpack_require__.d(__webpack_exports__,"C",(function(){return hasSymbol})),__webpack_require__.d(__webpack_exports__,"D",(function(){return hasWindow})),__webpack_require__.d(__webpack_exports__,"E",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"F",(function(){return isBoolean})),__webpack_require__.d(__webpack_exports__,"G",(function(){return isDefined})),__webpack_require__.d(__webpack_exports__,"H",(function(){return isError})),__webpack_require__.d(__webpack_exports__,"I",(function(){return isFunction})),__webpack_require__.d(__webpack_exports__,"J",(function(){return isIterable})),__webpack_require__.d(__webpack_exports__,"K",(function(){return isIterator})),__webpack_require__.d(__webpack_exports__,"L",(function(){return isNode})),__webpack_require__.d(__webpack_exports__,"M",(function(){return isNullOrUndefined})),__webpack_require__.d(__webpack_exports__,"N",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"O",(function(){return isObject})),__webpack_require__.d(__webpack_exports__,"P",(function(){return isPlainObject})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return isPromiseLike})),__webpack_require__.d(__webpack_exports__,"R",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"S",(function(){return isTruthy})),__webpack_require__.d(__webpack_exports__,"T",(function(){return isUndefined})),__webpack_require__.d(__webpack_exports__,"U",(function(){return isWebWorker})),__webpack_require__.d(__webpack_exports__,"V",(function(){return iterForOf})),__webpack_require__.d(__webpack_exports__,"W",(function(){return mathFloor})),__webpack_require__.d(__webpack_exports__,"X",(function(){return mathMax})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return mathMin})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return mathRound})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return newSymbol})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return objAssign})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return objCreate})),__webpack_require__.d(__webpack_exports__,"db",(function(){return objDeepFreeze})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return objDefine})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return objDefineProp})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return objDefineProperties})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return objExtend})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return objForEachKey})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return objFreeze})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return objGetOwnPropertyDescriptor})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return objHasOwn})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return objHasOwnProperty})),__webpack_require__.d(__webpack_exports__,"nb",(function(){return objKeys})),__webpack_require__.d(__webpack_exports__,"ob",(function(){return objToString})),__webpack_require__.d(__webpack_exports__,"pb",(function(){return safe})),__webpack_require__.d(__webpack_exports__,"qb",(function(){return scheduleIdleCallback})),__webpack_require__.d(__webpack_exports__,"rb",(function(){return scheduleTimeout})),__webpack_require__.d(__webpack_exports__,"sb",(function(){return setValueByKey})),__webpack_require__.d(__webpack_exports__,"tb",(function(){return strEndsWith})),__webpack_require__.d(__webpack_exports__,"ub",(function(){return strIndexOf})),__webpack_require__.d(__webpack_exports__,"vb",(function(){return strLeft})),__webpack_require__.d(__webpack_exports__,"wb",(function(){return strSplit})),__webpack_require__.d(__webpack_exports__,"xb",(function(){return strSubstr})),__webpack_require__.d(__webpack_exports__,"yb",(function(){return strSubstring})),__webpack_require__.d(__webpack_exports__,"zb",(function(){return strTrim})),__webpack_require__.d(__webpack_exports__,"Ab",(function(){return symbolFor})),__webpack_require__.d(__webpack_exports__,"Bb",(function(){return throwError})),__webpack_require__.d(__webpack_exports__,"Cb",(function(){return throwTypeError})),__webpack_require__.d(__webpack_exports__,"Db",(function(){return throwUnsupported})),__webpack_require__.d(__webpack_exports__,"Eb",(function(){return utcNow}));var _primitiveTypes,UNDEF_VALUE=void 0,NULL_VALUE=null,EMPTY="",FUNCTION="function",OBJECT="object",PROTOTYPE="prototype",__PROTO__="__proto__",UNDEFINED="undefined",CONSTRUCTOR="constructor",SYMBOL="Symbol",LENGTH="length",NAME="name",CALL="call",TO_STRING="toString",ObjClass=_pureAssign(Object),ObjProto=_pureRef(ObjClass,PROTOTYPE),StrCls=_pureAssign(String),StrProto=_pureRef(StrCls,PROTOTYPE),MathCls=_pureAssign(Math),ArrCls=_pureAssign(Array),ArrProto=_pureRef(ArrCls,PROTOTYPE),ArrSlice=_pureRef(ArrProto,"slice"),POLYFILL_TAG="_polyfill",POLYFILL_TYPE_NAME="__nw21$polytype__";function safe(func,argArray){try{return{v:func.apply(this,argArray)}}catch(e){return{e:e}}}function _createIs(theType){return function(value){return _typeof(value)===theType}}function _createObjIs(theName){var theType="[object "+theName+"]";return function(value){return!(!value||objToString(value)!==theType)}}function objToString(value){return ObjProto[TO_STRING].call(value)}function isUndefined(value){return _typeof(value)===UNDEFINED||value===UNDEFINED}function isNullOrUndefined(value){return value===NULL_VALUE||isUndefined(value)}function isStrictNullOrUndefined(value){return value===NULL_VALUE||value===UNDEF_VALUE}function isDefined(arg){return!!arg||arg!==UNDEF_VALUE}function isPrimitiveType(theType){return!_primitiveTypes&&(_primitiveTypes=["string","number","boolean",UNDEFINED,"symbol","bigint"]),!(theType===OBJECT||-1===_primitiveTypes.indexOf(theType))}var isString=_createIs("string"),isFunction=_createIs(FUNCTION);function isObject(value){return!(!value&&isNullOrUndefined(value))&&(!!value&&_typeof(value)===OBJECT)}var isArray=_pureRef(ArrCls,"isArray"),isDate=_createObjIs("Date"),isNumber=_createIs("number"),isBoolean=_createIs("boolean"),isError=_createObjIs("Error");function isPromiseLike(value){return!!(value&&value.then&&isFunction(value.then))}function isTruthy(value){return!(!value||function safeGet(cb,defValue,argArray){var result=safe(cb,argArray);return result.e?defValue:result.v}((function(){return!(value&&0+value)}),!value))}function _returnNothing(){}function _returnFalse(){return!1}var asString=_pureAssign(StrCls),ERROR_TYPE="[object Error]";function dumpObj(object,format){var propertyValueDump=EMPTY,objType=ObjProto[TO_STRING][CALL](object);objType===ERROR_TYPE&&(object={stack:asString(object.stack),message:asString(object.message),name:asString(object.name)});try{propertyValueDump=((propertyValueDump=JSON.stringify(object,NULL_VALUE,format?"number"==typeof format?format:4:UNDEF_VALUE))?propertyValueDump.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):NULL_VALUE)||asString(object)}catch(e){propertyValueDump=" - "+dumpObj(e,format)}return objType+": "+propertyValueDump}function throwError(message){throw new Error(message)}function throwTypeError(message){throw new TypeError(message)}function _throwIfNullOrUndefined(obj){isStrictNullOrUndefined(obj)&&throwTypeError("Cannot convert undefined or null to object")}function _throwIfNotString(value){isString(value)||throwTypeError("'"+dumpObj(value)+"' is not a string")}function objHasOwnProperty(obj,prop){return!!obj&&ObjProto.hasOwnProperty[CALL](obj,prop)}var _objGetOwnPropertyDescriptor$2=_pureAssign(_pureRef(ObjClass,"getOwnPropertyDescriptor"),_returnNothing),objHasOwn=_pureAssign(_pureRef(ObjClass,"hasOwn"),polyObjHasOwn);function polyObjHasOwn(obj,prop){return _throwIfNullOrUndefined(obj),objHasOwnProperty(obj,prop)||!!_objGetOwnPropertyDescriptor$2(obj,prop)}function objForEachKey(theObject,callbackfn,thisArg){if(theObject&&(isObject(theObject)||isFunction(theObject)))for(var prop in theObject)if(objHasOwn(theObject,prop)&&-1===callbackfn[CALL](thisArg||theObject,prop,theObject[prop]))break}function arrForEach(theArray,callbackfn,thisArg){if(theArray)for(var len=theArray[LENGTH]>>>0,idx=0;idx<len&&(!(idx in theArray)||-1!==callbackfn[CALL](thisArg||theArray,theArray[idx],idx,theArray));idx++);}var _unwrapFunction=_unwrapFunctionWithPoly;function _unwrapFunctionWithPoly(funcName,clsProto,polyFunc){var clsFn=clsProto?clsProto[funcName]:NULL_VALUE;return function(thisArg){var theFunc=(thisArg?thisArg[funcName]:NULL_VALUE)||clsFn;if(theFunc||polyFunc){var theArgs=arguments;return(theFunc||polyFunc).apply(thisArg,theFunc?ArrSlice[CALL](theArgs,1):theArgs)}throwTypeError('"'+asString(funcName)+'" not defined for '+dumpObj(thisArg))}}function _unwrapProp(propName){return function(thisArg){return thisArg[propName]}}var _objGetOwnPropertyDescriptor$1=_pureAssign(_pureRef(ObjClass,"getOwnPropertyDescriptor"),_returnNothing),propMap={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function _createProp(value){var prop={};if(prop[propMap.c]=!0,prop[propMap.e]=!0,value.l){prop.get=function(){return value.l.v};var desc=_objGetOwnPropertyDescriptor$1(value.l,"v");desc&&desc.set&&(prop.set=function(newValue){value.l.v=newValue})}return objForEachKey(value,(function(key,value){prop[propMap[key]]=function isStrictUndefined(arg){return arg===UNDEF_VALUE}(value)?prop[propMap[key]]:value})),prop}var objDefineProp=_pureRef(ObjClass,"defineProperty"),objDefineProperties=_pureRef(ObjClass,"defineProperties");function objDefine(target,key,propDesc){return objDefineProp(target,key,_createProp(propDesc))}function _createKeyValueMap(values,keyType,valueType,completeFn,writable){var theMap={};return objForEachKey(values,(function(key,value){_assignMapValue(theMap,key,keyType?value:key),_assignMapValue(theMap,value,valueType?value:key)})),completeFn?completeFn(theMap):theMap}function _assignMapValue(theMap,key,value,writable){objDefineProp(theMap,key,{value:value,enumerable:!0,writable:!1})}var objIsFrozen=_pureAssign(_pureRef(ObjClass,"isFrozen"),_returnFalse),_objFreeze=_pureRef(ObjClass,"freeze");function _doNothing(value){return value}function _getProto(value){return _throwIfNullOrUndefined(value),value[__PROTO__]||NULL_VALUE}var objAssign=_pureRef(ObjClass,"assign"),objKeys=_pureRef(ObjClass,"keys");function _deepFreeze(val,visited){if((isArray(val)||isObject(val)||isFunction(val))&&!objIsFrozen(val)){for(var lp=0;lp<visited.length;lp++)if(visited[lp]===val)return val;visited.push(val),objForEachKey(val,(function(_key,propValue){_deepFreeze(propValue,visited)})),objFreeze(val)}return val}function objDeepFreeze(value){return _objFreeze?_deepFreeze(value,[]):value}var objFreeze=_pureAssign(_objFreeze,_doNothing),objGetPrototypeOf=_pureAssign(_pureRef(ObjClass,"getPrototypeOf"),_getProto);function createEnum(values){return _createKeyValueMap(values,1,0,objFreeze)}function createEnumKeyMap(values){return _createKeyValueMap(values,0,0,objFreeze)}function createTypeMap(values){return function createSimpleMap(values){var mapClass={};return objForEachKey(values,(function(key,value){_assignMapValue(mapClass,key,value[1]),_assignMapValue(mapClass,value[0],value[1])})),objFreeze(mapClass)}(values)}var _globalCfg,_wellKnownSymbolMap=createEnumKeyMap({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),GLOBAL_CONFIG_KEY="__tsUtils$gblCfg";function _getGlobalValue(){var result;return("undefined"==typeof globalThis?"undefined":_typeof(globalThis))!==UNDEFINED&&(result=globalThis),result||("undefined"==typeof self?"undefined":_typeof(self))===UNDEFINED||(result=self),result||("undefined"==typeof window?"undefined":_typeof(window))===UNDEFINED||(result=window),result||(void 0===global?"undefined":_typeof(global))===UNDEFINED||(result=global),result}function _getGlobalConfig(){if(!_globalCfg){var gbl=safe(_getGlobalValue).v||{};_globalCfg=gbl[GLOBAL_CONFIG_KEY]=gbl[GLOBAL_CONFIG_KEY]||{}}return _globalCfg}var mathMin=_pureRef(MathCls,"min"),mathMax=_pureRef(MathCls,"max"),strSlice=_unwrapFunction("slice",StrProto),strSubstring=_unwrapFunction("substring",StrProto),strSubstr=_unwrapFunctionWithPoly("substr",StrProto,polyStrSubstr);function polyStrSubstr(value,start,length){return _throwIfNullOrUndefined(value),length<0?EMPTY:((start=start||0)<0&&(start=mathMax(start+value[LENGTH],0)),isUndefined(length)?strSlice(value,start):strSlice(value,start,start+length))}function strLeft(value,count){return strSubstring(value,0,count)}var _globalLazyTestHooks,objCreate=_pureAssign(_pureRef(ObjClass,"create"),polyObjCreate);function polyObjCreate(obj,properties){var newObj=null;function tempFunc(){}if(isStrictNullOrUndefined(obj))newObj={};else{var type=_typeof(obj);type!==OBJECT&&type!==FUNCTION&&throwTypeError("Prototype must be an Object or function: "+dumpObj(obj)),tempFunc[PROTOTYPE]=obj,safe((function(){tempFunc[__PROTO__]=obj})),newObj=new tempFunc}return properties&&safe(objDefineProperties,[newObj,properties]),newObj}function utcNow(){return(Date.now||polyUtcNow)()}function polyUtcNow(){return(new Date).getTime()}function fnApply(fn,thisArg,argArray){return fn.apply(thisArg,argArray)}function fnCall(fn,thisArg){return fn.apply(thisArg,ArrSlice[CALL](arguments,2))}function _initTestHooks(){_globalLazyTestHooks=_getGlobalConfig()}function getLazy(cb,argArray){var lazyValue={};return!_globalLazyTestHooks&&_initTestHooks(),lazyValue.b=_globalLazyTestHooks.lzy,objDefineProp(lazyValue,"v",{configurable:!0,get:function get(){var result=fnApply(cb,null,argArray);return _globalLazyTestHooks.lzy||objDefineProp(lazyValue,"v",{value:result}),lazyValue.b=_globalLazyTestHooks.lzy,result}}),lazyValue}var _polySymbols,_wellKnownSymbolCache,mathRandom=_pureRef(MathCls,"random"),_uniqueInstanceId=getLazy((function(){for(var value=utcNow().toString(36).slice(2);value.length<16;)value+=mathRandom().toString(36).slice(2);return value=value.substring(0,16)})),UNIQUE_REGISTRY_ID="_urid",POLY_SYM="$nw21sym",_polyId=0;function _globalSymbolRegistry(){if(!_polySymbols){var gblCfg=_getGlobalConfig();_polySymbols=gblCfg.gblSym=gblCfg.gblSym||{k:{},s:{}}}return _polySymbols}function polyNewSymbol(description){var uniqueId="_"+_polyId+++"_"+_uniqueInstanceId.v,symString=SYMBOL+"("+description+")";function _setProp(name,value){objDefine(theSymbol,name,{v:value,e:!1,w:!1})}var theSymbol=objCreate(null);return _setProp("description",asString(description)),_setProp(TO_STRING,(function(){return symString+POLY_SYM+uniqueId})),_setProp("valueOf",(function(){return theSymbol})),_setProp("v",symString),_setProp("_uid",uniqueId),function _tagAsPolyfill(target,polyfillTypeName){return target&&(safe((function(){target[POLYFILL_TAG]=!0,target[POLYFILL_TYPE_NAME]=polyfillTypeName})),safe(objDefine,[target,POLYFILL_TAG,{v:!0,w:!1,e:!1}]),safe(objDefine,[target,POLYFILL_TYPE_NAME,{v:polyfillTypeName,w:!1,e:!1}])),target}(theSymbol,"symbol")}function polySymbolFor(key){var registry=_globalSymbolRegistry();if(!objHasOwn(registry.k,key)){var newSymbol_1=polyNewSymbol(key),regId_1=objKeys(registry.s).length;newSymbol_1[UNIQUE_REGISTRY_ID]=function(){return regId_1+"_"+newSymbol_1[TO_STRING]()},registry.k[key]=newSymbol_1,registry.s[newSymbol_1[UNIQUE_REGISTRY_ID]()]=asString(key)}return registry.k[key]}function createCachedValue(value){return objDefineProp({toJSON:function toJSON(){return value}},"v",{value:value})}var _cachedGlobal,WINDOW="window";function _getGlobalInstFn(getFn,theArgs){var cachedValue;return function(){return!_globalLazyTestHooks&&_initTestHooks(),cachedValue&&!_globalLazyTestHooks.lzy||(cachedValue=createCachedValue(safe(getFn,theArgs).v)),cachedValue.v}}function getGlobal(useCached){return!_globalLazyTestHooks&&_initTestHooks(),_cachedGlobal&&!1!==useCached&&!_globalLazyTestHooks.lzy||(_cachedGlobal=createCachedValue(safe(_getGlobalValue).v||NULL_VALUE)),_cachedGlobal.v}function getInst(name,useCached){var gbl;if((gbl=_cachedGlobal&&!1!==useCached?_cachedGlobal.v:getGlobal(useCached))&&gbl[name])return gbl[name];if(name===WINDOW)try{return window}catch(e){}return NULL_VALUE}function hasDocument(){return!!getDocument()}var getDocument=_getGlobalInstFn(getInst,["document"]);function hasWindow(){return!!getWindow()}var getWindow=_getGlobalInstFn(getInst,[WINDOW]);function hasNavigator(){return!!getNavigator()}var getNavigator=_getGlobalInstFn(getInst,["navigator"]);function hasHistory(){return!!getHistory()}var _symbol,_symbolFor,getHistory=_getGlobalInstFn(getInst,["history"]),isNode=_getGlobalInstFn((function(){return!!safe((function(){return process&&(process.versions||{}).node})).v})),isWebWorker=_getGlobalInstFn((function(){return!!safe((function(){return self&&self instanceof WorkerGlobalScope})).v}));function _initSymbol(){return _symbol=createCachedValue(safe(getInst,[SYMBOL]).v)}function _getSymbolKey(key){var gblSym=(_globalLazyTestHooks.lzy?0:_symbol)||_initSymbol();return gblSym.v?gblSym.v[key]:UNDEF_VALUE}var _iterSymbol$1;function hasSymbol(){return!!getSymbol()}function getSymbol(){return!_globalLazyTestHooks&&_initTestHooks(),((_globalLazyTestHooks.lzy?0:_symbol)||_initSymbol()).v}function getKnownSymbol(name,noPoly){var knownName=_wellKnownSymbolMap[name];!_globalLazyTestHooks&&_initTestHooks();var sym=(_globalLazyTestHooks.lzy?0:_symbol)||_initSymbol();return sym.v?sym.v[knownName||name]:noPoly?UNDEF_VALUE:function polyGetKnownSymbol(name){var result;!_wellKnownSymbolCache&&(_wellKnownSymbolCache={});var knownName=_wellKnownSymbolMap[name];return knownName&&(result=_wellKnownSymbolCache[knownName]=_wellKnownSymbolCache[knownName]||polyNewSymbol(SYMBOL+"."+knownName)),result}(name)}function newSymbol(description,noPoly){!_globalLazyTestHooks&&_initTestHooks();var sym=(_globalLazyTestHooks.lzy?0:_symbol)||_initSymbol();return sym.v?sym.v(description):noPoly?NULL_VALUE:polyNewSymbol(description)}function symbolFor(key){return!_globalLazyTestHooks&&_initTestHooks(),((_symbolFor=(_globalLazyTestHooks.lzy?0:_symbolFor)||createCachedValue(safe(_getSymbolKey,["for"]).v)).v||polySymbolFor)(key)}function isIterator(value){return!!value&&isFunction(value.next)}function isIterable(value){return!isStrictNullOrUndefined(value)&&isFunction(value[getKnownSymbol(3)])}function iterForOf(iter,callbackfn,thisArg){if(iter&&(isIterator(iter)||(!_iterSymbol$1&&(_iterSymbol$1=createCachedValue(getKnownSymbol(3))),iter=iter[_iterSymbol$1.v]?iter[_iterSymbol$1.v]():NULL_VALUE),isIterator(iter))){var err=UNDEF_VALUE,iterResult=UNDEF_VALUE;try{for(var count=0;!(iterResult=iter.next()).done&&-1!==callbackfn[CALL](thisArg||iter,iterResult.value,count,iter);)count++}catch(failed){err={e:failed},iter.throw&&(iterResult=NULL_VALUE,iter.throw(err))}finally{try{iterResult&&!iterResult.done&&iter.return&&iter.return(iterResult)}finally{if(err)throw err.e}}}}function arrAppend(target,elms){return!isUndefined(elms)&&target&&(isArray(elms)?fnApply(target.push,target,elms):isIterator(elms)||isIterable(elms)?iterForOf(elms,(function(elm){target.push(elm)})):target.push(elms)),target}var arrIndexOf=_unwrapFunction("indexOf",ArrProto),arrMap=_unwrapFunction("map",ArrProto);function arrSlice(theArray,start,end){return((theArray?theArray.slice:NULL_VALUE)||ArrSlice).apply(theArray,ArrSlice[CALL](arguments,1))}var _isProtoArray,arrReduce=_unwrapFunction("reduce",ArrProto);var _unsupportedError,objSetPrototypeOf=_pureAssign(_pureRef(ObjClass,"setPrototypeOf"),_polyObjSetPrototypeOf);function _polyObjSetPrototypeOf(obj,proto){var _a;return!_isProtoArray&&(_isProtoArray=createCachedValue(((_a={})[__PROTO__]=[],_a instanceof Array))),_isProtoArray.v?obj[__PROTO__]=proto:objForEachKey(proto,(function(key,value){return obj[key]=value})),obj}function _setName(baseClass,name){name&&(baseClass[NAME]=name)}function createCustomError(name,constructCb,errorBase){var theBaseClass=errorBase||Error,orgName=theBaseClass[PROTOTYPE][NAME],captureFn=Error.captureStackTrace;return function _createCustomError(name,d,b){function __(){this[CONSTRUCTOR]=d,safe(objDefine,[this,NAME,{v:name,c:!0,e:!1}])}return safe(objDefine,[d,NAME,{v:name,c:!0,e:!1}]),(d=objSetPrototypeOf(d,b))[PROTOTYPE]=b===NULL_VALUE?objCreate(b):(__[PROTOTYPE]=b[PROTOTYPE],new __),d}(name,(function(){var theArgs=arguments;try{safe(_setName,[theBaseClass,name]);var _self=fnApply(theBaseClass,this,ArrSlice[CALL](theArgs))||this;if(_self!==this){var orgProto=objGetPrototypeOf(this);orgProto!==objGetPrototypeOf(_self)&&objSetPrototypeOf(_self,orgProto)}return captureFn&&captureFn(_self,this[CONSTRUCTOR]),constructCb&&constructCb(_self,theArgs),_self}finally{safe(_setName,[theBaseClass,orgName])}}),theBaseClass)}function throwUnsupported(message){throw _unsupportedError||(_unsupportedError=createCustomError("UnsupportedError")),new _unsupportedError(message)}function _createTrimFn(exp){return function _doTrim(value){return _throwIfNullOrUndefined(value),value&&value.replace&&(value=value.replace(exp,EMPTY)),value}}var polyStrTrim=_createTrimFn(/^\s+|(?=\s)\s+$/g),strTrim=_unwrapFunctionWithPoly("trim",StrProto,polyStrTrim);var mathFloor=_pureRef(MathCls,"floor");var _fnToString,_objCtrFnString,_gblWindow;function isPlainObject(value){if(!value||_typeof(value)!==OBJECT)return!1;_gblWindow||(_gblWindow=!hasWindow()||getWindow());var result=!1;if(value!==_gblWindow){_objCtrFnString||(_fnToString=Function[PROTOTYPE][TO_STRING],_objCtrFnString=_fnToString[CALL](ObjClass));try{var proto=objGetPrototypeOf(value);(result=!proto)||(objHasOwnProperty(proto,CONSTRUCTOR)&&(proto=proto[CONSTRUCTOR]),result=!(!proto||_typeof(proto)!==FUNCTION||_fnToString[CALL](proto)!==_objCtrFnString))}catch(ex){}}return result}function _defaultDeepCopyHandler(details){return details.value&&plainObjDeepCopyHandler(details),!0}var defaultDeepCopyHandlers=[function arrayDeepCopyHandler(details){var value=details.value;if(isArray(value)){var target=details.result=[];return target.length=value.length,details.copyTo(target,value),!0}return!1},plainObjDeepCopyHandler,function functionDeepCopyHandler(details){if(details.type===FUNCTION)return!0;return!1},function dateDeepCopyHandler(details){var value=details.value;if(isDate(value))return details.result=new Date(value.getTime()),!0;return!1}];function _deepCopy(visitMap,value,ctx,key){var userHandler=ctx.handler,newPath=ctx.path?key?ctx.path.concat(key):ctx.path:[],newCtx={handler:ctx.handler,src:ctx.src,path:newPath},theType=_typeof(value),isPlain=!1,isPrim=value===NULL_VALUE;isPrim||(value&&theType===OBJECT?isPlain=isPlainObject(value):isPrim=isPrimitiveType(theType));var details={type:theType,isPrim:isPrim,isPlain:isPlain,value:value,result:value,path:newPath,origin:ctx.src,copy:function copy(source,newKey){return _deepCopy(visitMap,source,newKey?newCtx:ctx,newKey)},copyTo:function copyTo(target,source){return _copyProps(visitMap,target,source,newCtx)}};return details.isPrim?userHandler&&userHandler[CALL](ctx,details)?details.result:value:function _getSetVisited(visitMap,source,newPath,cb){var theEntry;return arrForEach(visitMap,(function(entry){if(entry.k===source)return theEntry=entry,-1})),theEntry||(theEntry={k:source,v:source},visitMap.push(theEntry),cb(theEntry)),theEntry.v}(visitMap,value,0,(function(newEntry){objDefine(details,"result",{g:function g(){return newEntry.v},s:function s(newValue){newEntry.v=newValue}});for(var idx=0,handler=userHandler;!(handler||(idx<defaultDeepCopyHandlers.length?defaultDeepCopyHandlers[idx++]:_defaultDeepCopyHandler))[CALL](ctx,details);)handler=NULL_VALUE}))}function _copyProps(visitMap,target,source,ctx){if(!isNullOrUndefined(source))for(var key in source)target[key]=_deepCopy(visitMap,source[key],ctx,key);return target}function plainObjDeepCopyHandler(details){var value=details.value;if(value&&details.isPlain){var target=details.result={};return details.copyTo(target,value),!0}return!1}function _doExtend(target,theArgs){return arrForEach(theArgs,(function(theArg){!function objCopyProps(target,source,handler){return _copyProps([],target,source,{handler:handler,src:source,path:[]})}(target,theArg)})),target}function deepExtend(target,obj1,obj2,obj3,obj4,obj5,obj6){return _doExtend(function objDeepCopy(source,handler){return _deepCopy([],source,{handler:handler,src:source})}(target)||{},ArrSlice[CALL](arguments))}function objExtend(target,obj1,obj2,obj3,obj4,obj5,obj6){return _doExtend(target||{},ArrSlice[CALL](arguments))}var strSplit=_unwrapFunction("split",StrProto);hasSymbol();function setValueByKey(target,path,value){if(target&&path){var parts=strSplit(path,"."),lastKey=parts.pop();arrForEach(parts,(function(key){isNullOrUndefined(target[key])&&(target[key]={}),target=target[key]})),target[lastKey]=value}}var getLength=_unwrapProp(LENGTH);var _perf;function getPerformance(){return!_globalLazyTestHooks&&_initTestHooks(),_perf&&!_globalLazyTestHooks.lzy||(_perf=createCachedValue(safe(getInst,["performance"]).v)),_perf.v}function perfNow(){var perf=getPerformance();return perf&&perf.now?perf.now():utcNow()}var mathRound=_pureRef(MathCls,"round");var objGetOwnPropertyDescriptor=_pureAssign(_pureRef(ObjClass,"getOwnPropertyDescriptor"),_returnNothing);var strEndsWith=_unwrapFunctionWithPoly("endsWith",StrProto,polyStrEndsWith);function polyStrEndsWith(value,searchString,length){_throwIfNotString(value);var searchValue=isString(searchString)?searchString:asString(searchString),end=!isUndefined(length)&&length<value[LENGTH]?length:value[LENGTH];return strSubstring(value,end-searchValue[LENGTH],end)===searchValue}var strIndexOf=_unwrapFunction("indexOf",StrProto);var _setTimeoutFn,_clearTimeoutFn,REF="ref",UNREF="unref",HAS_REF="hasRef",ENABLED="enabled";function _createTimerHandler(startTimer,refreshFn,cancelFn){var theTimerHandler,ref=!0,timerId=startTimer?refreshFn(NULL_VALUE):NULL_VALUE;function _unref(){return ref=!1,timerId&&timerId[UNREF]&&timerId[UNREF](),theTimerHandler}function _cancel(){timerId&&cancelFn(timerId),timerId=NULL_VALUE}function _refresh(){return timerId=refreshFn(timerId),ref||_unref(),theTimerHandler}return(theTimerHandler={cancel:_cancel,refresh:_refresh})[HAS_REF]=function(){return timerId&&timerId[HAS_REF]?timerId[HAS_REF]():ref},theTimerHandler[REF]=function(){return ref=!0,timerId&&timerId[REF]&&timerId[REF](),theTimerHandler},theTimerHandler[UNREF]=_unref,{h:theTimerHandler=objDefineProp(theTimerHandler,ENABLED,{get:function get(){return!!timerId},set:function _setEnabled(value){!value&&timerId&&_cancel(),value&&!timerId&&_refresh()}}),dn:function dn(){timerId=NULL_VALUE}}}function _createTimeoutWith(startTimer,overrideFn,theArgs){var isArr=isArray(overrideFn),len=isArr?overrideFn.length:0,setFn=function _resolveTimeoutFn(timeoutFn){var result=isFunction(timeoutFn)?timeoutFn:_setTimeoutFn;if(!result){var globalOverrides=_getGlobalConfig().tmOut||[];isArray(globalOverrides)&&globalOverrides.length>0&&isFunction(globalOverrides[0])&&(result=globalOverrides[0])}return result||setTimeout}(len>0?overrideFn[0]:isArr?UNDEF_VALUE:overrideFn),clearFn=function _resolveClearTimeoutFn(timeoutFn){var result=isFunction(timeoutFn)?timeoutFn:_clearTimeoutFn;if(!result){var globalOverrides=_getGlobalConfig().tmOut||[];isArray(globalOverrides)&&globalOverrides.length>1&&isFunction(globalOverrides[1])&&(result=globalOverrides[1])}return result||clearTimeout}(len>1?overrideFn[1]:UNDEF_VALUE),timerFn=theArgs[0];theArgs[0]=function(){handler.dn(),fnApply(timerFn,UNDEF_VALUE,ArrSlice[CALL](arguments))};var handler=_createTimerHandler(startTimer,(function(timerId){if(timerId){if(timerId.refresh)return timerId.refresh(),timerId;fnApply(clearFn,UNDEF_VALUE,[timerId])}return fnApply(setFn,UNDEF_VALUE,theArgs)}),(function(timerId){fnApply(clearFn,UNDEF_VALUE,[timerId])}));return handler.h}function scheduleTimeout(callback,timeout){return _createTimeoutWith(!0,UNDEF_VALUE,ArrSlice[CALL](arguments))}function createTimeout(callback,timeout){return _createTimeoutWith(!1,UNDEF_VALUE,ArrSlice[CALL](arguments))}var _defaultIdleTimeout=100,_maxExecutionTime=50;var getIdleCallback=_getGlobalInstFn(getInst,["requestIdleCallback"]),getCancelIdleCallback=_getGlobalInstFn(getInst,["cancelIdleCallback"]);function scheduleIdleCallback(callback,options){function _createDeadline(timedOut){var startTime=perfNow();return{didTimeout:timedOut,timeRemaining:function timeRemaining(){return _maxExecutionTime-function elapsedTime(startTime){return perfNow()-startTime}(startTime)}}}if(function hasIdleCallback(){return!!getIdleCallback()}()){var handler_1=_createTimerHandler(!0,(function(idleId){return idleId&&getCancelIdleCallback()(idleId),getIdleCallback()((function(deadline){handler_1.dn(),callback(deadline||_createDeadline(!1))}),options)}),(function(idleId){getCancelIdleCallback()(idleId)}));return handler_1.h}var timeout=(options||{}).timeout;return isUndefined(timeout)&&(timeout=_defaultIdleTimeout),scheduleTimeout((function(){callback(_createDeadline(!0))}),timeout)}}).call(this,__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/process/browser.js"))}}]);
//# sourceMappingURL=8.6477b8cf.iframe.bundle.js.map