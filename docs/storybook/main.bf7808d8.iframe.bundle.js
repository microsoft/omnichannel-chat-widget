/*! For license information please see main.bf7808d8.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"),__webpack_require__("./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$")],module,!1),window.__playwright_addon_hot_reload_time__=Date.now()}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src/common/Constants.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return Constants})),__webpack_require__.d(__webpack_exports__,"t",(function(){return Regex})),__webpack_require__.d(__webpack_exports__,"l",(function(){return HtmlIdNames})),__webpack_require__.d(__webpack_exports__,"k",(function(){return HtmlClassNames})),__webpack_require__.d(__webpack_exports__,"j",(function(){return HtmlAttributeNames})),__webpack_require__.d(__webpack_exports__,"y",(function(){return WebChatMiddlewareConstants})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AMSConstants})),__webpack_require__.d(__webpack_exports__,"o",(function(){return MimeTypes})),__webpack_require__.d(__webpack_exports__,"n",(function(){return LocaleConstants})),__webpack_require__.d(__webpack_exports__,"i",(function(){return EnvironmentVersion})),__webpack_require__.d(__webpack_exports__,"h",(function(){return E2VVOptions})),__webpack_require__.d(__webpack_exports__,"g",(function(){return ConversationMode})),__webpack_require__.d(__webpack_exports__,"w",(function(){return SurveyProvider})),__webpack_require__.d(__webpack_exports__,"m",(function(){return LiveWorkItemState})),__webpack_require__.d(__webpack_exports__,"v",(function(){return StorageType})),__webpack_require__.d(__webpack_exports__,"q",(function(){return ParticipantType})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ConversationEndEntity})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ConfirmationState})),__webpack_require__.d(__webpack_exports__,"x",(function(){return TranscriptConstants})),__webpack_require__.d(__webpack_exports__,"p",(function(){return NotificationPaneConstants})),__webpack_require__.d(__webpack_exports__,"u",(function(){return StartChatErrorPaneConstants})),__webpack_require__.d(__webpack_exports__,"c",(function(){return AriaTelemetryConstants})),__webpack_require__.d(__webpack_exports__,"A",(function(){return WidgetLoadTelemetryMessage})),__webpack_require__.d(__webpack_exports__,"z",(function(){return WidgetLoadCustomErrorString})),__webpack_require__.d(__webpack_exports__,"s",(function(){return PrepareEndChatDescriptionConstants})),__webpack_require__.d(__webpack_exports__,"r",(function(){return PostChatSurveyTelemetryMessage})),__webpack_require__.d(__webpack_exports__,"b",(function(){return AppInsightsTelemetryMessage}));var _class;__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Constants=_createClass((function Constants(){_classCallCheck(this,Constants)}));Constants.magicCodeBroadcastChannel="MagicCodeChannel",Constants.magicCodeResponseBroadcastChannel="MagicCodeResponseChannel",Constants.systemMessageTag="system",Constants.userMessageTag="user",Constants.channelMessageTag="channel",Constants.historyMessageTag="history",Constants.agentEndConversationMessageTag="agentendconversation",Constants.supervisorForceCloseMessageTag="supervisorforceclosedconversation",Constants.endConversationalSurveyMessageTag="endconversationalsurvey",Constants.startConversationalSurveyMessageTag="startconversationalsurvey",Constants.c2ConversationalSurveyMessageTag="c2conversationalsurvey",Constants.receivedMessageClassName="ms_lcw_webchat_received_message",Constants.sentMessageClassName="ms_lcw_webchat_sent_message",Constants.webchatChannelId="webchat",Constants.markdown="markdown",Constants.actionType="actionType",Constants.markDownSystemMessageClass="webchat__basic-transcript__activity-markdown-body",Constants.MARKDOWN_LIST_INDENTATION="   ",Constants.String="string",Constants.ChatMessagesJson="chatMessagesJson",Constants.truePascal="True",Constants.true="true",Constants.false="false",Constants.maximumUnreadMessageCount=99,Constants.userParticipantTypeTag="User",Constants.botParticipantTypeTag="Bot",Constants.channelIdKey="ChannelId-",Constants.ChannelId="lcw",Constants.CustomerTag="FromCustomer",Constants.persistentChatHistoryMessageTag="PersistentChatHistory",Constants.persistentChatHistoryMessagePullTriggerTag="PersistentChatHistoryMessagePullTrigger",Constants.conversationDividerTag="ConversationDivider",Constants.GifContentType="image/gif",Constants.video="video",Constants.audio="audio",Constants.controlsList="controlsList",Constants.nodownload="nodownload",Constants.activity="activity",Constants.payload="payload",Constants.text="text",Constants.blank="_blank",Constants.visitorIdPrefix="8:",Constants.left="left",Constants.queuePositionMessageTag="queueposition",Constants.averageWaitTimeMessageTag="averagewaittime",Constants.message="message",Constants.hiddenTag="Hidden",Constants.typing="typing",Constants.prefixTimestampTag="ServerMessageTimestamp_",Constants.acsChannel="ACS_CHANNEL",Constants.publicMessageTag="public",Constants.supportedAdaptiveCardContentTypes=["application/vnd.microsoft.card.adaptive","application/vnd.microsoft.card.audio","application/vnd.microsoft.card.hero","application/vnd.microsoft.card.receipt","application/vnd.microsoft.card.thumbnail","application/vnd.microsoft.card.signin","application/vnd.microsoft.card.oauth","application/vnd.microsoft.card.video"],Constants.adaptiveCardContentTypePrefix="application/vnd.microsoft.card",Constants.maxUploadFileSize="500000",Constants.imageRegex=/(\.)(jpeg|jpg|jiff|png|gif|bmp|webp)$/i,Constants.audioMediaRegex=/(\.)(aac|aiff|alac|amr|flac|mp2|mp3|pcm|wav|wma)$/i,Constants.videoMediaRegex=/(\.)(avchd|avi|flv|mpe|mpeg|mpg|mpv|mp4|m4p|m4v|mov|qt|swf|webm|wmv)$/i,Constants.chromeSupportedInlineMediaRegex=/(\.)(aac|mp3|wav|mp4)$/i,Constants.firefoxSupportedInlineMediaRegex=/(\.)(aac|flac|mp3|wav|mp4|mov)$/i,Constants.CallAdded="callAdded",Constants.LocalVideoStreamAdded="localVideoStreamAdded",Constants.LocalVideoStreamRemoved="localVideoStreamRemoved",Constants.RemoteVideoStreamAdded="remoteVideoStreamAdded",Constants.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",Constants.CallDisconnected="callDisconnected",Constants.IncomingCallEnded="incomingCallEnded",Constants.VoiceVideoInitialize="voiceVideoInitialize",Constants.VoiceVideoInitializeException="voiceVideoInitializeOnException",Constants.VoiceVideoLoading="voiceVideoLoading",Constants.VoiceVideoNotLoaded="voiceVideoNotLoaded",Constants.VoiceVideoLoadingException="voiceVideoLoadingOnException",Constants.VoiceVideoAcceptCallException="voiceVideoAcceptCallOnException",Constants.VoiceVideoAcceptCallWithVideoException="voiceVideoAcceptCallWithVideoException",Constants.defaultDownloadTranscriptError="Download transcript failed.",Constants.ProactiveChatInviteTimeoutInMs=6e4,Constants.InputSubmit="InputSubmit",Constants.ReconnectIdAttributeName="oc.reconnectid",Constants.LiveChatWidget="LiveChatWidgetNew",Constants.GuidPattern="xx-x-4m-ym-xxx",Constants.Default="default",Constants.Zero="zero",Constants.Title="title",Constants.Target="target",Constants.Blank="_blank",Constants.TargetSelf="_self",Constants.TargetTop="_top",Constants.TargetRelationship="rel",Constants.TargetRelationshipAttributes="noopener noreferrer",Constants.OpenLinkIconCssClass="webchat__render-markdown__external-link-icon",Constants.internetConnectionTestPath="/livechatwidget/version.txt",Constants.ChatWidgetStateChangedPrefix="ChatWidgetStateChanged",Constants.PostChatLoadingDurationInMs=2e3,Constants.BrowserUnloadConfirmationMessage="Do you want to leave chat?",Constants.CacheTtlInMinutes=15,Constants.SessionCacheSuffix="session",Constants.PopoutCacheSuffix="popout",Constants.LWICheckOnVisibilityTimeout=18e4,Constants.InitContextParamsRequest="initContextParamsRequest",Constants.InitContextParamsResponse="initContextParamsResponse",Constants.OCOriginalMessageId="OriginalMessageId",Constants.WebchatSequenceIdAttribute="webchat:sequence-id",Constants.MessageSequenceIdOverride="MessageSequenceIdOverride",Constants.sendCustomEvent="sendCustomEvent",Constants.onCustomEvent="onCustomEvent",Constants.customEventName="customEventName",Constants.customEventValue="customEventValue",Constants.Hidden="Hidden",Constants.EndConversationDueToOverflow="endconversationduetooverflow",Constants.SkipSessionCloseForPersistentChatFlag="skipSessionCloseForPersistentChat";var Regex=(_class=_createClass((function Regex(){_classCallCheck(this,Regex)})),_class.EmailRegex='^(?:[a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+)*|"[^"\\\\]*(?:\\\\.[^"\\\\]*)*")@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?)*|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\])$',_class),HtmlIdNames=_createClass((function HtmlIdNames(){_classCallCheck(this,HtmlIdNames)}));HtmlIdNames.MSLiveChatWidget="MSLiveChatWidget";var HtmlClassNames=_createClass((function HtmlClassNames(){_classCallCheck(this,HtmlClassNames)}));HtmlClassNames.webChatBannerCloseButton="webchat__toast__dismissButton",HtmlClassNames.webChatBannerExpandButton="webchat__toaster__expandIcon",HtmlClassNames.webChatHistoryContainer="webchat__basic-transcript",_createClass((function HtmlElementSelectors(){_classCallCheck(this,HtmlElementSelectors)})).sendBoxSelector='textarea[data-id="webchat-sendbox-input"]';var HtmlAttributeNames=_createClass((function HtmlAttributeNames(){_classCallCheck(this,HtmlAttributeNames)}));HtmlAttributeNames.role="role",HtmlAttributeNames.navigation="navigation",HtmlAttributeNames.ariaLabel="aria-label",HtmlAttributeNames.ariaLive="aria-live",HtmlAttributeNames.ariaDisabled="aria-disabled",HtmlAttributeNames.form="form",HtmlAttributeNames.ariaLabelledby="aria-labelledby",HtmlAttributeNames.tabindex="tabindex",HtmlAttributeNames.ariaRequired="aria-required",HtmlAttributeNames.ariaDesribedby="aria-describedby",HtmlAttributeNames.ariaHidden="aria-hidden",HtmlAttributeNames.disabled="disabled",HtmlAttributeNames.hidden="hidden",HtmlAttributeNames.download="download",HtmlAttributeNames.href="href",HtmlAttributeNames.region="region",HtmlAttributeNames.button="button",HtmlAttributeNames.input="Input",HtmlAttributeNames.style="style",HtmlAttributeNames.head="head",HtmlAttributeNames.type="type",HtmlAttributeNames.csstext="text/css",HtmlAttributeNames.listItem="LI",HtmlAttributeNames.unorderedList="UL",HtmlAttributeNames.div="div",HtmlAttributeNames.aTagName="a",HtmlAttributeNames.pTagName="p",HtmlAttributeNames.noopenerTag="noopener",HtmlAttributeNames.noreferrerTag="noreferrer",HtmlAttributeNames.adaptiveCardClassName="ac-adaptiveCard",HtmlAttributeNames.adaptiveCardTextBlockClassName="ac-textBlock",HtmlAttributeNames.adaptiveCardToggleInputClassName="ac-toggleInput",HtmlAttributeNames.adaptiveCardActionSetClassName="ac-actionSet",HtmlAttributeNames.ocwCitationPaneClassName="ocw-citation-pane",HtmlAttributeNames.ocwCitationPaneTitle="Citation";var WebChatMiddlewareConstants=_createClass((function WebChatMiddlewareConstants(){_classCallCheck(this,WebChatMiddlewareConstants)}));WebChatMiddlewareConstants.nextVisibleActivity="nextVisibleActivity",WebChatMiddlewareConstants.timeBetweenTimestampGroups=3e5,WebChatMiddlewareConstants.maxTextLength=6e3,WebChatMiddlewareConstants.adaptiveCard="AdaptiveCard";var AMSConstants=_createClass((function AMSConstants(){_classCallCheck(this,AMSConstants)}));AMSConstants.supportedImagesMimeTypes=["image/jpeg","image/png","image/gif","image/heic","image/webp"],AMSConstants.maxSupportedImageSize=20,AMSConstants.maxSupportedFileSize=300;var MimeTypes=_createClass((function MimeTypes(){_classCallCheck(this,MimeTypes)}));MimeTypes.UnknownFileType="application/octet-stream";var ElementType,EnvironmentVersion,E2VVOptions,ConversationMode,SurveyProvider,LiveWorkItemState,StorageType,ParticipantType,ConversationEndEntity,ConfirmationState,LocaleConstants=_createClass((function LocaleConstants(){_classCallCheck(this,LocaleConstants)}));LocaleConstants.RTL_LOCALES=["1025","1037"],function(ElementType){ElementType.CallingContainerSDK="CallingContainerSDK"}(ElementType||(ElementType={})),function(EnvironmentVersion){EnvironmentVersion.prod="prod",EnvironmentVersion.dogfood="df",EnvironmentVersion.int="int",EnvironmentVersion.test="test"}(EnvironmentVersion||(EnvironmentVersion={})),function(E2VVOptions){E2VVOptions.NoCalling="192350000",E2VVOptions.VideoAndVoiceCalling="192350001",E2VVOptions.VoiceOnly="192350002"}(E2VVOptions||(E2VVOptions={})),function(ConversationMode){ConversationMode.Regular="192350000",ConversationMode.Persistent="192350001"}(ConversationMode||(ConversationMode={})),function(SurveyProvider){SurveyProvider.MicrosoftCopilotStudio="600990001"}(SurveyProvider||(SurveyProvider={})),function(LiveWorkItemState){LiveWorkItemState.Active="Active",LiveWorkItemState.Closed="Closed",LiveWorkItemState.Open="Open",LiveWorkItemState.Waiting="Waiting",LiveWorkItemState.WrapUp="WrapUp"}(LiveWorkItemState||(LiveWorkItemState={})),function(StorageType){StorageType[StorageType.localStorage=0]="localStorage",StorageType[StorageType.sessionStorage=1]="sessionStorage"}(StorageType||(StorageType={})),function(ParticipantType){ParticipantType.User="User",ParticipantType.Bot="Bot"}(ParticipantType||(ParticipantType={})),function(ConversationEndEntity){ConversationEndEntity.Customer="Customer",ConversationEndEntity.Agent="Agent",ConversationEndEntity.Bot="Bot",ConversationEndEntity.NotSet="NotSet"}(ConversationEndEntity||(ConversationEndEntity={})),function(ConfirmationState){ConfirmationState.Ok="Ok",ConfirmationState.Cancel="Cancel",ConfirmationState.NotSet="NotSet"}(ConfirmationState||(ConfirmationState={}));var TranscriptConstants=_createClass((function TranscriptConstants(){_classCallCheck(this,TranscriptConstants)}));TranscriptConstants.ChatTranscriptsBodyColor="#F5F5F5",TranscriptConstants.TranscriptMessageEmojiMessageType="http://schema.skype.com/emoji",TranscriptConstants.ChatTranscriptDownloadFile="ChatTranscripts.html",TranscriptConstants.DefaultFileAttachmentName="Untitled.txt",TranscriptConstants.CustomerDialogColor="#E8E8E8",TranscriptConstants.CustomerFontColor="black",TranscriptConstants.AdaptiveCardType="adaptivecard",TranscriptConstants.InternalMode="internal",TranscriptConstants.AgentDialogColor="#2266E3",TranscriptConstants.AgentFontColor="white";var NotificationPaneConstants=_createClass((function NotificationPaneConstants(){_classCallCheck(this,NotificationPaneConstants)}));NotificationPaneConstants.DefaultNotificationPaneId="lcw-notification-pane",NotificationPaneConstants.DismissId="lcw-notification-pane-dismiss-button",NotificationPaneConstants.DismissText="Dismiss",NotificationPaneConstants.DismissAriaLabel="Notification dismiss",NotificationPaneConstants.CloseChatId="lcw-notification-pane-close-chat-button",NotificationPaneConstants.CloseChatText="Close Chat",NotificationPaneConstants.CloseChatAriaLabel="Close chat",NotificationPaneConstants.IconId="lcw-notification-pane-icon",NotificationPaneConstants.IconText="Notification Icon",NotificationPaneConstants.ChatDisconnectTitleText="Chat disconnected",NotificationPaneConstants.ChatDisconnectSubtitleText="For additional assistance, please close the chat and try again.",NotificationPaneConstants.ChromeCloseIconName="ChromeClose";var StartChatErrorPaneConstants=_createClass((function StartChatErrorPaneConstants(){_classCallCheck(this,StartChatErrorPaneConstants)}));StartChatErrorPaneConstants.DefaultStartChatErrorPaneId="oc-lcw-start-chat-error-pane",StartChatErrorPaneConstants.DefaultStartChatErrorTitleText="We are unable to load chat at this time.",StartChatErrorPaneConstants.DefaultStartChatErrorSubtitleText="Please try again later.",StartChatErrorPaneConstants.DefaultStartChatErrorUnauthorizedTitleText="Chat authentication has failed.",StartChatErrorPaneConstants.DefaultStartChatErrorAuthSetupErrorTitleText="Chat authentication has failed.",StartChatErrorPaneConstants.DefaultStartChatErrorUnauthorizedSubtitleText="UNAUTHORIZED",StartChatErrorPaneConstants.DefaultStartChatErrorAuthSetupErrorSubtitleText="AUTH SETUP ERROR";var AriaTelemetryConstants=_createClass((function AriaTelemetryConstants(){_classCallCheck(this,AriaTelemetryConstants)}));AriaTelemetryConstants.GERMANY_ENDPOINT="https://de.pipe.aria.microsoft.com/Collector/3.0/",AriaTelemetryConstants.GCCH_ENDPOINT="https://tb.pipe.aria.microsoft.com/Collector/3.0/",AriaTelemetryConstants.DOD_ENDPOINT="https://pf.pipe.aria.microsoft.com/Collector/3.0",AriaTelemetryConstants.EUROPE_ENDPOINT="https://eu-mobile.events.data.microsoft.com/Collector/3.0/",AriaTelemetryConstants.MOONCAKE_ENDPOINT="",AriaTelemetryConstants.Public="Public",AriaTelemetryConstants.EU="Europe",AriaTelemetryConstants.lcwEUDomainNames=["crm4.omnichannelengagementhub.com","crm12.omnichannelengagementhub.com","crm16.omnichannelengagementhub.com","crm17.omnichannelengagementhub.com","crm19.omnichannelengagementhub.com"];var WidgetLoadTelemetryMessage=_createClass((function WidgetLoadTelemetryMessage(){_classCallCheck(this,WidgetLoadTelemetryMessage)}));WidgetLoadTelemetryMessage.OOOHMessage="Widget is OOOH",WidgetLoadTelemetryMessage.PersistedStateRetrievedMessage="Persisted state retrieved";var WidgetLoadCustomErrorString=_createClass((function WidgetLoadCustomErrorString(){_classCallCheck(this,WidgetLoadCustomErrorString)}));WidgetLoadCustomErrorString.AuthenticationFailedErrorString="Authentication was not successful",WidgetLoadCustomErrorString.NetworkErrorString="Network Error",WidgetLoadCustomErrorString.CloseAdapterAfterDisconnectionErrorString="Error trying to end/close chat adapter after the widget is back on-line, for an already disconnected session";var PrepareEndChatDescriptionConstants=_createClass((function PrepareEndChatDescriptionConstants(){_classCallCheck(this,PrepareEndChatDescriptionConstants)}));PrepareEndChatDescriptionConstants.ConversationEndedByCustomerWithoutPostChat="Conversation ended by customer. Post chat not configured or should not show.",PrepareEndChatDescriptionConstants.ConversationEndedByCustomerWithInvalidPostChat="Conversation ended by customer. Post chat context is invalid.",PrepareEndChatDescriptionConstants.ConversationEndedBy="Conversation ended by",PrepareEndChatDescriptionConstants.PrepareEndChatError="There's an error while preparing to end chat. Closing chat widget.",PrepareEndChatDescriptionConstants.WidgetLoadFailedAfterSessionInit="SessionInit was successful, but widget load failed. Ending chat to avoid ghost chats in OC.",PrepareEndChatDescriptionConstants.InitiateEndChatReceived="Received InitiateEndChat BroadcastEvent while conversation state is not Active. Ending chat.",PrepareEndChatDescriptionConstants.InitiateEndChatReceivedActiveChat="Received InitiateEndChat BroadcastEvent while conversation state is Active. Updating conversation states.",PrepareEndChatDescriptionConstants.EndChatReceivedFromOtherTabs="Received EndChat BroadcastEvent from other tabs. Closing this chat.",PrepareEndChatDescriptionConstants.CustomerCloseChatOnFailureOrPostChat="Customer is trying to close chat widget on start chat failure or post chat pane.",PrepareEndChatDescriptionConstants.CustomerCloseInactiveChat="Chat was Inactive and customer is trying to close chat widget or refreshing the page.",PrepareEndChatDescriptionConstants.BrowserUnload="Browser unload event received. Ending chat.";var PostChatSurveyTelemetryMessage=_createClass((function PostChatSurveyTelemetryMessage(){_classCallCheck(this,PostChatSurveyTelemetryMessage)}));PostChatSurveyTelemetryMessage.PostChatContextCallFailed="Failed to get post chat context.",PostChatSurveyTelemetryMessage.PostChatContextCallSucceed="Postchat context call succeed.",PostChatSurveyTelemetryMessage.PostChatContextCallStarted="Postchat context call started.";var AppInsightsTelemetryMessage=_createClass((function AppInsightsTelemetryMessage(){_classCallCheck(this,AppInsightsTelemetryMessage)}));AppInsightsTelemetryMessage.AppInsightsInitialized="Application Insights initialized successfully.",AppInsightsTelemetryMessage.AppInsightsInitError="Error initializing Application Insights",AppInsightsTelemetryMessage.AppInsightsKeyError="Invalid Application Insights key provided."},"./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$":function(module,exports,__webpack_require__){var map={"./OmniChannelLiveChatWidget.stories.tsx":"./stories/OmniChannelLiveChatWidget.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"},"./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$":function(module,exports,__webpack_require__){var map={"./OmniChannelLiveChatWidget.stories.tsx":"./stories/OmniChannelLiveChatWidget.stories.tsx","./component-stories/CallingContainer.stories.tsx":"./stories/component-stories/CallingContainer.stories.tsx","./component-stories/ChatButton.stories.tsx":"./stories/component-stories/ChatButton.stories.tsx","./component-stories/ConfirmationPane.stories.tsx":"./stories/component-stories/ConfirmationPane.stories.tsx","./component-stories/CurrentCall.stories.tsx":"./stories/component-stories/CurrentCall.stories.tsx","./component-stories/Footer.stories.tsx":"./stories/component-stories/Footer.stories.tsx","./component-stories/Header.stories.tsx":"./stories/component-stories/Header.stories.tsx","./component-stories/IncomingCall.stories.tsx":"./stories/component-stories/IncomingCall.stories.tsx","./component-stories/InputValidationPane.stories.tsx":"./stories/component-stories/InputValidationPane.stories.tsx","./component-stories/LoadingPane.stories.tsx":"./stories/component-stories/LoadingPane.stories.tsx","./component-stories/OOOHPane.stories.tsx":"./stories/component-stories/OOOHPane.stories.tsx","./component-stories/PostChatSurveyPane.stories.tsx":"./stories/component-stories/PostChatSurveyPane.stories.tsx","./component-stories/PreChatSurveyPane.stories.tsx":"./stories/component-stories/PreChatSurveyPane.stories.tsx","./component-stories/ProactiveChatPane.stories.tsx":"./stories/component-stories/ProactiveChatPane.stories.tsx","./component-stories/ReconnectChatPane.stories.tsx":"./stories/component-stories/ReconnectChatPane.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.tsx)$"},"./stories/.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./stories/OmniChannelLiveChatWidget.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultWithSurvey",(function(){return DefaultWithSurvey})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var ScenarioType,LogLevel,BroadcastEvent,TelemetryEvent,cjs=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),Constants=(__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.ends-with.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/web.url.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./src/common/Constants.ts"));__webpack_require__("./node_modules/core-js/modules/es.array.map.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}!function(ScenarioType){ScenarioType.CONFIG_VALIDATION="LCW_ConfigValidationEvents",ScenarioType.LOAD="LCW_LoadEvents",ScenarioType.ACTIONS="LCW_ActionEvents",ScenarioType.SDK="LCW_SDKEvents",ScenarioType.IC3_CLIENT="LCW_IC3ClientEvents",ScenarioType.OCCHATSDK="LCW_OCCHATSDKEvents",ScenarioType.WEBCHAT="LCW_WebChatEvents",ScenarioType.CALLING="LCW_Calling",ScenarioType.UNDEFINED="LCW_Undefined",ScenarioType.ACS_ADAPTER="LCW_ACSAdapterEvents"}(ScenarioType||(ScenarioType={})),function(LogLevel){LogLevel.INFO="INFO",LogLevel.DEBUG="DEBUG",LogLevel.WARN="WARN",LogLevel.ERROR="ERROR"}(LogLevel||(LogLevel={})),function(BroadcastEvent){BroadcastEvent.LoadPostChatSurvey="LoadPostChatSurvey",BroadcastEvent.ChatEnded="ChatEnded",BroadcastEvent.NewMessageNotification="NewMessageNotification",BroadcastEvent.UnreadMessageCount="UnreadMessageCount",BroadcastEvent.StartProactiveChat="StartProactiveChat",BroadcastEvent.ProactiveChatStartChat="ProactiveChatStartChat",BroadcastEvent.ProactiveChatStartPopoutChat="ProactiveChatStartPopoutChat",BroadcastEvent.ResetProactiveChatParams="ResetProactiveChatParams",BroadcastEvent.InvalidAdaptiveCardFormat="InvalidAdaptiveCardFormat",BroadcastEvent.NewMessageSent="NewMessageSent",BroadcastEvent.NewMessageReceived="NewMessageReceived",BroadcastEvent.HistoryMessageReceived="HistoryMessageReceived",BroadcastEvent.RedirectPageRequest="RedirectPageRequest",BroadcastEvent.StartChat="StartChat",BroadcastEvent.StartUnauthenticatedReconnectChat="StartUnauthenticatedReconnectChat",BroadcastEvent.InitiateEndChat="InitiateEndChat",BroadcastEvent.SetCustomContext="SetCustomContext",BroadcastEvent.ChatRetrievedFromCache="ChatRetrievedFromCache",BroadcastEvent.MaximizeChat="MaximizeChat",BroadcastEvent.ChatInitiated="ChatInitiated",BroadcastEvent.CloseChat="CloseChat",BroadcastEvent.InitiateEndChatOnBrowserUnload="InitiateEndChatOnBrowserUnload",BroadcastEvent.ClosePopoutWindow="ClosePopoutWindow",BroadcastEvent.RaiseErrorEvent="RaiseErrorEvent",BroadcastEvent.NetworkDisconnected="NetworkDisconnected",BroadcastEvent.NetworkReconnected="NetworkReconnected",BroadcastEvent.SigninCardReceived="SignInCardReceived",BroadcastEvent.BotAuthConfigRequest="BotAuthConfigRequest",BroadcastEvent.BotAuthConfigResponse="BotAuthConfigResponse",BroadcastEvent.RemoveWidgetDataFromCache="RemoveWidgetDataFromCache",BroadcastEvent.InitiateStartChatInPopoutMode="InitiateStartChatInPopoutMode",BroadcastEvent.HideChatVisibilityChangeEvent="hideChatVisibilityChangeEvent",BroadcastEvent.UpdateSessionDataForTelemetry="UpdateSessionDataForTelemetry",BroadcastEvent.UpdateConversationDataForTelemetry="UpdateConversationDataForTelemetry",BroadcastEvent.ContactIdNotFound="ContactIdNotFound",BroadcastEvent.SyncMinimize="SyncMinimize",BroadcastEvent.OnWidgetError="OnWidgetError",BroadcastEvent.FMLTrackingCompletedAck="FMLTrackingCompletedAck",BroadcastEvent.FMLTrackingCompleted="FMLTrackingCompleted",BroadcastEvent.PersistentConversationReset="PersistentConversationReset"}(BroadcastEvent||(BroadcastEvent={})),function(TelemetryEvent){TelemetryEvent.FetchPersistentChatHistoryFailed="FetchPersistentChatHistoryFailed",TelemetryEvent.CallAdded="CallAdded",TelemetryEvent.LocalVideoStreamAdded="LocalVideoStreamAdded",TelemetryEvent.LocalVideoStreamRemoved="LocalVideoStreamRemoved",TelemetryEvent.RemoteVideoStreamAdded="RemoteVideoStreamAdded",TelemetryEvent.RemoteVideoStreamRemoved="RemoteVideoStreamRemoved",TelemetryEvent.CallDisconnected="CallDisconnected",TelemetryEvent.CallDisconnectedException="CallDisconnectedException",TelemetryEvent.IncomingCallEnded="incomingCallEnded",TelemetryEvent.VoiceVideoSdkInitialize="VoiceVideoSdkInitialize",TelemetryEvent.VoiceVideoSdkInitializeException="VoiceVideoSdkInitializeException",TelemetryEvent.VoiceVideoLoading="VoiceVideoLoading",TelemetryEvent.VoiceVideoNotLoaded="VoiceVideoNotLoaded",TelemetryEvent.VoiceVideoLoadingException="VoiceVideoLoadingException",TelemetryEvent.VoiceVideoAcceptCallException="VoiceVideoAcceptCallException",TelemetryEvent.VoiceVideoAcceptCallWithVideoException="VoiceVideoAcceptCallWithVideoException",TelemetryEvent.VideoCallAcceptButtonClick="VideoCallAcceptButtonClick",TelemetryEvent.VoiceCallAcceptButtonClick="VoiceCallAcceptButtonClick",TelemetryEvent.CallRejectClick="CallRejectClick",TelemetryEvent.CallRejectClickException="CallRejectClickException",TelemetryEvent.ToggleMuteButtonClick="ToggleMuteButtonClick",TelemetryEvent.ToggleMuteButtonClickException="ToggleMuteButtonClickException",TelemetryEvent.ToggleCameraButtonClick="ToggleCameraButtonClick",TelemetryEvent.ToggleCameraButtonClickException="ToggleCameraButtonClickException",TelemetryEvent.EndCallButtonClick="EndCallButtonClick",TelemetryEvent.EndCallButtonClickException="EndCallButtonClickException",TelemetryEvent.CallingSDKInitSuccess="CallingSDKInitSuccess",TelemetryEvent.CallingSDKInitFailed="CallingSDKInitFailed",TelemetryEvent.CallingSDKLoadSuccess="CallingSDKLoadSuccess",TelemetryEvent.CallingSDKLoadFailed="CallingSDKLoadFailed",TelemetryEvent.GetConversationDetailsCallStarted="GetConversationDetailsCallStarted",TelemetryEvent.GetConversationDetailsCallFailed="GetConversationDetailsCallFailed",TelemetryEvent.EndChatSDKCallFailed="EndChatSDKCallFailed",TelemetryEvent.DisconnectEndChatSDKCallFailed="DisconnectEndChatSDKCallFailed",TelemetryEvent.GetChatReconnectContextSDKCallStarted="GetChatReconnectContextSDKCallStarted",TelemetryEvent.GetChatReconnectContextSDKCallFailed="GetChatReconnectContextSDKCallFailed",TelemetryEvent.CheckContactIdError="checkContactIdError",TelemetryEvent.GetChatReconnectContextSDKCallSucceeded="GetChatReconnectContextSDKCallSucceeded",TelemetryEvent.ParseAdaptiveCardFailed="ParseAdaptiveCardFailed",TelemetryEvent.ClientDataStoreProviderFailed="ClientDataStoreProviderFailed",TelemetryEvent.InMemoryDataStoreFailed="InMemoryDataStoreFailed",TelemetryEvent.ChatVisibilityChanged="ChatVisibilityChanged",TelemetryEvent.EndChatSucceeded="EndChatSucceeded",TelemetryEvent.EndChatFailed="EndChatFailed",TelemetryEvent.SettingCustomContext="SettingCustomContext",TelemetryEvent.WebChatLoaded="WebChatLoaded",TelemetryEvent.PersistentChatHistoryEnabled="PersistentChatHistoryEnabled",TelemetryEvent.LCWChatButtonActionCompleted="LCWChatButtonActionCompleted",TelemetryEvent.LCWChatButtonClicked="LCWChatButtonClicked",TelemetryEvent.LCWChatButtonShow="LCWChatButtonShow",TelemetryEvent.WidgetLoadStarted="WidgetLoadStarted",TelemetryEvent.WidgetLoadComplete="WidgetLoadComplete",TelemetryEvent.WidgetLoadFailed="WidgetLoadFailed",TelemetryEvent.StartChatMethodException="StartChatMethodException",TelemetryEvent.CloseChatCall="CloseChatCall",TelemetryEvent.CloseChatMethodException="CloseChatMethodException",TelemetryEvent.PrechatSurveyLoaded="PrechatSurveyLoaded",TelemetryEvent.PrechatSurveyExpected="PrechatSurveyExpected",TelemetryEvent.PrechatSubmitted="PrechatSubmitted",TelemetryEvent.StartChatSDKCall="StartChatCall",TelemetryEvent.StartChatEventReceived="StartChatEventReceived",TelemetryEvent.EndChatSDKCall="EndChatSDKCall",TelemetryEvent.PrepareEndChat="PrepareEndChat",TelemetryEvent.EndChatEventReceived="EndChatEventReceived",TelemetryEvent.WindowClosed="WindowClosed",TelemetryEvent.OnNewMessageFailed="OnNewMessageFailed",TelemetryEvent.OnNewMessageAudioNotificationFailed="OnNewMessageAudioNotificationFailed",TelemetryEvent.DownloadTranscriptResponseNullOrUndefined="DownloadTranscriptResponseNullOrUndefined",TelemetryEvent.ErrorUIPaneLoaded="ErrorUIPaneLoaded",TelemetryEvent.DownloadTranscriptFailed="DownloadTranscriptFailed",TelemetryEvent.StartChatFailed="StartChatFailed",TelemetryEvent.ConfirmationCancelButtonClicked="ConfirmationCancelButtonClicked",TelemetryEvent.ConfirmationConfirmButtonClicked="ConfirmationConfirmButtonClicked",TelemetryEvent.LoadingPaneLoaded="LoadingPaneLoaded",TelemetryEvent.LoadingPaneUnloaded="LoadingPaneUnloaded",TelemetryEvent.StartChatErrorPaneLoaded="StartChatErrorPaneLoaded",TelemetryEvent.EmailTranscriptLoaded="EmailTranscriptLoaded",TelemetryEvent.OutOfOfficePaneLoaded="OutOfOfficePaneLoaded",TelemetryEvent.ConfirmationPaneLoaded="ConfirmationPaneLoaded",TelemetryEvent.CitationPaneLoaded="CitationPaneLoaded",TelemetryEvent.ProactiveChatPaneLoaded="ProactiveChatPaneLoaded",TelemetryEvent.ReconnectChatPaneLoaded="ReconnectChatPaneLoaded",TelemetryEvent.HeaderCloseButtonClicked="HeaderCloseButtonClicked",TelemetryEvent.CloseChatActionCompleted="CloseChatActionCompleted",TelemetryEvent.HeaderMinimizeButtonClicked="HeaderMinimizeButtonClicked",TelemetryEvent.MinimizeChatActionCompleted="MinimizeChatActionCompleted",TelemetryEvent.NotificationCloseChatButtonClicked="NotificationCloseChatButtonClicked",TelemetryEvent.NotificationDismissButtonClicked="NotificationDismissButtonClicked",TelemetryEvent.DownloadTranscriptButtonClicked="DownloadTranscriptButtonClicked",TelemetryEvent.DownloadTranscriptActionCompleted="DownloadTranscriptActionCompleted",TelemetryEvent.DownloadTranscriptActionFailed="DownloadTranscriptActionFailed",TelemetryEvent.EmailTranscriptButtonClicked="EmailTranscriptButtonClicked",TelemetryEvent.EmailTranscriptSent="EmailTranscriptSent",TelemetryEvent.EmailTranscriptFailed="EmailTranscriptFailed",TelemetryEvent.EmailTranscriptCancelButtonClicked="EmailTranscriptCancelButtonClicked",TelemetryEvent.AudioToggleButtonClicked="AudioToggleButtonClicked",TelemetryEvent.SuppressBotMagicCodeSucceeded="SuppressBotMagicCodeSucceeded",TelemetryEvent.SuppressBotMagicCodeFailed="SuppressBotMagicCodeFailed",TelemetryEvent.GetConversationDetailsException="GetConversationDetailsException",TelemetryEvent.AppStatesException="AppStatesException",TelemetryEvent.BrowserUnloadEventStarted="BrowserUnloadEventStarted",TelemetryEvent.GetAuthTokenCalled="GetAuthTokenCalled",TelemetryEvent.GetAuthTokenFailed="GetAuthTokenFailed",TelemetryEvent.ReceivedNullOrEmptyToken="ReceivedNullOrEmptyToken",TelemetryEvent.CustomerVoiceResponsePageLoaded="CustomerVoiceResponsePageLoaded",TelemetryEvent.CustomerVoiceFormResponseSubmitted="CustomerVoiceFormResponseSubmitted",TelemetryEvent.CustomerVoiceFormResponseError="CustomerVoiceFormResponseError",TelemetryEvent.CustomerVoiceFormsError="CustomerVoiceFormsError",TelemetryEvent.BotAuthActivityEmptySasUrl="BotAuthActivityEmptySasUrl",TelemetryEvent.SetBotAuthProviderFetchConfig="SetBotAuthProviderFetchConfig",TelemetryEvent.SetBotAuthProviderHideCard="SetBotAuthProviderHideCard",TelemetryEvent.SetBotAuthProviderDisplayCard="SetBotAuthProviderDisplayCard",TelemetryEvent.SetBotAuthProviderNotFound="SetBotAuthProviderNotFound",TelemetryEvent.BotAuthActivityUndefinedSignInId="BotAuthActivityUndefinedSignInId",TelemetryEvent.ThirdPartyCookiesBlocked="ThirdPartyCookiesBlocked",TelemetryEvent.ParticipantsRemovedEvent="ParticipantsRemovedEvent",TelemetryEvent.QueueOverflowEvent="QueueOverflowEvent",TelemetryEvent.ProcessingHTMLTextMiddlewareFailed="ProcessingHTMLTextMiddlewareFailed",TelemetryEvent.ProcessingSanitizationMiddlewareFailed="ProcessingSanitizationMiddlewareFailed",TelemetryEvent.FormatTagsMiddlewareJSONStringifyFailed="FormatTagsMiddlewareJSONStringifyFailed",TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed="AttachmentUploadValidatorMiddlewareFailed",TelemetryEvent.CitationMiddlewareFailed="CitationMiddlewareFailed",TelemetryEvent.QueuePositionMessageRecieved="QueuePositionMessageRecieved",TelemetryEvent.AverageWaitTimeMessageRecieved="AverageWaitTimeMessageRecieved",TelemetryEvent.DataMaskingRuleApplied="DataMaskingRuleApplied",TelemetryEvent.DataMaskingRuleApplyFailed="DataMaskingRuleApplyFailed",TelemetryEvent.IC3ClientEvent="IC3ClientEvent",TelemetryEvent.ConversationEndedThreadEventReceived="ConversationEndedThreadEventReceived",TelemetryEvent.ConversationEndedByCustomer="ConversationEndedByCustomer",TelemetryEvent.ConversationEndedByAgent="ConversationEndedByAgent",TelemetryEvent.InvalidConfiguration="InvalidConfiguration",TelemetryEvent.SendTypingIndicatorSucceeded="SendTypingIndicatorSucceeded",TelemetryEvent.SendTypingIndicatorFailed="SendTypingIndicatorFailed",TelemetryEvent.WebChatEvent="WebChatEvent",TelemetryEvent.FacadeChatSDKEvent="FacadeChatSDKEvent",TelemetryEvent.PreChatSurveyStartChatMethodFailed="PreChatSurveyStartChatMethodFailed",TelemetryEvent.ChatAlreadyTriggered="ChatAlreadyTriggered",TelemetryEvent.StartProactiveChatEventReceived="StartProactiveChatEventReceived",TelemetryEvent.StartProactiveChatMethodFailed="StartProactiveChatMethodFailed",TelemetryEvent.ProactiveChatAccepted="ProactiveChatAccepted",TelemetryEvent.ProactiveChatRejected="ProactiveChatRejected",TelemetryEvent.IncomingProactiveChatScreenLoaded="IncomingProactiveChatScreenLoaded",TelemetryEvent.ProactiveChatClosed="ProactiveChatClosed",TelemetryEvent.ReconnectChatContinueConversation="ReconnectChatContinueConversation",TelemetryEvent.ReconnectChatStartNewConversation="ReconnectChatStartNewConversation",TelemetryEvent.ReconnectChatMinimize="ReconnectChatMinimize",TelemetryEvent.MessageSent="MessageSent",TelemetryEvent.MessageReceived="MessageReceived",TelemetryEvent.MessageLapTrack="MessageLapTrack",TelemetryEvent.BotFirstMessageLapTrack="BotFirstMessageLapTrack",TelemetryEvent.BotFirstMessageLapTrackError="BotFirstMessageLapTrackError",TelemetryEvent.MessageStartLapTrackError="MessageStartLapTrackError",TelemetryEvent.MessageStopLapTrackError="MessageStopLapTrackError",TelemetryEvent.SystemMessageReceived="SystemMessageReceived",TelemetryEvent.RehydrateMessageReceived="RehydrateMessageReceived",TelemetryEvent.CustomContextReceived="CustomContextReceived",TelemetryEvent.CustomEventAction="CustomEventAction",TelemetryEvent.NetworkDisconnected="NetworkDisconnected",TelemetryEvent.NetworkReconnected="NetworkReconnected",TelemetryEvent.LinkModePostChatWorkflowStarted="LinkModePostChatWorkflowStarted",TelemetryEvent.EmbedModePostChatWorkflowStarted="EmbedModePostChatWorkflowStarted",TelemetryEvent.PostChatWorkflowFromCustomer="PostChatWorkflowFromCustomer",TelemetryEvent.PostChatWorkflowFromAgent="PostChatWorkflowFromAgent",TelemetryEvent.PostChatWorkflowFromBot="PostChatWorkflowFromBot",TelemetryEvent.PostChatContextCallStarted="PostChatContextCallStarted",TelemetryEvent.PostChatContextCallSucceed="PostChatContextCallSucceed",TelemetryEvent.PostChatContextCallFailed="PostChatContextCallFailed",TelemetryEvent.PostChatSurveyLoadingPaneLoaded="PostChatSurveyLoadingPaneLoaded",TelemetryEvent.PostChatSurveyLoaded="PostChatSurveyLoaded",TelemetryEvent.PostChatSurveyUrlValidationCompleted="PostChatSurveyUrlValidationCompleted",TelemetryEvent.PostChatSurveyUrlValidationFailed="PostChatSurveyUrlValidationFailed",TelemetryEvent.ChatDisconnectThreadEventReceived="ChatDisconnectThreadEventReceived",TelemetryEvent.HiddenAdaptiveCardMessageReceived="HiddenAdaptiveCardMessageReceived",TelemetryEvent.EndingAdapterAfterDisconnectionError="EndingAdapterAfterDisconnectionError",TelemetryEvent.NewTokenValidationStarted="NewTokenValidationStarted",TelemetryEvent.NewTokenValidationCompleted="NewTokenValidationCompleted",TelemetryEvent.NewTokenValidationFailed="NewTokenValidationFailed",TelemetryEvent.TokenEmptyOrSame="TokenEmptyOrSame",TelemetryEvent.UXFooterStart="UXFooterStart",TelemetryEvent.UXFooterCompleted="UXFooterCompleted",TelemetryEvent.UXHeaderStart="UXHeaderStart",TelemetryEvent.UXHeaderCompleted="UXHeaderCompleted",TelemetryEvent.UXLoadingPaneStart="UXLoadingPaneStart",TelemetryEvent.UXLoadingPaneCompleted="UXLoadingPaneCompleted",TelemetryEvent.UXNotificationPaneStart="UXNotificationPaneStart",TelemetryEvent.UXNotificationPaneCompleted="UXNotificationPaneCompleted",TelemetryEvent.UXOutOfOfficeHoursPaneStart="UXOutOfOfficeHoursPaneStart",TelemetryEvent.UXOutOfOfficeHoursPaneCompleted="UXOutOfOfficeHoursPaneCompleted",TelemetryEvent.XSSTextDetected="XSSTextDetected",TelemetryEvent.UXPostChatLoadingPaneStart="UXPostChatLoadingPaneStart",TelemetryEvent.UXPostChatLoadingPaneCompleted="UXPostChatLoadingPaneCompleted",TelemetryEvent.UXPrechatPaneStart="UXPrechatPaneStart",TelemetryEvent.UXPrechatPaneCompleted="UXPrechatPaneCompleted",TelemetryEvent.UXProactiveChatPaneStart="UXProactiveChatPaneStart",TelemetryEvent.UXProactiveChatPaneCompleted="UXProactiveChatPaneCompleted",TelemetryEvent.UXReconnectChatPaneStart="UXReconnectChatPaneStart",TelemetryEvent.UXReconnectChatCompleted="UXReconnectChatCompleted",TelemetryEvent.UXStartChatErrorPaneStart="UXStartChatErrorPaneStart",TelemetryEvent.UXStartChatErrorCompleted="UXStartChatErrorCompleted",TelemetryEvent.UXEmailTranscriptPaneStart="UXEmailTranscriptPaneStart",TelemetryEvent.UXEmailTranscriptPaneCompleted="UXEmailTranscriptPaneCompleted",TelemetryEvent.UXWebchatContainerStart="UXWebchatContainerStart",TelemetryEvent.UXWebchatContainerCompleted="UXWebchatContainerCompleted",TelemetryEvent.UXLCWChatButtonLoadingStart="UXLCWChatButtonLoadingStart",TelemetryEvent.UXLCWChatButtonLoadingCompleted="UXLCWChatButtonLoadingCompleted",TelemetryEvent.UXConfirmationPaneStart="UXConfirmationPaneStart",TelemetryEvent.UXCitationPaneStart="UXCitationPaneStart",TelemetryEvent.UXConfirmationPaneCompleted="UXConfirmationPaneCompleted",TelemetryEvent.UXCitationPaneCompleted="UXCitationPaneCompleted",TelemetryEvent.UXLiveChatWidgetStart="UXLiveChatWidgetStart",TelemetryEvent.UXLiveChatWidgetCompleted="UXLiveChatWidgetCompleted",TelemetryEvent.UXPostChatPaneStarted="UXPostChatPaneStarted",TelemetryEvent.UXPostChatPaneCompleted="UXPostChatPaneCompleted",TelemetryEvent.AppInsightsInitialized="AppInsightsInitialized",TelemetryEvent.AppInsightsInitFailed="AppInsightsInitFailed",TelemetryEvent.ConvertPersistentChatHistoryMessageToActivityFailed="ConvertPersistentChatHistoryMessageToActivityFailed",TelemetryEvent.UXLCWPersistentChatHistoryInitialized="UXLCWPersistentChatHistoryInitialized",TelemetryEvent.LCWPersistentChatHistoryFetchStarted="LCWPersistentChatHistoryFetchStarted",TelemetryEvent.LCWPersistentChatHistoryFetchCompleted="LCWPersistentChatHistoryFetchCompleted",TelemetryEvent.LCWPersistentChatHistoryFetchFailed="LCWPersistentChatHistoryFetchFailed",TelemetryEvent.LCWWebChatStorePollingStarted="LCWWebChatStorePollingStarted",TelemetryEvent.LCWWebChatStoreReady="LCWWebChatStoreReady",TelemetryEvent.LCWWebChatConnected="LCWWebChatConnected",TelemetryEvent.LCWWebChatDisconnected="LCWWebChatDisconnected",TelemetryEvent.LCWWebChatConnectionCheckFailed="LCWWebChatConnectionCheckFailed",TelemetryEvent.LCWPersistentConversationHandlerInitialized="LCWPersistentConversationHandlerInitialized",TelemetryEvent.LCWPersistentHistoryPullBlocked="LCWPersistentHistoryPullBlocked",TelemetryEvent.LCWPersistentHistoryPullCompleted="LCWPersistentHistoryPullCompleted",TelemetryEvent.LCWPersistentHistoryReturnedNull="LCWPersistentHistoryReturnedNull",TelemetryEvent.LCWLazyLoadInitializationStarted="LCWLazyLoadInitializationStarted",TelemetryEvent.LCWLazyLoadContainerNotFound="LCWLazyLoadContainerNotFound",TelemetryEvent.LCWLazyLoadInitializationCompleted="LCWLazyLoadInitializationCompleted",TelemetryEvent.LCWLazyLoadSessionMetrics="LCWLazyLoadSessionMetrics",TelemetryEvent.LCWLazyLoadTargetElementNotFound="LCWLazyLoadTargetElementNotFound",TelemetryEvent.LCWLazyLoadScrollFailed="LCWLazyLoadScrollFailed",TelemetryEvent.LCWLazyLoadActivityMounted="LCWLazyLoadActivityMounted",TelemetryEvent.LCWLazyLoadReset="LCWLazyLoadReset",TelemetryEvent.LCWLazyLoadNoMoreHistory="LCWLazyLoadNoMoreHistory",TelemetryEvent.LCWLazyLoadHistoryError="LCWLazyLoadHistoryError",TelemetryEvent.LCWLazyLoadDestroyed="LCWLazyLoadDestroyed",TelemetryEvent.SecureEventBusUnauthorizedDispatch="SecureEventBusUnauthorizedDispatch",TelemetryEvent.SecureEventBusListenerError="SecureEventBusListenerError",TelemetryEvent.SecureEventBusDispatchError="SecureEventBusDispatchError",TelemetryEvent.StartChatComplete="StartChatComplete"}(TelemetryEvent||(TelemetryEvent={}));var ConversationStage,TelemetryConstants=function(){function TelemetryConstants(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TelemetryConstants)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TelemetryConstants,null,[{key:"map",value:function map(eventTypeOrScenarioType){switch(eventTypeOrScenarioType){case TelemetryEvent.ParseAdaptiveCardFailed:case TelemetryEvent.ReceivedNullOrEmptyToken:case TelemetryEvent.GetAuthTokenCalled:case TelemetryEvent.SuppressBotMagicCodeSucceeded:case TelemetryEvent.SuppressBotMagicCodeFailed:return ScenarioType.CONFIG_VALIDATION;case TelemetryEvent.WebChatLoaded:case TelemetryEvent.WidgetLoadComplete:case TelemetryEvent.WidgetLoadFailed:case TelemetryEvent.IncomingProactiveChatScreenLoaded:case TelemetryEvent.LCWChatButtonShow:case TelemetryEvent.PrechatSurveyLoaded:case TelemetryEvent.LoadingPaneLoaded:case TelemetryEvent.PostChatSurveyLoadingPaneLoaded:case TelemetryEvent.PostChatSurveyLoaded:case TelemetryEvent.EmailTranscriptLoaded:case TelemetryEvent.OutOfOfficePaneLoaded:case TelemetryEvent.ConfirmationPaneLoaded:case TelemetryEvent.ProactiveChatPaneLoaded:case TelemetryEvent.ThirdPartyCookiesBlocked:return ScenarioType.LOAD;case TelemetryEvent.PrechatSubmitted:case TelemetryEvent.LCWChatButtonClicked:case TelemetryEvent.ProactiveChatAccepted:case TelemetryEvent.ProactiveChatRejected:case TelemetryEvent.ProactiveChatClosed:case TelemetryEvent.ProcessingHTMLTextMiddlewareFailed:case TelemetryEvent.DataMaskingRuleApplied:case TelemetryEvent.ConversationEndedThreadEventReceived:case TelemetryEvent.InvalidConfiguration:case TelemetryEvent.DownloadTranscriptResponseNullOrUndefined:case TelemetryEvent.EmailTranscriptSent:case TelemetryEvent.EmailTranscriptFailed:case TelemetryEvent.DownloadTranscriptFailed:case TelemetryEvent.ConfirmationCancelButtonClicked:case TelemetryEvent.ConfirmationConfirmButtonClicked:case TelemetryEvent.PreChatSurveyStartChatMethodFailed:case TelemetryEvent.HeaderCloseButtonClicked:case TelemetryEvent.HeaderMinimizeButtonClicked:case TelemetryEvent.NotificationCloseChatButtonClicked:case TelemetryEvent.NotificationDismissButtonClicked:case TelemetryEvent.MessageSent:case TelemetryEvent.MessageReceived:case TelemetryEvent.CustomContextReceived:case TelemetryEvent.BrowserUnloadEventStarted:case TelemetryEvent.NetworkDisconnected:case TelemetryEvent.NetworkReconnected:case TelemetryEvent.AudioToggleButtonClicked:case TelemetryEvent.EmailTranscriptCancelButtonClicked:case TelemetryEvent.CustomerVoiceResponsePageLoaded:case TelemetryEvent.CustomerVoiceFormResponseSubmitted:case TelemetryEvent.CustomerVoiceFormResponseError:case TelemetryEvent.LinkModePostChatWorkflowStarted:case TelemetryEvent.EmbedModePostChatWorkflowStarted:case TelemetryEvent.PostChatWorkflowFromCustomer:case TelemetryEvent.PostChatWorkflowFromAgent:case TelemetryEvent.PostChatWorkflowFromBot:case TelemetryEvent.AppStatesException:case TelemetryEvent.SecureEventBusUnauthorizedDispatch:case TelemetryEvent.SecureEventBusListenerError:case TelemetryEvent.SecureEventBusDispatchError:return ScenarioType.ACTIONS;case TelemetryEvent.StartChatSDKCall:case TelemetryEvent.StartChatEventReceived:case TelemetryEvent.StartChatMethodException:case TelemetryEvent.CloseChatMethodException:case TelemetryEvent.StartProactiveChatEventReceived:case TelemetryEvent.StartProactiveChatMethodFailed:case TelemetryEvent.OnNewMessageFailed:case TelemetryEvent.OnNewMessageAudioNotificationFailed:case TelemetryEvent.GetConversationDetailsCallFailed:case TelemetryEvent.EndChatSDKCall:case TelemetryEvent.EndChatEventReceived:case TelemetryEvent.EndChatSDKCallFailed:case TelemetryEvent.PostChatContextCallFailed:case TelemetryEvent.PostChatContextCallSucceed:case TelemetryEvent.GetConversationDetailsException:case TelemetryEvent.PrepareEndChat:return ScenarioType.SDK;case TelemetryEvent.VideoCallAcceptButtonClick:case TelemetryEvent.CallAdded:case TelemetryEvent.LocalVideoStreamAdded:case TelemetryEvent.LocalVideoStreamRemoved:case TelemetryEvent.RemoteVideoStreamAdded:case TelemetryEvent.RemoteVideoStreamRemoved:case TelemetryEvent.CallDisconnected:case TelemetryEvent.CallDisconnectedException:case TelemetryEvent.IncomingCallEnded:case TelemetryEvent.VoiceVideoSdkInitialize:case TelemetryEvent.VoiceVideoSdkInitializeException:case TelemetryEvent.VoiceVideoLoading:case TelemetryEvent.VoiceVideoNotLoaded:case TelemetryEvent.VoiceVideoLoadingException:case TelemetryEvent.VoiceVideoAcceptCallException:case TelemetryEvent.VoiceVideoAcceptCallWithVideoException:case TelemetryEvent.VoiceCallAcceptButtonClick:case TelemetryEvent.CallRejectClick:case TelemetryEvent.CallRejectClickException:case TelemetryEvent.ToggleMuteButtonClick:case TelemetryEvent.ToggleMuteButtonClickException:case TelemetryEvent.ToggleCameraButtonClick:case TelemetryEvent.ToggleCameraButtonClickException:case TelemetryEvent.EndCallButtonClick:case TelemetryEvent.EndCallButtonClickException:case TelemetryEvent.CallingSDKInitSuccess:case TelemetryEvent.CallingSDKInitFailed:case TelemetryEvent.CallingSDKLoadSuccess:case TelemetryEvent.CallingSDKLoadFailed:return ScenarioType.CALLING;default:return ScenarioType.ACTIONS}}},{key:"mapEventToScenario",value:function mapEventToScenario(eventTypeOrScenarioType){return TelemetryConstants.map(eventTypeOrScenarioType)}}]),TelemetryConstants}();!function(ConversationStage){ConversationStage.Initialization="Initialization",ConversationStage.CSREngagement="CSR Engagement",ConversationStage.ConversationEnd="Conversation End"}(ConversationStage||(ConversationStage={}));var lib=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/index.js");function DataStoreManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DataStoreManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DataStoreManager_createClass(Constructor,protoProps,staticProps){return protoProps&&DataStoreManager_defineProperties(Constructor.prototype,protoProps),staticProps&&DataStoreManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var _class,DataStoreManager=DataStoreManager_createClass((function DataStoreManager(){!function DataStoreManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DataStoreManager)}));function KeyCodes_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function KeyCodes_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function KeyCodes_createClass(Constructor,protoProps,staticProps){return protoProps&&KeyCodes_defineProperties(Constructor.prototype,protoProps),staticProps&&KeyCodes_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}DataStoreManager.clientDataStore=void 0;var ScenarioState,KeyCodes=(_class=KeyCodes_createClass((function KeyCodes(){!function KeyCodes_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KeyCodes)})),_class.ENTER="Enter",_class.TAB="Tab",_class),dist=__webpack_require__("./node_modules/md5-typescript/dist/index.js");__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js");function ScenarioMarker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ScenarioMarker_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function formatScenario(state,event){return"SCENARIO_"+state+": Scenario_"+event}!function(ScenarioState){ScenarioState.Start="STARTED",ScenarioState.Fail="FAILED",ScenarioState.Complete="COMPLETED",ScenarioState.Warn="WARN"}(ScenarioState||(ScenarioState={}));var AllowedKeys,telemetry_ScenarioMarker=function(){function ScenarioMarker(){!function ScenarioMarker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ScenarioMarker)}return function ScenarioMarker_createClass(Constructor,protoProps,staticProps){return protoProps&&ScenarioMarker_defineProperties(Constructor.prototype,protoProps),staticProps&&ScenarioMarker_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ScenarioMarker,null,[{key:"startScenario",value:function startScenario(event){return formatScenario(ScenarioState.Start,event)}},{key:"failScenario",value:function failScenario(event){return formatScenario(ScenarioState.Fail,event)}},{key:"completeScenario",value:function completeScenario(event){return formatScenario(ScenarioState.Complete,event)}},{key:"warnScenario",value:function warnScenario(event){return formatScenario(ScenarioState.Warn,event)}}]),ScenarioMarker}(),AppInsightsEventMapping={LCWChatButtonClicked:"LCWChatButtonActionStarted",UXLCWChatButtonLoadingStart:"LiveChatWidgetChatButtonLoadingStarted",UXLCWChatButtonLoadingCompleted:"LiveChatWidgetChatButtonLoadingCompleted",UXPrechatPaneStart:"PrechatSurveyStarted",UXPrechatPaneCompleted:"PrechatSurveyCompleted",PrechatSubmitted:"PrechatSurveySubmitCompleted",EndChatEventReceived:"EndChatEventReceivedCompleted",EmailTranscriptSent:"EmailTranscriptActionCompleted",EmailTranscriptFailed:"EmailTranscriptActionFailed",HeaderCloseButtonClicked:"CloseChatActionStarted",HeaderMinimizeButtonClicked:"MinimizeChatActionStarted",DownloadTranscriptButtonClicked:"DownloadTranscriptActionStarted",EmailTranscriptButtonClicked:"EmailTranscriptButtonActionStarted",ProactiveChatRejected:"ProactiveChatTimeOutCompleted",MessageSent:"MessageSentCompleted",MessageReceived:"MessageReceivedCompleted",SystemMessageReceived:"SystemMessageReceivedCompleted",RehydrateMessageReceived:"ChatHistoryMessageReceivedCompleted",CustomContextReceived:"CustomContextReceivedCompleted",NewTokenValidationStarted:"AuthTokenValidationStarted",NewTokenValidationCompleted:"AuthTokenValidationCompleted",NewTokenValidationFailed:"AuthTokenValidationFailed",UXPostChatPaneStarted:"PostChatSurveyStarted",UXPostChatPaneCompleted:"PostChatSurveyCompleted",WidgetLoadStarted:"ChatSessionInitializationStarted",WidgetLoadComplete:"ChatSessionInitializationCompleted",WidgetLoadFailed:"ChatSessionInitializationFailed"};function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}!function(AllowedKeys){AllowedKeys.OrganizationId="powerplatform.analytics.resource.organization.id",AllowedKeys.ConversationId="powerplatform.analytics.resource.id",AllowedKeys.ElapsedTimeInMilliseconds="Duration",AllowedKeys.Description="omnichannel.description",AllowedKeys.ChannelId="omnichannel.channel.type",AllowedKeys.LCWRuntimeId="ClientSessionId"}(AllowedKeys||(AllowedKeys={}));var initializationPromise=null,appInsightsLogger_appInsightsLogger=function appInsightsLogger(appInsightsKey){var _log,isValidKey=function isValidKey(key){var INSTRUMENTATION_KEY_REGEX=new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),CONNECTION_STRING_REGEX=new RegExp("^InstrumentationKey=[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12};IngestionEndpoint=https://[a-zA-Z0-9\\-\\.]+\\.applicationinsights\\.azure\\.com/.*");return INSTRUMENTATION_KEY_REGEX.test(key)||CONNECTION_STRING_REGEX.test(key)},initializeAppInsights=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(appInsightsKey){var _yield$import,ApplicationInsights,config;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(window.appInsights||!appInsightsKey){_context.next=19;break}if(isValidKey(appInsightsKey)){_context.next=4;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppInsightsInitFailed,Description:Constants.b.AppInsightsKeyError,ExceptionDetails:{message:Constants.b.AppInsightsKeyError}}),_context.abrupt("return");case 4:return _context.prev=4,_context.next=7,__webpack_require__.e(8).then(__webpack_require__.bind(null,"./node_modules/@microsoft/applicationinsights-web/dist-es5/applicationinsights-web.js"));case 7:_yield$import=_context.sent,ApplicationInsights=_yield$import.ApplicationInsights,config=Object.assign({},appInsightsKey.includes("IngestionEndpoint")?{connectionString:appInsightsKey}:{instrumentationKey:appInsightsKey}),window.appInsights=new ApplicationInsights({config:config}),window.appInsights.loadAppInsights(),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.AppInsightsInitialized,Description:Constants.b.AppInsightsInitialized}),_context.next=19;break;case 15:_context.prev=15,_context.t0=_context.catch(4),console.error(Constants.b.AppInsightsInitError,_context.t0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppInsightsInitFailed,Description:Constants.b.AppInsightsInitError,ExceptionDetails:{message:Constants.b.AppInsightsInitError+" with key ending: "+appInsightsKey.slice(-3),exception:_context.t0}});case 19:case"end":return _context.stop()}}),_callee,null,[[4,15]])})));return function initializeAppInsights(_x){return _ref.apply(this,arguments)}}(),logger=function(){var _ref2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return initializationPromise||(initializationPromise=initializeAppInsights(appInsightsKey)),_context2.next=3,initializationPromise;case 3:return _context2.abrupt("return",window.appInsights);case 4:case"end":return _context2.stop()}}),_callee2)})));return function logger(){return _ref2.apply(this,arguments)}}(),aiLogger={type:"appInsightsLogger",log:(_log=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(logLevel,telemetryInput){var _telemetryInput$paylo,_telemetryInput$telem,_logger,eventName,telemetryInfo,trackingEventName,eventProperties;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,logger();case 3:if(_logger=_context3.sent){_context3.next=6;break}return _context3.abrupt("return");case 6:eventName=null==telemetryInput||null===(_telemetryInput$paylo=telemetryInput.payload)||void 0===_telemetryInput$paylo?void 0:_telemetryInput$paylo.Event,telemetryInfo=null==telemetryInput||null===(_telemetryInput$telem=telemetryInput.telemetryInfo)||void 0===_telemetryInput$telem?void 0:_telemetryInput$telem.telemetryInfo,eventName&&(trackingEventName=getTrackingEventName(logLevel,eventName),eventProperties=setEventProperties(trackingEventName,telemetryInfo),_logger.trackTrace({message:trackingEventName,properties:eventProperties})),_context3.next=14;break;case 11:_context3.prev=11,_context3.t0=_context3.catch(0),console.error("Error in logging telemetry to Application Insights:",_context3.t0);case 14:case"end":return _context3.stop()}}),_callee3,null,[[0,11]])}))),function log(_x2,_x3){return _log.apply(this,arguments)}),dispose:function dispose(){window.appInsights&&(window.appInsights.unload(),window.appInsights=null)}};function setEventProperties(eventName,telemetryInfo){var _customProperties$Con,eventProperties={};if(telemetryInfo)for(var _key2 in AllowedKeys){var finalKey=AllowedKeys[_key2],value=telemetryInfo[_key2];null!=value&&""!==value&&(eventProperties[finalKey]=value)}null!=telemetryInfo&&telemetryInfo.ExceptionDetails&&(eventProperties[AllowedKeys.Description]=JSON.stringify(telemetryInfo.ExceptionDetails));var customProperties=function(){if(null==telemetryInfo||!telemetryInfo.CustomProperties)return{};try{return"string"==typeof telemetryInfo.CustomProperties?JSON.parse(telemetryInfo.CustomProperties):telemetryInfo.CustomProperties}catch(error){return console.warn("Failed to parse CustomProperties:",error),{}}}();return eventProperties.ConversationStage=null!==(_customProperties$Con=customProperties.ConversationStage)&&void 0!==_customProperties$Con?_customProperties$Con:ConversationStage.CSREngagement,eventProperties.Scenario="Conversation Diagnostics",eventProperties["powerplatform.analytics.subscenario"]=eventName.includes(": ")?eventName.split(": ")[1]:eventName,eventProperties}function getTrackingEventName(logLevel,eventName){var event=(AppInsightsEventMapping[eventName]||eventName).replace(/^(UX|LCW)/,"");return logLevel===LogLevel.ERROR?telemetry_ScenarioMarker.failScenario(event):logLevel===LogLevel.WARN?telemetry_ScenarioMarker.warnScenario(event):event.toLowerCase().includes("complete")?telemetry_ScenarioMarker.completeScenario(event):telemetry_ScenarioMarker.startScenario(event)}return aiLogger},AriaSDK=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/external/aria/webjs/AriaSDK.js"),Enums=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-sdk/lib/external/aria/common/Enums.js"),defaultAriaConfig={collectorUriForTelemetry:"",ariaTelemetryKey:"c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083",ariaTelemetryApplicationName:"D365_Omnichannel_Client_Public_Prod",disableCookieUsage:!0};function TelemetryManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TelemetryManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function TelemetryManager_createClass(Constructor,protoProps,staticProps){return protoProps&&TelemetryManager_defineProperties(Constructor.prototype,protoProps),staticProps&&TelemetryManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function TelemetryManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TelemetryTimers=TelemetryManager_createClass((function TelemetryTimers(){TelemetryManager_classCallCheck(this,TelemetryTimers)}));TelemetryTimers.LcwLoadToChatButtonTimer=void 0,TelemetryTimers.ProactiveChatScreenTimer=void 0,TelemetryTimers.WidgetLoadTimer=void 0;var TelemetryManager=TelemetryManager_createClass((function TelemetryManager(){TelemetryManager_classCallCheck(this,TelemetryManager)}));TelemetryManager.InternalTelemetryData=void 0;var loggers=[],TelemetryManager_RegisterLoggers=function RegisterLoggers(){var logTelemetry=function logTelemetry(telemetryEvent){loggers.map((function(logger){var _logLevel,_payload$scenarioType,_payload,_telemetryInput$paylo,logLevel=null!==(_logLevel=telemetryEvent.logLevel)&&void 0!==_logLevel?_logLevel:LogLevel.INFO,scenarioType=null!==(_payload$scenarioType=null===(_payload=telemetryEvent.payload)||void 0===_payload?void 0:_payload.scenarioType)&&void 0!==_payload$scenarioType?_payload$scenarioType:ScenarioType.UNDEFINED,telemetryInput=function parseInput(payload){var scenarioType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ScenarioType.UNDEFINED;return{scenarioType:scenarioType==ScenarioType.UNDEFINED?TelemetryConstants.mapEventToScenario(payload.Event):scenarioType,payload:payload}}(null==telemetryEvent?void 0:telemetryEvent.payload,scenarioType);if(telemetryInput.telemetryInfo={telemetryInfo:TelemetryHelper_TelemetryHelper.buildTelemetryEvent(logLevel,telemetryInput)},null!=telemetryInput&&null!==(_telemetryInput$paylo=telemetryInput.payload)&&void 0!==_telemetryInput$paylo&&_telemetryInput$paylo.Event){var _telemetryEvent$paylo;if("appInsightsLogger"===logger.type&&!0!==(null==telemetryEvent||null===(_telemetryEvent$paylo=telemetryEvent.payload)||void 0===_telemetryEvent$paylo?void 0:_telemetryEvent$paylo.LogToAll))return;Promise.resolve(logger.log(logLevel,telemetryInput))}}))};return function registerLoggers(){var _TelemetryManager$Int,_TelemetryManager$Int2,_TelemetryManager$Int3,_TelemetryManager$Int4,_TelemetryManager$Int5,_TelemetryManager$Int6,_TelemetryManager$Int7,_TelemetryManager$Int8,_TelemetryManager$Int9,_TelemetryManager$Int10;if(!1!==(null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int||null===(_TelemetryManager$Int2=_TelemetryManager$Int.telemetryConfig)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.disableConsoleLog)&&!1!==(null===(_TelemetryManager$Int3=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int3||null===(_TelemetryManager$Int4=_TelemetryManager$Int3.telemetryConfig)||void 0===_TelemetryManager$Int4?void 0:_TelemetryManager$Int4.telemetryDisabled)&&!1!==(null===(_TelemetryManager$Int5=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int5||null===(_TelemetryManager$Int6=_TelemetryManager$Int5.appInsightsConfig)||void 0===_TelemetryManager$Int6?void 0:_TelemetryManager$Int6.appInsightsDisabled)||cjs.BroadcastService.getAnyMessage().subscribe((function(event){event.payload&&event.eventName in TelemetryEvent&&logTelemetry(event)})),!1===(null===(_TelemetryManager$Int7=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int7||null===(_TelemetryManager$Int8=_TelemetryManager$Int7.telemetryConfig)||void 0===_TelemetryManager$Int8?void 0:_TelemetryManager$Int8.disableConsoleLog)&&loggers.push(function consoleLogger(){var consoleLogger={log:function log(logLevel,telemetryInput){var payload=null!=telemetryInput&&telemetryInput.payload&&Object.keys(null==telemetryInput?void 0:telemetryInput.payload).length>0?null==telemetryInput?void 0:telemetryInput.payload:"",telemetryInfo=null!=telemetryInput&&telemetryInput.telemetryInfo&&Object.keys(null==telemetryInput?void 0:telemetryInput.telemetryInfo).length>0?null==telemetryInput?void 0:telemetryInput.telemetryInfo:"";try{switch(logLevel){case LogLevel.INFO:console.info(Constants.e.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.DEBUG:console.debug(Constants.e.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.WARN:console.warn(Constants.e.LiveChatWidget,payload,telemetryInfo);break;case LogLevel.ERROR:console.error(Constants.e.LiveChatWidget,payload,telemetryInfo);break;default:console.debug(Constants.e.LiveChatWidget,payload,telemetryInfo)}}catch(ex){console.error("An unexpected error occurred in the Telemetry client: "+ex)}},dispose:function dispose(){console.log("disposing loggers")}};return consoleLogger}()),!1===(null===(_TelemetryManager$Int9=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int9||null===(_TelemetryManager$Int10=_TelemetryManager$Int9.telemetryConfig)||void 0===_TelemetryManager$Int10?void 0:_TelemetryManager$Int10.telemetryDisabled)){var _TelemetryManager$Int11,_TelemetryManager$Int24,_TelemetryManager$Int25,_TelemetryManager$Int26,_TelemetryManager$Int27,_TelemetryManager$Int28,_TelemetryManager$Int29,_TelemetryManager$Int30,_TelemetryManager$Int12,_TelemetryManager$Int13,_TelemetryManager$Int14,_TelemetryManager$Int15,_TelemetryManager$Int16,_TelemetryManager$Int17,_TelemetryManager$Int18,_TelemetryManager$Int19,_TelemetryManager$Int20,_TelemetryManager$Int21,_TelemetryManager$Int22,_TelemetryManager$Int23;if(null!==(_TelemetryManager$Int11=TelemetryManager.InternalTelemetryData)&&void 0!==_TelemetryManager$Int11&&_TelemetryManager$Int11.ariaConfig)loggers.push(function ariaTelemetryLogger(ariaTelemetryKey,disabledCookieUsage,collectiorUriForTelemetry,ariaTelemetryApplicationName){var _logger,logger=function logger(){if(isNullOrUndefined(_logger)&&!isNullOrEmptyString(ariaTelemetryKey)){var configuration={disableCookiesUsage:disabledCookieUsage};if(isNullOrEmptyString(collectiorUriForTelemetry)){if(TelemetryManager.InternalTelemetryData.environmentVersion==Constants.i.prod){var _TelemetryManager$Int,orgUrl=null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int?void 0:_TelemetryManager$Int.orgUrl;isNullOrUndefined(orgUrl)||utils_getDomain(orgUrl)===Constants.c.EU&&(configuration.collectorUri=Constants.c.EUROPE_ENDPOINT)}}else configuration.collectorUri=collectiorUriForTelemetry;try{void 0===(_logger=AriaSDK.AWTLogManager.initialize(ariaTelemetryKey,configuration))&&(_logger=AriaSDK.AWTLogManager.getLogger(ariaTelemetryKey))}catch(error){console.log(error)}}return _logger};return{log:function log(logLevel,telemetryInput){try{var _telemetryInput$telem,telemetryInfo=null==telemetryInput||null===(_telemetryInput$telem=telemetryInput.telemetryInfo)||void 0===_telemetryInput$telem?void 0:_telemetryInput$telem.telemetryInfo,eventProperties={name:telemetryInput.scenarioType,properties:{}};if(telemetryInfo){Object.keys(telemetryInfo).forEach((function(key,index){if(!isNullOrUndefined(telemetryInfo[key])&&!isNullOrEmptyString(telemetryInfo[key])){var property={value:"object"==typeof telemetryInfo[key]?JSON.stringify(telemetryInfo[key]):telemetryInfo[key],type:"number"==typeof telemetryInfo[key]?Enums.AWTPropertyType.Double:Enums.AWTPropertyType.String,pii:Enums.AWTPiiKind.NotSet,cc:Enums.AWTCustomerContentKind.NotSet};eventProperties.properties[key]=property}}));var nameProperty={value:Constants.e.LiveChatWidget,type:Enums.AWTPropertyType.String,pii:Enums.AWTPiiKind.GenericData,cc:Enums.AWTCustomerContentKind.NotSet};eventProperties.properties[ariaTelemetryApplicationName]=nameProperty}logger()?logger().logEvent(eventProperties):console.log("Unable to initialize aria logger")}catch(error){console.error("Error in logging telemetry to Aria logger:"+error)}},dispose:function dispose(){AriaSDK.AWTLogManager.flush((function(){console.log("Aria logger disposed")}))}}}(null!==(_TelemetryManager$Int12=null===(_TelemetryManager$Int13=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int13||null===(_TelemetryManager$Int14=_TelemetryManager$Int13.ariaConfig)||void 0===_TelemetryManager$Int14?void 0:_TelemetryManager$Int14.ariaTelemetryKey)&&void 0!==_TelemetryManager$Int12?_TelemetryManager$Int12:defaultAriaConfig.ariaTelemetryKey,null!==(_TelemetryManager$Int15=null===(_TelemetryManager$Int16=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int16||null===(_TelemetryManager$Int17=_TelemetryManager$Int16.ariaConfig)||void 0===_TelemetryManager$Int17?void 0:_TelemetryManager$Int17.disableCookieUsage)&&void 0!==_TelemetryManager$Int15?_TelemetryManager$Int15:defaultAriaConfig.disableCookieUsage,null!==(_TelemetryManager$Int18=null===(_TelemetryManager$Int19=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int19||null===(_TelemetryManager$Int20=_TelemetryManager$Int19.ariaConfig)||void 0===_TelemetryManager$Int20?void 0:_TelemetryManager$Int20.collectorUriForTelemetry)&&void 0!==_TelemetryManager$Int18?_TelemetryManager$Int18:defaultAriaConfig.collectorUriForTelemetry,null!==(_TelemetryManager$Int21=null===(_TelemetryManager$Int22=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int22||null===(_TelemetryManager$Int23=_TelemetryManager$Int22.ariaConfig)||void 0===_TelemetryManager$Int23?void 0:_TelemetryManager$Int23.ariaTelemetryApplicationName)&&void 0!==_TelemetryManager$Int21?_TelemetryManager$Int21:defaultAriaConfig.ariaTelemetryApplicationName));var customLoggers=null===(_TelemetryManager$Int24=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int24||null===(_TelemetryManager$Int25=_TelemetryManager$Int24.telemetryConfig)||void 0===_TelemetryManager$Int25?void 0:_TelemetryManager$Int25.telemetryLoggers;customLoggers&&customLoggers.map((function(logger){loggers.push(logger)}));var chatConfigAppInsightsKey=null===(_TelemetryManager$Int26=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int26?void 0:_TelemetryManager$Int26.chatConfigAppInsightsKey,appInsightsKeyFromUser=null===(_TelemetryManager$Int27=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int27||null===(_TelemetryManager$Int28=_TelemetryManager$Int27.appInsightsConfig)||void 0===_TelemetryManager$Int28?void 0:_TelemetryManager$Int28.appInsightsKey;chatConfigAppInsightsKey?loggers.push(appInsightsLogger_appInsightsLogger(chatConfigAppInsightsKey)):appInsightsKeyFromUser&&!1===(null===(_TelemetryManager$Int29=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int29||null===(_TelemetryManager$Int30=_TelemetryManager$Int29.appInsightsConfig)||void 0===_TelemetryManager$Int30?void 0:_TelemetryManager$Int30.appInsightsDisabled)&&loggers.push(appInsightsLogger_appInsightsLogger(appInsightsKeyFromUser))}}()};function TelemetryHelper_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function TelemetryHelper_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var TelemetryHelper_TelemetryHelper=function(){function TelemetryHelper(){!function TelemetryHelper_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TelemetryHelper)}return function TelemetryHelper_createClass(Constructor,protoProps,staticProps){return protoProps&&TelemetryHelper_defineProperties(Constructor.prototype,protoProps),staticProps&&TelemetryHelper_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TelemetryHelper,null,[{key:"buildTelemetryEvent",value:function buildTelemetryEvent(level,input){switch(input.scenarioType){case ScenarioType.LOAD:return TelemetryHelper.conformToLoadContract(level,input);case ScenarioType.IC3_CLIENT:return TelemetryHelper.conformToIC3ClientContract(level,input);case ScenarioType.WEBCHAT:return TelemetryHelper.conformToWebChatContract(level,input);case ScenarioType.OCCHATSDK:case ScenarioType.SDK:return TelemetryHelper.conformToOCChatSDKContract(level,input);case ScenarioType.ACTIONS:return TelemetryHelper.conformToActionsContract(level,input);case ScenarioType.CALLING:return TelemetryHelper.conformToCallingContract(level,input);case ScenarioType.ACS_ADAPTER:return TelemetryHelper.conformToACSAdapterContract(level,input);default:case ScenarioType.CONFIG_VALIDATION:return TelemetryHelper.conformToConfigValidationContract(level,input)}}},{key:"populateBasicProperties",value:function populateBasicProperties(level,telemetryData){var _TelemetryManager$Int,_TelemetryManager$Int2,_TelemetryManager$Int3,_TelemetryManager$Int4,_TelemetryManager$Int5,_TelemetryManager$Int6,_TelemetryManager$Int7,_TelemetryManager$Int8,_TelemetryManager$Int9,_TelemetryManager$Int10,_TelemetryManager$Int11,_TelemetryManager$Int12,_TelemetryManager$Int13,_TelemetryManager$Int14,_TelemetryManager$Int15,_TelemetryManager$Int16,_TelemetryManager$Int17,_TelemetryManager$Int18,_TelemetryManager$Int19,_TelemetryManager$Int20,_TelemetryManager$Int21,_TelemetryManager$Int22;return{WidgetId:null!==(_TelemetryManager$Int=null===(_TelemetryManager$Int2=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.widgetId)&&void 0!==_TelemetryManager$Int?_TelemetryManager$Int:"",ChatId:null!==(_TelemetryManager$Int3=null===(_TelemetryManager$Int4=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int4?void 0:_TelemetryManager$Int4.chatId)&&void 0!==_TelemetryManager$Int3?_TelemetryManager$Int3:"",ChannelId:null!==(_TelemetryManager$Int5=null===(_TelemetryManager$Int6=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int6?void 0:_TelemetryManager$Int6.channelId)&&void 0!==_TelemetryManager$Int5?_TelemetryManager$Int5:"lcw2.0",ConversationId:null!==(_TelemetryManager$Int7=null===(_TelemetryManager$Int8=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int8?void 0:_TelemetryManager$Int8.conversationId)&&void 0!==_TelemetryManager$Int7?_TelemetryManager$Int7:"",OrganizationId:null!==(_TelemetryManager$Int9=null===(_TelemetryManager$Int10=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int10?void 0:_TelemetryManager$Int10.orgId)&&void 0!==_TelemetryManager$Int9?_TelemetryManager$Int9:"",OrganizationUrl:null!==(_TelemetryManager$Int11=null===(_TelemetryManager$Int12=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int12?void 0:_TelemetryManager$Int12.orgUrl)&&void 0!==_TelemetryManager$Int11?_TelemetryManager$Int11:"",LCWRuntimeId:null!==(_TelemetryManager$Int13=null===(_TelemetryManager$Int14=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int14?void 0:_TelemetryManager$Int14.lcwRuntimeId)&&void 0!==_TelemetryManager$Int13?_TelemetryManager$Int13:"",CurrentRequestId:null!==(_TelemetryManager$Int15=null===(_TelemetryManager$Int16=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int16?void 0:_TelemetryManager$Int16.currentRequestId)&&void 0!==_TelemetryManager$Int15?_TelemetryManager$Int15:"",LogLevel:level,OCChatSDKVersion:null!==(_TelemetryManager$Int17=null===(_TelemetryManager$Int18=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int18?void 0:_TelemetryManager$Int18.OCChatSDKVersion)&&void 0!==_TelemetryManager$Int17?_TelemetryManager$Int17:"",OCChatWidgetVersion:null!==(_TelemetryManager$Int19=null===(_TelemetryManager$Int20=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int20?void 0:_TelemetryManager$Int20.chatWidgetVersion)&&void 0!==_TelemetryManager$Int19?_TelemetryManager$Int19:"",OCChatComponentsVersion:null!==(_TelemetryManager$Int21=null===(_TelemetryManager$Int22=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int22?void 0:_TelemetryManager$Int22.chatComponentVersion)&&void 0!==_TelemetryManager$Int21?_TelemetryManager$Int21:""}}},{key:"populate",value:function populate(level,telemetryData,configure){var event=TelemetryHelper.populateBasicProperties(level,telemetryData);return configure(event),event}},{key:"conformToActionsContract",value:function conformToActionsContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Event=payload.Event,event.ActionType=payload.ActionType,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Description=payload.Description,event.CustomProperties=JSON.stringify(payload.CustomProperties)}))}},{key:"conformToWebChatContract",value:function conformToWebChatContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Event=payload.type,event.EventInfo=payload.name,event.Dimensions=payload.dimensions,event.Data=payload.data,event.Duration=payload.duration,event.ExceptionDetails=JSON.stringify(payload.error)}))}},{key:"conformToConfigValidationContract",value:function conformToConfigValidationContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int23,_TelemetryManager$Int24,_TelemetryManager$Int25;event.Event=payload.Event,event.RequestId=payload.RequestId,event.LCWVersion=null===(_TelemetryManager$Int23=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int23?void 0:_TelemetryManager$Int23.environmentVersion,event.CloudType=payload.CloudType,event.Domain=null===(_TelemetryManager$Int24=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int24?void 0:_TelemetryManager$Int24.hostName,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Language=(null===(_TelemetryManager$Int25=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int25?void 0:_TelemetryManager$Int25.chatWidgetLocaleLCID)||"",event.Description=payload.Data}))}},{key:"conformToLoadContract",value:function conformToLoadContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Event=payload.Event,event.Description=payload.Description,event.ResourcePath=payload.ResourcePath,event.WidgetState=payload.WidgetState,event.ChatState=payload.ChatState,event.ChatType=payload.ChatType,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails)}))}},{key:"conformToIC3ClientContract",value:function conformToIC3ClientContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int26;event.Event=payload.Event,event.IC3ClientVersion=null===(_TelemetryManager$Int26=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int26?void 0:_TelemetryManager$Int26.IC3ClientVersion,event.SubscriptionId=payload.SubscriptionId,event.EndpointUrl=payload.EndpointUrl,event.EndpointId=payload.EndpointId,event.ErrorCode=payload.ErrorCode,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.ShouldBubbleToHost=payload.ShouldBubbleToHost,event.Description=payload.Description}))}},{key:"conformToACSAdapterContract",value:function conformToACSAdapterContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.Description=payload.Description,event.ACSUserId=payload.ACSUserId,event.ChatThreadId=payload.ChatThreadId,event.ChatMessageId=payload.ChatMessageId,event.TimeStamp=payload.TimeStamp,event.Event=payload.Event,event.ErrorCode=payload.ErrorCode,event.ExceptionDetails=payload.ExceptionDetails}))}},{key:"conformToCallingContract",value:function conformToCallingContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){event.CallId=payload.CallId,event.Event=payload.Event,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Description=payload.Description}))}},{key:"conformToOCChatSDKContract",value:function conformToOCChatSDKContract(level,input){var payload=input.payload;return TelemetryHelper.populate(level,payload,(function(event){var _TelemetryManager$Int27;event.RequestId=payload.RequestId,event.Event=payload.Event,event.OCChatSDKVersion=null!==(_TelemetryManager$Int27=TelemetryManager.InternalTelemetryData.OCChatSDKVersion)&&void 0!==_TelemetryManager$Int27?_TelemetryManager$Int27:"",event.TransactionId=payload.TransactionId,event.ElapsedTimeInMilliseconds=payload.ElapsedTimeInMilliseconds,event.ExceptionDetails=JSON.stringify(payload.ExceptionDetails),event.Description=payload.Description}))}},{key:"addChatConfigDataToTelemetry",value:function addChatConfigDataToTelemetry(chatConfig,telemetryInternalData){var _chatConfig$ChatWidge,telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.chatWidgetLocaleLCID=null===(_chatConfig$ChatWidge=chatConfig.ChatWidgetLanguage)||void 0===_chatConfig$ChatWidge?void 0:_chatConfig$ChatWidge.msdyn_localeid,telemetryDataLocal}},{key:"addWidgetDataToTelemetry",value:function addWidgetDataToTelemetry(telemetryConfig,telemetryInternalData){var _telemetryConfig$LCWR,telemetryDataLocal=telemetryInternalData;if(null==telemetryConfig||!telemetryConfig.appId||""===(null==telemetryConfig?void 0:telemetryConfig.appId.trim()))throw new Error("TelemetryConfig.appId is not set");if(null==telemetryConfig||!telemetryConfig.orgId||""===(null==telemetryConfig?void 0:telemetryConfig.orgId.trim()))throw new Error("TelemetryConfig.orgId is not set");if(null==telemetryConfig||!telemetryConfig.orgUrl||""===(null==telemetryConfig?void 0:telemetryConfig.orgUrl.trim()))throw new Error("TelemetryConfig.orgUrl is not set");return telemetryDataLocal.widgetId=null==telemetryConfig?void 0:telemetryConfig.appId,telemetryDataLocal.orgId=null==telemetryConfig?void 0:telemetryConfig.orgId,telemetryDataLocal.orgUrl=null==telemetryConfig?void 0:telemetryConfig.orgUrl,telemetryDataLocal.lcwRuntimeId=null!==(_telemetryConfig$LCWR=telemetryConfig.LCWRuntimeId)&&void 0!==_telemetryConfig$LCWR?_telemetryConfig$LCWR:utils_newGuid(),telemetryDataLocal}},{key:"addSessionDataToTelemetry",value:function addSessionDataToTelemetry(chatSession,telemetryInternalData){var _chatSession$chatToke,_chatSession$chatToke2,telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.chatId=null==chatSession||null===(_chatSession$chatToke=chatSession.chatToken)||void 0===_chatSession$chatToke?void 0:_chatSession$chatToke.chatId,telemetryDataLocal.currentRequestId=null==chatSession||null===(_chatSession$chatToke2=chatSession.chatToken)||void 0===_chatSession$chatToke2?void 0:_chatSession$chatToke2.requestId,telemetryInternalData}},{key:"addConversationDataToTelemetry",value:function addConversationDataToTelemetry(liveWorkItem,telemetryInternalData){var telemetryDataLocal=telemetryInternalData;return telemetryDataLocal.conversationId=liveWorkItem.conversationId,telemetryDataLocal}},{key:"postTelemetryEvent",value:function postTelemetryEvent(eventName,logLevel,payload){var _TelemetryManager$Int28,telemetryEvent={eventName:eventName,logLevel:logLevel,payload:Object.assign({},payload,{runtimeId:null===(_TelemetryManager$Int28=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int28?void 0:_TelemetryManager$Int28.lcwRuntimeId})};cjs.BroadcastService.postMessage(telemetryEvent)}}]),TelemetryHelper}();TelemetryHelper_TelemetryHelper.callId=void 0,TelemetryHelper_TelemetryHelper.elapsedTime=void 0,TelemetryHelper_TelemetryHelper.logCallingEvent=function(logLevel,payload,callId){var _payload$Event;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event=null==payload?void 0:payload.Event)&&void 0!==_payload$Event?_payload$Event:"",logLevel,Object.assign({},payload,{CallId:callId}))},TelemetryHelper_TelemetryHelper.logLoadingEvent=function(logLevel,payload){var _payload$Event2;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event2=null==payload?void 0:payload.Event)&&void 0!==_payload$Event2?_payload$Event2:"",logLevel,payload)},TelemetryHelper_TelemetryHelper.logUIEvent=function(logLevel,payload){var _payload$Event3;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event3=null==payload?void 0:payload.Event)&&void 0!==_payload$Event3?_payload$Event3:"",logLevel,payload)},TelemetryHelper_TelemetryHelper.logActionEvent=function(logLevel,payload){var _payload$Event4;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event4=null==payload?void 0:payload.Event)&&void 0!==_payload$Event4?_payload$Event4:"",logLevel,payload)},TelemetryHelper_TelemetryHelper.logSDKEvent=function(logLevel,payload){var _payload$Event5,_TelemetryManager$Int29;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event5=null==payload?void 0:payload.Event)&&void 0!==_payload$Event5?_payload$Event5:"",logLevel,Object.assign({},payload,{TransactionId:utils_newGuid(),RequestId:null===(_TelemetryManager$Int29=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int29?void 0:_TelemetryManager$Int29.currentRequestId}))},TelemetryHelper_TelemetryHelper.logConfigDataEvent=function(logLevel,payload){var _payload$Event6;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event6=null==payload?void 0:payload.Event)&&void 0!==_payload$Event6?_payload$Event6:"",logLevel,payload)},TelemetryHelper_TelemetryHelper.logWebChatEvent=function(logLevel,payload){TelemetryHelper_TelemetryHelper.postTelemetryEvent(TelemetryEvent.WebChatEvent,logLevel,Object.assign({},payload,{type:TelemetryEvent.WebChatEvent,scenarioType:ScenarioType.WEBCHAT}))},TelemetryHelper_TelemetryHelper.logFacadeChatSDKEvent=function(logLevel,payload){var _payload$Event7;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event7=null==payload?void 0:payload.Event)&&void 0!==_payload$Event7?_payload$Event7:TelemetryEvent.FacadeChatSDKEvent,logLevel,payload)},TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry=function(logLevel,payload){var _payload$Event8;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event8=null==payload?void 0:payload.Event)&&void 0!==_payload$Event8?_payload$Event8:"",logLevel,Object.assign({},payload,{LogToAll:!0}))},TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry=function(logLevel,payload){var _payload$Event9;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event9=null==payload?void 0:payload.Event)&&void 0!==_payload$Event9?_payload$Event9:"",logLevel,Object.assign({},payload,{LogToAll:!0}))},TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry=function(logLevel,payload){var _payload$Event10;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event10=null==payload?void 0:payload.Event)&&void 0!==_payload$Event10?_payload$Event10:TelemetryEvent.FacadeChatSDKEvent,logLevel,Object.assign({},payload,{LogToAll:!0}))},TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry=function(logLevel,payload){var _payload$Event11,_TelemetryManager$Int30;TelemetryHelper_TelemetryHelper.postTelemetryEvent(null!==(_payload$Event11=null==payload?void 0:payload.Event)&&void 0!==_payload$Event11?_payload$Event11:"",logLevel,Object.assign({},Object.assign({},payload,{TransactionId:utils_newGuid(),RequestId:null===(_TelemetryManager$Int30=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int30?void 0:_TelemetryManager$Int30.currentRequestId}),{LogToAll:!0}))};function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function utils_regeneratorRuntime(){utils_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getElementBySelector=function getElementBySelector(selector){return"string"==typeof selector?document.querySelector(selector):selector},setTabIndices=function setTabIndices(elements,tabIndexMap,shouldBeFocusable){if(elements)if(shouldBeFocusable){for(var index=0;index<elements.length;index++)tabIndexMap.has(elements[index].id)&&(elements[index].tabIndex=tabIndexMap.get(elements[index].id));tabIndexMap.clear()}else for(var _index2=0;_index2<elements.length;_index2++)tabIndexMap.set(elements[_index2].id,elements[_index2].tabIndex),elements[_index2].tabIndex=-1},findParentFocusableElementsWithoutChildContainer=function findParentFocusableElementsWithoutChildContainer(elementId){var childContainer=document.getElementById(elementId);if(!childContainer)return null;var parentContainer=childContainer.parentElement;if(!parentContainer)return null;var parentFocusableElements=findAllFocusableElement(parentContainer);if(!parentFocusableElements)return null;for(var index=0;index<parentFocusableElements.length;index++)childContainer.contains(parentFocusableElements[index])&&(parentFocusableElements.splice(index,1),index--);return parentFocusableElements},findAllFocusableElement=function findAllFocusableElement(parent){var container=getElementBySelector(parent);return null!==container?Array.prototype.slice.call(container.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')):null},utils_preventFocusToMoveOutOfElement=function preventFocusToMoveOutOfElement(elementId){var container=document.getElementById(elementId);if(container){var focusableElements=findAllFocusableElement(container);if(focusableElements){var firstFocusableElement=focusableElements[0],lastFocusableElement=focusableElements[focusableElements.length-1];firstFocusableElement.onkeydown=function(e){e.shiftKey&&e.key===KeyCodes.TAB&&(e.preventDefault(),null==lastFocusableElement||lastFocusableElement.focus())},lastFocusableElement.onkeydown=function(e){e.shiftKey||e.key!==KeyCodes.TAB||(e.preventDefault(),null==firstFocusableElement||firstFocusableElement.focus())}}}},setFocusOnSendBox=function setFocusOnSendBox(){setFocusOnElement('textarea[data-id="webchat-sendbox-input"]')},setFocusOnElement=function setFocusOnElement(selector){var element=getElementBySelector(selector);null==element||element.focus()},getIconText=function getIconText(text){if(text){var initials=text.split(/\s/).reduce((function(response,word){return response+word.slice(0,1)}),"");return initials.length>1?initials.substring(0,2).toUpperCase():text.substring(0,2).toUpperCase()}return""},changeLanguageCodeFormatForWebChat=function changeLanguageCodeFormatForWebChat(languageCode){return languageCode.slice(0,-2)+languageCode.slice(-2).toUpperCase()},getTimestampHourMinute=function getTimestampHourMinute(timestampStr){var yearFormat,monthDayFormat,date=new Date(timestampStr),now=new Date;return isNaN(date.getTime())?"":(date.getFullYear()!==now.getFullYear()&&(yearFormat="numeric",monthDayFormat="2-digit"),date.getMonth()===now.getMonth()&&date.getDate()===now.getDate()||(monthDayFormat="2-digit"),date.toLocaleTimeString(navigator.language,{year:yearFormat,month:monthDayFormat,day:monthDayFormat,hour:"numeric",minute:"2-digit"}))},utils_extractPreChatSurveyResponseValues=function extractPreChatSurveyResponseValues(preChatSurvey,values){if(preChatSurvey&&"{}"!==preChatSurvey&&values)try{var _step2,body=JSON.parse(preChatSurvey).body,type={Type:Constants.e.InputSubmit},computedValues=[],_iterator2=_createForOfIteratorHelper(values);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var val=_step2.value;computedValues[body[val.index].id]=val.value}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return Object.assign({},type,computedValues)}catch(ex){throw new Error("PreChatSurvey Response parse error: "+ex)}return{}},isNullOrUndefined=function isNullOrUndefined(obj){return null==obj},isNullOrEmptyString=function isNullOrEmptyString(s){return isNullOrUndefined(s)||""===s},utils_newGuid=function newGuid(){for(var guidPattern=Constants.e.GuidPattern,newGuid="",i=0;i<guidPattern.length;i++){var randomString=Math.floor(Math.random()*Date.now());switch(guidPattern[i]){case"x":newGuid+=randomString.toString(16).substring(0,4);break;case"m":newGuid+=randomString.toString(16).substring(0,3);break;case"y":newGuid+=(3&randomString|8).toString(16);break;default:newGuid+=guidPattern[i]}}return newGuid},createTimer=function createTimer(){var timeStart=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-timeStart}}},utils_getDomain=function getDomain(hostValue){for(var i=0;i<Constants.c.lcwEUDomainNames.length;i++)if(hostValue.endsWith(Constants.c.lcwEUDomainNames[i]))return Constants.c.EU;return Constants.c.Public},utils_getWidgetCacheId=function getWidgetCacheId(orgId,widgetId,widgetInstanceId){arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&(widgetInstanceId+=Constants.e.PopoutCacheSuffix);var widgetCacheId=widgetInstanceId+"_"+orgId+"_"+widgetId;return dist.a.init(widgetCacheId)},utils_getWidgetEndChatEventName=function getWidgetEndChatEventName(orgId,widgetId,widgetInstanceId){return isNullOrEmptyString(widgetInstanceId)?BroadcastEvent.ChatEnded+"_"+orgId+"_"+widgetId:BroadcastEvent.ChatEnded+"_"+widgetInstanceId+"_"+orgId+"_"+widgetId},utils_getStateFromCache=function getStateFromCache(widgetCacheId){try{if(DataStoreManager.clientDataStore){var _DataStoreManager$cli,widgetStateEventName=widgetCacheId,widgetStateFromCache=null===(_DataStoreManager$cli=DataStoreManager.clientDataStore)||void 0===_DataStoreManager$cli?void 0:_DataStoreManager$cli.getData(widgetStateEventName);return widgetStateFromCache?JSON.parse(widgetStateFromCache):void 0}return null}catch(error){return console.log(error),null}},isUndefinedOrEmpty=function isUndefinedOrEmpty(object){return!object||0===Object.keys(object).length},addDelayInMs=function addDelayInMs(ms){return new Promise((function(resolve){return setTimeout(resolve,ms)}))},utils_getWidgetCacheIdfromProps=function getWidgetCacheIdfromProps(props){var _props$chatSDK,_props$chatSDK$omnich,_props$chatSDK2,_props$chatSDK2$omnic,_props$controlProps$w,_props$controlProps,_props$controlProps2,popoutChat=arguments.length>1&&void 0!==arguments[1]&&arguments[1],orgId=null==props||null===(_props$chatSDK=props.chatSDK)||void 0===_props$chatSDK||null===(_props$chatSDK$omnich=_props$chatSDK.omnichannelConfig)||void 0===_props$chatSDK$omnich?void 0:_props$chatSDK$omnich.orgId,widgetId=null==props||null===(_props$chatSDK2=props.chatSDK)||void 0===_props$chatSDK2||null===(_props$chatSDK2$omnic=_props$chatSDK2.omnichannelConfig)||void 0===_props$chatSDK2$omnic?void 0:_props$chatSDK2$omnic.widgetId,widgetInstanceId=null!==(_props$controlProps$w=null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:"";return props.useSessionStorage&&(widgetInstanceId+=Constants.e.SessionCacheSuffix),(null!=props&&null!==(_props$controlProps2=props.controlProps)&&void 0!==_props$controlProps2&&_props$controlProps2.hideStartChatButton||!0===popoutChat)&&(popoutChat=!0),utils_getWidgetCacheId(orgId,widgetId,widgetInstanceId,popoutChat)},isThisSessionPopout=function isThisSessionPopout(href){var _window,_window$location,_window$location$href;return!(null==href||!href.includes("open-in-window=true")||null!==(_window=window)&&void 0!==_window&&null!==(_window$location=_window.location)&&void 0!==_window$location&&null!==(_window$location$href=_window$location.href)&&void 0!==_window$location$href&&_window$location$href.includes("is-popout-mode=true"))},getConversationDetailsCall=function(){var _ref=function utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(utils_regeneratorRuntime().mark((function _callee(facadeChatSDK){var liveChatContext,conversationDetails,optionalParams,_args=arguments;return utils_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return conversationDetails=void 0,optionalParams={},null!=(liveChatContext=_args.length>1&&void 0!==_args[1]?_args[1]:null)&&liveChatContext.requestId&&null!=liveChatContext&&liveChatContext.chatToken&&(optionalParams.liveChatContext=liveChatContext),_context.prev=4,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.GetConversationDetailsCallStarted,Description:"Conversation details call started"}),_context.next=8,facadeChatSDK.getConversationDetails(optionalParams);case 8:conversationDetails=_context.sent,_context.next=15;break;case 11:_context.prev=11,_context.t0=_context.catch(4),utils_checkContactIdError(_context.t0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetConversationDetailsCallFailed,ExceptionDetails:{exception:"Get Conversation Details Call Failed : "+_context.t0}});case 15:return _context.abrupt("return",conversationDetails);case 16:case"end":return _context.stop()}}),_callee,null,[[4,11]])})));return function getConversationDetailsCall(_x){return _ref.apply(this,arguments)}}(),utils_checkContactIdError=function checkContactIdError(e){if(TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.CheckContactIdError}),(null==e?void 0:e.message)===lib.ChatSDKErrorName.AuthContactIdNotFoundFailure){var contactIdNotFoundErrorEvent={eventName:BroadcastEvent.ContactIdNotFound,payload:{error:e}};cjs.BroadcastService.postMessage(contactIdNotFoundErrorEvent)}},utils_createFileAndDownload=function createFileAndDownload(fileName,blobData,mimeType){var aElement=document.createElement("a"),blob=new Blob([blobData],{type:mimeType}),objectUrl=URL.createObjectURL(blob);aElement.setAttribute(Constants.j.href,objectUrl),aElement.setAttribute(Constants.j.download,fileName),aElement.setAttribute(Constants.j.ariaHidden,"true"),aElement.style.display="none",document.body.appendChild(aElement),aElement.click(),document.body.removeChild(aElement)},formatTemplateString=function formatTemplateString(templateMessage,values){return templateMessage.replace(/{(\d+)}/g,(function(match,index){return void 0!==values[index]?values[index]:match}))};var ConversationState;function parseBooleanFromConfig(value){return!0===value||"true"===(null==value?void 0:value.toString().toLowerCase())}!function(ConversationState){ConversationState[ConversationState.Prechat=0]="Prechat",ConversationState[ConversationState.Loading=1]="Loading",ConversationState[ConversationState.ReconnectChat=2]="ReconnectChat",ConversationState[ConversationState.OutOfOffice=3]="OutOfOffice",ConversationState[ConversationState.ProactiveChat=4]="ProactiveChat",ConversationState[ConversationState.Active=5]="Active",ConversationState[ConversationState.InActive=6]="InActive",ConversationState[ConversationState.PostchatLoading=7]="PostchatLoading",ConversationState[ConversationState.Postchat=8]="Postchat",ConversationState[ConversationState.Closed=9]="Closed",ConversationState[ConversationState.Error=10]="Error"}(ConversationState||(ConversationState={}));var react=__webpack_require__("./node_modules/react/index.js"),react_default=__webpack_require__.n(react),ChatContextStore=Object(react.createContext)(void 0),hooks_useChatContextStore=function useChatContextStore(){var context=Object(react.useContext)(ChatContextStore);if(!context)throw new Error("This hook can only be used on component that is descendants of <ChatContextStore.Provider>");return context},ChatSDKStore=Object(react.createContext)(void 0),FacadeChatSDKStore=Object(react.createContext)([void 0,function(facadeChatSDK){}]),hooks_useFacadeChatSDKStore=function useFacadeChatSDKStore(){var facadeChatSDK=Object(react.useContext)(FacadeChatSDKStore);if(!facadeChatSDK)throw new Error("This hook is not called on component that is descendants of <FacadeSDKStore.Provider>, or FacadeSDKStore is not passed into LiveChatWidget component.");return facadeChatSDK},ChatAdapterStore=Object(react.createContext)([void 0,function(adapter){}]);__webpack_require__("./node_modules/core-js/modules/es.string.pad-end.js");function authHelper_regeneratorRuntime(){authHelper_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function authHelper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){authHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var getAuthClientFunction=function getAuthClientFunction(chatConfig){var _msdyn_javascriptclie,_chatConfig$LiveChatC,authClientFunction=void 0;null!=chatConfig&&chatConfig.LiveChatConfigAuthSettings&&(authClientFunction=null!==(_msdyn_javascriptclie=null==chatConfig||null===(_chatConfig$LiveChatC=chatConfig.LiveChatConfigAuthSettings)||void 0===_chatConfig$LiveChatC?void 0:_chatConfig$LiveChatC.msdyn_javascriptclientfunction)&&void 0!==_msdyn_javascriptclie?_msdyn_javascriptclie:void 0);return authClientFunction},handleAuthentication=function(){var _ref=authHelper_asyncToGenerator(authHelper_regeneratorRuntime().mark((function _callee2(chatSDK,chatConfig,getAuthToken){var _chatSDK$chatSDKConfi,authClientFunction,token,_chatSDK$chatSDKConfi2,_token;return authHelper_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(authClientFunction=getAuthClientFunction(chatConfig),!getAuthToken||!authClientFunction){_context2.next=15;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.GetAuthTokenCalled}),_context2.next=5,getAuthToken(authClientFunction);case 5:if(token=_context2.sent,isNullOrEmptyString(token)){_context2.next=11;break}return chatSDK.setAuthTokenProvider(authHelper_asyncToGenerator(authHelper_regeneratorRuntime().mark((function _callee(){return authHelper_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",token);case 1:case"end":return _context.stop()}}),_callee)})))),_context2.abrupt("return",{result:!0,token:token});case 11:throw TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ReceivedNullOrEmptyToken}),new Error(Constants.z.AuthenticationFailedErrorString);case 13:_context2.next=23;break;case 15:if(null==chatSDK||null===(_chatSDK$chatSDKConfi=chatSDK.chatSDKConfig)||void 0===_chatSDK$chatSDKConfi||!_chatSDK$chatSDKConfi.getAuthToken){_context2.next=23;break}return _context2.next=18,null===(_chatSDK$chatSDKConfi2=chatSDK.chatSDKConfig)||void 0===_chatSDK$chatSDKConfi2?void 0:_chatSDK$chatSDKConfi2.getAuthToken();case 18:if(_token=_context2.sent,!isNullOrEmptyString(_token)){_context2.next=22;break}throw TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ReceivedNullOrEmptyToken,Description:"getAuthToken in chat SDK returns empty string"}),new Error(Constants.z.AuthenticationFailedErrorString);case 22:return _context2.abrupt("return",{result:!0,token:_token});case 23:return _context2.abrupt("return",{result:!1,token:null,error:{message:"No auth client function or getAuthToken function provided",getAuthTokenPresent:!!getAuthToken,authClientFunctionPresent:!!authClientFunction}});case 24:case"end":return _context2.stop()}}),_callee2)})));return function handleAuthentication(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),removeAuthTokenProvider=function removeAuthTokenProvider(chatSDK){chatSDK.authenticatedUserToken=null};function FacadeChatSDK_regeneratorRuntime(){FacadeChatSDK_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function FacadeChatSDK_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function FacadeChatSDK_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){FacadeChatSDK_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){FacadeChatSDK_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function FacadeChatSDK_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function FacadeChatSDK_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var LiveChatWidgetActionType,PostChatSurveyMode,FacadeChatSDK_FacadeChatSDK=function(){function FacadeChatSDK(input,disableReauthentication){!function FacadeChatSDK_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FacadeChatSDK),this.chatSDK=void 0,this.chatConfig=void 0,this.token="",this.expiration=0,this.isAuthenticated=void 0,this.getAuthToken=void 0,this.sdkMocked=void 0,this.disableReauthentication=void 0,this.chatSDK=input.chatSDK,this.chatConfig=input.chatConfig,this.getAuthToken=input.getAuthToken,this.isAuthenticated=input.isAuthenticated,this.sdkMocked=input.isSDKMocked,this.disableReauthentication=disableReauthentication}var _fetchPersistentConversationHistory,_getReconnectableChats,_getAgentAvailability,_getPostChatSurveyContext,_getVoiceVideoCalling,_isVoiceVideoCallingEnabled,_createChatAdapter,_getLiveChatTranscript,_emailLiveChatTranscript,_downloadFileAttachment,_uploadFileAttachment,_onAgentEndSession,_onTypingEvent,_sendTypingEvent,_onNewMessage,_sendMessage,_getDataMaskingRules,_getMessages,_getCallingToken,_getChatToken,_getLiveChatConfig,_getPreChatSurvey,_getConversationDetails,_getCurrentLiveChatContext,_endChat,_startChat,_getChatReconnectContext,_initialize,_validateAndExecuteCall,_tokenRing,_corroborateTokenIsSet,_setToken;return function FacadeChatSDK_createClass(Constructor,protoProps,staticProps){return protoProps&&FacadeChatSDK_defineProperties(Constructor.prototype,protoProps),staticProps&&FacadeChatSDK_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(FacadeChatSDK,[{key:"isSDKMocked",value:function isSDKMocked(){return this.sdkMocked}},{key:"getChatSDK",value:function getChatSDK(){return this.chatSDK}},{key:"destroy",value:function destroy(){this.token=null,this.expiration=0}},{key:"isTokenSet",value:function isTokenSet(){return!isNullOrEmptyString(this.token)}},{key:"convertExpiration",value:function convertExpiration(){var expiration=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 13===expiration.toString().length?Math.floor(expiration/1e3):expiration}},{key:"isTokenExpired",value:function isTokenExpired(){if(0===this.expiration)return!1;var now=Math.floor(Date.now()/1e3);return now>this.expiration&&(console.error("Token is expired",now,this.expiration,now>this.expiration),!0)}},{key:"enforceBase64Encoding",value:function enforceBase64Encoding(payload){var base64Payload=payload.replace(/-/g,"+").replace(/_/g,"/");return base64Payload.padEnd(base64Payload.length+(4-base64Payload.length%4)%4,"=")}},{key:"extractExpFromToken",value:function extractExpFromToken(token){var tokenParts=token.split("."),last3digits=token.slice(-3);if(3!==tokenParts.length)throw TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"Invalid token format",ExceptionDetails:{message:"Invalid token format, must be in JWT format",token:last3digits}}),new Error("Authentication Setup Error: Invalid token format, must be in JWT format");try{var payload=this.enforceBase64Encoding(tokenParts[1]),decodedPayload=atob(payload),jsonPayload=JSON.parse(decodedPayload);if(jsonPayload)return jsonPayload.exp?jsonPayload.exp:0;throw TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"Invalid token payload",ExceptionDetails:{message:"Token payload is not valid JSON",token:last3digits}}),new Error("Authentication Setup Error: Invalid token payload, payload is not valid JSON")}catch(e){throw console.error("Authentication Setup Error: Failed to decode token",e),TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"Failed to decode token",ExceptionDetails:{message:"Failed to decode token",token:last3digits}}),new Error("Authentication Setup Error: Failed to decode authentication token")}}},{key:"setToken",value:(_setToken=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee(token){var last3digits,instant;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(isNullOrEmptyString(token)||token===this.token){_context.next=8;break}if(last3digits=token.slice(-3),instant=Math.floor(Date.now()/1e3),this.token=token,this.expiration=this.convertExpiration(this.extractExpFromToken(token)||0),!(this.expiration>0&&this.expiration<instant)){_context.next=8;break}throw TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"New token is already expired",ExceptionDetails:{Instant:instant,Expiration:this.expiration,Token:last3digits}}),new Error("Authentication Setup Error: New authentication token is already expired");case 8:case"end":return _context.stop()}}),_callee,this)}))),function setToken(_x){return _setToken.apply(this,arguments)})},{key:"corroborateTokenIsSet",value:(_corroborateTokenIsSet=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee2(chatSDK){var _chatSDK$chatSDKConfi;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:this.isAuthenticated&&void 0===(null==chatSDK||null===(_chatSDK$chatSDKConfi=chatSDK.chatSDKConfig)||void 0===_chatSDK$chatSDKConfi?void 0:_chatSDK$chatSDKConfi.getAuthToken)&&handleAuthentication(this.chatSDK,this.chatConfig,this.getAuthToken);case 1:case"end":return _context2.stop()}}),_callee2,this)}))),function corroborateTokenIsSet(_x2){return _corroborateTokenIsSet.apply(this,arguments)})},{key:"tokenRing",value:(_tokenRing=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee3(){var _this$chatSDK$chatSDK,ring,_ring$error,_ring$error2;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!0!==this.disableReauthentication){_context3.next=4;break}return _context3.next=3,this.corroborateTokenIsSet(this.chatSDK);case 3:return _context3.abrupt("return",{result:!0,message:"Facade is disabled"});case 4:if(!0!==this.sdkMocked){_context3.next=6;break}return _context3.abrupt("return",{result:!0,message:"Authentication not needed"});case 6:if(this.isAuthenticated){_context3.next=8;break}return _context3.abrupt("return",{result:!0,message:"Authentication not needed"});case 8:if(!this.isTokenSet()||this.isTokenExpired()){_context3.next=10;break}return _context3.abrupt("return",{result:!0,message:"Token is valid"});case 10:if(TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.NewTokenValidationStarted,Description:"Token validation started."}),void 0!==this.getAuthToken||void 0!==(null===(_this$chatSDK$chatSDK=this.chatSDK.chatSDKConfig)||void 0===_this$chatSDK$chatSDK?void 0:_this$chatSDK$chatSDK.getAuthToken)){_context3.next=14;break}return TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"GetAuthToken function is not present",ExceptionDetails:"Missing function : "+getAuthClientFunction(this.chatConfig)}),_context3.abrupt("return",{result:!1,message:"GetAuthToken function is not present"});case 14:return this.token="",this.expiration=0,_context3.prev=16,_context3.next=19,handleAuthentication(this.chatSDK,this.chatConfig,this.getAuthToken);case 19:if(!0!==(null==(ring=_context3.sent)?void 0:ring.result)||null==ring||!ring.token){_context3.next=27;break}return _context3.next=23,this.setToken(ring.token);case 23:return TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.NewTokenValidationCompleted,Description:"New Token obtained",Data:{Token_Expiration:this.expiration}}),_context3.abrupt("return",{result:!0,message:"New Token obtained"});case 27:return TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:null===(_ring$error=ring.error)||void 0===_ring$error?void 0:_ring$error.message,ExceptionDetails:null==ring?void 0:ring.error}),_context3.abrupt("return",{result:!1,message:(null==ring||null===(_ring$error2=ring.error)||void 0===_ring$error2?void 0:_ring$error2.message)||"Failed to get token"});case 29:_context3.next=36;break;case 31:return _context3.prev=31,_context3.t0=_context3.catch(16),console.error("Unexpected error while getting token",_context3.t0),TelemetryHelper_TelemetryHelper.logFacadeChatSDKEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.NewTokenValidationFailed,Description:"Unexpected error while getting token",ExceptionDetails:_context3.t0}),_context3.abrupt("return",{result:!1,message:"Unexpected error while getting token"});case 36:case"end":return _context3.stop()}}),_callee3,this,[[16,31]])}))),function tokenRing(){return _tokenRing.apply(this,arguments)})},{key:"validateAndExecuteCall",value:(_validateAndExecuteCall=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee4(functionName,fn){var pingResponse,executionErrorMessage;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.tokenRing();case 2:if(!0!==(pingResponse=_context4.sent).result){_context4.next=5;break}return _context4.abrupt("return",fn());case 5:throw executionErrorMessage="Authentication Setup Error: Token validation failed - GetAuthToken function is not present",console.error(executionErrorMessage+" Additional details: Process to get a token failed for "+functionName+", "+pingResponse.message),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:executionErrorMessage}}),new Error(executionErrorMessage);case 9:case"end":return _context4.stop()}}),_callee4,this)}))),function validateAndExecuteCall(_x3,_x4){return _validateAndExecuteCall.apply(this,arguments)})},{key:"initialize",value:(_initialize=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee5(){var optionalParams,_this=this,_args5=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return optionalParams=_args5.length>0&&void 0!==_args5[0]?_args5[0]:{},_context5.abrupt("return",this.validateAndExecuteCall("initialize",(function(){return _this.chatSDK.initialize(optionalParams)})));case 2:case"end":return _context5.stop()}}),_callee5,this)}))),function initialize(){return _initialize.apply(this,arguments)})},{key:"getChatReconnectContext",value:(_getChatReconnectContext=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee6(){var optionalParams,_this2=this,_args6=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return optionalParams=_args6.length>0&&void 0!==_args6[0]?_args6[0]:{},_context6.abrupt("return",this.validateAndExecuteCall("getChatReconnectContext",(function(){return _this2.chatSDK.getChatReconnectContext(optionalParams)})));case 2:case"end":return _context6.stop()}}),_callee6,this)}))),function getChatReconnectContext(){return _getChatReconnectContext.apply(this,arguments)})},{key:"startChat",value:(_startChat=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee7(){var optionalParams,_this3=this,_args7=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return optionalParams=_args7.length>0&&void 0!==_args7[0]?_args7[0]:{},_context7.abrupt("return",this.validateAndExecuteCall("startChat",(function(){return _this3.chatSDK.startChat(optionalParams)})));case 2:case"end":return _context7.stop()}}),_callee7,this)}))),function startChat(){return _startChat.apply(this,arguments)})},{key:"endChat",value:(_endChat=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee8(){var optionalParams,_this4=this,_args8=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return optionalParams=_args8.length>0&&void 0!==_args8[0]?_args8[0]:{},_context8.abrupt("return",this.validateAndExecuteCall("endChat",(function(){return _this4.chatSDK.endChat(optionalParams)})));case 2:case"end":return _context8.stop()}}),_callee8,this)}))),function endChat(){return _endChat.apply(this,arguments)})},{key:"getCurrentLiveChatContext",value:(_getCurrentLiveChatContext=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee9(){var _this5=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.abrupt("return",this.validateAndExecuteCall("getCurrentLiveChatContext",(function(){return _this5.chatSDK.getCurrentLiveChatContext()})));case 1:case"end":return _context9.stop()}}),_callee9,this)}))),function getCurrentLiveChatContext(){return _getCurrentLiveChatContext.apply(this,arguments)})},{key:"getConversationDetails",value:(_getConversationDetails=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee10(){var optionalParams,_this6=this,_args10=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return optionalParams=_args10.length>0&&void 0!==_args10[0]?_args10[0]:{},_context10.abrupt("return",this.validateAndExecuteCall("getConversationDetails",(function(){return _this6.chatSDK.getConversationDetails(optionalParams)})));case 2:case"end":return _context10.stop()}}),_callee10,this)}))),function getConversationDetails(){return _getConversationDetails.apply(this,arguments)})},{key:"getPreChatSurvey",value:(_getPreChatSurvey=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee11(){var parse,_args11=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return parse=!(_args11.length>0&&void 0!==_args11[0])||_args11[0],_context11.abrupt("return",this.chatSDK.getPreChatSurvey(parse));case 2:case"end":return _context11.stop()}}),_callee11,this)}))),function getPreChatSurvey(){return _getPreChatSurvey.apply(this,arguments)})},{key:"getLiveChatConfig",value:(_getLiveChatConfig=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee12(optionalParams){var _this7=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.abrupt("return",this.validateAndExecuteCall("getLiveChatConfig",(function(){return _this7.chatSDK.getLiveChatConfig(optionalParams)})));case 1:case"end":return _context12.stop()}}),_callee12,this)}))),function getLiveChatConfig(_x5){return _getLiveChatConfig.apply(this,arguments)})},{key:"getChatToken",value:(_getChatToken=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee13(){var cached,optionalParams,_this8=this,_args13=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return cached=!(_args13.length>0&&void 0!==_args13[0])||_args13[0],optionalParams=_args13.length>1?_args13[1]:void 0,_context13.abrupt("return",this.validateAndExecuteCall("getChatToken",(function(){return _this8.chatSDK.getChatToken(cached,optionalParams)})));case 3:case"end":return _context13.stop()}}),_callee13,this)}))),function getChatToken(){return _getChatToken.apply(this,arguments)})},{key:"getCallingToken",value:(_getCallingToken=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee14(){var _this9=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.abrupt("return",this.validateAndExecuteCall("getCallingToken",(function(){return _this9.chatSDK.getCallingToken()})));case 1:case"end":return _context14.stop()}}),_callee14,this)}))),function getCallingToken(){return _getCallingToken.apply(this,arguments)})},{key:"getMessages",value:(_getMessages=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee15(){var _this10=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee15$(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.abrupt("return",this.validateAndExecuteCall("getMessages",(function(){return _this10.chatSDK.getMessages()})));case 1:case"end":return _context15.stop()}}),_callee15,this)}))),function getMessages(){return _getMessages.apply(this,arguments)})},{key:"getDataMaskingRules",value:(_getDataMaskingRules=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee16(){var _this11=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee16$(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.abrupt("return",this.validateAndExecuteCall("getDataMaskingRules",(function(){return _this11.chatSDK.getDataMaskingRules()})));case 1:case"end":return _context16.stop()}}),_callee16,this)}))),function getDataMaskingRules(){return _getDataMaskingRules.apply(this,arguments)})},{key:"sendMessage",value:(_sendMessage=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee17(message){var _this12=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee17$(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return _context17.abrupt("return",this.validateAndExecuteCall("sendMessage",(function(){return _this12.chatSDK.sendMessage(message)})));case 1:case"end":return _context17.stop()}}),_callee17,this)}))),function sendMessage(_x6){return _sendMessage.apply(this,arguments)})},{key:"onNewMessage",value:(_onNewMessage=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee18(onNewMessageCallback){var optionalParams,_this13=this,_args18=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee18$(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return optionalParams=_args18.length>1&&void 0!==_args18[1]?_args18[1]:{disablePolling:!1},_context18.abrupt("return",this.validateAndExecuteCall("onNewMessage",(function(){return _this13.chatSDK.onNewMessage(onNewMessageCallback,optionalParams)})));case 2:case"end":return _context18.stop()}}),_callee18,this)}))),function onNewMessage(_x7){return _onNewMessage.apply(this,arguments)})},{key:"sendTypingEvent",value:(_sendTypingEvent=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee19(){var _this14=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee19$(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:return _context19.abrupt("return",this.validateAndExecuteCall("sendTypingEvent",(function(){return _this14.chatSDK.sendTypingEvent()})));case 1:case"end":return _context19.stop()}}),_callee19,this)}))),function sendTypingEvent(){return _sendTypingEvent.apply(this,arguments)})},{key:"onTypingEvent",value:(_onTypingEvent=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee20(onTypingEventCallback){var _this15=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee20$(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:return _context20.abrupt("return",this.validateAndExecuteCall("onTypingEvent",(function(){return _this15.chatSDK.onTypingEvent(onTypingEventCallback)})));case 1:case"end":return _context20.stop()}}),_callee20,this)}))),function onTypingEvent(_x8){return _onTypingEvent.apply(this,arguments)})},{key:"onAgentEndSession",value:(_onAgentEndSession=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee21(onAgentEndSessionCallback){var _this16=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee21$(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:return _context21.abrupt("return",this.validateAndExecuteCall("onAgentEndSession",(function(){return _this16.chatSDK.onAgentEndSession(onAgentEndSessionCallback)})));case 1:case"end":return _context21.stop()}}),_callee21,this)}))),function onAgentEndSession(_x9){return _onAgentEndSession.apply(this,arguments)})},{key:"uploadFileAttachment",value:(_uploadFileAttachment=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee22(fileInfo){var _this17=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee22$(_context22){for(;;)switch(_context22.prev=_context22.next){case 0:return _context22.abrupt("return",this.validateAndExecuteCall("uploadFileAttachment",(function(){return _this17.chatSDK.uploadFileAttachment(fileInfo)})));case 1:case"end":return _context22.stop()}}),_callee22,this)}))),function uploadFileAttachment(_x10){return _uploadFileAttachment.apply(this,arguments)})},{key:"downloadFileAttachment",value:(_downloadFileAttachment=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee23(fileMetadata){var _this18=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee23$(_context23){for(;;)switch(_context23.prev=_context23.next){case 0:return _context23.abrupt("return",this.validateAndExecuteCall("downloadFileAttachment",(function(){return _this18.chatSDK.downloadFileAttachment(fileMetadata)})));case 1:case"end":return _context23.stop()}}),_callee23,this)}))),function downloadFileAttachment(_x11){return _downloadFileAttachment.apply(this,arguments)})},{key:"emailLiveChatTranscript",value:(_emailLiveChatTranscript=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee24(body){var optionalParams,_this19=this,_args24=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee24$(_context24){for(;;)switch(_context24.prev=_context24.next){case 0:return optionalParams=_args24.length>1&&void 0!==_args24[1]?_args24[1]:{},_context24.abrupt("return",this.validateAndExecuteCall("emailLiveChatTranscript",(function(){return _this19.chatSDK.emailLiveChatTranscript(body,optionalParams)})));case 2:case"end":return _context24.stop()}}),_callee24,this)}))),function emailLiveChatTranscript(_x12){return _emailLiveChatTranscript.apply(this,arguments)})},{key:"getLiveChatTranscript",value:(_getLiveChatTranscript=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee25(){var optionalParams,_this20=this,_args25=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee25$(_context25){for(;;)switch(_context25.prev=_context25.next){case 0:return optionalParams=_args25.length>0&&void 0!==_args25[0]?_args25[0]:{},_context25.abrupt("return",this.validateAndExecuteCall("getLiveChatTranscript",(function(){return _this20.chatSDK.getLiveChatTranscript(optionalParams)})));case 2:case"end":return _context25.stop()}}),_callee25,this)}))),function getLiveChatTranscript(){return _getLiveChatTranscript.apply(this,arguments)})},{key:"createChatAdapter",value:(_createChatAdapter=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee26(){var optionalParams,_this21=this,_args26=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee26$(_context26){for(;;)switch(_context26.prev=_context26.next){case 0:return optionalParams=_args26.length>0&&void 0!==_args26[0]?_args26[0]:{},_context26.abrupt("return",this.validateAndExecuteCall("createChatAdapter",(function(){return _this21.chatSDK.createChatAdapter(optionalParams)})));case 2:case"end":return _context26.stop()}}),_callee26,this)}))),function createChatAdapter(){return _createChatAdapter.apply(this,arguments)})},{key:"isVoiceVideoCallingEnabled",value:(_isVoiceVideoCallingEnabled=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee27(){return FacadeChatSDK_regeneratorRuntime().wrap((function _callee27$(_context27){for(;;)switch(_context27.prev=_context27.next){case 0:return this.tokenRing(),_context27.abrupt("return",this.chatSDK.isVoiceVideoCallingEnabled());case 2:case"end":return _context27.stop()}}),_callee27,this)}))),function isVoiceVideoCallingEnabled(){return _isVoiceVideoCallingEnabled.apply(this,arguments)})},{key:"getVoiceVideoCalling",value:(_getVoiceVideoCalling=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee28(){var params,_this22=this,_args28=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee28$(_context28){for(;;)switch(_context28.prev=_context28.next){case 0:return params=_args28.length>0&&void 0!==_args28[0]?_args28[0]:{},_context28.abrupt("return",this.validateAndExecuteCall("getVoiceVideoCalling",(function(){return _this22.chatSDK.getVoiceVideoCalling(params)})));case 2:case"end":return _context28.stop()}}),_callee28,this)}))),function getVoiceVideoCalling(){return _getVoiceVideoCalling.apply(this,arguments)})},{key:"getPostChatSurveyContext",value:(_getPostChatSurveyContext=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee29(){var _this23=this;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee29$(_context29){for(;;)switch(_context29.prev=_context29.next){case 0:return _context29.abrupt("return",this.validateAndExecuteCall("getPostChatSurveyContext",(function(){return _this23.chatSDK.getPostChatSurveyContext()})));case 1:case"end":return _context29.stop()}}),_callee29,this)}))),function getPostChatSurveyContext(){return _getPostChatSurveyContext.apply(this,arguments)})},{key:"getAgentAvailability",value:(_getAgentAvailability=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee30(){var optionalParams,_this24=this,_args30=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee30$(_context30){for(;;)switch(_context30.prev=_context30.next){case 0:return optionalParams=_args30.length>0&&void 0!==_args30[0]?_args30[0]:{},_context30.abrupt("return",this.validateAndExecuteCall("getAgentAvailability",(function(){return _this24.chatSDK.getAgentAvailability(optionalParams)})));case 2:case"end":return _context30.stop()}}),_callee30,this)}))),function getAgentAvailability(){return _getAgentAvailability.apply(this,arguments)})},{key:"getReconnectableChats",value:(_getReconnectableChats=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee31(){var reconnectableChatsParams,pingResponse,errorMessage,_this25=this,_args31=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee31$(_context31){for(;;)switch(_context31.prev=_context31.next){case 0:if(reconnectableChatsParams=_args31.length>0&&void 0!==_args31[0]?_args31[0]:{},null!==this.token&&""!==this.token){_context31.next=10;break}return _context31.next=4,this.tokenRing();case 4:if(!1!==(pingResponse=_context31.sent).result){_context31.next=10;break}throw errorMessage="Authentication Setup Error: Token validation failed for reconnectable chats",console.error("Authentication failed: Process to get a token failed for getReconnectableChats, "+pingResponse.message),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:errorMessage}}),new Error(errorMessage);case 10:return reconnectableChatsParams.authenticatedUserToken=this.token,_context31.abrupt("return",this.validateAndExecuteCall("getReconnectableChats",(function(){return _this25.chatSDK.OCClient.getReconnectableChats(reconnectableChatsParams)})));case 12:case"end":return _context31.stop()}}),_callee31,this)}))),function getReconnectableChats(){return _getReconnectableChats.apply(this,arguments)})},{key:"fetchPersistentConversationHistory",value:(_fetchPersistentConversationHistory=FacadeChatSDK_asyncToGenerator(FacadeChatSDK_regeneratorRuntime().mark((function _callee32(){var getPersistentChatHistoryOptionalParams,_this26=this,_args32=arguments;return FacadeChatSDK_regeneratorRuntime().wrap((function _callee32$(_context32){for(;;)switch(_context32.prev=_context32.next){case 0:return getPersistentChatHistoryOptionalParams=_args32.length>0&&void 0!==_args32[0]?_args32[0]:{},_context32.abrupt("return",this.validateAndExecuteCall("getPersistentChatHistory",(function(){return _this26.chatSDK.getPersistentChatHistory(getPersistentChatHistoryOptionalParams)})));case 2:case"end":return _context32.stop()}}),_callee32,this)}))),function fetchPersistentConversationHistory(){return _fetchPersistentConversationHistory.apply(this,arguments)})}]),FacadeChatSDK}(),botframework_webchat=__webpack_require__("./node_modules/botframework-webchat/dist/botframework-webchat.js"),Stack=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js");function liveChatConfigUtils_regeneratorRuntime(){liveChatConfigUtils_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function liveChatConfigUtils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function liveChatConfigUtils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){liveChatConfigUtils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){liveChatConfigUtils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}!function(LiveChatWidgetActionType){LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID=0]="SET_WIDGET_ELEMENT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS=1]="SET_RENDERING_MIDDLEWARE_PROPS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS=2]="SET_MIDDLEWARE_LOCALIZED_TEXTS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CITATIONS=3]="SET_CITATIONS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_GLOBAL_DIR=4]="SET_GLOBAL_DIR",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_MINIMIZED=5]="SET_MINIMIZED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_STATE=6]="SET_CONVERSATION_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID=7]="SET_PREVIOUS_FOCUSED_ELEMENT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_START_CHAT_FAILING=8]="SET_START_CHAT_FAILING",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE=9]="SET_START_CHAT_FAILURE_TYPE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS=10]="SET_OUTSIDE_OPERATING_HOURS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE=11]="SET_PRE_CHAT_SURVEY_RESPONSE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CUSTOM_CONTEXT=12]="SET_CUSTOM_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOW_CONFIRMATION=13]="SET_SHOW_CONFIRMATION",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE=14]="SET_SHOW_EMAIL_TRANSCRIPT_PANE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL=15]="SET_PRECHAT_RESPONSE_EMAIL",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION=16]="SET_AUDIO_NOTIFICATION",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_E2VV_ENABLED=17]="SET_E2VV_ENABLED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT=18]="SET_POST_CHAT_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SHOW_CALLING_CONTAINER=19]="SHOW_CALLING_CONTAINER",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_INCOMING_CALL=20]="SET_INCOMING_CALL",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_VIDEO_CALL=21]="DISABLE_VIDEO_CALL",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO=22]="DISABLE_LOCAL_VIDEO",LiveChatWidgetActionType[LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO=23]="DISABLE_REMOTE_VIDEO",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CHAT_TOKEN=24]="SET_CHAT_TOKEN",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY=25]="SET_START_CHAT_BUTTON_DISPLAY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS=26]="SET_PROACTIVE_CHAT_PARAMS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_TELEMETRY_DATA=27]="SET_TELEMETRY_DATA",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_RECONNECT_ID=28]="SET_RECONNECT_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT=29]="SET_UNREAD_MESSAGE_COUNT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON=30]="SET_FOCUS_CHAT_BUTTON",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED=31]="SET_CONVERSATION_ENDED_BY_AGENT_EVENT_RECEIVED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY=32]="SET_CONVERSATION_ENDED_BY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_STATE=33]="SET_WIDGET_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT=34]="SET_LIVE_CHAT_CONTEXT",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_BOT_OAUTH_SIGNIN_ID=35]="SET_BOT_OAUTH_SIGNIN_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_SIZE=36]="SET_WIDGET_SIZE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID=37]="SET_WIDGET_INSTANCE_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG=38]="SET_LIVE_CHAT_CONFIG",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_POST_CHAT_WORKFLOW_IN_PROGRESS=39]="SET_POST_CHAT_WORKFLOW_IN_PROGRESS",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID=40]="SET_INITIAL_CHAT_SDK_REQUEST_ID",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SHOULD_USE_BOT_SURVEY=41]="SET_SHOULD_USE_BOT_SURVEY",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED=42]="SET_CHAT_DISCONNECT_EVENT_RECEIVED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_SURVEY_MODE=43]="SET_SURVEY_MODE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONFIRMATION_STATE=44]="SET_CONFIRMATION_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_POST_CHAT_PARTICIPANT_TYPE=45]="SET_POST_CHAT_PARTICIPANT_TYPE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_ENABLED=46]="SET_CONVERSATIONAL_SURVEY_ENABLED",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_DISPLAY=47]="SET_CONVERSATIONAL_SURVEY_DISPLAY",LiveChatWidgetActionType[LiveChatWidgetActionType.GET_IN_MEMORY_STATE=48]="GET_IN_MEMORY_STATE",LiveChatWidgetActionType[LiveChatWidgetActionType.SET_BOT_AVATAR_INITIALS=49]="SET_BOT_AVATAR_INITIALS"}(LiveChatWidgetActionType||(LiveChatWidgetActionType={})),function(PostChatSurveyMode){PostChatSurveyMode.Embed="192350000",PostChatSurveyMode.Link="192350001"}(PostChatSurveyMode||(PostChatSurveyMode={}));var inMemory,getPostChatSurveyConfig=function(){var _ref2=liveChatConfigUtils_asyncToGenerator(liveChatConfigUtils_regeneratorRuntime().mark((function _callee2(facadeChatSDK){var _chatConfig$LiveWSAnd2,_chatConfig$LiveWSAnd3,_chatConfig$LiveWSAnd4,_chatConfig$LiveWSAnd5,_chatConfig$LiveWSAnd6,_chatConfig$LiveWSAnd7,_chatConfig$LiveWSAnd8,_chatConfig$LiveWSAnd9,_chatConfig$LiveWSAnd10,chatConfig,postChatEnabled,agentSurveyMode,botSurveyMode,surveyProvider,isConversationalSurveyEnabled;return liveChatConfigUtils_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,facadeChatSDK.getLiveChatConfig();case 2:return chatConfig=_context2.sent,postChatEnabled=null===(_chatConfig$LiveWSAnd2=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd2?void 0:_chatConfig$LiveWSAnd2.msdyn_postconversationsurveyenable.toString().toLowerCase(),agentSurveyMode=null===(_chatConfig$LiveWSAnd3=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd3||null===(_chatConfig$LiveWSAnd4=_chatConfig$LiveWSAnd3.msdyn_postconversationsurveymode)||void 0===_chatConfig$LiveWSAnd4?void 0:_chatConfig$LiveWSAnd4.toString(),botSurveyMode=null===(_chatConfig$LiveWSAnd5=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd5||null===(_chatConfig$LiveWSAnd6=_chatConfig$LiveWSAnd5.msdyn_postconversationsurveybotsurveymode)||void 0===_chatConfig$LiveWSAnd6?void 0:_chatConfig$LiveWSAnd6.toString(),surveyProvider=null===(_chatConfig$LiveWSAnd7=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd7||null===(_chatConfig$LiveWSAnd8=_chatConfig$LiveWSAnd7.msdyn_surveyprovider)||void 0===_chatConfig$LiveWSAnd8?void 0:_chatConfig$LiveWSAnd8.toString(),isConversationalSurveyEnabled=null===(_chatConfig$LiveWSAnd9=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd9||null===(_chatConfig$LiveWSAnd10=_chatConfig$LiveWSAnd9.msdyn_isConversationalPostChatSurveyEnabled)||void 0===_chatConfig$LiveWSAnd10?void 0:_chatConfig$LiveWSAnd10.toString().toLowerCase(),_context2.abrupt("return",{postChatEnabled:"true"===postChatEnabled,agentSurveyMode:agentSurveyMode,botSurveyMode:botSurveyMode,surveyProvider:surveyProvider,isConversationalSurveyEnabled:"true"===isConversationalSurveyEnabled});case 9:case"end":return _context2.stop()}}),_callee2)})));return function getPostChatSurveyConfig(_x2){return _ref2.apply(this,arguments)}}(),liveChatConfigUtils_isPersistentChatEnabled=function isPersistentChatEnabled(conversationMode){return!isNullOrUndefined(conversationMode)&&(null==conversationMode?void 0:conversationMode.toString())===Constants.g.Persistent},executeReducer=function executeReducer(state,action){return createReducer_reducer(state,action)},createReducer_reducer=function reducer(state,action){var _action$payload,_action$payload2,_action$payload3,_action$payload4,_action$payload5,_action$payload6;switch(inMemory||(inMemory=state),action.type){case LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{widgetElementId:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetElementId:action.payload})});case LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{renderingMiddlewareProps:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{renderingMiddlewareProps:action.payload})});case LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{middlewareLocalizedTexts:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{middlewareLocalizedTexts:action.payload})});case LiveChatWidgetActionType.SET_CITATIONS:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{citations:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{citations:action.payload})});case LiveChatWidgetActionType.SET_GLOBAL_DIR:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{globalDir:"ltr"===action.payload||"rtl"===action.payload?action.payload:"ltr"})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{globalDir:"ltr"===action.payload||"rtl"===action.payload?action.payload:"ltr"})});case LiveChatWidgetActionType.SET_MINIMIZED:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{isMinimized:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{isMinimized:action.payload})});case LiveChatWidgetActionType.SET_CONVERSATION_STATE:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{conversationState:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{conversationState:action.payload})});case LiveChatWidgetActionType.SET_START_CHAT_FAILING:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{startChatFailed:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{startChatFailed:action.payload})});case LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{startChatFailureType:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{startChatFailureType:action.payload})});case LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{outsideOperatingHours:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{outsideOperatingHours:action.payload})});case LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{preChatSurveyResponse:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{preChatSurveyResponse:action.payload})});case LiveChatWidgetActionType.SET_CUSTOM_CONTEXT:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{customContext:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{customContext:action.payload})});case LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{previousElementIdOnFocusBeforeModalOpen:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{previousElementIdOnFocusBeforeModalOpen:action.payload})});case LiveChatWidgetActionType.SET_SHOW_CONFIRMATION:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{showConfirmationPane:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showConfirmationPane:action.payload})});case LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{postChatContext:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{postChatContext:action.payload})});case LiveChatWidgetActionType.SHOW_CALLING_CONTAINER:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{showCallingPopup:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showCallingPopup:action.payload})});case LiveChatWidgetActionType.SET_INCOMING_CALL:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{isIncomingCall:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{isIncomingCall:action.payload})});case LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{focusChatButton:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{focusChatButton:action.payload})});case LiveChatWidgetActionType.DISABLE_VIDEO_CALL:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{disableVideoCall:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableVideoCall:action.payload})});case LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{disableSelfVideo:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableSelfVideo:action.payload})});case LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{disableRemoteVideo:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{disableRemoteVideo:action.payload})});case LiveChatWidgetActionType.SET_CHAT_TOKEN:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{chatToken:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{chatToken:action.payload})});case LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE:return inMemory=Object.assign({},inMemory,{uiStates:Object.assign({},inMemory.uiStates,{showEmailTranscriptPane:action.payload})}),Object.assign({},state,{uiStates:Object.assign({},state.uiStates,{showEmailTranscriptPane:action.payload})});case LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{preChatResponseEmail:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{preChatResponseEmail:action.payload})});case LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{isAudioMuted:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{isAudioMuted:action.payload})});case LiveChatWidgetActionType.SET_E2VV_ENABLED:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{e2vvEnabled:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{e2vvEnabled:action.payload})});case LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{hideStartChatButton:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{hideStartChatButton:action.payload})});case LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{proactiveChatStates:Object.assign({},state.appStates.proactiveChatStates,{proactiveChatBodyTitle:null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.proactiveChatBodyTitle,proactiveChatEnablePrechat:null===(_action$payload2=action.payload)||void 0===_action$payload2?void 0:_action$payload2.proactiveChatEnablePrechat,proactiveChatInNewWindow:null===(_action$payload3=action.payload)||void 0===_action$payload3?void 0:_action$payload3.proactiveChatInNewWindow})})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{proactiveChatStates:Object.assign({},state.appStates.proactiveChatStates,{proactiveChatBodyTitle:null===(_action$payload4=action.payload)||void 0===_action$payload4?void 0:_action$payload4.proactiveChatBodyTitle,proactiveChatEnablePrechat:null===(_action$payload5=action.payload)||void 0===_action$payload5?void 0:_action$payload5.proactiveChatEnablePrechat,proactiveChatInNewWindow:null===(_action$payload6=action.payload)||void 0===_action$payload6?void 0:_action$payload6.proactiveChatInNewWindow})})});case LiveChatWidgetActionType.SET_TELEMETRY_DATA:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{telemetryInternalData:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{telemetryInternalData:action.payload})});case LiveChatWidgetActionType.SET_RECONNECT_ID:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{reconnectId:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{reconnectId:action.payload})});case LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{unreadMessageCount:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{unreadMessageCount:action.payload})});case LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{liveChatContext:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{liveChatContext:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_STATE:return inMemory=Object.assign({},action.payload),Object.assign({},action.payload);case LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{conversationEndedBy:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{conversationEndedBy:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_SIZE:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{widgetSize:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetSize:action.payload})});case LiveChatWidgetActionType.SET_BOT_AVATAR_INITIALS:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{botAvatarInitials:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{botAvatarInitials:action.payload})});case LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{widgetInstanceId:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{widgetInstanceId:action.payload})});case LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{liveChatConfig:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{liveChatConfig:action.payload})});case LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{initialChatSdkRequestId:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{initialChatSdkRequestId:action.payload})});case LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{chatDisconnectEventReceived:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{chatDisconnectEventReceived:action.payload})});case LiveChatWidgetActionType.SET_SURVEY_MODE:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{selectedSurveyMode:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{selectedSurveyMode:action.payload})});case LiveChatWidgetActionType.SET_CONFIRMATION_STATE:return inMemory=Object.assign({},inMemory,{domainStates:Object.assign({},inMemory.domainStates,{confirmationState:action.payload})}),Object.assign({},state,{domainStates:Object.assign({},state.domainStates,{confirmationState:action.payload})});case LiveChatWidgetActionType.SET_POST_CHAT_PARTICIPANT_TYPE:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{postChatParticipantType:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{postChatParticipantType:action.payload})});case LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_ENABLED:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{isConversationalSurveyEnabled:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{isConversationalSurveyEnabled:action.payload})});case LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_DISPLAY:return inMemory=Object.assign({},inMemory,{appStates:Object.assign({},inMemory.appStates,{isConversationalSurvey:action.payload})}),Object.assign({},state,{appStates:Object.assign({},state.appStates,{isConversationalSurvey:action.payload})});case LiveChatWidgetActionType.GET_IN_MEMORY_STATE:return inMemory;default:return state}};function renderSurveyHelpers_regeneratorRuntime(){renderSurveyHelpers_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function renderSurveyHelpers_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function renderSurveyHelpers_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){renderSurveyHelpers_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){renderSurveyHelpers_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var ChatWidgetEvents,postChatSurveyMode=void 0,getBotSurveyMode=function getBotSurveyMode(props,state){var _props$chatConfig$Liv,_props$chatConfig,_props$chatConfig$Liv2,_state$domainStates$l,_state$domainStates$l2;return null!==(_props$chatConfig$Liv=null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv2=_props$chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv2?void 0:_props$chatConfig$Liv2.msdyn_postconversationsurveybotsurveymode)&&void 0!==_props$chatConfig$Liv?_props$chatConfig$Liv:null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.msdyn_postconversationsurveybotsurveymode},renderSurveyHelpers_getUserSurveyMode=function getUserSurveyMode(props,state){var _props$chatConfig2,_props$chatConfig2$Li,_props$chatConfig3,_props$chatConfig3$Li,_state$domainStates$l3,_state$domainStates,_state$domainStates$l4,_state$domainStates$l5;return null!==(_props$chatConfig2=props.chatConfig)&&void 0!==_props$chatConfig2&&null!==(_props$chatConfig2$Li=_props$chatConfig2.LiveWSAndLiveChatEngJoin)&&void 0!==_props$chatConfig2$Li&&_props$chatConfig2$Li.msdyn_postconversationsurveymode?null===(_props$chatConfig3=props.chatConfig)||void 0===_props$chatConfig3||null===(_props$chatConfig3$Li=_props$chatConfig3.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig3$Li?void 0:_props$chatConfig3$Li.msdyn_postconversationsurveymode:null!==(_state$domainStates$l3=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$l4=_state$domainStates.liveChatConfig)||void 0===_state$domainStates$l4||null===(_state$domainStates$l5=_state$domainStates$l4.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l5?void 0:_state$domainStates$l5.msdyn_postconversationsurveymode)&&void 0!==_state$domainStates$l3?_state$domainStates$l3:PostChatSurveyMode.Embed},setSurveyMode=function(){var _ref=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee(props,participantType,state,dispatch){return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(participantType!==Constants.q.User){_context.next=4;break}return postChatSurveyMode=renderSurveyHelpers_getUserSurveyMode(props,state),dispatch({type:LiveChatWidgetActionType.SET_SURVEY_MODE,payload:postChatSurveyMode}),_context.abrupt("return");case 4:if(participantType!==Constants.q.Bot){_context.next=8;break}return postChatSurveyMode=getBotSurveyMode(props,state),dispatch({type:LiveChatWidgetActionType.SET_SURVEY_MODE,payload:postChatSurveyMode}),_context.abrupt("return");case 8:case"end":return _context.stop()}}),_callee)})));return function setSurveyMode(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}(),renderSurvey=function(){var _ref2=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee2(postChatContext,state,dispatch){return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(postChatSurveyMode!==PostChatSurveyMode.Link){_context2.next=3;break}return setWidgetStateToInactive(dispatch),_context2.abrupt("return");case 3:if(postChatSurveyMode!==PostChatSurveyMode.Embed){_context2.next=6;break}return _context2.next=6,embedModePostChatWorkflow(postChatContext,state,dispatch);case 6:case"end":return _context2.stop()}}),_callee2)})));return function renderSurvey(_x5,_x6,_x7){return _ref2.apply(this,arguments)}}(),embedModePostChatWorkflow=function(){var _ref3=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee3(postChatContext,state,dispatch){var error;return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}).appStates.conversationState!==ConversationState.Closed){_context3.next=3;break}return _context3.abrupt("return");case 3:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmbedModePostChatWorkflowStarted}),!postChatContext){_context3.next=18;break}if(!postChatContext.isConversationalSurveyEnabled||postChatContext.surveyProvider!==Constants.w.MicrosoftCopilotStudio){_context3.next=9;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Postchat}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_DISPLAY,payload:!0}),_context3.abrupt("return");case 9:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.PostchatLoading}),_context3.next=12,addDelayInMs(Constants.e.PostChatLoadingDurationInMs);case 12:if(executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}).appStates.conversationState!==ConversationState.Closed){_context3.next=15;break}return _context3.abrupt("return");case 15:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Postchat}),_context3.next=20;break;case 18:error="Conversation was Ended but App State was not set correctly: postChatContext = "+postChatContext,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AppStatesException,ExceptionDetails:{exception:error}});case 20:case"end":return _context3.stop()}}),_callee3)})));return function embedModePostChatWorkflow(_x8,_x9,_x10){return _ref3.apply(this,arguments)}}(),initiatePostChat=function(){var _ref4=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee4(props,conversationDetailsParam,state,dispatch,postchatContext){var _conversationDetails$,_conversationDetails,participantType;return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}).appStates.conversationState!==ConversationState.Closed){_context4.next=3;break}return _context4.abrupt("return");case 3:return participantType=null!==(_conversationDetails$=null===(_conversationDetails=conversationDetailsParam)||void 0===_conversationDetails?void 0:_conversationDetails.participantType)&&void 0!==_conversationDetails$?_conversationDetails$:postchatContext.participantType,_context4.next=7,setSurveyMode(props,participantType,state,dispatch);case 7:return _context4.next=9,renderSurvey(postchatContext,state,dispatch);case 9:case"end":return _context4.stop()}}),_callee4)})));return function initiatePostChat(_x11,_x12,_x13,_x14,_x15){return _ref4.apply(this,arguments)}}(),getPostChatContext=function(){var _ref5=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee5(facadeChatSDK,state,dispatch){var postChatConfig,postChatEnabled,_state$domainStates2,context,mergedContext;return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.prev=0,_context5.next=3,getPostChatSurveyConfig(facadeChatSDK);case 3:if(postChatConfig=_context5.sent,postChatEnabled=postChatConfig.postChatEnabled,postChatConfig.isConversationalSurveyEnabled&&dispatch({type:LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_ENABLED,payload:!0}),!postChatEnabled){_context5.next=15;break}if(void 0!==(null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.postChatContext)){_context5.next=15;break}return _context5.next=10,facadeChatSDK.getPostChatSurveyContext();case 10:return context=_context5.sent,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatContextCallSucceed,Description:Constants.r.PostChatContextCallSucceed}),mergedContext=Object.assign({},context,postChatConfig),dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT,payload:mergedContext}),_context5.abrupt("return",mergedContext);case 15:_context5.next=20;break;case 17:_context5.prev=17,_context5.t0=_context5.catch(0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.PostChatContextCallFailed,Description:Constants.r.PostChatContextCallFailed,ExceptionDetails:{exception:_context5.t0}});case 20:case"end":return _context5.stop()}}),_callee5,null,[[0,17]])})));return function getPostChatContext(_x16,_x17,_x18){return _ref5.apply(this,arguments)}}(),setWidgetStateToInactive=function(){var _ref6=renderSurveyHelpers_asyncToGenerator(renderSurveyHelpers_regeneratorRuntime().mark((function _callee6(dispatch){return renderSurveyHelpers_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive});case 1:case"end":return _context6.stop()}}),_callee6)})));return function setWidgetStateToInactive(_x19){return _ref6.apply(this,arguments)}}();__webpack_require__("./node_modules/core-js/modules/es.set.js");!function(ChatWidgetEvents){ChatWidgetEvents.ADD_ACTIVITY="CHAT_WIDGET/ADD_ACTIVITY",ChatWidgetEvents.FETCH_PERSISTENT_CHAT_HISTORY="CHAT_WIDGET/FETCH_PERSISTENT_CHAT_HISTORY",ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE="CHAT_WIDGET/NO_MORE_HISTORY_AVAILABLE",ChatWidgetEvents.HISTORY_LOAD_ERROR="CHAT_WIDGET/HISTORY_LOAD_ERROR"}(ChatWidgetEvents||(ChatWidgetEvents={}));var common_ChatWidgetEvents=ChatWidgetEvents,LazyLoadActivityConstants_SCROLL_ID=".webchat__basic-transcript__scrollable",defaultSystemMessageStyles={maxWidth:"100%",color:"#605E5C",background:"transparent",fontSize:"12px",borderRadius:0,minHeight:"auto",fontFamily:"'Segoe UI', 'Apple Color Emoji', 'Noto Color Emoji', 'Segoe UI Emoji', Arial, sans-serif",lineHeight:"16px",padding:"0px 10px 0 10px"},defaultInlineBannerStyle=Object.assign({},defaultSystemMessageStyles,{visibility:"visible",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",margin:"5px 10px",cursor:"pointer"}),defaultMiddlewareLocalizedTexts={MIDDLEWARE_BANNER_FILE_NULL_ERROR:"There was an error uploading the file, please try again.",MIDDLEWARE_BANNER_FILE_SIZE_WITHOUT_EXTENSION_ERROR:"File {2} exceeds the allowed limit of {0} MB and please upload the file with an appropriate file extension.",MIDDLEWARE_BANNER_FILE_SIZE_EXTENSION_ERROR:"File {2} exceeds the allowed limit of {0} MB and {1} files are not supported.",MIDDLEWARE_BANNER_FILE_WITHOUT_EXTENSION:"File upload error. Please upload the file {2} with an appropriate file extension.",MIDDLEWARE_BANNER_FILE_EXTENSION_ERROR:"{1} files are not supported.",MIDDLEWARE_BANNER_FILE_SIZE_ERROR:"File {2} exceeds the allowed limit of {0} MB.",MIDDLEWARE_BANNER_FILE_IS_EMPTY_ERROR:"This file {2} can't be attached because it's empty. Please try again with a different file.",MIDDLEWARE_BANNER_ERROR_MESSAGE:"Upload failed, please try again.",MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE:"Youre back online.",MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION:"Unable to connectplease check your internet connection.",MIDDLEWARE_MAX_CHARACTER_COUNT_EXCEEDED:"This message is too long. Please shorten your message to avoid sending failure.",MIDDLEWARE_TYPING_INDICATOR_ONE:"{0} is typing ...",MIDDLEWARE_TYPING_INDICATOR_TWO:"{0} and {1} are typing ...",MIDDLEWARE_TYPING_INDICATOR_MULTIPLE:"{0} agents are typing ...",MIDDLEWARE_MESSAGE_SENDING:"Sending ...",MIDDLEWARE_MESSAGE_DELIVERED:"Sent",MIDDLEWARE_MESSAGE_NOT_DELIVERED:"Not Delivered",MIDDLEWARE_MESSAGE_RETRY:"Retry",MIDDLEWARE_BANNER_CHAT_DISCONNECT:"Your conversation has been disconnected. For additional assistance, please start a new chat.",THIRD_PARTY_COOKIES_BLOCKED_ALERT_MESSAGE:"Allow sites to save/read cookies in browser settings. Reloading page starts a new chat.",MIDDLEWARE_BANNER_FILE_IS_MALICIOUS:"{0} has been blocked because the file may contain a malware.",MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_SUCCESS:"Email will be sent after chat ends!",MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_ERROR:"Email {0} could not be saved, try again later.",PREVIOUS_MESSAGES_LOADING:"Loading previous messages...",CONVERSATION_DIVIDER_ARIA_LABEL:"Conversation history divider"},mergeStyles=__webpack_require__("./node_modules/@fluentui/merge-styles/lib/mergeStyles.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),LoadInlineBannerActivity_LoadInlineBannerActivity=function LoadInlineBannerActivity(_ref){var webChatContainerProps=_ref.webChatContainerProps,persistentChatHistory=_ref.persistentChatHistory,id=_ref.id,localizedTexts=Object(react.useMemo)((function(){return Object.assign({},defaultMiddlewareLocalizedTexts,null==webChatContainerProps?void 0:webChatContainerProps.localizedTexts)}),[null==webChatContainerProps?void 0:webChatContainerProps.localizedTexts]),bannerStyle=Object(mergeStyles.b)(null==persistentChatHistory?void 0:persistentChatHistory.bannerStyle,defaultInlineBannerStyle);return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)("div",{id:id,className:bannerStyle,role:"status","aria-live":"polite","aria-label":localizedTexts.PREVIOUS_MESSAGES_LOADING,"aria-busy":"true",children:localizedTexts.PREVIOUS_MESSAGES_LOADING})})},activities_LoadInlineBannerActivity=LoadInlineBannerActivity_LoadInlineBannerActivity;try{__function.displayName="LoadInlineBannerActivity",__function.__docgenInfo={description:"",displayName:"LoadInlineBannerActivity",props:{webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},persistentChatHistory:{defaultValue:null,description:"",name:"persistentChatHistory",required:!1,type:{name:"IPersistentChatHistoryProps"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LoadInlineBannerActivity.tsx#LoadInlineBannerActivity"]={docgenInfo:LoadInlineBannerActivity_LoadInlineBannerActivity.__docgenInfo,name:"LoadInlineBannerActivity",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LoadInlineBannerActivity.tsx#LoadInlineBannerActivity"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.map.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.copy-within.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.every.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.set.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.subarray.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array-buffer.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.string.pad-start.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js");function SecureEventBus_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function SecureEventBus_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var SecureEventBus_SecureEventBus=function(){function SecureEventBus(){!function SecureEventBus_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SecureEventBus),this.listeners=new Map,this.authToken=void 0,this.eventCounter=0,this.authToken=this.generateAuthToken()}return function SecureEventBus_createClass(Constructor,protoProps,staticProps){return protoProps&&SecureEventBus_defineProperties(Constructor.prototype,protoProps),staticProps&&SecureEventBus_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(SecureEventBus,[{key:"generateAuthToken",value:function generateAuthToken(){var array=new Uint8Array(32);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(array);else for(var i=0;i<array.length;i++)array[i]=Math.floor(256*Math.random());return Array.from(array,(function(_byte){return _byte.toString(16).padStart(2,"0")})).join("")}},{key:"getAuthToken",value:function getAuthToken(){return this.authToken}},{key:"dispatch",value:function dispatch(eventName,payload,token){if(token!==this.authToken)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SecureEventBusUnauthorizedDispatch,Description:"Unauthorized event dispatch attempt blocked: "+eventName,ExceptionDetails:{eventName:eventName,providedToken:token?"provided":"missing",expectedToken:"secured"}}),!1;var listeners=this.listeners.get(eventName);if(!listeners||0===listeners.length)return!0;try{return listeners.forEach((function(listener){try{listener.callback(payload)}catch(error){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SecureEventBusListenerError,Description:"Error in event listener for event: "+eventName,ExceptionDetails:error})}})),!0}catch(error){return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SecureEventBusDispatchError,Description:"Error dispatching event: "+eventName,ExceptionDetails:error}),!1}}},{key:"subscribe",value:function subscribe(eventName,callback){var _this=this,listenerId="listener_"+ ++this.eventCounter;this.listeners.has(eventName)||this.listeners.set(eventName,[]);var listeners=this.listeners.get(eventName);if(!listeners)throw new Error('Listeners for event "'+eventName+'" not found.');var listener={callback:callback,id:listenerId};return listeners.push(listener),function(){var currentListeners=_this.listeners.get(eventName);if(currentListeners){var index=currentListeners.findIndex((function(l){return l.id===listenerId}));-1!==index&&currentListeners.splice(index,1),0===currentListeners.length&&_this.listeners.delete(eventName)}}}},{key:"removeAllListeners",value:function removeAllListeners(eventName){this.listeners.delete(eventName)}},{key:"clear",value:function clear(){this.listeners.clear()}},{key:"getListenerCount",value:function getListenerCount(eventName){var _this$listeners$get;return(null===(_this$listeners$get=this.listeners.get(eventName))||void 0===_this$listeners$get?void 0:_this$listeners$get.length)||0}},{key:"getRegisteredEvents",value:function getRegisteredEvents(){return Array.from(this.listeners.keys())}}],[{key:"getInstance",value:function getInstance(){return SecureEventBus.instance||(SecureEventBus.instance=new SecureEventBus),SecureEventBus.instance}}]),SecureEventBus}();SecureEventBus_SecureEventBus.instance=null;var utils_SecureEventBus=SecureEventBus_SecureEventBus,utils_dispatchCustomEvent=function dispatchCustomEvent(name,payload){try{var eventBus=utils_SecureEventBus.getInstance(),authToken=eventBus.getAuthToken();eventBus.dispatch(name,payload,authToken)||console.error("Failed to dispatch secure event:",name)}catch(error){console.error("Error dispatching secure custom event:",name,payload,error)}};function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LazyLoadActivity_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LazyLoadActivity_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LazyLoadActivity_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LazyLoadActivity_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function LazyLoadActivity_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function LazyLoadActivity_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var LazyLoadActivity_LazyLoadHandler=function(){function LazyLoadHandler(){!function LazyLoadActivity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LazyLoadHandler)}return function LazyLoadActivity_createClass(Constructor,protoProps,staticProps){return protoProps&&LazyLoadActivity_defineProperties(Constructor.prototype,protoProps),staticProps&&LazyLoadActivity_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(LazyLoadHandler,null,[{key:"logLifecycleEvent",value:function logLifecycleEvent(event,description,elapsedTime){try{TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,Object.assign({Event:event,Description:description},elapsedTime&&{ElapsedTimeInMilliseconds:elapsedTime}))}catch(error){}}},{key:"setHasMoreHistoryAvailable",value:function setHasMoreHistoryAvailable(value){LazyLoadHandler.hasMoreHistoryAvailable=value}},{key:"directReset",value:function directReset(){LazyLoadHandler.resetPending=!0,LazyLoadHandler.setHasMoreHistoryAvailable(!0),LazyLoadHandler.unmount()}},{key:"useLazyLoadObserver",value:function useLazyLoadObserver(){if(LazyLoadHandler.hasMoreHistoryAvailable||LazyLoadHandler.setHasMoreHistoryAvailable(!0),!LazyLoadHandler.initialized){LazyLoadHandler.initTimer=createTimer(),LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadInitializationStarted,"LazyLoad observer initialization started"),LazyLoadHandler.isReady=!1;var callback=function callback(entries){LazyLoadHandler.paused||LazyLoadHandler.pendingScrollAction||!LazyLoadHandler.hasMoreHistoryAvailable||entries.forEach((function(entry){if(entry.isIntersecting&&entry.intersectionRatio>0){if(!LazyLoadHandler.hasMoreHistoryAvailable)return;LazyLoadHandler.handleLazyLoadTrigger()}}))};!function setupObserver(){var scrollContainer=LazyLoadHandler.findScrollContainer().container;if(scrollContainer){var observer=new IntersectionObserver(callback,{root:scrollContainer,rootMargin:"20px 0px 0px 0px",threshold:.05});LazyLoadHandler.waitForTargetElement((function(){var targetElement=document.getElementById(LazyLoadHandler.targetId);targetElement&&(observer.observe(targetElement),LazyLoadHandler.observer=observer,LazyLoadHandler.initialized=!0,LazyLoadHandler.isReady=!0,LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadInitializationCompleted,"LazyLoad observer initialization completed",LazyLoadHandler.initTimer.milliSecondsElapsed),LazyLoadHandler.processInitializationQueue())}))}else{var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),setupObserver()}),100);LazyLoadHandler.retryTimeouts.add(timeoutId)}}()}}},{key:"waitForTargetElement",value:function waitForTargetElement(callback){var maxAttempts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,attempt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(document.getElementById(LazyLoadHandler.targetId))callback();else if(attempt>=maxAttempts)LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadTargetElementNotFound,"Target element not found after max attempts");else{var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.waitForTargetElement(callback,maxAttempts,attempt+1)}),50*attempt);LazyLoadHandler.retryTimeouts.add(timeoutId)}}},{key:"handleImmediateScrollRequest",value:function handleImmediateScrollRequest(){LazyLoadHandler.isReady?LazyLoadHandler.handleLazyLoadTrigger():(LazyLoadHandler.executeImmediateScrollFeedback(),LazyLoadHandler.initializationQueue.push((function(){LazyLoadHandler.handleLazyLoadTrigger()})),LazyLoadHandler.expediteInitialization())}},{key:"executeImmediateScrollFeedback",value:function executeImmediateScrollFeedback(){var _LazyLoadHandler$find2=LazyLoadHandler.findScrollContainer(),container=_LazyLoadHandler$find2.container,isScrollable=_LazyLoadHandler$find2.isScrollable;if(container&&isScrollable){var immediateScrollTarget=container.scrollTop+20;requestAnimationFrame((function(){container&&(container.scrollTop=immediateScrollTarget)}))}}},{key:"expediteInitialization",value:function expediteInitialization(){LazyLoadHandler.initialized||LazyLoadHandler.useLazyLoadObserver()}},{key:"processInitializationQueue",value:function processInitializationQueue(){for(var _loop=function _loop(){var action=LazyLoadHandler.initializationQueue.shift();if(action){var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),action()}),25);LazyLoadHandler.retryTimeouts.add(timeoutId)}};LazyLoadHandler.initializationQueue.length>0;)_loop()}},{key:"checkVisibilityAndTrigger",value:function checkVisibilityAndTrigger(){if(LazyLoadHandler.hasMoreHistoryAvailable){var targetElement=document.getElementById(LazyLoadHandler.targetId);if(targetElement){var container=LazyLoadHandler.findScrollContainer().container;if(container){var targetRect=targetElement.getBoundingClientRect(),containerRect=container.getBoundingClientRect();targetRect.top<containerRect.bottom&&targetRect.bottom>containerRect.top&&targetRect.left<containerRect.right&&targetRect.right>containerRect.left&&LazyLoadHandler.handleImmediateScrollRequest()}}}}},{key:"handleLazyLoadTrigger",value:function handleLazyLoadTrigger(){if(LazyLoadHandler.hasMoreHistoryAvailable){LazyLoadHandler.pendingScrollAction=!0,LazyLoadHandler.paused=!0,utils_dispatchCustomEvent(common_ChatWidgetEvents.FETCH_PERSISTENT_CHAT_HISTORY);var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.executeReliableScroll()}),200);LazyLoadHandler.retryTimeouts.add(timeoutId)}}},{key:"executeReliableScroll",value:function executeReliableScroll(){if(LazyLoadHandler.hasMoreHistoryAvailable){var _LazyLoadHandler$find4=LazyLoadHandler.findScrollContainer(),container=_LazyLoadHandler$find4.container,isScrollable=_LazyLoadHandler$find4.isScrollable;if(container&&isScrollable){var initialScrollTop=container.scrollTop,targetScrollTop=initialScrollTop+35;LazyLoadHandler.scrollState={container:container,initialScrollTop:initialScrollTop,targetScrollTop:targetScrollTop,attemptCount:0,maxAttempts:5},LazyLoadHandler.attemptScroll()}else LazyLoadHandler.scheduleScrollRetry()}else LazyLoadHandler.finishScrollAction()}},{key:"attemptScroll",value:function attemptScroll(){if(LazyLoadHandler.hasMoreHistoryAvailable)if(LazyLoadHandler.scrollState){var _LazyLoadHandler$scro=LazyLoadHandler.scrollState,container=_LazyLoadHandler$scro.container,targetScrollTop=_LazyLoadHandler$scro.targetScrollTop,attemptCount=_LazyLoadHandler$scro.attemptCount,maxAttempts=_LazyLoadHandler$scro.maxAttempts;LazyLoadHandler.scrollState.attemptCount++,requestAnimationFrame((function(){LazyLoadHandler.hasMoreHistoryAvailable?(container&&(container.scrollTop=targetScrollTop),requestAnimationFrame((function(){if(LazyLoadHandler.hasMoreHistoryAvailable){var actualScrollTop=container?container.scrollTop:0;if(Math.abs(actualScrollTop-targetScrollTop)<5)LazyLoadHandler.finishScrollAction();else if(attemptCount<maxAttempts){var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.attemptScroll()}),100*attemptCount);LazyLoadHandler.retryTimeouts.add(timeoutId)}else LazyLoadHandler.finishScrollAction()}else LazyLoadHandler.finishScrollAction()}))):LazyLoadHandler.finishScrollAction()}))}else LazyLoadHandler.finishScrollAction();else LazyLoadHandler.finishScrollAction()}},{key:"finishScrollAction",value:function finishScrollAction(){LazyLoadHandler.scrollState=null,LazyLoadHandler.pendingScrollAction=!1;var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.paused=!1,LazyLoadHandler.scheduleReset()}),500);LazyLoadHandler.retryTimeouts.add(timeoutId)}},{key:"scheduleScrollRetry",value:function scheduleScrollRetry(){if(LazyLoadHandler.hasMoreHistoryAvailable){var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.pendingScrollAction&&LazyLoadHandler.hasMoreHistoryAvailable&&LazyLoadHandler.executeReliableScroll()}),1e3);LazyLoadHandler.retryTimeouts.add(timeoutId)}else LazyLoadHandler.finishScrollAction()}},{key:"scheduleReset",value:function scheduleReset(){var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.reset()}),1e3);LazyLoadHandler.retryTimeouts.add(timeoutId)}},{key:"findScrollContainer",value:function findScrollContainer(){var webchatContainer=document.querySelector(LazyLoadActivityConstants_SCROLL_ID);if(webchatContainer&&LazyLoadHandler.isElementScrollable(webchatContainer))return{container:webchatContainer,isScrollable:!0};var rootContainer=document.getElementById(LazyLoadHandler.rootId);if(rootContainer&&LazyLoadHandler.isElementScrollable(rootContainer))return{container:rootContainer,isScrollable:!0};var targetElement=document.getElementById(LazyLoadHandler.targetId);if(targetElement){var scrollableParent=LazyLoadHandler.findScrollableParent(targetElement);if(scrollableParent)return{container:scrollableParent,isScrollable:!0}}return{container:webchatContainer||rootContainer||document.body,isScrollable:!1}}},{key:"isElementScrollable",value:function isElementScrollable(element){var style=window.getComputedStyle(element),hasScrollableContent=element.scrollHeight>element.clientHeight,hasScrollableOverflow="auto"===style.overflow||"scroll"===style.overflow||"auto"===style.overflowY||"scroll"===style.overflowY;return hasScrollableContent&&hasScrollableOverflow}},{key:"findScrollableParent",value:function findScrollableParent(element){for(var parent=element.parentElement;parent&&parent!==document.body;){if(LazyLoadHandler.isElementScrollable(parent))return parent;parent=parent.parentElement}return null}},{key:"moveScrollDown",value:function moveScrollDown(){LazyLoadHandler.executeReliableScroll()}},{key:"adjustScroll",value:function adjustScroll(scrollContainer){if(LazyLoadHandler.isElementScrollable(scrollContainer)){var targetScrollTop=scrollContainer.scrollTop+35;requestAnimationFrame((function(){scrollContainer.scrollTop=targetScrollTop}))}}},{key:"handleNoMoreHistoryAvailable",value:function handleNoMoreHistoryAvailable(){LazyLoadHandler.setHasMoreHistoryAvailable(!1),LazyLoadHandler.paused=!0,LazyLoadHandler.pendingScrollAction=!1,LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadNoMoreHistory,"No more history available"),LazyLoadHandler.retryTimeouts.forEach((function(timeoutId){clearTimeout(timeoutId)})),LazyLoadHandler.retryTimeouts.clear(),LazyLoadHandler.observer&&(LazyLoadHandler.observer.disconnect(),LazyLoadHandler.observer=null),LazyLoadHandler.scrollState=null}},{key:"reset",value:function reset(){LazyLoadHandler.unmount(),LazyLoadHandler.initialized=!1,LazyLoadHandler.isReady=!1,LazyLoadHandler.setHasMoreHistoryAvailable(!0),LazyLoadHandler.initializationQueue=[],LazyLoadHandler.resetPending=!1;var timeoutId=window.setTimeout((function(){LazyLoadHandler.retryTimeouts.delete(timeoutId),LazyLoadHandler.useLazyLoadObserver()}),25);LazyLoadHandler.retryTimeouts.add(timeoutId)}},{key:"unmount",value:function unmount(){LazyLoadHandler.retryTimeouts.forEach((function(timeoutId){clearTimeout(timeoutId)})),LazyLoadHandler.retryTimeouts.clear();var targetElement=document.getElementById(LazyLoadHandler.targetId);targetElement&&LazyLoadHandler.observer&&LazyLoadHandler.observer.unobserve(targetElement),LazyLoadHandler.observer=null,LazyLoadHandler.initialized=!1,LazyLoadHandler.paused=!1,LazyLoadHandler.pendingScrollAction=!1,LazyLoadHandler.scrollState=null,LazyLoadHandler.isReady=!1,LazyLoadHandler.initializationQueue=[]}},{key:"destroy",value:function destroy(){LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadDestroyed,"LazyLoad component destroyed"),LazyLoadHandler.unmount(),LazyLoadHandler.resetEventListener&&LazyLoadHandler.resetEventListener.unsubscribe()}}]),LazyLoadHandler}();LazyLoadActivity_LazyLoadHandler.rootId="ms_lcw_webchat_root",LazyLoadActivity_LazyLoadHandler.targetId="lazy-load-trigger-element",LazyLoadActivity_LazyLoadHandler.initialized=!1,LazyLoadActivity_LazyLoadHandler.paused=!1,LazyLoadActivity_LazyLoadHandler.observer=null,LazyLoadActivity_LazyLoadHandler.scrollState=null,LazyLoadActivity_LazyLoadHandler.pendingScrollAction=!1,LazyLoadActivity_LazyLoadHandler.retryTimeouts=new Set,LazyLoadActivity_LazyLoadHandler.resetPending=!1,LazyLoadActivity_LazyLoadHandler.initTimer=createTimer(),LazyLoadActivity_LazyLoadHandler.resetEventListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.PersistentConversationReset).subscribe((function(){LazyLoadActivity_LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadReset,"LazyLoad reset triggered"),LazyLoadActivity_LazyLoadHandler.resetPending=!0,LazyLoadActivity_LazyLoadHandler.setHasMoreHistoryAvailable(!0),LazyLoadActivity_LazyLoadHandler.unmount()})),LazyLoadActivity_LazyLoadHandler.isReady=!1,LazyLoadActivity_LazyLoadHandler.initializationQueue=[],LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable=!0;var LazyLoadActivity_LazyLoadActivity=function LazyLoadActivity(props){var _useState2=_slicedToArray(Object(react.useState)(LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable),2),hasMoreHistory=_useState2[0],setHasMoreHistory=_useState2[1];return Object(react.useEffect)((function(){LazyLoadActivity_LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadActivityMounted,"LazyLoadActivity component mounted");var eventBus=utils_SecureEventBus.getInstance(),unsubscribeNoMoreHistory=eventBus.subscribe(common_ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE,(function handleNoMoreHistory(){LazyLoadActivity_LazyLoadHandler.handleNoMoreHistoryAvailable(),setHasMoreHistory(!1)})),unsubscribeHistoryError=eventBus.subscribe(common_ChatWidgetEvents.HISTORY_LOAD_ERROR,(function handleHistoryLoadError(){LazyLoadActivity_LazyLoadHandler.paused=!0,LazyLoadActivity_LazyLoadHandler.pendingScrollAction=!1,window.setTimeout((function(){LazyLoadActivity_LazyLoadHandler.paused=!1}),2e3),LazyLoadActivity_LazyLoadHandler.logLifecycleEvent(TelemetryEvent.LCWLazyLoadHistoryError,"History load error - will retry on next scroll")})),resetSubscription=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.PersistentConversationReset).subscribe((function handlePersistentConversationReset(){setHasMoreHistory(!0)}));if(hasMoreHistory!==LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable&&setHasMoreHistory(LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable),LazyLoadActivity_LazyLoadHandler.resetPending)return LazyLoadActivity_LazyLoadHandler.resetPending=!1,LazyLoadActivity_LazyLoadHandler.reset(),function(){unsubscribeNoMoreHistory(),unsubscribeHistoryError(),resetSubscription.unsubscribe()};LazyLoadActivity_LazyLoadHandler.useLazyLoadObserver(),LazyLoadActivity_LazyLoadHandler.paused=!0;var initTimeoutId=window.setTimeout((function(){LazyLoadActivity_LazyLoadHandler.paused=!1,LazyLoadActivity_LazyLoadHandler.checkVisibilityAndTrigger()}),200),handleScroll=function handleScroll(){LazyLoadActivity_LazyLoadHandler.isReady||window.setTimeout((function(){LazyLoadActivity_LazyLoadHandler.checkVisibilityAndTrigger()}),50)},container=LazyLoadActivity_LazyLoadHandler.findScrollContainer().container;return container&&container.addEventListener("scroll",handleScroll,{passive:!0}),function(){clearTimeout(initTimeoutId),unsubscribeNoMoreHistory(),unsubscribeHistoryError(),resetSubscription.unsubscribe(),container&&container.removeEventListener("scroll",handleScroll),LazyLoadActivity_LazyLoadHandler.destroy()}}),[]),hasMoreHistory?Object(jsx_runtime.jsx)(activities_LoadInlineBannerActivity,Object.assign({},props||{},{id:LazyLoadActivity_LazyLoadHandler.targetId})):null};LazyLoadActivity_LazyLoadActivity.displayName="LazyLoadActivity";var NotificationLevel,WebChatActionType,activities_LazyLoadActivity=LazyLoadActivity_LazyLoadActivity;try{__function.displayName="LazyLoadActivity",__function.__docgenInfo={description:"LazyLoadActivity React Component\n\nThis component serves as the React wrapper for the LazyLoadHandler system.\nIt renders the trigger element and manages the component lifecycle.\n\nComponent Lifecycle:\n1. Mount: Initializes lazy load observer and sets up scroll listener\n2. Active: Monitors user scroll behavior and responds to interactions\n3. Unmount: Cleans up all resources and prevents memory leaks\n\nKey Features:\n- Automatic initialization on mount\n- Scroll event monitoring for immediate responsiveness\n- Proper cleanup on unmount\n- Handles minimize/maximize scenarios\n- Reactive rendering based on history availability",displayName:"LazyLoadActivity",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!1,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},citationPaneProps:{defaultValue:null,description:"",name:"citationPaneProps",required:!1,type:{name:"ICitationPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!1,type:{name:"ITelemetryConfig"}},notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}},useSessionStorage:{defaultValue:null,description:"",name:"useSessionStorage",required:!1,type:{name:"boolean"}},allowSdkChatSupport:{defaultValue:null,description:"",name:"allowSdkChatSupport",required:!1,type:{name:"boolean"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},draggableChatWidgetProps:{defaultValue:null,description:"",name:"draggableChatWidgetProps",required:!1,type:{name:"IDraggableChatWidgetProps"}},mock:{defaultValue:null,description:"",name:"mock",required:!1,type:{name:"IMockProps"}},featureConfigProps:{defaultValue:null,description:"",name:"featureConfigProps",required:!1,type:{name:"IFeatureConfigProps"}},appInsightsConfig:{defaultValue:null,description:"",name:"appInsightsConfig",required:!1,type:{name:"IAppInsightsConfig"}},persistentChatHistoryProps:{defaultValue:null,description:"",name:"persistentChatHistoryProps",required:!1,type:{name:"IPersistentChatHistoryProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LazyLoadActivity.tsx#LazyLoadActivity"]={docgenInfo:LazyLoadActivity_LazyLoadActivity.__docgenInfo,name:"LazyLoadActivity",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LazyLoadActivity.tsx#LazyLoadActivity"})}catch(__react_docgen_typescript_loader_error){}try{LazyLoadActivity_LazyLoadHandler.displayName="LazyLoadHandler",LazyLoadActivity_LazyLoadHandler.__docgenInfo={description:"LazyLoadHandler - Static class managing all lazy loading functionality\n\nThis class uses a singleton pattern with static methods to ensure consistent\nstate management across component re-renders and widget lifecycle events.\n\nState Management:\n- initialized: Tracks if the IntersectionObserver has been set up\n- paused: Temporarily disables lazy loading (during initialization/loading)\n- pendingScrollAction: Prevents overlapping scroll operations\n- isReady: Indicates when the system is fully ready for user interactions\n- initializationQueue: Stores user actions while system initializes\n\nReliability Features:\n- Retry mechanisms with exponential backoff\n- Scroll verification with tolerance checking\n- Multiple container detection strategies\n- Immediate user feedback during delays\n- Proper memory management and cleanup",displayName:"LazyLoadHandler",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LazyLoadActivity.tsx#LazyLoadHandler"]={docgenInfo:LazyLoadActivity_LazyLoadHandler.__docgenInfo,name:"LazyLoadHandler",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/LazyLoadActivity.tsx#LazyLoadHandler"})}catch(__react_docgen_typescript_loader_error){}function WebChatStoreLoader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function WebChatStoreLoader_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function WebChatStoreLoader_createClass(Constructor,protoProps,staticProps){return protoProps&&WebChatStoreLoader_defineProperties(Constructor.prototype,protoProps),staticProps&&WebChatStoreLoader_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}!function(NotificationLevel){NotificationLevel.Success="success",NotificationLevel.Info="info",NotificationLevel.Warning="warn",NotificationLevel.Error="error"}(NotificationLevel||(NotificationLevel={})),function(WebChatActionType){WebChatActionType.DIRECT_LINE_CONNECT_FULFILLED="DIRECT_LINE/CONNECT_FULFILLED",WebChatActionType.DIRECT_LINE_CONNECT="DIRECT_LINE/CONNECT",WebChatActionType.DIRECT_LINE_CONNECT_PENDING="DIRECT_LINE/CONNECT_PENDING",WebChatActionType.DIRECT_LINE_UPDATE_CONNECTION_STATUS="DIRECT_LINE/UPDATE_CONNECTION_STATUS",WebChatActionType.DIRECT_LINE_CONNECT_FULFILLING="DIRECT_LINE/CONNECT_FULFILLING",WebChatActionType.DIRECT_LINE_POST_ACTIVITY="DIRECT_LINE/POST_ACTIVITY",WebChatActionType.DIRECT_LINE_POST_ACTIVITY_PENDING="DIRECT_LINE/POST_ACTIVITY_PENDING",WebChatActionType.DIRECT_LINE_POST_ACTIVITY_FULFILLED="DIRECT_LINE/POST_ACTIVITY_FULFILLED",WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY="DIRECT_LINE/INCOMING_ACTIVITY",WebChatActionType.WEB_CHAT_SET_LANGUAGE="WEB_CHAT/SET_LANGUAGE",WebChatActionType.WEB_CHAT_SEND_MESSAGE="WEB_CHAT/SEND_MESSAGE",WebChatActionType.WEB_CHAT_SET_SEND_TIMEOUT="WEB_CHAT/SET_SEND_TIMEOUT",WebChatActionType.WEB_CHAT_SET_SEND_TYPING_INDICATOR="WEB_CHAT/SET_SEND_TYPING_INDICATOR",WebChatActionType.WEB_CHAT_SET_SUGGESTED_ACTIONS="WEB_CHAT/SET_SUGGESTED_ACTIONS",WebChatActionType.WEB_CHAT_STOP_DICTATE="WEB_CHAT/STOP_DICTATE",WebChatActionType.WEB_CHAT_STOP_SPEAKING="WEB_CHAT/STOP_SPEAKING",WebChatActionType.WEB_CHAT_SEND_EVENT="WEB_CHAT/SEND_EVENT",WebChatActionType.WEB_CHAT_SET_NOTIFICATION="WEB_CHAT/SET_NOTIFICATION",WebChatActionType.WEB_CHAT_DISMISS_NOTIFICATION="WEB_CHAT/DISMISS_NOTIFICATION",WebChatActionType.WEB_CHAT_SET_SEND_BOX="WEB_CHAT/SET_SEND_BOX",WebChatActionType.WEB_CHAT_SEND_FILES="WEB_CHAT/SEND_FILES",WebChatActionType.WEB_CHAT_SET_SEND_BOX_ATTACHMENTS="WEB_CHAT/SET_SEND_BOX_ATTACHMENTS"}(WebChatActionType||(WebChatActionType={}));var WebChatStoreLoader=WebChatStoreLoader_createClass((function WebChatStoreLoader(){!function WebChatStoreLoader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WebChatStoreLoader)}));function NotificationHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function NotificationHandler_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}WebChatStoreLoader.store=void 0;var NotificationScenarios,NotificationHandler_NotificationHandler=function(){function NotificationHandler(){!function NotificationHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NotificationHandler)}return function NotificationHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&NotificationHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&NotificationHandler_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NotificationHandler,null,[{key:"notify",value:function notify(id,level,message){WebChatStoreLoader.store&&(WebChatStoreLoader.store.dispatch({type:WebChatActionType.WEB_CHAT_SET_NOTIFICATION,payload:{id:id,level:level,message:message}}),NotificationHandler.setFocusOnNotificationCloseButton())}},{key:"dismissNotification",value:function dismissNotification(id){WebChatStoreLoader.store&&WebChatStoreLoader.store.dispatch({type:WebChatActionType.WEB_CHAT_DISMISS_NOTIFICATION,payload:{id:id}})}},{key:"notifyError",value:function notifyError(id,message){cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:message}}),this.notify(id,NotificationLevel.Error,message)}},{key:"notifyWarning",value:function notifyWarning(id,message){this.notify(id,NotificationLevel.Warning,message)}},{key:"notifyInfo",value:function notifyInfo(id,message){this.notify(id,NotificationLevel.Info,message)}},{key:"notifySuccess",value:function notifySuccess(id,message){this.notify(id,NotificationLevel.Success,message)}},{key:"notifyWithLevel",value:function notifyWithLevel(id,message,level){level?this.notify(id,level,message):this.notifyInfo(id,message)}},{key:"setFocusOnNotificationCloseButton",value:function setFocusOnNotificationCloseButton(){var expandButton=document.querySelector("#"+Constants.l.MSLiveChatWidget+" ."+Constants.k.webChatBannerExpandButton);if(!expandButton){var closeButton=document.querySelector("#"+Constants.l.MSLiveChatWidget+" ."+Constants.k.webChatBannerCloseButton);return closeButton?(closeButton.focus(),void NotificationHandler.registerOnCloseEvent(closeButton)):void 0}expandButton.focus()}},{key:"registerOnCloseEvent",value:function registerOnCloseEvent(button){button.onclick=function(){setFocusOnSendBox()}}}]),NotificationHandler}();!function(NotificationScenarios){NotificationScenarios.Connection="connection",NotificationScenarios.DownloadTranscriptError="download transcript",NotificationScenarios.EmailTranscriptError="email transcript",NotificationScenarios.EmailAddressSaved="email address saved",NotificationScenarios.AttachmentError="attachment",NotificationScenarios.InternetConnection="internet connection",NotificationScenarios.MaxSizeError="max size",NotificationScenarios.ChatDisconnect="chat disconnect",NotificationScenarios.TPC="tpc blocked"}(NotificationScenarios||(NotificationScenarios={}));__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/rxjs/add/operator/share.js"),__webpack_require__("./node_modules/rxjs/add/observable/of.js");var lib_directLine=__webpack_require__("./node_modules/botframework-directlinejs/lib/directLine.js"),Rx=__webpack_require__("./node_modules/rxjs/Rx.js"),Observable=__webpack_require__("./node_modules/rxjs/Observable.js");function mockadapter_regeneratorRuntime(){mockadapter_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function mockadapter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mockadapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function mockadapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function mockadapter_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var DirectLineSenderRole,mockadapter_MockAdapter=function(){function MockAdapter(){var _this=this;!function mockadapter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockAdapter),this.activityObserver=void 0,this.activity$=void 0,this.connectionStatus$=new Rx.BehaviorSubject(lib_directLine.ConnectionStatus.Uninitialized),this.activity$=new Observable.Observable((function(observer){_this.activityObserver=observer,Promise.resolve().then(mockadapter_asyncToGenerator(mockadapter_regeneratorRuntime().mark((function _callee(){return mockadapter_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_this.connectionStatus$.next(lib_directLine.ConnectionStatus.Online);try{_this.connectionStatus$&&_this.connectionStatus$.next(lib_directLine.ConnectionStatus.Online)}catch(err){_this.connectionStatus$.next(lib_directLine.ConnectionStatus.FailedToConnect),console.error(err)}case 2:case"end":return _context.stop()}}),_callee)}))))})).share()}return function mockadapter_createClass(Constructor,protoProps,staticProps){return protoProps&&mockadapter_defineProperties(Constructor.prototype,protoProps),staticProps&&mockadapter_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockAdapter,[{key:"postActivity",value:function postActivity(activity){if(activity){var _activity$text,modActivity,typingActivity,_this$activityObserve,_this$activityObserve2,_this$activityObserve3;if(null!==(_activity$text=activity.text)&&void 0!==_activity$text&&_activity$text.startsWith(":"))modActivity=Object.assign({},activity,{id:Object(lib.uuidv4)(),from:Object.assign({},activity.from,{id:"botId",name:"Bot",role:"bot"}),text:activity.text.substr(1)}),typingActivity={id:Object(lib.uuidv4)(),from:{id:Object(lib.uuidv4)(),name:"Bot",role:"bot"},type:"typing"},null===(_this$activityObserve=this.activityObserver)||void 0===_this$activityObserve||_this$activityObserve.next(modActivity),null===(_this$activityObserve2=this.activityObserver)||void 0===_this$activityObserve2||_this$activityObserve2.next(typingActivity);else modActivity=Object.assign({},activity,{id:Object(lib.uuidv4)(),from:Object.assign({},activity.from,{id:"userId",name:"User",role:"user"})}),null===(_this$activityObserve3=this.activityObserver)||void 0===_this$activityObserve3||_this$activityObserve3.next(modActivity)}return Observable.Observable.of(activity.id||"")}},{key:"end",value:function end(){}}]),MockAdapter}();!function(DirectLineSenderRole){DirectLineSenderRole.User="user",DirectLineSenderRole.Bot="bot",DirectLineSenderRole.Channel="channel"}(DirectLineSenderRole||(DirectLineSenderRole={}));var defaultTimestampContentStyles={color:"#565452",fontFamily:'"Segoe UI", Arial, sans-serif',background:"transparent",fontSize:"11px",lineHeight:"15px",paddingTop:0};function DeliveredTimestamp_slicedToArray(arr,i){return function DeliveredTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DeliveredTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function DeliveredTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DeliveredTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DeliveredTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function DeliveredTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DeliveredTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DeliveredTimestamp_DeliveredTimestamp=function DeliveredTimestamp(_ref){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$m,_state$domainStates$m2,args=_ref.args,role=_ref.role,name=_ref.name,state=DeliveredTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps),timestamp=args.activity.timestamp,getTimeElement=function getTimeElement(timestamp){var timeString=getTimestampHourMinute(timestamp),isAmPmFormat=timeString.toLowerCase().includes("am")||timeString.toLowerCase().includes("pm");return"rtl"===dir&&isAmPmFormat?Object(jsx_runtime.jsx)("span",{dir:"ltr",children:getTimestampHourMinute(timestamp)}):Object(jsx_runtime.jsx)("span",{dir:dir,children:getTimestampHourMinute(timestamp)})};return Object(jsx_runtime.jsxs)(Stack.a,{style:contentStyles,dir:dir,children:[role===DirectLineSenderRole.Bot&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("span",{dir:dir,"aria-hidden":"false",children:[name," - ",getTimeElement(timestamp)]})}),role===DirectLineSenderRole.User&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("span",{"aria-hidden":"false",dir:dir,children:[" ",getTimeElement(timestamp)," - ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_DELIVERED)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_DELIVERED]})})]})};DeliveredTimestamp_DeliveredTimestamp.displayName="DeliveredTimestamp";try{DeliveredTimestamp_DeliveredTimestamp.displayName="DeliveredTimestamp",DeliveredTimestamp_DeliveredTimestamp.__docgenInfo={description:"",displayName:"DeliveredTimestamp",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/DeliveredTimestamp.tsx#DeliveredTimestamp"]={docgenInfo:DeliveredTimestamp_DeliveredTimestamp.__docgenInfo,name:"DeliveredTimestamp",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/DeliveredTimestamp.tsx#DeliveredTimestamp"})}catch(__react_docgen_typescript_loader_error){}function HistoryMessageTimestamp_slicedToArray(arr,i){return function HistoryMessageTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function HistoryMessageTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function HistoryMessageTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return HistoryMessageTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HistoryMessageTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function HistoryMessageTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HistoryMessageTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var HistoryMessageTimestamp_HistoryMessageTimestamp=function HistoryMessageTimestamp(_ref){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$m,_state$domainStates$m2,args=_ref.args,state=HistoryMessageTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,_args$activity=args.activity,timestamp=_args$activity.timestamp,_args$activity$from=_args$activity.from,name=_args$activity$from.name,role=_args$activity$from.role,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps),getTimeElement=function getTimeElement(timestamp){var timeString=getTimestampHourMinute(timestamp),isAmPmFormat=timeString.toLowerCase().includes("am")||timeString.toLowerCase().includes("pm");return"rtl"===dir&&isAmPmFormat?Object(jsx_runtime.jsx)("span",{dir:"ltr",children:timeString}):Object(jsx_runtime.jsx)("span",{dir:dir,children:timeString})};return Object(jsx_runtime.jsxs)(Stack.a,{style:contentStyles,dir:dir,children:["bot"===role&&Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)("span",{dir:dir,"aria-hidden":"false",children:[name," : ",getTimeElement(timestamp)]})}),"user"===role&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("span",{"aria-hidden":"false",dir:dir,children:[" ",getTimeElement(timestamp)," - ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_DELIVERED)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_DELIVERED]}),"            "]})]})};HistoryMessageTimestamp_HistoryMessageTimestamp.displayName="HistoryMessageTimestamp";try{HistoryMessageTimestamp_HistoryMessageTimestamp.displayName="HistoryMessageTimestamp",HistoryMessageTimestamp_HistoryMessageTimestamp.__docgenInfo={description:"",displayName:"HistoryMessageTimestamp",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/HistoryMessageTimestamp.tsx#HistoryMessageTimestamp"]={docgenInfo:HistoryMessageTimestamp_HistoryMessageTimestamp.__docgenInfo,name:"HistoryMessageTimestamp",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/HistoryMessageTimestamp.tsx#HistoryMessageTimestamp"})}catch(__react_docgen_typescript_loader_error){}var defaultTimestampFailedStyles=Object.assign({},defaultTimestampContentStyles,{color:"#A80000"}),defaultTimestampRetryStyles=Object.assign({},defaultTimestampContentStyles,{color:"#0063B1",cursor:"pointer"});function NotDeliveredTimestamp_regeneratorRuntime(){NotDeliveredTimestamp_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NotDeliveredTimestamp_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NotDeliveredTimestamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function NotDeliveredTimestamp_slicedToArray(arr,i){return function NotDeliveredTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function NotDeliveredTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function NotDeliveredTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return NotDeliveredTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NotDeliveredTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function NotDeliveredTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NotDeliveredTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SendStatus,NotDeliveredTimestamp_NotDeliveredTimestamp=function NotDeliveredTimestamp(_ref){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_state$domainStates$m,_state$domainStates$m2,_state$domainStates$m3,_state$domainStates$m4,args=_ref.args,timestampRef=Object(react.useRef)(),useFocus=botframework_webchat.hooks.useFocus,usePostActivity=botframework_webchat.hooks.usePostActivity,focus=useFocus(),postActivity=usePostActivity(),activity=args.activity,timestamp=activity.timestamp,state=NotDeliveredTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps),failedTextStyles=Object.assign({},defaultTimestampFailedStyles,null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4?void 0:_state$domainStates$r4.timestampFailedTextStyleProps),retryTextStyles=Object.assign({},defaultTimestampRetryStyles,null===(_state$domainStates$r5=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.timestampRetryTextStyleProps);Object(react.useEffect)((function(){var _timestampRef$current,timestampWebChatNodes=null==timestampRef||null===(_timestampRef$current=timestampRef.current)||void 0===_timestampRef$current?void 0:_timestampRef$current.childNodes;(null==timestampWebChatNodes?void 0:timestampWebChatNodes.length)>1&&(timestampWebChatNodes[1].innerText=getTimestampHourMinute(timestamp))}),[timestampRef]);var onRetryClick=Object(react.useCallback)(NotDeliveredTimestamp_asyncToGenerator(NotDeliveredTimestamp_regeneratorRuntime().mark((function _callee(){var _activity$channelData;return NotDeliveredTimestamp_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return activity.previousClientActivityID=null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData?void 0:_activity$channelData.clientActivityID,_context.next=3,postActivity(activity);case 3:focus("sendBox");case 4:case"end":return _context.stop()}}),_callee)}))),[activity,focus,postActivity]);return Object(jsx_runtime.jsxs)(Stack.a,{style:contentStyles,dir:dir,horizontal:!0,children:[Object(jsx_runtime.jsxs)("span",{children:[" ",getTimestampHourMinute(timestamp)]}),Object(jsx_runtime.jsx)("span",{children:" - "}),Object(jsx_runtime.jsxs)("span",{style:failedTextStyles,children:[" ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_NOT_DELIVERED)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_NOT_DELIVERED," "]}),Object(jsx_runtime.jsx)("span",{children:" - "}),Object(jsx_runtime.jsxs)("span",{style:retryTextStyles,role:"button",onClick:onRetryClick,onKeyDown:function onRetryKeyEnter(event){event.code===KeyCodes.ENTER&&(event.preventDefault(),onRetryClick())},tabIndex:0,children:[" ",null!==(_state$domainStates$m3=null===(_state$domainStates$m4=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m4?void 0:_state$domainStates$m4.MIDDLEWARE_MESSAGE_RETRY)&&void 0!==_state$domainStates$m3?_state$domainStates$m3:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_RETRY," "]})]})};NotDeliveredTimestamp_NotDeliveredTimestamp.displayName="NotDeliveredTimestamp";try{NotDeliveredTimestamp_NotDeliveredTimestamp.displayName="NotDeliveredTimestamp",NotDeliveredTimestamp_NotDeliveredTimestamp.__docgenInfo={description:"",displayName:"NotDeliveredTimestamp",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/NotDeliveredTimestamp.tsx#NotDeliveredTimestamp"]={docgenInfo:NotDeliveredTimestamp_NotDeliveredTimestamp.__docgenInfo,name:"NotDeliveredTimestamp",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/timestamps/NotDeliveredTimestamp.tsx#NotDeliveredTimestamp"})}catch(__react_docgen_typescript_loader_error){}function SendingTimestamp_slicedToArray(arr,i){return function SendingTimestamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SendingTimestamp_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function SendingTimestamp_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SendingTimestamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SendingTimestamp_arrayLikeToArray(o,minLen)}(arr,i)||function SendingTimestamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SendingTimestamp_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(SendStatus){SendStatus.Sending="sending",SendStatus.SendFailed="send failed",SendStatus.Sent="sent"}(SendStatus||(SendStatus={}));var SendingTimestamp_SendingTimestamp=function SendingTimestamp(){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$m,_state$domainStates$m2,state=SendingTimestamp_slicedToArray(hooks_useChatContextStore(),1)[0],dir=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.timestampDir)&&void 0!==_state$domainStates$r?_state$domainStates$r:state.domainStates.globalDir,contentStyles=Object.assign({},defaultTimestampContentStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.timestampContentStyleProps);return Object(jsx_runtime.jsx)(Stack.a,{style:contentStyles,dir:dir,horizontal:!0,children:Object(jsx_runtime.jsxs)("span",{children:[" ",null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_MESSAGE_SENDING)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_MESSAGE_SENDING," "]})})};SendingTimestamp_SendingTimestamp.displayName="SendingTimestamp";var activityStatusMiddleware_activityStatusMiddleware=function activityStatusMiddleware(){return function(next){return function(args){var _args$activity=args.activity,tags=_args$activity.channelData.tags,_args$activity$from=_args$activity.from,name=_args$activity$from.name,role=_args$activity$from.role,timestamp=_args$activity.timestamp,sendState=args.sendState,current_tags=tags,current_name=name,current_role=role,current_timestamp=timestamp,sameTimestampGroupTemp=args.sameTimestampGroup;if(null!=tags&&tags.includes(Constants.e.persistentChatHistoryMessageTag))return Object(jsx_runtime.jsx)(HistoryMessageTimestamp_HistoryMessageTimestamp,{args:args});if(args[Constants.y.nextVisibleActivity]){var _args$nextVisibleActi=args.nextVisibleActivity,next_name=_args$nextVisibleActi.from.name,next_timestamp=_args$nextVisibleActi.timestamp,timestampCurrentInMillisecond=Date.parse(current_timestamp),timestampNextInMillisecond=Date.parse(next_timestamp);(current_name!==next_name||timestampNextInMillisecond-timestampCurrentInMillisecond>Constants.y.timeBetweenTimestampGroups)&&(sameTimestampGroupTemp=!1)}return current_tags&&current_tags.includes(Constants.e.systemMessageTag)||sameTimestampGroupTemp&&sendState===SendStatus.Sent?void 0:Object(jsx_runtime.jsxs)("span",{style:{padding:"2px"},children:[sendState===SendStatus.Sending&&Object(jsx_runtime.jsx)(SendingTimestamp_SendingTimestamp,{}),sendState===SendStatus.SendFailed&&Object(jsx_runtime.jsx)(NotDeliveredTimestamp_NotDeliveredTimestamp,{args:args}),sendState===SendStatus.Sent&&Object(jsx_runtime.jsx)(DeliveredTimestamp_DeliveredTimestamp,{args:args,role:current_role,name:current_name})]})}}},createActivityStatusMiddleware=function createActivityStatusMiddleware(){return activityStatusMiddleware_activityStatusMiddleware};try{createActivityStatusMiddleware.displayName="createActivityStatusMiddleware",createActivityStatusMiddleware.__docgenInfo={description:"",displayName:"createActivityStatusMiddleware",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activityStatusMiddleware.tsx#createActivityStatusMiddleware"]={docgenInfo:createActivityStatusMiddleware.__docgenInfo,name:"createActivityStatusMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activityStatusMiddleware.tsx#createActivityStatusMiddleware"})}catch(__react_docgen_typescript_loader_error){}var defaultTypingIndicatorBubbleStyles={height:"6px",width:"6px",borderRadius:"6px",background:"#315FA2",animationDuration:"2s",animationName:"bounce",animationTimingFunction:"ease",animationIterationCount:"infinite",marginRight:"2px"},defaultTypingIndicatorContainerStyles={marginLeft:"10px",marginBottom:"5px",display:"flex",transition:"all .5s ease",alignItems:"center"},defaultTypingIndicatorMessageStyles={fontFamily:'"Segoe UI", Arial, sans-serif',background:"transparent",fontSize:"12px",lineHeight:"15px",color:"#605e5c",marginLeft:"6px"};function typingIndicatorMiddleware_slicedToArray(arr,i){return function typingIndicatorMiddleware_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function typingIndicatorMiddleware_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function typingIndicatorMiddleware_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return typingIndicatorMiddleware_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return typingIndicatorMiddleware_arrayLikeToArray(o,minLen)}(arr,i)||function typingIndicatorMiddleware_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function typingIndicatorMiddleware_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StartChatFailureType,typingIndicatorMiddleware_TypingIndicator=function TypingIndicator(_ref){var _state$domainStates$l,_state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,activeTyping=_ref.activeTyping,visible=_ref.visible,facadeChatSDK=typingIndicatorMiddleware_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],state=typingIndicatorMiddleware_slicedToArray(hooks_useChatContextStore(),1)[0],debounceTyping=Object(react.useCallback)(function debounceLeading(fn){var timeoutId,ms=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return function(){if(!timeoutId){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];fn.apply(void 0,args)}timeoutId=setTimeout((function(){timeoutId=null}),ms)}}((function(){return null==facadeChatSDK?void 0:facadeChatSDK.sendTypingEvent()})),[]);if(!activeTyping||0===Object.keys(activeTyping).length||1===(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l?void 0:_state$domainStates$l.LiveChatVersion)&&!visible)return null;activeTyping=Object.keys(activeTyping).map((function(key){return activeTyping[key]}));for(var i=0;i<activeTyping.length;i++)if(activeTyping[i].role&&activeTyping[i].role===DirectLineSenderRole.User){var _state$domainStates$l2;if(2===(null===(_state$domainStates$l2=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.LiveChatVersion)&&!visible)return debounceTyping(),null;activeTyping.splice(i,1),i--}var localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,state.domainStates.middlewareLocalizedTexts),message=getTypingIndicatorMessage(activeTyping,localizedTexts),typingIndicatorStyles=Object.assign({},defaultTypingIndicatorContainerStyles,null===(_state$domainStates$r=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r?void 0:_state$domainStates$r.typingIndicatorStyleProps),typingIndicatorBubbleStyles=Object.assign({},defaultTypingIndicatorBubbleStyles,null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.typingIndicatorBubbleStyleProps),typingIndicatorMessageStyles=Object.assign({},defaultTypingIndicatorMessageStyles,null===(_state$domainStates$r3=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.typingIndicatorMessageStyleProps);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n                @keyframes bounce {\n                    0% {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0);\n                        opacity: .7;\n                    }\n                    20% {\n                        -webkit-transform: translateY(-6px);\n                        transform: translateY(-6px);\n                        opacity: 1;\n                    }\n                    40% {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0);\n                        opacity: .7\n                    }\n                    to {\n                        -webkit-transform: translateY(0);\n                        transform: translateY(0)\n                    }\n                }\n            "}),Object(jsx_runtime.jsxs)("div",{style:typingIndicatorStyles,children:[Object(jsx_runtime.jsx)("div",{style:typingIndicatorBubbleStyles}),Object(jsx_runtime.jsx)("div",{style:Object.assign({animationDelay:".166s"},typingIndicatorBubbleStyles)}),Object(jsx_runtime.jsx)("div",{style:Object.assign({animationDelay:".333s"},typingIndicatorBubbleStyles)}),Object(jsx_runtime.jsxs)("div",{style:typingIndicatorMessageStyles,children:[" ",message," "]})]})]})},getTypingIndicatorMessage=function getTypingIndicatorMessage(activeTyping,localizedTexts){if(activeTyping&&0!==activeTyping.length){if(1===activeTyping.length){var message=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_ONE;return message?message.includes("{0}")?message.replace("{0}",activeTyping[0].name):message:""}if(2===activeTyping.length){var firstMember=activeTyping[0].name,lastMember=activeTyping[1].name,_message=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_TWO;return _message?(_message.includes("{0}")&&(_message=_message.replace("{0}",firstMember)),_message.includes("{1}")&&(_message=_message.replace("{1}",lastMember)),_message):""}var _message2=localizedTexts.MIDDLEWARE_TYPING_INDICATOR_MULTIPLE;return _message2?_message2.includes("{0}")?_message2.replace("{0}",activeTyping.length.toString()):_message2:""}return""},defaultWebChatStatefulProps={activityStatusMiddleware:createActivityStatusMiddleware(),groupActivitiesMiddleware:function groupActivitiesMiddleware(){return function(next){return function(args){var items,grouping,lastBin,lastItem,bins,activities=args.activities;if(null!=activities&&activities.length>0){var status=next({activities:activities}).status;return{sender:(items=activities,grouping=function(x,y){return(x.channelData&&x.channelData.tags&&x.channelData.tags.includes(Constants.e.systemMessageTag)?Constants.e.systemMessageTag:x.from.name)===(y.channelData&&y.channelData.tags&&y.channelData.tags.includes(Constants.e.systemMessageTag)?Constants.e.systemMessageTag:y.from.name)},bins=[],items.length>0&&items.forEach((function(item){lastItem&&grouping(lastItem,item)?lastBin.push(item):(lastBin=[item],bins.push(lastBin)),lastItem=item})),bins),status:status}}return function(){return!1}}}},typingIndicatorMiddleware:function typingIndicatorMiddleware(){return function(next){return function(args){var activeTyping=args.activeTyping,visible=args.visible;return Object(jsx_runtime.jsx)(typingIndicatorMiddleware_TypingIndicator,{activeTyping:activeTyping,visible:visible})}}}},defaultWebChatStyles={avatarSize:32,backgroundColor:"#F7F7F9",botAvatarBackgroundColor:"#315FA2",botAvatarInitials:"WC",bubbleBackground:"#315FA2",bubbleBorderRadius:4,bubbleBorderWidth:0,bubbleFromUserBackground:"White",bubbleFromUserBorderRadius:4,bubbleFromUserBorderWidth:1,bubbleFromUserTextColor:"Black",bubbleImageHeight:240,bubbleMaxWidth:250,bubbleMinHeight:34,bubbleMinWidth:20,bubbleTextColor:"White",hideSendBox:!1,hideUploadButton:!0,primaryFont:'Segoe UI, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji"',rootHeight:"100%",rootWidth:"100%",sendBoxTextWrap:!0,sendBoxHeight:60,sendBoxMaxHeight:96,sendBoxBackground:"White",showAvatarInGroup:!0,suggestedActionsStackedHeight:125,suggestedActionsStackedOverflow:"scroll",typingAnimationDuration:3500,emojiSet:{":)":"",":-)":"","(:":"","(-:":"",":-|":"",":|":"",":-(":"",":(":"",":-D":"",":D":"",":-p":"",":p":"",":-P":"",":P":"",":-o":"",":o":"",":O":"",":-O":"",";-)":"",";)":"","<3":"","</3":"","<\\3":""},sendAttachmentOn:"attach"},defaultAdaptiveCardStyles={background:"white",color:"black",anchorColor:"blue",textWhiteSpace:"normal",buttonWhiteSpace:"normal",buttonFlexWrap:"nowrap",buttonGap:"0px"},defaultWebChatContainerStatefulProps={webChatStyles:defaultWebChatStyles,webChatProps:defaultWebChatStatefulProps,containerStyles:{height:"100%",width:"100%",overflowY:"hidden"},disableNewLineMarkdownSupport:!1,disableMarkdownMessageFormatting:!1,opensMarkdownLinksInSameTab:!1,honorsTargetInHTMLLinks:!1,hyperlinkTextOverride:!1,directLine:new mockadapter_MockAdapter,adaptiveCardStyles:defaultAdaptiveCardStyles};__webpack_require__("./node_modules/regenerator-runtime/runtime.js");!function(StartChatFailureType){StartChatFailureType.Unauthorized="unauthorized",StartChatFailureType.AuthSetupError="authSetupError",StartChatFailureType.Generic="generic"}(StartChatFailureType||(StartChatFailureType={}));var startChatErrorHandler_handleStartChatError=function handleStartChatError(dispatch,facadeChatSDK,props,ex,isStartChatSuccessful){var _props$controlProps;if(ex){if(function isAuthenticationError(errorMessage){return errorMessage===Constants.z.AuthenticationFailedErrorString||errorMessage.startsWith("Authentication Setup Error:")||errorMessage.includes("Token validation failed")||errorMessage.includes("Authentication token")}(ex.message)&&(dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE,payload:StartChatFailureType.AuthSetupError}),startChatErrorHandler_logWidgetLoadCompleteWithError(ex)),ex.message===Constants.z.NetworkErrorString&&startChatErrorHandler_logWidgetLoadCompleteWithError(ex),ex instanceof lib.ChatSDKError)switch(ex.message){case lib.ChatSDKErrorName.WidgetUseOutsideOperatingHour:return void startChatErrorHandler_handleWidgetUseOutsideOperatingHour(dispatch);case lib.ChatSDKErrorName.PersistentChatConversationRetrievalFailure:handlePersistentChatConversationRetrievalFailure(ex);break;case lib.ChatSDKErrorName.ConversationInitializationFailure:handleConversationInitializationFailure(ex);break;case lib.ChatSDKErrorName.ChatTokenRetrievalFailure:startChatErrorHandler_handleChatTokenRetrievalFailure(dispatch,ex);break;case lib.ChatSDKErrorName.UninitializedChatSDK:handleUninitializedChatSDK(ex);break;case lib.ChatSDKErrorName.AuthenticatedChatConversationRetrievalFailure:dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE,payload:StartChatFailureType.Unauthorized}),startChatErrorHandler_logWidgetLoadCompleteWithError(ex);break;case lib.ChatSDKErrorName.InvalidConversation:case lib.ChatSDKErrorName.ClosedConversation:return void startChatErrorHandler_handleInvalidOrClosedConversation(dispatch,facadeChatSDK,props,ex);default:startChatErrorHandler_logWidgetLoadFailed(ex)}dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!0}),null!=props&&null!==(_props$controlProps=props.controlProps)&&void 0!==_props$controlProps&&_props$controlProps.hideErrorUIPane?dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}):(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ErrorUIPaneLoaded,Description:"Error UI Pane Loaded"}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Error})),!0===isStartChatSuccessful&&startChatErrorHandler_forceEndChat(facadeChatSDK)}else startChatErrorHandler_logWidgetLoadFailed()},startChatErrorHandler_logWidgetLoadFailed=function logWidgetLoadFailed(ex){var _TelemetryTimers$Widg,exDetails={Exception:"Widget load complete with error: "+ex};null!=ex&&ex.httpResponseStatusCode&&(exDetails.HttpResponseStatusCode=ex.httpResponseStatusCode),null!=ex&&ex.exceptionDetails&&(exDetails.ChatSDKExceptionDetails=ex.exceptionDetails),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.WidgetLoadFailed,Description:"Widget load complete with error",ExceptionDetails:exDetails,ElapsedTimeInMilliseconds:null==TelemetryTimers||null===(_TelemetryTimers$Widg=TelemetryTimers.WidgetLoadTimer)||void 0===_TelemetryTimers$Widg?void 0:_TelemetryTimers$Widg.milliSecondsElapsed,CustomProperties:{ConversationStage:ConversationStage.Initialization}})},startChatErrorHandler_logWidgetLoadComplete=function logWidgetLoadComplete(additionalMessage){var _TelemetryTimers$Widg2,descriptionString="Widget load complete";additionalMessage&&(descriptionString+=". "+additionalMessage),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.WidgetLoadComplete,Description:descriptionString,ElapsedTimeInMilliseconds:null==TelemetryTimers||null===(_TelemetryTimers$Widg2=TelemetryTimers.WidgetLoadTimer)||void 0===_TelemetryTimers$Widg2?void 0:_TelemetryTimers$Widg2.milliSecondsElapsed})},startChatErrorHandler_logStartChatComplete=function logStartChatComplete(additionalMessage){var descriptionString="Start chat complete";additionalMessage&&(descriptionString+=". "+additionalMessage),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.StartChatComplete,Description:descriptionString})},startChatErrorHandler_logWidgetLoadCompleteWithError=function logWidgetLoadCompleteWithError(ex){var _TelemetryTimers$Widg3,exDetails={Exception:"Widget load complete with error: "+ex};null!=ex&&ex.httpResponseStatusCode&&(exDetails.HttpResponseStatusCode=ex.httpResponseStatusCode),null!=ex&&ex.exceptionDetails&&(exDetails.ChatSDKExceptionDetails=ex.exceptionDetails),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.WidgetLoadFailed,Description:"Widget load complete with error",ExceptionDetails:exDetails,ElapsedTimeInMilliseconds:null==TelemetryTimers||null===(_TelemetryTimers$Widg3=TelemetryTimers.WidgetLoadTimer)||void 0===_TelemetryTimers$Widg3?void 0:_TelemetryTimers$Widg3.milliSecondsElapsed,CustomProperties:{ConversationStage:ConversationStage.Initialization}})},startChatErrorHandler_forceEndChat=function forceEndChat(facadeChatSDK){TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.WidgetLoadFailedAfterSessionInit}),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.EndChatSDKCall}),null==facadeChatSDK||facadeChatSDK.getChatSDK().endChat()},startChatErrorHandler_handleWidgetUseOutsideOperatingHour=function handleWidgetUseOutsideOperatingHour(dispatch){dispatch({type:LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),startChatErrorHandler_logWidgetLoadComplete(Constants.A.OOOHMessage)},handlePersistentChatConversationRetrievalFailure=function handlePersistentChatConversationRetrievalFailure(ex){400===ex.httpResponseStatusCode?startChatErrorHandler_logWidgetLoadFailed(ex):startChatErrorHandler_logWidgetLoadCompleteWithError(ex)},handleConversationInitializationFailure=function handleConversationInitializationFailure(ex){400===ex.httpResponseStatusCode?startChatErrorHandler_logWidgetLoadFailed(ex):startChatErrorHandler_logWidgetLoadCompleteWithError(ex)},startChatErrorHandler_handleChatTokenRetrievalFailure=function handleChatTokenRetrievalFailure(dispatch,ex){400===ex.httpResponseStatusCode?startChatErrorHandler_logWidgetLoadFailed(ex):(401===ex.httpResponseStatusCode?dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE,payload:StartChatFailureType.Unauthorized}):dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE,payload:StartChatFailureType.AuthSetupError}),startChatErrorHandler_logWidgetLoadCompleteWithError(ex))},handleUninitializedChatSDK=function handleUninitializedChatSDK(ex){startChatErrorHandler_logWidgetLoadCompleteWithError(ex)},startChatErrorHandler_handleInvalidOrClosedConversation=function handleInvalidOrClosedConversation(dispatch,facadeChatSDK,props,ex){var _DataStoreManager$cli;startChatErrorHandler_logWidgetLoadCompleteWithError(ex),endChat_callingStateCleanUp(dispatch),endChat_endChatStateCleanUp(dispatch),endChat_closeChatStateCleanUp(dispatch),endChat_chatSDKStateCleanUp(facadeChatSDK.getChatSDK()),null===(_DataStoreManager$cli=DataStoreManager.clientDataStore)||void 0===_DataStoreManager$cli||_DataStoreManager$cli.removeData(utils_getWidgetCacheIdfromProps(props)),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed})};function reconnectChatHelper_regeneratorRuntime(){reconnectChatHelper_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function reconnectChatHelper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reconnectChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var handleChatReconnect=function(){var _ref=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee(facadeChatSDK,props,dispatch,setAdapter,initStartChat,state){var _props$chatConfig,_props$chatConfig$Liv,_yield$getChatReconne,isAuthenticatedChat,reconnectChatContext,_props$reconnectChatP,_props$reconnectChatP2,_props$reconnectChatP3,_props$controlProps,_reconnectChatContext2,_reconnectChatContext;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return isAuthenticatedChat=!(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveChatConfigAuthSettings)||void 0===_props$chatConfig$Liv||!_props$chatConfig$Liv.msdyn_javascriptclientfunction),_context.next=3,getChatReconnectContext(facadeChatSDK,props.chatConfig,props,isAuthenticatedChat,dispatch);case 3:if(_context.t1=_yield$getChatReconne=_context.sent,_context.t0=null!==_context.t1,!_context.t0){_context.next=7;break}_context.t0=void 0!==_yield$getChatReconne;case 7:if(!_context.t0){_context.next=11;break}_context.t2=_yield$getChatReconne,_context.next=12;break;case 11:_context.t2={};case 12:if(null==(reconnectChatContext=_context.t2)||!reconnectChatContext.redirectURL){_context.next=16;break}return reconnectChatHelper_redirectPage(reconnectChatContext.redirectURL,null===(_props$reconnectChatP=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP?void 0:_props$reconnectChatP.redirectInSameWindow),_context.abrupt("return",!1);case 16:if(!reconnectChatHelper_hasReconnectId(reconnectChatContext)){_context.next=25;break}if(!(null!==(_props$reconnectChatP2=props.reconnectChatPaneProps)&&void 0!==_props$reconnectChatP2&&_props$reconnectChatP2.reconnectId&&!isNullOrEmptyString(null===(_props$reconnectChatP3=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP3?void 0:_props$reconnectChatP3.reconnectId)||null!==(_props$controlProps=props.controlProps)&&void 0!==_props$controlProps&&_props$controlProps.hideReconnectChatPane)){_context.next=21;break}return _context.next=20,setReconnectIdAndStartChat(isAuthenticatedChat,facadeChatSDK,state,props,dispatch,setAdapter,null!==(_reconnectChatContext=reconnectChatContext.reconnectId)&&void 0!==_reconnectChatContext?_reconnectChatContext:"",initStartChat);case 20:return _context.abrupt("return",!1);case 21:return state.appStates.conversationState=ConversationState.ReconnectChat,dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:null!==(_reconnectChatContext2=reconnectChatContext.reconnectId)&&void 0!==_reconnectChatContext2?_reconnectChatContext2:""}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.ReconnectChat}),_context.abrupt("return",!1);case 25:return _context.abrupt("return",!0);case 26:case"end":return _context.stop()}}),_callee)})));return function handleChatReconnect(_x,_x2,_x3,_x4,_x5,_x6){return _ref.apply(this,arguments)}}(),getChatReconnectContext=function(){var _ref2=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee2(facadeChatSDK,chatConfig,props,isAuthenticatedChat,dispatch){var _props$reconnectChatP4,chatReconnectOptionalParams,reconnectChatContext;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.GetChatReconnectContextSDKCallStarted,Description:"Reconnect context SDK call started"}),chatReconnectOptionalParams={reconnectId:null===(_props$reconnectChatP4=props.reconnectChatPaneProps)||void 0===_props$reconnectChatP4?void 0:_props$reconnectChatP4.reconnectId},_context2.next=5,null==facadeChatSDK?void 0:facadeChatSDK.getChatReconnectContext(chatReconnectOptionalParams);case 5:return reconnectChatContext=_context2.sent,isAuthenticatedChat&&removeAuthTokenProvider(facadeChatSDK.getChatSDK()),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.GetChatReconnectContextSDKCallSucceeded,Description:"Reconnect context SDK call succeeded"}),_context2.abrupt("return",reconnectChatContext);case 11:if(_context2.prev=11,_context2.t0=_context2.catch(0),utils_checkContactIdError(_context2.t0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetChatReconnectContextSDKCallFailed,ExceptionDetails:{exception:_context2.t0}}),(null===_context2.t0||void 0===_context2.t0?void 0:_context2.t0.message)!=Constants.z.AuthenticationFailedErrorString){_context2.next=18;break}throw startChatErrorHandler_handleStartChatError(dispatch,facadeChatSDK,props,new Error(Constants.z.AuthenticationFailedErrorString),!1),_context2.t0;case 18:case"end":return _context2.stop()}}),_callee2,null,[[0,11]])})));return function getChatReconnectContext(_x7,_x8,_x9,_x10,_x11){return _ref2.apply(this,arguments)}}(),setReconnectIdAndStartChat=function(){var _ref3=reconnectChatHelper_asyncToGenerator(reconnectChatHelper_regeneratorRuntime().mark((function _callee3(isAuthenticatedChat,facadeChatSDK,state,props,dispatch,setAdapter,reconnectId,initStartChat){var startUnauthenticatedReconnectChat,optionalParams;return reconnectChatHelper_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return isAuthenticatedChat||(startUnauthenticatedReconnectChat={eventName:BroadcastEvent.StartUnauthenticatedReconnectChat},cjs.BroadcastService.postMessage(startUnauthenticatedReconnectChat)),optionalParams={reconnectId:reconnectId},dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:reconnectId}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context3.next=6,initStartChat(facadeChatSDK,dispatch,setAdapter,state,props,optionalParams);case 6:case"end":return _context3.stop()}}),_callee3)})));return function setReconnectIdAndStartChat(_x12,_x13,_x14,_x15,_x16,_x17,_x18,_x19){return _ref3.apply(this,arguments)}}(),reconnectChatHelper_redirectPage=function redirectPage(redirectURL,redirectInSameWindow){var redirectPageRequest={eventName:BroadcastEvent.RedirectPageRequest,payload:{redirectURL:redirectURL}};cjs.BroadcastService.postMessage(redirectPageRequest),redirectInSameWindow&&(window.location.href=redirectURL)},isReconnectEnabled=function isReconnectEnabled(chatConfig){var _chatConfig$LiveWSAnd,_chatConfig$LiveWSAnd2;return!!chatConfig&&"true"===(null===(_chatConfig$LiveWSAnd=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd||null===(_chatConfig$LiveWSAnd2=_chatConfig$LiveWSAnd.msdyn_enablechatreconnect)||void 0===_chatConfig$LiveWSAnd2?void 0:_chatConfig$LiveWSAnd2.toLowerCase())},reconnectChatHelper_isPersistentEnabled=function isPersistentEnabled(chatConfig){var _chatConfig$LiveWSAnd3,_chatConfig$LiveWSAnd4;return!!chatConfig&&(null===(_chatConfig$LiveWSAnd3=chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_chatConfig$LiveWSAnd3||null===(_chatConfig$LiveWSAnd4=_chatConfig$LiveWSAnd3.msdyn_conversationmode)||void 0===_chatConfig$LiveWSAnd4?void 0:_chatConfig$LiveWSAnd4.toLowerCase())===Constants.g.Persistent},reconnectChatHelper_hasReconnectId=function hasReconnectId(reconnectAvailabilityResponse){return reconnectAvailabilityResponse&&!isNullOrUndefined(reconnectAvailabilityResponse.reconnectId)};function endChat_regeneratorRuntime(){endChat_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function endChat_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){endChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var prepareEndChat=function(){var _ref=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter){var _conversationDetails$,_yield$getPostChatCon,_state$domainStates,_state$appStates5,chatConfig,conversationDetails,_state$appStates,_state$appStates2,_state$appStates3,postchatContext,_state$appStates4,_state$appStates6,persistentEnabled,_executeReducer,appStates,endedByCustomer,commonParams,_props$controlProps;return endChat_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,chatConfig=props.chatConfig,endVoiceVideoCallIfOngoing(facadeChatSDK,dispatch),_context.next=5,getConversationDetailsCall(facadeChatSDK);case 5:if((null==(conversationDetails=_context.sent)||null===(_conversationDetails$=conversationDetails.canRenderPostChat)||void 0===_conversationDetails$?void 0:_conversationDetails$.toLowerCase())!==Constants.e.false){_context.next=15;break}if((null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.conversationEndedBy)!==Constants.f.Customer){_context.next=12;break}return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.ConversationEndedByCustomerWithoutPostChat}),_context.next=11,endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!1,!1,!0);case 11:return _context.abrupt("return");case 12:return!state.appStates.isConversationalSurveyEnabled||(null==state||null===(_state$appStates2=state.appStates)||void 0===_state$appStates2?void 0:_state$appStates2.conversationEndedBy)!==Constants.f.Agent&&(null==state||null===(_state$appStates3=state.appStates)||void 0===_state$appStates3?void 0:_state$appStates3.conversationEndedBy)!==Constants.f.Bot||dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive}),_context.abrupt("return");case 15:return(null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.q.Bot&&(null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.q.User||dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_PARTICIPANT_TYPE,payload:null==conversationDetails?void 0:conversationDetails.participantType}),_context.next=18,getPostChatContext(facadeChatSDK,state,dispatch);case 18:if(_context.t1=_yield$getPostChatCon=_context.sent,_context.t0=null!==_context.t1,!_context.t0){_context.next=22;break}_context.t0=void 0!==_yield$getPostChatCon;case 22:if(!_context.t0){_context.next=26;break}_context.t2=_yield$getPostChatCon,_context.next=27;break;case 26:_context.t2=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.postChatContext;case 27:if(void 0!==(postchatContext=_context.t2)){_context.next=37;break}if(cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:"Widget did not display post chat survey as getPostChatContext returned undefined."}}),(null==state||null===(_state$appStates4=state.appStates)||void 0===_state$appStates4?void 0:_state$appStates4.conversationEndedBy)!==Constants.f.Customer){_context.next=35;break}return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.ConversationEndedByCustomerWithInvalidPostChat}),_context.next=34,endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!1,!1,!0);case 34:return _context.abrupt("return");case 35:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive}),_context.abrupt("return");case 37:if(null!=state&&null!==(_state$appStates5=state.appStates)&&void 0!==_state$appStates5&&_state$appStates5.conversationEndedBy&&TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.ConversationEndedByCustomerWithInvalidPostChat+" "+(null==state||null===(_state$appStates6=state.appStates)||void 0===_state$appStates6?void 0:_state$appStates6.conversationEndedBy)+"."}),persistentEnabled=reconnectChatHelper_isPersistentEnabled(chatConfig),_executeReducer=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:void 0}),appStates=_executeReducer.appStates,endedByCustomer="Customer"===(null==appStates?void 0:appStates.conversationEndedBy),commonParams=[props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter],!persistentEnabled||!endedByCustomer){_context.next=47;break}return _context.next=45,endChat_endChat.apply(void 0,commonParams.concat([!0,!1,!0]));case 45:_context.next=53;break;case 47:return _context.next=49,endChat_endChat.apply(void 0,commonParams.concat([!1,!0,!0]));case 49:if(!postchatContext){_context.next=53;break}return _context.next=52,initiatePostChat(props,conversationDetails,state,dispatch,postchatContext);case 52:return _context.abrupt("return");case 53:_context.next=62;break;case 55:if(_context.prev=55,_context.t3=_context.catch(0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndChatFailed,ExceptionDetails:{exception:JSON.stringify(_context.t3)}}),!1!==(null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.hideStartChatButton)){_context.next=62;break}return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.PrepareEndChatError}),_context.next=62,endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!1,!1,!0);case 62:return _context.prev=62,_context.next=65,chatTokenCleanUp(dispatch);case 65:return _context.finish(62);case 66:case"end":return _context.stop()}}),_callee,null,[[0,55,62,66]])})));return function prepareEndChat(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _ref.apply(this,arguments)}}(),endChat_endChat=function(){var _ref2=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee2(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab){var _facadeChatSDK$getCha,_inMemoryState$appSta,inMemoryState,isSessionEnded,conversationDetails,endChatOptionalParameters,_inMemoryState$appSta2,endChatEventName,_props$webChatContain;return endChat_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(skipEndChatSDK||null==facadeChatSDK||null===(_facadeChatSDK$getCha=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha||!_facadeChatSDK$getCha.conversation){_context2.next=23;break}if(inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),isSessionEnded=null==inMemoryState||null===(_inMemoryState$appSta=inMemoryState.appStates)||void 0===_inMemoryState$appSta?void 0:_inMemoryState$appSta.chatDisconnectEventReceived){_context2.next=8;break}return _context2.next=6,getConversationDetailsCall(facadeChatSDK);case 6:(null==(conversationDetails=_context2.sent)?void 0:conversationDetails.state)!==Constants.m.WrapUp&&(null==conversationDetails?void 0:conversationDetails.state)!==Constants.m.Closed||(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:"Checking conversation details upon endChat. Chat disconnected.",CustomProperties:{conversationDetails:conversationDetails}}),isSessionEnded=!0);case 8:return endChatOptionalParameters={isSessionEnded:isSessionEnded},_context2.prev=9,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.EndChatSDKCall}),_context2.next=13,null==facadeChatSDK?void 0:facadeChatSDK.endChat(endChatOptionalParameters);case 13:_context2.next=19;break;case 15:_context2.prev=15,_context2.t0=_context2.catch(9),null!=inMemoryState&&null!==(_inMemoryState$appSta2=inMemoryState.appStates)&&void 0!==_inMemoryState$appSta2&&_inMemoryState$appSta2.chatDisconnectEventReceived?TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.WARN,{Event:TelemetryEvent.DisconnectEndChatSDKCallFailed,ExceptionDetails:{exception:_context2.t0}}):TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndChatSDKCallFailed,ExceptionDetails:{exception:_context2.t0}}),postMessageToOtherTab=!1;case 19:return _context2.prev=19,endChat_endChatStateCleanUp(dispatch),facadeChatSDK.destroy(),_context2.finish(19);case 23:if(!postMessageToOtherTab){_context2.next=28;break}return _context2.next=26,getEndChatEventName(facadeChatSDK,props);case 26:endChatEventName=_context2.sent,cjs.BroadcastService.postMessage({eventName:endChatEventName,payload:{runtimeId:TelemetryManager.InternalTelemetryData.lcwRuntimeId}});case 28:if(!skipCloseChat)try{null==adapter||adapter.end(),setAdapter(void 0),setWebChatStyles(Object.assign({},defaultWebChatContainerStatefulProps.webChatStyles,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.webChatStyles)),WebChatStoreLoader.store=null,endChat_closeChatStateCleanUp(dispatch),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CloseChatCall,Description:"Chat was closed succesfully"})}catch(error){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CloseChatMethodException,ExceptionDetails:{exception:"Failed to endChat: "+error}})}finally{dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0}),dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT,payload:void 0}),LazyLoadActivity_LazyLoadHandler.directReset(),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.PersistentConversationReset}),endChat_closeChatWidget(dispatch,setWebChatStyles,props),facadeChatSDK.destroy(),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.CloseChat}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CloseChatCall,Description:"Broadcasted close chat event"})}case 29:case"end":return _context2.stop()}}),_callee2,null,[[9,15,19,23]])})));return function endChat(_x8,_x9,_x10,_x11,_x12,_x13,_x14,_x15,_x16,_x17){return _ref2.apply(this,arguments)}}(),endChat_callingStateCleanUp=function callingStateCleanUp(dispatch){dispatch({type:LiveChatWidgetActionType.SHOW_CALLING_CONTAINER,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:!0})},endChat_endChatStateCleanUp=function endChatStateCleanUp(dispatch){dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!1})},endChat_closeChatStateCleanUp=function closeChatStateCleanUp(dispatch){dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_DISPLAY,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION,payload:null}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:Constants.f.NotSet}),dispatch({type:LiveChatWidgetActionType.SET_CONFIRMATION_STATE,payload:Constants.d.NotSet}),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),dispatch({type:LiveChatWidgetActionType.SET_CITATIONS,payload:{}}),NotificationHandler_NotificationHandler.dismissNotification(NotificationScenarios.ChatDisconnect),dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0})},endChat_chatSDKStateCleanUp=function chatSDKStateCleanUp(chatSDK){chatSDK.requestId=Object(lib.uuidv4)(),chatSDK.chatToken={},chatSDK.reconnectId=null},endVoiceVideoCallIfOngoing=function(){var _ref3=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee3(facadeChatSDK,dispatch){var callId,voiceVideoCallingSdk;return endChat_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(callId="",_context3.prev=1,!facadeChatSDK.getChatSDK().isVoiceVideoCallingEnabled()){_context3.next=7;break}return _context3.next=5,facadeChatSDK.getVoiceVideoCalling();case 5:(voiceVideoCallingSdk=_context3.sent)&&voiceVideoCallingSdk.isInACall()&&(callId=voiceVideoCallingSdk.callId,voiceVideoCallingSdk.stopCall(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.EndCallButtonClick},callId),endChat_callingStateCleanUp(dispatch));case 7:_context3.next=12;break;case 9:_context3.prev=9,_context3.t0=_context3.catch(1),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndCallButtonClickException,ExceptionDetails:{exception:"Failed to End Call:  "+_context3.t0}},callId);case 12:case"end":return _context3.stop()}}),_callee3,null,[[1,9]])})));return function endVoiceVideoCallIfOngoing(_x18,_x19){return _ref3.apply(this,arguments)}}(),endChat_closeChatWidget=function closeChatWidget(dispatch,setWebChatStyles,props){var _props$webChatContain2,_props$webChatContain3;dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),!0!==(null==props||null===(_props$webChatContain2=props.webChatContainerProps)||void 0===_props$webChatContain2||null===(_props$webChatContain3=_props$webChatContain2.webChatStyles)||void 0===_props$webChatContain3?void 0:_props$webChatContain3.hideSendBox)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!1})}))},chatTokenCleanUp=function(){var _ref4=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee4(dispatch){return endChat_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0});case 1:case"end":return _context4.stop()}}),_callee4)})));return function chatTokenCleanUp(_x20){return _ref4.apply(this,arguments)}}(),getEndChatEventName=function(){var _ref5=endChat_asyncToGenerator(endChat_regeneratorRuntime().mark((function _callee5(facadeChatSDK,props){var _facadeChatSDK$getCha2,_facadeChatSDK$getCha3,_facadeChatSDK$getCha4,_facadeChatSDK$getCha5,_props$controlProps$w,_props$controlProps2;return endChat_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",utils_getWidgetEndChatEventName(null===(_facadeChatSDK$getCha2=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha2||null===(_facadeChatSDK$getCha3=_facadeChatSDK$getCha2.omnichannelConfig)||void 0===_facadeChatSDK$getCha3?void 0:_facadeChatSDK$getCha3.orgId,null===(_facadeChatSDK$getCha4=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha4||null===(_facadeChatSDK$getCha5=_facadeChatSDK$getCha4.omnichannelConfig)||void 0===_facadeChatSDK$getCha5?void 0:_facadeChatSDK$getCha5.widgetId,null!==(_props$controlProps$w=null==props||null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2?void 0:_props$controlProps2.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:""));case 1:case"end":return _context5.stop()}}),_callee5)})));return function getEndChatEventName(_x21,_x22){return _ref5.apply(this,arguments)}}();function Deferred_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function Deferred_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var Deferred=function(){function Deferred(){var _this=this;!function Deferred_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Deferred),this._promise=void 0,this._resolve=void 0,this._reject=function(){},this.resolve=function(value){_this._resolve(value)},this.reject=function(value){_this._reject(value)},this._promise=new Promise((function(resolve,reject){_this._resolve=resolve,_this._reject=reject}))}return function Deferred_createClass(Constructor,protoProps,staticProps){return protoProps&&Deferred_defineProperties(Constructor.prototype,protoProps),staticProps&&Deferred_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Deferred,[{key:"promise",get:function get(){return this._promise}}]),Deferred}();function ActivityStreamHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ActivityStreamHandler_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var ActivityStreamHandler_ActivityStreamHandler=function(){function ActivityStreamHandler(){!function ActivityStreamHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityStreamHandler)}return function ActivityStreamHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityStreamHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityStreamHandler_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ActivityStreamHandler,null,[{key:"cork",value:function cork(){ActivityStreamHandler.restoreDeferred=new Deferred,ActivityStreamHandler.restorePromise=ActivityStreamHandler.restoreDeferred.promise}},{key:"uncork",value:function uncork(){ActivityStreamHandler.restoreDeferred.resolve()}}]),ActivityStreamHandler}();function AddActivitySubscriber_regeneratorRuntime(){AddActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function AddActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function AddActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function AddActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}ActivityStreamHandler_ActivityStreamHandler.restoreDeferred={resolve:function resolve(){return"initialState"}},ActivityStreamHandler_ActivityStreamHandler.restorePromise=void 0;var AddActivitySubscriber_AddActivitySubscriber=function(){function AddActivitySubscriber(){var _this=this;!function AddActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AddActivitySubscriber),this.observer=void 0,this.processedActivityIds=new Set,this.unsubscribeFromSecureEvent=null,this.resetEventListener=void 0;var eventBus=utils_SecureEventBus.getInstance();this.unsubscribeFromSecureEvent=eventBus.subscribe(common_ChatWidgetEvents.ADD_ACTIVITY,(function(payload){if(null!=payload&&payload.activity){var _this$observer,activity=payload.activity,activityId=activity.id;if(activity.identifier){if(_this.processedActivityIds.has(null==activity?void 0:activity.identifier))return;_this.processedActivityIds.add(null==activity?void 0:activity.identifier)}if(activityId){if(_this.processedActivityIds.has(activityId))return;_this.processedActivityIds.add(activityId)}null===(_this$observer=_this.observer)||void 0===_this$observer||_this$observer.next(activity)}})),this.resetEventListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.PersistentConversationReset).subscribe((function(){_this.reset(),_this.unsubscribeFromSecureEvent&&(_this.unsubscribeFromSecureEvent(),_this.unsubscribeFromSecureEvent=null),_this.resetEventListener&&_this.resetEventListener.unsubscribe()}))}var _next2;return function AddActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&AddActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&AddActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AddActivitySubscriber,[{key:"next",value:(_next2=function AddActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){AddActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){AddActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(AddActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){return AddActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",activity);case 1:case"end":return _context.stop()}}),_callee)}))),function next(_x){return _next2.apply(this,arguments)})},{key:"reset",value:function reset(){this.processedActivityIds.clear()}}]),AddActivitySubscriber}();function BotAuthActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BotAuthActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BotAuthActivitySubscriber_regeneratorRuntime(){BotAuthActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function BotAuthActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){BotAuthActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var supportedSignInCardContentTypes=["application/vnd.microsoft.card.signin","application/vnd.microsoft.card.oauth"],botOauthUrlRegex=/[\S]+.botframework.com\/api\/oauth\/signin\?signin=([\S]+)/,BotAuthActivitySubscriber_delay=function delay(t){return new Promise((function(resolve){return setTimeout(resolve,t)}))},extractSignInId=function extractSignInId(signInUrl){var result=botOauthUrlRegex.exec(signInUrl);return result&&result[1]?result[1]:""},extractSasUrl=function(){var _ref=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee(attachment){var sasUrl,signInId,getTestUrlEndpoint,response,responseJson;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(sasUrl=void 0,attachment&&attachment.content&&attachment.content.tokenPostResource&&attachment.content.tokenPostResource.sasUrl&&(sasUrl=attachment.content.tokenPostResource.sasUrl),sasUrl){_context.next=19;break}return signInId=extractSignInId(attachment.content.buttons[0].value),getTestUrlEndpoint="https://token.botframework.com/api/sas/gettesturl?signInId="+signInId,_context.prev=5,_context.next=8,window.fetch(getTestUrlEndpoint);case 8:if(200!==(response=_context.sent).status){_context.next=14;break}return _context.next=12,response.json();case 12:responseJson=_context.sent,sasUrl=responseJson.sasUrl;case 14:_context.next=19;break;case 16:_context.prev=16,_context.t0=_context.catch(5),sasUrl=void 0;case 19:return _context.abrupt("return",sasUrl);case 20:case"end":return _context.stop()}}),_callee,null,[[5,16]])})));return function extractSasUrl(_x){return _ref.apply(this,arguments)}}(),fetchBotAuthConfig=function(){var _ref2=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee2(retries,interval){var botAuthConfigRequestEvent,response,listener;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderFetchConfig}),botAuthConfigRequestEvent={eventName:BroadcastEvent.BotAuthConfigRequest},cjs.BroadcastService.postMessage(botAuthConfigRequestEvent),listener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.BotAuthConfigResponse).subscribe((function(data){var _data$payload,_data$payload2;response=void 0!==(null===(_data$payload=data.payload)||void 0===_data$payload?void 0:_data$payload.response)?null===(_data$payload2=data.payload)||void 0===_data$payload2?void 0:_data$payload2.response:response,listener.unsubscribe()})),1!==retries){_context2.next=6;break}throw new Error;case 6:return _context2.next=8,BotAuthActivitySubscriber_delay(interval);case 8:if(void 0===response){_context2.next=10;break}return _context2.abrupt("return",response);case 10:return _context2.next=12,fetchBotAuthConfig(--retries,interval);case 12:return _context2.abrupt("return",_context2.sent);case 13:case"end":return _context2.stop()}}),_callee2)})));return function fetchBotAuthConfig(_x2,_x3){return _ref2.apply(this,arguments)}}(),BotAuthActivitySubscriber_BotAuthActivitySubscriber=function(){function BotAuthActivitySubscriber(){var optionalParams=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function BotAuthActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BotAuthActivitySubscriber),this.observer=void 0,this.signInCardSeen=void 0,this.fetchBotAuthConfigRetries=void 0,this.fetchBotAuthConfigRetryInterval=void 0,this.signInCardSeen=new Set,this.fetchBotAuthConfigRetries=3,this.fetchBotAuthConfigRetryInterval=1e3,optionalParams.fetchBotAuthConfigRetries&&(this.fetchBotAuthConfigRetries=optionalParams.fetchBotAuthConfigRetries),optionalParams.fetchBotAuthConfigRetryInterval&&(this.fetchBotAuthConfigRetryInterval=optionalParams.fetchBotAuthConfigRetryInterval)}var _next2,_apply;return function BotAuthActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&BotAuthActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&BotAuthActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(BotAuthActivitySubscriber,[{key:"applicable",value:function applicable(activity){var _activity$attachments;return(null==activity||null===(_activity$attachments=activity.attachments)||void 0===_activity$attachments?void 0:_activity$attachments.length)>0&&activity.attachments[0]&&supportedSignInCardContentTypes.indexOf(activity.attachments[0].contentType)>=0}},{key:"apply",value:(_apply=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee3(activity){var _TelemetryManager$Int,attachment,signInUrl,signInId,sasUrl,event;return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.observer.next(!1),attachment=activity.attachments[0],signInUrl=attachment.content.buttons[0].value,signInId=extractSignInId(signInUrl)){_context3.next=7;break}return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.BotAuthActivityUndefinedSignInId}),_context3.abrupt("return",activity);case 7:if(!this.signInCardSeen.has(signInId)){_context3.next=9;break}return _context3.abrupt("return");case 9:return this.signInCardSeen.add(signInId),_context3.next=12,extractSasUrl(attachment);case 12:if(sasUrl=_context3.sent,event={eventName:BroadcastEvent.SigninCardReceived,payload:{sasUrl:sasUrl,conversationId:null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int?void 0:_TelemetryManager$Int.conversationId}},sasUrl){_context3.next=19;break}return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.BotAuthActivityEmptySasUrl,Description:"SaS Url is empty"}),_context3.abrupt("return",activity);case 19:cjs.BroadcastService.postMessage(event);case 20:return _context3.prev=20,_context3.next=23,fetchBotAuthConfig(this.fetchBotAuthConfigRetries,this.fetchBotAuthConfigRetryInterval);case 23:if(!1!==_context3.sent){_context3.next=28;break}TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderHideCard}),_context3.next=30;break;case 28:return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderDisplayCard}),_context3.abrupt("return",activity);case 30:_context3.next=37;break;case 32:return _context3.prev=32,_context3.t0=_context3.catch(20),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SetBotAuthProviderNotFound}),this.signInCardSeen.has(signInId)&&this.signInCardSeen.delete(signInId),_context3.abrupt("return",activity);case 37:case"end":return _context3.stop()}}),_callee3,this,[[20,32]])}))),function apply(_x4){return _apply.apply(this,arguments)})},{key:"next",value:(_next2=BotAuthActivitySubscriber_asyncToGenerator(BotAuthActivitySubscriber_regeneratorRuntime().mark((function _callee4(activity){return BotAuthActivitySubscriber_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!this.applicable(activity)){_context4.next=4;break}return _context4.next=3,this.apply(activity);case 3:return _context4.abrupt("return",_context4.sent);case 4:return _context4.abrupt("return",activity);case 5:case"end":return _context4.stop()}}),_callee4,this)}))),function next(_x5){return _next2.apply(this,arguments)})}]),BotAuthActivitySubscriber}();function DefaultActivitySubscriber_regeneratorRuntime(){DefaultActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function DefaultActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DefaultActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var DefaultActivitySubscriber=function(){function DefaultActivitySubscriber(){!function DefaultActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultActivitySubscriber),this.observer=void 0}var _next2;return function DefaultActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&DefaultActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&DefaultActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DefaultActivitySubscriber,[{key:"next",value:(_next2=function DefaultActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DefaultActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(DefaultActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){return DefaultActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.observer.next(activity),_context.abrupt("return",!1);case 2:case"end":return _context.stop()}}),_callee,this)}))),function next(_x){return _next2.apply(this,arguments)})}]),DefaultActivitySubscriber}();__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function ChatAdapterShim_regeneratorRuntime(){ChatAdapterShim_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ChatAdapterShim_toConsumableArray(arr){return function ChatAdapterShim_arrayWithoutHoles(arr){if(Array.isArray(arr))return ChatAdapterShim_arrayLikeToArray(arr)}(arr)||function ChatAdapterShim_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function ChatAdapterShim_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChatAdapterShim_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChatAdapterShim_arrayLikeToArray(o,minLen)}(arr)||function ChatAdapterShim_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChatAdapterShim_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ChatAdapterShim_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function ChatAdapterShim_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _asyncIterator(iterable){var method,async,sync,retry=2;for("undefined"!=typeof Symbol&&(async=Symbol.asyncIterator,sync=Symbol.iterator);retry--;){if(async&&null!=(method=iterable[async]))return method.call(iterable);if(sync&&null!=(method=iterable[sync]))return new AsyncFromSyncIterator(method.call(iterable));async="@@asyncIterator",sync="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(s){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var done=r.done;return Promise.resolve(r.value).then((function(value){return{value:value,done:done}}))}return AsyncFromSyncIterator=function AsyncFromSyncIterator(s){this.s=s,this.n=s.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function next(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function _return(value){var ret=this.s.return;return void 0===ret?Promise.resolve({value:value,done:!0}):AsyncFromSyncIteratorContinuation(ret.apply(this.s,arguments))},throw:function _throw(value){var thr=this.s.return;return void 0===thr?Promise.reject(value):AsyncFromSyncIteratorContinuation(thr.apply(this.s,arguments))}},new AsyncFromSyncIterator(s)}var ChatAdapterShim_ChatAdapterShim=function(){function ChatAdapterShim(chatAdapter){var observable,subscription,observers,_this=this;!function ChatAdapterShim_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChatAdapterShim),this.chatAdapter=void 0,this.activityObserver=void 0,this.subscribers=void 0,this.subscribers=[],this.chatAdapter=Object.assign({},chatAdapter,{activity$:(observable=new window.Observable((function(observer){_this.activityObserver=observer;var abortController=new window.AbortController;return function ChatAdapterShim_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChatAdapterShim_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ChatAdapterShim_regeneratorRuntime().mark((function _callee(){var _iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,activity,_i,_arr,subscriber;return ChatAdapterShim_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_context.prev=0,_iteratorAbruptCompletion=!1,_didIteratorError=!1,_context.prev=3,_iterator=_asyncIterator(chatAdapter.activities({signal:abortController.signal}));case 5:return _context.next=7,_iterator.next();case 7:if(!(_iteratorAbruptCompletion=!(_step=_context.sent).done)){_context.next=24;break}activity=_step.value,_i=0,_arr=[].concat(ChatAdapterShim_toConsumableArray(_this.subscribers),[new DefaultActivitySubscriber]);case 10:if(!(_i<_arr.length)){_context.next=21;break}return(subscriber=_arr[_i]).observer=_this.activityObserver,_context.next=15,subscriber.next(activity);case 15:if(activity=_context.sent){_context.next=18;break}return _context.abrupt("break",21);case 18:_i++,_context.next=10;break;case 21:_iteratorAbruptCompletion=!1,_context.next=5;break;case 24:_context.next=30;break;case 26:_context.prev=26,_context.t0=_context.catch(3),_didIteratorError=!0,_iteratorError=_context.t0;case 30:if(_context.prev=30,_context.prev=31,!_iteratorAbruptCompletion||null==_iterator.return){_context.next=35;break}return _context.next=35,_iterator.return();case 35:if(_context.prev=35,!_didIteratorError){_context.next=38;break}throw _iteratorError;case 38:return _context.finish(35);case 39:return _context.finish(30);case 40:observer.complete(),_context.next=46;break;case 43:_context.prev=43,_context.t1=_context.catch(0),observer.error(_context.t1);case 46:case"end":return _context.stop()}}),_callee,null,[[0,43],[3,26,30,40],[31,,35,39]])})))(),function(){abortController.abort()}})),observers=[],new window.Observable((function(observer){return subscription||(subscription=observable.subscribe({complete:function complete(){observers.forEach((function(observer){return observer.complete()}))},error:function error(err){observers.forEach((function(observer){return observer.error(err)}))},next:function next(value){observers.forEach((function(observer){return observer.next(value)}))}})),observers.push(observer),function(){(observers=observers.filter((function(o){return o!==observer}))).length||(subscription.unsubscribe(),subscription=null)}})))})}return function ChatAdapterShim_createClass(Constructor,protoProps,staticProps){return protoProps&&ChatAdapterShim_defineProperties(Constructor.prototype,protoProps),staticProps&&ChatAdapterShim_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ChatAdapterShim,[{key:"addSubscriber",value:function addSubscriber(subscriber){this.subscribers.push(subscriber)}}]),ChatAdapterShim}();__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.every.js");function HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime(){HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function HiddenAdaptiveCardActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function HiddenAdaptiveCardActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){HiddenAdaptiveCardActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){HiddenAdaptiveCardActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function HiddenAdaptiveCardActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function HiddenAdaptiveCardActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var HiddenAdaptiveCardActivitySubscriber_HiddenAdaptiveCardActivitySubscriber=function(){function HiddenAdaptiveCardActivitySubscriber(){!function HiddenAdaptiveCardActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HiddenAdaptiveCardActivitySubscriber),this.observer=void 0}var _next2,_apply;return function HiddenAdaptiveCardActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&HiddenAdaptiveCardActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&HiddenAdaptiveCardActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(HiddenAdaptiveCardActivitySubscriber,[{key:"apply",value:(_apply=HiddenAdaptiveCardActivitySubscriber_asyncToGenerator(HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){var attachments,attachment;return HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return attachments=activity.attachments,attachment=activity.attachment,this.observer.next(!1),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.NewMessageReceived,payload:{attachments:attachments||[attachment],text:"Custom Event"}}),_context.abrupt("return");case 4:case"end":return _context.stop()}}),_callee,this)}))),function apply(_x){return _apply.apply(this,arguments)})},{key:"applicable",value:function applicable(activity){var attachments=activity.attachments,attachment=activity.attachment,cards=attachments||[attachment],adaptiveCard=null==cards?void 0:cards.find((function(item){return Constants.e.supportedAdaptiveCardContentTypes.indexOf(null==item?void 0:item.contentType)>=0}));if(adaptiveCard&&adaptiveCard.content){var body=adaptiveCard.content.body;if(Array.isArray(body))if(body.every((function(item){return!1===item.isVisible})))return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.HiddenAdaptiveCardMessageReceived,Description:"All elements in AdaptiveCard are invisible"}),!0}return!1}},{key:"next",value:(_next2=HiddenAdaptiveCardActivitySubscriber_asyncToGenerator(HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime().mark((function _callee2(activity){return HiddenAdaptiveCardActivitySubscriber_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.applicable(activity)){_context2.next=4;break}return _context2.next=3,this.apply(activity);case 3:return _context2.abrupt("return",_context2.sent);case 4:return _context2.abrupt("return",activity);case 5:case"end":return _context2.stop()}}),_callee2,this)}))),function next(_x2){return _next2.apply(this,arguments)})}]),HiddenAdaptiveCardActivitySubscriber}();function mockchatsdk_regeneratorRuntime(){mockchatsdk_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function mockchatsdk_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){mockchatsdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function mockchatsdk_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function mockchatsdk_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var mockchatsdk_MockChatSDK=function(){function MockChatSDK(){!function mockchatsdk_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockChatSDK),this.sleep=function(ms){return new Promise((function(r){return setTimeout(r,ms)}))},this.isMockModeOn=!0,this.omnichannelConfig={widgetId:"00000000-0000-0000-0000-000000000000",orgId:"00000000-0000-0000-0000-000000000000",orgUrl:"https://contoso.crm.dynamics.com"}}var _startChat,_initialize;return function mockchatsdk_createClass(Constructor,protoProps,staticProps){return protoProps&&mockchatsdk_defineProperties(Constructor.prototype,protoProps),staticProps&&mockchatsdk_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockChatSDK,[{key:"initialize",value:(_initialize=mockchatsdk_asyncToGenerator(mockchatsdk_regeneratorRuntime().mark((function _callee(){return mockchatsdk_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this.getLiveChatConfig());case 1:case"end":return _context.stop()}}),_callee,this)}))),function initialize(){return _initialize.apply(this,arguments)})},{key:"startChat",value:(_startChat=mockchatsdk_asyncToGenerator(mockchatsdk_regeneratorRuntime().mark((function _callee2(){return mockchatsdk_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.sleep(1e3);case 2:case"end":return _context2.stop()}}),_callee2,this)}))),function startChat(){return _startChat.apply(this,arguments)})},{key:"endChat",value:function endChat(){return null}},{key:"getChatToken",value:function getChatToken(){return null}},{key:"createChatAdapter",value:function createChatAdapter(){return new mockadapter_MockAdapter}},{key:"getPreChatSurvey",value:function getPreChatSurvey(parseToJson){return""}},{key:"getConversationDetails",value:function getConversationDetails(){return{State:"Active",conversationId:"",canRenderPostChat:"",participantType:Constants.q.User}}},{key:"getCurrentLiveChatContext",value:function getCurrentLiveChatContext(){return{chatToken:{},requestId:""}}},{key:"onNewMessage",value:function onNewMessage(){return null}},{key:"getChatReconnectContext",value:function getChatReconnectContext(){return{reconnectId:"123"}}},{key:"getVoiceVideoCalling",value:function getVoiceVideoCalling(){return null}},{key:"setAuthTokenProvider",value:function setAuthTokenProvider(){return null}},{key:"getLiveChatConfig",value:function getLiveChatConfig(){return{LiveWSAndLiveChatEngJoin:{msdyn_postconversationsurveyenable:"true",msdyn_conversationmode:"192350000"}}}},{key:"sendTypingEvent",value:function sendTypingEvent(){return null}}]),MockChatSDK}();function PauseActivitySubscriber_regeneratorRuntime(){PauseActivitySubscriber_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PauseActivitySubscriber_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PauseActivitySubscriber_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function PauseActivitySubscriber_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PauseActivitySubscriber_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var PauseActivitySubscriber_PauseActivitySubscriber=function(){function PauseActivitySubscriber(){!function PauseActivitySubscriber_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PauseActivitySubscriber),this.observer=void 0}var _next2,_apply;return function PauseActivitySubscriber_createClass(Constructor,protoProps,staticProps){return protoProps&&PauseActivitySubscriber_defineProperties(Constructor.prototype,protoProps),staticProps&&PauseActivitySubscriber_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PauseActivitySubscriber,[{key:"apply",value:(_apply=PauseActivitySubscriber_asyncToGenerator(PauseActivitySubscriber_regeneratorRuntime().mark((function _callee(activity){return PauseActivitySubscriber_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,ActivityStreamHandler_ActivityStreamHandler.restorePromise;case 2:return _context.abrupt("return",activity);case 3:case"end":return _context.stop()}}),_callee)}))),function apply(_x){return _apply.apply(this,arguments)})},{key:"applicable",value:function applicable(activity){return!0}},{key:"next",value:(_next2=PauseActivitySubscriber_asyncToGenerator(PauseActivitySubscriber_regeneratorRuntime().mark((function _callee2(activity){return PauseActivitySubscriber_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.applicable(activity)){_context2.next=4;break}return _context2.next=3,this.apply(activity);case 3:return _context2.abrupt("return",_context2.sent);case 4:return _context2.abrupt("return",activity);case 5:case"end":return _context2.stop()}}),_callee2,this)}))),function next(_x2){return _next2.apply(this,arguments)})}]),PauseActivitySubscriber}();function createAdapter_regeneratorRuntime(){createAdapter_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var Constants_ScenarioType,defaultBotAuthConfig_fetchBotAuthConfigRetries=3,defaultBotAuthConfig_fetchBotAuthConfigRetryInterval=1e3,createAdapter=function(){var _ref=function createAdapter_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){createAdapter_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(createAdapter_regeneratorRuntime().mark((function _callee(facadeChatSDK,props){var chatAdapterOptionalParams,adapter,_props$webChatContain,_props$webChatContain2,_props$webChatContain3,_props$webChatContain4,botAuthActivitySubscriberOptionalParams;return createAdapter_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return chatAdapterOptionalParams={IC3Adapter:{options:{callbackOnNotification:function callbackOnNotification(notification){notification.id===NotificationScenarios.InternetConnection&&notification.level==NotificationLevel.Error&&(notification.message=defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION),notification.id===NotificationScenarios.InternetConnection&&notification.level==NotificationLevel.Success&&(notification.message=defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE),notification.id&&notification.message&&NotificationHandler_NotificationHandler.notifyWithLevel(notification.id,notification.message,notification.level)}}},ACSAdapter:{fileScan:{disabled:!1}}},_context.next=3,facadeChatSDK.createChatAdapter(chatAdapterOptionalParams);case 3:if(adapter=_context.sent,!0===facadeChatSDK.getChatSDK()instanceof mockchatsdk_MockChatSDK){_context.next=13;break}return botAuthActivitySubscriberOptionalParams={fetchBotAuthConfigRetries:(null==props||null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain||null===(_props$webChatContain2=_props$webChatContain.botAuthConfig)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.fetchBotAuthConfigRetries)||defaultBotAuthConfig_fetchBotAuthConfigRetries,fetchBotAuthConfigRetryInterval:(null==props||null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3||null===(_props$webChatContain4=_props$webChatContain3.botAuthConfig)||void 0===_props$webChatContain4?void 0:_props$webChatContain4.fetchBotAuthConfigRetryInterval)||defaultBotAuthConfig_fetchBotAuthConfigRetryInterval},(adapter=new ChatAdapterShim_ChatAdapterShim(adapter)).addSubscriber(new AddActivitySubscriber_AddActivitySubscriber),adapter.addSubscriber(new PauseActivitySubscriber_PauseActivitySubscriber),adapter.addSubscriber(new BotAuthActivitySubscriber_BotAuthActivitySubscriber(botAuthActivitySubscriberOptionalParams)),adapter.addSubscriber(new HiddenAdaptiveCardActivitySubscriber_HiddenAdaptiveCardActivitySubscriber),_context.abrupt("return",adapter.chatAdapter);case 13:return _context.abrupt("return",adapter);case 14:case"end":return _context.stop()}}),_callee)})));return function createAdapter(_x,_x2){return _ref.apply(this,arguments)}}();!function(ScenarioType){ScenarioType.UserSendMessageStrategy="UserSendMessageStrategy",ScenarioType.SystemMessageStrategy="SystemMessageStrategy",ScenarioType.ReceivedMessageStrategy="ReceivedMessageStrategy"}(Constants_ScenarioType||(Constants_ScenarioType={}));__webpack_require__("./node_modules/core-js/modules/es.parse-int.js");var util_isHistoryMessage=function isHistoryMessage(activity,startTime){var _activity$channelData;if((null==activity?void 0:activity.type)!==Constants.e.message)return!1;if(null!=activity&&null!==(_activity$channelData=activity.channelData)&&void 0!==_activity$channelData&&_activity$channelData.tags&&activity.channelData.tags.includes(Constants.e.historyMessageTag))return!0;var activityId=extractTimestampFromId(activity);return!isNaN(activityId)&&activityId>0&&(activityId<startTime&&startTime-activityId>=250)},extractTimestampFromId=function extractTimestampFromId(activity){var _activity$id,id=null!==(_activity$id=null==activity?void 0:activity.id)&&void 0!==_activity$id?_activity$id:"",getTimestampFallback=function getTimestampFallback(){var _activity$timestamp,timestamp=new Date(null!==(_activity$timestamp=null==activity?void 0:activity.timestamp)&&void 0!==_activity$timestamp?_activity$timestamp:"").getTime();return isNaN(timestamp)?0:timestamp};if(id.includes("-")||id.length>13)return getTimestampFallback();var activityId=parseInt(id);return isNaN(activityId)?getTimestampFallback():activityId},buildMessagePayload=function buildMessagePayload(activity,userId){var _text,_text2,_activity$channelData2,_activity$from;return{text:(null==activity||null===(_text=activity.text)||void 0===_text?void 0:_text.length)>=1?"*contents hidden ("+(null==activity||null===(_text2=activity.text)||void 0===_text2?void 0:_text2.length)+" chars)*":"",type:null==activity?void 0:activity.type,timestamp:null==activity?void 0:activity.timestamp,userId:userId,tags:(null==activity||null===(_activity$channelData2=activity.channelData)||void 0===_activity$channelData2?void 0:_activity$channelData2.tags)||[],messageType:"",Id:null==activity?void 0:activity.id,role:null==activity||null===(_activity$from=activity.from)||void 0===_activity$from?void 0:_activity$from.role,isChatComplete:!1}},polyfillMessagePayloadForEvent=function polyfillMessagePayloadForEvent(activity,payload,conversationId){var _activity$conversatio,_attachments,_activity$from2;return Object.assign({},payload,{channelData:null==activity?void 0:activity.channelData,chatId:null==activity||null===(_activity$conversatio=activity.conversation)||void 0===_activity$conversatio?void 0:_activity$conversatio.id,conversationId:conversationId,Id:null==activity?void 0:activity.id,isChatComplete:!1,text:null==activity?void 0:activity.text,attachment:(null==activity||null===(_attachments=activity.attachments)||void 0===_attachments?void 0:_attachments.length)>=1?null==activity?void 0:activity.attachments:[],role:null==activity||null===(_activity$from2=activity.from)||void 0===_activity$from2?void 0:_activity$from2.role})},maskPayloadText=function maskPayloadText(payload){return payload?Object.assign({},payload,{text:"*contents hidden*"}):payload};function FirstResponseLatencyTracker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function FirstResponseLatencyTracker_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var FirstResponseLatencyTracker_FirstResponseLatencyTracker=function(){function FirstResponseLatencyTracker(){var _this=this;!function FirstResponseLatencyTracker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FirstResponseLatencyTracker),this.isABotConversation=!1,this.isTracking=!1,this.startTrackingMessage=void 0,this.stopTrackingMessage=void 0,this.isReady=!1,this.trackingTimeoutId=void 0,this.offlineNetworkListener=cjs.BroadcastService.getMessageByEventName(TelemetryEvent.NetworkDisconnected).subscribe((function(){_this.isTracking=!1,TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.MessageStopLapTrackError,Description:"Tracker Stopped due to network disconnection"})})),this.fmltrackingListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.FMLTrackingCompleted).subscribe((function(){_this.isReady=!0,cjs.BroadcastService.postMessage({eventName:BroadcastEvent.FMLTrackingCompletedAck,payload:null})})),this.rehydrateListener=cjs.BroadcastService.getMessageByEventName(TelemetryEvent.RehydrateMessageReceived).subscribe((function(){_this.isReady=!0})),this.historyListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.HistoryMessageReceived).subscribe((function(){_this.isReady=!0})),this.isABotConversation=!0}return function FirstResponseLatencyTracker_createClass(Constructor,protoProps,staticProps){return protoProps&&FirstResponseLatencyTracker_defineProperties(Constructor.prototype,protoProps),staticProps&&FirstResponseLatencyTracker_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(FirstResponseLatencyTracker,[{key:"createTrackingMessage",value:function createTrackingMessage(payload,type){return{Id:payload.Id,role:payload.role,timestamp:null==payload?void 0:payload.timestamp,tags:payload.tags,messageType:payload.messageType,text:payload.text,type:type,checkTime:(new Date).getTime()}}},{key:"startTracking",value:function startTracking(payload){var _this2=this;this.isReady&&(this.isTracking||this.isABotConversation&&(this.isTracking=!0,this.startTrackingMessage=this.createTrackingMessage(payload,"userMessage"),this.trackingTimeoutId&&clearTimeout(this.trackingTimeoutId),this.trackingTimeoutId=setTimeout((function(){_this2.isTracking&&(_this2.isTracking=!1,_this2.startTrackingMessage=void 0,_this2.stopTrackingMessage=void 0,_this2.trackingTimeoutId=void 0)}),5e3)))}},{key:"handleAgentMessage",value:function handleAgentMessage(payload){var _payload$tags;null!=payload&&null!==(_payload$tags=payload.tags)&&void 0!==_payload$tags&&_payload$tags.includes("public")&&this.deregister()}},{key:"stopTracking",value:function stopTracking(payload){var _this$stopTrackingMes,_this$stopTrackingMes2,_this$startTrackingMe,_this$startTrackingMe2;if(this.isTracking){this.trackingTimeoutId&&(clearTimeout(this.trackingTimeoutId),this.trackingTimeoutId=void 0),this.isTracking=!1,this.stopTrackingMessage=this.createTrackingMessage(payload,"botMessage");var elapsedTime=(null!==(_this$stopTrackingMes=null===(_this$stopTrackingMes2=this.stopTrackingMessage)||void 0===_this$stopTrackingMes2?void 0:_this$stopTrackingMes2.checkTime)&&void 0!==_this$stopTrackingMes?_this$stopTrackingMes:0)-(null!==(_this$startTrackingMe=null===(_this$startTrackingMe2=this.startTrackingMessage)||void 0===_this$startTrackingMe2?void 0:_this$startTrackingMe2.checkTime)&&void 0!==_this$startTrackingMe?_this$startTrackingMe:0);TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.MessageLapTrack,Description:"First response latency tracking",CustomProperties:{elapsedTime:elapsedTime,userMessage:this.startTrackingMessage,botMessage:this.stopTrackingMessage,type:null==payload?void 0:payload.type}})}}},{key:"isMessageFromValidSender",value:function isMessageFromValidSender(payload){var _payload$tags2;return null==payload||null===(_payload$tags2=payload.tags)||void 0===_payload$tags2||!_payload$tags2.includes("public")||(this.handleAgentMessage(payload),!1)}},{key:"startClock",value:function startClock(payload){try{if(!payload||!payload.Id)throw new Error("Invalid payload");this.startTracking(payload)}catch(e){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.MessageStartLapTrackError,Description:"Error while starting the clock",ExceptionDetails:e,CustomProperties:{payload:payload}})}}},{key:"stopClock",value:function stopClock(payload){try{if(!(payload&&payload.Id||(null==payload?void 0:payload.type)===Constants.e.typing))throw new Error("Invalid payload");if(!this.isMessageFromValidSender(payload))return;this.isABotConversation&&this.isTracking&&this.stopTracking(payload)}catch(e){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.MessageStopLapTrackError,Description:"Error while stopping the clock",ExceptionDetails:e,CustomProperties:{payload:payload}})}}},{key:"deregister",value:function deregister(){this.isABotConversation=!1,this.isTracking=!1,this.startTrackingMessage=void 0,this.stopTrackingMessage=void 0,this.trackingTimeoutId&&(clearTimeout(this.trackingTimeoutId),this.trackingTimeoutId=void 0),this.offlineNetworkListener.unsubscribe(),this.fmltrackingListener.unsubscribe(),this.rehydrateListener.unsubscribe(),this.historyListener.unsubscribe()}}]),FirstResponseLatencyTracker}(),newMessageEventHandler_createOnNewAdapterActivityHandler=function createOnNewAdapterActivityHandler(chatId,userId,startTime){var firstResponseLatencyTracker=new FirstResponseLatencyTracker_FirstResponseLatencyTracker,isHistoryMessageReceivedEventRaised=!1,historyMessageStrategy=function historyMessageStrategy(payload){var newMessageReceivedEvent={eventName:BroadcastEvent.HistoryMessageReceived,payload:payload};cjs.BroadcastService.postMessage(newMessageReceivedEvent),isHistoryMessageReceivedEventRaised||(isHistoryMessageReceivedEventRaised=!0,TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.RehydrateMessageReceived,Description:"History message received",CustomProperties:maskPayloadText(payload)}))},receivedMessageStrategy=function receivedMessageStrategy(activity){var _TelemetryManager$Int5;if(function isValidMessage(activity){var _activity$channelData,_activity$channelData2,_activity$channelData3,messageHasNoText=!(null!=activity&&activity.text),messageHasNoTags=!(null!=activity&&activity.channelData&&null!=activity&&null!==(_activity$channelData=activity.channelData)&&void 0!==_activity$channelData&&_activity$channelData.tags&&0!==(null==activity||null===(_activity$channelData2=activity.channelData)||void 0===_activity$channelData2||null===(_activity$channelData3=_activity$channelData2.tags)||void 0===_activity$channelData3?void 0:_activity$channelData3.length)),messageHasNoAttachments=!(null!=activity&&activity.attachments)||0===(null==activity?void 0:activity.attachments.length);return!(messageHasNoTags&&messageHasNoText&&messageHasNoAttachments)||(null==activity?void 0:activity.type)===Constants.e.typing}(activity)){var isHistoryMessageReceived=util_isHistoryMessage(activity,startTime),payload=buildMessagePayload(activity,userId);if(payload.messageType=Constants.e.userMessageTag,isHistoryMessageReceived){var _TelemetryManager$Int4;historyMessageStrategy(polyfillMessagePayloadForEvent(activity,payload,null===(_TelemetryManager$Int4=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int4?void 0:_TelemetryManager$Int4.conversationId))}else{firstResponseLatencyTracker.stopClock(payload);var newMessageReceivedEvent={eventName:BroadcastEvent.NewMessageReceived,payload:polyfillMessagePayloadForEvent(activity,payload,null===(_TelemetryManager$Int5=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int5?void 0:_TelemetryManager$Int5.conversationId)};cjs.BroadcastService.postMessage(newMessageReceivedEvent),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.MessageReceived,Description:"New message received",CustomProperties:maskPayloadText(payload)})}}},raiseMessageEvent=function raiseMessageEvent(activity){if((null==activity?void 0:activity.type)===Constants.e.message||(null==activity?void 0:activity.type)===Constants.e.typing){var scenarioType=function getScenarioType(activity){var _activity$from3,_activity$channelData3,role=null==activity||null===(_activity$from3=activity.from)||void 0===_activity$from3?void 0:_activity$from3.role,tags=null==activity||null===(_activity$channelData3=activity.channelData)||void 0===_activity$channelData3?void 0:_activity$channelData3.tags;return role===Constants.e.userMessageTag?Constants_ScenarioType.UserSendMessageStrategy:tags&&tags.includes(Constants.e.systemMessageTag)||role===Constants.e.channelMessageTag?Constants_ScenarioType.SystemMessageStrategy:Constants_ScenarioType.ReceivedMessageStrategy}(activity);switch(scenarioType){case Constants_ScenarioType.UserSendMessageStrategy:!function userSendMessageStrategy(activity){var _TelemetryManager$Int,payload=buildMessagePayload(activity,userId);payload.messageType=Constants.e.userMessageTag;var newMessageSentEvent={eventName:BroadcastEvent.NewMessageSent,payload:polyfillMessagePayloadForEvent(activity,payload,null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int?void 0:_TelemetryManager$Int.conversationId)};cjs.BroadcastService.postMessage(newMessageSentEvent),util_isHistoryMessage(activity,startTime)||firstResponseLatencyTracker.startClock(payload),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.MessageSent,Description:"New message sent"})}(activity);break;case Constants_ScenarioType.SystemMessageStrategy:!function systemMessageStrategy(activity){var _TelemetryManager$Int3,payload=buildMessagePayload(activity,userId);if(payload.messageType=Constants.e.systemMessageTag,util_isHistoryMessage(activity,startTime)){var _TelemetryManager$Int2;historyMessageStrategy(polyfillMessagePayloadForEvent(activity,payload,null===(_TelemetryManager$Int2=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.conversationId))}else{var newMessageReceivedEvent={eventName:BroadcastEvent.NewMessageReceived,payload:polyfillMessagePayloadForEvent(activity,payload,null===(_TelemetryManager$Int3=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int3?void 0:_TelemetryManager$Int3.conversationId)};cjs.BroadcastService.postMessage(newMessageReceivedEvent),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.SystemMessageReceived,Description:"System message received"})}}(activity);break;case Constants_ScenarioType.ReceivedMessageStrategy:receivedMessageStrategy(activity)}}};return function onNewAdapterActivityHandler(activity){raiseMessageEvent(activity)}},FirstMessageTrackerFromBot_createTrackingForFirstMessage=function createTrackingForFirstMessage(){var trackingTimeoutId,isTracking=!1,startTime=0,stopTrackingMessage=null,flag=!1,widgetLoadListener=cjs.BroadcastService.getMessageByEventName(TelemetryEvent.StartChatComplete).subscribe((function(){isTracking||(isTracking=!0,startTime=(new Date).getTime(),trackingTimeoutId&&clearTimeout(trackingTimeoutId),trackingTimeoutId=setTimeout((function(){isTracking&&(isTracking=!1,startTime=0,0,stopTrackingMessage=null,trackingTimeoutId=void 0,disconnectListener())}),1e4))})),newMessageListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.NewMessageReceived).subscribe((function(message){var payload=message.payload;if(!function isMessageFromValidSender(payload){var _payload$tags;return null==payload||null===(_payload$tags=payload.tags)||void 0===_payload$tags||!_payload$tags.includes("public")}(payload))return isTracking=!1,trackingTimeoutId&&(clearTimeout(trackingTimeoutId),trackingTimeoutId=void 0),void disconnectListener();if(isTracking){isTracking=!1,trackingTimeoutId&&(clearTimeout(trackingTimeoutId),trackingTimeoutId=void 0);var elapsedTime=(new Date).getTime()-startTime;stopTrackingMessage=function createTrackingMessage(payload,type){return{Id:payload.Id,role:payload.role,timestamp:null==payload?void 0:payload.timestamp,tags:payload.tags,messageType:payload.messageType,text:payload.text,type:type,checkTime:(new Date).getTime()}}(payload,"botMessage"),notifyFMLTrackingCompleted(),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.BotFirstMessageLapTrack,Description:"First Message from Bot latency tracking",CustomProperties:{elapsedTime:elapsedTime,widgetLoadedAt:startTime,botMessage:stopTrackingMessage,type:null==payload?void 0:payload.type}}),disconnectListener()}})),notifyFMLTrackingCompleted=function notifyFMLTrackingCompleted(){ackListener();var interval=setInterval((function(){flag?clearInterval(interval):cjs.BroadcastService.postMessage({eventName:BroadcastEvent.FMLTrackingCompleted,payload:null})}),100)},ackListener=function ackListener(){var listen=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.FMLTrackingCompletedAck).subscribe((function(){flag=!0,listen.unsubscribe()}))},rehydrateListener=cjs.BroadcastService.getMessageByEventName(TelemetryEvent.RehydrateMessageReceived).subscribe((function(){isTracking=!1,disconnectListener()})),historyListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.HistoryMessageReceived).subscribe((function(){isTracking=!1,disconnectListener()})),offlineNetworkListener=cjs.BroadcastService.getMessageByEventName(TelemetryEvent.NetworkDisconnected).subscribe((function(){isTracking=!1,disconnectListener(),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.BotFirstMessageLapTrackError,Description:"Tracker Stopped due to network disconnection"})})),disconnectListener=function disconnectListener(){trackingTimeoutId&&(clearTimeout(trackingTimeoutId),trackingTimeoutId=void 0),historyListener.unsubscribe(),rehydrateListener.unsubscribe(),newMessageListener.unsubscribe(),widgetLoadListener.unsubscribe(),offlineNetworkListener.unsubscribe()}};function setPostChatContextAndLoadSurvey_regeneratorRuntime(){setPostChatContextAndLoadSurvey_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var setPostChatContextAndLoadSurvey=function(){var _ref=function setPostChatContextAndLoadSurvey_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){setPostChatContextAndLoadSurvey_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(setPostChatContextAndLoadSurvey_regeneratorRuntime().mark((function _callee(facadeChatSDK,dispatch,persistedChat){var postChatConfig,context,mergedContext;return setPostChatContextAndLoadSurvey_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,getPostChatSurveyConfig(facadeChatSDK);case 3:if((postChatConfig=_context.sent).isConversationalSurveyEnabled&&dispatch({type:LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_ENABLED,payload:!0}),!postChatConfig.postChatEnabled){_context.next=15;break}if(persistedChat){_context.next=15;break}return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatContextCallStarted,Description:Constants.r.PostChatContextCallStarted}),_context.next=11,facadeChatSDK.getPostChatSurveyContext();case 11:context=_context.sent,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatContextCallSucceed,Description:Constants.r.PostChatContextCallSucceed}),mergedContext=Object.assign({},context,postChatConfig),dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_CONTEXT,payload:mergedContext});case 15:_context.next=20;break;case 17:_context.prev=17,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.PostChatContextCallFailed,Description:Constants.r.PostChatContextCallFailed,ExceptionDetails:{exception:_context.t0}});case 20:cjs.BroadcastService.getMessageByEventName("LoadPostChatSurvey").subscribe((function(msg){dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Postchat})}));case 21:case"end":return _context.stop()}}),_callee,null,[[0,17]])})));return function setPostChatContextAndLoadSurvey(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function persistentChatHelper_regeneratorRuntime(){persistentChatHelper_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function persistentChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var shouldSetPreChatIfPersistentChat=function(){var _ref=function persistentChatHelper_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){persistentChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){persistentChatHelper_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(persistentChatHelper_regeneratorRuntime().mark((function _callee(facadeChatSDK,conversationMode,showPreChat){var persistentEnabled,skipPreChat,chatSDK,sdkAsAny,reconnectableChatsParams,reconnectableChatsResponse;return persistentChatHelper_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(persistentEnabled=liveChatConfigUtils_isPersistentChatEnabled(conversationMode),skipPreChat=!1,!persistentEnabled){_context.next=15;break}return chatSDK=facadeChatSDK.getChatSDK(),reconnectableChatsParams={authenticatedUserToken:(sdkAsAny=chatSDK).authenticatedUserToken,requestId:sdkAsAny.requestId},_context.prev=6,_context.next=9,facadeChatSDK.getReconnectableChats(reconnectableChatsParams);case 9:(reconnectableChatsResponse=_context.sent)&&reconnectableChatsResponse.reconnectid&&(skipPreChat=!0),_context.next=15;break;case 13:_context.prev=13,_context.t0=_context.catch(6);case 15:return _context.abrupt("return",showPreChat&&!skipPreChat);case 16:case"end":return _context.stop()}}),_callee,null,[[6,13]])})));return function shouldSetPreChatIfPersistentChat(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function updateSessionDataForTelemetry_regeneratorRuntime(){updateSessionDataForTelemetry_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function updateSessionDataForTelemetry_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){updateSessionDataForTelemetry_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var updateTelemetryData=function(){var _ref=updateSessionDataForTelemetry_asyncToGenerator(updateSessionDataForTelemetry_regeneratorRuntime().mark((function _callee(facadeChatSDK,dispatch){return updateSessionDataForTelemetry_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all([updateSessionDataForTelemetry(facadeChatSDK,dispatch),updateConversationDataForTelemetry(facadeChatSDK,dispatch)]);case 2:case"end":return _context.stop()}}),_callee)})));return function updateTelemetryData(_x,_x2){return _ref.apply(this,arguments)}}(),updateSessionDataForTelemetry=function(){var _ref2=updateSessionDataForTelemetry_asyncToGenerator(updateSessionDataForTelemetry_regeneratorRuntime().mark((function _callee2(facadeChatSDK,dispatch){var chatSession,telemetryData;return updateSessionDataForTelemetry_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!facadeChatSDK||!facadeChatSDK.getChatSDK()){_context2.next=7;break}return _context2.next=3,facadeChatSDK.getCurrentLiveChatContext();case 3:chatSession=_context2.sent,telemetryData=TelemetryHelper_TelemetryHelper.addSessionDataToTelemetry(chatSession,TelemetryManager.InternalTelemetryData),dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.UpdateSessionDataForTelemetry,payload:{chatSession:chatSession}});case 7:case"end":return _context2.stop()}}),_callee2)})));return function updateSessionDataForTelemetry(_x3,_x4){return _ref2.apply(this,arguments)}}(),updateConversationDataForTelemetry=function(){var _ref3=updateSessionDataForTelemetry_asyncToGenerator(updateSessionDataForTelemetry_regeneratorRuntime().mark((function _callee3(facadeChatSDK,dispatch){var liveWorkItem,telemetryData;return updateSessionDataForTelemetry_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!facadeChatSDK||!facadeChatSDK.getChatSDK()){_context3.next=7;break}return _context3.next=3,getConversationDetailsCall(facadeChatSDK);case 3:liveWorkItem=_context3.sent,telemetryData=TelemetryHelper_TelemetryHelper.addConversationDataToTelemetry(liveWorkItem,TelemetryManager.InternalTelemetryData),dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.UpdateConversationDataForTelemetry,payload:{liveWorkItem:liveWorkItem}});case 7:case"end":return _context3.stop()}}),_callee3)})));return function updateConversationDataForTelemetry(_x5,_x6){return _ref3.apply(this,arguments)}}();function startChat_regeneratorRuntime(){startChat_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function startChat_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){startChat_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var startChat_widgetInstanceId,popoutWidgetInstanceId,startChat_optionalParams={},prepareStartChat=function(){var _ref=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee(props,facadeChatSDK,state,dispatch,setAdapter){var isProactiveChat,isPreChatEnabledInProactiveChat;return startChat_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(startChat_optionalParams={},startChat_widgetInstanceId=utils_getWidgetCacheIdfromProps(props),!0!==isReconnectEnabled(props.chatConfig)||reconnectChatHelper_isPersistentEnabled(props.chatConfig)){_context.next=8;break}return _context.next=5,handleChatReconnect(facadeChatSDK,props,dispatch,setAdapter,startChat_initStartChat,state);case 5:if(_context.sent){_context.next=8;break}return _context.abrupt("return");case 8:return _context.next=10,canStartPopoutChat(props);case 10:if(!_context.sent){_context.next=12;break}return _context.abrupt("return");case 12:return _context.next=14,canConnectToExistingChat(props,facadeChatSDK,state,dispatch,setAdapter);case 14:if(!_context.sent){_context.next=16;break}return _context.abrupt("return");case 16:return isProactiveChat=state.appStates.conversationState===ConversationState.ProactiveChat,isPreChatEnabledInProactiveChat=state.appStates.proactiveChatStates.proactiveChatEnablePrechat,_context.next=20,setPreChatAndInitiateChat(facadeChatSDK,dispatch,setAdapter,isProactiveChat,isPreChatEnabledInProactiveChat,state,props);case 20:case"end":return _context.stop()}}),_callee)})));return function prepareStartChat(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}(),setPreChatAndInitiateChat=function(){var _ref2=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee2(facadeChatSDK,dispatch,setAdapter,isProactiveChat,proactiveChatEnablePrechatState,state,props){var _props$preChatSurveyP,_props$preChatSurveyP2,_props$preChatSurveyP3,_props$controlProps,_state$domainStates,_state$domainStates$l,_state$domainStates$l2,_state$appStates2,parseToJson,preChatSurveyResponse,showPrechat,_state$domainStates2,_state$domainStates2$,_state$domainStates2$2,_state$domainStates2$3,_state$appStates,_state$domainStates3,_state$domainStates3$,_state$domainStates4,_state$domainStates4$,_TelemetryManager$Int,_state$domainStates5,_state$domainStates5$,_state$domainStates6,_state$domainStates6$,_TelemetryManager$Int2,optionalParams;return startChat_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if((null==state?void 0:state.appStates.conversationState)===ConversationState.Closed&&endChat_chatSDKStateCleanUp(facadeChatSDK.getChatSDK()),parseToJson=!1,null===(_props$preChatSurveyP=null==props||null===(_props$preChatSurveyP2=props.preChatSurveyPaneProps)||void 0===_props$preChatSurveyP2||null===(_props$preChatSurveyP3=_props$preChatSurveyP2.controlProps)||void 0===_props$preChatSurveyP3?void 0:_props$preChatSurveyP3.payload)||void 0===_props$preChatSurveyP){_context2.next=6;break}_context2.t0=_props$preChatSurveyP,_context2.next=9;break;case 6:return _context2.next=8,facadeChatSDK.getPreChatSurvey(parseToJson);case 8:_context2.t0=_context2.sent;case 9:return preChatSurveyResponse=_context2.t0,showPrechat=isProactiveChat?preChatSurveyResponse&&proactiveChatEnablePrechatState:preChatSurveyResponse&&!(null!=props&&null!==(_props$controlProps=props.controlProps)&&void 0!==_props$controlProps&&_props$controlProps.hidePreChatSurveyPane),_context2.next=13,shouldSetPreChatIfPersistentChat(facadeChatSDK,null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$l=_state$domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.msdyn_conversationmode,showPrechat);case 13:if(!(showPrechat=_context2.sent)){_context2.next=27;break}if(!("true"===(null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2||null===(_state$domainStates2$=_state$domainStates2.liveChatConfig)||void 0===_state$domainStates2$||null===(_state$domainStates2$2=_state$domainStates2$.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates2$2||null===(_state$domainStates2$3=_state$domainStates2$2.OutOfOperatingHours)||void 0===_state$domainStates2$3?void 0:_state$domainStates2$3.toString().toLowerCase()))){_context2.next=22;break}return(null==state?void 0:state.appStates.isMinimized)&&dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),_context2.abrupt("return");case 22:return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PrechatSurveyExpected}),dispatch({type:LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE,payload:preChatSurveyResponse}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Prechat}),void 0!==(null==state?void 0:state.appStates.isMinimized)&&!0!==(null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.isMinimized)||(dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.MaximizeChat,payload:{height:null==state||null===(_state$domainStates3=state.domainStates)||void 0===_state$domainStates3||null===(_state$domainStates3$=_state$domainStates3.widgetSize)||void 0===_state$domainStates3$?void 0:_state$domainStates3$.height,width:null==state||null===(_state$domainStates4=state.domainStates)||void 0===_state$domainStates4||null===(_state$domainStates4$=_state$domainStates4.widgetSize)||void 0===_state$domainStates4$?void 0:_state$domainStates4$.width,runtimeId:null==TelemetryManager||null===(_TelemetryManager$Int=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int?void 0:_TelemetryManager$Int.lcwRuntimeId}})),_context2.abrupt("return");case 27:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),void 0!==(null==state?void 0:state.appStates.isMinimized)&&!0!==(null==state||null===(_state$appStates2=state.appStates)||void 0===_state$appStates2?void 0:_state$appStates2.isMinimized)||(dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.MaximizeChat,payload:{height:null==state||null===(_state$domainStates5=state.domainStates)||void 0===_state$domainStates5||null===(_state$domainStates5$=_state$domainStates5.widgetSize)||void 0===_state$domainStates5$?void 0:_state$domainStates5$.height,width:null==state||null===(_state$domainStates6=state.domainStates)||void 0===_state$domainStates6||null===(_state$domainStates6$=_state$domainStates6.widgetSize)||void 0===_state$domainStates6$?void 0:_state$domainStates6$.width,runtimeId:null==TelemetryManager||null===(_TelemetryManager$Int2=TelemetryManager.InternalTelemetryData)||void 0===_TelemetryManager$Int2?void 0:_TelemetryManager$Int2.lcwRuntimeId}})),optionalParams={isProactiveChat:isProactiveChat},_context2.next=32,startChat_initStartChat(facadeChatSDK,dispatch,setAdapter,state,props,optionalParams);case 32:case"end":return _context2.stop()}}),_callee2)})));return function setPreChatAndInitiateChat(_x6,_x7,_x8,_x9,_x10,_x11,_x12){return _ref2.apply(this,arguments)}}(),startChat_initStartChat=function(){var _ref3=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee3(facadeChatSDK,dispatch,setAdapter,state,props,params,persistedState){var _state$domainStates7,_state$domainStates7$,_state$domainStates7$2,isStartChatSuccessful,persistentChatEnabled,_state$appStates3,_persistedState$domai,_persistedState$domai2,_persistedState$domai3,_persistedState$domai4,_persistedState$domai5,_window$Microsoft,_window$Microsoft$Dyn,_window$Microsoft$Dyn2,_window$Microsoft$Dyn3,defaultOptionalParams,startChatOptionalParams,startTime,liveChatContext;return startChat_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return isStartChatSuccessful=!1,persistentChatEnabled=liveChatConfigUtils_isPersistentChatEnabled(null==state||null===(_state$domainStates7=state.domainStates)||void 0===_state$domainStates7||null===(_state$domainStates7$=_state$domainStates7.liveChatConfig)||void 0===_state$domainStates7$||null===(_state$domainStates7$2=_state$domainStates7$.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates7$2?void 0:_state$domainStates7$2.msdyn_conversationmode),(null==state?void 0:state.appStates.conversationState)===ConversationState.Closed&&endChat_chatSDKStateCleanUp(facadeChatSDK.getChatSDK()),_context3.prev=3,(null==state||null===(_state$appStates3=state.appStates)||void 0===_state$appStates3?void 0:_state$appStates3.chatDisconnectEventReceived)&&dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!1}),TelemetryTimers.WidgetLoadTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.WidgetLoadStarted,Description:"Widget start chat started.",CustomProperties:{ConversationStage:ConversationStage.Initialization}}),(persistedState||null!=params&&params.liveChatContext)&&cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatRetrievedFromCache,payload:{chatId:null==persistedState||null===(_persistedState$domai=persistedState.domainStates)||void 0===_persistedState$domai||null===(_persistedState$domai2=_persistedState$domai.liveChatContext)||void 0===_persistedState$domai2||null===(_persistedState$domai3=_persistedState$domai2.chatToken)||void 0===_persistedState$domai3?void 0:_persistedState$domai3.chatId,requestId:null==persistedState||null===(_persistedState$domai4=persistedState.domainStates)||void 0===_persistedState$domai4||null===(_persistedState$domai5=_persistedState$domai4.liveChatContext)||void 0===_persistedState$domai5?void 0:_persistedState$domai5.requestId}}),_context3.prev=8,_context3.next=11,setCustomContextParams(state,props);case 11:return defaultOptionalParams={sendDefaultInitContext:!0,isProactiveChat:!(null==params||!params.isProactiveChat),portalContactId:null===(_window$Microsoft=window.Microsoft)||void 0===_window$Microsoft||null===(_window$Microsoft$Dyn=_window$Microsoft.Dynamic365)||void 0===_window$Microsoft$Dyn||null===(_window$Microsoft$Dyn2=_window$Microsoft$Dyn.Portal)||void 0===_window$Microsoft$Dyn2||null===(_window$Microsoft$Dyn3=_window$Microsoft$Dyn2.User)||void 0===_window$Microsoft$Dyn3?void 0:_window$Microsoft$Dyn3.contactId},startChatOptionalParams=Object.assign({},params,startChat_optionalParams,defaultOptionalParams),startTime=(new Date).getTime(),FirstMessageTrackerFromBot_createTrackingForFirstMessage(),_context3.next=17,facadeChatSDK.startChat(startChatOptionalParams);case 17:return startChatErrorHandler_logStartChatComplete(),isStartChatSuccessful=!0,_context3.next=21,createAdapterAndSubscribe(facadeChatSDK,dispatch,setAdapter,startTime,props);case 21:_context3.next=30;break;case 23:throw _context3.prev=23,_context3.t0=_context3.catch(8),utils_checkContactIdError(_context3.t0),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.StartChatMethodException,ExceptionDetails:{exception:"Failed to setup startChat: "+_context3.t0}}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:_context3.t0}}),isStartChatSuccessful=!1,_context3.t0;case 30:if(isStartChatSuccessful&&(ActivityStreamHandler_ActivityStreamHandler.uncork(),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Active})),!persistedState){_context3.next=36;break}return dispatch({type:LiveChatWidgetActionType.SET_WIDGET_STATE,payload:persistedState}),startChatErrorHandler_logWidgetLoadComplete(Constants.A.PersistedStateRetrievedMessage),setPostChatContextAndLoadSurvey(facadeChatSDK,dispatch,!0),_context3.abrupt("return");case 36:if(persistentChatEnabled){_context3.next=41;break}return _context3.next=39,null==facadeChatSDK?void 0:facadeChatSDK.getCurrentLiveChatContext();case 39:liveChatContext=_context3.sent,dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:liveChatContext});case 41:return startChatErrorHandler_logWidgetLoadComplete(),setPostChatContextAndLoadSurvey(facadeChatSDK,dispatch),_context3.next=45,updateTelemetryData(facadeChatSDK,dispatch);case 45:_context3.next=50;break;case 47:_context3.prev=47,_context3.t1=_context3.catch(3),startChatErrorHandler_handleStartChatError(dispatch,facadeChatSDK,props,_context3.t1,isStartChatSuccessful);case 50:return _context3.prev=50,startChat_optionalParams={},startChat_widgetInstanceId="",_context3.finish(50);case 54:case"end":return _context3.stop()}}),_callee3,null,[[3,47,50,54],[8,23]])})));return function initStartChat(_x13,_x14,_x15,_x16,_x17,_x18,_x19){return _ref3.apply(this,arguments)}}(),createAdapterAndSubscribe=function(){var _ref4=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee4(facadeChatSDK,dispatch,setAdapter,startTime,props){var newAdapter,chatToken,_newAdapter$activity$;return startChat_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,createAdapter(facadeChatSDK,props);case 2:return newAdapter=_context4.sent,setAdapter(newAdapter),_context4.next=6,null==facadeChatSDK?void 0:facadeChatSDK.getChatToken();case 6:chatToken=_context4.sent,dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:chatToken}),null!=chatToken&&chatToken.chatId&&null!=chatToken&&chatToken.visitorId&&(null==newAdapter||null===(_newAdapter$activity$=newAdapter.activity$)||void 0===_newAdapter$activity$||_newAdapter$activity$.subscribe(newMessageEventHandler_createOnNewAdapterActivityHandler(chatToken.chatId,chatToken.visitorId,startTime)));case 9:case"end":return _context4.stop()}}),_callee4)})));return function createAdapterAndSubscribe(_x20,_x21,_x22,_x23,_x24){return _ref4.apply(this,arguments)}}(),canConnectToExistingChat=function(){var _ref5=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee5(props,facadeChatSDK,state,dispatch,setAdapter){var _state$appStates4,_persistedState$domai6,_persistedState$appSt,persistedState,_persistedState$domai7,_optionalParams;return startChat_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(!0!==(null==state||null===(_state$appStates4=state.appStates)||void 0===_state$appStates4?void 0:_state$appStates4.hideStartChatButton)){_context5.next=2;break}return _context5.abrupt("return",!1);case 2:if(!(persistedState=utils_getStateFromCache(utils_getWidgetCacheIdfromProps(props)))||isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai6=persistedState.domainStates)||void 0===_persistedState$domai6?void 0:_persistedState$domai6.liveChatContext)||(null==persistedState||null===(_persistedState$appSt=persistedState.appStates)||void 0===_persistedState$appSt?void 0:_persistedState$appSt.conversationState)!==ConversationState.Active){_context5.next=9;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_optionalParams={liveChatContext:null==persistedState||null===(_persistedState$domai7=persistedState.domainStates)||void 0===_persistedState$domai7?void 0:_persistedState$domai7.liveChatContext},_context5.next=8,startChat_initStartChat(facadeChatSDK,dispatch,setAdapter,state,props,_optionalParams,persistedState);case 8:return _context5.abrupt("return",!0);case 9:return _context5.abrupt("return",!1);case 10:case"end":return _context5.stop()}}),_callee5)})));return function canConnectToExistingChat(_x25,_x26,_x27,_x28,_x29){return _ref5.apply(this,arguments)}}(),setCustomContextParams=function(){var _ref6=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee6(state,props){var _state$domainStates8,_persistedState$domai8,_persistedState$domai9,_state$domainStates9,persistedState,customContextLocal,customContextFromParent;return startChat_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(null==state||null===(_state$domainStates8=state.domainStates)||void 0===_state$domainStates8||!_state$domainStates8.customContext){_context6.next=3;break}return startChat_optionalParams=Object.assign({},startChat_optionalParams,{customContext:JSON.parse(JSON.stringify(null==state||null===(_state$domainStates9=state.domainStates)||void 0===_state$domainStates9?void 0:_state$domainStates9.customContext))}),_context6.abrupt("return");case 3:if(isNullOrEmptyString(startChat_widgetInstanceId)&&(startChat_widgetInstanceId=utils_getWidgetCacheIdfromProps(props)),persistedState=utils_getStateFromCache(startChat_widgetInstanceId),!(customContextLocal=null!==(_persistedState$domai8=null==persistedState||null===(_persistedState$domai9=persistedState.domainStates)||void 0===_persistedState$domai9?void 0:_persistedState$domai9.customContext)&&void 0!==_persistedState$domai8?_persistedState$domai8:null==props?void 0:props.initialCustomContext)){_context6.next=11;break}TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.SettingCustomContext,Description:"Setting custom context for unauthenticated chat"}),startChat_optionalParams=Object.assign({},startChat_optionalParams,{customContext:JSON.parse(JSON.stringify(customContextLocal))}),_context6.next=15;break;case 11:return _context6.next=13,getInitContextParamsForPopout();case 13:customContextFromParent=_context6.sent,isUndefinedOrEmpty(null==customContextFromParent?void 0:customContextFromParent.contextVariables)||(startChat_optionalParams=Object.assign({},startChat_optionalParams,{customContext:JSON.parse(JSON.stringify(customContextFromParent.contextVariables))}));case 15:case"end":return _context6.stop()}}),_callee6)})));return function setCustomContextParams(_x30,_x31){return _ref6.apply(this,arguments)}}(),canStartPopoutChat=function(){var _ref7=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee7(props){var _persistedState$domai10,_persistedState$appSt2,persistedState;return startChat_regeneratorRuntime().wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!1!==props.allowSdkChatSupport){_context7.next=2;break}return _context7.abrupt("return",!1);case 2:if(popoutWidgetInstanceId=utils_getWidgetCacheIdfromProps(props,!0),isNullOrEmptyString(popoutWidgetInstanceId)){_context7.next=8;break}if(!(persistedState=utils_getStateFromCache(popoutWidgetInstanceId))||isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai10=persistedState.domainStates)||void 0===_persistedState$domai10?void 0:_persistedState$domai10.liveChatContext)||(null==persistedState||null===(_persistedState$appSt2=persistedState.appStates)||void 0===_persistedState$appSt2?void 0:_persistedState$appSt2.conversationState)!==ConversationState.Active){_context7.next=8;break}return cjs.BroadcastService.postMessage({eventName:BroadcastEvent.InitiateStartChatInPopoutMode}),_context7.abrupt("return",!0);case 8:return _context7.abrupt("return",!1);case 9:case"end":return _context7.stop()}}),_callee7)})));return function canStartPopoutChat(_x32){return _ref7.apply(this,arguments)}}(),checkIfConversationStillValid=function(){var _ref8=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee8(facadeChatSDK,dispatch,state){var _state$domainStates10,_state$domainStates11,_state$domainStates12,_facadeChatSDK$getCha,requestIdFromCache,liveChatContext,conversationDetails,currentRequestId;return startChat_regeneratorRuntime().wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return requestIdFromCache=null===(_state$domainStates10=state.domainStates)||void 0===_state$domainStates10||null===(_state$domainStates11=_state$domainStates10.liveChatContext)||void 0===_state$domainStates11?void 0:_state$domainStates11.requestId,liveChatContext=null==state||null===(_state$domainStates12=state.domainStates)||void 0===_state$domainStates12?void 0:_state$domainStates12.liveChatContext,conversationDetails=void 0,currentRequestId=null!==(_facadeChatSDK$getCha=facadeChatSDK.getChatSDK().requestId)&&void 0!==_facadeChatSDK$getCha?_facadeChatSDK$getCha:"",dispatch({type:LiveChatWidgetActionType.SET_INITIAL_CHAT_SDK_REQUEST_ID,payload:currentRequestId}),_context8.prev=5,facadeChatSDK.getChatSDK().requestId=requestIdFromCache,_context8.next=9,getConversationDetailsCall(facadeChatSDK,liveChatContext);case 9:if(conversationDetails=_context8.sent,0!==Object.keys(conversationDetails).length&&!isNullOrUndefined(conversationDetails.state)&&conversationDetails.state!==Constants.m.Closed&&conversationDetails.state!==Constants.m.WrapUp){_context8.next=15;break}return dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0}),currentRequestId&&(facadeChatSDK.getChatSDK().requestId=currentRequestId),_context8.abrupt("return",!1);case 15:return _context8.abrupt("return",!0);case 18:return _context8.prev=18,_context8.t0=_context8.catch(5),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.GetConversationDetailsException,ExceptionDetails:{exception:"Conversation is not valid: "+_context8.t0}}),_context8.abrupt("return",!1);case 22:case"end":return _context8.stop()}}),_callee8,null,[[5,18]])})));return function checkIfConversationStillValid(_x33,_x34,_x35){return _ref8.apply(this,arguments)}}(),getInitContextParamsForPopout=function(){var _ref9=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee9(){return startChat_regeneratorRuntime().wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!window.opener){_context9.next=6;break}return _context9.next=3,getInitContextParamForPopoutFromOuterScope(window.opener);case 3:_context9.t0=_context9.sent,_context9.next=7;break;case 6:_context9.t0=null;case 7:return _context9.abrupt("return",_context9.t0);case 8:case"end":return _context9.stop()}}),_callee9)})));return function getInitContextParamsForPopout(){return _ref9.apply(this,arguments)}}(),getInitContextParamForPopoutFromOuterScope=function(){var _ref10=startChat_asyncToGenerator(startChat_regeneratorRuntime().mark((function _callee10(scope){var payload,waitPromiseResolve,waitPromise,getInitContextParamsFromParent;return startChat_regeneratorRuntime().wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return waitPromise=new Promise((function(res,rej){waitPromiseResolve=res,setTimeout((function(){return rej("Failed to find method in outer scope")}),5e3)})).catch((function(rej){return console.warn(rej)})),getInitContextParamsFromParent=function getInitContextParamsFromParent(e){e.data&&e.data.messageName==Constants.e.InitContextParamsResponse&&(payload=e.data.payload,waitPromiseResolve())},window.addEventListener("message",getInitContextParamsFromParent,!1),scope.postMessage({messageName:Constants.e.InitContextParamsRequest},"*"),_context10.next=6,waitPromise;case 6:return window.removeEventListener("message",getInitContextParamsFromParent,!1),_context10.abrupt("return",payload);case 8:case"end":return _context10.stop()}}),_callee10)})));return function getInitContextParamForPopoutFromOuterScope(_x36){return _ref10.apply(this,arguments)}}(),customEventHandler_customEventCallback=function customEventCallback(facadeChatSDK){return function(event){if(Constants.e.payload in event&&function isValidCustomEvent(payload){return!!(Constants.e.customEventName in payload&&payload.customEventName&&typeof payload.customEventName===Constants.e.String&&Constants.e.customEventValue in payload&&payload.customEventValue)}(event.payload)){var customEventPayload=event.payload;try{var customEventValueStr=function getCustomEventValue(customEventPayload){var returnVal="";try{returnVal=typeof customEventPayload.customEventValue===Constants.e.String?customEventPayload.customEventValue:JSON.stringify(customEventPayload.customEventValue)}catch(error){console.error(error)}return returnVal}(customEventPayload),customEventName=customEventPayload.customEventName,messageMeta={customEvent:Constants.e.true,customEventName:customEventName,customEventValue:customEventValueStr},messagePayload={content:"",tags:[Constants.e.Hidden],metadata:messageMeta,timestamp:new Date};facadeChatSDK.sendMessage(messagePayload),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.DEBUG,{Event:TelemetryEvent.CustomEventAction,Description:"Sent customEvent.",CustomProperties:{customEventName:customEventName,lengthCustomEventValue:customEventValueStr.length}})}catch(error){TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.CustomEventAction,Description:"Failed to process CustomEvent.",ExceptionDetails:{error:error}})}}}};function defaultCacheManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function defaultCacheManager_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function defaultCacheManager_createClass(Constructor,protoProps,staticProps){return protoProps&&defaultCacheManager_defineProperties(Constructor.prototype,protoProps),staticProps&&defaultCacheManager_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var defaultCacheManager=defaultCacheManager_createClass((function defaultCacheManager(){!function defaultCacheManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,defaultCacheManager)}));defaultCacheManager.InternalCache={};var defaultInMemoryDataStore_inMemoryDataStore=function inMemoryDataStore(){return{getData:function getData(key){if(defaultCacheManager.InternalCache&&defaultCacheManager.InternalCache[key])return defaultCacheManager.InternalCache[key]},setData:function setData(key,data){try{defaultCacheManager.InternalCache[key]=data}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.InMemoryDataStoreFailed,ExceptionDetails:error,Description:"Unable to set data in default in-memory cache."})}},removeData:function removeData(key){try{defaultCacheManager.InternalCache[key]={}}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.InMemoryDataStoreFailed,ExceptionDetails:error,Description:"Unable to remove data from default in-memory cache."})}}}},defaultClientDataStoreProvider_isCookieAllowed=function isCookieAllowed(){try{return localStorage,sessionStorage,!0}catch(error){return window.TPCWarningLogged||(console.warn("Third party cookies blocked."),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.ThirdPartyCookiesBlocked,Description:"Third party cookies are blocked. Cannot access local storage or session storage."}),window.TPCWarningLogged=!0),!1}},defaultClientDataStoreProvider_defaultClientDataStoreProvider=function defaultClientDataStoreProvider(){var cacheTtlinMins=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,storageType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Constants.v.localStorage,ttlInMs=0;return 0==ttlInMs&&(ttlInMs=60*cacheTtlinMins*1e3),{setData:function setData(key,data){if(defaultClientDataStoreProvider_isCookieAllowed())try{if(key){var item={data:data,expiry:(new Date).getTime()+ttlInMs},strItem=JSON.stringify(item);storageType===Constants.v.localStorage?localStorage.setItem(key,strItem):sessionStorage.setItem(key,strItem)}}catch(error){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.ClientDataStoreProviderFailed,ExceptionDetails:error,Description:"Unable to store data in localStorage."})}else{var dataToCache={key:key,data:data,type:storageType==Constants.v.localStorage?"localStorage":"sessionStorage"};parent.postMessage(dataToCache,"*")}},getData:function getData(key){if(!defaultClientDataStoreProvider_isCookieAllowed())return defaultInMemoryDataStore_inMemoryDataStore().getData(key);var item,itemInJson=void 0;return null!==(item=storageType===Constants.v.localStorage?localStorage.getItem(key):sessionStorage.getItem(key))?(itemInJson=JSON.parse(item),(new Date).getTime()>itemInJson.expiry?(localStorage.removeItem(key),null):itemInJson.data):void 0},removeData:function removeData(key){return defaultClientDataStoreProvider_isCookieAllowed()?key?storageType===Constants.v.localStorage?localStorage.removeItem(key):sessionStorage.removeItem(key):void 0:defaultInMemoryDataStore_inMemoryDataStore().removeData(key)}}},componentController_shouldShowChatButton=function shouldShowChatButton(state){var _state$appStates;return(state.appStates.isMinimized||state.appStates.conversationState===ConversationState.Closed)&&!1===(null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.hideStartChatButton)},componentController_shouldShowProactiveChatPane=function shouldShowProactiveChatPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.ProactiveChat},componentController_shouldShowHeader=function shouldShowHeader(state){return!state.appStates.isMinimized&&state.appStates.conversationState!==ConversationState.Closed&&state.appStates.conversationState!==ConversationState.ProactiveChat},shouldShowEmailTranscriptPane=function shouldShowEmailTranscriptPane(state){return state.uiStates.showEmailTranscriptPane},componentController_shouldShowWebChatContainer=function shouldShowWebChatContainer(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.Active||state.appStates.conversationState===ConversationState.InActive||state.appStates.conversationState===ConversationState.Postchat&&state.appStates.isConversationalSurveyEnabled&&state.appStates.isConversationalSurvey},componentController_shouldShowLoadingPane=function shouldShowLoadingPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.Loading},componentController_shouldShowStartChatErrorPane=function shouldShowStartChatErrorPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.Error},componentController_shouldShowReconnectChatPane=function shouldShowReconnectChatPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.ReconnectChat},componentController_shouldShowPostChatLoadingPane=function shouldShowPostChatLoadingPane(state){return!state.appStates.isMinimized&&state.appStates.conversationState===ConversationState.PostchatLoading},componentController_shouldShowOutOfOfficeHoursPane=function shouldShowOutOfOfficeHoursPane(state){return!state.appStates.isMinimized&&!0===state.appStates.outsideOperatingHours&&state.appStates.conversationState===ConversationState.OutOfOffice},componentController_shouldShowPreChatSurveyPane=function shouldShowPreChatSurveyPane(state){return state.appStates.conversationState===ConversationState.Prechat},shouldShowConfirmationPane=function shouldShowConfirmationPane(state){return state.uiStates.showConfirmationPane},componentController_shouldShowPostChatSurveyPane=function shouldShowPostChatSurveyPane(state){return state.appStates.conversationState===ConversationState.Postchat&&!state.appStates.isConversationalSurvey},componentController_shouldShowCallingContainer=function shouldShowCallingContainer(state){return state.appStates.conversationState===ConversationState.Active&&state.appStates.e2vvEnabled};function CallingContainerStateful_regeneratorRuntime(){CallingContainerStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function CallingContainerStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CallingContainerStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function CallingContainerStateful_slicedToArray(arr,i){return function CallingContainerStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CallingContainerStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function CallingContainerStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CallingContainerStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CallingContainerStateful_arrayLikeToArray(o,minLen)}(arr,i)||function CallingContainerStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CallingContainerStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var CallingContainerStateful_CallingContainerStateful=function CallingContainerStateful(props){var _props$controlProps,_props$controlProps2,_props$controlProps2$,_props$controlProps$c,_props$controlProps3,_props$controlProps3$,_props$controlProps3$2,_props$controlProps$c2,_props$controlProps4,_props$controlProps4$,_props$controlProps4$2,_props$controlProps5,callId,_useChatContextStore2=CallingContainerStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],facadeChatSDK=CallingContainerStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],voiceVideoCallingSdk=props.voiceVideoCallingSdk,resetCallingStates=function resetCallingStates(reset){reset&&(dispatch({type:LiveChatWidgetActionType.SHOW_CALLING_CONTAINER,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:!0}))};Object(react.useEffect)((function(){var init=function(){var _ref2=CallingContainerStateful_asyncToGenerator(CallingContainerStateful_regeneratorRuntime().mark((function _callee(){var _controlProps$current,_controlProps$current2,_controlProps$current3,_controlProps$current4,_facadeChatSDK$getCha;return CallingContainerStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,TelemetryHelper_TelemetryHelper.callId=callId,_context.next=4,voiceVideoCallingSdk.initialize({chatToken:state.domainStates.chatToken,selfVideoHTMLElementId:null===(_controlProps$current=controlProps.currentCallControlProps)||void 0===_controlProps$current||null===(_controlProps$current2=_controlProps$current.nonActionIds)||void 0===_controlProps$current2?void 0:_controlProps$current2.selfVideoTileId,remoteVideoHTMLElementId:null===(_controlProps$current3=controlProps.currentCallControlProps)||void 0===_controlProps$current3||null===(_controlProps$current4=_controlProps$current3.nonActionIds)||void 0===_controlProps$current4?void 0:_controlProps$current4.remoteVideoTileId,OCClient:null===(_facadeChatSDK$getCha=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha?void 0:_facadeChatSDK$getCha.OCClient});case 4:_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoSdkInitializeException,Description:"Failed to initialize VideoVoiceCalling Sdk:  "+_context.t0});case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])})));return function init(){return _ref2.apply(this,arguments)}}();init().then((function(){voiceVideoCallingSdk&&(TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VoiceVideoSdkInitialize,Description:"Initialize VideoVoiceCalling Sdk Success"},callId),voiceVideoCallingSdk.onCallAdded((function(){callId=voiceVideoCallingSdk.callId,TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallAdded},callId),dispatch({type:LiveChatWidgetActionType.SHOW_CALLING_CONTAINER,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!0})})),voiceVideoCallingSdk.onRemoteVideoStreamAdded((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.RemoteVideoStreamAdded},callId);var isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled(),isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled})})),voiceVideoCallingSdk.onLocalVideoStreamAdded((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.LocalVideoStreamAdded},callId);var isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled(),isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled();dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled})})),voiceVideoCallingSdk.onRemoteVideoStreamRemoved((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.RemoteVideoStreamRemoved},callId);var isRemoteVideoDisabled=!voiceVideoCallingSdk.isRemoteVideoEnabled(),isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();isRemoteVideoDisabled&&isLocalVideoDisabled&&dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_REMOTE_VIDEO,payload:isRemoteVideoDisabled})})),voiceVideoCallingSdk.onLocalVideoStreamRemoved((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.LocalVideoStreamRemoved},callId);var isLocalVideoDisabled=!voiceVideoCallingSdk.isLocalVideoEnabled();!voiceVideoCallingSdk.isRemoteVideoEnabled()&&isLocalVideoDisabled&&dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:isLocalVideoDisabled})})),voiceVideoCallingSdk.onCallDisconnected((function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallDisconnected},callId),resetCallingStates(!0)})),voiceVideoCallingSdk.addEventListener(TelemetryEvent.IncomingCallEnded,(function(){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.IncomingCallEnded},callId),resetCallingStates(!0)})))})),window.addEventListener("beforeunload",(function(){state.uiStates.isIncomingCall?null==voiceVideoCallingSdk||voiceVideoCallingSdk.rejectCall():null==voiceVideoCallingSdk||voiceVideoCallingSdk.stopCall(),null==voiceVideoCallingSdk||voiceVideoCallingSdk.close(),dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!1}),resetCallingStates(!0)}))}),[]);var controlProps=Object.assign({id:"oc-lcw-callingcontainer",dir:state.domainStates.globalDir,isIncomingCall:state.uiStates.isIncomingCall,hideCallingContainer:!!state.appStates.isMinimized},null==props?void 0:props.controlProps,{incomingCallControlProps:Object.assign({onDeclineCallClick:Object(react.useCallback)(CallingContainerStateful_asyncToGenerator(CallingContainerStateful_regeneratorRuntime().mark((function _callee2(){return CallingContainerStateful_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:try{voiceVideoCallingSdk.rejectCall(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallRejectClick},callId),resetCallingStates(!0)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.CallRejectClickException,ExceptionDetails:{exception:"Failed to reject call:  "+error}},callId)}case 1:case"end":return _context2.stop()}}),_callee2)}))),[voiceVideoCallingSdk]),onAudioCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.acceptCall({withVideo:!1}),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VoiceCallAcceptButtonClick},callId)}catch(err){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoAcceptCallException,ExceptionDetails:{exception:"Failed to accept call without video:  "+err}},callId)}dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_VIDEO_CALL,payload:!0})}),[]),onVideoCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.acceptCall({withVideo:!0}),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.VideoCallAcceptButtonClick},callId)}catch(err){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.VoiceVideoAcceptCallWithVideoException,ExceptionDetails:{exception:"Failed to accept call with video:  "+err}},callId)}dispatch({type:LiveChatWidgetActionType.SET_INCOMING_CALL,payload:!1}),dispatch({type:LiveChatWidgetActionType.DISABLE_LOCAL_VIDEO,payload:!1})}),[])},null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.incomingCallControlProps),currentCallControlProps:Object.assign({hideCallTimer:!0,onEndCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.stopCall(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.EndCallButtonClick},callId),resetCallingStates(!0)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndCallButtonClickException,ExceptionDetails:{exception:"Failed to End Call:  "+error}},callId)}}),[]),onMicCallClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.toggleMute(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.ToggleMuteButtonClick},callId)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.ToggleMuteButtonClickException,ExceptionDetails:{exception:"Failed to toggle mute button :  "+error}},callId)}}),[]),onVideoOffClick:Object(react.useCallback)((function(){try{voiceVideoCallingSdk.toggleLocalVideo(),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.ToggleCameraButtonClick},callId)}catch(error){TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.ToggleCameraButtonClickException,ExceptionDetails:{exception:"Failed to toggle video button :  "+error}},callId)}}),[]),nonActionIds:Object.assign({},null==props||null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2||null===(_props$controlProps2$=_props$controlProps2.currentCallControlProps)||void 0===_props$controlProps2$?void 0:_props$controlProps2$.nonActionIds,{selfVideoTileId:null!==(_props$controlProps$c=null==props||null===(_props$controlProps3=props.controlProps)||void 0===_props$controlProps3||null===(_props$controlProps3$=_props$controlProps3.currentCallControlProps)||void 0===_props$controlProps3$||null===(_props$controlProps3$2=_props$controlProps3$.nonActionIds)||void 0===_props$controlProps3$2?void 0:_props$controlProps3$2.selfVideoTileId)&&void 0!==_props$controlProps$c?_props$controlProps$c:"selfVideo",remoteVideoTileId:null!==(_props$controlProps$c2=null==props||null===(_props$controlProps4=props.controlProps)||void 0===_props$controlProps4||null===(_props$controlProps4$=_props$controlProps4.currentCallControlProps)||void 0===_props$controlProps4$||null===(_props$controlProps4$2=_props$controlProps4$.nonActionIds)||void 0===_props$controlProps4$2?void 0:_props$controlProps4$2.remoteVideoTileId)&&void 0!==_props$controlProps$c2?_props$controlProps$c2:"remoteVideo"}),videoCallDisabled:state.uiStates.disableVideoCall,selfVideoDisabled:state.uiStates.disableSelfVideo,remoteVideoDisabled:state.uiStates.disableRemoteVideo},null==props||null===(_props$controlProps5=props.controlProps)||void 0===_props$controlProps5?void 0:_props$controlProps5.currentCallControlProps)});return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:state.uiStates.showCallingPopup&&Object(jsx_runtime.jsx)(cjs.CallingContainer,{controlProps:controlProps,styleProps:null==props?void 0:props.styleProps})})},callingcontainerstateful_CallingContainerStateful=CallingContainerStateful_CallingContainerStateful;try{CallingContainerStateful_CallingContainerStateful.displayName="CallingContainerStateful",CallingContainerStateful_CallingContainerStateful.__docgenInfo={description:"",displayName:"CallingContainerStateful",props:{voiceVideoCallingSdk:{defaultValue:null,description:"",name:"voiceVideoCallingSdk",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/callingcontainerstateful/CallingContainerStateful.tsx#CallingContainerStateful"]={docgenInfo:CallingContainerStateful_CallingContainerStateful.__docgenInfo,name:"CallingContainerStateful",path:"src/components/callingcontainerstateful/CallingContainerStateful.tsx#CallingContainerStateful"})}catch(__react_docgen_typescript_loader_error){}var uiTimer,defaultOutOfOfficeChatButtonStyleProps={iconStyleProps:{backgroundColor:"#000000"},subtitleStyleProps:{margin:"0px 10px 0px 10px"}};function ChatButtonStateful_regeneratorRuntime(){ChatButtonStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ChatButtonStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ChatButtonStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ChatButtonStateful_slicedToArray(arr,i){return function ChatButtonStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ChatButtonStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ChatButtonStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChatButtonStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChatButtonStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ChatButtonStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChatButtonStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ChatButtonStateful_ChatButtonStateful=function ChatButtonStateful(props){var _buttonProps$controlP,_props$buttonProps,_props$buttonProps$co,_props$buttonProps2,_props$buttonProps2$c,_outOfOfficeButtonPro,_outOfOfficeButtonPro2,_props$buttonProps3,_props$buttonProps3$c;Object(react.useEffect)((function(){uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXLCWChatButtonLoadingStart,Description:"Chat button loading started",CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]);var _useChatContextStore2=ChatButtonStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],buttonProps=props.buttonProps,outOfOfficeButtonProps=props.outOfOfficeButtonProps,startChat=props.startChat,_useState2=ChatButtonStateful_slicedToArray(Object(react.useState)((function(){return state.appStates.conversationState===ConversationState.Closed&&state.appStates.outsideOperatingHours})),2),outOfOperatingHours=_useState2[0],setOutOfOperatingHours=_useState2[1],ref=Object(react.useRef)((function(){}));ref.current=ChatButtonStateful_asyncToGenerator(ChatButtonStateful_regeneratorRuntime().mark((function _callee(){return ChatButtonStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonClicked,Description:"Chat button click action started",CustomProperties:{ConversationStage:ConversationStage.Initialization}}),!state.appStates.isMinimized){_context.next=9;break}if(dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0}),state.appStates.conversationState!==ConversationState.Closed){_context.next=7;break}return _context.next=7,startChat();case 7:_context.next=11;break;case 9:return _context.next=11,startChat();case 11:TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonActionCompleted,Description:"Chat button action completed",CustomProperties:{ConversationStage:ConversationStage.Initialization}});case 12:case"end":return _context.stop()}}),_callee)})));var outOfOfficeStyleProps=Object.assign({},defaultOutOfOfficeChatButtonStyleProps,null==outOfOfficeButtonProps?void 0:outOfOfficeButtonProps.styleProps),controlProps=Object.assign({id:"oc-lcw-chat-button",dir:state.domainStates.globalDir,titleText:"Let's Chat!",subtitleText:"We're online.",hideNotificationBubble:!0===(null==buttonProps||null===(_buttonProps$controlP=buttonProps.controlProps)||void 0===_buttonProps$controlP?void 0:_buttonProps$controlP.hideNotificationBubble)||!1===state.appStates.isMinimized,unreadMessageCount:state.appStates.unreadMessageCount?state.appStates.unreadMessageCount>Constants.e.maximumUnreadMessageCount?null===(_props$buttonProps=props.buttonProps)||void 0===_props$buttonProps||null===(_props$buttonProps$co=_props$buttonProps.controlProps)||void 0===_props$buttonProps$co?void 0:_props$buttonProps$co.largeUnreadMessageString:state.appStates.unreadMessageCount.toString():"0",unreadMessageString:null===(_props$buttonProps2=props.buttonProps)||void 0===_props$buttonProps2||null===(_props$buttonProps2$c=_props$buttonProps2.controlProps)||void 0===_props$buttonProps2$c?void 0:_props$buttonProps2$c.unreadMessageString,onClick:function onClick(){return ref.current()}},null==buttonProps?void 0:buttonProps.controlProps),outOfOfficeControlProps=Object.assign({id:"oc-lcw-chat-button",dir:state.domainStates.globalDir,titleText:(null==outOfOfficeButtonProps||null===(_outOfOfficeButtonPro=outOfOfficeButtonProps.controlProps)||void 0===_outOfOfficeButtonPro?void 0:_outOfOfficeButtonPro.titleText)||"We're Offline",subtitleText:(null==outOfOfficeButtonProps||null===(_outOfOfficeButtonPro2=outOfOfficeButtonProps.controlProps)||void 0===_outOfOfficeButtonPro2?void 0:_outOfOfficeButtonPro2.subtitleText)||"No agents available",unreadMessageString:null===(_props$buttonProps3=props.buttonProps)||void 0===_props$buttonProps3||null===(_props$buttonProps3$c=_props$buttonProps3.controlProps)||void 0===_props$buttonProps3$c?void 0:_props$buttonProps3$c.unreadMessageString,onClick:function onClick(){state.appStates.isMinimized&&dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice})}},null==outOfOfficeButtonProps?void 0:outOfOfficeButtonProps.controlProps);return Object(react.useEffect)((function(){var _controlProps$id;(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWChatButtonShow,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed}),state.uiStates.focusChatButton)?setFocusOnElement(document.getElementById(null!==(_controlProps$id=null==controlProps?void 0:controlProps.id)&&void 0!==_controlProps$id?_controlProps$id:"oc-lcw-chat-button")):dispatch({type:LiveChatWidgetActionType.SET_FOCUS_CHAT_BUTTON,payload:!0});TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXLCWChatButtonLoadingCompleted,Description:"Chat button loading completed",ElapsedTimeInMilliseconds:uiTimer.milliSecondsElapsed,CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]),Object(react.useEffect)((function(){if(state.appStates.conversationState===ConversationState.Closed){var isOutsideOperatingHours=state.appStates.outsideOperatingHours;setOutOfOperatingHours(isOutsideOperatingHours)}else outOfOperatingHours&&setOutOfOperatingHours(!1)}),[state.appStates.conversationState,state.appStates.outsideOperatingHours,state.appStates.isMinimized]),Object(jsx_runtime.jsx)(cjs.ChatButton,{componentOverrides:null==buttonProps?void 0:buttonProps.componentOverrides,controlProps:outOfOperatingHours?outOfOfficeControlProps:controlProps,styleProps:outOfOperatingHours?outOfOfficeStyleProps:null==buttonProps?void 0:buttonProps.styleProps})};ChatButtonStateful_ChatButtonStateful.displayName="ChatButtonStateful";var chatbuttonstateful_ChatButtonStateful=ChatButtonStateful_ChatButtonStateful;try{ChatButtonStateful_ChatButtonStateful.displayName="ChatButtonStateful",ChatButtonStateful_ChatButtonStateful.__docgenInfo={description:"",displayName:"ChatButtonStateful",props:{buttonProps:{defaultValue:null,description:"buttonProps: Props for regular chat Button usage\nThese props are used for all regular usages of chat button excluding special scenarios",name:"buttonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeButtonProps:{defaultValue:null,description:"outOfOfficeButtonProps: Props for Out of Office chat Button usage\nThese props are used for styling and control of chat Button during Out Of Office actions",name:"outOfOfficeButtonProps",required:!1,type:{name:"IChatButtonProps"}},startChat:{defaultValue:null,description:"startChat: Internal Prop injected for triggering start of a chat using chatSDK",name:"startChat",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/chatbuttonstateful/ChatButtonStateful.tsx#ChatButtonStateful"]={docgenInfo:ChatButtonStateful_ChatButtonStateful.__docgenInfo,name:"ChatButtonStateful",path:"src/components/chatbuttonstateful/ChatButtonStateful.tsx#ChatButtonStateful"})}catch(__react_docgen_typescript_loader_error){}var ConfirmationPaneStateful_uiTimer,DimLayer_DimLayer=function DimLayer(_ref){var defaultDimLayerStyles={position:"absolute",borderRadius:"inherit",width:"100%",height:"100%",zIndex:100,backgroundColor:"rgba(0, 0, 0, "+_ref.brightness+")"};return Object(jsx_runtime.jsx)("div",{id:"oc-lcw-dim-layer",style:defaultDimLayerStyles})};DimLayer_DimLayer.displayName="DimLayer";try{DimLayer_DimLayer.displayName="DimLayer",DimLayer_DimLayer.__docgenInfo={description:"",displayName:"DimLayer",props:{brightness:{defaultValue:null,description:"",name:"brightness",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/dimlayer/DimLayer.tsx#DimLayer"]={docgenInfo:DimLayer_DimLayer.__docgenInfo,name:"DimLayer",path:"src/components/dimlayer/DimLayer.tsx#DimLayer"})}catch(__react_docgen_typescript_loader_error){}function ConfirmationPaneStateful_regeneratorRuntime(){ConfirmationPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ConfirmationPaneStateful_slicedToArray(arr,i){return function ConfirmationPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ConfirmationPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ConfirmationPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ConfirmationPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ConfirmationPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ConfirmationPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConfirmationPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ConfirmationPaneStateful_ConfirmationPaneStateful=function ConfirmationPaneStateful(props){var _controlProps$brightn;Object(react.useEffect)((function(){ConfirmationPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXConfirmationPaneStart})}),[]);var _onConfirm,initialTabIndexMap=new Map,elements=[],_useChatContextStore2=ConfirmationPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],controlProps=Object.assign({id:"oc-lcw-confirmation-pane",dir:state.domainStates.globalDir,onConfirm:(_onConfirm=function ConfirmationPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ConfirmationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ConfirmationPaneStateful_regeneratorRuntime().mark((function _callee(){return ConfirmationPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationConfirmButtonClicked,Description:"Confirmation pane Confirm button clicked"}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONFIRMATION_STATE,payload:Constants.d.Ok}),setTabIndices(elements,initialTabIndexMap,!0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedByCustomer,Description:"Conversation is ended by customer."});case 5:case"end":return _context.stop()}}),_callee)}))),function onConfirm(){return _onConfirm.apply(this,arguments)}),onCancel:function onCancel(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationCancelButtonClicked,Description:"Confirmation pane Cancel button clicked."}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONFIRMATION_STATE,payload:Constants.d.Cancel});var previousFocusedElementId=state.appStates.previousElementIdOnFocusBeforeModalOpen;previousFocusedElementId?(setFocusOnElement("#"+previousFocusedElementId),dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:null})):setFocusOnSendBox(),setTabIndices(elements,initialTabIndexMap,!0)}},null==props?void 0:props.controlProps);return Object(react.useEffect)((function(){utils_preventFocusToMoveOutOfElement(controlProps.id);var focusableElements=findAllFocusableElement("#"+controlProps.id);requestAnimationFrame((function(){focusableElements&&focusableElements.length>0&&focusableElements[0]&&focusableElements[0].focus({preventScroll:!0})})),elements=findParentFocusableElementsWithoutChildContainer(controlProps.id),setTabIndices(elements,initialTabIndexMap,!1),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ConfirmationPaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXConfirmationPaneCompleted,ElapsedTimeInMilliseconds:ConfirmationPaneStateful_uiTimer.milliSecondsElapsed})}),[]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(DimLayer_DimLayer,{brightness:null!==(_controlProps$brightn=null==controlProps?void 0:controlProps.brightnessValueOnDim)&&void 0!==_controlProps$brightn?_controlProps$brightn:"0.2"}),Object(jsx_runtime.jsx)(cjs.ConfirmationPane,{componentOverrides:null==props?void 0:props.componentOverrides,controlProps:controlProps,styleProps:null==props?void 0:props.styleProps})]})},confirmationpanestateful_ConfirmationPaneStateful=ConfirmationPaneStateful_ConfirmationPaneStateful;try{ConfirmationPaneStateful_ConfirmationPaneStateful.displayName="ConfirmationPaneStateful",ConfirmationPaneStateful_ConfirmationPaneStateful.__docgenInfo={description:"",displayName:"ConfirmationPaneStateful",props:{setPostChatContext:{defaultValue:null,description:"setPostChatContext: Internal Prop injected for setting Post Chat Context",name:"setPostChatContext",required:!0,type:{name:"() => Promise<void>"}},prepareEndChat:{defaultValue:null,description:"prepareEndChat: Internal Prop injected for checking PostChat contexts and trigerring end of chat\n@param adapter : The chat adapter for the live chat session\n@param state : The chat state where the conversation is currently in",name:"prepareEndChat",required:!0,type:{name:"() => Promise<void>"}},confirmationPaneLocalizedTexts:{defaultValue:null,description:"confirmationPaneLocalizedTexts: Internal Prop injected for setting localized texts",name:"confirmationPaneLocalizedTexts",required:!1,type:{name:"IConfirmationPaneLocalizedTexts"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/confirmationpanestateful/ConfirmationPaneStateful.tsx#ConfirmationPaneStateful"]={docgenInfo:ConfirmationPaneStateful_ConfirmationPaneStateful.__docgenInfo,name:"ConfirmationPaneStateful",path:"src/components/confirmationpanestateful/ConfirmationPaneStateful.tsx#ConfirmationPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var DraggableEventNames,DraggableEventReceiver_DraggableEventReceiver=function DraggableEventReceiver(props){return Object(react.useEffect)((function(){var listener=function listener(event){var data=event.data;data.channel&&props.channel&&data.channel===props.channel&&props.onEvent(data)};return window.addEventListener("message",listener),function(){window.removeEventListener("message",listener)}}),[props]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ",props.children," "]})},draggable_DraggableEventReceiver=DraggableEventReceiver_DraggableEventReceiver;try{__function.displayName="DraggableEventReceiver",__function.__docgenInfo={description:"Component which would listen to DraggableEvent, update the component position or react accordingly.",displayName:"DraggableEventReceiver",props:{channel:{defaultValue:null,description:"Unique channel name to send/receive draggable events to prevent event collisions",name:"channel",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"React nodes children",name:"children",required:!0,type:{name:"ReactNode"}},onEvent:{defaultValue:null,description:"Event handler on receiving draggable events\n@param event Draggable events\n@returns",name:"onEvent",required:!0,type:{name:"(event: IDraggableEvent) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/draggable/DraggableEventReceiver.tsx#DraggableEventReceiver"]={docgenInfo:DraggableEventReceiver_DraggableEventReceiver.__docgenInfo,name:"DraggableEventReceiver",path:"src/components/draggable/DraggableEventReceiver.tsx#DraggableEventReceiver"})}catch(__react_docgen_typescript_loader_error){}!function(DraggableEventNames){DraggableEventNames.DragStart="DragStart",DraggableEventNames.Dragging="Dragging",DraggableEventNames.DragEnd="DragEnd"}(DraggableEventNames||(DraggableEventNames={}));var draggable_DraggableEventNames=DraggableEventNames;function DraggableChatWidget_slicedToArray(arr,i){return function DraggableChatWidget_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DraggableChatWidget_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function DraggableChatWidget_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DraggableChatWidget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DraggableChatWidget_arrayLikeToArray(o,minLen)}(arr,i)||function DraggableChatWidget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DraggableChatWidget_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EmailTranscriptPaneStateful_uiTimer,DraggableChatWidget_DraggableChatWidget=function DraggableChatWidget(props){var _props$channel,state=DraggableChatWidget_slicedToArray(hooks_useChatContextStore(),1)[0],_useState2=DraggableChatWidget_slicedToArray(Object(react.useState)({offsetLeft:0,offsetTop:0}),2),initialPosition=_useState2[0],setInitialPosition=_useState2[1],_useState4=DraggableChatWidget_slicedToArray(Object(react.useState)(void 0),2),cachedPosition=_useState4[0],setCachedPosition=_useState4[1],_useState6=DraggableChatWidget_slicedToArray(Object(react.useState)({offsetLeft:0,offsetTop:0}),2),position=_useState6[0],setPosition=_useState6[1],_useState8=DraggableChatWidget_slicedToArray(Object(react.useState)({left:0,top:0}),2),delta=_useState8[0],setDelta=_useState8[1],repositionElement=function repositionElement(draggableElement,offsetLeft,offsetTop){draggableElement.style.left=offsetLeft+"px",draggableElement.style.top=offsetTop+"px"},calculateOffsetsWithinViewport=Object(react.useCallback)((function(id,offset,delta){var draggableElement=document.getElementById(id);if(!isNullOrUndefined(draggableElement)){var positionRelativeToViewport=draggableElement.getBoundingClientRect();if(!(isNullOrUndefined(positionRelativeToViewport)||isNullOrUndefined(offset.offsetLeft)||isNullOrUndefined(offset.offsetTop))){var offsetLeft=offset.offsetLeft,offsetTop=offset.offsetTop;positionRelativeToViewport.width>window.innerWidth||positionRelativeToViewport.height>window.innerHeight||(positionRelativeToViewport.x<0&&(offsetLeft=0-delta.left),positionRelativeToViewport.y<0&&(offsetTop=0-delta.top),positionRelativeToViewport.x+positionRelativeToViewport.width>window.innerWidth&&(offsetLeft=window.innerWidth-positionRelativeToViewport.width-delta.left),positionRelativeToViewport.y+positionRelativeToViewport.height>window.innerHeight&&(offsetTop=window.innerHeight-positionRelativeToViewport.height-delta.top),repositionElement(draggableElement,offsetLeft,offsetTop),setPosition({offsetLeft:offsetLeft,offsetTop:offsetTop}))}}}),[]),resetPosition=Object(react.useCallback)((function(targetPosition){calculateOffsetsWithinViewport(props.elementId,targetPosition,delta)}),[delta]);Object(react.useEffect)((function(){if(!0!==props.disabled){var calculateOffsets=function calculateOffsets(){var draggableElement=document.getElementById(props.elementId);if(!isNullOrUndefined(draggableElement)){var offsetLeft=draggableElement.offsetLeft,offsetTop=draggableElement.offsetTop,positionRelativeToViewport=draggableElement.getBoundingClientRect(),left=positionRelativeToViewport.left-offsetLeft,top=positionRelativeToViewport.top-offsetTop;setDelta({left:left,top:top}),calculateOffsetsWithinViewport(props.elementId,{offsetLeft:offsetLeft,offsetTop:offsetTop},{left:left,top:top})}};return calculateOffsets(),function cacheInitialPosition(){var draggableElement=document.getElementById(props.elementId);if(!isNullOrUndefined(draggableElement)){var offsetLeft=draggableElement.offsetLeft,offsetTop=draggableElement.offsetTop;setInitialPosition({offsetLeft:offsetLeft,offsetTop:offsetTop})}}(),window.addEventListener("resize",calculateOffsets),function(){window.removeEventListener("resize",calculateOffsets)}}}),[props.disabled]),Object(react.useEffect)((function(){if(!0!==props.disabled)if(state.appStates.conversationState==ConversationState.Closed)resetPosition(initialPosition);else if(state.appStates.isMinimized){var draggableElement=document.getElementById(props.elementId);if(isNullOrUndefined(draggableElement))return;var offsetLeft=draggableElement.offsetLeft,offsetTop=draggableElement.offsetTop;cachedPosition||setCachedPosition({offsetLeft:offsetLeft,offsetTop:offsetTop}),resetPosition(initialPosition)}else isNullOrUndefined(state.appStates.isMinimized)||state.appStates.isMinimized||cachedPosition&&(resetPosition(cachedPosition),setCachedPosition(void 0))}),[props.disabled,state.appStates.isMinimized,state.appStates.conversationState,initialPosition,cachedPosition]);var onEvent=Object(react.useCallback)((function(event){if(event.eventName===draggable_DraggableEventNames.Dragging&&event.offset){var offsetLeft=position.offsetLeft+event.offset.x,offsetTop=position.offsetTop+event.offset.y,draggableElement=document.getElementById(props.elementId);if(isNullOrUndefined(draggableElement))return;repositionElement(draggableElement,offsetLeft,offsetTop),setPosition({offsetLeft:offsetLeft,offsetTop:offsetTop}),calculateOffsetsWithinViewport(props.elementId,{offsetLeft:offsetLeft,offsetTop:offsetTop},delta)}}),[position,delta]);return!0===props.disabled?Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:props.children}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsx)(draggable_DraggableEventReceiver,{channel:null!==(_props$channel=props.channel)&&void 0!==_props$channel?_props$channel:"lcw",onEvent:onEvent,children:props.children})})},draggable_DraggableChatWidget=DraggableChatWidget_DraggableChatWidget;try{__function.displayName="DraggableChatWidget",__function.__docgenInfo={description:"",displayName:"DraggableChatWidget",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},channel:{defaultValue:null,description:"",name:"channel",required:!1,type:{name:"string"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/draggable/DraggableChatWidget.tsx#DraggableChatWidget"]={docgenInfo:DraggableChatWidget_DraggableChatWidget.__docgenInfo,name:"DraggableChatWidget",path:"src/components/draggable/DraggableChatWidget.tsx#DraggableChatWidget"})}catch(__react_docgen_typescript_loader_error){}function EmailTranscriptPaneStateful_regeneratorRuntime(){EmailTranscriptPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EmailTranscriptPaneStateful_slicedToArray(arr,i){return function EmailTranscriptPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EmailTranscriptPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function EmailTranscriptPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EmailTranscriptPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EmailTranscriptPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function EmailTranscriptPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EmailTranscriptPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var EmailTranscriptPaneStateful_EmailTranscriptPaneStateful=function EmailTranscriptPaneStateful(props){var _props$controlProps$i,_props$controlProps,_controlProps$brightn;Object(react.useEffect)((function(){EmailTranscriptPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXEmailTranscriptPaneStart})}),[]);var initialTabIndexMap=new Map,elements=[],_useChatContextStore2=EmailTranscriptPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],facadeChatSDK=EmailTranscriptPaneStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],_useState2=EmailTranscriptPaneStateful_slicedToArray(Object(react.useState)(""),2),initialEmail=_useState2[0],setInitialEmail=_useState2[1],closeEmailTranscriptPane=function closeEmailTranscriptPane(){dispatch({type:LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE,payload:!1});var previousFocusedElementId=state.appStates.previousElementIdOnFocusBeforeModalOpen;previousFocusedElementId?setFocusOnElement("#"+previousFocusedElementId):setFocusOnSendBox(),dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:null}),setTabIndices(elements,initialTabIndexMap,!0)},onSend=Object(react.useCallback)(function(){var _ref=function EmailTranscriptPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EmailTranscriptPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(EmailTranscriptPaneStateful_regeneratorRuntime().mark((function _callee(email){var _state$domainStates,_props$attachmentMess,liveChatContext,chatTranscriptBody,_state$domainStates$m,_state$domainStates2,_state$domainStates2$,_state$domainStates$m2,_state$domainStates3,_state$domainStates3$,_props$bannerMessageO,message;return EmailTranscriptPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return liveChatContext=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.liveChatContext,closeEmailTranscriptPane(),chatTranscriptBody={emailAddress:email,attachmentMessage:null!==(_props$attachmentMess=null==props?void 0:props.attachmentMessage)&&void 0!==_props$attachmentMess?_props$attachmentMess:"The following attachment was uploaded during the conversation:"},_context.prev=3,_context.next=6,null==facadeChatSDK?void 0:facadeChatSDK.emailLiveChatTranscript(chatTranscriptBody,{liveChatContext:liveChatContext});case 6:NotificationHandler_NotificationHandler.notifySuccess(NotificationScenarios.EmailAddressSaved,null!==(_state$domainStates$m=null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2||null===(_state$domainStates2$=_state$domainStates2.middlewareLocalizedTexts)||void 0===_state$domainStates2$?void 0:_state$domainStates2$.MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_SUCCESS)&&void 0!==_state$domainStates$m?_state$domainStates$m:null==defaultMiddlewareLocalizedTexts?void 0:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_SUCCESS),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptSent,Description:"Transcript sent to email successfully."}),_context.next=15;break;case 10:_context.prev=10,_context.t0=_context.catch(3),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.EmailTranscriptFailed,Description:"Email transcript failed.",ExceptionDetails:{exception:_context.t0}}),message=formatTemplateString(null!==(_state$domainStates$m2=null==state||null===(_state$domainStates3=state.domainStates)||void 0===_state$domainStates3||null===(_state$domainStates3$=_state$domainStates3.middlewareLocalizedTexts)||void 0===_state$domainStates3$?void 0:_state$domainStates3$.MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_ERROR)&&void 0!==_state$domainStates$m2?_state$domainStates$m2:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_FILE_EMAIL_ADDRESS_RECORDED_ERROR,[email]),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.EmailTranscriptError,null!==(_props$bannerMessageO=null==props?void 0:props.bannerMessageOnError)&&void 0!==_props$bannerMessageO?_props$bannerMessageO:message);case 15:case"end":return _context.stop()}}),_callee,null,[[3,10]])})));return function(_x2){return _ref.apply(this,arguments)}}(),[props.attachmentMessage,props.bannerMessageOnError,facadeChatSDK,state.domainStates.liveChatContext]),controlProps=Object.assign({id:"oclcw-emailTranscriptDialogContainer",dir:state.domainStates.globalDir,onSend:onSend,onCancel:function onCancel(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptCancelButtonClicked,Description:"Email Transcript cancel button clicked."}),closeEmailTranscriptPane()},checkInput:function checkInput(input){return new RegExp(Constants.t.EmailRegex).test(input)}},props.controlProps,{inputInitialText:null!==(_props$controlProps$i=null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.inputInitialText)&&void 0!==_props$controlProps$i?_props$controlProps$i:initialEmail});return Object(react.useEffect)((function(){utils_preventFocusToMoveOutOfElement(controlProps.id);var focusableElements=findAllFocusableElement("#"+controlProps.id);focusableElements&&focusableElements[0].focus(),elements=findParentFocusableElementsWithoutChildContainer(controlProps.id),setTabIndices(elements,initialTabIndexMap,!1),setInitialEmail(state.appStates.preChatResponseEmail),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXEmailTranscriptPaneCompleted,ElapsedTimeInMilliseconds:EmailTranscriptPaneStateful_uiTimer.milliSecondsElapsed})}),[initialEmail]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(DimLayer_DimLayer,{brightness:null!==(_controlProps$brightn=null==controlProps?void 0:controlProps.brightnessValueOnDim)&&void 0!==_controlProps$brightn?_controlProps$brightn:"0.2"}),Object(jsx_runtime.jsx)(cjs.InputValidationPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:props.styleProps})]})},emailtranscriptpanestateful_EmailTranscriptPaneStateful=EmailTranscriptPaneStateful_EmailTranscriptPaneStateful;try{EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.displayName="EmailTranscriptPaneStateful",EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.__docgenInfo={description:"",displayName:"EmailTranscriptPaneStateful",props:{attachmentMessage:{defaultValue:null,description:"Attachment message prefix for email chat transcript",name:"attachmentMessage",required:!1,type:{name:"string"}},bannerMessageOnError:{defaultValue:null,description:"Error message shown when failed to send transcript to email",name:"bannerMessageOnError",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/emailtranscriptpanestateful/EmailTranscriptPaneStateful.tsx#EmailTranscriptPaneStateful"]={docgenInfo:EmailTranscriptPaneStateful_EmailTranscriptPaneStateful.__docgenInfo,name:"EmailTranscriptPaneStateful",path:"src/components/emailtranscriptpanestateful/EmailTranscriptPaneStateful.tsx#EmailTranscriptPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function DraggableEventEmitter_slicedToArray(arr,i){return function DraggableEventEmitter_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function DraggableEventEmitter_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function DraggableEventEmitter_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DraggableEventEmitter_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DraggableEventEmitter_arrayLikeToArray(o,minLen)}(arr,i)||function DraggableEventEmitter_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DraggableEventEmitter_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DraggableEventEmitter_DraggableEventEmitter=function DraggableEventEmitter(props){var _useState2=DraggableEventEmitter_slicedToArray(Object(react.useState)(!1),2),initialized=_useState2[0],setInitialized=_useState2[1],postMessage=Object(react.useCallback)((function(data){var _props$targetWindow;(null!==(_props$targetWindow=props.targetWindow)&&void 0!==_props$targetWindow?_props$targetWindow:window).postMessage(data,"*")}),[props.targetWindow]),dragStart=Object(react.useCallback)((function(event){postMessage({channel:props.channel,eventName:draggable_DraggableEventNames.DragStart});var cursor={x:event.screenX,y:event.screenY},dragging=function dragging(event){event.preventDefault();var newX=event.screenX,newY=event.screenY,offset={x:newX-cursor.x,y:newY-cursor.y};cursor=Object.assign({},cursor,{x:newX,y:newY}),postMessage({channel:props.channel,eventName:draggable_DraggableEventNames.Dragging,offset:offset})};document.addEventListener("mousemove",dragging),document.addEventListener("mouseup",(function dragEnd(){postMessage({channel:props.channel,eventName:draggable_DraggableEventNames.DragEnd}),document.removeEventListener("mousemove",dragging),document.removeEventListener("mouseup",dragEnd)}))}),[props.channel]);return Object(react.useEffect)((function(){if(!initialized&&props.elementId){var element=document.getElementById(props.elementId);null==element||element.addEventListener("mousedown",dragStart),setInitialized(!0)}}),[dragStart,props.elementId,initialized]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ",props.children," "]})},draggable_DraggableEventEmitter=DraggableEventEmitter_DraggableEventEmitter;try{__function.displayName="DraggableEventEmitter",__function.__docgenInfo={description:"Trigger component which would send IDraggableEvent to the receiver to update the draggable component position",displayName:"DraggableEventEmitter",props:{channel:{defaultValue:null,description:"Unique channel name to send/receive draggable events to prevent event collisions",name:"channel",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"React nodes children",name:"children",required:!0,type:{name:"ReactNode"}},elementId:{defaultValue:null,description:"HTML element ID of the trigger element to send IDraggableEvent to update the draggable element position",name:"elementId",required:!0,type:{name:"string"}},targetWindow:{defaultValue:null,description:"Target window to post IDraggableEvent messages",name:"targetWindow",required:!1,type:{name:"Window"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/draggable/DraggableEventEmitter.tsx#DraggableEventEmitter"]={docgenInfo:DraggableEventEmitter_DraggableEventEmitter.__docgenInfo,name:"DraggableEventEmitter",path:"src/components/draggable/DraggableEventEmitter.tsx#DraggableEventEmitter"})}catch(__react_docgen_typescript_loader_error){}var HeaderStateful_uiTimer,defaultOutOfOfficeHeaderStyleProps={generalStyleProps:{borderRadius:"0px",backgroundColor:"#000000",height:"40px"},titleStyleProps:{margin:"0 0 0 10px",color:"White"}},hooks_useChatAdapterStore=function useChatAdapterStore(){var adapter=Object(react.useContext)(ChatAdapterStore);if(!adapter)throw new Error("This hook can only be used on component that is descendants of <ChatAdapterStore.Provider>");return adapter};function HeaderStateful_regeneratorRuntime(){HeaderStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function HeaderStateful_slicedToArray(arr,i){return function HeaderStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function HeaderStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function HeaderStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return HeaderStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HeaderStateful_arrayLikeToArray(o,minLen)}(arr,i)||function HeaderStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HeaderStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var HeaderStateful_HeaderStateful=function HeaderStateful(props){var _state$domainStates,_headerProps$controlP,_headerProps$controlP2,_headerProps$controlP3,_outOfOfficeHeaderPro,_state$domainStates3,_props$draggableEvent,_props$draggableEvent2;Object(react.useEffect)((function(){HeaderStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXHeaderStart})}),[]);var _onCloseClick,_useChatContextStore2=HeaderStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],adapter=HeaderStateful_slicedToArray(hooks_useChatAdapterStore(),1)[0],headerProps=props.headerProps,outOfOfficeHeaderProps=props.outOfOfficeHeaderProps,endChat=props.endChat,_useState2=HeaderStateful_slicedToArray(Object(react.useState)((function(){return state.appStates.conversationState===ConversationState.Closed&&state.appStates.outsideOperatingHours})),2),outOfOperatingHours=_useState2[0],setOutOfOperatingHours=_useState2[1],outOfOfficeStyleProps=Object.assign({},defaultOutOfOfficeHeaderStyleProps,null==outOfOfficeHeaderProps?void 0:outOfOfficeHeaderProps.styleProps),localConfirmationPaneState=Object(react.useRef)(null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.confirmationState),controlProps=Object.assign({id:"oc-lcw-header",dir:state.domainStates.globalDir,onMinimizeClick:function onMinimizeClick(){TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.HeaderMinimizeButtonClicked,Description:"Header Minimize action started."}),dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:0}),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.MinimizeChatActionCompleted,Description:"Header Minimize action completed."})},onCloseClick:(_onCloseClick=function HeaderStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){HeaderStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(HeaderStateful_regeneratorRuntime().mark((function _callee(){var _props$headerProps$co,_props$headerProps,_props$headerProps$co2,_props$headerProps$co3,closeButtonId;return HeaderStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.HeaderCloseButtonClicked,Description:"Header Close action started.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}),localConfirmationPaneState.current===Constants.d.Ok){_context.next=5;break}dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!0}),_context.next=10;break;case 5:return _context.next=10,endChat(adapter,!0,!1,!0);case 10:TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.CloseChatActionCompleted,Description:"Header Close action completed.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}),(closeButtonId=null!==(_props$headerProps$co=null===(_props$headerProps=props.headerProps)||void 0===_props$headerProps||null===(_props$headerProps$co2=_props$headerProps.controlProps)||void 0===_props$headerProps$co2||null===(_props$headerProps$co3=_props$headerProps$co2.closeButtonProps)||void 0===_props$headerProps$co3?void 0:_props$headerProps$co3.id)&&void 0!==_props$headerProps$co?_props$headerProps$co:controlProps.id+"-close-button")&&dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:closeButtonId});case 13:case"end":return _context.stop()}}),_callee)}))),function onCloseClick(){return _onCloseClick.apply(this,arguments)})},null==headerProps?void 0:headerProps.controlProps,{hideTitle:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.startChatFailed||state.appStates.conversationState===ConversationState.PostchatLoading||(null==headerProps||null===(_headerProps$controlP=headerProps.controlProps)||void 0===_headerProps$controlP?void 0:_headerProps$controlP.hideTitle),hideIcon:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.startChatFailed||state.appStates.conversationState===ConversationState.PostchatLoading||(null==headerProps||null===(_headerProps$controlP2=headerProps.controlProps)||void 0===_headerProps$controlP2?void 0:_headerProps$controlP2.hideIcon),hideCloseButton:state.appStates.conversationState===ConversationState.Loading&&!state.appStates.startChatFailed||state.appStates.conversationState===ConversationState.PostchatLoading||state.appStates.conversationState===ConversationState.Prechat||state.appStates.conversationState===ConversationState.ReconnectChat||(null==headerProps||null===(_headerProps$controlP3=headerProps.controlProps)||void 0===_headerProps$controlP3?void 0:_headerProps$controlP3.hideCloseButton)}),outOfOfficeControlProps=Object.assign({id:"oc-lcw-header",dir:state.domainStates.globalDir,headerTitleProps:{text:"We're Offline"},onMinimizeClick:function onMinimizeClick(){TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.HeaderMinimizeButtonClicked,Description:"Header Minimize action started."}),dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0}),state.appStates.conversationState!==ConversationState.Closed&&dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.MinimizeChatActionCompleted,Description:"Header Minimize action completed."})}},null==outOfOfficeHeaderProps?void 0:outOfOfficeHeaderProps.controlProps,{hideCloseButton:state.appStates.conversationState===ConversationState.OutOfOffice||(null==outOfOfficeHeaderProps||null===(_outOfOfficeHeaderPro=outOfOfficeHeaderProps.controlProps)||void 0===_outOfOfficeHeaderPro?void 0:_outOfOfficeHeaderPro.hideCloseButton)});Object(react.useEffect)((function(){var _state$domainStates2;localConfirmationPaneState.current=null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.confirmationState}),[null==state||null===(_state$domainStates3=state.domainStates)||void 0===_state$domainStates3?void 0:_state$domainStates3.confirmationState]);var draggableEventEmitterProps={channel:null!==(_props$draggableEvent=props.draggableEventChannel)&&void 0!==_props$draggableEvent?_props$draggableEvent:"lcw",elementId:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeControlProps.id:controlProps.id,targetWindow:null!==(_props$draggableEvent2=props.draggableEventEmitterTargetWindow)&&void 0!==_props$draggableEvent2?_props$draggableEvent2:window};if(Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXHeaderCompleted,ElapsedTimeInMilliseconds:HeaderStateful_uiTimer.milliSecondsElapsed})}),[]),Object(react.useEffect)((function(){if(state.appStates.conversationState===ConversationState.Closed){var isOutsideOperatingHours=state.appStates.outsideOperatingHours;setOutOfOperatingHours(isOutsideOperatingHours)}}),[state.appStates.conversationState,state.appStates.outsideOperatingHours]),!0===props.draggable){var _generalStyleProps,styleProps=outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeStyleProps:null==headerProps?void 0:headerProps.styleProps,selectors=Object.assign({},(null==styleProps||null===(_generalStyleProps=styleProps.generalStyleProps)||void 0===_generalStyleProps?void 0:_generalStyleProps.selectors)||{},{"&:hover":{cursor:"move"}}),generalStyleProps=Object.assign({},null==styleProps?void 0:styleProps.generalStyleProps,{selectors:selectors}),draggableStyleProps=Object.assign({},styleProps,{generalStyleProps:generalStyleProps});return Object(jsx_runtime.jsx)(draggable_DraggableEventEmitter,Object.assign({},draggableEventEmitterProps,{children:Object(jsx_runtime.jsx)(cjs.Header,{componentOverrides:null==headerProps?void 0:headerProps.componentOverrides,controlProps:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeControlProps:controlProps,styleProps:draggableStyleProps})}))}return Object(jsx_runtime.jsx)(cjs.Header,{componentOverrides:null==headerProps?void 0:headerProps.componentOverrides,controlProps:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeControlProps:controlProps,styleProps:outOfOperatingHours||state.appStates.conversationState===ConversationState.OutOfOffice?outOfOfficeStyleProps:null==headerProps?void 0:headerProps.styleProps})};HeaderStateful_HeaderStateful.displayName="HeaderStateful";var headerstateful_HeaderStateful=HeaderStateful_HeaderStateful;try{HeaderStateful_HeaderStateful.displayName="HeaderStateful",HeaderStateful_HeaderStateful.__docgenInfo={description:"",displayName:"HeaderStateful",props:{headerProps:{defaultValue:null,description:"headerProps: Props for regular Header usage\nThese props are used for all regular usages of Header excluding special scenarios",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"outOfOfficeHeaderProps: Props for Out of Office Header usage\nThese props are used for styling and control of Header during Out Of Office actions",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},endChat:{defaultValue:null,description:"endChat: Internal Prop injected for triggering end of a chat using chatSDK\n@param adapter : The chat adapter for the live chat session\n@param skipEndChatSDK : If set to true endchat will skip chatSDK endChat call\n@param skipCloseChat : If set to true endchat will skip closing the live chat instance\n@param postMessageToOtherTab : If set to true endchat will send a message to other tabs(multi-tabs)",name:"endChat",required:!0,type:{name:"(adapter: any, skipEndChatSDK?: boolean | undefined, skipCloseChat?: boolean | undefined, postMessageToOtherTab?: boolean | undefined) => Promise<void>"}},draggableEventChannel:{defaultValue:null,description:"draggableEventChannel: Channel to send/receive draggable events",name:"draggableEventChannel",required:!1,type:{name:"string"}},draggableEventEmitterTargetWindow:{defaultValue:null,description:"draggableEventEmitterTargetWindow: Target window to post IDraggableEvent messages",name:"draggableEventEmitterTargetWindow",required:!1,type:{name:"Window"}},draggable:{defaultValue:null,description:"draggable: Whether the header is draggable",name:"draggable",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/headerstateful/HeaderStateful.tsx#HeaderStateful"]={docgenInfo:HeaderStateful_HeaderStateful.__docgenInfo,name:"HeaderStateful",path:"src/components/headerstateful/HeaderStateful.tsx#HeaderStateful"})}catch(__react_docgen_typescript_loader_error){}var LoadingPaneStateful_uiTimer,defaultGeneralLoadingPaneStyleProps={position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#315FA2"},Image_types=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.types.js"),ArchiveIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDQ4IDIwNDgiIHdpZHRoPSIxMnB4IiBoZWlnaHQ9IjEycHgiPg0KPHBhdGggZD0iTTE3OTIgMHEyNyAwIDUwIDEwdDQwIDI3IDI4IDQxIDEwIDUwdjQ4MHEwIDQ1LTkgNzd0LTI0IDU4LTMxIDQ2LTMxIDQwLTIzIDQ0LTEwIDU1djk5MnEwIDI3LTEwIDUwdC0yNyA0MC00MSAyOC01MCAxMEgyNTZWMGgxNTM2ek02NDAgMTI4djM4NGgyNTZWMTI4SDY0MHptMTAyNCA4MDBxMC0zMS05LTU0dC0yNC00NC0zMS00MS0zMS00NS0yMy01OC0xMC03OFYxMjhoLTUxMnY1MTJINzY4djEyOEg2NDBWNjQwSDUxMlYxMjhIMzg0djE3OTJoMzg0di0xMjhoMTI4djEyOGg3NjhWOTI4em0xMjgtODAwaC0xMjh2NDgwcTAgMjQgNCA0MnQxMyAzMyAyMCAyOSAyNyAzMnExNS0xNyAyNi0zMXQyMC0zMCAxMy0zMyA1LTQyVjEyOHpNNjQwIDg5NmgxMjh2MTI4SDY0MFY4OTZ6bTAgMjU2aDEyOHYxMjhINjQwdi0xMjh6bTAgMjU2aDEyOHYxMjhINjQwdi0xMjh6bTEyOCAyNTZ2MTI4SDY0MHYtMTI4aDEyOHptMC03NjhWNzY4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4em0wIDI1NnYtMTI4aDEyOHYxMjhINzY4eiIgLz4NCjwvc3ZnPg==",AudioIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xNzkyIDE0MDhxMCA2Mi0yOSAxMDl0LTc2IDgwLTEwNCA1MC0xMTEgMTdxLTU0IDAtMTExLTE3dC0xMDMtNDktNzYtODAtMzAtMTEwcTAtNjEgMjktMTA5dDc2LTgwIDEwNC01MCAxMTEtMTdxNTEgMCAxMDAgMTJ0OTIgMzlWMjI2TDc2OCA0NTB2MTIxNHEwIDYyLTI5IDEwOXQtNzYgODAtMTA0IDUwLTExMSAxN3EtNTQgMC0xMTEtMTd0LTEwMy00OS03Ni04MC0zMC0xMTBxMC02MSAyOS0xMDl0NzYtODAgMTA0LTUwIDExMS0xN3E1MSAwIDEwMCAxMnQ5MiAzOVYzNTBMMTc5MiA2MnYxMzQ2eiIgLz4NCjwvc3ZnPg==",BlankIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik01NDkgMGgxMjQzdjE3NTVsLTI5MyAyOTNIMjU2VjI5M0w1NDkgMHptMTExNSAxNzAxVjEyOEg2MDNMMzg0IDM0N3YxNTczaDEwNjFsMjE5LTIxOXoiIC8+DQo8L3N2Zz4=",ExcelIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMjYxIDE0MjRoMTg5cTItNCAxMi0yM3QyNS00NSAyOS01NSAyOS01MyAyMy00MSAxMC0xN3EyNyA1OSA2MCAxMTh0NjUgMTE2aDE4N2wtMjA5LTMzOSAyMDUtMzMzSDcwN3EtMzEgNTctNjAgMTE0dC02MyAxMTJxLTI5LTU3LTU3LTExM3QtNTctMTEzSDI3OWwxOTkgMzM1LTIxNyAzMzd6bTM3OSA0OTZoMTI4MFY1MTJoLTI1NnEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTBWMTI4SDY0MHYzODRoMzk3cTI0IDAgNDQgOXQzNyAyNSAyNSAzNiA5IDQ1djkyMnEwIDI0LTkgNDR0LTI1IDM3LTM2IDI1LTQ1IDlINjQwdjI1NnptNjQwLTEwMjRWNzY4aDUxMnYxMjhoLTUxMnptMCAyNTZ2LTEyOGg1MTJ2MTI4aC01MTJ6bTAgMjU2di0xMjhoNTEydjEyOGgtNTEyeiIgLz4NCjwvc3ZnPg==",ImageIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yNTYgMTkyMGgxNTM2djEyOEgxMjhWMGgxMTE1bDU0OSA1NDl2OTFoLTY0MFYxMjhIMjU2djE3OTJ6TTEyODAgNTEyaDI5M2wtMjkzLTI5M3YyOTN6bTc2OCAyNTZ2MTAyNEg2NDBWNzY4aDE0MDh6TTc2OCA4OTZ2NDIxbDMyMC0zMTkgNDE2IDQxNiAxNjAtMTYwIDI1NiAyNTZWODk2SDc2OHptOTg3IDc2OGgxMzlsLTIzMC0yMzAtNjkgNzAgMTYwIDE2MHptLTk4NyAwaDgwNWwtNDg1LTQ4Ni0zMjAgMzIxdjE2NXptOTYwLTUxMnEtMjYgMC00NS0xOXQtMTktNDVxMC0yNiAxOS00NXQ0NS0xOXEyNiAwIDQ1IDE5dDE5IDQ1cTAgMjYtMTkgNDV0LTQ1IDE5eiIgLz4NCjwvc3ZnPg==",PowerpointIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMzY4IDc1MnY2NzJoMTUwdi0yMjZoMTAwcTUyIDAgOTctMTV0NzgtNDYgNTMtNzIgMjAtOTdxMC01Ni0xNy05N3QtNTAtNjctNzYtMzktOTctMTNIMzY4em0xNTUyIDExNjhWNTEyaC0yNTZxLTI3IDAtNTAtMTB0LTQwLTI3LTI4LTQxLTEwLTUwVjEyOEg2NDB2Mzg0aDM5N3EyNCAwIDQ0IDl0MzcgMjUgMjUgMzYgOSA0NXY5MjJxMCAyNC05IDQ0dC0yNSAzNy0zNiAyNS00NSA5SDY0MHYyNTZoMTI4MHpNMTUzNiA2NDBxNzkgMCAxNDkgMzB0MTIyIDgyIDgzIDEyMyAzMCAxNDloLTM4NFY2NDB6bS0xMjggMTI4djM4NGgzODRxMCA4MC0zMCAxNDl0LTgyIDEyMi0xMjMgODMtMTQ5IDMwcS0zMyAwLTY1LTZ0LTYzLTE4Vjc5MnEzMS0xMSA2My0xN3Q2NS03em0tODA0IDMwMGgtODZWODgzaDkwcTQ3IDAgNzQgMjB0MjcgNzBxMCA1Mi0yOCA3M3QtNzcgMjJ6IiAvPg0KPC9zdmc+",VideoIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0wIDI1NmgyMDQ4djE0MDhIMFYyNTZ6bTI1NiAxMjgwdi0xMjhIMTI4djEyOGgxMjh6bTAtMjU2di0xMjhIMTI4djEyOGgxMjh6bTAtMjU2Vjg5NkgxMjh2MTI4aDEyOHptMC0yNTZWNjQwSDEyOHYxMjhoMTI4em0wLTI1NlYzODRIMTI4djEyOGgxMjh6bTE0MDggNzg2VjM4NEgzODR2ODIzbDQxMS01NDkgNzQxIDg3OC0zMjktNTU4IDEzNy0xMzcgMzIwIDQ1N3ptMjU2IDIzOHYtMTI4aC0xMjh2MTI4aDEyOHptMC0yNTZ2LTEyOGgtMTI4djEyOGgxMjh6bTAtMjU2Vjg5NmgtMTI4djEyOGgxMjh6bTAtMjU2VjY0MGgtMTI4djEyOGgxMjh6bTAtMjU2VjM4NGgtMTI4djEyOGgxMjh6IiAvPg0KPC9zdmc+",VisioIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNNDkzIDE0MjRoMTYzbDI1NS02NzJINzQ1bC0xNDcgNDI3cS01IDE2LTEwIDMxdC0xMSAzMXEtNDEtMTIzLTgyLTI0NHQtODQtMjQ1SDI0MWwyNDggNjYyIDQgMTB6bTE0NyA0OTZoMTI4MFY1MTJoLTI1NnEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTBWMTI4SDY0MHYzODRoMzk3cTI0IDAgNDQgOXQzNyAyNSAyNSAzNiA5IDQ1djkyMnEwIDI0LTkgNDR0LTI1IDM3LTM2IDI1LTQ1IDlINjQwdjI1NnptOTYwLTEyODBsMTkyIDE5Mi0xMjggMTI4djQ0OGgtMjU2djEyOGgtMTI4di0zODRoMTI4djEyOGgxMjhWOTYwbC0xMjgtMTI4IDE5Mi0xOTJ6IiAvPg0KPC9zdmc+",WordIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0yMDQ4IDQ3NXYxNDQ1cTAgMjctMTAgNTB0LTI3IDQwLTQxIDI4LTUwIDEwSDY0MHEtMjcgMC01MC0xMHQtNDAtMjctMjgtNDEtMTAtNTB2LTI1NkgxMTVxLTI0IDAtNDQtOXQtMzctMjUtMjUtMzYtOS00NVY2MjdxMC0yNCA5LTQ0dDI1LTM3IDM2LTI1IDQ1LTloMzk3VjEyOHEwLTI3IDEwLTUwdDI3LTQwIDQxLTI4IDUwLTEwaDkzM3EyNiAwIDQ5IDl0NDIgMjhsMzQ3IDM0N3ExOCAxOCAyNyA0MXQxMCA1MHptLTM4NC0yNTZ2MTY1aDE2NWwtMTY1LTE2NXpNMzIwIDE0MjRoMTYxcTItOCA5LTQzdDE4LTgzIDIxLTEwMyAyMi0xMDEgMTYtNzYgOC0zMWw3IDMwcTcgMzAgMTcgNzd0MjMgMTAwIDIzIDEwMyAxOSA4NCAxMCA0M2gxNjBsMTQ4LTY3Mkg4MzRsLTgwIDQzOC0xMDAtNDM4SDUwMmwtOTYgNDQwLTg2LTQ0MEgxNzBsMTUwIDY3MnptMzIwIDQ5NmgxMjgwVjUxMmgtMjU2cS0yNyAwLTUwLTEwdC00MC0yNy0yOC00MS0xMC01MFYxMjhINjQwdjM4NGgzOTdxMjQgMCA0NCA5dDM3IDI1IDI1IDM2IDkgNDV2OTIycTAgMjQtOSA0NHQtMjUgMzctMzYgMjUtNDUgOUg2NDB2MjU2em02NDAtMTAyNFY3NjhoNTEydjEyOGgtNTEyem0wIDI1NnYtMTI4aDUxMnYxMjhoLTUxMnptMCAyNTZ2LTEyOGg1MTJ2MTI4aC01MTJ6IiAvPg0KPC9zdmc+",AlertIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMC8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQnPjxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjQgMjQiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHBhdGggZD0iTTEzLDE3aC0ydi0yaDJWMTd6IE0xMywxM2gtMlY3aDJWMTN6Ii8+PGc+PHBhdGggZD0iTTEyLDRjNC40LDAsOCwzLjYsOCw4cy0zLjYsOC04LDhzLTgtMy42LTgtOFM3LjYsNCwxMiw0IE0xMiwyQzYuNSwyLDIsNi41LDIsMTJjMCw1LjUsNC41LDEwLDEwLDEwczEwLTQuNSwxMC0xMCAgIEMyMiw2LjUsMTcuNSwyLDEyLDJMMTIsMnoiLz48L2c+PC9zdmc+",errorUILoadingPaneStyleProps={generalStyleProps:{position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#FFFFFF"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:2,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:3,alignSelf:"auto"},iconStyleProps:{display:"flex",order:1,alignSelf:"auto",backgroundColor:"#FFFFFF",boxShadow:"#FFFFFF 0px 0px 0px 0px",margin:"0px 0px 0px 0px"},iconImageProps:{src:AlertIcon,imageFit:Image_types.b.center,width:"86px",height:"86px",shouldFadeIn:!1,shouldStartVisible:!0}};function useWindowDimensions_slicedToArray(arr,i){return function useWindowDimensions_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useWindowDimensions_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useWindowDimensions_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useWindowDimensions_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useWindowDimensions_arrayLikeToArray(o,minLen)}(arr,i)||function useWindowDimensions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useWindowDimensions_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getWindowDimensions(){var _window=window;return{width:_window.innerWidth,height:_window.innerHeight}}function useWindowDimensions(){var delay=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,_useState2=useWindowDimensions_slicedToArray(Object(react.useState)(getWindowDimensions()),2),windowDimensions=_useState2[0],setWindowDimensions=_useState2[1],debouncedHandleResize=function useDebounce(func){var delay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,timer=Object(react.useRef)();return Object(react.useEffect)((function(){return function(){timer.current&&clearTimeout(timer.current)}}),[]),function debouncedFunction(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var newTimer=setTimeout((function(){func.apply(void 0,args)}),delay);clearTimeout(timer.current),timer.current=newTimer}}((function handleResize(){return setWindowDimensions(getWindowDimensions())}),delay);return Object(react.useEffect)((function(){return window.addEventListener("resize",debouncedHandleResize),function(){return window.removeEventListener("resize",debouncedHandleResize)}}),[]),windowDimensions}function LoadingPaneStateful_slicedToArray(arr,i){return function LoadingPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LoadingPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LoadingPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LoadingPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LoadingPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function LoadingPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LoadingPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LoadingPaneStateful_LoadingPaneStateful=function LoadingPaneStateful(props){var _loadingPaneProps$sty,_startChatErrorPanePr,_startChatErrorPanePr2,_startChatErrorPanePr3,_startChatErrorPanePr4;Object(react.useEffect)((function(){LoadingPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXLoadingPaneStart})}),[]);var state=LoadingPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],loadingPaneProps=props.loadingPaneProps,startChatErrorPaneProps=props.startChatErrorPaneProps,generalLoadingPaneStyleProps=Object.assign({},defaultGeneralLoadingPaneStyleProps,null==loadingPaneProps||null===(_loadingPaneProps$sty=loadingPaneProps.styleProps)||void 0===_loadingPaneProps$sty?void 0:_loadingPaneProps$sty.generalStyleProps),loadingPaneStyleProps=Object.assign({},null==loadingPaneProps?void 0:loadingPaneProps.styleProps,{generalStyleProps:generalLoadingPaneStyleProps}),errorUIStyleProps=Object.assign({},errorUILoadingPaneStyleProps),loadingPaneControlProps=Object.assign({id:"oc-lcw-loading-pane",dir:state.domainStates.globalDir},null==loadingPaneProps?void 0:loadingPaneProps.controlProps),errorUIControlProps=Object.assign({},null==loadingPaneProps?void 0:loadingPaneProps.controlProps,{id:"oc-lcw-alert-pane",dir:state.domainStates.globalDir,titleText:null!==(_startChatErrorPanePr=null==startChatErrorPaneProps||null===(_startChatErrorPanePr2=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr2?void 0:_startChatErrorPanePr2.titleText)&&void 0!==_startChatErrorPanePr?_startChatErrorPanePr:"We are unable to load chat at this time.",subtitleText:null!==(_startChatErrorPanePr3=null==startChatErrorPaneProps||null===(_startChatErrorPanePr4=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr4?void 0:_startChatErrorPanePr4.subtitleText)&&void 0!==_startChatErrorPanePr3?_startChatErrorPanePr3:"Please try again later.",hideSpinner:!0,hideSpinnerText:!0}),_useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);return firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.LoadingPaneLoaded,Description:"Loading pane loaded."}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXLoadingPaneCompleted,ElapsedTimeInMilliseconds:LoadingPaneStateful_uiTimer.milliSecondsElapsed}),function(){TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.LoadingPaneUnloaded,Description:"Loading pane unmount."})}}),[]),Object(jsx_runtime.jsx)(cjs.LoadingPane,{componentOverrides:null==loadingPaneProps?void 0:loadingPaneProps.componentOverrides,controlProps:state.appStates.startChatFailed?errorUIControlProps:loadingPaneControlProps,styleProps:state.appStates.startChatFailed?errorUIStyleProps:loadingPaneStyleProps,windowWidth:width,windowHeight:height})};LoadingPaneStateful_LoadingPaneStateful.displayName="LoadingPaneStateful";var loadingpanestateful_LoadingPaneStateful=LoadingPaneStateful_LoadingPaneStateful;try{LoadingPaneStateful_LoadingPaneStateful.displayName="LoadingPaneStateful",LoadingPaneStateful_LoadingPaneStateful.__docgenInfo={description:"",displayName:"LoadingPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/loadingpanestateful/LoadingPaneStateful.tsx#LoadingPaneStateful"]={docgenInfo:LoadingPaneStateful_LoadingPaneStateful.__docgenInfo,name:"LoadingPaneStateful",path:"src/components/loadingpanestateful/LoadingPaneStateful.tsx#LoadingPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var OOOHPaneStateful_uiTimer,defaultGeneralStyleProps={position:"initial",width:"100%",height:"100%",borderRadius:"0px 0px 4px 4px",borderWidth:"0px",backgroundColor:"#FFFFFF"},purify=(__webpack_require__("./node_modules/core-js/modules/es.array.some.js"),__webpack_require__("./node_modules/dompurify/dist/purify.js")),purify_default=__webpack_require__.n(purify);function OOOHPaneStateful_slicedToArray(arr,i){return function OOOHPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function OOOHPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function OOOHPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return OOOHPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OOOHPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function OOOHPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OOOHPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var OOOHPaneStateful_OutOfOfficeHoursPaneStateful=function OutOfOfficeHoursPaneStateful(props){var _props$styleProps;Object(react.useEffect)((function(){OOOHPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXOutOfOfficeHoursPaneStart,Description:"Out of office hours pane loading started."})}),[]);var state=OOOHPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],generalStyleProps=Object.assign({},defaultGeneralStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps),styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-outofofficehours-pane",dir:state.domainStates.globalDir},props.controlProps);if(Object(react.useEffect)((function(){if(null!==state.domainStates.widgetElementId&&void 0!==state.domainStates.widgetElementId&&""!==state.domainStates.widgetElementId.trim()){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus()}TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.OutOfOfficePaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXOutOfOfficeHoursPaneCompleted,Description:"Out of office hours pane loading completed.",ElapsedTimeInMilliseconds:OOOHPaneStateful_uiTimer.milliSecondsElapsed})}),[]),null!=controlProps&&controlProps.titleText){var _detectAndCleanXSS=function detectAndCleanXSS(text){var isXSSDetected=[/javascript\s*:/gi,/vbscript\s*:/gi,/on\w+\s*=/gi,/<\s*script/gi,/expression\s*\(/gi,/url\s*\(/gi,/style\s*=.*position\s*:\s*fixed/gi,/style\s*=.*position\s*:\s*absolute/gi,/data\s*:\s*text\s*\/\s*html/gi,/#.*\\"/gi,/&gt;.*&lt;/gi].some((function(pattern){return pattern.test(text)}));return{cleanText:purify_default.a.sanitize(text,{ALLOWED_TAGS:[],ALLOWED_ATTR:[],KEEP_CONTENT:!0,ALLOW_DATA_ATTR:!1,ALLOW_UNKNOWN_PROTOCOLS:!1,SANITIZE_DOM:!0,FORCE_BODY:!1}),isXSSDetected:isXSSDetected}}(controlProps.titleText),cleanText=_detectAndCleanXSS.cleanText;_detectAndCleanXSS.isXSSDetected?(TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.WARN,{Event:TelemetryEvent.XSSTextDetected,Description:"Potential XSS attempt detected in titleText",CustomProperties:{originalText:controlProps.titleText.substring(0,100),cleanedText:cleanText.substring(0,100)}}),controlProps.titleText="Thanks for contacting us. You have reached us outside of our operating hours. An agent will respond when we open."):controlProps.titleText=cleanText}return Object(jsx_runtime.jsx)(cjs.OutOfOfficeHoursPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:styleProps})};OOOHPaneStateful_OutOfOfficeHoursPaneStateful.displayName="OutOfOfficeHoursPaneStateful";var ooohpanestateful_OOOHPaneStateful=OOOHPaneStateful_OutOfOfficeHoursPaneStateful;try{OOOHPaneStateful_OutOfOfficeHoursPaneStateful.displayName="OutOfOfficeHoursPaneStateful",OOOHPaneStateful_OutOfOfficeHoursPaneStateful.__docgenInfo={description:"",displayName:"OutOfOfficeHoursPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ooohpanestateful/OOOHPaneStateful.tsx#OutOfOfficeHoursPaneStateful"]={docgenInfo:OOOHPaneStateful_OutOfOfficeHoursPaneStateful.__docgenInfo,name:"OutOfOfficeHoursPaneStateful",path:"src/components/ooohpanestateful/OOOHPaneStateful.tsx#OutOfOfficeHoursPaneStateful"})}catch(__react_docgen_typescript_loader_error){}try{__function.displayName="OOOHPaneStateful",__function.__docgenInfo={description:"",displayName:"OOOHPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ooohpanestateful/OOOHPaneStateful.tsx#OOOHPaneStateful"]={docgenInfo:OOOHPaneStateful.__docgenInfo,name:"OOOHPaneStateful",path:"src/components/ooohpanestateful/OOOHPaneStateful.tsx#OOOHPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var PostChatLoadingPaneStateful_uiTimer,defaultGeneralPostChatLoadingPaneStyleProps={position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#315FA2"};function PostChatLoadingPaneStateful_slicedToArray(arr,i){return function PostChatLoadingPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PostChatLoadingPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PostChatLoadingPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PostChatLoadingPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PostChatLoadingPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PostChatLoadingPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PostChatLoadingPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PostChatLoadingPaneStateful_PostChatLoadingPaneStateful=function PostChatLoadingPaneStateful(props){var _props$styleProps;Object(react.useEffect)((function(){PostChatLoadingPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXPostChatLoadingPaneStart})}),[]);var state=PostChatLoadingPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],generalStyleProps=Object.assign({},defaultGeneralPostChatLoadingPaneStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps),styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-postchatloading-pane",dir:state.domainStates.globalDir,hideIcon:!0,hideTitle:!0,hideSpinner:!0,hideSpinnerText:!0,subtitleText:"Please take a moment to give us feedback about your chat experience. We are loading the survey for you now."},props.controlProps);return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatSurveyLoadingPaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXPostChatLoadingPaneCompleted,ElapsedTimeInMilliseconds:PostChatLoadingPaneStateful_uiTimer.milliSecondsElapsed})}),[]),Object(jsx_runtime.jsx)(cjs.LoadingPane,{componentOverrides:props.componentOverrides,controlProps:controlProps,styleProps:styleProps})};PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.displayName="PostChatLoadingPaneStateful";var CustomerVoiceEvents,postchatloadingpanestateful_PostChatLoadingPaneStateful=PostChatLoadingPaneStateful_PostChatLoadingPaneStateful;try{PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.displayName="PostChatLoadingPaneStateful",PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.__docgenInfo={description:"",displayName:"PostChatLoadingPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/postchatloadingpanestateful/PostChatLoadingPaneStateful.tsx#PostChatLoadingPaneStateful"]={docgenInfo:PostChatLoadingPaneStateful_PostChatLoadingPaneStateful.__docgenInfo,name:"PostChatLoadingPaneStateful",path:"src/components/postchatloadingpanestateful/PostChatLoadingPaneStateful.tsx#PostChatLoadingPaneStateful"})}catch(__react_docgen_typescript_loader_error){}!function(CustomerVoiceEvents){CustomerVoiceEvents.ResponsePageLoaded="ResponsePageLoaded",CustomerVoiceEvents.FormResponseSubmitted="FormResponseSubmitted",CustomerVoiceEvents.FormResponseError="FormResponseError",CustomerVoiceEvents.FormsError="FormsError"}(CustomerVoiceEvents||(CustomerVoiceEvents={}));var PostChatSurveyPaneStateful_uiTimer,defaultGeneralPostChatSurveyPaneStyleProps={position:"initial",height:"100%",width:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px"},validRootDomains=["microsoft.com","microsoft.us","appsplatform.us","powervirtualagents.cn"],common_isValidSurveyUrl=function isValidSurveyUrl(url){if(isNullOrEmptyString(url))return!1;try{var objectUrl=new URL(url);if(!objectUrl.origin||"null"===objectUrl.origin)return!1;if(validRootDomains.find((function(domain){return objectUrl.origin.endsWith(domain)})))return!0}catch(error){return!1}return!1};function PostChatSurveyPaneStateful_slicedToArray(arr,i){return function PostChatSurveyPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PostChatSurveyPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PostChatSurveyPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PostChatSurveyPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PostChatSurveyPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PostChatSurveyPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PostChatSurveyPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var generateSurveyInviteLink=function generateSurveyInviteLink(surveyInviteLink,isEmbed,locale,compact,customerVoiceSurveyCorrelationId){var showMultiLingual=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return surveyInviteLink+"&"+new URLSearchParams({embed:isEmbed.toString(),compact:(null==compact||compact).toString(),lang:null!=locale?locale:"en-us",showmultilingual:(null!=showMultiLingual&&showMultiLingual).toString(),cvResponsePageRequestId:customerVoiceSurveyCorrelationId}).toString()},PostChatSurveyPaneStateful_PostChatSurveyPaneStateful=function PostChatSurveyPaneStateful(props){var _props$styleProps,_state$appStates,_state$domainStates$p,_props$controlProps$s,_props$controlProps;Object(react.useEffect)((function(){PostChatSurveyPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXPostChatPaneStarted,Description:"Postchat survey pane loading started.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}})}),[]);var _state$domainStates$p2,_state$domainStates$p3,_props$isCustomerVoic,_state$domainStates$p4,_state$domainStates$p5,_props$isCustomerVoic2,state=PostChatSurveyPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],generalStyleProps=Object.assign({},defaultGeneralPostChatSurveyPaneStyleProps,null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps,{display:state.appStates.isMinimized?"none":"contents"}),surveyInviteLink="",surveyMode=(null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.selectedSurveyMode)===PostChatSurveyMode.Embed;null!==(_state$domainStates$p=state.domainStates.postChatContext)&&void 0!==_state$domainStates$p&&_state$domainStates$p.botSurveyInviteLink&&state.appStates.postChatParticipantType===Constants.q.Bot?surveyInviteLink=generateSurveyInviteLink(null===(_state$domainStates$p2=state.domainStates.postChatContext)||void 0===_state$domainStates$p2?void 0:_state$domainStates$p2.botSurveyInviteLink,surveyMode,null===(_state$domainStates$p3=state.domainStates.postChatContext)||void 0===_state$domainStates$p3?void 0:_state$domainStates$p3.botFormsProLocale,null===(_props$isCustomerVoic=props.isCustomerVoiceSurveyCompact)||void 0===_props$isCustomerVoic||_props$isCustomerVoic,props.customerVoiceSurveyCorrelationId||""):surveyInviteLink=generateSurveyInviteLink(null===(_state$domainStates$p4=state.domainStates.postChatContext)||void 0===_state$domainStates$p4?void 0:_state$domainStates$p4.surveyInviteLink,surveyMode,null===(_state$domainStates$p5=state.domainStates.postChatContext)||void 0===_state$domainStates$p5?void 0:_state$domainStates$p5.formsProLocale,null===(_props$isCustomerVoic2=props.isCustomerVoiceSurveyCompact)||void 0===_props$isCustomerVoic2||_props$isCustomerVoic2,props.customerVoiceSurveyCorrelationId||"");props.copilotSurveyContext&&(surveyInviteLink=surveyInviteLink+"&mcs_additionalcontext="+JSON.stringify(props.copilotSurveyContext));var styleProps=Object.assign({},props.styleProps,{generalStyleProps:generalStyleProps}),controlProps=Object.assign({id:"oc-lcw-postchatsurvey-pane",surveyURL:null!==(_props$controlProps$s=null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.surveyURL)&&void 0!==_props$controlProps$s?_props$controlProps$s:surveyInviteLink},props.controlProps);return controlProps.surveyURL&&(common_isValidSurveyUrl(controlProps.surveyURL)?TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatSurveyUrlValidationCompleted,Description:controlProps.surveyURL+" is a valid Survey URL"}):(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.ERROR,{Event:TelemetryEvent.PostChatSurveyUrlValidationFailed,Description:controlProps.surveyURL+" is not a valid Survey URL"}),controlProps.surveyURL="")),Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+controlProps.id);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PostChatSurveyLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXPostChatPaneCompleted,ElapsedTimeInMilliseconds:PostChatSurveyPaneStateful_uiTimer.milliSecondsElapsed,Description:"Postchat survey pane loading completed.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}),window.addEventListener("message",(function(message){var data=message.data;data&&(data===CustomerVoiceEvents.ResponsePageLoaded?TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomerVoiceResponsePageLoaded}):data===CustomerVoiceEvents.FormResponseSubmitted?TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomerVoiceFormResponseSubmitted,Description:"Customer Voice form response submitted.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}):data===CustomerVoiceEvents.FormResponseError?TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CustomerVoiceFormResponseError,Description:"Customer Voice form response error.",ExceptionDetails:{message:"Customer Voice form response error."},CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}):"string"==typeof data&&data.startsWith(CustomerVoiceEvents.FormsError)&&TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.CustomerVoiceFormsError,Description:"Customer Voice failed to load with forms error.",ExceptionDetails:{message:"Customer Voice forms error details: "+data},CustomProperties:{ConversationStage:ConversationStage.ConversationEnd}}))}))}),[]),Object(jsx_runtime.jsx)(cjs.PostChatSurveyPane,{controlProps:controlProps,styleProps:styleProps})};PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.displayName="PostChatSurveyPaneStateful";var postchatsurveypanestateful_PostChatSurveyPaneStateful=PostChatSurveyPaneStateful_PostChatSurveyPaneStateful;try{PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.displayName="PostChatSurveyPaneStateful",PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.__docgenInfo={description:"",displayName:"PostChatSurveyPaneStateful",props:{isCustomerVoiceSurveyCompact:{defaultValue:null,description:"",name:"isCustomerVoiceSurveyCompact",required:!1,type:{name:"boolean"}},copilotSurveyContext:{defaultValue:null,description:"",name:"copilotSurveyContext",required:!1,type:{name:"Record<string, string>"}},customerVoiceSurveyCorrelationId:{defaultValue:null,description:"",name:"customerVoiceSurveyCorrelationId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/postchatsurveypanestateful/PostChatSurveyPaneStateful.tsx#PostChatSurveyPaneStateful"]={docgenInfo:PostChatSurveyPaneStateful_PostChatSurveyPaneStateful.__docgenInfo,name:"PostChatSurveyPaneStateful",path:"src/components/postchatsurveypanestateful/PostChatSurveyPaneStateful.tsx#PostChatSurveyPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var PreChatSurveyPaneStateful_uiTimer,markdown_it=__webpack_require__("./node_modules/markdown-it/index.js"),markdown_it_default=__webpack_require__.n(markdown_it),defaultGeneralPreChatSurveyPaneStyleProps={borderStyle:"solid",borderRadius:"inherit",borderWidth:"0px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1",overflowY:"auto",height:"inherit",width:"inherit"},defaultPreChatSurveyLocalizedTexts_PRECHAT_REQUIRED_FIELD_MISSING_MESSAGE="{0} field is required";function PreChatSurveyPaneStateful_regeneratorRuntime(){PreChatSurveyPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PreChatSurveyPaneStateful_slicedToArray(arr,i){return function PreChatSurveyPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PreChatSurveyPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function PreChatSurveyPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PreChatSurveyPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PreChatSurveyPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function PreChatSurveyPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PreChatSurveyPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PreChatSurveyPaneStateful_PreChatSurveyPaneStateful=function PreChatSurveyPaneStateful(props){var _surveyProps$stylePro,_props$surveyProps$co,_props$surveyProps,_props$surveyProps$co2;Object(react.useEffect)((function(){PreChatSurveyPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXPrechatPaneStart,Description:"Prechat survey pane loading started.",CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]),window.markdownit=markdown_it_default.a;var _onSubmit,_useChatContextStore2=PreChatSurveyPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],surveyProps=props.surveyProps,initStartChat=props.initStartChat,generalStyleProps=Object.assign({},defaultGeneralPreChatSurveyPaneStyleProps,null==surveyProps||null===(_surveyProps$stylePro=surveyProps.styleProps)||void 0===_surveyProps$stylePro?void 0:_surveyProps$stylePro.generalStyleProps,{display:state.appStates.isMinimized?"none":""}),setPreChatResponseEmail=function setPreChatResponseEmail(preChatResponse){if(preChatResponse)for(var index=0;index<preChatResponse.length;index++)new RegExp(Constants.t.EmailRegex).test(preChatResponse[index].value)&&dispatch({type:LiveChatWidgetActionType.SET_PRECHAT_RESPONSE_EMAIL,payload:preChatResponse[index].value})},requiredFieldMissingMessage=null!==(_props$surveyProps$co=null===(_props$surveyProps=props.surveyProps)||void 0===_props$surveyProps||null===(_props$surveyProps$co2=_props$surveyProps.controlProps)||void 0===_props$surveyProps$co2?void 0:_props$surveyProps$co2.requiredFieldMissingMessage)&&void 0!==_props$surveyProps$co?_props$surveyProps$co:defaultPreChatSurveyLocalizedTexts_PRECHAT_REQUIRED_FIELD_MISSING_MESSAGE,controlProps=Object.assign({id:"oc-lcw-prechatsurvey-pane",dir:state.domainStates.globalDir,payload:function getAdaptiveCardPayload(payload,requiredFieldMissingMessage){try{return function parseAdaptiveCardPayload(payload,requiredFieldMissingMessage){if(payload&&"{}"!==payload)try{var parsedPayload=JSON.parse(payload.replace("*","&#42;")),body=parsedPayload.body;if(body){var _step,_iterator=_createForOfIteratorHelper(body);try{for(_iterator.s();!(_step=_iterator.n()).done;){var fields=_step.value;if(fields.id&&fields.id.includes(":")){var _parsedId$IsRequired,_parsedId$Name,parsedId=JSON.parse(fields.id);fields.id=parsedId.Id,fields.isRequired=null!==(_parsedId$IsRequired=parsedId.IsRequired)&&void 0!==_parsedId$IsRequired&&_parsedId$IsRequired,fields.isRequired&&(fields.errorMessage=requiredFieldMissingMessage.replace("{0}",null!==(_parsedId$Name=parsedId.Name)&&void 0!==_parsedId$Name?_parsedId$Name:""))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return JSON.stringify(parsedPayload)}catch(ex){throw new Error("Adaptive card pase error: "+ex)}return payload}(payload,requiredFieldMissingMessage)}catch(ex){TelemetryHelper_TelemetryHelper.logConfigDataEvent(LogLevel.ERROR,{Event:TelemetryEvent.ParseAdaptiveCardFailed,Description:"Adaptive Card JSON Parse Failed.",ExceptionDetails:{exception:ex}})}}(state.domainStates.preChatSurveyResponse,requiredFieldMissingMessage),onSubmit:(_onSubmit=function PreChatSurveyPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PreChatSurveyPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(PreChatSurveyPaneStateful_regeneratorRuntime().mark((function _callee(values){var _state$domainStates$t,_state$domainStates,_state$domainStates$t2,_state$domainStates$t3,_state$domainStates$t4,_state$domainStates$w,_persistedState$domai,_persistedState$appSt,_state$appStates,widgetInstanceId,persistedState,optionalParams,_persistedState$domai2,prechatResponseValues;return PreChatSurveyPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.PrechatSubmitted,Description:"Prechat survey submitted.",CustomProperties:{ConversationStage:ConversationStage.Initialization}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context.prev=2,widgetInstanceId=utils_getWidgetCacheId(null!==(_state$domainStates$t=null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$t2=_state$domainStates.telemetryInternalData)||void 0===_state$domainStates$t2?void 0:_state$domainStates$t2.orgId)&&void 0!==_state$domainStates$t?_state$domainStates$t:"",null!==(_state$domainStates$t3=null===(_state$domainStates$t4=state.domainStates.telemetryInternalData)||void 0===_state$domainStates$t4?void 0:_state$domainStates$t4.widgetId)&&void 0!==_state$domainStates$t3?_state$domainStates$t3:"",null!==(_state$domainStates$w=state.domainStates.widgetInstanceId)&&void 0!==_state$domainStates$w?_state$domainStates$w:""),persistedState=utils_getStateFromCache(widgetInstanceId),optionalParams={},!persistedState||isUndefinedOrEmpty(null==persistedState||null===(_persistedState$domai=persistedState.domainStates)||void 0===_persistedState$domai?void 0:_persistedState$domai.liveChatContext)||(null==persistedState||null===(_persistedState$appSt=persistedState.appStates)||void 0===_persistedState$appSt?void 0:_persistedState$appSt.conversationState)!==ConversationState.Active||!1!==(null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.hideStartChatButton)){_context.next=12;break}return optionalParams={liveChatContext:null==persistedState||null===(_persistedState$domai2=persistedState.domainStates)||void 0===_persistedState$domai2?void 0:_persistedState$domai2.liveChatContext},_context.next=10,initStartChat(optionalParams,persistedState);case 10:_context.next=17;break;case 12:return prechatResponseValues=utils_extractPreChatSurveyResponseValues(state.domainStates.preChatSurveyResponse,values),optionalParams={preChatResponse:prechatResponseValues},setPreChatResponseEmail(values),_context.next=17,initStartChat(optionalParams);case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context.catch(2),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.PreChatSurveyStartChatMethodFailed,Description:"PreChat survey start chat failed.",ExceptionDetails:{exception:"PreChat survey start chat failed: "+_context.t0}});case 22:case"end":return _context.stop()}}),_callee,null,[[2,19]])}))),function onSubmit(_x2){return _onSubmit.apply(this,arguments)})},null==surveyProps?void 0:surveyProps.controlProps),styleProps=Object.assign({},null==surveyProps?void 0:surveyProps.styleProps,{generalStyleProps:generalStyleProps});return Object(react.useEffect)((function(){var adaptiveCardElements=document.getElementsByClassName(Constants.j.adaptiveCardClassName);if(adaptiveCardElements&&adaptiveCardElements.length>0)for(var children=adaptiveCardElements[0].children,value="",index=0;index<children.length;index++){var current=children[index];if(current&&current.className==Constants.j.adaptiveCardTextBlockClassName&&(value=current.innerHTML,current.childElementCount>0)){var paragraph=current.children[0];paragraph.tagName.toLowerCase()==Constants.j.pTagName&&(value=paragraph.innerHTML)}if(current&&current.tagName.toLowerCase()==Constants.j.div&&current.childElementCount>0){var input=current.children[0].children;(null==input?void 0:input.length)>0&&input[0].className!=Constants.j.adaptiveCardToggleInputClassName&&input[0].className!=Constants.j.adaptiveCardActionSetClassName&&input[0].setAttribute(Constants.j.ariaLabel,value)}}TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PrechatSurveyLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXPrechatPaneCompleted,ElapsedTimeInMilliseconds:PreChatSurveyPaneStateful_uiTimer.milliSecondsElapsed,Description:"Prechat survey pane loading completed.",CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]),Object(react.useEffect)((function(){if(!state.appStates.isMinimized){var firstElement=findAllFocusableElement("#"+controlProps.id);firstElement&&firstElement[0]&&firstElement[0].focus()}}),[state.appStates.isMinimized]),Object(jsx_runtime.jsx)(cjs.PreChatSurveyPane,{controlProps:controlProps,styleProps:styleProps})};PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.displayName="PreChatSurveyPaneStateful";var ProactiveChatPaneStateful_uiTimer,prechatsurveypanestateful_PreChatSurveyPaneStateful=PreChatSurveyPaneStateful_PreChatSurveyPaneStateful;try{PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.displayName="PreChatSurveyPaneStateful",PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.__docgenInfo={description:"",displayName:"PreChatSurveyPaneStateful",props:{surveyProps:{defaultValue:null,description:"",name:"surveyProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},initStartChat:{defaultValue:null,description:"",name:"initStartChat",required:!0,type:{name:"(params?: any, persistedState?: any) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/prechatsurveypanestateful/PreChatSurveyPaneStateful.tsx#PreChatSurveyPaneStateful"]={docgenInfo:PreChatSurveyPaneStateful_PreChatSurveyPaneStateful.__docgenInfo,name:"PreChatSurveyPaneStateful",path:"src/components/prechatsurveypanestateful/PreChatSurveyPaneStateful.tsx#PreChatSurveyPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function ProactiveChatPaneStateful_regeneratorRuntime(){ProactiveChatPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ProactiveChatPaneStateful_slicedToArray(arr,i){return function ProactiveChatPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ProactiveChatPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ProactiveChatPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ProactiveChatPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ProactiveChatPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ProactiveChatPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ProactiveChatPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ProactiveChatPaneStateful_ProactiveChatPaneStateful=function ProactiveChatPaneStateful(props){var _proactiveChatProps$c;Object(react.useEffect)((function(){ProactiveChatPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXProactiveChatPaneStart,Description:"Proactive chat pane loading started."})}),[]);var _onStart,_useChatContextStore2=ProactiveChatPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],proactiveChatProps=props.proactiveChatProps,startChat=props.startChat,_useState2=ProactiveChatPaneStateful_slicedToArray(Object(react.useState)(!1),2),timeoutRemoved=_useState2[0],setTimeoutRemoved=_useState2[1],controlProps=Object.assign({id:"oc-lcw-proactivechat",dir:state.domainStates.globalDir,onStart:(_onStart=function ProactiveChatPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ProactiveChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ProactiveChatPaneStateful_regeneratorRuntime().mark((function _callee(){var _state$domainStates$l,_state$domainStates$l2,_state$appStates,_state$appStates$proa,startPopoutChatEvent,proactiveChatStarted;return ProactiveChatPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setTimeoutRemoved(!0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatAccepted,Description:"Proactive chat accepted."}),!state.appStates.proactiveChatStates.proactiveChatInNewWindow){_context.next=8;break}startPopoutChatEvent={eventName:BroadcastEvent.ProactiveChatStartPopoutChat,payload:{enablePrechat:!0===(null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates||null===(_state$appStates$proa=_state$appStates.proactiveChatStates)||void 0===_state$appStates$proa?void 0:_state$appStates$proa.proactiveChatEnablePrechat)}},cjs.BroadcastService.postMessage(startPopoutChatEvent),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),_context.next=17;break;case 8:if("True"!==(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l||null===(_state$domainStates$l2=_state$domainStates$l.LiveWSAndLiveChatEngJoin)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.OutOfOperatingHours)){_context.next=13;break}dispatch({type:LiveChatWidgetActionType.SET_OUTSIDE_OPERATING_HOURS,payload:!0}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),_context.next=17;break;case 13:return proactiveChatStarted={eventName:BroadcastEvent.ProactiveChatStartChat},cjs.BroadcastService.postMessage(proactiveChatStarted),_context.next=17,startChat();case 17:case"end":return _context.stop()}}),_callee)}))),function onStart(){return _onStart.apply(this,arguments)}),onClose:function onClose(){setTimeoutRemoved(!0),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatClosed,Description:"Proactive chat closed."}),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed})}},null==proactiveChatProps?void 0:proactiveChatProps.controlProps,{bodyTitleText:state.appStates.proactiveChatStates.proactiveChatBodyTitle?state.appStates.proactiveChatStates.proactiveChatBodyTitle:null==proactiveChatProps||null===(_proactiveChatProps$c=proactiveChatProps.controlProps)||void 0===_proactiveChatProps$c?void 0:_proactiveChatProps$c.bodyTitleText});return Object(react.useEffect)((function(){var _proactiveChatProps$P;setFocusOnElement(document.getElementById(controlProps.id+"-startbutton")),TelemetryTimers.ProactiveChatScreenTimer=createTimer();var timeoutEvent=setTimeout((function(){!function handleProactiveChatInviteTimeout(){timeoutRemoved||(setTimeoutRemoved(!0),dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatRejected,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed,Description:"Proactive chat invitation timed out."}))}()}),null!==(_proactiveChatProps$P=null==proactiveChatProps?void 0:proactiveChatProps.ProactiveChatInviteTimeoutInMs)&&void 0!==_proactiveChatProps$P?_proactiveChatProps$P:Constants.e.ProactiveChatInviteTimeoutInMs);return TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ProactiveChatPaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXProactiveChatPaneCompleted,ElapsedTimeInMilliseconds:ProactiveChatPaneStateful_uiTimer.milliSecondsElapsed,Description:"Proactive chat pane loading completed."}),function(){clearTimeout(timeoutEvent)}}),[]),Object(jsx_runtime.jsx)(cjs.ProactiveChatPane,{componentOverrides:null==proactiveChatProps?void 0:proactiveChatProps.componentOverrides,controlProps:controlProps,styleProps:null==proactiveChatProps?void 0:proactiveChatProps.styleProps})};ProactiveChatPaneStateful_ProactiveChatPaneStateful.displayName="ProactiveChatPaneStateful";var ReconnectChatPaneStateful_uiTimer,proactivechatpanestateful_ProactiveChatPaneStateful=ProactiveChatPaneStateful_ProactiveChatPaneStateful;try{ProactiveChatPaneStateful_ProactiveChatPaneStateful.displayName="ProactiveChatPaneStateful",ProactiveChatPaneStateful_ProactiveChatPaneStateful.__docgenInfo={description:"",displayName:"ProactiveChatPaneStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/proactivechatpanestateful/ProactiveChatPaneStateful.tsx#ProactiveChatPaneStateful"]={docgenInfo:ProactiveChatPaneStateful_ProactiveChatPaneStateful.__docgenInfo,name:"ProactiveChatPaneStateful",path:"src/components/proactivechatpanestateful/ProactiveChatPaneStateful.tsx#ProactiveChatPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function ReconnectChatPaneStateful_regeneratorRuntime(){ReconnectChatPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ReconnectChatPaneStateful_slicedToArray(arr,i){return function ReconnectChatPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ReconnectChatPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ReconnectChatPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ReconnectChatPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ReconnectChatPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function ReconnectChatPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ReconnectChatPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ReconnectChatPaneStateful_ReconnectChatPaneStateful=function ReconnectChatPaneStateful(props){Object(react.useEffect)((function(){ReconnectChatPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXReconnectChatPaneStart,ElapsedTimeInMilliseconds:ReconnectChatPaneStateful_uiTimer.milliSecondsElapsed})}),[]);var _useChatContextStore2=ReconnectChatPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],chatSDK=ReconnectChatPaneStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0].getChatSDK(),reconnectChatProps=props.reconnectChatProps,initStartChat=props.initStartChat,startChat=function(){var _ref=function ReconnectChatPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ReconnectChatPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(ReconnectChatPaneStateful_regeneratorRuntime().mark((function _callee(continueChat){var optionalParams,_state$domainStates,_state$domainStates2,preChatSurveyResponse;return ReconnectChatPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),!continueChat||!state.appStates.reconnectId){_context.next=7;break}return optionalParams={reconnectId:state.appStates.reconnectId},_context.next=5,initStartChat(optionalParams);case 5:_context.next=21;break;case 7:return dispatch({type:LiveChatWidgetActionType.SET_RECONNECT_ID,payload:void 0}),null!=state&&null!==(_state$domainStates=state.domainStates)&&void 0!==_state$domainStates&&_state$domainStates.initialChatSdkRequestId&&(chatSDK.requestId=null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.initialChatSdkRequestId),!1,_context.next=12,chatSDK.getPreChatSurvey(false);case 12:if(!(preChatSurveyResponse=_context.sent)){_context.next=18;break}dispatch({type:LiveChatWidgetActionType.SET_PRE_CHAT_SURVEY_RESPONSE,payload:preChatSurveyResponse}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Prechat}),_context.next=21;break;case 18:return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context.next=21,initStartChat();case 21:case"end":return _context.stop()}}),_callee)})));return function startChat(_x2){return _ref.apply(this,arguments)}}(),controlProps=Object.assign({id:"lcw-components-reconnect-chat-pane",dir:state.domainStates.globalDir,onContinueChat:function onContinueChat(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatContinueConversation,Description:"Reconnect chat continue conversation button clicked."}),startChat(!0)},onStartNewChat:function onStartNewChat(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatStartNewConversation,Description:"Reconnect chat start new conversation button clicked."}),startChat(!1)},onMinimize:function onMinimize(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatMinimize,Description:"Reconnect chat minimized."}),dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!0})}},null==reconnectChatProps?void 0:reconnectChatProps.controlProps);return Object(react.useEffect)((function(){setFocusOnElement(document.getElementById(controlProps.id)),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.ReconnectChatPaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXReconnectChatCompleted})}),[]),Object(jsx_runtime.jsx)(cjs.ReconnectChatPane,{componentOverrides:null==reconnectChatProps?void 0:reconnectChatProps.componentOverrides,controlProps:controlProps,styleProps:null==reconnectChatProps?void 0:reconnectChatProps.styleProps})};ReconnectChatPaneStateful_ReconnectChatPaneStateful.displayName="ReconnectChatPaneStateful";var reconnectchatpanestateful_ReconnectChatPaneStateful=ReconnectChatPaneStateful_ReconnectChatPaneStateful;try{ReconnectChatPaneStateful_ReconnectChatPaneStateful.displayName="ReconnectChatPaneStateful",ReconnectChatPaneStateful_ReconnectChatPaneStateful.__docgenInfo={description:"",displayName:"ReconnectChatPaneStateful",props:{reconnectChatProps:{defaultValue:null,description:"",name:"reconnectChatProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},initStartChat:{defaultValue:null,description:"",name:"initStartChat",required:!0,type:{name:"(params?: any) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/reconnectchatpanestateful/ReconnectChatPaneStateful.tsx#ReconnectChatPaneStateful"]={docgenInfo:ReconnectChatPaneStateful_ReconnectChatPaneStateful.__docgenInfo,name:"ReconnectChatPaneStateful",path:"src/components/reconnectchatpanestateful/ReconnectChatPaneStateful.tsx#ReconnectChatPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var StartChatErrorPaneStateful_uiTimer,defaultStartChatErrorPaneGeneralStyleProps={position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0 0 4px 4px",borderWidth:"0px",backgroundColor:"#FFFFFF"},defaultStartChatErrorPaneIconImageStyleProps={src:AlertIcon,imageFit:Image_types.b.centerContain,width:"86px",height:"86px",shouldFadeIn:!1,shouldStartVisible:!0},defaultStartChatErrorPaneIconStyleProps={display:"flex",order:1,alignSelf:"auto",backgroundColor:"#FFFFFF",boxShadow:"#FFFFFF 0px 0px 0px 0px",margin:"0px 0px 0px 0px"},defaultStartChatErrorPaneSubtitleStyleProps={fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:3,alignSelf:"auto"},defaultStartChatErrorPaneTitleStyleProps={fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"18px",color:"#36454F",textAlign:"center",display:"flex",order:2,alignSelf:"auto"};function StartChatErrorPaneStateful_slicedToArray(arr,i){return function StartChatErrorPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function StartChatErrorPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function StartChatErrorPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return StartChatErrorPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return StartChatErrorPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function StartChatErrorPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StartChatErrorPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StartChatErrorPaneStateful_StartChatErrorPaneStateful=function StartChatErrorPaneStateful(startChatErrorPaneProps){var _startChatErrorPanePr,_startChatErrorPanePr2,_startChatErrorPanePr3,_startChatErrorPanePr4,_startChatErrorPanePr5,_startChatErrorPanePr6,_startChatErrorPanePr7,_startChatErrorPanePr8,_startChatErrorPanePr9,_startChatErrorPanePr10,_startChatErrorPanePr11,_startChatErrorPanePr12,_startChatErrorPanePr13,_startChatErrorPanePr14,_startChatErrorPanePr15,_startChatErrorPanePr16,_startChatErrorPanePr17;Object(react.useEffect)((function(){StartChatErrorPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXStartChatErrorPaneStart})}),[]);var errorPaneTitleText,errorPaneSubtitleText,state=StartChatErrorPaneStateful_slicedToArray(hooks_useChatContextStore(),1)[0],errorUIStyleProps={generalStyleProps:Object.assign({},defaultStartChatErrorPaneGeneralStyleProps,null==startChatErrorPaneProps||null===(_startChatErrorPanePr=startChatErrorPaneProps.styleProps)||void 0===_startChatErrorPanePr?void 0:_startChatErrorPanePr.generalStyleProps),titleStyleProps:Object.assign({},defaultStartChatErrorPaneTitleStyleProps,null==startChatErrorPaneProps||null===(_startChatErrorPanePr2=startChatErrorPaneProps.styleProps)||void 0===_startChatErrorPanePr2?void 0:_startChatErrorPanePr2.titleStyleProps),subtitleStyleProps:Object.assign({},defaultStartChatErrorPaneSubtitleStyleProps,null==startChatErrorPaneProps||null===(_startChatErrorPanePr3=startChatErrorPaneProps.styleProps)||void 0===_startChatErrorPanePr3?void 0:_startChatErrorPanePr3.subtitleStyleProps),iconStyleProps:Object.assign({},defaultStartChatErrorPaneIconStyleProps,null==startChatErrorPaneProps||null===(_startChatErrorPanePr4=startChatErrorPaneProps.styleProps)||void 0===_startChatErrorPanePr4?void 0:_startChatErrorPanePr4.iconStyleProps),iconImageProps:Object.assign({},defaultStartChatErrorPaneIconImageStyleProps,null==startChatErrorPaneProps||null===(_startChatErrorPanePr5=startChatErrorPaneProps.styleProps)||void 0===_startChatErrorPanePr5?void 0:_startChatErrorPanePr5.iconImageProps)};switch(state.domainStates.startChatFailureType){case StartChatFailureType.Unauthorized:errorPaneTitleText=null!==(_startChatErrorPanePr6=null==startChatErrorPaneProps||null===(_startChatErrorPanePr7=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr7?void 0:_startChatErrorPanePr7.unauthorizedTitleText)&&void 0!==_startChatErrorPanePr6?_startChatErrorPanePr6:Constants.u.DefaultStartChatErrorUnauthorizedTitleText,errorPaneSubtitleText=null!==(_startChatErrorPanePr8=null==startChatErrorPaneProps||null===(_startChatErrorPanePr9=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr9?void 0:_startChatErrorPanePr9.unauthorizedSubtitleText)&&void 0!==_startChatErrorPanePr8?_startChatErrorPanePr8:Constants.u.DefaultStartChatErrorUnauthorizedSubtitleText;break;case StartChatFailureType.AuthSetupError:errorPaneTitleText=null!==(_startChatErrorPanePr10=null==startChatErrorPaneProps||null===(_startChatErrorPanePr11=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr11?void 0:_startChatErrorPanePr11.authSetupErrorTitleText)&&void 0!==_startChatErrorPanePr10?_startChatErrorPanePr10:Constants.u.DefaultStartChatErrorAuthSetupErrorTitleText,errorPaneSubtitleText=null!==(_startChatErrorPanePr12=null==startChatErrorPaneProps||null===(_startChatErrorPanePr13=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr13?void 0:_startChatErrorPanePr13.authSetupErrorSubtitleText)&&void 0!==_startChatErrorPanePr12?_startChatErrorPanePr12:Constants.u.DefaultStartChatErrorAuthSetupErrorSubtitleText;break;default:errorPaneTitleText=null!==(_startChatErrorPanePr14=null==startChatErrorPaneProps||null===(_startChatErrorPanePr15=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr15?void 0:_startChatErrorPanePr15.titleText)&&void 0!==_startChatErrorPanePr14?_startChatErrorPanePr14:Constants.u.DefaultStartChatErrorTitleText,errorPaneSubtitleText=null!==(_startChatErrorPanePr16=null==startChatErrorPaneProps||null===(_startChatErrorPanePr17=startChatErrorPaneProps.controlProps)||void 0===_startChatErrorPanePr17?void 0:_startChatErrorPanePr17.subtitleText)&&void 0!==_startChatErrorPanePr16?_startChatErrorPanePr16:Constants.u.DefaultStartChatErrorSubtitleText}var errorUIControlProps=Object.assign({id:Constants.u.DefaultStartChatErrorPaneId,dir:state.domainStates.globalDir,hideSpinner:!0,hideSpinnerText:!0},null==startChatErrorPaneProps?void 0:startChatErrorPaneProps.controlProps,{titleText:errorPaneTitleText,subtitleText:errorPaneSubtitleText});return Object(react.useEffect)((function(){var firstElement=findAllFocusableElement("#"+state.domainStates.widgetElementId);firstElement&&firstElement[0]&&firstElement[0].focus(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.StartChatErrorPaneLoaded,Description:"Start chat error pane loaded."}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXStartChatErrorCompleted,ElapsedTimeInMilliseconds:StartChatErrorPaneStateful_uiTimer.milliSecondsElapsed})}),[]),Object(jsx_runtime.jsx)(cjs.LoadingPane,{componentOverrides:null==startChatErrorPaneProps?void 0:startChatErrorPaneProps.componentOverrides,controlProps:errorUIControlProps,styleProps:errorUIStyleProps})};StartChatErrorPaneStateful_StartChatErrorPaneStateful.displayName="StartChatErrorPaneStateful";var startchaterrorpanestateful_StartChatErrorPaneStateful=StartChatErrorPaneStateful_StartChatErrorPaneStateful;try{StartChatErrorPaneStateful_StartChatErrorPaneStateful.displayName="StartChatErrorPaneStateful",StartChatErrorPaneStateful_StartChatErrorPaneStateful.__docgenInfo={description:"",displayName:"StartChatErrorPaneStateful",props:{componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"IStartChatErrorPaneComponentOverrides"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"IStartChatErrorPaneControlProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"IStartChatErrorPaneStyleProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/startchaterrorpanestateful/StartChatErrorPaneStateful.tsx#StartChatErrorPaneStateful"]={docgenInfo:StartChatErrorPaneStateful_StartChatErrorPaneStateful.__docgenInfo,name:"StartChatErrorPaneStateful",path:"src/components/startchaterrorpanestateful/StartChatErrorPaneStateful.tsx#StartChatErrorPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function BotMagicCodeStore_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function BotMagicCodeStore_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function BotMagicCodeStore_createClass(Constructor,protoProps,staticProps){return protoProps&&BotMagicCodeStore_defineProperties(Constructor.prototype,protoProps),staticProps&&BotMagicCodeStore_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var BotMagicCodeStore=BotMagicCodeStore_createClass((function BotMagicCodeStore(){!function BotMagicCodeStore_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BotMagicCodeStore)}));BotMagicCodeStore.botOAuthSignInId="";var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),react_dom_default=__webpack_require__.n(react_dom),CitationDim_CitationDim=function CitationDim(_ref){var _ref$brightness=_ref.brightness,brightness=void 0===_ref$brightness?"0.2":_ref$brightness,container=document.querySelector(".webchat__stacked-layout_container");return container?react_dom_default.a.createPortal(Object(jsx_runtime.jsx)("div",{style:{position:"absolute",inset:0},children:Object(jsx_runtime.jsx)(DimLayer_DimLayer,{brightness:brightness})}),container):null},citationpanestateful_CitationDim=CitationDim_CitationDim;try{CitationDim_CitationDim.displayName="CitationDim",CitationDim_CitationDim.__docgenInfo={description:"",displayName:"CitationDim",props:{brightness:{defaultValue:{value:"0.2"},description:"",name:"brightness",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/citationpanestateful/CitationDim.tsx#CitationDim"]={docgenInfo:CitationDim_CitationDim.__docgenInfo,name:"CitationDim",path:"src/components/citationpanestateful/CitationDim.tsx#CitationDim"})}catch(__react_docgen_typescript_loader_error){}var CitationPaneStateful_uiTimer,defaultCitationPaneStyles={pane:{position:"fixed",left:"50%",top:"18%",transform:"translateX(-50%)",background:"#fff",width:"85%",height:"85%",overflowY:"auto",overflowX:"hidden",padding:16,borderRadius:6,zIndex:10001,boxSizing:"border-box"}};function CitationPaneStateful_slicedToArray(arr,i){return function CitationPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CitationPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function CitationPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CitationPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CitationPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function CitationPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CitationPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var CitationPaneStateful_CitationPaneStateful=function CitationPaneStateful(props){var _props$styleProps3;Object(react.useEffect)((function(){CitationPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXCitationPaneStart})}),[]);var initialTabIndexMap=new Map,elements=[],_useChatContextStore2=CitationPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],controlId=props.id||Constants.j.ocwCitationPaneClassName,_useState2=CitationPaneStateful_slicedToArray(Object(react.useState)(null),2),paneStyle=_useState2[0],setPaneStyle=_useState2[1],_useState4=CitationPaneStateful_slicedToArray(Object(react.useState)(!1),2),isReady=_useState4[0],setIsReady=_useState4[1];Object(react.useEffect)((function(){utils_preventFocusToMoveOutOfElement(controlId);var focusableElements=findAllFocusableElement("#"+controlId);requestAnimationFrame((function(){focusableElements&&focusableElements.length>0&&focusableElements[0]&&focusableElements[0].focus({preventScroll:!0})})),elements=findParentFocusableElementsWithoutChildContainer(controlId),setTabIndices(elements,initialTabIndexMap,!1),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.CitationPaneLoaded}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXCitationPaneCompleted,ElapsedTimeInMilliseconds:CitationPaneStateful_uiTimer.milliSecondsElapsed})}),[]),Object(react.useEffect)((function(){if(isReady){var focusableElements=findAllFocusableElement("#"+controlId);if(focusableElements&&focusableElements.length>0){var first=focusableElements[0];first.contains(document.activeElement)||document.activeElement&&document.activeElement.id.startsWith(controlId)||requestAnimationFrame((function(){first.isConnected&&first.focus({preventScroll:!0})}))}}}),[isReady,controlId]),Object(react.useEffect)((function(){var compute=function compute(){var _props$styleProps2;try{var container=document.querySelector(".webchat__stacked-layout_container");if(container){var _props$styleProps,rect=container.getBoundingClientRect(),widthPx=Math.round(.95*rect.width),heightPx=Math.round(.95*rect.height),leftPx=Math.round(rect.left+(rect.width-widthPx)/2),topPx=Math.round(rect.top+(rect.height-heightPx)/2),base=Object.assign({},defaultCitationPaneStyles.pane);base&&base.transform&&delete base.transform;var computedStyle={left:leftPx+"px",top:topPx+"px",width:widthPx+"px",height:heightPx+"px"},_generalProps=null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyleProps,_userStyles=_generalProps&&"object"==typeof _generalProps?Object.assign({},_generalProps):{};return delete _userStyles.position,delete _userStyles.left,delete _userStyles.top,delete _userStyles.width,delete _userStyles.height,setPaneStyle(Object.assign({},base,_userStyles,computedStyle)),void requestAnimationFrame((function(){return setIsReady(!0)}))}}catch(e){}var generalProps=null===(_props$styleProps2=props.styleProps)||void 0===_props$styleProps2?void 0:_props$styleProps2.generalStyleProps,userStyles=generalProps&&"object"==typeof generalProps?Object.assign({},generalProps):{};delete userStyles.position,delete userStyles.left,delete userStyles.top,delete userStyles.width,delete userStyles.height;var fallbackStyle=Object.assign({},defaultCitationPaneStyles.pane,userStyles);setPaneStyle(fallbackStyle),requestAnimationFrame((function(){return setIsReady(!0)}))};return compute(),window.addEventListener("resize",compute),function(){return window.removeEventListener("resize",compute)}}),[null===(_props$styleProps3=props.styleProps)||void 0===_props$styleProps3?void 0:_props$styleProps3.generalStyleProps]);var baseStyle=Object.assign({position:"relative"},null!=paneStyle?paneStyle:{position:"fixed"}),hiddenStyle={visibility:isReady?"visible":"hidden",pointerEvents:isReady?"auto":"none"},wrapperStyles=Object.assign({},baseStyle,hiddenStyle,{display:"flex",flexDirection:"column",zIndex:10001}),mergedStyleProps=props.styleProps?Object.assign({},props.styleProps,{generalStyleProps:Object.assign({},props.styleProps.generalStyleProps)}):void 0,controlProps=Object.assign({id:controlId,dir:state.domainStates.globalDir,titleText:props.title,contentHtml:props.contentHtml,brightnessValueOnDim:"0.2",onClose:function handleClose(){props.onClose&&props.onClose(),dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:null}),setTabIndices(elements,initialTabIndexMap,!0)}},null==props?void 0:props.controlProps);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(citationpanestateful_CitationDim,{brightness:controlProps.brightnessValueOnDim}),Object(jsx_runtime.jsx)("div",{style:wrapperStyles,children:Object(jsx_runtime.jsx)(cjs.CitationPane,{componentOverrides:null==props?void 0:props.componentOverrides,controlProps:controlProps,styleProps:mergedStyleProps})})]})},citationpanestateful_CitationPaneStateful=CitationPaneStateful_CitationPaneStateful;try{CitationPaneStateful_CitationPaneStateful.displayName="CitationPaneStateful",CitationPaneStateful_CitationPaneStateful.__docgenInfo={description:"",displayName:"CitationPaneStateful",props:{id:{defaultValue:null,description:"id: Optional custom ID for the citation pane container",name:"id",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"title: Optional title for the citation pane",name:"title",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"onClose: Optional callback function called when the citation pane is closed",name:"onClose",required:!1,type:{name:"(() => void)"}},contentHtml:{defaultValue:null,description:"contentHtml: Optional HTML content to display in the citation pane",name:"contentHtml",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/citationpanestateful/CitationPaneStateful.tsx#CitationPaneStateful"]={docgenInfo:CitationPaneStateful_CitationPaneStateful.__docgenInfo,name:"CitationPaneStateful",path:"src/components/citationpanestateful/CitationPaneStateful.tsx#CitationPaneStateful"})}catch(__react_docgen_typescript_loader_error){}function WebChatEventSubscribers_slicedToArray(arr,i){return function WebChatEventSubscribers_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function WebChatEventSubscribers_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function WebChatEventSubscribers_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return WebChatEventSubscribers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WebChatEventSubscribers_arrayLikeToArray(o,minLen)}(arr,i)||function WebChatEventSubscribers_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WebChatEventSubscribers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var webchatcontroller_WebChatEventSubscribers=function WebChatEventSubscribers(){var _useState2=WebChatEventSubscribers_slicedToArray(Object(react.useState)(!1),2),isConnected=_useState2[0],setIsConnected=_useState2[1],_useState4=WebChatEventSubscribers_slicedToArray(Object(react.useState)(!1),2),storeReady=_useState4[0],setStoreReady=_useState4[1],storeWaitTimer=createTimer();return Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWWebChatStorePollingStarted,Description:"WebChat store polling started"});var waitForStore=function waitForStore(){return!!WebChatStoreLoader.store&&(setStoreReady(!0),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWWebChatStoreReady,Description:"WebChat store ready",ElapsedTimeInMilliseconds:storeWaitTimer.milliSecondsElapsed}),!0)};if(!waitForStore()){var storeCheckInterval=setInterval((function(){waitForStore()&&clearInterval(storeCheckInterval)}),100);return function(){clearInterval(storeCheckInterval)}}}),[]),Object(react.useEffect)((function(){if(storeReady){var checkConnectionStatus=function checkConnectionStatus(){try{if(WebChatStoreLoader.store){var state=WebChatStoreLoader.store.getState(),newIsConnected="connected"===(null==state?void 0:state.connectivityStatus);newIsConnected&&!isConnected?(setIsConnected(!0),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWWebChatConnected,Description:"WebChat connection established, dispatching events"}),setTimeout((function(){utils_dispatchCustomEvent(common_ChatWidgetEvents.FETCH_PERSISTENT_CHAT_HISTORY),utils_dispatchCustomEvent(common_ChatWidgetEvents.ADD_ACTIVITY,{activity:{from:{role:"bot"},timestamp:0,type:"message",channelData:{tags:[Constants.e.persistentChatHistoryMessagePullTriggerTag]}}})}),2e3)):!newIsConnected&&isConnected&&(setIsConnected(!1),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.WARN,{Event:TelemetryEvent.LCWWebChatDisconnected,Description:"WebChat connection lost"}))}}catch(error){TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.LCWWebChatConnectionCheckFailed,Description:"WebChat connection status check failed",ExceptionDetails:error})}};checkConnectionStatus();var interval=setInterval(checkConnectionStatus,1e3);return function(){clearInterval(interval)}}}),[isConnected,storeReady]),null},defaultReceivedMessageAnchorStyles={color:"white",filter:"none"},defaultSentMessageAnchorStyles={color:"blue"},defaultSystemMessageBoxStyles={maxWidth:"90%"},defaultUserMessageBoxStyles={maxWidth:"90%"},activities_botActivity=(__webpack_require__("./node_modules/core-js/modules/es.date.to-iso-string.js"),{from:{role:"bot"},type:"message"}),activities_conversationDividerActivity=Object.assign({},activities_botActivity,{channelData:{tags:[Constants.e.conversationDividerTag]}});function convertPersistentChatHistoryMessageToActivity_toConsumableArray(arr){return function convertPersistentChatHistoryMessageToActivity_arrayWithoutHoles(arr){if(Array.isArray(arr))return convertPersistentChatHistoryMessageToActivity_arrayLikeToArray(arr)}(arr)||function convertPersistentChatHistoryMessageToActivity_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function convertPersistentChatHistoryMessageToActivity_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return convertPersistentChatHistoryMessageToActivity_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return convertPersistentChatHistoryMessageToActivity_arrayLikeToArray(o,minLen)}(arr)||function convertPersistentChatHistoryMessageToActivity_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function convertPersistentChatHistoryMessageToActivity_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var activityConverters_convertPersistentChatHistoryMessageToActivity=function convertPersistentChatHistoryMessageToActivity(message){var _from$user,_from$application,webchatSequenceId,timestamp,additionalData=message.additionalData,attachments=message.attachments,content=message.content,created=message.created,from=message.from,transcriptOriginalMessageId=message.transcriptOriginalMessageId,activity=Object.assign({},activities_botActivity,{channelData:{tags:[Constants.e.persistentChatHistoryMessageTag]}});if(transcriptOriginalMessageId){var id=function convertStringValueToInt(value){if("string"==typeof value&&""!==value){var result;try{result=parseInt(value)}catch(e){return}return isNaN(result)?void 0:result}}(transcriptOriginalMessageId);id&&(webchatSequenceId=id,timestamp=new Date(id)||created,activity.channelData=Object.assign({},activity.channelData,{"webchat:sequence-id":webchatSequenceId}))}if(null!=additionalData&&additionalData.tags){var formattedTags=additionalData.tags.split(",");activity.channelData=Object.assign({},activity.channelData,{tags:[].concat(convertPersistentChatHistoryMessageToActivity_toConsumableArray(activity.channelData.tags),convertPersistentChatHistoryMessageToActivity_toConsumableArray(formattedTags))})}if(null!=additionalData&&additionalData.ConversationId&&(activity.channelData.conversationId=additionalData.ConversationId),null!=from&&null!==(_from$user=from.user)&&void 0!==_from$user&&_from$user.displayName&&(activity.from=Object.assign({},activity.from,{name:from.user.displayName})),"Customer"===(null==from||null===(_from$application=from.application)||void 0===_from$application?void 0:_from$application.displayName)&&(activity.from={role:"user",name:from.application.displayName}),content)return Object.assign({},activity,{text:content,timestamp:timestamp});if(attachments&&attachments.length>0){var text="The following attachment was uploaded during the conversation: "+(attachments[0].name||"Unknown");return Object.assign({},activity,{text:text,timestamp:timestamp})}return null},defaultPersistentChatHistoryProps={pageSize:10,dividerActivityStyle:{border:"1px solid rgb(96, 94, 92, 0.5)",margin:"10px 20%"},bannerStyle:{margin:"10px auto"}};function PersistentConversationHandler_regeneratorRuntime(){PersistentConversationHandler_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function PersistentConversationHandler_toConsumableArray(arr){return function PersistentConversationHandler_arrayWithoutHoles(arr){if(Array.isArray(arr))return PersistentConversationHandler_arrayLikeToArray(arr)}(arr)||function PersistentConversationHandler_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||PersistentConversationHandler_unsupportedIterableToArray(arr)||function PersistentConversationHandler_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PersistentConversationHandler_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return PersistentConversationHandler_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PersistentConversationHandler_arrayLikeToArray(o,minLen):void 0}}function PersistentConversationHandler_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PersistentConversationHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PersistentConversationHandler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PersistentConversationHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PersistentConversationHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function PersistentConversationHandler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function PersistentConversationHandler_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var PersistentConversationHandler_PersistentConversationHandler=function(){function PersistentConversationHandler(facadeChatSDK,props){var _this=this;!function PersistentConversationHandler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PersistentConversationHandler),this.appliedProps=Object.assign({},defaultPersistentChatHistoryProps),this.isLastPull=!1,this.pageToken=null,this.facadeChatSDK=void 0,this.lastMessage=null,this.count=0,this.pageSize=defaultPersistentChatHistoryProps.pageSize,this.isCurrentlyPulling=!1,this.pageTokenInTransitSet=new Set,this.resetEventListener=cjs.BroadcastService.getMessageByEventName(BroadcastEvent.PersistentConversationReset).subscribe((function(){_this.reset()})),this.facadeChatSDK=facadeChatSDK,this.appliedPropsHandler(props),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWPersistentConversationHandlerInitialized,Description:"PersistentConversationHandler initialized",CustomProperties:{pageSize:defaultPersistentChatHistoryProps.pageSize}})}var _fetchHistoryMessages,_pullHistory;return function PersistentConversationHandler_createClass(Constructor,protoProps,staticProps){return protoProps&&PersistentConversationHandler_defineProperties(Constructor.prototype,protoProps),staticProps&&PersistentConversationHandler_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PersistentConversationHandler,[{key:"appliedPropsHandler",value:function appliedPropsHandler(props){var _this$appliedProps;this.appliedProps=Object.assign({},defaultPersistentChatHistoryProps,props),this.pageSize=void 0===(null===(_this$appliedProps=this.appliedProps)||void 0===_this$appliedProps?void 0:_this$appliedProps.pageSize)||isNaN(this.appliedProps.pageSize)?defaultPersistentChatHistoryProps.pageSize:this.appliedProps.pageSize}},{key:"reset",value:function reset(){this.isLastPull=!1,this.pageToken=null,this.lastMessage=null,this.count=0,this.isCurrentlyPulling=!1,this.pageTokenInTransitSet.clear()}},{key:"destroy",value:function destroy(){this.resetEventListener.unsubscribe()}},{key:"pullHistory",value:(_pullHistory=PersistentConversationHandler_asyncToGenerator(PersistentConversationHandler_regeneratorRuntime().mark((function _callee(){var pullTimer,_ref,messages,messagesDescOrder;return PersistentConversationHandler_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(pullTimer=createTimer(),!this.isCurrentlyPulling){_context.next=4;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.LCWPersistentHistoryPullBlocked,Description:"History pull blocked - already in progress"}),_context.abrupt("return");case 4:if(!this.pageToken||!this.pageTokenInTransitSet.has(this.pageToken)){_context.next=6;break}return _context.abrupt("return");case 6:return this.isCurrentlyPulling=!0,this.pageToken&&this.pageTokenInTransitSet.add(this.pageToken),_context.prev=8,_context.next=11,this.fetchHistoryMessages();case 11:if(null!=(messages=_context.sent)){_context.next=15;break}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.LCWPersistentHistoryReturnedNull,Description:"History pull returned null - Possible error occurred, will retry on next scroll",ElapsedTimeInMilliseconds:pullTimer.milliSecondsElapsed}),_context.abrupt("return");case 15:if(0!==messages.length){_context.next=20;break}return this.isLastPull=!0,utils_dispatchCustomEvent(common_ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWPersistentHistoryPullCompleted,Description:"History pull completed - no more messages",ElapsedTimeInMilliseconds:pullTimer.milliSecondsElapsed}),_context.abrupt("return");case 20:messagesDescOrder=null===(_ref=PersistentConversationHandler_toConsumableArray(messages))||void 0===_ref?void 0:_ref.reverse(),this.processHistoryMessages(messagesDescOrder),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.LCWPersistentHistoryPullCompleted,Description:"History pull completed successfully",ElapsedTimeInMilliseconds:pullTimer.milliSecondsElapsed,CustomProperties:{messageCount:messages.length,totalProcessed:this.count}});case 23:return _context.prev=23,this.isCurrentlyPulling=!1,this.pageToken&&this.pageTokenInTransitSet.delete(this.pageToken),_context.finish(23);case 27:case"end":return _context.stop()}}),_callee,this,[[8,,23,27]])}))),function pullHistory(){return _pullHistory.apply(this,arguments)})},{key:"processHistoryMessages",value:function processHistoryMessages(messagesDescOrder){var _step,_iterator=function PersistentConversationHandler_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=PersistentConversationHandler_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(messagesDescOrder);try{for(_iterator.s();!(_step=_iterator.n()).done;){var message=_step.value;try{var activity=this.processMessageToActivity(message);if(activity){utils_dispatchCustomEvent(common_ChatWidgetEvents.ADD_ACTIVITY,{activity:activity});var dividerActivity=this.createDividerActivity(activity);dividerActivity&&utils_dispatchCustomEvent(common_ChatWidgetEvents.ADD_ACTIVITY,{activity:dividerActivity}),this.lastMessage=activity}}catch(error){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ConvertPersistentChatHistoryMessageToActivityFailed,ExceptionDetails:error})}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"fetchHistoryMessages",value:(_fetchHistoryMessages=PersistentConversationHandler_asyncToGenerator(PersistentConversationHandler_regeneratorRuntime().mark((function _callee2(){var options,_this$facadeChatSDK,response,messages,pageToken;return PersistentConversationHandler_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.shouldPull()){_context2.next=3;break}return utils_dispatchCustomEvent(common_ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE),_context2.abrupt("return",[]);case 3:return options={pageSize:this.pageSize,pageToken:this.pageToken||void 0},_context2.prev=4,_context2.next=7,null===(_this$facadeChatSDK=this.facadeChatSDK)||void 0===_this$facadeChatSDK?void 0:_this$facadeChatSDK.fetchPersistentConversationHistory(options);case 7:if(response=_context2.sent,messages=response.chatMessages,pageToken=response.nextPageToken,this.pageToken=pageToken||null,null===pageToken&&(this.isLastPull=!0,utils_dispatchCustomEvent(common_ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE)),messages){_context2.next=15;break}return this.isLastPull=!0,utils_dispatchCustomEvent(common_ChatWidgetEvents.NO_MORE_HISTORY_AVAILABLE),_context2.abrupt("return",[]);case 15:return _context2.abrupt("return",messages);case 18:return _context2.prev=18,_context2.t0=_context2.catch(4),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.ERROR,{Event:TelemetryEvent.FetchPersistentChatHistoryFailed,ExceptionDetails:_context2.t0}),utils_dispatchCustomEvent(common_ChatWidgetEvents.HISTORY_LOAD_ERROR),_context2.abrupt("return",null);case 23:case"end":return _context2.stop()}}),_callee2,this,[[4,18]])}))),function fetchHistoryMessages(){return _fetchHistoryMessages.apply(this,arguments)})},{key:"shouldPull",value:function shouldPull(){return!this.isLastPull}},{key:"processMessageToActivity",value:function processMessageToActivity(message){try{var activity=activityConverters_convertPersistentChatHistoryMessageToActivity(message);return activity.id=activity.id||"activity-"+this.count,activity.channelData=Object.assign({},activity.channelData,{metadata:{count:this.count}}),this.count+=1,activity}catch(error){throw TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ConvertPersistentChatHistoryMessageToActivityFailed,ExceptionDetails:error}),error}}},{key:"createDividerActivity",value:function createDividerActivity(activity){var _this$lastMessage,_this$lastMessage$cha;if((null===(_this$lastMessage=this.lastMessage)||void 0===_this$lastMessage||null===(_this$lastMessage$cha=_this$lastMessage.channelData)||void 0===_this$lastMessage$cha?void 0:_this$lastMessage$cha.conversationId)!==activity.channelData.conversationId){var rawSequenceId=activity.channelData["webchat:sequence-id"],sequenceId="number"!=typeof rawSequenceId||isNaN(rawSequenceId)?1:rawSequenceId+1,timestamp=new Date(activity.timestamp).getTime()+1;return Object.assign({},activities_conversationDividerActivity,{channelData:Object.assign({},activities_conversationDividerActivity.channelData,{conversationId:activity.channelData.conversationId,"webchat:sequence-id":sequenceId}),timestamp:new Date(timestamp).toISOString(),identifier:"divider-"+activity.channelData.conversationId})}return null}}]),PersistentConversationHandler}(),common_PersistentConversationHandler=PersistentConversationHandler_PersistentConversationHandler;function usePersistentChatHistory_regeneratorRuntime(){usePersistentChatHistory_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function usePersistentChatHistory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var WebChatContainerStateful_uiTimer,hooks_usePersistentChatHistory=function usePersistentChatHistory(facadeChatSDK,props){var handlerRef=Object(react.useRef)(null);Object(react.useEffect)((function(){if(facadeChatSDK){TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXLCWPersistentChatHistoryInitialized,Description:"Persistent chat history hook initialized"}),handlerRef.current=new common_PersistentConversationHandler(facadeChatSDK,props);var handler=function(){var _ref=function usePersistentChatHistory_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){usePersistentChatHistory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){usePersistentChatHistory_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(usePersistentChatHistory_regeneratorRuntime().mark((function _callee(){var _handlerRef$current;return usePersistentChatHistory_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWPersistentChatHistoryFetchStarted,Description:"Persistent chat history fetch started"}),_context.prev=1,_context.next=4,null===(_handlerRef$current=handlerRef.current)||void 0===_handlerRef$current?void 0:_handlerRef$current.pullHistory();case 4:TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.LCWPersistentChatHistoryFetchCompleted,Description:"Persistent chat history fetch completed successfully"}),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(1),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.LCWPersistentChatHistoryFetchFailed,Description:"Persistent chat history fetch failed",ExceptionDetails:_context.t0});case 10:case"end":return _context.stop()}}),_callee,null,[[1,7]])})));return function handler(){return _ref.apply(this,arguments)}}(),unsubscribe=utils_SecureEventBus.getInstance().subscribe(common_ChatWidgetEvents.FETCH_PERSISTENT_CHAT_HISTORY,handler);return function(){var _handlerRef$current2;unsubscribe(),null===(_handlerRef$current2=handlerRef.current)||void 0===_handlerRef$current2||_handlerRef$current2.destroy()}}}),[facadeChatSDK])};function WebChatContainerStateful_slicedToArray(arr,i){return function WebChatContainerStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function WebChatContainerStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function WebChatContainerStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return WebChatContainerStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WebChatContainerStateful_arrayLikeToArray(o,minLen)}(arr,i)||function WebChatContainerStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WebChatContainerStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var WebChatContainerStateful_WebChatContainerStateful=function WebChatContainerStateful(props){var _props$webChatContain,_props$webChatContain2,_webChatStyles$primar,_defaultWebChatContai,_webChatContainerProp,_webChatContainerProp2,_webChatContainerProp3,_webChatContainerProp4,_webChatContainerProp5,_webChatContainerProp6,_webChatContainerProp7,_webChatContainerProp8,_webChatContainerProp9,_webChatContainerProp10,_webChatContainerProp11,_webChatContainerProp12,_webChatContainerProp13,_webChatContainerProp14,_webChatContainerProp15,_webChatContainerProp16,_webChatContainerProp17,_webChatContainerProp18,_webChatContainerProp19,_webChatContainerProp20,_webChatContainerProp21,_props$webChatContain7,_props$webChatContain8,_props$webChatContain9,_defaultWebChatContai2,_props$webChatContain10,_props$webChatContain11,_props$webChatContain12,_defaultWebChatContai3,_webChatContainerProp22,_webChatContainerProp23,_webChatContainerProp24,_webChatContainerProp25,_webChatContainerProp26,_webChatContainerProp27,_webChatContainerProp28,_webChatContainerProp29,_webChatContainerProp30,_webChatContainerProp31,_webChatContainerProp32,_webChatContainerProp33,_webChatContainerProp34,_webChatContainerProp35,_webChatContainerProp36,_webChatContainerProp37,_webChatContainerProp38,_webChatContainerProp39,_webChatContainerProp40,_webChatContainerProp41,_webChatContainerProp42,_webChatContainerProp43,_webChatContainerProp44,_webChatContainerProp45,_webChatContainerProp46,_webChatContainerProp47,_webChatContainerProp48,_webChatContainerProp49,_background,_props$webChatContain13,_props$webChatContain14,_webChatContainerProp50,_webChatContainerProp51,_webChatContainerProp52,_webChatContainerProp53,_webChatContainerProp54,_webChatContainerProp55,_webChatContainerProp56,_webChatContainerProp57,_props$citationPanePr,_props$citationPanePr2,_props$citationPanePr3,_props$citationPanePr4,_props$citationPanePr5,facadeChatSDK=WebChatContainerStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],webChatStyles=null!==(_props$webChatContain=null===(_props$webChatContain2=props.webChatContainerProps)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.webChatStyles)&&void 0!==_props$webChatContain?_props$webChatContain:defaultWebChatContainerStatefulProps.webChatStyles,fontFamilyWithEmojis=function createIOSOptimizedEmojiFont(primaryFont){var emojiSupport='"Apple Color Emoji", "Segoe UI Emoji"';return!primaryFont||primaryFont.includes("system-ui")||primaryFont.includes("Apple Color Emoji")?"system-ui, "+emojiSupport:"system-ui, "+emojiSupport+", "+primaryFont}(null!==(_webChatStyles$primar=null==webChatStyles?void 0:webChatStyles.primaryFont)&&void 0!==_webChatStyles$primar?_webChatStyles$primar:null===(_defaultWebChatContai=defaultWebChatContainerStatefulProps.webChatStyles)||void 0===_defaultWebChatContai?void 0:_defaultWebChatContai.primaryFont);Object(react.useEffect)((function(){WebChatContainerStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXWebchatContainerCompleted})}),[]);var _props$persistentChat,_useState2=WebChatContainerStateful_slicedToArray(Object(react.useState)(!1),2),citationPaneOpen=_useState2[0],setCitationPaneOpen=_useState2[1],_useState4=WebChatContainerStateful_slicedToArray(Object(react.useState)(""),2),citationPaneText=_useState4[0],setCitationPaneText=_useState4[1],citationOpeningRef=Object(react.useRef)(!1),BasicWebChat=botframework_webchat.Components.BasicWebChat,_useChatContextStore2=WebChatContainerStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],webChatContainerProps=props.webChatContainerProps,contextDataStore=props.contextDataStore,shouldLoadPersistentHistoryMessages=function shouldLoadPersistentChatHistory(extendedChatConfig){var _extendedChatConfig$L,_extendedChatConfig$L2,_extendedChatConfig$L3;return!!liveChatConfigUtils_isPersistentChatEnabled(null==extendedChatConfig||null===(_extendedChatConfig$L=extendedChatConfig.LiveWSAndLiveChatEngJoin)||void 0===_extendedChatConfig$L?void 0:_extendedChatConfig$L.msdyn_conversationmode)&&!!parseBooleanFromConfig(null==extendedChatConfig||null===(_extendedChatConfig$L2=extendedChatConfig.LiveWSAndLiveChatEngJoin)||void 0===_extendedChatConfig$L2?void 0:_extendedChatConfig$L2.msdyn_enablepersistentchatpreviousconversations)&&parseBooleanFromConfig(null==extendedChatConfig||null===(_extendedChatConfig$L3=extendedChatConfig.LcwFcbConfiguration)||void 0===_extendedChatConfig$L3?void 0:_extendedChatConfig$L3.lcwPersistentChatHistoryEnabled)}(props.chatConfig);shouldLoadPersistentHistoryMessages&&(TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.PersistentChatHistoryEnabled}),hooks_usePersistentChatHistory(facadeChatSDK,null!==(_props$persistentChat=null==props?void 0:props.persistentChatHistoryProps)&&void 0!==_props$persistentChat?_props$persistentChat:{}));Object(react.useEffect)((function(){var clickHandler=function clickHandler(ev){try{if(citationOpeningRef.current)return;var target=ev.target,anchor=target.closest&&target.closest('a[href^="cite:"]');if(anchor){ev.preventDefault(),citationOpeningRef.current=!0;var text="";try{var _state$domainStates,_state$domainStates$c,cid=anchor.getAttribute("href");if(null!=state&&null!==(_state$domainStates=state.domainStates)&&void 0!==_state$domainStates&&_state$domainStates.citations&&cid)text=null!==(_state$domainStates$c=state.domainStates.citations[cid])&&void 0!==_state$domainStates$c?_state$domainStates$c:"";text||(text=anchor.getAttribute("title")||anchor.innerText||"")}catch(e){}setCitationPaneOpen(!0),setCitationPaneText(text),setTimeout((function(){citationOpeningRef.current=!1}),100)}}catch(e){citationOpeningRef.current=!1}};return document.addEventListener("click",clickHandler),function(){return document.removeEventListener("click",clickHandler)}}),[state]);var containerStyles={root:Object.assign({},defaultWebChatContainerStatefulProps.containerStyles,null==webChatContainerProps?void 0:webChatContainerProps.containerStyles,{display:state.appStates.isMinimized?"none":""})},localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,null==webChatContainerProps?void 0:webChatContainerProps.localizedTexts);return Object(react.useEffect)((function(){var _props$webChatContain3,_props$webChatContain4;if("standard"!==function getDeviceType(){var userAgent=navigator.userAgent.toLowerCase();return/android/.test(userAgent)?"android":/iphone|ipad|ipod/.test(userAgent)?"ios":"standard"}()&&void 0!==(null==webChatContainerProps?void 0:webChatContainerProps.webChatHistoryMobileAccessibilityLabel)){var chatHistoryElement=document.querySelector("."+Constants.k.webChatHistoryContainer);chatHistoryElement&&chatHistoryElement.setAttribute(Constants.j.ariaLabel,webChatContainerProps.webChatHistoryMobileAccessibilityLabel)}if(dispatch({type:LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS,payload:null==webChatContainerProps?void 0:webChatContainerProps.renderingMiddlewareProps}),dispatch({type:LiveChatWidgetActionType.SET_MIDDLEWARE_LOCALIZED_TEXTS,payload:localizedTexts}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.WebChatLoaded}),!0!==(null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3||null===(_props$webChatContain4=_props$webChatContain3.renderingMiddlewareProps)||void 0===_props$webChatContain4?void 0:_props$webChatContain4.disableThirdPartyCookiesAlert)&&!contextDataStore)try{localStorage,sessionStorage}catch(error){var _localizedTexts$THIRD;if(!window.TPCWarningShown)NotificationHandler_NotificationHandler.notifyWarning(NotificationScenarios.TPC,null!==(_localizedTexts$THIRD=null==localizedTexts?void 0:localizedTexts.THIRD_PARTY_COOKIES_BLOCKED_ALERT_MESSAGE)&&void 0!==_localizedTexts$THIRD?_localizedTexts$THIRD:""),window.TPCWarningShown=!0}}),[]),Object(react.useEffect)((function(){var _props$webChatContain5,_props$webChatContain6;if(null!==(_props$webChatContain5=props.webChatContainerProps)&&void 0!==_props$webChatContain5&&null!==(_props$webChatContain6=_props$webChatContain5.botMagicCode)&&void 0!==_props$webChatContain6&&_props$webChatContain6.disabled)if(window.BroadcastChannel){var magicCodeBroadcastChannel=new window.BroadcastChannel(Constants.e.magicCodeBroadcastChannel),magicCodeResponseBroadcastChannel=new window.BroadcastChannel(Constants.e.magicCodeResponseBroadcastChannel);magicCodeBroadcastChannel.addEventListener("message",(function eventListener(event){var data=event.data;if(BotMagicCodeStore.botOAuthSignInId===data.signin){var signin=data.signin,action=function postActivity(activity){return{type:WebChatActionType.DIRECT_LINE_POST_ACTIVITY,meta:{method:"keyboard"},payload:{activity:Object.assign({channelData:void 0,text:"",textFormat:"plain",type:Constants.e.message},activity)}}}({text:""+data.code,channelData:{tags:[Constants.e.hiddenTag]}});WebChatStoreLoader.store.dispatch(action);var response=function createMagicCodeSuccessResponse(signin){return{signin:signin,result:"Success"}}(signin);magicCodeResponseBroadcastChannel.postMessage(response),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.SuppressBotMagicCodeSucceeded}),BotMagicCodeStore.botOAuthSignInId="",magicCodeBroadcastChannel.close(),magicCodeResponseBroadcastChannel.close()}else TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SuppressBotMagicCodeFailed,Description:"Signin does not match"})}))}else TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.SuppressBotMagicCodeFailed,Description:"BroadcastChannel not supported by default on current browser"})}),[]),Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXWebchatContainerCompleted,ElapsedTimeInMilliseconds:WebChatContainerStateful_uiTimer.milliSecondsElapsed})}),[]),Object(react.useEffect)((function(){state.appStates.isMinimized||setFocusOnSendBox()}),[state.appStates.isMinimized]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n        .webchat__stacked-layout__content .ac-pushButton {\n            cursor: pointer;\n            border: 1px solid "+(null!==(_webChatContainerProp=null==webChatContainerProps||null===(_webChatContainerProp2=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp2?void 0:_webChatContainerProp2.color)&&void 0!==_webChatContainerProp?_webChatContainerProp:defaultAdaptiveCardStyles.color)+"  !important;\n            color: "+(null!==(_webChatContainerProp3=null==webChatContainerProps||null===(_webChatContainerProp4=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp4?void 0:_webChatContainerProp4.color)&&void 0!==_webChatContainerProp3?_webChatContainerProp3:defaultAdaptiveCardStyles.color)+"  !important;\n            background-color: "+(null!==(_webChatContainerProp5=null==webChatContainerProps||null===(_webChatContainerProp6=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp6?void 0:_webChatContainerProp6.background)&&void 0!==_webChatContainerProp5?_webChatContainerProp5:defaultAdaptiveCardStyles.background)+";\n        }\n\n        .webchat__bubble__content>div#ms_lcw_webchat_adaptive_card {\n            background: "+(null!==(_webChatContainerProp7=null==webChatContainerProps||null===(_webChatContainerProp8=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp8?void 0:_webChatContainerProp8.background)&&void 0!==_webChatContainerProp7?_webChatContainerProp7:defaultAdaptiveCardStyles.background)+";\n        }\n\n        .webchat__bubble__content>div#ms_lcw_webchat_adaptive_card .ac-textBlock[role=heading] {\n            color: "+(null!==(_webChatContainerProp9=null==webChatContainerProps||null===(_webChatContainerProp10=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp10?void 0:_webChatContainerProp10.color)&&void 0!==_webChatContainerProp9?_webChatContainerProp9:defaultAdaptiveCardStyles.color)+"  !important;\n        }\n\n        .webchat__bubble__content>div#ms_lcw_webchat_adaptive_card label .ac-textRun:first-child {\n            color: "+(null!==(_webChatContainerProp11=null==webChatContainerProps||null===(_webChatContainerProp12=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp12?void 0:_webChatContainerProp12.color)&&void 0!==_webChatContainerProp11?_webChatContainerProp11:defaultAdaptiveCardStyles.color)+"  !important;\n        }\n\n        .webchat__stacked-layout__content div.webchat__stacked-layout__message-row div.webchat__bubble--from-user {\n            max-width: "+(null!==(_webChatContainerProp13=null==webChatContainerProps||null===(_webChatContainerProp14=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp14||null===(_webChatContainerProp15=_webChatContainerProp14.userMessageBoxStyles)||void 0===_webChatContainerProp15?void 0:_webChatContainerProp15.maxWidth)&&void 0!==_webChatContainerProp13?_webChatContainerProp13:null==defaultUserMessageBoxStyles?void 0:defaultUserMessageBoxStyles.maxWidth)+"\n        }\n\n        .webchat__stacked-layout--show-avatar div.webchat__stacked-layout__content div.webchat__stacked-layout__message-row div.webchat__stacked-layout__message {\n            max-width: "+(null!==(_webChatContainerProp16=null==webChatContainerProps||null===(_webChatContainerProp17=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp17||null===(_webChatContainerProp18=_webChatContainerProp17.systemMessageBoxStyles)||void 0===_webChatContainerProp18?void 0:_webChatContainerProp18.maxWidth)&&void 0!==_webChatContainerProp16?_webChatContainerProp16:null==defaultSystemMessageBoxStyles?void 0:defaultSystemMessageBoxStyles.maxWidth)+'\n        }\n\n        div[class="ac-textBlock"] *,\n        div[class="ac-input-container"] * {white-space:'+(null!==(_webChatContainerProp19=null==webChatContainerProps||null===(_webChatContainerProp20=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp20?void 0:_webChatContainerProp20.textWhiteSpace)&&void 0!==_webChatContainerProp19?_webChatContainerProp19:defaultAdaptiveCardStyles.textWhiteSpace)+'}\n\n        div[class="ac-input-container"] input.ac-multichoiceInput,\n        div[class="ac-input-container"] select.ac-multichoiceInput {\n            '+(null!=webChatContainerProps&&null!==(_webChatContainerProp21=webChatContainerProps.adaptiveCardStyles)&&void 0!==_webChatContainerProp21&&_webChatContainerProp21.choiceInputPadding?"padding: "+webChatContainerProps.adaptiveCardStyles.choiceInputPadding+" !important;":"")+"\n        }\n\n        .ms_lcw_webchat_received_message>div.webchat__stacked-layout>div.webchat__stacked-layout__main>div.webchat__stacked-layout__content>div.webchat__stacked-layout__message-row>[class^=webchat]:not(.webchat__bubble--from-user)>.webchat__bubble__content {\n            background-color: "+(null!==(_props$webChatContain7=null===(_props$webChatContain8=props.webChatContainerProps)||void 0===_props$webChatContain8||null===(_props$webChatContain9=_props$webChatContain8.webChatStyles)||void 0===_props$webChatContain9?void 0:_props$webChatContain9.bubbleBackground)&&void 0!==_props$webChatContain7?_props$webChatContain7:null===(_defaultWebChatContai2=defaultWebChatContainerStatefulProps.webChatStyles)||void 0===_defaultWebChatContai2?void 0:_defaultWebChatContai2.bubbleBackground)+";\n            color:"+(null!==(_props$webChatContain10=null===(_props$webChatContain11=props.webChatContainerProps)||void 0===_props$webChatContain11||null===(_props$webChatContain12=_props$webChatContain11.webChatStyles)||void 0===_props$webChatContain12?void 0:_props$webChatContain12.bubbleTextColor)&&void 0!==_props$webChatContain10?_props$webChatContain10:null===(_defaultWebChatContai3=defaultWebChatContainerStatefulProps.webChatStyles)||void 0===_defaultWebChatContai3?void 0:_defaultWebChatContai3.bubbleTextColor)+';\n        }\n\n        div[class="ac-textBlock"] a:link,\n        div[class="ac-textBlock"] a:visited,\n        div[class="ac-textBlock"] a:hover,\n        div[class="ac-textBlock"] a:active {\n            color: '+(null!==(_webChatContainerProp22=null==webChatContainerProps||null===(_webChatContainerProp23=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp23?void 0:_webChatContainerProp23.anchorColor)&&void 0!==_webChatContainerProp22?_webChatContainerProp22:defaultAdaptiveCardStyles.anchorColor)+";\n        }\n\n        .webchat__stacked-layout__content .ac-actionSet {\n          flex-wrap: "+(null!==(_webChatContainerProp24=null==webChatContainerProps||null===(_webChatContainerProp25=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp25?void 0:_webChatContainerProp25.buttonFlexWrap)&&void 0!==_webChatContainerProp24?_webChatContainerProp24:defaultAdaptiveCardStyles.buttonFlexWrap)+" !important;\n          gap: "+(null!==(_webChatContainerProp26=null==webChatContainerProps||null===(_webChatContainerProp27=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp27?void 0:_webChatContainerProp27.buttonGap)&&void 0!==_webChatContainerProp26?_webChatContainerProp26:defaultAdaptiveCardStyles.buttonGap)+" !important;\n         }\n\n        .webchat__stacked-layout__content .ac-actionSet > .ac-pushButton > div {\n          white-space: "+(null!==(_webChatContainerProp28=null==webChatContainerProps||null===(_webChatContainerProp29=webChatContainerProps.adaptiveCardStyles)||void 0===_webChatContainerProp29?void 0:_webChatContainerProp29.buttonWhiteSpace)&&void 0!==_webChatContainerProp28?_webChatContainerProp28:defaultAdaptiveCardStyles.buttonWhiteSpace)+" !important;\n        }\n\n        .ms_lcw_webchat_received_message img.webchat__render-markdown__external-link-icon {\n            /* Fallback for browsers that don't support mask */\n            background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIzIDMgMTggMTgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcuMjUwMSA0LjUwMDE3SDEwLjc0OTVDMTEuMTYzNyA0LjUwMDE3IDExLjQ5OTUgNC44MzU5NiAxMS40OTk1IDUuMjUwMTdDMTEuNDk5NSA1LjYyOTg2IDExLjIxNzMgNS45NDM2NiAxMC44NTEzIDUuOTkzMzJMMTAuNzQ5NSA2LjAwMDE3SDcuMjQ5NzRDNi4wNzA3OSA1Ljk5OTYxIDUuMTAzNDkgNi45MDY1NiA1LjAwNzg2IDguMDYxMTJMNS4wMDAyOCA4LjIyMDAzTDUuMDAzMTIgMTYuNzUwN0M1LjAwMzQzIDE3Ljk0MTUgNS45Mjg4NSAxOC45MTYxIDcuMDk5NjYgMTguOTk0OUw3LjI1MzcxIDE5LjAwMDFMMTUuNzUxOCAxOC45ODg0QzE2Ljk0MTUgMTguOTg2OCAxNy45MTQ1IDE4LjA2MiAxNy45OTM1IDE2Ljg5MjNMMTcuOTk4NyAxNi43Mzg0VjEzLjIzMjFDMTcuOTk4NyAxMi44MTc5IDE4LjMzNDUgMTIuNDgyMSAxOC43NDg3IDEyLjQ4MjFDMTkuMTI4NCAxMi40ODIxIDE5LjQ0MjIgMTIuNzY0MyAxOS40OTE4IDEzLjEzMDNMMTkuNDk4NyAxMy4yMzIxVjE2LjczODRDMTkuNDk4NyAxOC43NDA3IDE3LjkyOTMgMjAuMzc2OSAxNS45NTI4IDIwLjQ4MjlMMTUuNzUzOCAyMC40ODg0TDcuMjU4MjcgMjAuNTAwMUw3LjA1NDk1IDIwLjQ5NDlDNS4xNDIzOSAyMC4zOTU0IDMuNjA4OTUgMTguODYyNyAzLjUwODM3IDE2Ljk1MDJMMy41MDMxMiAxNi43NTExTDMuNTAwODkgOC4yNTI3TDMuNTA1MjkgOC4wNTAyQzMuNjA1MzkgNi4xMzc0OSA1LjEzODY3IDQuNjA0NDkgNy4wNTA5NiA0LjUwNTI3TDcuMjUwMSA0LjUwMDE3SDEwLjc0OTVINy4yNTAxWk0xMy43NDgxIDMuMDAxNDZMMjAuMzAxOCAzLjAwMTk3TDIwLjQwMTQgMy4wMTU3NUwyMC41MDIyIDMuMDQzOTNMMjAuNTU5IDMuMDY4MDNDMjAuNjEyMiAzLjA5MTIyIDIwLjY2MzQgMy4xMjE2MyAyMC43MTExIDMuMTU4ODVMMjAuNzgwNCAzLjIyMTU2TDIwLjg2NDEgMy4zMjAxNEwyMC45MTgzIDMuNDEwMjVMMjAuOTU3IDMuNTAwNTdMMjAuOTc2MiAzLjU2NDc2TDIwLjk4OTggMy42Mjg2MkwyMC45OTkyIDMuNzIyODJMMjAuOTk5NyAxMC4yNTU0QzIwLjk5OTcgMTAuNjY5NiAyMC42NjM5IDExLjAwNTQgMjAuMjQ5NyAxMS4wMDU0QzE5Ljg3IDExLjAwNTQgMTkuNTU2MiAxMC43MjMyIDE5LjUwNjUgMTAuMzU3MUwxOS40OTk3IDEwLjI1NTRMMTkuNDk4OSA1LjU2MTQ3TDEyLjI3OTcgMTIuNzg0N0MxMi4wMTM0IDEzLjA1MSAxMS41OTY4IDEzLjA3NTMgMTEuMzAzMSAxMi44NTc1TDExLjIxOSAxMi43ODQ5QzEwLjk1MjcgMTIuNTE4NyAxMC45Mjg0IDEyLjEwMjEgMTEuMTQ2MiAxMS44MDg0TDExLjIxODggMTEuNzI0M0wxOC40MzY5IDQuNTAxNDZIMTMuNzQ4MUMxMy4zNjg0IDQuNTAxNDYgMTMuMDU0NiA0LjIxOTMxIDEzLjAwNSAzLjg1MzI0TDEyLjk5ODEgMy43NTE0NkMxMi45OTgxIDMuMzcxNzcgMTMuMjgwMyAzLjA1Nzk3IDEzLjY0NjQgMy4wMDgzMUwxMy43NDgxIDMuMDAxNDZaIiBmaWxsPSIjRkZGRkZGIiAvPjwvc3ZnPg==);\n            filter: "+(null!==(_webChatContainerProp30=null==webChatContainerProps||null===(_webChatContainerProp31=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp31||null===(_webChatContainerProp32=_webChatContainerProp31.receivedMessageAnchorStyles)||void 0===_webChatContainerProp32?void 0:_webChatContainerProp32.filter)&&void 0!==_webChatContainerProp30?_webChatContainerProp30:null==defaultReceivedMessageAnchorStyles?void 0:defaultReceivedMessageAnchorStyles.filter)+";\n            height: .75em;\n            width: .75em;\n            margin-left: .25em;\n            display: inline-block;\n        }\n\n        .ms_lcw_webchat_sent_message img.webchat__render-markdown__external-link-icon {\n            /* Fallback for browsers that don't support mask */\n            background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIzIDMgMTggMTgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcuMjUwMSA0LjUwMDE3SDEwLjc0OTVDMTEuMTYzNyA0LjUwMDE3IDExLjQ5OTUgNC44MzU5NiAxMS40OTk1IDUuMjUwMTdDMTEuNDk5NSA1LjYyOTg2IDExLjIxNzMgNS45NDM2NiAxMC44NTEzIDUuOTkzMzJMMTAuNzQ5NSA2LjAwMDE3SDcuMjQ5NzRDNi4wNzA3OSA1Ljk5OTYxIDUuMTAzNDkgNi45MDY1NiA1LjAwNzg2IDguMDYxMTJMNS4wMDAyOCA4LjIyMDAzTDUuMDAzMTIgMTYuNzUwN0M1LjAwMzQzIDE3Ljk0MTUgNS45Mjg4NSAxOC45MTYxIDcuMDk5NjYgMTguOTk0OUw3LjI1MzcxIDE5LjAwMDFMMTUuNzUxOCAxOC45ODg0QzE2Ljk0MTUgMTguOTg2OCAxNy45MTQ1IDE4LjA2MiAxNy45OTM1IDE2Ljg5MjNMMTcuOTk4NyAxNi43Mzg0VjEzLjIzMjFDMTcuOTk4NyAxMi44MTc5IDE4LjMzNDUgMTIuNDgyMSAxOC43NDg3IDEyLjQ4MjFDMTkuMTI4NCAxMi40ODIxIDE5LjQ0MjIgMTIuNzY0MyAxOS40OTE4IDEzLjEzMDNMMTkuNDk4NyAxMy4yMzIxVjE2LjczODRDMTkuNDk4NyAxOC43NDA3IDE3LjkyOTMgMjAuMzc2OSAxNS45NTI4IDIwLjQ4MjlMMTUuNzUzOCAyMC40ODg0TDcuMjU4MjcgMjAuNTAwMUw3LjA1NDk1IDIwLjQ5NDlDNS4xNDIzOSAyMC4zOTU0IDMuNjA4OTUgMTguODYyNyAzLjUwODM3IDE2Ljk1MDJMMy41MDMxMiAxNi43NTExTDMuNTAwODkgOC4yNTI3TDMuNTA1MjkgOC4wNTAyQzMuNjA1MzkgNi4xMzc0OSA1LjEzODY3IDQuNjA0NDkgNy4wNTA5NiA0LjUwNTI3TDcuMjUwMSA0LjUwMDE3SDEwLjc0OTVINy4yNTAxWk0xMy43NDgxIDMuMDAxNDZMMjAuMzAxOCAzLjAwMTk3TDIwLjQwMTQgMy4wMTU3NUwyMC41MDIyIDMuMDQzOTNMMjAuNTU5IDMuMDY4MDNDMjAuNjEyMiAzLjA5MTIyIDIwLjY2MzQgMy4xMjE2MyAyMC43MTExIDMuMTU4ODVMMjAuNzgwNCAzLjIyMTU2TDIwLjg2NDEgMy4zMjAxNEwyMC45MTgzIDMuNDEwMjVMMjAuOTU3IDMuNTAwNTdMMjAuOTc2MiAzLjU2NDc2TDIwLjk4OTggMy42Mjg2MkwyMC45OTkyIDMuNzIyODJMMjAuOTk5NyAxMC4yNTU0QzIwLjk5OTcgMTAuNjY5NiAyMC42NjM5IDExLjAwNTQgMjAuMjQ5NyAxMS4wMDU0QzE5Ljg3IDExLjAwNTQgMTkuNTU2MiAxMC43MjMyIDE5LjUwNjUgMTAuMzU3MUwxOS40OTk3IDEwLjI1NTRMMTkuNDk4OSA1LjU2MTQ3TDEyLjI3OTcgMTIuNzg0N0MxMi4wMTM0IDEzLjA1MSAxMS41OTY4IDEzLjA3NTMgMTEuMzAzMSAxMi44NTc1TDExLjIxOSAxMi43ODQ5QzEwLjk1MjcgMTIuNTE4NyAxMC45Mjg0IDEyLjEwMjEgMTEuMTQ2MiAxMS44MDg0TDExLjIxODggMTEuNzI0M0wxOC40MzY5IDQuNTAxNDZIMTMuNzQ4MUMxMy4zNjg0IDQuNTAxNDYgMTMuMDU0NiA0LjIxOTMxIDEzLjAwNSAzLjg1MzI0TDEyLjk5ODEgMy43NTE0NkMxMi45OTgxIDMuMzcxNzcgMTMuMjgwMyAzLjA1Nzk3IDEzLjY0NjQgMy4wMDgzMUwxMy43NDgxIDMuMDAxNDZaIiBmaWxsPSIjRkZGRkZGIiAvPjwvc3ZnPg==);\n            filter: "+(null!==(_webChatContainerProp33=null==webChatContainerProps||null===(_webChatContainerProp34=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp34||null===(_webChatContainerProp35=_webChatContainerProp34.sentMessageAnchorStyles)||void 0===_webChatContainerProp35?void 0:_webChatContainerProp35.filter)&&void 0!==_webChatContainerProp33?_webChatContainerProp33:null==defaultSentMessageAnchorStyles?void 0:defaultSentMessageAnchorStyles.filter)+";\n            height: .75em;\n            width: .75em;\n            margin-left: .25em;\n            display: inline-block;\n        }\n\n        /* Modern browsers with mask support */\n        @supports (mask: url()) or (-webkit-mask: url()) {\n            .ms_lcw_webchat_received_message img.webchat__render-markdown__external-link-icon {\n                background-color: "+(null!==(_webChatContainerProp36=null==webChatContainerProps||null===(_webChatContainerProp37=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp37||null===(_webChatContainerProp38=_webChatContainerProp37.receivedMessageAnchorStyles)||void 0===_webChatContainerProp38?void 0:_webChatContainerProp38.color)&&void 0!==_webChatContainerProp36?_webChatContainerProp36:null==defaultReceivedMessageAnchorStyles?void 0:defaultReceivedMessageAnchorStyles.color)+" !important;\n                background-image: none !important;\n                filter: none !important;\n                mask: url(\"data:image/svg+xml,%3Csvg viewBox='3 3 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.2501 4.50017H10.7495C11.1637 4.50017 11.4995 4.83596 11.4995 5.25017C11.4995 5.62986 11.2173 5.94366 10.8513 5.99332L10.7495 6.00017H7.24974C6.07079 5.99961 5.10349 6.90656 5.00786 8.06112L5.00028 8.22003L5.00312 16.7507C5.00343 17.9415 5.92885 18.9161 7.09966 18.9949L7.25371 19.0001L15.7518 18.9884C16.9415 18.9868 17.9145 18.062 17.9935 16.8923L17.9987 16.7384V13.2321C17.9987 12.8179 18.3345 12.4821 18.7487 12.4821C19.1284 12.4821 19.4422 12.7643 19.4918 13.1303L19.4987 13.2321V16.7384C19.4987 18.7407 17.9293 20.3769 15.9528 20.4829L15.7538 20.4884L7.25827 20.5001L7.05495 20.4949C5.14239 20.3954 3.60895 18.8627 3.50837 16.9502L3.50312 16.7511L3.50089 8.2527L3.50529 8.0502C3.60539 6.13749 5.13867 4.60449 7.05096 4.50527L7.2501 4.50017H10.7495H7.2501ZM13.7481 3.00146L20.3018 3.00197L20.4014 3.01575L20.5022 3.04393L20.559 3.06803C20.6122 3.09122 20.6634 3.12163 20.7111 3.15885L20.7804 3.22156L20.8641 3.32014L20.9183 3.41025L20.957 3.50057L20.9762 3.56476L20.9898 3.62862L20.9992 3.72282L20.9997 10.2554C20.9997 10.6696 20.6639 11.0054 20.2497 11.0054C19.87 11.0054 19.5562 10.7232 19.5065 10.3571L19.4997 10.2554L19.4989 5.56147L12.2797 12.7847C12.0134 13.051 11.5968 13.0753 11.3031 12.8575L11.219 12.7849C10.9527 12.5187 10.9284 12.1021 11.1462 11.8084L11.2188 11.7243L18.4369 4.50146H13.7481C13.3684 4.50146 13.0546 4.21931 13.005 3.85324L12.9981 3.75146C12.9981 3.37177 13.2803 3.05797 13.6464 3.00831L13.7481 3.00146Z' fill='currentColor' /%3E%3C/svg%3E\") no-repeat center;\n                -webkit-mask: url(\"data:image/svg+xml,%3Csvg viewBox='3 3 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.2501 4.50017H10.7495C11.1637 4.50017 11.4995 4.83596 11.4995 5.25017C11.4995 5.62986 11.2173 5.94366 10.8513 5.99332L10.7495 6.00017H7.24974C6.07079 5.99961 5.10349 6.90656 5.00786 8.06112L5.00028 8.22003L5.00312 16.7507C5.00343 17.9415 5.92885 18.9161 7.09966 18.9949L7.25371 19.0001L15.7518 18.9884C16.9415 18.9868 17.9145 18.062 17.9935 16.8923L17.9987 16.7384V13.2321C17.9987 12.8179 18.3345 12.4821 18.7487 12.4821C19.1284 12.4821 19.4422 12.7643 19.4918 13.1303L19.4987 13.2321V16.7384C19.4987 18.7407 17.9293 20.3769 15.9528 20.4829L15.7538 20.4884L7.25827 20.5001L7.05495 20.4949C5.14239 20.3954 3.60895 18.8627 3.50837 16.9502L3.50312 16.7511L3.50089 8.2527L3.50529 8.0502C3.60539 6.13749 5.13867 4.60449 7.05096 4.50527L7.2501 4.50017H10.7495H7.2501ZM13.7481 3.00146L20.3018 3.00197L20.4014 3.01575L20.5022 3.04393L20.559 3.06803C20.6122 3.09122 20.6634 3.12163 20.7111 3.15885L20.7804 3.22156L20.8641 3.32014L20.9183 3.41025L20.957 3.50057L20.9762 3.56476L20.9898 3.62862L20.9992 3.72282L20.9997 10.2554C20.9997 10.6696 20.6639 11.0054 20.2497 11.0054C19.87 11.0054 19.5562 10.7232 19.5065 10.3571L19.4997 10.2554L19.4989 5.56147L12.2797 12.7847C12.0134 13.051 11.5968 13.0753 11.3031 12.8575L11.219 12.7849C10.9527 12.5187 10.9284 12.1021 11.1462 11.8084L11.2188 11.7243L18.4369 4.50146H13.7481C13.3684 4.50146 13.0546 4.21931 13.005 3.85324L12.9981 3.75146C12.9981 3.37177 13.2803 3.05797 13.6464 3.00831L13.7481 3.00146Z' fill='currentColor' /%3E%3C/svg%3E\") no-repeat center;\n                mask-size: contain;\n                -webkit-mask-size: contain;\n            }\n\n            .ms_lcw_webchat_sent_message img.webchat__render-markdown__external-link-icon {\n                background-color: "+(null!==(_webChatContainerProp39=null==webChatContainerProps||null===(_webChatContainerProp40=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp40||null===(_webChatContainerProp41=_webChatContainerProp40.sentMessageAnchorStyles)||void 0===_webChatContainerProp41?void 0:_webChatContainerProp41.color)&&void 0!==_webChatContainerProp39?_webChatContainerProp39:null==defaultSentMessageAnchorStyles?void 0:defaultSentMessageAnchorStyles.color)+" !important;\n                background-image: none !important;\n                filter: none !important;\n                mask: url(\"data:image/svg+xml,%3Csvg viewBox='3 3 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.2501 4.50017H10.7495C11.1637 4.50017 11.4995 4.83596 11.4995 5.25017C11.4995 5.62986 11.2173 5.94366 10.8513 5.99332L10.7495 6.00017H7.24974C6.07079 5.99961 5.10349 6.90656 5.00786 8.06112L5.00028 8.22003L5.00312 16.7507C5.00343 17.9415 5.92885 18.9161 7.09966 18.9949L7.25371 19.0001L15.7518 18.9884C16.9415 18.9868 17.9145 18.062 17.9935 16.8923L17.9987 16.7384V13.2321C17.9987 12.8179 18.3345 12.4821 18.7487 12.4821C19.1284 12.4821 19.4422 12.7643 19.4918 13.1303L19.4987 13.2321V16.7384C19.4987 18.7407 17.9293 20.3769 15.9528 20.4829L15.7538 20.4884L7.25827 20.5001L7.05495 20.4949C5.14239 20.3954 3.60895 18.8627 3.50837 16.9502L3.50312 16.7511L3.50089 8.2527L3.50529 8.0502C3.60539 6.13749 5.13867 4.60449 7.05096 4.50527L7.2501 4.50017H10.7495H7.2501ZM13.7481 3.00146L20.3018 3.00197L20.4014 3.01575L20.5022 3.04393L20.559 3.06803C20.6122 3.09122 20.6634 3.12163 20.7111 3.15885L20.7804 3.22156L20.8641 3.32014L20.9183 3.41025L20.957 3.50057L20.9762 3.56476L20.9898 3.62862L20.9992 3.72282L20.9997 10.2554C20.9997 10.6696 20.6639 11.0054 20.2497 11.0054C19.87 11.0054 19.5562 10.7232 19.5065 10.3571L19.4997 10.2554L19.4989 5.56147L12.2797 12.7847C12.0134 13.051 11.5968 13.0753 11.3031 12.8575L11.219 12.7849C10.9527 12.5187 10.9284 12.1021 11.1462 11.8084L11.2188 11.7243L18.4369 4.50146H13.7481C13.3684 4.50146 13.0546 4.21931 13.005 3.85324L12.9981 3.75146C12.9981 3.37177 13.2803 3.05797 13.6464 3.00831L13.7481 3.00146Z' fill='currentColor' /%3E%3C/svg%3E\") no-repeat center;\n                -webkit-mask: url(\"data:image/svg+xml,%3Csvg viewBox='3 3 18 18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.2501 4.50017H10.7495C11.1637 4.50017 11.4995 4.83596 11.4995 5.25017C11.4995 5.62986 11.2173 5.94366 10.8513 5.99332L10.7495 6.00017H7.24974C6.07079 5.99961 5.10349 6.90656 5.00786 8.06112L5.00028 8.22003L5.00312 16.7507C5.00343 17.9415 5.92885 18.9161 7.09966 18.9949L7.25371 19.0001L15.7518 18.9884C16.9415 18.9868 17.9145 18.062 17.9935 16.8923L17.9987 16.7384V13.2321C17.9987 12.8179 18.3345 12.4821 18.7487 12.4821C19.1284 12.4821 19.4422 12.7643 19.4918 13.1303L19.4987 13.2321V16.7384C19.4987 18.7407 17.9293 20.3769 15.9528 20.4829L15.7538 20.4884L7.25827 20.5001L7.05495 20.4949C5.14239 20.3954 3.60895 18.8627 3.50837 16.9502L3.50312 16.7511L3.50089 8.2527L3.50529 8.0502C3.60539 6.13749 5.13867 4.60449 7.05096 4.50527L7.2501 4.50017H10.7495H7.2501ZM13.7481 3.00146L20.3018 3.00197L20.4014 3.01575L20.5022 3.04393L20.559 3.06803C20.6122 3.09122 20.6634 3.12163 20.7111 3.15885L20.7804 3.22156L20.8641 3.32014L20.9183 3.41025L20.957 3.50057L20.9762 3.56476L20.9898 3.62862L20.9992 3.72282L20.9997 10.2554C20.9997 10.6696 20.6639 11.0054 20.2497 11.0054C19.87 11.0054 19.5562 10.7232 19.5065 10.3571L19.4997 10.2554L19.4989 5.56147L12.2797 12.7847C12.0134 13.051 11.5968 13.0753 11.3031 12.8575L11.219 12.7849C10.9527 12.5187 10.9284 12.1021 11.1462 11.8084L11.2188 11.7243L18.4369 4.50146H13.7481C13.3684 4.50146 13.0546 4.21931 13.005 3.85324L12.9981 3.75146C12.9981 3.37177 13.2803 3.05797 13.6464 3.00831L13.7481 3.00146Z' fill='currentColor' /%3E%3C/svg%3E\") no-repeat center;\n                mask-size: contain;\n                -webkit-mask-size: contain;\n            }\n        }\n        pre {\n            white-space: -pre-wrap;\n            white-space: -o-pre-wrap;\n            word-wrap: break-word;\n        }\n        .ms_lcw_webchat_received_message a:link,\n        .ms_lcw_webchat_received_message a:visited,\n        .ms_lcw_webchat_received_message a:hover,\n        .ms_lcw_webchat_received_message a:active {\n            color: "+(null!==(_webChatContainerProp42=null==webChatContainerProps||null===(_webChatContainerProp43=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp43||null===(_webChatContainerProp44=_webChatContainerProp43.receivedMessageAnchorStyles)||void 0===_webChatContainerProp44?void 0:_webChatContainerProp44.color)&&void 0!==_webChatContainerProp42?_webChatContainerProp42:null==defaultReceivedMessageAnchorStyles?void 0:defaultReceivedMessageAnchorStyles.color)+";\n        }\n        .ms_lcw_webchat_sent_message a:link,\n        .ms_lcw_webchat_sent_message a:visited,\n        .ms_lcw_webchat_sent_message a:hover,\n        .ms_lcw_webchat_sent_message a:active {\n            color: "+(null!==(_webChatContainerProp45=null==webChatContainerProps||null===(_webChatContainerProp46=webChatContainerProps.renderingMiddlewareProps)||void 0===_webChatContainerProp46||null===(_webChatContainerProp47=_webChatContainerProp46.sentMessageAnchorStyles)||void 0===_webChatContainerProp47?void 0:_webChatContainerProp47.color)&&void 0!==_webChatContainerProp45?_webChatContainerProp45:null==defaultSentMessageAnchorStyles?void 0:defaultSentMessageAnchorStyles.color)+";\n        }\n\n        // we had a nasty bug long time ago with crashing borders messing with the sendbox, so if customer adds this value, they need to deal with that\n        .webchat__bubble:not(.webchat__bubble--from-user) .webchat__bubble__content {\n            border-radius: "+(null!==(_webChatContainerProp48=null==webChatContainerProps||null===(_webChatContainerProp49=webChatContainerProps.webChatStyles)||void 0===_webChatContainerProp49?void 0:_webChatContainerProp49.bubbleBorderRadius)&&void 0!==_webChatContainerProp48?_webChatContainerProp48:0)+" !important; /* Override border-radius */\n        }\n\n        .webchat__stacked-layout_container>div {\n            background: "+(null!==(_background=null==props||null===(_props$webChatContain13=props.webChatContainerProps)||void 0===_props$webChatContain13||null===(_props$webChatContain14=_props$webChatContain13.containerStyles)||void 0===_props$webChatContain14?void 0:_props$webChatContain14.background)&&void 0!==_background?_background:"")+"\n        }\n        .webchat__toast_text {\n            display: flex;\n            \n        }\n        .webchat__toaster {\n            overflow-y: unset;\n            }\n\n        /* Custom styles for carousel hero cards */\n\t\tul.webchat__carousel-filmstrip__attachments .ac-image {\n\t\t\twidth: 200px !important;\n\t\t\theight: 150px !important;\n\t\t\tobject-fit: cover !important;\n\t\t\tborder-radius: 8px !important;\n\t\t\tborder: 1px solid #e0e0e0 !important;\n\t\t}\n\n\t\t.webchat__carousel-filmstrip-attachment .webchat__bubble {\n\t\t\theight: 100% !important;\n\t\t}\n\n\t\t.webchat__carousel-filmstrip-attachment .webchat__bubble #ms_lcw_webchat_adaptive_card {\n\t\t\theight: 100% !important;\n\t\t}\n\n        .webchat__auto-resize-textarea__textarea.webchat__send-box-text-box__html-text-area {\n            font-family: "+fontFamilyWithEmojis+" !important;\n        }\n\n        /* Suggested actions carousel previous/next navigation focus */\n        .webchat__suggested-actions .webchat__suggested-actions__carousel .react-film__flipper:focus-visible .react-film__flipper__body {\n            outline: "+(null!==(_webChatContainerProp50=null==webChatContainerProps||null===(_webChatContainerProp51=webChatContainerProps.webChatStyles)||void 0===_webChatContainerProp51?void 0:_webChatContainerProp51.suggestedActionKeyboardFocusIndicatorBorderStyle)&&void 0!==_webChatContainerProp50?_webChatContainerProp50:"dashed")+" "+(null!==(_webChatContainerProp52=null==webChatContainerProps||null===(_webChatContainerProp53=webChatContainerProps.webChatStyles)||void 0===_webChatContainerProp53?void 0:_webChatContainerProp53.suggestedActionKeyboardFocusIndicatorBorderWidth)&&void 0!==_webChatContainerProp52?_webChatContainerProp52:"1px")+" "+(null!==(_webChatContainerProp54=null==webChatContainerProps||null===(_webChatContainerProp55=webChatContainerProps.webChatStyles)||void 0===_webChatContainerProp55?void 0:_webChatContainerProp55.suggestedActionKeyboardFocusIndicatorBorderColor)&&void 0!==_webChatContainerProp54?_webChatContainerProp54:"#605E5C")+" !important;\n            outline-offset: "+(null!==(_webChatContainerProp56=null==webChatContainerProps||null===(_webChatContainerProp57=webChatContainerProps.webChatStyles)||void 0===_webChatContainerProp57?void 0:_webChatContainerProp57.suggestedActionKeyboardFocusIndicatorInset)&&void 0!==_webChatContainerProp56?_webChatContainerProp56:"2px")+" !important;\n\n        "}),Object(jsx_runtime.jsx)(Stack.a,{styles:containerStyles,className:"webchat__stacked-layout_container",children:Object(jsx_runtime.jsxs)("div",{id:"ms_lcw_webchat_root",style:{height:"100%",width:"100%"},children:[shouldLoadPersistentHistoryMessages&&Object(jsx_runtime.jsx)(webchatcontroller_WebChatEventSubscribers,{}),Object(jsx_runtime.jsx)(BasicWebChat,{})]})}),citationPaneOpen&&Object(jsx_runtime.jsx)(citationpanestateful_CitationPaneStateful,{id:(null===(_props$citationPanePr=props.citationPaneProps)||void 0===_props$citationPanePr?void 0:_props$citationPanePr.id)||Constants.j.ocwCitationPaneClassName,title:(null===(_props$citationPanePr2=props.citationPaneProps)||void 0===_props$citationPanePr2?void 0:_props$citationPanePr2.title)||Constants.j.ocwCitationPaneTitle,contentHtml:citationPaneText,onClose:function onClose(){return setCitationPaneOpen(!1)},componentOverrides:null===(_props$citationPanePr3=props.citationPaneProps)||void 0===_props$citationPanePr3?void 0:_props$citationPanePr3.componentOverrides,controlProps:null===(_props$citationPanePr4=props.citationPaneProps)||void 0===_props$citationPanePr4?void 0:_props$citationPanePr4.controlProps,styleProps:null===(_props$citationPanePr5=props.citationPaneProps)||void 0===_props$citationPanePr5?void 0:_props$citationPanePr5.styleProps})]})},webchatcontainerstateful_WebChatContainerStateful=WebChatContainerStateful_WebChatContainerStateful;try{WebChatContainerStateful_WebChatContainerStateful.displayName="WebChatContainerStateful",WebChatContainerStateful_WebChatContainerStateful.__docgenInfo={description:"",displayName:"WebChatContainerStateful",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},citationPaneProps:{defaultValue:null,description:"",name:"citationPaneProps",required:!1,type:{name:"ICitationPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}},useSessionStorage:{defaultValue:null,description:"",name:"useSessionStorage",required:!1,type:{name:"boolean"}},allowSdkChatSupport:{defaultValue:null,description:"",name:"allowSdkChatSupport",required:!1,type:{name:"boolean"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},draggableChatWidgetProps:{defaultValue:null,description:"",name:"draggableChatWidgetProps",required:!1,type:{name:"IDraggableChatWidgetProps"}},mock:{defaultValue:null,description:"",name:"mock",required:!1,type:{name:"IMockProps"}},featureConfigProps:{defaultValue:null,description:"",name:"featureConfigProps",required:!1,type:{name:"IFeatureConfigProps"}},appInsightsConfig:{defaultValue:null,description:"",name:"appInsightsConfig",required:!1,type:{name:"IAppInsightsConfig"}},persistentChatHistoryProps:{defaultValue:null,description:"",name:"persistentChatHistoryProps",required:!1,type:{name:"IPersistentChatHistoryProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/WebChatContainerStateful.tsx#WebChatContainerStateful"]={docgenInfo:WebChatContainerStateful_WebChatContainerStateful.__docgenInfo,name:"WebChatContainerStateful",path:"src/components/webchatcontainerstateful/WebChatContainerStateful.tsx#WebChatContainerStateful"})}catch(__react_docgen_typescript_loader_error){}var common_createDownloadTranscriptProps=function createDownloadTranscriptProps(downloadTranscriptProps,webChatStyles,webChatContainerProps){var _webChatContainerProp,_webChatContainerProp2,disableNewLineMarkdownSupport=null!==(_webChatContainerProp=null==webChatContainerProps?void 0:webChatContainerProps.disableNewLineMarkdownSupport)&&void 0!==_webChatContainerProp?_webChatContainerProp:defaultWebChatContainerStatefulProps.disableNewLineMarkdownSupport,disableMarkdownMessageFormatting=null!==(_webChatContainerProp2=null==webChatContainerProps?void 0:webChatContainerProps.disableMarkdownMessageFormatting)&&void 0!==_webChatContainerProp2?_webChatContainerProp2:defaultWebChatContainerStatefulProps.disableMarkdownMessageFormatting;return Object.assign({},downloadTranscriptProps,{webChatTranscript:Object.assign({},null==downloadTranscriptProps?void 0:downloadTranscriptProps.webChatTranscript,{disableNewLineMarkdownSupport:disableNewLineMarkdownSupport,disableMarkdownMessageFormatting:disableMarkdownMessageFormatting,transcriptBackgroundColor:null==webChatStyles?void 0:webChatStyles.backgroundColor,agentAvatarBackgroundColor:null==webChatStyles?void 0:webChatStyles.bubbleBackground,agentAvatarFontColor:null==webChatStyles?void 0:webChatStyles.bubbleTextColor,customerAvatarBackgroundColor:null==webChatStyles?void 0:webChatStyles.bubbleFromUserBackground,customerAvatarFontColor:null==webChatStyles?void 0:webChatStyles.bubbleFromUserTextColor})})},AudioNotificationStateful_AudioNotificationStateful=function AudioNotificationStateful(props){var audioSrc=props.audioSrc,isAudioMuted=props.isAudioMuted,audioRef=Object(react.useRef)(new Audio(audioSrc));return Object(react.useEffect)((function(){cjs.BroadcastService.getMessageByEventName("NewMessageNotification").subscribe((function(msg){audioRef.current.play()}))}),[]),Object(react.useEffect)((function(){audioRef.current.muted=!!isAudioMuted}),[isAudioMuted]),Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})},audionotificationstateful_AudioNotificationStateful=AudioNotificationStateful_AudioNotificationStateful;try{AudioNotificationStateful_AudioNotificationStateful.displayName="AudioNotificationStateful",AudioNotificationStateful_AudioNotificationStateful.__docgenInfo={description:"",displayName:"AudioNotificationStateful",props:{audioSrc:{defaultValue:null,description:"",name:"audioSrc",required:!1,type:{name:"string"}},isAudioMuted:{defaultValue:null,description:"",name:"isAudioMuted",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/footerstateful/audionotificationstateful/AudioNotificationStateful.tsx#AudioNotificationStateful"]={docgenInfo:AudioNotificationStateful_AudioNotificationStateful.__docgenInfo,name:"AudioNotificationStateful",path:"src/components/footerstateful/audionotificationstateful/AudioNotificationStateful.tsx#AudioNotificationStateful"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.string.match.js");var common_defaultLibraryScripts={botframeworkWebChat:{src:"https://cdn.botframework.com/botframework-webchat/4.15.7/webchat.js"},rxJs:{src:"https://cdnjs.cloudflare.com/ajax/libs/rxjs/7.8.0/rxjs.umd.min.js",integrity:"sha512-v0/YVjBcbjLN6scjmmJN+h86koeB7JhY4/2YeyA5l+rTdtKLv0VbDBNJ32rxJpsaW1QGMd1Z16lsLOSGI38Rbg==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"},react:{src:"https://unpkg.com/react@18.2.0/umd/react.production.min.js"},reactDom:{src:"https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"},markdownIt:{src:"https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js",integrity:"sha256-hNyljag6giCsjv/yKmxK8/VeHzvMDvc5u8AzmRvm1BI=",crossOrigin:"anonymous"}};function createChatTranscript_regeneratorRuntime(){createChatTranscript_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function createChatTranscript_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function createChatTranscript_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){createChatTranscript_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){createChatTranscript_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function createChatTranscript_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function createChatTranscript_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var createChatTranscript_TranscriptHTMLBuilder=function(){function TranscriptHTMLBuilder(options){var _this$options,_this$options2,_this$options3,_this$options4,_this$options5,_this$options6,_this$options7,_this$options8,_this$options9,_this$options10,_this$options11,_this$options12,_this$options13;!function createChatTranscript_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TranscriptHTMLBuilder),this.options=void 0,this.pageTitle="Customer Transcript",this.attachmentMessage="The following attachment was uploaded during the conversation: ",this.networkOnlineMessage="Connection restored. Please refresh the page",this.networkOfflineMessage="Network Error. Please make sure you are connected to the internet.",this.transcriptBackgroundColor="#FFF",this.agentAvatarBackgroundColor="#E8E8E8",this.agentAvatarFontColor="#000",this.customerAvatarBackgroundColor="#2266E3",this.customerAvatarFontColor="#FFF",this.customerDisplayName="",this.disableMarkdownMessageFormatting=!1,this.disableNewLineMarkdownSupport=!1,this.externalScripts={},this.options=options,this.options&&this.options.messages||(this.options.messages=[]),null!==(_this$options=this.options)&&void 0!==_this$options&&_this$options.pageTitle&&(this.pageTitle=this.options.pageTitle),null!==(_this$options2=this.options)&&void 0!==_this$options2&&_this$options2.attachmentMessage&&(this.attachmentMessage=this.options.attachmentMessage),null!==(_this$options3=this.options)&&void 0!==_this$options3&&_this$options3.networkOnlineMessage&&(this.networkOnlineMessage=this.options.networkOnlineMessage),null!==(_this$options4=this.options)&&void 0!==_this$options4&&_this$options4.networkOfflineMessage&&(this.networkOfflineMessage=this.options.networkOfflineMessage),null!==(_this$options5=this.options)&&void 0!==_this$options5&&_this$options5.transcriptBackgroundColor&&(this.transcriptBackgroundColor=this.options.transcriptBackgroundColor),null!==(_this$options6=this.options)&&void 0!==_this$options6&&_this$options6.agentAvatarBackgroundColor&&(this.agentAvatarBackgroundColor=this.options.agentAvatarBackgroundColor),null!==(_this$options7=this.options)&&void 0!==_this$options7&&_this$options7.agentAvatarFontColor&&(this.agentAvatarFontColor=this.options.agentAvatarFontColor),null!==(_this$options8=this.options)&&void 0!==_this$options8&&_this$options8.customerAvatarBackgroundColor&&(this.customerAvatarBackgroundColor=this.options.customerAvatarBackgroundColor),null!==(_this$options9=this.options)&&void 0!==_this$options9&&_this$options9.customerAvatarFontColor&&(this.customerAvatarFontColor=this.options.customerAvatarFontColor),null!==(_this$options10=this.options)&&void 0!==_this$options10&&_this$options10.customerDisplayName&&(this.customerDisplayName=this.options.customerDisplayName),null!==(_this$options11=this.options)&&void 0!==_this$options11&&_this$options11.disableMarkdownMessageFormatting&&(this.disableMarkdownMessageFormatting=this.options.disableMarkdownMessageFormatting),null!==(_this$options12=this.options)&&void 0!==_this$options12&&_this$options12.disableNewLineMarkdownSupport&&(this.disableNewLineMarkdownSupport=this.options.disableNewLineMarkdownSupport),null!==(_this$options13=this.options)&&void 0!==_this$options13&&_this$options13.externalScripts&&(this.externalScripts=this.options.externalScripts)}return function createChatTranscript_createClass(Constructor,protoProps,staticProps){return protoProps&&createChatTranscript_defineProperties(Constructor.prototype,protoProps),staticProps&&createChatTranscript_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(TranscriptHTMLBuilder,[{key:"createMetaElement",value:function createMetaElement(){return'\n            <meta charset="UTF-8">\n        '}},{key:"createTitleElement",value:function createTitleElement(){return"<title> "+this.pageTitle+" </title>"}},{key:"createScriptElement",value:function createScriptElement(src){var integrity=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,crossOrigin=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,referrerPolicy=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return'<script src="'+src+'" '+(integrity?'integrity="'+integrity+'"':"")+" "+(crossOrigin?'crossorigin="'+crossOrigin+'"':"")+" "+(referrerPolicy?'referrerpolicy="'+referrerPolicy+'"':"")+"><\/script>"}},{key:"createWebChatScriptElement",value:function createWebChatScriptElement(){var _this$externalScripts,_this$externalScripts2,_this$externalScripts3,_this$externalScripts4,_this$externalScripts5,_this$externalScripts6,_this$externalScripts7,_this$externalScripts8,_this$externalScripts9,_this$externalScripts10;return null!==(_this$externalScripts=this.externalScripts)&&void 0!==_this$externalScripts&&null!==(_this$externalScripts2=_this$externalScripts.botframeworkWebChat)&&void 0!==_this$externalScripts2&&_this$externalScripts2.src?this.createScriptElement(null===(_this$externalScripts3=this.externalScripts)||void 0===_this$externalScripts3||null===(_this$externalScripts4=_this$externalScripts3.botframeworkWebChat)||void 0===_this$externalScripts4?void 0:_this$externalScripts4.src,null===(_this$externalScripts5=this.externalScripts)||void 0===_this$externalScripts5||null===(_this$externalScripts6=_this$externalScripts5.botframeworkWebChat)||void 0===_this$externalScripts6?void 0:_this$externalScripts6.integrity,null===(_this$externalScripts7=this.externalScripts)||void 0===_this$externalScripts7||null===(_this$externalScripts8=_this$externalScripts7.botframeworkWebChat)||void 0===_this$externalScripts8?void 0:_this$externalScripts8.crossOrigin,null===(_this$externalScripts9=this.externalScripts)||void 0===_this$externalScripts9||null===(_this$externalScripts10=_this$externalScripts9.botframeworkWebChat)||void 0===_this$externalScripts10?void 0:_this$externalScripts10.referrerPolicy):this.createScriptElement(common_defaultLibraryScripts.botframeworkWebChat.src)}},{key:"createRxJsScriptElement",value:function createRxJsScriptElement(){var _this$externalScripts11,_this$externalScripts12,_this$externalScripts13,_this$externalScripts14,_this$externalScripts15,_this$externalScripts16,_this$externalScripts17,_this$externalScripts18,_this$externalScripts19,_this$externalScripts20;return null!==(_this$externalScripts11=this.externalScripts)&&void 0!==_this$externalScripts11&&null!==(_this$externalScripts12=_this$externalScripts11.rxJs)&&void 0!==_this$externalScripts12&&_this$externalScripts12.src?this.createScriptElement(null===(_this$externalScripts13=this.externalScripts)||void 0===_this$externalScripts13||null===(_this$externalScripts14=_this$externalScripts13.rxJs)||void 0===_this$externalScripts14?void 0:_this$externalScripts14.src,null===(_this$externalScripts15=this.externalScripts)||void 0===_this$externalScripts15||null===(_this$externalScripts16=_this$externalScripts15.rxJs)||void 0===_this$externalScripts16?void 0:_this$externalScripts16.integrity,null===(_this$externalScripts17=this.externalScripts)||void 0===_this$externalScripts17||null===(_this$externalScripts18=_this$externalScripts17.rxJs)||void 0===_this$externalScripts18?void 0:_this$externalScripts18.crossOrigin,null===(_this$externalScripts19=this.externalScripts)||void 0===_this$externalScripts19||null===(_this$externalScripts20=_this$externalScripts19.rxJs)||void 0===_this$externalScripts20?void 0:_this$externalScripts20.referrerPolicy):this.createScriptElement(common_defaultLibraryScripts.rxJs.src,common_defaultLibraryScripts.rxJs.integrity,common_defaultLibraryScripts.rxJs.crossOrigin,common_defaultLibraryScripts.rxJs.referrerPolicy)}},{key:"createReactScriptElement",value:function createReactScriptElement(){var _this$externalScripts21,_this$externalScripts22,_this$externalScripts23,_this$externalScripts24,_this$externalScripts25,_this$externalScripts26,_this$externalScripts27,_this$externalScripts28,_this$externalScripts29,_this$externalScripts30;return null!==(_this$externalScripts21=this.externalScripts)&&void 0!==_this$externalScripts21&&null!==(_this$externalScripts22=_this$externalScripts21.react)&&void 0!==_this$externalScripts22&&_this$externalScripts22.src?this.createScriptElement(null===(_this$externalScripts23=this.externalScripts)||void 0===_this$externalScripts23||null===(_this$externalScripts24=_this$externalScripts23.react)||void 0===_this$externalScripts24?void 0:_this$externalScripts24.src,null===(_this$externalScripts25=this.externalScripts)||void 0===_this$externalScripts25||null===(_this$externalScripts26=_this$externalScripts25.react)||void 0===_this$externalScripts26?void 0:_this$externalScripts26.integrity,null===(_this$externalScripts27=this.externalScripts)||void 0===_this$externalScripts27||null===(_this$externalScripts28=_this$externalScripts27.react)||void 0===_this$externalScripts28?void 0:_this$externalScripts28.crossOrigin,null===(_this$externalScripts29=this.externalScripts)||void 0===_this$externalScripts29||null===(_this$externalScripts30=_this$externalScripts29.react)||void 0===_this$externalScripts30?void 0:_this$externalScripts30.referrerPolicy):this.createScriptElement(common_defaultLibraryScripts.react.src)}},{key:"createReactDomScriptElement",value:function createReactDomScriptElement(){var _this$externalScripts31,_this$externalScripts32,_this$externalScripts33,_this$externalScripts34,_this$externalScripts35,_this$externalScripts36,_this$externalScripts37,_this$externalScripts38,_this$externalScripts39,_this$externalScripts40,_this$externalScripts41,_this$externalScripts42,_this$externalScripts43;return null!==(_this$externalScripts31=this.externalScripts)&&void 0!==_this$externalScripts31&&null!==(_this$externalScripts32=_this$externalScripts31.reactDom)&&void 0!==_this$externalScripts32&&_this$externalScripts32.src?this.createScriptElement(null===(_this$externalScripts33=this.externalScripts)||void 0===_this$externalScripts33||null===(_this$externalScripts34=_this$externalScripts33.reactDom)||void 0===_this$externalScripts34?void 0:_this$externalScripts34.src,null===(_this$externalScripts35=this.externalScripts)||void 0===_this$externalScripts35||null===(_this$externalScripts36=_this$externalScripts35.reactDom)||void 0===_this$externalScripts36?void 0:_this$externalScripts36.integrity,null===(_this$externalScripts37=this.externalScripts)||void 0===_this$externalScripts37||null===(_this$externalScripts38=_this$externalScripts37.reactDom)||void 0===_this$externalScripts38?void 0:_this$externalScripts38.crossOrigin,null===(_this$externalScripts39=this.externalScripts)||void 0===_this$externalScripts39||null===(_this$externalScripts40=_this$externalScripts39.reactDom)||void 0===_this$externalScripts40?void 0:_this$externalScripts40.referrerPolicy):this.createScriptElement(null!==(_this$externalScripts41=null===(_this$externalScripts42=this.externalScripts)||void 0===_this$externalScripts42||null===(_this$externalScripts43=_this$externalScripts42.reactDom)||void 0===_this$externalScripts43?void 0:_this$externalScripts43.src)&&void 0!==_this$externalScripts41?_this$externalScripts41:common_defaultLibraryScripts.reactDom.src)}},{key:"createMarkdownItScriptElement",value:function createMarkdownItScriptElement(){var _this$externalScripts44,_this$externalScripts45,_this$externalScripts46,_this$externalScripts47,_this$externalScripts48,_this$externalScripts49,_this$externalScripts50,_this$externalScripts51,_this$externalScripts52,_this$externalScripts53;return null!==(_this$externalScripts44=this.externalScripts)&&void 0!==_this$externalScripts44&&null!==(_this$externalScripts45=_this$externalScripts44.markdownIt)&&void 0!==_this$externalScripts45&&_this$externalScripts45.src?this.createScriptElement(null===(_this$externalScripts46=this.externalScripts)||void 0===_this$externalScripts46||null===(_this$externalScripts47=_this$externalScripts46.markdownIt)||void 0===_this$externalScripts47?void 0:_this$externalScripts47.src,null===(_this$externalScripts48=this.externalScripts)||void 0===_this$externalScripts48||null===(_this$externalScripts49=_this$externalScripts48.markdownIt)||void 0===_this$externalScripts49?void 0:_this$externalScripts49.integrity,null===(_this$externalScripts50=this.externalScripts)||void 0===_this$externalScripts50||null===(_this$externalScripts51=_this$externalScripts50.markdownIt)||void 0===_this$externalScripts51?void 0:_this$externalScripts51.crossOrigin,null===(_this$externalScripts52=this.externalScripts)||void 0===_this$externalScripts52||null===(_this$externalScripts53=_this$externalScripts52.markdownIt)||void 0===_this$externalScripts53?void 0:_this$externalScripts53.referrerPolicy):this.createScriptElement(common_defaultLibraryScripts.markdownIt.src,common_defaultLibraryScripts.markdownIt.integrity,common_defaultLibraryScripts.markdownIt.crossOrigin)}},{key:"createExternalScriptElements",value:function createExternalScriptElements(){return"\n            "+this.createWebChatScriptElement()+"\n            "+this.createRxJsScriptElement()+"\n            "+this.createReactScriptElement()+"\n            "+this.createReactDomScriptElement()+"\n            "+this.createMarkdownItScriptElement()+"\n        "}},{key:"createHeadElement",value:function createHeadElement(){return"\n            <head>\n                "+this.createMetaElement()+"\n                "+this.createTitleElement()+"\n                "+this.createExternalScriptElements()+"\n                <script>\n                    function shareObservable(observable) {\n                        let observers = [];\n                        let subscription;\n\n                        return new Observable(observer => {\n                            if (!subscription) {\n                                subscription = observable.subscribe({\n                                    complete() {\n                                        observers.forEach(observer => observer.complete());\n                                    },\n                                    error(err) {\n                                        observers.forEach(observer => observer.error(err));\n                                    },\n                                    next(value) {\n                                        observers.forEach(observer => observer.next(value));\n                                    }\n                                });\n                            }\n\n                            observers.push(observer);\n\n                            return () => {\n                                observers = observers.filter(o => o !== observer);\n\n                                if (!observers.length) {\n                                    subscription.unsubscribe();\n                                    subscription = null;\n                                }\n                            };\n                        });\n                    }\n                <\/script>\n                <script>\n                    const messages = "+JSON.stringify(this.options.messages)+";\n                    const disableMarkdownMessageFormatting = "+this.disableMarkdownMessageFormatting+";\n                    const disableNewLineMarkdownSupport = "+this.disableNewLineMarkdownSupport+";\n                <\/script>\n                <script>\n                    class Translator {\n                        static convertTranscriptMessageToActivity(message) {\n                            const {created, OriginalMessageId, id, isControlMessage, content, tags, from, attachments, amsMetadata, amsReferences, amsreferences} = message;\n                            \n                            //it's required to convert the id to a number, otherwise the webchat will not render the messages in the correct order\n                            // if the OrginalMessageId is not present, we can use the id as the sequence id, which is always present.\n                            \n                            const webchatSequenceId = Translator.convertStringValueToInt(OriginalMessageId) || Translator.convertStringValueToInt(id);\n                            \n                            const activity = {\n                                from: {\n                                    role: 'bot'\n                                },\n                                type: 'message'\n                            };\n\n                            // Ignore control messages\n                            if (isControlMessage) {\n                                return false;\n                            }\n\n                            if (tags) {\n                                const formattedTags = tags.split(',');\n\n                                // Ignore system message\n                                if (formattedTags.includes('system')) {\n                                    return false;\n                                }\n\n                                // Ignore hidden message\n                                if (formattedTags.includes('Hidden')) {\n                                    return false;\n                                }\n                            }\n\n                            // Add C1 user display name\n                            if (from && from.user && from.user.displayName) {\n                                activity.from.name = from.user.displayName;\n                            }\n\n                            // Add C2 user display name\n                            if (from && from.application && from.application.displayName && from.application.displayName === 'Customer') {\n                                activity.from = {\n                                    role: 'user',\n                                    name: from.application.displayName\n                                };\n                            }\n\n                            // Attachments\n                            if ((amsReferences || amsreferences) && amsMetadata) {\n                                const metadata = JSON.parse(amsMetadata);\n                                const { fileName } = metadata[0];\n                                const text = `"+this.attachmentMessage+'${fileName}`;\n\n                                if (message.attachments && message.attachments.length > 0 && message.contentUrl) {\n                                    activity.attachments = message.attachments;\n                                    activity.attachments[0].contentUrl = message.contentUrl;\n                                    activity.attachments[0].thumbnailUrl =  message.contentUrl;\n                                };\n\n                                return {\n                                    ...activity,\n                                    text,\n                                    timestamp: created,\n                                    channelData: { \n                                        "webchat:sequence-id": webchatSequenceId\n                                    }\n                                }\n                            }\n\n                            // Message\n                            if (content) {\n                                // Adaptive card formatting\n                                if (content.includes(\'"attachments"\') || content.includes(\'"suggestedActions"\')) {\n                                    try {\n                                        const partialActivity = JSON.parse(content);\n                                        return {\n                                            ...activity,\n                                            ...partialActivity,\n                                            timestamp: created,\n                                            channelData: { \n                                                "webchat:sequence-id": webchatSequenceId\n                                            }\n                                        };\n                                    } catch {\n\n                                    }\n                                }\n                            }\n\n                            return {\n                                ...activity,\n                                text: content,\n                                timestamp: created,\n                                channelData: { \n                                    "webchat:sequence-id": webchatSequenceId\n                                }\n                            };\n                        }\n                        \n                        static convertStringValueToInt(value) {\n                            if (typeof value !== "string" || value === "") {\n                                return undefined;\n                            }\n\n                            const result = parseInt(value);\n                            return isNaN(result) ? undefined : result;\n                        }\n                    }\n                <\/script>\n                <script>\n                    class TranscriptAdapter {\n                        constructor() {\n                            this.connectionStatus$ = new window.rxjs.BehaviorSubject(0); // Uninitialized\n                            this.activity$ = shareObservable(new Observable((observer) => {\n                                this.activityObserver = observer;\n\n                                this.connectionStatus$.next(1); // Connecting\n                                this.connectionStatus$.next(2); // Online\n\n                                // Retrieve messages\n                                if (messages) {\n                                    setTimeout(() => { // setTimeout is needed due to some WebChat issues\n                                        messages.map((message) => {\n                                            this.activityObserver.next({\n                                                ...Translator.convertTranscriptMessageToActivity(message),\n                                                type: \'message\'\n                                            });\n                                        });\n                                    }, 1);\n                                }\n                            }));\n                        }\n                    }\n                <\/script>\n                <style>\n                    body {\n                        margin: 0;\n                    }\n\n                    .message-name {\n                        font-family: Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;\n                        font-weight: 700;\n                        font-size: 10px;\n                    }\n\n                    .message-timestamp {\n                        font-family: Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;\n                        font-weight: 500;\n                        font-size: 10px;\n                    }\n\n                    .avatar {\n                        width: 40px;\n                        height: 40px;\n                        border-radius: 50%;\n                        text-align: center;\n                    }\n\n                    .avatar--bot {\n                        background-color: '+this.agentAvatarBackgroundColor+";\n                    }\n\n                    .avatar--user {\n                        background-color: "+this.customerAvatarBackgroundColor+';\n                    }\n\n                    .avatar > p {\n                        font-weight: 600;\n                        text-align: center;\n                        line-height: 0.5;\n                        font-family: "Segoe UI", Arial, sans-serif;\n                    }\n\n                    .avatar--bot > p {\n                        color: '+this.agentAvatarFontColor+";\n                    }\n\n                    .avatar--user > p {\n                        color: "+this.customerAvatarFontColor+';\n                    }\n\n                    .webchat__bubble__content>div.ms_lcw_webchat_adaptive_card {\n                        background-color: #FFF;\n                    }\n\n                    div[class="ac-textBlock"] {\n                        color: #000 !important;\n                    }\n\n                    .ms_lcw_webchat_received_message a:link, .ms_lcw_webchat_received_message a:visited, .ms_lcw_webchat_received_message a:hover, .ms_lcw_webchat_received_message a:active {\n                        color: #FFF;\n                    }\n                </style>\n            </head>\n        '}},{key:"createBodyElement",value:function createBodyElement(){return"\n            <body>\n                <script>\n                    if (!navigator.onLine) {\n                        const offlineText = `"+this.networkOfflineMessage+'`;\n                        document.body.innerHTML = offlineText;\n                    }\n\n                    window.addEventListener("online", () => {\n                        document.body.innerHTML = `'+this.networkOnlineMessage+' <button onclick="window.location.reload()"> Refresh </button>`;\n                    });\n\n                    document.addEventListener("copy", (event) => {\n                        const clonedSelectedContent = window.getSelection().getRangeAt(0).cloneContents();\n                        const copiedContent = document.createElement("div");\n                        copiedContent.appendChild(clonedSelectedContent);\n        \n                        event.clipboardData.setData("text/plain", getAllText(copiedContent));\n                        event.preventDefault();\n                    });\n\n\n                    getAllText = (element) => {\n                        let plainText = "";\n                        Array.from(element.childNodes).forEach((node) => {\n                            // ignore aria-hidden elements and keyboard help text\n                            const ariaHiddenAttr = node.attributes ? node.attributes.getNamedItem("aria-hidden") : null;\n                            if ((ariaHiddenAttr && ariaHiddenAttr.value === "true") || node.classList && node.classList.contains("webchat__keyboard-help")) {\n                                return;\n                            }\n                         \n                            // get all texts inside activity body, including message, translated message, attachment name, adaptive card content, status footer, etc.\n                            if (node.classList && node.classList.contains("webchat__basic-transcript__activity-body")) {\n                                plainText += this.processTranscriptActivityNode(node);\n                                return;\n                            }\n                            if (node.nodeType === Node.TEXT_NODE) {\n                                plainText += node.textContent + \'\\n\';\n                            } else {\n                                plainText += this.getAllText(node);\n                            }\n                        });\n                        return plainText;\n                    }\n\n                    processTranscriptActivityNode = (node) => {\n                        const divs = node.getElementsByTagName("div");\n                        let plainText = "";\n                \n                        if (divs && divs.length > 1 && divs[1]) {                           \n                            const messageRow = node.querySelector(".webchat__stacked-layout__message-row[aria-roledescription=\'message\']");\n                            const author = node.querySelector(".message-name");\n                            const attachmentRow = node.querySelector(".webchat__stacked-layout__attachment-row[aria-roledescription=\'attachment\']");\n                        \n                            if (messageRow) {\n                                let message = messageRow.getElementsByClassName("webchat__text-content__markdown");\n                                \n                                if (message.length === 0) {\n                                    message = messageRow.getElementsByClassName("markdown");                                    \n                                }\n\n                                if (message.length > 0) {\n                                    plainText += author.textContent + \'\\n\' + message[0].textContent + \'\\n\';\n                                }\n                            }  else if (attachmentRow) {\n                                const attachment = attachmentRow.getElementsByClassName("webchat__fileContent__fileName");\n                                const adaptiveCard = this.getAdaptiveCardContent(attachmentRow.querySelector(".ac-container.ac-adaptiveCard"));\n                               \n                                plainText += attachment && attachment.length > 0 ? author.textContent +\'\\n\' + attachment[0].textContent +\'\\n\': author.textContent +\'\\n\' + adaptiveCard +\'\\n\';\n                            }\n                \n                            const statusElements = node.getElementsByClassName("webchat__stacked-layout__status");\n                            if (statusElements.length > 0) {\n                                const timestampelement = statusElements[0].querySelector(".message-timestamp");\n                                plainText += timestampelement ? timestampelement.textContent+\'\\n\\n\' : \'\\n\';\n                            }\n                        }\n                \n                        return plainText;\n                    }\n\n                    getAdaptiveCardContent = (node) => {\n                        if (!node) {\n                            return undefined;\n                        }\n\n                        let plainText = "";\n                        const rows = node.querySelectorAll(".ac-textBlock p");\n                        rows.forEach((row) => {\n                            plainText += row.textContent+ \'\\n\';\n                        });\n\n                        return plainText;\n                    }\n\n                <\/script>\n                <div id="transcript"></div>\n                <script>\n                    const getIconText = (text) => {\n                        if (text) {\n                            const initials = text.split(/\\s/).reduce((response, word) => response += word.slice(0, 1), \'\');\n                            if (initials.length > 1) {\n                                return initials.substring(0, 2).toUpperCase();\n                            } else {\n                                return text.substring(0, 2).toUpperCase();\n                            }\n                        }\n\n                        return "";\n                    }\n\n                    const activityMiddleware = () => (next) => (...args) => {\n                        const [card] = args;\n\n                        if (card.activity) {\n                            if (card.activity.from && card.activity.from.role === "channel") {\n                                return () => false;\n                            }\n\n                            // Incoming text message\n                            if (card.activity.text && card.activity.from && card.activity.from.role !== "user") {\n                                return (...renderArgs) => (React.createElement(\n                                    \'div\',\n                                    {className: \'ms_lcw_webchat_received_message\'},\n                                    next(...args)(...renderArgs)\n                                ))\n                            }\n                        }\n\n                        return next(...args);\n                    };\n\n                    const activityStatusMiddleware = () => (next) => (...args) => {\n                        const [card] = args;\n                        const {activity} = card;\n\n                        if (activity) {\n                            const {from, timestamp} = activity;\n\n                            const nameElement = React.createElement(\n                                \'span\',\n                                {className: \'message-name\'},\n                                from.name\n                            );\n\n                            const formattedDate = new Date(timestamp);\n                            const formattedTimeString = formattedDate.toLocaleTimeString("en-us", { year: "numeric", month:"numeric", day:"numeric", hour: "2-digit", minute: "2-digit"});\n\n                            const timestampElement = React.createElement(\n                                \'span\',\n                                {className: \'message-timestamp\'},\n                                formattedTimeString\n                            );\n\n                            return from.name && timestamp && React.createElement(\'span\', null, nameElement, \' - \', timestampElement)\n                        }\n\n                        return next(...args);\n                    };\n\n                    const avatarMiddleware = () => (next) => (...args) => {\n                        const [card] = args;\n                        const {fromUser, activity} = card;\n                        let displayName = getIconText(activity.from.name);\n                        let customerDisplayName = \''+this.customerDisplayName+'\';\n\n                        if (fromUser && customerDisplayName) {\n                            displayName = customerDisplayName;\n                        }\n\n                        const avatarElement = React.createElement(\n                            "div",\n                            {className: fromUser? "avatar avatar--user": "avatar avatar--bot"},\n                            React.createElement(\n                                "p",\n                                null,\n                                `${displayName}`\n                            )\n                        );\n\n                        return avatarElement;\n                    }\n\n                    const attachmentMiddleware = () => (next) => (...args) => {\n                        const [card] = args;\n                        const {activity} = card;\n\n                        if (activity) {\n                            const { activity: { attachments }, attachment } = card;\n\n                            // No attachment\n                            if (!attachments || !attachments.length || !attachment) {\n                                return next(...args);\n                            }\n\n                            let { content, contentType } = attachment || { content: "", contentType: "" };\n\n                            // Adaptive card\n                            if (contentType.startsWith("application/vnd.microsoft.card")) {\n                                const adaptiveCardElement = React.createElement(\n                                    "div",\n                                    {className: \'ms_lcw_webchat_adaptive_card\'},\n                                    next(...args)\n                                );\n\n                                return adaptiveCardElement;\n                            }\n                        }\n\n                        return next(...args);\n                    }\n\n                    const createMarkdown = (disableMarkdownMessageFormatting, disableNewLineMarkdownSupport) => {\n                        let markdown;\n                        if (!disableMarkdownMessageFormatting) {\n                            markdown = new window.markdownit(\n                                "default",\n                                {\n                                    html: true,\n                                    linkify: true,\n                                    breaks: (!disableNewLineMarkdownSupport)\n                                }\n                            );\n                        } else {\n                            markdown = new window.markdownit(\n                                "zero",\n                                {\n                                    html: true,\n                                    linkify: true,\n                                    breaks: (!disableNewLineMarkdownSupport)\n                                }\n                            );\n\n                            markdown.enable([\n                                "entity",\n                                "linkify",\n                                "html_block",\n                                "html_inline",\n                                "newline"\n                            ]);\n                        }\n\n                        return markdown;\n                    };\n\n                    const markdown = createMarkdown(disableMarkdownMessageFormatting, disableNewLineMarkdownSupport);\n                    const renderMarkdown = (text) => {\n                        const render = disableNewLineMarkdownSupport? markdown.renderInline.bind(markdown): markdown.render.bind(markdown);\n                        text = render(text);\n                        return text;\n                    };\n\n                    const adapter = new TranscriptAdapter();\n                    const styleOptions = {\n                        hideSendBox: true,\n                        backgroundColor: \''+this.transcriptBackgroundColor+"',\n                        bubbleBackground: '"+this.agentAvatarBackgroundColor+"',\n                        bubbleTextColor: '"+this.agentAvatarFontColor+"',\n                        bubbleBorderRadius: 12,\n                        bubbleNubSize: 1,\n                        bubbleFromUserBackground: '"+this.customerAvatarBackgroundColor+"',\n                        bubbleFromUserTextColor: '"+this.customerAvatarFontColor+"',\n                        bubbleFromUserBorderRadius: 12,\n                        bubbleFromUserNubSize: 1,\n                        botAvatarInitials: 'C1',\n                        userAvatarInitials: 'C2'\n                    };\n\n                    window.WebChat.renderWebChat({\n                        directLine: adapter,\n                        styleOptions,\n                        activityMiddleware,\n                        activityStatusMiddleware,\n                        avatarMiddleware,\n                        attachmentMiddleware,\n                        renderMarkdown\n                    },\n                    document.getElementById('transcript'));\n                <\/script>\n            </body>\n        "}},{key:"createHTML",value:function createHTML(){return"\n            <html>\n                "+this.createHeadElement()+"\n                "+this.createBodyElement()+"\n            </html>\n        "}}]),TranscriptHTMLBuilder}(),createChatTranscript=function(){var _ref=createChatTranscript_asyncToGenerator(createChatTranscript_regeneratorRuntime().mark((function _callee3(transcript,facadeChatSDK){var renderAttachments,transcriptOptions,transcriptMessages,convertBlobToBase64,hook,messages,options,htmlBuilder,text,fileName,_args3=arguments;return createChatTranscript_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(renderAttachments=_args3.length>2&&void 0!==_args3[2]&&_args3[2],transcriptOptions=_args3.length>3&&void 0!==_args3[3]?_args3[3]:{},transcriptMessages=JSON.parse(transcript),convertBlobToBase64=function(){var _ref2=createChatTranscript_asyncToGenerator(createChatTranscript_regeneratorRuntime().mark((function _callee(blob){return createChatTranscript_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve){var reader=new FileReader;reader.onloadend=function(){return resolve(reader.result)},reader.readAsDataURL(blob)})));case 1:case"end":return _context.stop()}}),_callee)})));return function convertBlobToBase64(_x3){return _ref2.apply(this,arguments)}}(),hook=function hook(node){"BR"===node.tagName&&node.hasAttribute("target")&&node.removeAttribute("target")},purify_default.a.addHook("afterSanitizeAttributes",hook),messages=transcriptMessages.filter((function(message){return message.content=purify_default.a.sanitize(message.content),message})),purify_default.a.removeHook("afterSanitizeAttributes",hook),!renderAttachments){_context3.next=12;break}return _context3.next=11,Promise.all(transcriptMessages.map(function(){var _ref3=createChatTranscript_asyncToGenerator(createChatTranscript_regeneratorRuntime().mark((function _callee2(message){var _message$amsReference,amsReferences,amsMetadata,references,metadata,fileMetadata,blob,base64;return createChatTranscript_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_message$amsReference=message.amsReferences,amsReferences=void 0===_message$amsReference?message.amsreferences:_message$amsReference,amsMetadata=message.amsMetadata,!amsReferences||!amsMetadata){_context2.next=12;break}return references=JSON.parse(amsReferences),metadata=JSON.parse(amsMetadata),fileMetadata={id:references[0],type:metadata[0].contentType},_context2.next=7,facadeChatSDK.downloadFileAttachment(fileMetadata);case 7:return blob=_context2.sent,_context2.next=10,convertBlobToBase64(blob);case 10:base64=_context2.sent,message.contentUrl=base64;case 12:return _context2.abrupt("return",message);case 13:case"end":return _context2.stop()}}),_callee2)})));return function(_x4){return _ref3.apply(this,arguments)}}()));case 11:messages=_context3.sent;case 12:options=Object.assign({},transcriptOptions,{messages:messages}),htmlBuilder=new createChatTranscript_TranscriptHTMLBuilder(options),text=htmlBuilder.createHTML(),fileName=(transcriptOptions.fileName||"transcript")+".html",utils_createFileAndDownload(fileName,text,"text/html");case 17:case"end":return _context3.stop()}}),_callee3)})));return function createChatTranscript(_x,_x2){return _ref.apply(this,arguments)}}(),plugins_createChatTranscript=createChatTranscript;function DownloadTranscriptStateful_regeneratorRuntime(){DownloadTranscriptStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var FooterStateful_uiTimer,processCreatedDateTime=function processCreatedDateTime(createdDateTime,chatCount){var formattedDate=new Date(createdDateTime),formattedSplitTimeString=formattedDate.toLocaleTimeString("en-us",{hour:"2-digit",minute:"2-digit"}).split(" "),finalizedTimeString="";return formattedSplitTimeString&&formattedSplitTimeString.length>1&&(finalizedTimeString=formattedSplitTimeString[0]+" "+formattedSplitTimeString[1]),0==chatCount?formattedDate.toLocaleDateString("en-us")+" "+finalizedTimeString:finalizedTimeString},DownloadTranscriptStateful_beautifyChatTranscripts=function beautifyChatTranscripts(chatTranscripts,renderMarkDown,attachmentMessage){var chats=JSON.parse(chatTranscripts).reverse(),bodyStartTag="<body bgcolor='"+Constants.x.ChatTranscriptsBodyColor+"'>",beautifiedChats="",tabIndex=1,previousDisplayName="",chatCount=0;return chats.forEach((function(value){var dialogNameMarginTop="6px",dialogboxMarginleft="40px",displayName="User",iconName="U",isAgentChat=!1,fileAttachmentName=Constants.x.DefaultFileAttachmentName,dialogColor=Constants.x.CustomerDialogColor,fontColor=Constants.x.CustomerFontColor,isSystemMessage=value.tags&&-1!==value.tags.toLowerCase().indexOf(Constants.e.systemMessageTag),isControlMessage=value.isControlMessage&&!0===value.isControlMessage,isAdaptiveCard=value.contentType&&value.contentType.toLowerCase()===Constants.x.AdaptiveCardType,isInternalMessage=value.deliveryMode&&value.deliveryMode.toLowerCase()===Constants.x.InternalMode,isHiddenMessage=value.tags&&-1!==value.tags.toLowerCase().indexOf(Constants.e.hiddenTag.toLowerCase());if(!(isSystemMessage||isControlMessage||isAdaptiveCard||isInternalMessage||isHiddenMessage)){value.from&&(value.from.application?(displayName=value.from.application.displayName,dialogColor=Constants.x.AgentDialogColor,fontColor=Constants.x.AgentFontColor,isAgentChat=!0):value.from.guest?(displayName=value.from.guest.displayName,dialogColor=Constants.x.CustomerDialogColor):value.from.user&&(displayName=value.from.user.displayName,dialogColor=Constants.x.CustomerDialogColor),iconName=function constructIconName(displayName){if(!displayName)return"";var iconName="C",displayNameSplit=displayName.split(" ");return displayNameSplit.length>1?iconName=displayNameSplit[0][0]+displayNameSplit[1][0]:1==displayNameSplit.length&&(iconName=displayNameSplit[0][0]),iconName}(displayName=function processDisplayName(displayName){var matchedTeamsDisplayName=displayName.match(".+:.+");return displayName.indexOf("teamsvisitor")>=0&&matchedTeamsDisplayName&&matchedTeamsDisplayName.length>0&&(displayName="Customer"),displayName}(displayName)),value.attachments&&value.attachments.length>0&&value.attachments[0].name&&(fileAttachmentName=value.attachments[0].name,value.content=attachmentMessage?attachmentMessage+" "+fileAttachmentName:"The following attachment was uploaded during the conversation: "+fileAttachmentName));var displayNamePlaceholder=processCreatedDateTime(value.createdDateTime,chatCount),iconPara="";displayName!==previousDisplayName&&(dialogboxMarginleft="0px",displayNamePlaceholder="<b>"+displayName+" </b> "+processCreatedDateTime(value.createdDateTime,chatCount),iconPara="<div class='circle' style='display:inline-block;float:left;margin-right:5px;width:35px;height:35px;border-radius:20px;color:black;line-height:35px;text-align:center;background:"+dialogColor+";'>                            <font tabindex ='"+tabIndex+"' color ="+fontColor+" style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;'>                                "+iconName+"                            </font>                            </div>",tabIndex++),displayName!==previousDisplayName&&(""===previousDisplayName&&(dialogNameMarginTop="0px"),""!==previousDisplayName&&(dialogNameMarginTop="20px"));var displayNameDiv="<div style='margin-right:-2px;margin-top:"+dialogNameMarginTop+";margin-bottom:-2px;margin-left:42px;top:-2px;position:relative;'>                                    <font tabindex ='"+tabIndex+"' size = '1px' color='#000000' style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:500;'>                                        "+displayNamePlaceholder+"                                    </font>                                </div>";tabIndex++,beautifiedChats=beautifiedChats+"<div class='transcripts' style='width:80%;margin-left:10%;'>"+iconPara+displayNameDiv+("<div class='dialogbox' style='font-family:Segoe UI,SegoeUI,Helvetica Neue,Helvetica,Arial,sans-serif;word-break:break-word;min-height:20px;max-width:80%;display:inline-block;margin-left:"+dialogboxMarginleft+";padding: 10px; background-color:"+dialogColor+"; border-radius: 0px 12px 12px 12px; left: 3px; top: 2px; '>")+"<font tabindex= '"+tabIndex+++"' color ="+fontColor+">"+function processContent(transcriptContent,isAgentChat,renderMarkDown){if(transcriptContent.toString().toLowerCase().indexOf(Constants.x.TranscriptMessageEmojiMessageType)>=0){var matchedEmojiImgTag=transcriptContent.match('<img src="http.*://.+/objects/.+/views.+">');matchedEmojiImgTag&&matchedEmojiImgTag.length>0&&transcriptContent.toString().toLowerCase().indexOf(matchedEmojiImgTag[0])>=0&&(transcriptContent=transcriptContent.replace(matchedEmojiImgTag[0],""))}return!isAgentChat&&transcriptContent.toString().toLowerCase().indexOf("a href")>=0&&transcriptContent.toString().toLowerCase().indexOf("target")>=0&&(transcriptContent=transcriptContent.slice(0,transcriptContent.toString().indexOf("target"))+" style='color:white' "+transcriptContent.slice(transcriptContent.toString().indexOf("target"))),renderMarkDown?renderMarkDown(transcriptContent):purify_default.a.sanitize(transcriptContent)}(value.content,isAgentChat,renderMarkDown)+"</font></div></div>",previousDisplayName=displayName,chatCount++}})),"<!DOCTYPE html><html><meta charset='UTF-8'>"+bodyStartTag+"<div class='allTranscripts' style='max-width:60%;min-width:30%;margin-left:20%;background-color:#FFFFFF;'>"+beautifiedChats+"</div></body></html>"},downloadTranscript=function(){var _ref=function DownloadTranscriptStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){DownloadTranscriptStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(DownloadTranscriptStateful_regeneratorRuntime().mark((function _callee(facadeChatSDK,downloadTranscriptProps,state){var _state$domainStates,liveChatContext,_inMemoryState$appSta,inMemoryState,_state$domainStates2,chatToken,data,bannerMessageOnError,renderMarkDown,attachmentMessage,webChatTranscript,transcriptOptions,chatTranscripts,byteCharacters;return DownloadTranscriptStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(liveChatContext=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.liveChatContext){_context.next=13;break}if(inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),liveChatContext=inMemoryState.domainStates.liveChatContext,(null==inMemoryState||null===(_inMemoryState$appSta=inMemoryState.appStates)||void 0===_inMemoryState$appSta?void 0:_inMemoryState$appSta.conversationState)===ConversationState.Active||liveChatContext){_context.next=13;break}if(!((chatToken=(null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.chatToken)||inMemoryState.domainStates.chatToken)&&Object.keys(chatToken).length>0)){_context.next=10;break}liveChatContext={chatToken:chatToken,requestId:chatToken.requestId||Object(lib.uuidv4)()},_context.next=13;break;case 10:return _context.next=12,null==facadeChatSDK?void 0:facadeChatSDK.getCurrentLiveChatContext();case 12:liveChatContext=_context.sent;case 13:return _context.next=15,null==facadeChatSDK?void 0:facadeChatSDK.getLiveChatTranscript({liveChatContext:liveChatContext});case 15:if(typeof(data=_context.sent)===Constants.e.String&&(data=JSON.parse(data)),bannerMessageOnError=downloadTranscriptProps.bannerMessageOnError,renderMarkDown=downloadTranscriptProps.renderMarkDown,attachmentMessage=downloadTranscriptProps.attachmentMessage,webChatTranscript=downloadTranscriptProps.webChatTranscript,null===data[Constants.e.ChatMessagesJson]||void 0===data[Constants.e.ChatMessagesJson]){_context.next=31;break}if(!(isNullOrUndefined(null==webChatTranscript?void 0:webChatTranscript.disabled)||!1===(null==webChatTranscript?void 0:webChatTranscript.disabled))){_context.next=26;break}return transcriptOptions=Object.assign({},webChatTranscript),_context.next=24,plugins_createChatTranscript(data[Constants.e.ChatMessagesJson],facadeChatSDK,!1,transcriptOptions);case 24:_context.next=29;break;case 26:chatTranscripts=window.btoa(encodeURIComponent(DownloadTranscriptStateful_beautifyChatTranscripts(data[Constants.e.ChatMessagesJson],renderMarkDown,attachmentMessage))),byteCharacters=decodeURIComponent(window.atob(chatTranscripts)),utils_createFileAndDownload(Constants.x.ChatTranscriptDownloadFile,byteCharacters,"text/html;charset=utf-8");case 29:_context.next=33;break;case 31:TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DownloadTranscriptResponseNullOrUndefined,ExceptionDetails:{exception:"Download transcript failed: response null or undefined."}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.DownloadTranscriptError,null!=bannerMessageOnError?bannerMessageOnError:Constants.e.defaultDownloadTranscriptError);case 33:case"end":return _context.stop()}}),_callee)})));return function downloadTranscript(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function FooterStateful_regeneratorRuntime(){FooterStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function FooterStateful_slicedToArray(arr,i){return function FooterStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FooterStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function FooterStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FooterStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FooterStateful_arrayLikeToArray(o,minLen)}(arr,i)||function FooterStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FooterStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FooterStateful_FooterStateful=function FooterStateful(props){var _footerProps$controlP4,_audioNotificationPro,_state$appStates$isAu;Object(react.useEffect)((function(){FooterStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXFooterStart})}),[]);var _onDownloadTranscriptClick,_useChatContextStore2=FooterStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],footerProps=props.footerProps,downloadTranscriptProps=props.downloadTranscriptProps,audioNotificationProps=props.audioNotificationProps,hideFooterDisplay=props.hideFooterDisplay,facadeChatSDK=FooterStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],controlProps=Object.assign({id:"oc-lcw-footer",dir:state.domainStates.globalDir,onDownloadTranscriptClick:(_onDownloadTranscriptClick=function FooterStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){FooterStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(FooterStateful_regeneratorRuntime().mark((function _callee(){var _downloadTranscriptPr;return FooterStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.DownloadTranscriptButtonClicked,Description:"Download transcript action started."}),_context.next=4,downloadTranscript(facadeChatSDK,downloadTranscriptProps,state);case 4:TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.DownloadTranscriptActionCompleted,Description:"Download transcript action completed."}),_context.next=11;break;case 7:_context.prev=7,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.ERROR,{Event:TelemetryEvent.DownloadTranscriptActionFailed,Description:"Download transcript action failed.",ExceptionDetails:{exception:_context.t0}}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.DownloadTranscriptError,null!==(_downloadTranscriptPr=null==downloadTranscriptProps?void 0:downloadTranscriptProps.bannerMessageOnError)&&void 0!==_downloadTranscriptPr?_downloadTranscriptPr:Constants.e.defaultDownloadTranscriptError);case 11:case"end":return _context.stop()}}),_callee,null,[[0,7]])}))),function onDownloadTranscriptClick(){return _onDownloadTranscriptClick.apply(this,arguments)}),onEmailTranscriptClick:function onEmailTranscriptClick(){var _footerProps$controlP,_footerProps$controlP2,_footerProps$controlP3;TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EmailTranscriptButtonClicked,Description:"Email Transcript action started."});var emailTranscriptButtonId=null!==(_footerProps$controlP=null==footerProps||null===(_footerProps$controlP2=footerProps.controlProps)||void 0===_footerProps$controlP2||null===(_footerProps$controlP3=_footerProps$controlP2.emailTranscriptButtonProps)||void 0===_footerProps$controlP3?void 0:_footerProps$controlP3.id)&&void 0!==_footerProps$controlP?_footerProps$controlP:controlProps.id+"-emailtranscript-button";emailTranscriptButtonId&&dispatch({type:LiveChatWidgetActionType.SET_PREVIOUS_FOCUSED_ELEMENT_ID,payload:emailTranscriptButtonId}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_EMAIL_TRANSCRIPT_PANE,payload:!0})},onAudioNotificationClick:function onAudioNotificationClick(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.AudioToggleButtonClicked,Description:"Audio button clicked."}),dispatch({type:LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION,payload:!state.appStates.isAudioMuted})}},null==footerProps?void 0:footerProps.controlProps,{audioNotificationButtonProps:Object.assign({},null==footerProps||null===(_footerProps$controlP4=footerProps.controlProps)||void 0===_footerProps$controlP4?void 0:_footerProps$controlP4.audioNotificationButtonProps,{isAudioMuted:state.appStates.isAudioMuted})});return Object(react.useEffect)((function(){var _footerProps$controlP5,_footerProps$controlP6,_footerProps$controlP7,_footerProps$controlP8;state.appStates.conversationState===ConversationState.Active&&(null===state.appStates.isAudioMuted&&dispatch({type:LiveChatWidgetActionType.SET_AUDIO_NOTIFICATION,payload:!(null==footerProps||null===(_footerProps$controlP5=footerProps.controlProps)||void 0===_footerProps$controlP5||!_footerProps$controlP5.hideAudioNotificationButton)||null!==(_footerProps$controlP6=null==footerProps||null===(_footerProps$controlP7=footerProps.controlProps)||void 0===_footerProps$controlP7||null===(_footerProps$controlP8=_footerProps$controlP7.audioNotificationButtonProps)||void 0===_footerProps$controlP8?void 0:_footerProps$controlP8.isAudioMuted)&&void 0!==_footerProps$controlP6&&_footerProps$controlP6}))}),[state.appStates.conversationState]),Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXFooterCompleted,ElapsedTimeInMilliseconds:FooterStateful_uiTimer.milliSecondsElapsed})}),[]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hideFooterDisplay&&Object(jsx_runtime.jsx)(cjs.Footer,{componentOverrides:null==footerProps?void 0:footerProps.componentOverrides,controlProps:controlProps,styleProps:null==footerProps?void 0:footerProps.styleProps}),Object(jsx_runtime.jsx)(audionotificationstateful_AudioNotificationStateful,{audioSrc:null!==(_audioNotificationPro=null==audioNotificationProps?void 0:audioNotificationProps.audioSrc)&&void 0!==_audioNotificationPro?_audioNotificationPro:"data:audio/mpeg;base64,SUQzAwAAAAAHdlRDT04AAAAPAAAB//5PAHQAaABlAHIAAABHRU9CAAAAKAAAAQD//gAA//5TAGYATQBhAHIAawBlAHIAcwAAAAwAAABkAAAAAAAAAEdFT0IAAACWAAABAP/+AAD//lMAZgBDAEQASQBuAGYAbwAAABwAAABkAAAAAQAAAInGktMGzMdMvxsOxb5i8JMcAAAAZAAAAInGktMGzMdMvxsOxb5i8JNEAAAARAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7kgAAAAJbGEnVMYAES2MJOqYwAIxIfWG5l5ARiQ+sNzLyAu5VVJICkoEdcSBICguiWT8M1+LObMz+xmZmZmSxLEtWVAAwDk/2FlJm97zRYscbMDxwTn7P/+IIIfE4Pwf5c+o5BBwnPlw//KO1A/3KqpJAUlAjriQJAUF0SyfhmvxZzZmf2MzMzMyWJYlqyoAGAcn+wspM3veaLFjjZgeOCc/Z//xBBD4nB+D/Ln1HIIOE58uH/5R2oHy4AAYEwYCQYACornvALrRJthkoZCwQ2U3LHoyEkfDBR73wCsVgjxgEYgejJL+aqGEnjK1riqJgctUlZ3CFbLVN+qM7/tv/7xjGtR376n8T9eaxzrGqlGyMmlnEpIceQ2WyiC4AAYEwYCQYACornvALrRJthkoZCwQ2U3LHoyEkfDBR73wCsVgjxgEYgejJL+aqGEnjK1riqJgctUlZ3CFbLVN+qM7/tv/7xjGtR376n8T9eaxzrGqlGyMmlnEpIceQ2WyiAPWUUm2k03cBF3/gh7sHxnWikLoeOYF6ot2W5ayrSXyIkJ7/+5IAEQACJBNYb2zADESCaw3tmAGH/FdVp+2HMP+K6rT9sOaO1cxvOc4FhrEoFjP9QGf/63ZAsImotmLRCLPCYKDmMhZxr1lFJtpNN3ARd/4Ie7B8Z1opC6HjmBeqLdluWsq0l8iJCejtXMbznOBYaxKBYz/UBn/+t2QLCJqLZi0QizwmCg5jIWca1hITbjbYkACEF1WEjAQuALuIqY1pMTpjTLYeh19pmYqy7VMzt3VsnWWo/2l8BzefMLgNLM9fQFP+/JawEktrM6wkJtxtsSABCC6rCRgIXAF3EVMa0mJ0xplsPQ6+0zMVZdqmZ27q2TrLUf7S+A5vPmFwGlmevoCn/fktYCSW1mT2MgklEkAhKx+G3bctrc/DbuK3FNjo/wM4/0+o38fV733h48EgRxLJ6vDgwEgSCev9g4WHAIBQruBAQd/6gQ/icH8H3/7hOD//8Tggc/gh5cHw/7GQSSiSAQlY/DbtuW1ufht3Fbimx0f4Gcf6fUb+Pq977w8eCQI4lk9XhwYCQJBPX+wcLDgEAoV3AgIO/9QIfxOD+D7///uSAEuAApUX2msvYkxSovtNZexJiXhdcee9qTEvC64897Um9wnB//+JwQOfwQ8uD4fhlMRERESQCi3jtVrGdDSrMogSMGKyg+QJyNeDV7GhW3/LVFJ3ujVdFaK0TIJcld3/57yx7rBU6e9T9Q5K3/8sDT6gaDv8RV0AqCoShlMRERESQCi3jtVrGdDSrMogSMGKyg+QJyNeDV7GhW3/LVFJ3ujVdFaK0TIJcld3/57yx7rBU6e9T9Q5K3/8sDT6gaDv8RV0AqCoSLoyCSSACEnBDTuwREZI679w8KNzvhW2awcYIqgeazfwx+9q1uMd4kyZXFxERXCYKNzvxKe/FXeMz7pQwMF2vQe2HBE8N3feVAQ8DLPDEX0XRkEkkAEJOCGndgiIyR137h4UbnfCts1g4wRVA81m/hj97VrcY7xJkyuLiIiuEwUbnfiU9+Ku8Zn3ShgYLteg9sOCJ4bu+8qAh4GWeGIvotaJKSRJSbkERCzoQbgj0ULOhoesI7YqkOqnZdKZjPHHmFpaBCzqJRapTshZaKJRBCTwib5UNP+owf/7kgBsAAJ7F9drW1pMT2L67WtrSYlsW12n6acxLYtrtP005uSm1ckexO49VGeFUnSXX/Ud9NrRJSSJKTcgiIWdCDcEeihZ0ND1hHbFUh1U7LpTMZ448wtLQIWdRKLVKdkLLRRKIISeETfKhp/1GDyU2rkj2J3Hqozwqk6S6/6jvpCSEgpttJpuAVX/k01qCn8ZWFNhjGzmhURPdVBYHfht5yvJ4xhT2bbJbctzlFnI2MUlECIrfOj8BciTTRUtmV+pF1f/ua94t/aPU5SNSg/FVhtzJeQkhIKbbSabgFV/5NNagp/GVhTYYxs5oVET3VQWB34becryeMYU9m2yW3Lc5RZyNjFJRAiK3zo/AXIk00VLZlfqRdX/7mveLf2j1OUjUoPxVYbcyXkLYiS7JJI5IBbcqvBkPtWdFYAElRGqL0Chqc0VJIxZ3b8tkd+SVNbYNk42bD7vRijvI65zBvpuLuFQ4x2WamPXef/8Rv53vaW3CxVwNsQPjylHYNXv1WxEl2SSRyQC25VeDIfas6KwAJKiNUXoFDU5oqSRizu35bL/+5IAkAACoiZU61uSXFREyp1rckuKrHlVre3pMVWPKrW9vSY78kqa2wbJxs2H3ejFHeR1zmDfTcXcKhxjss1Meu8//4jfzve0tuFirgbYgfHlKOwavfqA1iILtttssAEpaVaaw19pCpwYCMS9P8triAQOcT0cIfcR14wzxw4EgbKnLQzJaOFkUYzkwgXC+eNFlk1TIgCMRbJtRKKkV+yy8l7oiDTJmhAALtcISSLbZmnWIgu222ywASlpVprDX2kKnBgIxL0/y2uIBA5xPRwh9xHXjDPHDgSBsqctDMlo4WRRjOTCBcL540WWTVMiAIxFsm1EoqRX7LLyXuiINMmaEAAu1whJIttmad7CS///tbABm870LXky+kfmUkj06o1s4hNH7Iq+nYGvZrxZM/MFw7AZkR0CSlaUJCoDEsQSNHqdCDUyHHOf4VCmFd1HhusNWk+YUu1jFhx51lb8M0L3sJL//+1sAGbzvQteTL6R+ZSSPTqjWziE0fsir6dga9mvFkz8wXDsBmRHQJKVpQkKgMSxBI0ep0INTIcc5/hUKYV3//uSAKUAAsge1GtbkkxZA9qNa3JJiqhlVa1p6TFVDKq1rT0mUeG6w1aT5hS7WMWHHnWVvwzQsPrCTNv/tbABASmUEMTZwvMBADFmUoQPqcYZLnDTNfpGlwxD643Un6+VUurNMB2Eti7ckazq/RVPVcc6FkaLeI0YEa72SeJXsdW/hV67PYy5P1hJm3/2tgAgJTKCGJs4XmAgBizKUIH1OMMlzhpmv0jS4Yh9cbqT9fKqXVmmA7CWxduSNZ1foqnquOdCyNFvEaMCNd7JPEr2Orfwq9dnsZcnaIALb/62MAQI0pgAFBZwhzcxE8QaCFalEAsB5GKz0ho7CvKJ+oRTVQqKn1U0VFrpWy4c0RYWeGNRZobCJzUXhwihAK2AGQGQj2ZkXLZRLVGz/f7VqSWkmXnJOV9hYj9KtogAtv/rYwBAjSmAAUFnCHNzETxBoIVqUQCwHkYrPSGjsK8on6hFNVCoqfVTRUWulbLhzRFhZ4Y1FmhsInNReHCKEArYAZAZCPZmRctlEtUbP9/tWpJaSZeck5X2FiP0qGdjAAN3j/a0AP/7kgC1gAKDGlVrWnpMUGNKrWtPSYwQm0us6klxghNpdZ1JLijLzMNGhCd4yETDLYCMoHrGWlRx03EK7oROWMIRjXQ50rlIUnJlGQpRBEtCcG6zF7JKWFk2UR4nALwGqXKtYouCKfOcxZdb9fN7v9kbuitnYwADd4/2tAAoy8zDRoQneMhEwy2AjKB6xlpUcdNxCu6ETljCEY10OdK5SFJyZRkKUQRLQnBusxeySlhZNlEeJwC8BqlyrWKLginznMWXW/Xze7/ZG7or2iIK3+1sgAD0p+KqlpFbwoDMvBAEYeenYGsCFzhe3JgqDoVYtsDhixLnXfEdFGhEzUwxBAHa6iF0LuT4W0tszkvwB6B6zNyJBPTrQY5lQX2or9G0RBW/2tkAAelPxVUtIreFAZl4IAjDz07A1gQucL25MFQdCrFtgcMWJc674joo0ImamGIIA7XUQuhdyfC2ltmcl+APQPWZuRIJ6daDHMqC+1FfoGh1ERN5n/60ADdOliyF5yshWlHYqWneWxIkiFcSW5M3M1jr9kXtq4oXDDg4NnSAJu//+5IAw4ACwBhTe1h6TlgDCm9rD0nKXF1Hre3pMUuLqPW9vSYzTSyNOJMxS1Ep2/O4IDFrapSwJOf3t+/1////+0OoiJvM//WgAbp0sWQvOVkK0o7FS07y2JEkQriS3Jm5msdfsi9tXFC4YcHBs6QBN3maaWRpxJmKWolO353BAYtbVKWBJz+9v3+vewkq/7WgAATSMoCBDCRFBICRMuIYuSmEBJ5IEi0XxA56mxJ5NP4QxJcvl3vxPpZKhXHO4sjg1l8TycewFQ8O1cAaq63HxBQutc2rewkq/7WgAATSMoCBDCRFBICRMuIYuSmEBJ5IEi0XxA56mxJ5NP4QxJcvl3vxPpZKhXHO4sjg1l8TycewFQ8O1cAaq63HxBQutc2o3rAD3+2oAAGCfSVgNCxBAe2IQlFNGND6kpgquVYxKhqRSFYdzwcp8CjjLtNxoUB6zJxGS31ErCAtFdHj0azBhSpL//////////////////////////////////////////////////////////////////////////////////////uSANeAAm0X1Hs4wkxKIvqPZxhJiWBjR63t6TEsDGj1vb0m///////////////////////////////////////////////////////////////////////////////3rAD3+2oAAGCfSVgNCxBAe2IQlFNGND6kpgquVYxKhqRSFYdzwcp8CjjLtNxoUB6zJxGS31ErCAtFdHj0azBhSpK+wkq/7WgAASwBygOhdwKivAdAqcHGACcKkzawRcdFR2M4nMZ4QYZ+6PWIc6FS2o+aWaDEa3GApbDuFhKYd0oovsJKv+1oAAEsAcoDoXcCorwHQKnBxgAnCpM2sEXHRUdjOJzGeEGGfuj1iHOhUtqPmlmgxGtxgKWw7hYSmHdKKL7CS9/tQAABvBYcsow9BRJcwBwEizwDX0IGnZz+5SnLOXTvf3jGoBVlsf3HKOXqki3XsvABktTfH//////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAXiGNJrGHpMQcMaTWMPSYgAWUen7ecxAAso9P285v///////////////////////////////////////////////////////////////////////////////////////////////////////////////77CS9/tQAABvBYcsow9BRJcwBwEizwDX0IGnZz+5SnLOXTvf3jGoBVlsf3HKOXqki3XsvABktTfGbwEG720AAAflahxWtTVMcKEEs5rjqxISAOjCL97vw5N1Pvc1XB0RRPCk5pspYKPVv0tgk1qHDSObwEG720AAAflahxWtTVMcKEEs5rjqxISAOjCL97vw5N1Pvc1XB0RRPCk5pspYKPVv0tgk1qHDSO/skrfbUAAAc4qRFcEADJh2wITwoFE7zfkoRwgxbHL/ztc3jyemuWVpHUDElKscnC5WHDSMdf/////////////////////////////////////////////////////////////////////////////////////////////////////+5IA/4AGqBdSa1hiTjiC6k1rDEnHCF1DrOWJOOELqHWcsSf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////f2SVvtqAAAOcVIiuCABkw7YEJ4UCid5vyUI4QYtjl/52ubx5PTXLK0jqBiSlWOThcrDhpGOpsgQrtJAAABl1nCY5dwwnawgLC3D2x/RGM+gi+FvDOV0lPg0qhm4yIhVKq8v93/pJ5UZmyBCu0kAAAGXWcJjl3DCdrCAsLcPbH9EYz6CL4W8M5XSU+DSqGbjIiFUqry/3f+knlRkv9CI29tAAAFHxlpwlZDA/QGQhIDxFQkBISBIe//2u1sfaioIgPA0hh7hV+/6kGiemv////////////////////////////////////////////////////////////////////////////////////////////////////////////uSAP+ABxUXUetZWk41ouo9aytJxlhbP6xhJzDLC2f1jCTm//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////v9CI29tAAAFHxlpwlZDA/QGQhIDxFQkBISBIe//2u1sfaioIgPA0hh7hV+/6kGiemr/SlP9bQAABdoF1qAFywAQBQTMgVOB/XtIADaNjGdJnhDkv1cos1GpzWas8NPf9wkzV/pSn+toAAAu0C61AC5YAIAoJmQKnA/r2kABtGxjOkzwhyX6uUWajU5rNWeGnv+4SZom0KKusgAAAFplGchOwKjJy3AzyZ6qlw6ENtwfw/ftDKoJeJ9D6v53//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kAD/gAdEFlFp+UnOMQLKLT8pOcY0WUes5Mc4xoso9ZyY5/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////m0KKusgAAAFplGchOwKjJy3AzyZ6qlw6ENtwfw/ftDKoJeJ9D6v52/0pXbWgAAAc7ADtq2CEKYgFOiCV6tsn6BQq+qG5vvO6pQpGJ639lHv9KV21oAAAHOwA7atghCmIBToglerbJ+gUKvqhub7zuqUKRiet/ZR3awSrJ4AAd0/jX1MAaFiAJKIDjhGj7gkcsHX+d5Uz57V1bT36Ylf//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAg0DU/p+Rk+J4Gp/T8jJ8UAWUesZEcwoAso9YyI5v//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////3awSrJ4AAd0/jX1MAaFiAJKIDjhGj7gkcsHX+d5Uz57V1bT36YlZdSlaLIAAABva4xDJr7qELgHoTpIQioeVVYCmcjLuL0FrhQjLqUrRZAAAAN7XGIZNfdQhcA9CdJCEVDyqrAUzkZdxegtcKESbUpTWiAAAAfSvOQg4JhIcxEm3DZXsiwvKT8v8zrsdX/p/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+5IA/4AIghbOYxkRzCZC2cxjIjmEdCU/pecEsI6Ep/S84Jb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5tSlNaIAAAB9K85CDgmEhzESbcNleyLC8pPy/zOux1f+kIlgIocHFAAAA/fsh1j8dMLBDM4jPVMOCggkZrPrKtkOOCX6AiWAihwcUAAAD9+yHWPx0wsEMziM9Uw4KCCRms+sq2Q44JfoCskDN5gBwAAAP3jeSgDXYABRUdScti0IEw0XbxoI7P9P//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uSAP+ACKoJ0Gn5wSwhQToNPzglhHglMefnBKCPBKY8/OCU//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////hWSBm8wA4AAAH7xvJQBrsAAoqOpOWxaECYaLt40Edn+lHhABJh3tAAAAp44rCHDmcsYd4yIYRK4zjpDNHYsu8T5ApaAhaJNTHOhd2iP5NRIeBYHI63gyPCACTDvaAAABTxxWEOHM5Yw7xkQwiVxnHSGaOxZd4nyBS0BC0SamOdC7tEfyaiQ8CwOR1vBjbtdYxXicOI0COLSEeEVIyiD5Kgv5kJdZZpUX/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7kgD/gAeNCE55+cEoIKEJzz84JQa8PS3s4ebo14elvZw83f////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////m3a6xivE4cRoEcWkI8IqRlEHyVBfzIS6yzSogAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5IA/4ALFQlIoY95KhshKRQx7yVAAAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw=",isAudioMuted:null!==(_state$appStates$isAu=state.appStates.isAudioMuted)&&void 0!==_state$appStates$isAu&&_state$appStates$isAu})]})},footerstateful_FooterStateful=FooterStateful_FooterStateful;try{FooterStateful_FooterStateful.displayName="FooterStateful",FooterStateful_FooterStateful.__docgenInfo={description:"",displayName:"FooterStateful",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/footerstateful/FooterStateful.tsx#FooterStateful"]={docgenInfo:FooterStateful_FooterStateful.__docgenInfo,name:"FooterStateful",path:"src/components/footerstateful/FooterStateful.tsx#FooterStateful"})}catch(__react_docgen_typescript_loader_error){}var createFooter_createFooter=function createFooter(props,state){var _props$controlProps,_props$componentOverr,hideFooterDisplay=!((null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps||!_props$controlProps.hideFooter)&&function shouldShowFooter(state){return!state.appStates.isMinimized&&(state.appStates.conversationState===ConversationState.Active||state.appStates.conversationState===ConversationState.InActive||state.appStates.conversationState===ConversationState.Postchat)}(state));return Object(cjs.decodeComponentString)(null===(_props$componentOverr=props.componentOverrides)||void 0===_props$componentOverr?void 0:_props$componentOverr.footer)||Object(jsx_runtime.jsx)(footerstateful_FooterStateful,{footerProps:props.footerProps,downloadTranscriptProps:props.downloadTranscriptProps,audioNotificationProps:props.audioNotificationProps,hideFooterDisplay:hideFooterDisplay})};try{createFooter_createFooter.displayName="createFooter",createFooter_createFooter.__docgenInfo={description:"",displayName:"createFooter",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},citationPaneProps:{defaultValue:null,description:"",name:"citationPaneProps",required:!1,type:{name:"ICitationPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}},useSessionStorage:{defaultValue:null,description:"",name:"useSessionStorage",required:!1,type:{name:"boolean"}},allowSdkChatSupport:{defaultValue:null,description:"",name:"allowSdkChatSupport",required:!1,type:{name:"boolean"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},draggableChatWidgetProps:{defaultValue:null,description:"",name:"draggableChatWidgetProps",required:!1,type:{name:"IDraggableChatWidgetProps"}},mock:{defaultValue:null,description:"",name:"mock",required:!1,type:{name:"IMockProps"}},featureConfigProps:{defaultValue:null,description:"",name:"featureConfigProps",required:!1,type:{name:"IFeatureConfigProps"}},appInsightsConfig:{defaultValue:null,description:"",name:"appInsightsConfig",required:!1,type:{name:"IAppInsightsConfig"}},persistentChatHistoryProps:{defaultValue:null,description:"",name:"persistentChatHistoryProps",required:!1,type:{name:"IPersistentChatHistoryProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/common/createFooter.tsx#createFooter"]={docgenInfo:createFooter_createFooter.__docgenInfo,name:"createFooter",path:"src/components/livechatwidget/common/createFooter.tsx#createFooter"})}catch(__react_docgen_typescript_loader_error){}function createInternetConnectionChangeHandler_regeneratorRuntime(){createInternetConnectionChangeHandler_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function createInternetConnectionChangeHandler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){createInternetConnectionChangeHandler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var createInternetConnectionChangeHandler_getRegionBasedInternetTestUrl=function getRegionBasedInternetTestUrl(widgetSnippet){var _widgetSnippet$match;if(!widgetSnippet)return null;var widgetSnippetSourceRegex=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),baseCdnUrl=null===(_widgetSnippet$match=widgetSnippet.match(widgetSnippetSourceRegex))||void 0===_widgetSnippet$match?void 0:_widgetSnippet$match[1];return baseCdnUrl?""+baseCdnUrl+Constants.e.internetConnectionTestPath:null},isInternetConnected=function(){var _ref=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee(testUrl){var response;return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,fetch(testUrl,{method:"GET",cache:"no-cache"});case 3:return response=_context.sent,_context.abrupt("return",response.ok);case 7:return _context.prev=7,_context.t0=_context.catch(0),_context.abrupt("return",!1);case 10:case"end":return _context.stop()}}),_callee,null,[[0,7]])})));return function isInternetConnected(_x){return _ref.apply(this,arguments)}}(),createInternetConnectionChangeHandler=function(){var _ref2=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee3(state){var handler;return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:handler=function(){var _ref3=createInternetConnectionChangeHandler_asyncToGenerator(createInternetConnectionChangeHandler_regeneratorRuntime().mark((function _callee2(){var _inMemoryState$domain,_inMemoryState$domain2,inMemoryState,testUrl,_inMemoryState$domain3,_inMemoryState$domain4,_inMemoryState$domain5,_inMemoryState$domain6,_inMemoryState$domain7,_inMemoryState$domain8;return createInternetConnectionChangeHandler_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),!(testUrl=createInternetConnectionChangeHandler_getRegionBasedInternetTestUrl(null===(_inMemoryState$domain=inMemoryState.domainStates.liveChatConfig)||void 0===_inMemoryState$domain||null===(_inMemoryState$domain2=_inMemoryState$domain.LiveWSAndLiveChatEngJoin)||void 0===_inMemoryState$domain2?void 0:_inMemoryState$domain2.msdyn_widgetsnippet))){_context2.next=8;break}return _context2.next=5,isInternetConnected(testUrl);case 5:_context2.t0=_context2.sent,_context2.next=9;break;case 8:_context2.t0=!1;case 9:_context2.t0?(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.NetworkReconnected}),NotificationHandler_NotificationHandler.notifySuccess(NotificationScenarios.InternetConnection,null!==(_inMemoryState$domain6=null==inMemoryState||null===(_inMemoryState$domain7=inMemoryState.domainStates)||void 0===_inMemoryState$domain7||null===(_inMemoryState$domain8=_inMemoryState$domain7.middlewareLocalizedTexts)||void 0===_inMemoryState$domain8?void 0:_inMemoryState$domain8.MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE)&&void 0!==_inMemoryState$domain6?_inMemoryState$domain6:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_INTERNET_BACK_ONLINE),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.NetworkReconnected})):(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.NetworkDisconnected}),NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.InternetConnection,null!==(_inMemoryState$domain3=null==inMemoryState||null===(_inMemoryState$domain4=inMemoryState.domainStates)||void 0===_inMemoryState$domain4||null===(_inMemoryState$domain5=_inMemoryState$domain4.middlewareLocalizedTexts)||void 0===_inMemoryState$domain5?void 0:_inMemoryState$domain5.MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION)&&void 0!==_inMemoryState$domain3?_inMemoryState$domain3:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_NO_INTERNET_CONNECTION));case 11:case"end":return _context2.stop()}}),_callee2)})));return function handler(){return _ref3.apply(this,arguments)}}(),window.addEventListener("online",(function(){return handler()}),!1),window.addEventListener("offline",(function(){return handler()}),!1);case 3:case"end":return _context3.stop()}}),_callee3)})));return function createInternetConnectionChangeHandler(_x2){return _ref2.apply(this,arguments)}}(),defaultScrollBarProps={width:"7px",trackBackgroundColor:"#f1f1f1",thumbBackgroundColor:"#888",thumbBorderRadius:"10px",thumbHoverColor:"#555"},disposeTelemetryLoggers_disposeTelemetryLoggers=function disposeTelemetryLoggers(){!function disposeLoggers(){loggers.map((function(logger){logger.dispose()}))}()},defaultLiveChatWidgetGeneralStyles={position:"absolute",justifyContent:"center",alignItems:"center"},getGeneralStylesForButton_getGeneralStylesForButton=function getGeneralStylesForButton(state){var generalStylesForButton=defaultLiveChatWidgetGeneralStyles;return componentController_shouldShowChatButton(state)||componentController_shouldShowProactiveChatPane(state)||(generalStylesForButton=Object.assign({},defaultLiveChatWidgetGeneralStyles,{boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",borderRadius:"4px",padding:"0.5"})),generalStylesForButton};function initCallingSdk_regeneratorRuntime(){initCallingSdk_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var externalInitialsUpdater,initCallingSdk=function(){var _ref=function initCallingSdk_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){initCallingSdk_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(initCallingSdk_regeneratorRuntime().mark((function _callee(facadeChatSDK,setVoiceVideoCallingSDK){var callingSDK;return initCallingSdk_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!facadeChatSDK.getChatSDK().getVoiceVideoCalling){_context.next=8;break}return _context.next=4,facadeChatSDK.getChatSDK().getVoiceVideoCalling();case 4:return callingSDK=_context.sent,setVoiceVideoCallingSDK(callingSDK),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.INFO,{Event:TelemetryEvent.CallingSDKLoadSuccess}),_context.abrupt("return",!0);case 8:return _context.abrupt("return",!1);case 11:return _context.prev=11,_context.t0=_context.catch(0),TelemetryHelper_TelemetryHelper.logCallingEvent(LogLevel.ERROR,{Event:TelemetryEvent.CallingSDKLoadFailed,ExceptionDetails:{exception:_context.t0.message}}),_context.abrupt("return",!1);case 15:case"end":return _context.stop()}}),_callee,null,[[0,11]])})));return function initCallingSdk(_x,_x2){return _ref.apply(this,arguments)}}(),defaultConfirmationPaneLocalizedTexts={CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED:"Select Cancel and then select the download or email icon",CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_TRANSCRIPT_ENABLED:"Select Cancel and then select the email icon.",CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_DOWNLOAD_TRANSCRIPT_ENABLED:"Want a copy of this chat?",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_DOWNLOAD_TRANSCRIPT_ENABLED:"Select Cancel and then select the download icon.",CLOSE_CONFIRMATION_DIALOG_TITLE_DEFAULT:"Close Chat",CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_DEFAULT:"Do you really want to close this chat?"},currentAgentInitials=defaultWebChatStyles.botAvatarInitials,localizedStringsBotInitialsMiddleware_localizedStringsBotInitialsMiddleware=function localizedStringsBotInitialsMiddleware(onInitialsChange){return function(_ref){var dispatch=_ref.dispatch;return function(next){return function(action){if(onInitialsChange&&!externalInitialsUpdater&&(externalInitialsUpdater=onInitialsChange),action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY){var _action$payload,_activity$from,activity=null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.activity;if(null!=activity&&null!==(_activity$from=activity.from)&&void 0!==_activity$from&&_activity$from.name&&activity.from.role!==Constants.e.userMessageTag&&activity.from.name!==Constants.e.userMessageTag){var _activity$channelData,_activity$channelData2,_activity$tags,agentName=activity.from.name.trim();if(!("__agent__"===agentName||agentName.startsWith("__")||(null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData||null===(_activity$channelData2=_activity$channelData.tags)||void 0===_activity$channelData2?void 0:_activity$channelData2.includes(Constants.e.systemMessageTag))||(null===(_activity$tags=activity.tags)||void 0===_activity$tags?void 0:_activity$tags.includes(Constants.e.systemMessageTag)))&&agentName){var _externalInitialsUpda,newInitials=getIconText(agentName)||currentAgentInitials;if(newInitials!==currentAgentInitials)currentAgentInitials=newInitials,null===(_externalInitialsUpda=externalInitialsUpdater)||void 0===_externalInitialsUpda||_externalInitialsUpda(currentAgentInitials||""),cjs.BroadcastService.postMessage({eventName:"BotAvatarInitialsUpdated",payload:{initials:currentAgentInitials}}),dispatch({type:"__BOT_INITIALS_UPDATED__"})}}}return next(action)}}}},getOverriddenLocalizedStrings=function getOverriddenLocalizedStrings(existingOverrides){return function(strings){var result=Object.assign({},strings,existingOverrides);return null!=existingOverrides&&existingOverrides.ACTIVITY_BOT_SAID_ALT||(result.ACTIVITY_BOT_SAID_ALT=currentAgentInitials+" said:"),null!=existingOverrides&&existingOverrides.ACTIVITY_BOT_ATTACHED_ALT||(result.ACTIVITY_BOT_ATTACHED_ALT=currentAgentInitials+" attached:"),result}};function HyperlinkTextOverrideRenderer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function HyperlinkTextOverrideRenderer_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}var markdownrenderers_HyperlinkTextOverrideRenderer=function(){function HyperlinkTextOverrideRenderer(hyperlinkTextOverride){!function HyperlinkTextOverrideRenderer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HyperlinkTextOverrideRenderer),this.hyperlinkTextOverride=void 0,this.hyperlinkTextOverride=hyperlinkTextOverride}return function HyperlinkTextOverrideRenderer_createClass(Constructor,protoProps,staticProps){return protoProps&&HyperlinkTextOverrideRenderer_defineProperties(Constructor.prototype,protoProps),staticProps&&HyperlinkTextOverrideRenderer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(HyperlinkTextOverrideRenderer,[{key:"convertTextToHtmlNode",value:function convertTextToHtmlNode(text){var htmlNode=document.createElement(Constants.j.div);try{text=purify_default.a.sanitize(text,{ADD_ATTR:["target"]}),htmlNode.innerHTML=text}catch(_unused){return htmlNode}return htmlNode}},{key:"processANode",value:function processANode(htmlNode){for(var aTags=htmlNode.getElementsByTagName(Constants.j.aTagName),index=0;index<aTags.length;index++){var aNode=aTags[index];aNode&&aNode.tagName&&aNode.tagName.toLowerCase()===Constants.j.aTagName&&aNode.href&&(aNode.href!==aNode.text.trim()&&(aNode.text=aNode.href))}}},{key:"applicable",value:function applicable(text){if(!this.hyperlinkTextOverride)return!1;try{var aNodes=this.convertTextToHtmlNode(text).getElementsByTagName(Constants.j.aTagName);return!!aNodes&&aNodes.length&&aNodes.length>0}catch(_unused2){return!1}}},{key:"render",value:function render(text){if(!this.applicable(text))return text;var htmlNode=this.convertTextToHtmlNode(text);return this.processANode(htmlNode),text=htmlNode.innerHTML}}]),HyperlinkTextOverrideRenderer}();function attachmentProcessingMiddleware_regeneratorRuntime(){attachmentProcessingMiddleware_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var attachmentProcessingMiddleware_createSendFileAction=function createSendFileAction(files){return{payload:{files:files},type:WebChatActionType.WEB_CHAT_SEND_MESSAGE}},storemiddlewares_attachmentProcessingMiddleware=function attachmentProcessingMiddleware(_ref){var dispatch=_ref.dispatch;return function(next){return function(){var _ref2=function attachmentProcessingMiddleware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){attachmentProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(attachmentProcessingMiddleware_regeneratorRuntime().mark((function _callee(action){var _action$payload,_action$payload$attac,files,dispatchAction,nextAction;return attachmentProcessingMiddleware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!((null==action?void 0:action.type)===WebChatActionType.WEB_CHAT_SEND_MESSAGE&&(null==action||null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$attac=_action$payload.attachments)||void 0===_action$payload$attac?void 0:_action$payload$attac.length)>0)){_context.next=9;break}if(1!==(files=action.payload.attachments).length){_context.next=4;break}return _context.abrupt("return",next(action));case 4:return dispatchAction=attachmentProcessingMiddleware_createSendFileAction(files.slice(0,files.length-1)),nextAction=attachmentProcessingMiddleware_createSendFileAction([files[files.length-1]]),_context.next=8,dispatch(dispatchAction);case 8:return _context.abrupt("return",next(nextAction));case 9:return _context.abrupt("return",next(action));case 10:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()}},storemiddlewares_channelDataMiddleware=function channelDataMiddleware(addConversationalSurveyTagsCallback){return function(_ref){_ref.dispatch;return function(next){return function(action){var _action,_action2,_action2$payload,_action2$payload$acti;if((null===(_action=action)||void 0===_action?void 0:_action.type)===WebChatActionType.DIRECT_LINE_POST_ACTIVITY_PENDING&&null!==(_action2=action)&&void 0!==_action2&&null!==(_action2$payload=_action2.payload)&&void 0!==_action2$payload&&null!==(_action2$payload$acti=_action2$payload.activity)&&void 0!==_action2$payload$acti&&_action2$payload$acti.channelData){var channelIdTag=""+Constants.e.channelIdKey+Constants.e.ChannelId,customerMessageTag=""+Constants.e.CustomerTag;action.payload.activity.channelData.tags?(action.payload.activity.channelData.tags.includes(channelIdTag)||action.payload.activity.channelData.tags.push(channelIdTag),action.payload.activity.channelData.tags.includes(customerMessageTag)||action.payload.activity.channelData.tags.push(customerMessageTag)):(action.payload.activity.channelData.tags=[channelIdTag],action.payload.activity.channelData.tags.push(customerMessageTag)),(action=addConversationalSurveyTagsCallback(action)).payload.activity.channelData.metadata={deliveryMode:lib.DeliveryMode.Bridged}}return next(action)}}}},style_utilities_lib=__webpack_require__("./node_modules/@fluentui/style-utilities/lib/index.js"),ConversationDividerActivity_ConversationDividerActivity=function ConversationDividerActivity(props){var styleApplied=Object(style_utilities_lib.eb)(defaultPersistentChatHistoryProps.dividerActivityStyle,props.dividerActivityStyle),ariaLabel=props.dividerActivityAriaLabel||defaultMiddlewareLocalizedTexts.CONVERSATION_DIVIDER_ARIA_LABEL,dividerRef=react_default.a.useRef(null);return react_default.a.useEffect((function(){if(dividerRef.current){var article=dividerRef.current.closest(".webchat__basic-transcript__activity");if(article){var labelDiv=article.querySelector('div[id*="webchat__basic-transcript__active-descendant-label--"]');labelDiv&&(labelDiv.textContent=ariaLabel||"")}}}),[ariaLabel]),Object(jsx_runtime.jsx)("div",{ref:dividerRef,role:"separator","aria-label":ariaLabel,"aria-hidden":!1,className:styleApplied,"data-accessibility-divider":"true",style:{position:"relative"}})};ConversationDividerActivity_ConversationDividerActivity.displayName="ConversationDividerActivity";var DirectLineActivityType,activities_ConversationDividerActivity=ConversationDividerActivity_ConversationDividerActivity;try{__function.displayName="ConversationDividerActivity",__function.__docgenInfo={description:"",displayName:"ConversationDividerActivity",props:{pageSize:{defaultValue:null,description:"",name:"pageSize",required:!1,type:{name:"number"}},dividerActivityStyle:{defaultValue:null,description:"",name:"dividerActivityStyle",required:!1,type:{name:"IStyle"}},dividerActivityAriaLabel:{defaultValue:null,description:"Accessible label announced by screen readers for the conversation divider element.\nIf not supplied, a default provided in defaultPersistentChatHistoryProps will be used.",name:"dividerActivityAriaLabel",required:!1,type:{name:"string"}},bannerStyle:{defaultValue:null,description:"",name:"bannerStyle",required:!1,type:{name:"IStyle"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/ConversationDividerActivity.tsx#ConversationDividerActivity"]={docgenInfo:ConversationDividerActivity_ConversationDividerActivity.__docgenInfo,name:"ConversationDividerActivity",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/activities/ConversationDividerActivity.tsx#ConversationDividerActivity"})}catch(__react_docgen_typescript_loader_error){}!function(DirectLineActivityType){DirectLineActivityType.Message="message",DirectLineActivityType.Typing="typing"}(DirectLineActivityType||(DirectLineActivityType={}));var BrowserVendor,defaultUserMessageStyles={fontSize:"14px"},loggedSystemMessages=new Array,lastRenderedAt=0,isTagIncluded=function isTagIncluded(card,tag){return isDataTagsPresent(card)&&card.activity.channelData.tags.includes(tag)},isDataTagsPresent=function isDataTagsPresent(card){return card&&card.activity&&card.activity.channelData&&card.activity.channelData.tags&&card.activity.channelData.tags.length>0},activityMiddleware_createActivityMiddleware=function createActivityMiddleware(renderMarkdown,systemMessageStyleProps,userMessageStyleProps,localizedTexts){return function(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(card.activity){var _card$activity$from;if((null===(_card$activity$from=card.activity.from)||void 0===_card$activity$from?void 0:_card$activity$from.role)===DirectLineSenderRole.Channel)return function(){return!1};if(isTagIncluded(card,Constants.e.hiddenTag))return function(){return!1};if(isTagIncluded(card,Constants.e.systemMessageTag))return function handleSystemMessage(next,args,card,renderMarkdown,systemMessageStyleProps){var _card$activity,_card$activity$channe,_card$activity$channe2,_card$activity2,_card$activity2$chann,_card$activity3,_card$activity3$chann,_card$activity3$chann2,_card$activity4,_card$activity4$chann,_card$activity5,_card$activity5$chann,_card$nextVisibleActi,_card$nextVisibleActi2,_card$activity6,_card$activity6$chann,_card$activity7,_card$nextVisibleActi3,_card$activity8,systemMessageStyles=Object.assign({},defaultSystemMessageStyles,systemMessageStyleProps);return null!==(_card$activity=card.activity)&&void 0!==_card$activity&&null!==(_card$activity$channe=_card$activity.channelData)&&void 0!==_card$activity$channe&&null!==(_card$activity$channe2=_card$activity$channe.tags)&&void 0!==_card$activity$channe2&&_card$activity$channe2.includes(Constants.e.averageWaitTimeMessageTag)&&loggedSystemMessages.indexOf(null===(_card$activity2=card.activity)||void 0===_card$activity2||null===(_card$activity2$chann=_card$activity2.channelData)||void 0===_card$activity2$chann?void 0:_card$activity2$chann.clientmessageid)<0&&(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.AverageWaitTimeMessageRecieved,Description:"Average wait time message was received"}),loggedSystemMessages.push(card.activity.channelData.clientmessageid)),null!==(_card$activity3=card.activity)&&void 0!==_card$activity3&&null!==(_card$activity3$chann=_card$activity3.channelData)&&void 0!==_card$activity3$chann&&null!==(_card$activity3$chann2=_card$activity3$chann.tags)&&void 0!==_card$activity3$chann2&&_card$activity3$chann2.includes(Constants.e.queuePositionMessageTag)&&loggedSystemMessages.indexOf(null===(_card$activity4=card.activity)||void 0===_card$activity4||null===(_card$activity4$chann=_card$activity4.channelData)||void 0===_card$activity4$chann?void 0:_card$activity4$chann.clientmessageid)<0&&(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.QueuePositionMessageRecieved,Description:"Queue position message was received"}),loggedSystemMessages.push(card.activity.channelData.clientmessageid)),null!==(_card$activity5=card.activity)&&void 0!==_card$activity5&&null!==(_card$activity5$chann=_card$activity5.channelData)&&void 0!==_card$activity5$chann&&_card$activity5$chann.clientmessageid&&(null===(_card$nextVisibleActi=card.nextVisibleActivity)||void 0===_card$nextVisibleActi||null===(_card$nextVisibleActi2=_card$nextVisibleActi.channelData)||void 0===_card$nextVisibleActi2?void 0:_card$nextVisibleActi2.clientmessageid)===(null===(_card$activity6=card.activity)||void 0===_card$activity6||null===(_card$activity6$chann=_card$activity6.channelData)||void 0===_card$activity6$chann?void 0:_card$activity6$chann.clientmessageid)||null!==(_card$activity7=card.activity)&&void 0!==_card$activity7&&_card$activity7.messageid&&(null===(_card$nextVisibleActi3=card.nextVisibleActivity)||void 0===_card$nextVisibleActi3?void 0:_card$nextVisibleActi3.messageid)===(null===(_card$activity8=card.activity)||void 0===_card$activity8?void 0:_card$activity8.messageid)?function(){return!1}:(card.activity.text=renderMarkdown(card.activity.text),function(){return Object(jsx_runtime.jsx)("div",{style:systemMessageStyles,"aria-hidden":"false",className:Constants.e.markDownSystemMessageClass,dangerouslySetInnerHTML:{__html:card.activity.text}},card.activity.id)})}(0,0,card,renderMarkdown,systemMessageStyleProps);if(isTagIncluded(card,Constants.e.persistentChatHistoryMessagePullTriggerTag)){var _card$activity9,_card$activity9$chann,_card$activity9$chann2;LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable||LazyLoadActivity_LazyLoadHandler.setHasMoreHistoryAvailable(!0);var receivedAt=null==card||null===(_card$activity9=card.activity)||void 0===_card$activity9||null===(_card$activity9$chann=_card$activity9.channelData)||void 0===_card$activity9$chann||null===(_card$activity9$chann2=_card$activity9$chann.webChat)||void 0===_card$activity9$chann2?void 0:_card$activity9$chann2.receivedAt;return receivedAt<lastRenderedAt?(card.activity=null,function(){return!1}):(lastRenderedAt=receivedAt,function(){return LazyLoadActivity_LazyLoadHandler.hasMoreHistoryAvailable?Object(jsx_runtime.jsx)(activities_LazyLoadActivity,{}):null})}if(isTagIncluded(card,Constants.e.persistentChatHistoryMessageTag)){var userMessageStyles=Object.assign({},defaultUserMessageStyles,userMessageStyleProps);return function(){return Object(jsx_runtime.jsx)("div",{className:card.activity.from.role===DirectLineSenderRole.User?Constants.e.sentMessageClassName:Constants.e.receivedMessageClassName,style:userMessageStyles,children:next.apply(void 0,args).apply(void 0,arguments)})}}if(isTagIncluded(card,Constants.e.conversationDividerTag)){var conversationDividerLabel=(null==localizedTexts?void 0:localizedTexts.CONVERSATION_DIVIDER_ARIA_LABEL)||defaultMiddlewareLocalizedTexts.CONVERSATION_DIVIDER_ARIA_LABEL;return Object(jsx_runtime.jsx)(activities_ConversationDividerActivity,{dividerActivityAriaLabel:conversationDividerLabel})}if(card.activity.text&&card.activity.type===DirectLineActivityType.Message){card.activity.channelData.isHtmlEncoded||card.activity.channelId!==Constants.e.webchatChannelId||(card.activity.text=function escapeHtml(inputString){var entityMap={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(inputString).replace(/[<>"'/]/g,(function(s){return entityMap[s]}))}(card.activity.text),card.activity.channelData.isHtmlEncoded=!0);var _userMessageStyles=Object.assign({},defaultUserMessageStyles,userMessageStyleProps);return function(){return Object(jsx_runtime.jsx)("div",{className:card.activity.from.role===DirectLineSenderRole.User?Constants.e.sentMessageClassName:Constants.e.receivedMessageClassName,style:_userMessageStyles,children:next.apply(void 0,args).apply(void 0,arguments)})}}}return next.apply(void 0,args)}}}};__webpack_require__("./node_modules/core-js/modules/es.array.last-index-of.js");!function(BrowserVendor){BrowserVendor.CHROME="Chrome",BrowserVendor.FIREFOX="Firefox",BrowserVendor.SAFARI="Safari",BrowserVendor.EDGE="Edge",BrowserVendor.EDGE_CHROMIUM="Edg",BrowserVendor.OPERA="Opera",BrowserVendor.UNKNOWN="Unknown"}(BrowserVendor||(BrowserVendor={}));var userAgent=void 0,getUserAgent=function getUserAgent(){return userAgent||(userAgent=window.navigator.userAgent),userAgent},userAgentContainsString=function userAgentContainsString(searchString){return getUserAgent().indexOf(searchString)>-1},BrowserInfo_getBrowserName=function getBrowserName(){return function isOpera(){return userAgentContainsString("OPR/")}()?BrowserVendor.OPERA:function isEdge(){return userAgentContainsString(BrowserVendor.EDGE)||userAgentContainsString(BrowserVendor.EDGE_CHROMIUM)}()?BrowserVendor.EDGE:userAgentContainsString(BrowserVendor.CHROME)?BrowserVendor.CHROME:userAgentContainsString(BrowserVendor.FIREFOX)?BrowserVendor.FIREFOX:userAgentContainsString(BrowserVendor.SAFARI)?BrowserVendor.SAFARI:BrowserVendor.UNKNOWN},FileAttachmentIconMap={aac:AudioIcon,aiff:AudioIcon,alac:AudioIcon,amr:AudioIcon,avchd:VideoIcon,avi:VideoIcon,bmp:ImageIcon,doc:WordIcon,docx:WordIcon,flac:AudioIcon,flv:VideoIcon,gif:ImageIcon,jiff:ImageIcon,jpeg:ImageIcon,jpg:ImageIcon,mpe:VideoIcon,mpeg:VideoIcon,mpg:VideoIcon,mpv:VideoIcon,mp2:AudioIcon,mp3:AudioIcon,mp4:VideoIcon,m4p:VideoIcon,m4v:VideoIcon,mov:VideoIcon,one:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xOTYzIDEyOHEzNSAwIDYwIDI1dDI1IDYwdjE2MjJxMCAzNS0yNSA2MHQtNjAgMjVINTk3cS0zNSAwLTYwLTI1dC0yNS02MHYtMjk5SDg1cS0zNSAwLTYwLTI1dC0yNS02MFY1OTdxMC0zNSAyNS02MHQ2MC0yNWg0MjdWMjEzcTAtMzUgMjUtNjB0NjAtMjVoMTM2NnpNMzg5IDkzOWwyNDIgNDIwaDE1MlY2ODlINjM1djQyOUw0MDIgNjg5SDI0MXY2NzBoMTQ4VjkzOXptMTUzMSA4NTN2LTI1NmgtMjU2djI1NmgyNTZ6bTAtMzg0di0yNTZoLTI1NnYyNTZoMjU2em0wLTM4NFY3NjhoLTI1NnYyNTZoMjU2em0wLTM4NFYyNTZINjQwdjI1NmgyOTlxMzUgMCA2MCAyNXQyNSA2MHY4NTRxMCAzNS0yNSA2MHQtNjAgMjVINjQwdjI1Nmg4OTZWNjQwaDM4NHoiIC8+DQo8L3N2Zz4=",pcm:AudioIcon,pdf:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgdmlld0JveD0iMCAwIDIwNDggMjA0OCINCiAgICB3aWR0aD0iMTJweCINCiAgICBoZWlnaHQ9IjEycHgiPg0KICAgIDxwYXRoIGQ9Ik0xOTIwIDE2NjRoLTEyOHYzODRIMTI4di0zODRIMFY2NDBoMTI4VjBoMTI0M2w0MjEgNDIxdjIxOWgxMjh2MTAyNHpNMTQwOCAzODRoMTY1bC0xNjUtMTY1djE2NXpNMjU2IDY0MGgxNDA4VjUxMmgtMzg0VjEyOEgyNTZ2NTEyem0xNDA4IDEwMjRIMjU2djI1NmgxNDA4di0yNTZ6bTEyOC04OTZIMTI4djc2OGgxNjY0Vjc2OHpNNDQ4IDg5NnE0MCAwIDc1IDE1dDYxIDQxIDQxIDYxIDE1IDc1cTAgNDAtMTUgNzV0LTQxIDYxLTYxIDQxLTc1IDE1aC02NHYxMjhIMjU2Vjg5NmgxOTJ6bTAgMjU2cTI2IDAgNDUtMTl0MTktNDVxMC0yNi0xOS00NXQtNDUtMTloLTY0djEyOGg2NHptNDQ4LTI1NnE1MyAwIDk5IDIwdDgyIDU1IDU1IDgxIDIwIDEwMHEwIDUzLTIwIDk5dC01NSA4Mi04MSA1NS0xMDAgMjBINzY4Vjg5NmgxMjh6bTAgMzg0cTI3IDAgNTAtMTB0NDAtMjcgMjgtNDEgMTAtNTBxMC0yNy0xMC01MHQtMjctNDAtNDEtMjgtNTAtMTB2MjU2em0zODQtMzg0aDMyMHYxMjhoLTE5MnYxMjhoMTkydjEyOGgtMTkydjEyOGgtMTI4Vjg5NnoiIC8+DQo8L3N2Zz4=",png:ImageIcon,ppt:PowerpointIcon,pptx:PowerpointIcon,qt:VideoIcon,rar:ArchiveIcon,swf:VideoIcon,tar:ArchiveIcon,"tar.gz":ArchiveIcon,tgz:ArchiveIcon,txt:BlankIcon,vsd:VisioIcon,vsdx:VisioIcon,wav:AudioIcon,webm:VideoIcon,webp:ImageIcon,wma:AudioIcon,wmv:VideoIcon,xls:ExcelIcon,xlsx:ExcelIcon,zip:ArchiveIcon,zipx:ArchiveIcon,"7z":ArchiveIcon},FileAttachmentIconManager_getFileAttachmentIconData=function getFileAttachmentIconData(extension){var key=extension.startsWith(".")?extension.slice(1):extension||"";return FileAttachmentIconMap[key.toLowerCase()]||BlankIcon},FileAttachmentIconManager_isInlineMediaSupported=function isInlineMediaSupported(attachmentName){switch(BrowserInfo_getBrowserName()){case BrowserVendor.CHROME:case BrowserVendor.OPERA:return Constants.e.chromeSupportedInlineMediaRegex.test(attachmentName);case BrowserVendor.FIREFOX:return Constants.e.firefoxSupportedInlineMediaRegex.test(attachmentName);case BrowserVendor.EDGE:return function isChromiumEdge(){return userAgentContainsString(BrowserVendor.EDGE_CHROMIUM)&&!userAgentContainsString(BrowserVendor.EDGE)}()&&Constants.e.chromeSupportedInlineMediaRegex.test(attachmentName);default:return!1}};try{FileAttachmentIconManager_getFileAttachmentIconData.displayName="getFileAttachmentIconData",FileAttachmentIconManager_getFileAttachmentIconData.__docgenInfo={description:"Get file attachment icon image depending on extension.",displayName:"getFileAttachmentIconData",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#getFileAttachmentIconData"]={docgenInfo:FileAttachmentIconManager_getFileAttachmentIconData.__docgenInfo,name:"getFileAttachmentIconData",path:"src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#getFileAttachmentIconData"})}catch(__react_docgen_typescript_loader_error){}try{FileAttachmentIconManager_isInlineMediaSupported.displayName="isInlineMediaSupported",FileAttachmentIconManager_isInlineMediaSupported.__docgenInfo={description:"",displayName:"isInlineMediaSupported",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#isInlineMediaSupported"]={docgenInfo:FileAttachmentIconManager_isInlineMediaSupported.__docgenInfo,name:"isInlineMediaSupported",path:"src/components/webchatcontainerstateful/common/utils/FileAttachmentIconManager.tsx#isInlineMediaSupported"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./node_modules/core-js/modules/es.object.entries.js");var defaultAttachmentProps_webChatAttachmentId="oc-lcw-webchat-attachment",defaultAttachmentProps_adaptiveCardAttachmentId="ms_lcw_webchat_adaptive_card",defaultAttachmentProps_enableInlinePlaying=!0,defaultAttachmentContentStyles={width:"200px"},defaultAttachmentDividerStyles={margin:"0",height:"1px",border:"0px",backgroundColor:"#E8EAEC"},defaultAttachmentDownloadIconStyles={height:"12px",width:"12px",marginLeft:"auto !important",padding:"2px !important",fill:"#000000"},defaultAttachmentFileNameStyles={minHeight:"15px",marginLeft:"5px",marginRight:"5px",color:"#000000 !important"},defaultAttachmentSizeStyles={display:"none"},defaultAttachmentIconStyles={direction:"rtl",padding:"0 0 0 8px",lineHeight:0},defaultAttachmentStyles={display:"flex",alignItems:"center",background:"transparent",fontSize:"12px",lineHeight:"16px",boxSizing:"border-box",borderRadius:"2px",wordBreak:"break-all"},AttachmentContent_AttachmentContent=function AttachmentContent(props){return Object(jsx_runtime.jsx)("div",{id:props.id,style:props.style,children:props.children})};AttachmentContent_AttachmentContent.displayName="AttachmentContent";var attachments_AttachmentContent=AttachmentContent_AttachmentContent;try{__function.displayName="AttachmentContent",__function.__docgenInfo={description:"",displayName:"AttachmentContent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/AttachmentContent.tsx#AttachmentContent"]={docgenInfo:AttachmentContent_AttachmentContent.__docgenInfo,name:"AttachmentContent",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/AttachmentContent.tsx#AttachmentContent"})}catch(__react_docgen_typescript_loader_error){}var AttachmentIcon_AttachmentIcon=function AttachmentIcon(props){var _props$src;return Object(jsx_runtime.jsx)("div",{id:props.id,style:props.style,children:Object(jsx_runtime.jsx)("img",{src:null!==(_props$src=props.src)&&void 0!==_props$src?_props$src:FileAttachmentIconManager_getFileAttachmentIconData("txt"),alt:"attachment icon"})})};AttachmentIcon_AttachmentIcon.displayName="AttachmentIcon";var attachments_AttachmentIcon=AttachmentIcon_AttachmentIcon;try{__function.displayName="AttachmentIcon",__function.__docgenInfo={description:"",displayName:"AttachmentIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/AttachmentIcon.tsx#AttachmentIcon"]={docgenInfo:AttachmentIcon_AttachmentIcon.__docgenInfo,name:"AttachmentIcon",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/AttachmentIcon.tsx#AttachmentIcon"})}catch(__react_docgen_typescript_loader_error){}function Attachment_slicedToArray(arr,i){return function Attachment_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Attachment_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function Attachment_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Attachment_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Attachment_arrayLikeToArray(o,minLen)}(arr,i)||function Attachment_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Attachment_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FileScanStatus,Attachment_Attachment=function Attachment(props){var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_state$domainStates$r6,_state$domainStates$r7,_state$domainStates$r8,_state$domainStates$r9,_state$domainStates$r10,iconData=props.iconData,imageCard=props.imageCard,textCard=props.textCard,renderer=props.renderer,state=Attachment_slicedToArray(hooks_useChatContextStore(),1)[0],attachmentId=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2||null===(_state$domainStates$r3=_state$domainStates$r2.attachmentProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.webChatAttachmentId)&&void 0!==_state$domainStates$r?_state$domainStates$r:defaultAttachmentProps_webChatAttachmentId,attachmentDividerStyles=Object.assign({},defaultAttachmentDividerStyles,null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4?void 0:_state$domainStates$r4.attachmentDividerStyles),attachmentIconStyles=Object.assign({},defaultAttachmentIconStyles,null===(_state$domainStates$r5=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.attachmentIconStyles),attachmentStyles=Object.assign({},defaultAttachmentStyles,null===(_state$domainStates$r6=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r6?void 0:_state$domainStates$r6.attachmentStyles),attachmentSizeStylesString=Object.entries(Object.assign({},defaultAttachmentSizeStyles,null===(_state$domainStates$r7=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r7?void 0:_state$domainStates$r7.attachmentSizeStyles)).map((function(_ref){var _ref2=Attachment_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentContentStylesString=Object.entries(Object.assign({},defaultAttachmentContentStyles,null===(_state$domainStates$r8=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r8?void 0:_state$domainStates$r8.attachmentContentStyles)).map((function(_ref3){var _ref4=Attachment_slicedToArray(_ref3,2),k=_ref4[0],v=_ref4[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentFileNameStylesString=Object.entries(Object.assign({},defaultAttachmentFileNameStyles,null===(_state$domainStates$r9=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r9?void 0:_state$domainStates$r9.attachmentFileNameStyles)).map((function(_ref5){var _ref6=Attachment_slicedToArray(_ref5,2),k=_ref6[0],v=_ref6[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";"),attachmentDownloadIconStylesString=Object.entries(Object.assign({},defaultAttachmentDownloadIconStyles,null===(_state$domainStates$r10=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r10?void 0:_state$domainStates$r10.attachmentDownloadIconStyles)).map((function(_ref7){var _ref8=Attachment_slicedToArray(_ref7,2),k=_ref8[0],v=_ref8[1];return k.replace(/[A-Z]/g,(function(match){return"-"+match.toLowerCase()}))+":"+v})).join(";");return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n            .webchat__fileContent__size { "+attachmentSizeStylesString+" }\n            .webchat__fileContent { "+attachmentContentStylesString+" }\n            .webchat__fileContent__fileName { "+attachmentFileNameStylesString+" }\n            .webchat__fileContent__downloadIcon { "+attachmentDownloadIconStylesString+" }\n        "}),Object(jsx_runtime.jsxs)("div",{dir:state.domainStates.globalDir,children:[imageCard&&renderer(imageCard),imageCard&&Object(jsx_runtime.jsx)("hr",{id:attachmentId+"-divider",style:attachmentDividerStyles}),Object(jsx_runtime.jsxs)(attachments_AttachmentContent,{attachment:textCard.attachment,id:attachmentId,style:attachmentStyles,children:[Object(jsx_runtime.jsx)(attachments_AttachmentIcon,{src:iconData,id:attachmentId+"-icon",style:attachmentIconStyles}),textCard&&renderer(textCard)]})]})]})},attachments_Attachment=Attachment_Attachment;try{__function.displayName="Attachment",__function.__docgenInfo={description:"",displayName:"Attachment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/Attachment.tsx#Attachment"]={docgenInfo:Attachment_Attachment.__docgenInfo,name:"Attachment",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/Attachment.tsx#Attachment"})}catch(__react_docgen_typescript_loader_error){}!function(FileScanStatus){FileScanStatus.PASSED="passed",FileScanStatus.MALWARE="malware",FileScanStatus.INPROGRESS="in progress"}(FileScanStatus||(FileScanStatus={}));var attachments_FileScanStatus=FileScanStatus,DownloadBlockedAttachment_DownloadBlockedAttachment=function DownloadBlockedAttachment(props){return Object(jsx_runtime.jsx)(attachments_Attachment,Object.assign({},props,{imageCard:void 0,renderer:function renderer(){return Object(jsx_runtime.jsxs)("div",{style:{display:"flex",padding:"10px 10px 10px 8px",width:"100%"},children:[Object(jsx_runtime.jsxs)("div",{style:{fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif"},children:[" ",props.textCard.attachment.name," "]}),Object(jsx_runtime.jsx)("div",{style:{marginLeft:"auto",paddingRight:"10px"},children:props.extraContent&&props.extraContent})]})}}))};DownloadBlockedAttachment_DownloadBlockedAttachment.displayName="DownloadBlockedAttachment";var attachments_DownloadBlockedAttachment=DownloadBlockedAttachment_DownloadBlockedAttachment;try{__function.displayName="DownloadBlockedAttachment",__function.__docgenInfo={description:"",displayName:"DownloadBlockedAttachment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/DownloadBlockedAttachment.tsx#DownloadBlockedAttachment"]={docgenInfo:DownloadBlockedAttachment_DownloadBlockedAttachment.__docgenInfo,name:"DownloadBlockedAttachment",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/DownloadBlockedAttachment.tsx#DownloadBlockedAttachment"})}catch(__react_docgen_typescript_loader_error){}var MaliciousAttachment_MaliciousAttachment=function MaliciousAttachment(props){var extraContent=Object(jsx_runtime.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iIiBmaWxsPSJyZWQiIHN0cm9rZS13aWR0aD0iMyIgZm9jdXNhYmxlPSJmYWxzZSIgaGVpZ2h0PSIxNCIgcm9sZT0icHJlc2VudGF0aW9uIiB2aWV3Qm94PSIwIDAgMTQgMTQiIHdpZHRoPSIxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNy43MTA5NCA3TDEzLjEwMTYgMTIuMzk4NEwxMi4zOTg0IDEzLjEwMTZMNyA3LjcxMDk0TDEuNjAxNTYgMTMuMTAxNkwwLjg5ODQzOCAxMi4zOTg0TDYuMjg5MDYgN0wwLjg5ODQzOCAxLjYwMTU2TDEuNjAxNTYgMC44OTg0MzhMNyA2LjI4OTA2TDEyLjM5ODQgMC44OTg0MzhMMTMuMTAxNiAxLjYwMTU2TDcuNzEwOTQgN1oiPjwvcGF0aD48L3N2Zz4=",alt:"download blocked icon"});return Object(jsx_runtime.jsx)(attachments_DownloadBlockedAttachment,Object.assign({},props,{iconData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPHBhdGggZD0iTTQgNEM0IDIuODk1NDMgNC44OTU0MyAyIDYgMkgxMC41ODU4QzEwLjk4MzYgMiAxMS4zNjUxIDIuMTU4MDQgMTEuNjQ2NCAyLjQzOTM0TDE1LjU2MDcgNi4zNTM1NUMxNS44NDIgNi42MzQ4NiAxNiA3LjAxNjM5IDE2IDcuNDE0MjFWMTZDMTYgMTcuMTA0NiAxNS4xMDQ2IDE4IDE0IDE4SDkuNzQyODRDOS45OTY0NyAxNy42OTI5IDEwLjIxNzQgMTcuMzU3OCAxMC40MDAzIDE3SDE0QzE0LjU1MjMgMTcgMTUgMTYuNTUyMyAxNSAxNlY4SDExLjVDMTAuNjcxNiA4IDEwIDcuMzI4NDMgMTAgNi41VjNINkM1LjQ0NzcyIDMgNSAzLjQ0NzcyIDUgNFY5LjAyMjQyQzQuNjU2NTkgOS4wNTMzNyA0LjMyMjI4IDkuMTE1ODggNCA5LjIwNzAzVjRaTTExIDMuMjA3MTFWNi41QzExIDYuNzc2MTQgMTEuMjIzOSA3IDExLjUgN0gxNC43OTI5TDExIDMuMjA3MTFaTTguNjgxOTkgMTcuNjgyQzYuOTI0NjIgMTkuNDM5NCA0LjA3NTM5IDE5LjQzOTQgMi4zMTgwMiAxNy42ODJDMC41NjA2NTkgMTUuOTI0NiAwLjU2MDY1OSAxMy4wNzU0IDIuMzE4MDIgMTEuMzE4QzQuMDc1MzkgOS41NjA2NiA2LjkyNDYyIDkuNTYwNjYgOC42ODE5OSAxMS4zMThDMTAuNDM5NCAxMy4wNzU0IDEwLjQzOTQgMTUuOTI0NiA4LjY4MTk5IDE3LjY4MlpNMy40MDM3NSAxNy4zMDM0QzQuNzc0NjYgMTguMzMxMiA2LjcyODA5IDE4LjIyMTcgNy45NzQ4OCAxNi45NzQ5QzkuMjIxNjcgMTUuNzI4MSA5LjMzMTE2IDEzLjc3NDcgOC4zMDMzNyAxMi40MDM3TDMuNDAzNzUgMTcuMzAzNFpNMi42OTY2NCAxNi41OTYzTDcuNTk2MjYgMTEuNjk2NkM2LjIyNTM1IDEwLjY2ODggNC4yNzE5MiAxMC43NzgzIDMuMDI1MTMgMTIuMDI1MUMxLjc3ODM0IDEzLjI3MTkgMS42Njg4NSAxNS4yMjU0IDIuNjk2NjQgMTYuNTk2M1oiIGZpbGw9IiMyMTIxMjEiIC8+DQo8L3N2Zz4=",extraContent:extraContent}))};MaliciousAttachment_MaliciousAttachment.displayName="MaliciousAttachment";var attachments_MaliciousAttachment=MaliciousAttachment_MaliciousAttachment;try{__function.displayName="MaliciousAttachment",__function.__docgenInfo={description:"",displayName:"MaliciousAttachment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/MaliciousAttachment.tsx#MaliciousAttachment"]={docgenInfo:MaliciousAttachment_MaliciousAttachment.__docgenInfo,name:"MaliciousAttachment",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/MaliciousAttachment.tsx#MaliciousAttachment"})}catch(__react_docgen_typescript_loader_error){}var Spinner_Spinner=function Spinner(props){var spinnerStyle={boxSizing:"border-box",borderRadius:"50%",borderWidth:props.borderWidth||2,borderStyle:"solid",borderColor:"rgb(0,120,212) rgb(199,224,244) rgb(199,224,244)",borderImage:"initial",animationName:"spin",animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(0.53, 0.21, 0.29, 0.67)",width:props.size||20,height:props.size||20};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n                @keyframes spin {\n                    0% {\n                        transform: rotate(0deg);\n                    }\n                    100% {\n                        transform: rotate(360deg);\n                    }\n                }\n            "}),Object(jsx_runtime.jsx)("div",{className:"spinner",style:spinnerStyle})]})},attachments_Spinner=Spinner_Spinner;try{__function.displayName="Spinner",__function.__docgenInfo={description:"",displayName:"Spinner",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/Spinner.tsx#Spinner"]={docgenInfo:Spinner_Spinner.__docgenInfo,name:"Spinner",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/Spinner.tsx#Spinner"})}catch(__react_docgen_typescript_loader_error){}var ScanInProgressAttachment_ScanInProgressAttachment=function ScanInProgressAttachment(props){var extraContent=Object(jsx_runtime.jsx)(attachments_Spinner,{size:16});return Object(jsx_runtime.jsx)(attachments_DownloadBlockedAttachment,Object.assign({},props,{iconData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPHBhdGggZD0iTTYgMkM0Ljg5NTQzIDIgNCAyLjg5NTQzIDQgNFY5LjIwNzAzQzQuMzIyMjggOS4xMTU4OCA0LjY1NjU5IDkuMDUzMzcgNSA5LjAyMjQyVjRDNSAzLjQ0NzcyIDUuNDQ3NzIgMyA2IDNIMTBWNi41QzEwIDcuMzI4NDMgMTAuNjcxNiA4IDExLjUgOEgxNVYxNkMxNSAxNi41NTIzIDE0LjU1MjMgMTcgMTQgMTdIMTAuNDAwM0MxMC4yMTc0IDE3LjM1NzggOS45OTY0NyAxNy42OTI5IDkuNzQyODQgMThIMTRDMTUuMTA0NiAxOCAxNiAxNy4xMDQ2IDE2IDE2VjcuNDE0MjFDMTYgNy4wMTYzOSAxNS44NDIgNi42MzQ4NiAxNS41NjA3IDYuMzUzNTVMMTEuNjQ2NCAyLjQzOTM0QzExLjM2NTEgMi4xNTgwNCAxMC45ODM2IDIgMTAuNTg1OCAySDZaTTE0Ljc5MjkgN0gxMS41QzExLjIyMzkgNyAxMSA2Ljc3NjE0IDExIDYuNVYzLjIwNzExTDE0Ljc5MjkgN1pNMSAxNC41QzEgMTYuOTg1MyAzLjAxNDcyIDE5IDUuNSAxOUM3Ljk4NTI4IDE5IDEwIDE2Ljk4NTMgMTAgMTQuNUMxMCAxMi4wMTQ3IDcuOTg1MjggMTAgNS41IDEwQzMuMDE0NzIgMTAgMSAxMi4wMTQ3IDEgMTQuNVpNNy41IDExLjVDNy43NzYxNCAxMS41IDggMTEuNzIzOSA4IDEyVjEzLjVDOCAxMy43NzYxIDcuNzc2MTQgMTQgNy41IDE0SDZDNS43MjM4NiAxNCA1LjUgMTMuNzc2MSA1LjUgMTMuNUM1LjUgMTMuMjIzOSA1LjcyMzg2IDEzIDYgMTNINi40NjgyMUM2LjQxNzg3IDEyLjk3MjIgNi4zNjYyOCAxMi45NDY0IDYuMzEzNTUgMTIuOTIzQzYuMDY4MjQgMTIuODEzNyA1LjgwMzQ0IDEyLjc1NSA1LjUzNDk1IDEyLjc1MDNDNS4yNjY0NiAxMi43NDU2IDQuOTk5NzcgMTIuNzk1IDQuNzUwNzkgMTIuODk1NkM0LjUwMTggMTIuOTk2MiA0LjI3NTYzIDEzLjE0NTkgNC4wODU3NSAxMy4zMzU4QzMuODkwNDggMTMuNTMxIDMuNTczOSAxMy41MzEgMy4zNzg2NCAxMy4zMzU4QzMuMTgzMzggMTMuMTQwNSAzLjE4MzM4IDEyLjgyMzkgMy4zNzg2NCAxMi42Mjg3QzMuNjYzNDYgMTIuMzQzOSA0LjAwMjczIDEyLjExOTMgNC4zNzYyIDExLjk2ODRDNC43NDk2NyAxMS44MTc1IDUuMTQ5NzEgMTEuNzQzNCA1LjU1MjQ1IDExLjc1MDVDNS45NTUxOCAxMS43NTc1IDYuMzUyMzggMTEuODQ1NiA2LjcyMDM0IDEyLjAwOTRDNi44MTYxNyAxMi4wNTIxIDYuOTA5NTEgMTIuMDk5NyA3IDEyLjE1MTlWMTJDNyAxMS43MjM5IDcuMjIzODYgMTEuNSA3LjUgMTEuNVpNNi42MjM4IDE3LjAzMTZDNi4yNTAzMyAxNy4xODI1IDUuODUwMjkgMTcuMjU2NiA1LjQ0NzU1IDE3LjI0OTVDNS4wNDQ4MiAxNy4yNDI1IDQuNjQ3NjIgMTcuMTU0NCA0LjI3OTY2IDE2Ljk5MDZDNC4xODM4MyAxNi45NDc5IDQuMDkwNDkgMTYuOTAwMyA0IDE2Ljg0ODFWMTdDNCAxNy4yNzYxIDMuNzc2MTQgMTcuNSAzLjUgMTcuNUMzLjIyMzg2IDE3LjUgMyAxNy4yNzYxIDMgMTdWMTUuNUMzIDE1LjIyMzkgMy4yMjM4NiAxNSAzLjUgMTVINUM1LjI3NjE0IDE1IDUuNSAxNS4yMjM5IDUuNSAxNS41QzUuNSAxNS43NzYxIDUuMjc2MTQgMTYgNSAxNkg0LjUzMTc5QzQuNTgyMTMgMTYuMDI3OCA0LjYzMzcyIDE2LjA1MzYgNC42ODY0NSAxNi4wNzdDNC45MzE3NiAxNi4xODYzIDUuMTk2NTYgMTYuMjQ1IDUuNDY1MDUgMTYuMjQ5N0M1LjczMzU0IDE2LjI1NDQgNi4wMDAyMyAxNi4yMDUgNi4yNDkyMSAxNi4xMDQ0QzYuNDk4MiAxNi4wMDM4IDYuNzI0MzcgMTUuODU0MSA2LjkxNDI1IDE1LjY2NDJDNy4xMDk1MSAxNS40NjkgNy40MjYxIDE1LjQ2OSA3LjYyMTM2IDE1LjY2NDJDNy44MTY2MiAxNS44NTk1IDcuODE2NjIgMTYuMTc2MSA3LjYyMTM2IDE2LjM3MTNDNy4zMzY1NCAxNi42NTYxIDYuOTk3MjcgMTYuODgwNyA2LjYyMzggMTcuMDMxNloiIGZpbGw9IiMyMTIxMjEiIC8+DQo8L3N2Zz4=",extraContent:extraContent}))};ScanInProgressAttachment_ScanInProgressAttachment.displayName="ScanInProgressAttachment";var attachments_ScanInProgressAttachment=ScanInProgressAttachment_ScanInProgressAttachment;try{__function.displayName="ScanInProgressAttachment",__function.__docgenInfo={description:"",displayName:"ScanInProgressAttachment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/ScanInProgressAttachment.tsx#ScanInProgressAttachment"]={docgenInfo:ScanInProgressAttachment_ScanInProgressAttachment.__docgenInfo,name:"ScanInProgressAttachment",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachments/ScanInProgressAttachment.tsx#ScanInProgressAttachment"})}catch(__react_docgen_typescript_loader_error){}var defaultAttachmentAdaptiveCardStyles={borderStyle:"solid",borderColor:"rgb(230, 230, 230)",borderWidth:"1px"};function attachmentMiddleware_slicedToArray(arr,i){return function attachmentMiddleware_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function attachmentMiddleware_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function attachmentMiddleware_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return attachmentMiddleware_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return attachmentMiddleware_arrayLikeToArray(o,minLen)}(arr,i)||function attachmentMiddleware_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function attachmentMiddleware_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var patchAttachment=function patchAttachment(card,newAttachment){var activity=card.activity,attachment=card.attachment,patchedAttachment=Object.assign({},attachment);patchedAttachment.contentType=newAttachment.contentType,patchedAttachment.thumbnailUrl=newAttachment.thumbnailUrl;var patchedAttachments=activity.attachments.map((function(target){return target===attachment?patchedAttachment:target})),patchedActivity=Object.assign({},activity);return patchedActivity.attachments=patchedAttachments,{activity:patchedActivity,attachment:patchedAttachment}},attachmentMiddleware_genPreviewCardWithAttachment=function genPreviewCardWithAttachment(card,iconData,next){var patchedTextCard=patchAttachment(card,{contentType:Constants.o.UnknownFileType,thumbnailUrl:void 0});return Object(jsx_runtime.jsx)(attachments_Attachment,{iconData:iconData,imageCard:card,textCard:patchedTextCard,renderer:next})};attachmentMiddleware_genPreviewCardWithAttachment.displayName="genPreviewCardWithAttachment";var attachmentMiddleware_createAttachmentMiddleware=function createAttachmentMiddleware(enableInlinePlaying){return function attachmentMiddleware(){return function(next){return function(){for(var _state$domainStates$r,_state$domainStates$r2,_state$domainStates$r3,_state$domainStates$r4,_card$activity$channe,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(null==card||!card.activity)return next.apply(void 0,args);var attachments=card.activity.attachments,attachment=card.attachment;if(!attachments||!attachments.length||!attachment)return next.apply(void 0,args);var _ref=attachment||{content:"",contentType:""},content=_ref.content,contentType=_ref.contentType,type=(content||{type:""}).type;if(!type&&content&&Constants.e.supportedAdaptiveCardContentTypes.indexOf(contentType)>=0)try{type=(content=JSON.parse(content)).type,card.attachment.content=content}catch(e){cjs.BroadcastService.postMessage({eventName:BroadcastEvent.InvalidAdaptiveCardFormat,payload:{Message:"Unable to parse the adaptive card format",ExceptionDetails:e}})}var state=attachmentMiddleware_slicedToArray(hooks_useChatContextStore(),1)[0],attachmentId=null!==(_state$domainStates$r=null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2||null===(_state$domainStates$r3=_state$domainStates$r2.attachmentProps)||void 0===_state$domainStates$r3?void 0:_state$domainStates$r3.adaptiveCardAttachmentId)&&void 0!==_state$domainStates$r?_state$domainStates$r:defaultAttachmentProps_adaptiveCardAttachmentId,atttachmentAdaptiveCardStyles=Object.assign({},defaultAttachmentAdaptiveCardStyles,null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4?void 0:_state$domainStates$r4.attachmentAdaptiveCardStyles);if(type===Constants.y.adaptiveCard||Constants.e.supportedAdaptiveCardContentTypes.indexOf(contentType)>=0)return Object(jsx_runtime.jsx)("div",{id:attachmentId,style:atttachmentAdaptiveCardStyles,children:next.apply(void 0,args)});if(contentType.startsWith(Constants.e.adaptiveCardContentTypePrefix)&&console.warn(contentType+" adaptive card type is currently not supported."),null!==(_card$activity$channe=card.activity.channelData)&&void 0!==_card$activity$channe&&_card$activity$channe.middlewareData?attachment.contentUrl=card.activity.channelData.middlewareData[attachment.name]:null!=attachment&&attachment.tempContentUrl&&(attachment.contentUrl=attachment.tempContentUrl),!attachment.name)return next.apply(void 0,args);if(card.activity.channelData&&card.activity.channelData.fileScan){var index=attachments.findIndex((function(attachment){return attachment.name===card.attachment.name})),scanResult=card.activity.channelData.fileScan[index];if((null==scanResult?void 0:scanResult.status)===attachments_FileScanStatus.INPROGRESS)return Object(jsx_runtime.jsx)(attachments_ScanInProgressAttachment,{textCard:card});if((null==scanResult?void 0:scanResult.status)===attachments_FileScanStatus.MALWARE){var _state$domainStates$m,_state$domainStates$m2,localizedText=null!==(_state$domainStates$m=null===(_state$domainStates$m2=state.domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_BANNER_FILE_IS_MALICIOUS)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_FILE_IS_MALICIOUS;return NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.AttachmentError,localizedText.replace("{0}",attachment.name)),Object(jsx_runtime.jsx)(attachments_MaliciousAttachment,{textCard:card})}}var fileExtension=attachment.name.substring(attachment.name.lastIndexOf(".")+1,attachment.name.length)||attachment.name,imageExtension=Constants.e.imageRegex.test(attachment.name),audioExtension=Constants.e.audioMediaRegex.test(attachment.name),videoExtension=Constants.e.videoMediaRegex.test(attachment.name),iconData=FileAttachmentIconManager_getFileAttachmentIconData(fileExtension);if(imageExtension)return attachmentMiddleware_genPreviewCardWithAttachment(card,iconData,next);if(audioExtension||videoExtension)return enableInlinePlaying&&card.activity.actionType&&card.activity.actionType===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&FileAttachmentIconManager_isInlineMediaSupported(attachment.name)?attachmentMiddleware_genPreviewCardWithAttachment(card,iconData,next):Object(jsx_runtime.jsx)(attachments_Attachment,{iconData:iconData,textCard:patchAttachment(card,{contentType:Constants.o.UnknownFileType,thumbnailUrl:void 0}),renderer:next});var isUnknownImageObject=contentType.toLowerCase().includes("image")&&!imageExtension;return"txt"===fileExtension||isUnknownImageObject?Object(jsx_runtime.jsx)(attachments_Attachment,{iconData:iconData,textCard:patchAttachment(card,{contentType:Constants.o.UnknownFileType,thumbnailUrl:void 0}),renderer:next}):Object(jsx_runtime.jsx)(attachments_Attachment,{iconData:iconData,textCard:card,renderer:next})}}}};try{attachmentMiddleware_createAttachmentMiddleware.displayName="createAttachmentMiddleware",attachmentMiddleware_createAttachmentMiddleware.__docgenInfo={description:"",displayName:"createAttachmentMiddleware",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachmentMiddleware.tsx#createAttachmentMiddleware"]={docgenInfo:attachmentMiddleware_createAttachmentMiddleware.__docgenInfo,name:"createAttachmentMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/attachmentMiddleware.tsx#createAttachmentMiddleware"})}catch(__react_docgen_typescript_loader_error){}var CardActionType,validateFileExtension=function validateFileExtension(attachment,allowedFileExtensions){if(!allowedFileExtensions)return!0;var fileName=attachment.name.toLowerCase(),index=fileName.lastIndexOf(".");if(!index)return!1;var fileExtension=fileName.substring(index);return(null==allowedFileExtensions?void 0:allowedFileExtensions.toLowerCase().split(",")).indexOf(fileExtension)>-1},validateFileSize=function validateFileSize(attachmentSize,maxUploadFileSize){return 1e6*maxUploadFileSize>parseInt(attachmentSize)},attachmentUploadValidatorMiddleware_getMaxUploadFileSize=function getMaxUploadFileSize(maxFileSizeSupportedByDynamicsStr,contentType){var maxFileSizeSupportedByDynamics=maxFileSizeSupportedByDynamicsStr&&parseInt(maxFileSizeSupportedByDynamicsStr)?parseInt(maxFileSizeSupportedByDynamicsStr):Constants.a.maxSupportedFileSize,amsAttachmentSizeLimit=attachmentUploadValidatorMiddleware_isImage(contentType)?Constants.a.maxSupportedImageSize:Constants.a.maxSupportedFileSize;return maxFileSizeSupportedByDynamics<amsAttachmentSizeLimit?maxFileSizeSupportedByDynamics:amsAttachmentSizeLimit},attachmentUploadValidatorMiddleware_isImage=function isImage(contentType){return Constants.a.supportedImagesMimeTypes.includes(contentType)},textEllipsis=function textEllipsis(str){var maxLength=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return str.length>maxLength?str.slice(0,maxLength-"...".length)+"...":str},attachmentUploadValidatorMiddleware_buildErrorMessage=function buildErrorMessage(fileName,supportedFileExtension,supportedFileSize,fileIsEmpty,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _localizedTexts$MIDDL,errorMessage="";if(!fileName||!maxUploadFileSize)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided is null"}}),null!==(_localizedTexts$MIDDL=localizedTexts.MIDDLEWARE_BANNER_FILE_NULL_ERROR)&&void 0!==_localizedTexts$MIDDL?_localizedTexts$MIDDL:"";if(supportedFileExtension||supportedFileSize)if(supportedFileSize)if(supportedFileExtension)if(fileIsEmpty){var _errorMessage;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided is empty"}}),null!==(_errorMessage=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_IS_EMPTY_ERROR||"")&&void 0!==_errorMessage&&_errorMessage.includes("{2}")&&(errorMessage=errorMessage.replace("{2}",textEllipsis(fileName)))}else{var _localizedTexts$MIDDL2;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"Unexpected error: supportedFileExtension="+supportedFileExtension+" supportedFileSize="+supportedFileSize+" fileIsEmpty="+!fileIsEmpty}}),errorMessage=null!==(_localizedTexts$MIDDL2=localizedTexts.MIDDLEWARE_BANNER_ERROR_MESSAGE)&&void 0!==_localizedTexts$MIDDL2?_localizedTexts$MIDDL2:""}else errorMessage=attachmentUploadValidatorMiddleware_getFileExtensionErrorMessage(fileName,localizedTexts);else errorMessage=attachmentUploadValidatorMiddleware_getFileSizeErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts);else errorMessage=attachmentUploadValidatorMiddleware_getFileSizeAndFileExtensionErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts);return errorMessage},attachmentUploadValidatorMiddleware_getFileSizeAndFileExtensionErrorMessage=function getFileSizeAndFileExtensionErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _errorMessage3,errorMessage,exceptionDetails,index=fileName.lastIndexOf(".");if(index<0)errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_WITHOUT_EXTENSION_ERROR,exceptionDetails="File exceeded the allowed limit of "+maxUploadFileSize+" MB and File provided without file extension";else{var _errorMessage2,fileExtension=fileName.substring(index);null!==(_errorMessage2=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_EXTENSION_ERROR)&&void 0!==_errorMessage2&&_errorMessage2.includes("{1}")&&(errorMessage=errorMessage.replace("{1}",fileExtension)),exceptionDetails="File exceeds the allowed limit of "+maxUploadFileSize+" MB and "+fileExtension+" files are not supported"}return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:exceptionDetails+" Dynamics file size limit="+maxFileSizeSupportedByDynamics+" AMS image size limit="+Constants.a.maxSupportedImageSize+" AMS file size limit="+Constants.a.maxSupportedFileSize}}),null!==(_errorMessage3=errorMessage)&&void 0!==_errorMessage3&&_errorMessage3.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",maxUploadFileSize)),errorMessage?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:""},attachmentUploadValidatorMiddleware_getFileExtensionErrorMessage=function getFileExtensionErrorMessage(fileName,localizedTexts){var errorMessage,index=fileName.lastIndexOf(".");if(index<0)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File provided without file extension"}}),(errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_WITHOUT_EXTENSION)?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:"";var _errorMessage4,_errorMessage5,fileExtension=fileName.substring(index);return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:fileExtension+" files extension is not supported."}}),null!==(_errorMessage4=errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_EXTENSION_ERROR)&&void 0!==_errorMessage4&&_errorMessage4.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",fileExtension)),null!==(_errorMessage5=errorMessage)&&void 0!==_errorMessage5&&_errorMessage5.includes("{1}")&&(errorMessage=errorMessage.replace("{1}",fileExtension)),errorMessage&&errorMessage.length>0?errorMessage:""},attachmentUploadValidatorMiddleware_getFileSizeErrorMessage=function getFileSizeErrorMessage(fileName,maxUploadFileSize,maxFileSizeSupportedByDynamics,localizedTexts){var _errorMessage6;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.AttachmentUploadValidatorMiddlewareFailed,Description:"Attachment validation failed",ExceptionDetails:{ErrorDetails:"File exceeds the allowed limit of "+maxUploadFileSize+"MB. Dynamics file size limit="+maxFileSizeSupportedByDynamics+" AMS image size limit="+Constants.a.maxSupportedImageSize+" AMS file size limit="+Constants.a.maxSupportedFileSize}});var errorMessage=localizedTexts.MIDDLEWARE_BANNER_FILE_SIZE_ERROR;return null!==(_errorMessage6=errorMessage)&&void 0!==_errorMessage6&&_errorMessage6.includes("{0}")&&(errorMessage=errorMessage.replace("{0}",maxUploadFileSize)),errorMessage?errorMessage.includes("{2}")?errorMessage.replace("{2}",textEllipsis(fileName)):errorMessage:""},attachmentUploadValidatorMiddleware=function createAttachmentUploadValidatorMiddleware(allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts){return function(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY){var _payload$activity,_payload$activity$att,_payload$activity2,_payload$activity2$ch,_payload$activity2$ch2,payload=action.payload;if(null!=payload&&payload.activity.attachments&&payload.activity.attachments.length>0&&(null==payload||null===(_payload$activity=payload.activity)||void 0===_payload$activity||null===(_payload$activity$att=_payload$activity.attachments)||void 0===_payload$activity$att?void 0:_payload$activity$att.length)===(null==payload||null===(_payload$activity2=payload.activity)||void 0===_payload$activity2||null===(_payload$activity2$ch=_payload$activity2.channelData)||void 0===_payload$activity2$ch||null===(_payload$activity2$ch2=_payload$activity2$ch.attachmentSizes)||void 0===_payload$activity2$ch2?void 0:_payload$activity2$ch2.length))return next(function validateAttachment(action,allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts){var _action$payload,_action$payload$activ,_action$payload2,_action$payload2$acti,_action$payload2$acti2,_action$payload3,_action$payload3$acti,_action$payload3$acti2,attachments=null==action||null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ?void 0:_action$payload$activ.attachments,attachmentSizes=null==action||null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti||null===(_action$payload2$acti2=_action$payload2$acti.channelData)||void 0===_action$payload2$acti2?void 0:_action$payload2$acti2.attachmentSizes;if(!attachments||0===attachments.length)return action;if(attachments){NotificationHandler_NotificationHandler.dismissNotification(NotificationScenarios.AttachmentError);for(var i=0;i<attachments.length;i++){var maxUploadFileSize=attachmentUploadValidatorMiddleware_getMaxUploadFileSize(maxFileSizeSupportedByDynamics,attachments[i].contentType),fileExtensionValid=validateFileExtension(attachments[i],allowedFileExtensions),fileSizeValid=validateFileSize(attachmentSizes[i],maxUploadFileSize),fileIsEmpty=0==parseInt(attachmentSizes[i]);fileExtensionValid&&fileSizeValid&&!fileIsEmpty||(NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.AttachmentError,attachmentUploadValidatorMiddleware_buildErrorMessage(attachments[i].name,fileExtensionValid,fileSizeValid,fileIsEmpty,maxUploadFileSize.toString(),maxFileSizeSupportedByDynamics,localizedTexts)),attachments.splice(i,1),attachmentSizes.splice(i,1),i--)}}return(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti||null===(_action$payload3$acti2=_action$payload3$acti.attachments)||void 0===_action$payload3$acti2?void 0:_action$payload3$acti2.length)>0?action:{type:"",payload:null}}(action,allowedFileExtensions,maxFileSizeSupportedByDynamics,localizedTexts))}return next(action)}}}},defaultAvatarStyles={width:"32px",height:"32px",borderRadius:"16px",textAlign:"center",backgroundColor:"#315FA2"},defaultAvatarTextStyles={margin:"0",fontFamily:"'Segoe UI', 'Apple Color Emoji', 'Noto Color Emoji', 'Segoe UI Emoji', Arial, sans-serif",fontWeight:600,fontSize:"13px",lineHeight:"18px",color:"white",paddingTop:"7px",WebkitUserSelect:"none",MozUserSelect:"none",userSelect:"none"},avatarMiddleware_createAvatarMiddleware=function createAvatarMiddleware(avatarStyleProps,avatarTextStyleProps){return function(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var params=args[0],_params$activity=params.activity,tags=_params$activity.channelData.tags,name=_params$activity.from.name;if(!1!==params.fromUser||tags&&tags.includes(Constants.e.systemMessageTag))return!1;var avatarStyles=Object.assign({},defaultAvatarStyles,avatarStyleProps),avatarTextStyles=Object.assign({},defaultAvatarTextStyles,avatarTextStyleProps);return function(){return Object(jsx_runtime.jsx)("div",{style:avatarStyles,children:Object(jsx_runtime.jsxs)("p",{style:avatarTextStyles,children:[" ",getIconText(name)," "]})})}}}}},callActionMiddleware=function createCallActionMiddleware(){return function(){return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY){var _action$payload,_activity$suggestedAc,activity=null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.activity;null!=activity&&null!==(_activity$suggestedAc=activity.suggestedActions)&&void 0!==_activity$suggestedAc&&_activity$suggestedAc.actions&&(activity.suggestedActions.actions=activity.suggestedActions.actions.map((function(suggestedAction){if("call"===suggestedAction.type){var telUrl=suggestedAction.value;return Object.assign({},suggestedAction,{type:"openUrl",value:"tel:"+telUrl})}return suggestedAction})))}return next(action)}}}};!function(CardActionType){CardActionType.OpenUrl="openUrl",CardActionType.SignIn="signin"}(CardActionType||(CardActionType={}));var MessageTypes,validCardActionTypes=[CardActionType.OpenUrl,CardActionType.SignIn],cardActionMiddleware_botOauthUrlRegex=/[\S]+.botframework.com\/api\/oauth\/signin\?signin=([\S]+)/,cardActionMiddleware_createCardActionMiddleware=function createCardActionMiddleware(botMagicCodeConfig){return function cardActionMiddleware(){return function(next){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var card=args[0];if(card.cardAction&&validCardActionTypes.indexOf(card.cardAction.type)>=0&&card.cardAction.value&&!0===(null==botMagicCodeConfig?void 0:botMagicCodeConfig.disabled)&&null!=botMagicCodeConfig&&botMagicCodeConfig.fwdUrl){var baseUrl=window.location.origin,result=cardActionMiddleware_botOauthUrlRegex.exec(card.cardAction.value);result&&(BotMagicCodeStore.botOAuthSignInId=""+result[1]),null!=botMagicCodeConfig&&botMagicCodeConfig.fwdUrl.startsWith(baseUrl)&&(card.cardAction.value+="&fwdUrl="+botMagicCodeConfig.fwdUrl)}return next.apply(void 0,args)}}}},citationsMiddleware_createCitationsMiddleware=function createCitationsMiddleware(state,dispatch){return function(){return function(next){return function(action){var _action$payload;if(null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.activity&&citationsMiddleware_isApplicable(action))try{var _action$payload$activ,_action$payload2,_action$payload2$acti,_gptFeedback$summariz,_gptFeedback$summariz2,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),messagePrefix=null!==(_action$payload$activ=null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti?void 0:_action$payload2$acti.messageid)&&void 0!==_action$payload$activ?_action$payload$activ:"",citations=null===(_gptFeedback$summariz=JSON.parse(action.payload.activity.channelData.metadata["pva:gpt-feedback"]).summarizationOpenAIResponse)||void 0===_gptFeedback$summariz||null===(_gptFeedback$summariz2=_gptFeedback$summariz.result)||void 0===_gptFeedback$summariz2?void 0:_gptFeedback$summariz2.textCitations,updatedText=citationsMiddleware_replaceCitations(action.payload.activity.text,citations,messagePrefix);action.payload.activity=Object.assign({},action.payload.activity,{text:updatedText});try{var _inMemoryState$domain,citationMap={};citations&&Array.isArray(citations)&&citations.forEach((function(citation){if(null!=citation&&citation.id){var idWithoutScheme=citation.id.replace(/^cite:/,"");citationMap["cite:"+messagePrefix+"_"+idWithoutScheme]=citation.text||citation.title||""}}));var existingCitations=(null==inMemoryState||null===(_inMemoryState$domain=inMemoryState.domainStates)||void 0===_inMemoryState$domain?void 0:_inMemoryState$domain.citations)||{},updatedCitations=Object.assign({},existingCitations,citationMap);dispatch({type:LiveChatWidgetActionType.SET_CITATIONS,payload:updatedCitations})}catch(innerErr){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.WARN,{Event:TelemetryEvent.CitationMiddlewareFailed,ExceptionDetails:{ErrorData:"Error while populating citation map",Exception:innerErr}})}}catch(error){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CitationMiddlewareFailed,ExceptionDetails:{ErrorData:"Error while converting citation labels",Exception:error}})}return next(action)}}}},citationsMiddleware_isApplicable=function isApplicable(action){var _action$payload3,_action$payload3$acti,_action$payload4,_action$payload4$acti,_action$payload5,_action$payload5$acti,_action$payload5$acti2,_action$payload5$acti3;if("DIRECT_LINE/INCOMING_ACTIVITY"===(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti?void 0:_action$payload3$acti.actionType)&&"ACS_CHANNEL"===(null==action||null===(_action$payload4=action.payload)||void 0===_action$payload4||null===(_action$payload4$acti=_action$payload4.activity)||void 0===_action$payload4$acti?void 0:_action$payload4$acti.channelId)&&(null!=action&&null!==(_action$payload5=action.payload)&&void 0!==_action$payload5&&null!==(_action$payload5$acti=_action$payload5.activity)&&void 0!==_action$payload5$acti&&null!==(_action$payload5$acti2=_action$payload5$acti.channelData)&&void 0!==_action$payload5$acti2&&null!==(_action$payload5$acti3=_action$payload5$acti2.metadata)&&void 0!==_action$payload5$acti3&&_action$payload5$acti3["pva:gpt-feedback"]))return!0;return!1},citationsMiddleware_replaceCitations=function replaceCitations(text,citations,messagePrefix){if(!citations||!Array.isArray(citations))return text;try{var updatedText=text;return updatedText=(updatedText=updatedText.replace(/\[(\d+)\]:\s(cite:\d+)\s"([^\\"]+)"/g,(function(match,number,citeId){var lookupId=citeId,citation=citations.find((function(c){return c.id===lookupId}));if(citation){var idWithoutScheme=citeId.replace(/^cite:/,"");return"["+number+"]: "+(messagePrefix?"cite:"+messagePrefix+"_"+idWithoutScheme:citeId)+' "'+citation.title+'"'}return match}))).replace(/\[(\d+)\](?!:)/g,(function(match,number){return"&#91;"+number+"&#93;"}))}catch(error){return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.CitationMiddlewareFailed,ExceptionDetails:{ErrorData:"Error while finding citations references",Exception:error}}),text}};!function(MessageTypes){MessageTypes.User="UserMessage",MessageTypes.Swift="SwiftCard",MessageTypes.System="SystemMessage",MessageTypes.Welcome="Welcome",MessageTypes.Translate="Translate",MessageTypes.Image="LwcImage",MessageTypes.File="LwcFile",MessageTypes.AdaptiveCard="card",MessageTypes.Thread="Thread"}(MessageTypes||(MessageTypes={}));var conversationEndMiddleware=function createConversationEndMiddleware(conversationEndCallback,startConversationalSurveyCallback,endConversationalSurveyCallback){return function(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload;if((null==action?void 0:action.type)==WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.activity){var _activity$from2,_activity$channelData17,_activity$channelData18,_activity$from,_activity$channelData,_activity$channelData2,_activity$channelData3,_activity$channelData4,_activity$channelData5,_activity$channelData6,_activity$channelData7,_activity$channelData8,_activity$channelData9,_activity$channelData10,_activity$channelData11,_activity$channelData12,_activity$channelData13,_activity$channelData14,_activity$channelData15,_activity$channelData16,activity=action.payload.activity;if("ACS_CHANNEL"===activity.channelId){if((null===(_activity$from=activity.from)||void 0===_activity$from?void 0:_activity$from.role)===DirectLineSenderRole.Bot)null!==(_activity$channelData=activity.channelData)&&void 0!==_activity$channelData&&null!==(_activity$channelData2=_activity$channelData.tags)&&void 0!==_activity$channelData2&&_activity$channelData2.includes(Constants.e.systemMessageTag)&&(null!==(_activity$channelData3=activity.channelData)&&void 0!==_activity$channelData3&&null!==(_activity$channelData4=_activity$channelData3.tags)&&void 0!==_activity$channelData4&&_activity$channelData4.includes(Constants.e.agentEndConversationMessageTag)||null!==(_activity$channelData5=activity.channelData)&&void 0!==_activity$channelData5&&null!==(_activity$channelData6=_activity$channelData5.tags)&&void 0!==_activity$channelData6&&_activity$channelData6.includes(Constants.e.supervisorForceCloseMessageTag))&&conversationEndCallback(),null!==(_activity$channelData7=activity.channelData)&&void 0!==_activity$channelData7&&null!==(_activity$channelData8=_activity$channelData7.tags)&&void 0!==_activity$channelData8&&_activity$channelData8.includes(Constants.e.systemMessageTag)&&(null!==(_activity$channelData9=activity.channelData)&&void 0!==_activity$channelData9&&null!==(_activity$channelData10=_activity$channelData9.tags)&&void 0!==_activity$channelData10&&_activity$channelData10.includes(Constants.e.startConversationalSurveyMessageTag)||null!==(_activity$channelData11=activity.channelData)&&void 0!==_activity$channelData11&&null!==(_activity$channelData12=_activity$channelData11.tags)&&void 0!==_activity$channelData12&&_activity$channelData12.includes(Constants.e.startConversationalSurveyMessageTag))&&startConversationalSurveyCallback(),null!==(_activity$channelData13=activity.channelData)&&void 0!==_activity$channelData13&&null!==(_activity$channelData14=_activity$channelData13.tags)&&void 0!==_activity$channelData14&&_activity$channelData14.includes(Constants.e.systemMessageTag)&&null!==(_activity$channelData15=activity.channelData)&&void 0!==_activity$channelData15&&null!==(_activity$channelData16=_activity$channelData15.tags)&&void 0!==_activity$channelData16&&_activity$channelData16.includes(Constants.e.endConversationalSurveyMessageTag)&&endConversationalSurveyCallback()}else if((null===(_activity$from2=activity.from)||void 0===_activity$from2?void 0:_activity$from2.role)===DirectLineSenderRole.Channel&&(null===(_activity$channelData17=activity.channelData)||void 0===_activity$channelData17?void 0:_activity$channelData17.type)===MessageTypes.Thread&&null!==(_activity$channelData18=activity.channelData)&&void 0!==_activity$channelData18&&_activity$channelData18.properties){var _activity$channelData19,_activity$channelData20,_activity$channelData21,_activity$channelData22;(null===(_activity$channelData19=activity.channelData)||void 0===_activity$channelData19||null===(_activity$channelData20=_activity$channelData19.properties)||void 0===_activity$channelData20?void 0:_activity$channelData20.isdeleted)!==Constants.e.truePascal&&null!==(_activity$channelData21=activity.channelData)&&void 0!==_activity$channelData21&&null!==(_activity$channelData22=_activity$channelData21.properties)&&void 0!==_activity$channelData22&&_activity$channelData22.containsExternalEntitiesListeningAll||conversationEndCallback()}}return next(action)}}}},customEventMiddleware=function createCustomEventMiddleware(broadcastservice){return function(){return function(next){return function(action){var _action$payload;if((null==action?void 0:action.type)==WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.activity){var activity=action.payload.activity;if(function isValidCustomEvent(activity){var _activity$channelData,_activity$channelData2,_activity$channelData3,_activity$channelData4,_activity$channelData5,_activity$channelData6,_activity$channelData7,_activity$from,_activity$channelData8,_activity$channelData9,_activity$channelData10,_activity$channelData11;return!(null==activity||null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData||null===(_activity$channelData2=_activity$channelData.metadata)||void 0===_activity$channelData2||!_activity$channelData2.customEvent||typeof(null==activity||null===(_activity$channelData3=activity.channelData)||void 0===_activity$channelData3||null===(_activity$channelData4=_activity$channelData3.metadata)||void 0===_activity$channelData4?void 0:_activity$channelData4.customEvent)!==Constants.e.String||(null==activity||null===(_activity$channelData5=activity.channelData)||void 0===_activity$channelData5||null===(_activity$channelData6=_activity$channelData5.metadata)||void 0===_activity$channelData6||null===(_activity$channelData7=_activity$channelData6.customEvent)||void 0===_activity$channelData7?void 0:_activity$channelData7.toLowerCase())!==Constants.e.true||(null==activity||null===(_activity$from=activity.from)||void 0===_activity$from?void 0:_activity$from.role)===Constants.e.userMessageTag||typeof(null==activity||null===(_activity$channelData8=activity.channelData)||void 0===_activity$channelData8||null===(_activity$channelData9=_activity$channelData8.metadata)||void 0===_activity$channelData9?void 0:_activity$channelData9.customEventName)!==Constants.e.String||null==activity||null===(_activity$channelData10=activity.channelData)||void 0===_activity$channelData10||null===(_activity$channelData11=_activity$channelData10.metadata)||void 0===_activity$channelData11||!_activity$channelData11.customEventValue)}(activity)){var _activity$messageid,customEvent={eventName:Constants.e.onCustomEvent,payload:{messageId:null!==(_activity$messageid=activity.messageid)&&void 0!==_activity$messageid?_activity$messageid:activity.id,customEventName:activity.channelData.metadata.customEventName,customEventValue:activity.channelData.metadata.customEventValue}};return void broadcastservice.postMessage(customEvent)}}return next(action)}}}},isMaskingFromCustomer_isMaskingforCustomer=function isMaskingforCustomer(maskingInfo){var _maskingInfo$setting,_maskingInfo$setting2;return!(!maskingInfo||0==Object.keys(maskingInfo).length||!maskingInfo.dataMaskingRules||0==Object.keys(maskingInfo.dataMaskingRules).length)&&(!!isNullOrUndefined(null===(_maskingInfo$setting=maskingInfo.setting)||void 0===_maskingInfo$setting?void 0:_maskingInfo$setting.msdyn_maskforcustomer)||"true"===function parseLowerCaseString(property){return String(property).toLowerCase()}(null==maskingInfo||null===(_maskingInfo$setting2=maskingInfo.setting)||void 0===_maskingInfo$setting2?void 0:_maskingInfo$setting2.msdyn_maskforcustomer))},dataMaskingMiddleware=function createDataMaskingMiddleware(dataMaskingInfo){return function(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload;if(isMaskingFromCustomer_isMaskingforCustomer(dataMaskingInfo)&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.text&&action.type===WebChatActionType.WEB_CHAT_SEND_MESSAGE){var regexCollection=null==dataMaskingInfo?void 0:dataMaskingInfo.dataMaskingRules;return next(function applyDataMasking(action,regexCollection){var text=action.payload.text;if(!regexCollection)return TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.InvalidConfiguration,ExceptionDetails:{ErrorDetails:"Invalid data masking rules"}}),action;for(var _i=0,_Object$keys=Object.keys(regexCollection);_i<_Object$keys.length;_i++){var ruleId=_Object$keys[_i],item=regexCollection[ruleId];if(item){var ruleInfiniteException=!1,ruleApplied=!1;try{for(var regex=new RegExp(item,"gi"),match=void 0;match=regex.exec(text);){var replaceStr=match[0].replace(/./gi,"#"),modifiedText=text.replace(match[0],replaceStr);if(modifiedText==text){ruleInfiniteException=!0,console.warn("The data masking rule "+item+" is ignored because it matches empty strings. Please modify this rule.");break}ruleApplied=!0,text=modifiedText}}catch(err){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DataMaskingRuleApplyFailed,ExceptionDetails:{RuleId:ruleId,Exception:err}})}ruleApplied&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.DataMaskingRuleApplied,Description:"Data Masking Rule Id: "+ruleId+" applied."}),ruleInfiniteException&&TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.DataMaskingRuleApplyFailed,ExceptionDetails:{RuleId:ruleId,Exception:"The data masking rule matches empty strings."}})}}return action.payload.text=text,action}(action,regexCollection))}return next(action)}}}},markdown_it_for_inline=__webpack_require__("./node_modules/markdown-it-for-inline/index.js"),markdown_it_for_inline_default=__webpack_require__.n(markdown_it_for_inline),defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT="Opens in a new window; external.",main=__webpack_require__("./node_modules/slack-markdown-it/dist/main.js"),main_default=__webpack_require__.n(main);function createMarkdown_toConsumableArray(arr){return function createMarkdown_arrayWithoutHoles(arr){if(Array.isArray(arr))return createMarkdown_arrayLikeToArray(arr)}(arr)||function createMarkdown_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function createMarkdown_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return createMarkdown_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return createMarkdown_arrayLikeToArray(o,minLen)}(arr)||function createMarkdown_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function createMarkdown_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var createMarkdown_createMarkdown=function createMarkdown(disableMarkdownMessageFormatting,disableNewLineMarkdownSupport,opensMarkdownLinksInSameTab){var markdown;return disableMarkdownMessageFormatting?(markdown=new markdown_it_default.a(Constants.e.Zero,{html:!0,linkify:!0,breaks:!disableNewLineMarkdownSupport})).enable(["entity","linkify","html_block","html_inline","newline","list"]):markdown=function addSlackMarkdownIt(markdown){try{markdown.use(main_default.a)}catch(e){main_default.a.default.apply?markdown.use(main_default.a.default):console.error("Error while adding slackMarkdown plugin",e)}return markdown}(markdown=new markdown_it_default.a(Constants.e.Default,{html:!0,linkify:!0,breaks:!disableNewLineMarkdownSupport})),markdown.disable(["strikethrough"]),markdown.use((function(md){var originalRender=md.render.bind(md),originalRenderInline=md.renderInline.bind(md);function preprocessText(text){var result=text;if(!/\d+\.\s+.*?\n\n(?!\d+\.\s)[\s\S]*?(?:\n\n\d+\.|\s*$)/.test(text))return result;var listPattern=/(\d+\.\s+[^\n]+)(\n\n(?!\d+\.\s)[\s\S]*?)(?=\n\n\d+\.|\s*$)/g;return listPattern.test(result)&&(listPattern.lastIndex=0,result=result.replace(listPattern,(function(match,listItem,content){if(!content)return match;var indentedContent=content.substring(2).split("\n").map((function(line){return line.trim()?""+Constants.e.MARKDOWN_LIST_INDENTATION+line:""})).join("\n");return""+listItem+(disableNewLineMarkdownSupport?"\n":"\n\n")+indentedContent}))),result}md.render=function(text,env){var processedText=preprocessText(text);return originalRender(processedText,env)},md.renderInline=function(text,env){var processedText=preprocessText(text);return originalRenderInline(processedText,env)}})),markdown.use(markdown_it_for_inline_default.a,"url_new_win","link_open",(function(tokens,idx,env){var targetAttrIndex=tokens[idx].attrIndex(Constants.e.Target),targetValue=opensMarkdownLinksInSameTab?Constants.e.TargetTop:Constants.e.Blank;~targetAttrIndex?tokens[idx].attrs[targetAttrIndex][1]=targetValue:tokens[idx].attrPush([Constants.e.Target,targetValue]);var relAttrIndex=tokens[idx].attrIndex(Constants.e.TargetRelationship);if(~relAttrIndex)tokens[idx].attrs[relAttrIndex][1]=Constants.e.TargetRelationshipAttributes;else if(tokens[idx].attrPush([Constants.e.TargetRelationship,Constants.e.TargetRelationshipAttributes]),!disableMarkdownMessageFormatting){tokens[idx].attrPush([Constants.e.Title,defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT]);var iconTokens=markdown.parseInline("!["+defaultMarkdownLocalizedTexts_MARKDOWN_EXTERNAL_LINK_ALT+"](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",env)[0].children;iconTokens&&iconTokens.length>0&&(iconTokens[0].attrJoin("class",Constants.e.OpenLinkIconCssClass),tokens.splice.apply(tokens,[idx+2,0].concat(createMarkdown_toConsumableArray(iconTokens))))}})),markdown},maxMessageSizeValidator=function createMaxMessageSizeValidator(localizedTexts){return function(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.WEB_CHAT_SET_SEND_BOX){var _action$payload,_action$payload$text;if(((null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$text=_action$payload.text)||void 0===_action$payload$text?void 0:_action$payload$text.length)||0)>Constants.y.maxTextLength)return NotificationHandler_NotificationHandler.notifyError(NotificationScenarios.MaxSizeError,localizedTexts.MIDDLEWARE_MAX_CHARACTER_COUNT_EXCEEDED),next(action);NotificationHandler_NotificationHandler.dismissNotification(NotificationScenarios.MaxSizeError)}return next(action)}}}},createMessageSequenceIdOverrideMiddleware=function createMessageSequenceIdOverrideMiddleware(_ref){_ref.dispatch;return function(next){return function(action){return messageSequenceIdOverrideMiddleware_isApplicable(action)?next(messageSequenceIdOverrideMiddleware_overrideSequenceIdWithOriginalMessageId(action)):next(action)}}},messageSequenceIdOverrideMiddleware_isApplicable=function isApplicable(action){return action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&messageSequenceIdOverrideMiddleware_isValidChannel(action)&&messageSequenceIdOverrideMiddleware_isWebSequenceIdPresent(action)&&void 0!==lookupOriginalMessageId(action)},messageSequenceIdOverrideMiddleware_isValidChannel=function isValidChannel(action){var _action$payload,_action$payload$activ;return(null==action||null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ?void 0:_action$payload$activ.channelId)===Constants.e.acsChannel},messageSequenceIdOverrideMiddleware_isWebSequenceIdPresent=function isWebSequenceIdPresent(action){if(!function isChannelDataPresent(action){var _action$payload2,_action$payload2$acti,_action$payload3,_action$payload3$acti;return void 0!==(null==action||null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti?void 0:_action$payload2$acti.channelData)&&null!==(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti?void 0:_action$payload3$acti.channelData)}(action))return!1;var channelData=action.payload.activity.channelData;return Object.keys(channelData).some((function(key){return key===Constants.e.WebchatSequenceIdAttribute}))},messageSequenceIdOverrideMiddleware_overrideSequenceIdWithOriginalMessageId=function overrideSequenceIdWithOriginalMessageId(action){var originalMessageId=extractOriginalMessageId(action),channelData=action.payload.activity.channelData;return void 0===originalMessageId||Object.keys(channelData).forEach((function(key){key===Constants.e.WebchatSequenceIdAttribute&&action.payload.activity.channelData[key]!==originalMessageId&&(action.payload.activity.channelData[key]=originalMessageId)})),action},extractOriginalMessageId=function extractOriginalMessageId(action){var originalMessageId=lookupOriginalMessageId(action);if("string"==typeof originalMessageId&&""!==originalMessageId){var originalMessageIdResult=parseInt(originalMessageId);return isNaN(originalMessageIdResult)?void 0:originalMessageIdResult}},lookupOriginalMessageId=function lookupOriginalMessageId(action){var _action$payload4,_action$payload4$acti,_action$payload4$acti2,_action$payload4$acti3;return null==action||null===(_action$payload4=action.payload)||void 0===_action$payload4||null===(_action$payload4$acti=_action$payload4.activity)||void 0===_action$payload4$acti||null===(_action$payload4$acti2=_action$payload4$acti.channelData)||void 0===_action$payload4$acti2||null===(_action$payload4$acti3=_action$payload4$acti2.metadata)||void 0===_action$payload4$acti3?void 0:_action$payload4$acti3.OriginalMessageId};try{createMessageSequenceIdOverrideMiddleware.displayName="createMessageSequenceIdOverrideMiddleware",createMessageSequenceIdOverrideMiddleware.__docgenInfo={description:"",displayName:"createMessageSequenceIdOverrideMiddleware",props:{dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageSequenceIdOverrideMiddleware.tsx#createMessageSequenceIdOverrideMiddleware"]={docgenInfo:createMessageSequenceIdOverrideMiddleware.__docgenInfo,name:"createMessageSequenceIdOverrideMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageSequenceIdOverrideMiddleware.tsx#createMessageSequenceIdOverrideMiddleware"})}catch(__react_docgen_typescript_loader_error){}var createMessageTimeStampMiddleware=function createMessageTimeStampMiddleware(_ref){_ref.dispatch;return function(next){return function(action){return messageTimestampMiddleware_isApplicable(action)?next(messageTimestampMiddleware_evaluateTagsAndOverrideTimeStamp(action)):next(action)}}},messageTimestampMiddleware_isApplicable=function isApplicable(action){return action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&messageTimestampMiddleware_isPVAConversation(action)&&isPayloadValid(action)&&messageTimestampMiddleware_isValidChannel(action)},isPayloadValid=function isPayloadValid(action){var _action$payload;return null==action||null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.activity},messageTimestampMiddleware_isValidChannel=function isValidChannel(action){var _action$payload2,_action$payload2$acti;return(null==action||null===(_action$payload2=action.payload)||void 0===_action$payload2||null===(_action$payload2$acti=_action$payload2.activity)||void 0===_action$payload2$acti?void 0:_action$payload2$acti.channelId)===Constants.e.acsChannel},messageTimestampMiddleware_isPVAConversation=function isPVAConversation(action){return!messageTimestampMiddleware_isTagIncluded(action,Constants.e.systemMessageTag)&&!messageTimestampMiddleware_isTagIncluded(action,Constants.e.publicMessageTag)&&!messageTimestampMiddleware_isRoleUserOn(action)},messageTimestampMiddleware_isTagIncluded=function isTagIncluded(action,tag){return messageTimestampMiddleware_isDataTagsPresent(action)&&action.payload.activity.channelData.tags.includes(tag)},messageTimestampMiddleware_isRoleUserOn=function isRoleUserOn(action){var _action$payload3,_action$payload3$acti,_action$payload3$acti2;return(null==action||null===(_action$payload3=action.payload)||void 0===_action$payload3||null===(_action$payload3$acti=_action$payload3.activity)||void 0===_action$payload3$acti||null===(_action$payload3$acti2=_action$payload3$acti.from)||void 0===_action$payload3$acti2?void 0:_action$payload3$acti2.role)===Constants.e.userMessageTag},isTimestampValid=function isTimestampValid(timeStamp){return/(\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])(T)(\d{2})(:{1})(\d{2})(:{1})(\d{2})(.\d+)([Z]{1}))/.test(timeStamp)},messageTimestampMiddleware_isDataTagsPresent=function isDataTagsPresent(action){var _action$payload4,_action$payload4$acti,_action$payload4$acti2;return(null==action||null===(_action$payload4=action.payload)||void 0===_action$payload4||null===(_action$payload4$acti=_action$payload4.activity)||void 0===_action$payload4$acti||null===(_action$payload4$acti2=_action$payload4$acti.channelData)||void 0===_action$payload4$acti2?void 0:_action$payload4$acti2.tags)&&action.payload.activity.channelData.tags.length>0},messageTimestampMiddleware_evaluateTagsAndOverrideTimeStamp=function evaluateTagsAndOverrideTimeStamp(action){var tagValue=tagLookup(action,Constants.e.prefixTimestampTag);if(tagValue){var newTimestamp=messageTimestampMiddleware_extractTimeStamp(tagValue);action.payload.activity.timestamp=function overrideTimeStamp(timestampOriginal,timeStampNew){return isTimestampValid(timeStampNew)?timeStampNew:timestampOriginal}(action.payload.activity.timestamp,newTimestamp)}return action},messageTimestampMiddleware_extractTimeStamp=function extractTimeStamp(timeStamp){if(timeStamp&&timeStamp.length>0){var ts=timeStamp.split(Constants.e.prefixTimestampTag);if(ts&&ts.length>1)return ts[1]}return timeStamp},tagLookup=function tagLookup(action,tag){if(!messageTimestampMiddleware_isDataTagsPresent(action))return null;var value,tags=action.payload.activity.channelData.tags;if(tags&&tags.length>0)for(var i=0;i<tags.length;i++)if((value=tags[i])&&value.indexOf(tag)>-1)return value;return null};try{createMessageTimeStampMiddleware.displayName="createMessageTimeStampMiddleware",createMessageTimeStampMiddleware.__docgenInfo={description:"",displayName:"createMessageTimeStampMiddleware",props:{dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageTimestampMiddleware.tsx#createMessageTimeStampMiddleware"]={docgenInfo:createMessageTimeStampMiddleware.__docgenInfo,name:"createMessageTimeStampMiddleware",path:"src/components/webchatcontainerstateful/webchatcontroller/middlewares/renderingmiddlewares/messageTimestampMiddleware.tsx#createMessageTimeStampMiddleware"})}catch(__react_docgen_typescript_loader_error){}function queueOverflowHandlerMiddleware_regeneratorRuntime(){queueOverflowHandlerMiddleware_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function queueOverflowHandlerMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var NotificationPaneStateful_uiTimer,queueOverflowHandlingHelper=function(){var _ref=function queueOverflowHandlerMiddleware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){queueOverflowHandlerMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){queueOverflowHandlerMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(queueOverflowHandlerMiddleware_regeneratorRuntime().mark((function _callee(state,dispatch){var _executeReducer;return queueOverflowHandlerMiddleware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_executeReducer=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:void 0}),_executeReducer.appStates.chatDisconnectEventReceived||(dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!0}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.QueueOverflowEvent,Description:"Set chat disconnect event received."}));case 2:case"end":return _context.stop()}}),_callee)})));return function queueOverflowHandlingHelper(_x,_x2){return _ref.apply(this,arguments)}}(),queueOverflowHandlerMiddleware_createQueueOverflowMiddleware=function createQueueOverflowMiddleware(state,dispatch){return function(){return function(next){return function(action){var _action$payload;(null==action?void 0:action.type)==WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&null!==(_action$payload=action.payload)&&void 0!==_action$payload&&_action$payload.activity&&(function isEndConversationDueToOverflowActivity(activity){var _activity$channelData,_activity$channelData2;return(null==activity||null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData?void 0:_activity$channelData.tags)&&Array.isArray(null==activity||null===(_activity$channelData2=activity.channelData)||void 0===_activity$channelData2?void 0:_activity$channelData2.tags)&&activity.channelData.tags.includes(Constants.e.EndConversationDueToOverflow)}(action.payload.activity)&&(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.QueueOverflowEvent,Description:"Queue overflow event received."}),queueOverflowHandlingHelper(state,dispatch)));return next(action)}}}},defaultChatDisconnectControlProps={hideTitle:!1,titleText:Constants.p.ChatDisconnectTitleText,hideSubtitle:!1,subtitleText:Constants.p.ChatDisconnectSubtitleText,hideIcon:!1,notificationIconProps:{id:Constants.p.IconId,src:"data:image/svg+xml;base64,PHN2ZyBhcmlhLWxhYmVsPSJXYXJuaW5nIiBoZWlnaHQ9IjE5IiB2aWV3Qm94PSIwIDAgMTkgMTkiIHdpZHRoPSIxOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4zNzUgMEMxMC4yNDA5IDAgMTEuMDcxIDAuMTEwNjc3IDExLjg2NTIgMC4zMzIwMzFDMTIuNjY2IDAuNTUzMzg1IDEzLjQxNDcgMC44NjkxNDEgMTQuMTExMyAxLjI3OTNDMTQuODA3OSAxLjY4Mjk0IDE1LjQzOTUgMi4xNzEyMiAxNi4wMDU5IDIuNzQ0MTRDMTYuNTc4OCAzLjMxMDU1IDE3LjA2NzEgMy45NDIwNiAxNy40NzA3IDQuNjM4NjdDMTcuODgwOSA1LjMzNTI5IDE4LjE5NjYgNi4wODM5OCAxOC40MTggNi44ODQ3N0MxOC42MzkzIDcuNjc5MDQgMTguNzUgOC41MDkxMSAxOC43NSA5LjM3NUMxOC43NSAxMC4yNDA5IDE4LjYzOTMgMTEuMDc0MiAxOC40MTggMTEuODc1QzE4LjE5NjYgMTIuNjY5MyAxNy44ODA5IDEzLjQxNDcgMTcuNDcwNyAxNC4xMTEzQzE3LjA2NzEgMTQuODA3OSAxNi41Nzg4IDE1LjQ0MjcgMTYuMDA1OSAxNi4wMTU2QzE1LjQzOTUgMTYuNTgyIDE0LjgwNzkgMTcuMDcwMyAxNC4xMTEzIDE3LjQ4MDVDMTMuNDE0NyAxNy44ODQxIDEyLjY2NiAxOC4xOTY2IDExLjg2NTIgMTguNDE4QzExLjA3MSAxOC42MzkzIDEwLjI0MDkgMTguNzUgOS4zNzUgMTguNzVDOC41MDkxMSAxOC43NSA3LjY3NTc4IDE4LjYzOTMgNi44NzUgMTguNDE4QzYuMDgwNzMgMTguMTk2NiA1LjMzNTI5IDE3Ljg4NDEgNC42Mzg2NyAxNy40ODA1QzMuOTQyMDYgMTcuMDcwMyAzLjMwNzI5IDE2LjU4MiAyLjczNDM4IDE2LjAxNTZDMi4xNjc5NyAxNS40NDI3IDEuNjc5NjkgMTQuODA3OSAxLjI2OTUzIDE0LjExMTNDMC44NjU4ODUgMTMuNDE0NyAwLjU1MzM4NSAxMi42NjkzIDAuMzMyMDMxIDExLjg3NUMwLjExMDY3NyAxMS4wNzQyIDAgMTAuMjQwOSAwIDkuMzc1QzAgOC41MDkxMSAwLjExMDY3NyA3LjY3OTA0IDAuMzMyMDMxIDYuODg0NzdDMC41NTMzODUgNi4wODM5OCAwLjg2NTg4NSA1LjMzNTI5IDEuMjY5NTMgNC42Mzg2N0MxLjY3OTY5IDMuOTQyMDYgMi4xNjc5NyAzLjMxMDU1IDIuNzM0MzggMi43NDQxNEMzLjMwNzI5IDIuMTcxMjIgMy45NDIwNiAxLjY4Mjk0IDQuNjM4NjcgMS4yNzkzQzUuMzM1MjkgMC44NjkxNDEgNi4wODA3MyAwLjU1MzM4NSA2Ljg3NSAwLjMzMjAzMUM3LjY3NTc4IDAuMTEwNjc3IDguNTA5MTEgMCA5LjM3NSAwWk05LjM3NSAxNy41QzEwLjExNzIgMTcuNSAxMC44MzMzIDE3LjQwMjMgMTEuNTIzNCAxNy4yMDdDMTIuMjIwMSAxNy4wMTE3IDEyLjg2NzggMTYuNzM4MyAxMy40NjY4IDE2LjM4NjdDMTQuMDcyMyAxNi4wMzUyIDE0LjYyMjQgMTUuNjEyIDE1LjExNzIgMTUuMTE3MkMxNS42MTIgMTQuNjIyNCAxNi4wMzUyIDE0LjA3NTUgMTYuMzg2NyAxMy40NzY2QzE2LjczODMgMTIuODcxMSAxNy4wMTE3IDEyLjIyMzMgMTcuMjA3IDExLjUzMzJDMTcuNDAyMyAxMC44NDMxIDE3LjUgMTAuMTIzNyAxNy41IDkuMzc1QzE3LjUgOC42MzI4MSAxNy40MDIzIDcuOTE2NjcgMTcuMjA3IDcuMjI2NTZDMTcuMDExNyA2LjUyOTk1IDE2LjczODMgNS44ODIxNiAxNi4zODY3IDUuMjgzMkMxNi4wMzUyIDQuNjc3NzMgMTUuNjEyIDQuMTI3NiAxNS4xMTcyIDMuNjMyODFDMTQuNjIyNCAzLjEzODAyIDE0LjA3MjMgMi43MTQ4NCAxMy40NjY4IDIuMzYzMjhDMTIuODY3OCAyLjAxMTcyIDEyLjIyMDEgMS43MzgyOCAxMS41MjM0IDEuNTQyOTdDMTAuODMzMyAxLjM0NzY2IDEwLjExNzIgMS4yNSA5LjM3NSAxLjI1QzguNjI2MyAxLjI1IDcuOTA2OSAxLjM0NzY2IDcuMjE2OCAxLjU0Mjk3QzYuNTI2NjkgMS43MzgyOCA1Ljg3ODkxIDIuMDExNzIgNS4yNzM0NCAyLjM2MzI4QzQuNjc0NDggMi43MTQ4NCA0LjEyNzYgMy4xMzgwMiAzLjYzMjgxIDMuNjMyODFDMy4xMzgwMiA0LjEyNzYgMi43MTQ4NCA0LjY3NzczIDIuMzYzMjggNS4yODMyQzIuMDExNzIgNS44ODIxNiAxLjczODI4IDYuNTI5OTUgMS41NDI5NyA3LjIyNjU2QzEuMzQ3NjYgNy45MTY2NyAxLjI1IDguNjMyODEgMS4yNSA5LjM3NUMxLjI1IDEwLjExNzIgMS4zNDc2NiAxMC44MzY2IDEuNTQyOTcgMTEuNTMzMkMxLjczODI4IDEyLjIyMzMgMi4wMTE3MiAxMi44NzExIDIuMzYzMjggMTMuNDc2NkMyLjcxNDg0IDE0LjA3NTUgMy4xMzgwMiAxNC42MjI0IDMuNjMyODEgMTUuMTE3MkM0LjEyNzYgMTUuNjEyIDQuNjc0NDggMTYuMDM1MiA1LjI3MzQ0IDE2LjM4NjdDNS44Nzg5MSAxNi43MzgzIDYuNTI2NjkgMTcuMDExNyA3LjIxNjggMTcuMjA3QzcuOTA2OSAxNy40MDIzIDguNjI2MyAxNy41IDkuMzc1IDE3LjVaTTguNzUgNUgxMFYxMS4yNUg4Ljc1VjVaTTguNzUgMTIuNUgxMFYxMy43NUg4Ljc1VjEyLjVaIj48L3BhdGg+PC9zdmc+",alt:Constants.p.IconText},hideHyperlink:!0,hyperlinkText:"Learn more",hyperlinkAriaLabel:"Learn more",hyperlinkHref:"https://www.microsoft.com",hideDismissButton:!1,dismissButtonProps:{id:Constants.p.DismissId,text:Constants.p.DismissText,type:"icon",iconName:Constants.p.ChromeCloseIconName,ariaLabel:Constants.p.DismissAriaLabel},hideCloseChatButton:!1,closeChatButtonProps:{id:Constants.p.CloseChatId,text:Constants.p.CloseChatText,type:"text",iconName:Constants.p.ChromeCloseIconName,ariaLabel:Constants.p.CloseChatAriaLabel}},defaultChatDisconnectStyleProps_generalStyleProps={backgroundColor:"#FFF4CE",display:"flex"},defaultChatDisconnectStyleProps_notificationIconStyleProps={display:"flex",height:"19px",width:"19px"},defaultChatDisconnectStyleProps_notificationIconContainerStyleProps={display:"flex",width:"36px",height:"32px",flexShrink:"0",justifyContent:"center",alignItems:"center"},defaultChatDisconnectStyleProps_titleStyleProps={fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"87.5%",minHeight:"32px",fontWeight:"bold"},defaultChatDisconnectStyleProps_subtitleStyleProps={fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"87.5%",fontWeight:"normal"},defaultChatDisconnectStyleProps_hyperlinkStyleProps={fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"87.5%",textDecoration:"none",color:"#0078d4",fontWeight:"normal"},defaultChatDisconnectStyleProps_hyperlinkHoverStyleProps={textDecoration:"none",color:"#005a9e"},defaultChatDisconnectStyleProps_dismissButtonStyleProps={width:"22px",height:"22px",borderRadius:"3px",border:"0",margin:"4px",backgroundColor:"transparent",color:"black",icon:{fontSize:"14px"}},defaultChatDisconnectStyleProps_dismissButtonHoverStyleProps={filter:"brightness(0.8)",icon:{color:"black"}},defaultChatDisconnectStyleProps_closeChatButtonStyleProps={backgroundColor:"white",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"87.5%",fontWeight:"500",height:"32px",width:"80px",padding:"0px"},defaultChatDisconnectStyleProps_closeChatButtonHoverStyleProps={filter:"brightness(0.8)"},defaultChatDisconnectStyleProps_infoGroupStyleProps={display:"flex",justifyContent:"space-between",flex:"1 1 0%",marginTop:"2px"},defaultChatDisconnectStyleProps_buttonGroupStyleProps={display:"flex",justifyContent:"flex-end",margin:"8px"},defaultChatDisconnectStyleProps_classNames={containerClassName:"chat-disconnect-container",titleClassName:"chat-disconnect-title",subtitleClassName:"chat-disconnect-subtitle",dismissButtonClassName:"chat-disconnect-dismiss-button",hyperlinkClassName:"chat-disconnect-hyperlink",notificationIconClassName:"chat-disconnect-notification-icon",closeChatButtonClassName:"chat-disconnect-close-chat-button"};function NotificationPaneStateful_regeneratorRuntime(){NotificationPaneStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function NotificationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function NotificationPaneStateful_slicedToArray(arr,i){return function NotificationPaneStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function NotificationPaneStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function NotificationPaneStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return NotificationPaneStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NotificationPaneStateful_arrayLikeToArray(o,minLen)}(arr,i)||function NotificationPaneStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NotificationPaneStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var NotificationPaneStateful_NotificationPaneStateful=function NotificationPaneStateful(props){var _state$domainStates,_state$domainStates3;Object(react.useEffect)((function(){NotificationPaneStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXNotificationPaneStart})}),[]);var notificationPaneProps=props.notificationPaneProps,notificationScenarioType=props.notificationScenarioType,endChat=props.endChat,_useChatContextStore2=NotificationPaneStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],adapter=NotificationPaneStateful_slicedToArray(hooks_useChatAdapterStore(),1)[0],localConfirmationPaneState=Object(react.useRef)(null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.confirmationState),onCloseChatClick=function(){var _ref=function NotificationPaneStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){NotificationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){NotificationPaneStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(NotificationPaneStateful_regeneratorRuntime().mark((function _callee(){return NotificationPaneStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.NotificationCloseChatButtonClicked,Description:"Notification Close Chat button clicked."}),localConfirmationPaneState.current===Constants.d.Ok){_context.next=5;break}dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!0}),_context.next=10;break;case 5:return!0,!1,!0,_context.next=10,endChat(adapter,true,false,true);case 10:case"end":return _context.stop()}}),_callee)})));return function onCloseChatClick(){return _ref.apply(this,arguments)}}();Object(react.useEffect)((function(){var _state$domainStates2;localConfirmationPaneState.current=null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.confirmationState}),[null==state||null===(_state$domainStates3=state.domainStates)||void 0===_state$domainStates3?void 0:_state$domainStates3.confirmationState]);var dismissNotification=(0,botframework_webchat.hooks.useDismissNotification)(),handleDismissNotification=Object(react.useCallback)((function(){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.NotificationDismissButtonClicked,Description:notificationScenarioType+" Notification Dismiss button clicked."}),dismissNotification(null!=notificationScenarioType?notificationScenarioType:"")}),[notificationScenarioType]),genericPropsObj={};if(notificationScenarioType===NotificationScenarios.ChatDisconnect)!function populateInternalProps(notificationProps){var _notificationProps$id,_notificationProps$st29,_notificationProps$st30,_notificationProps$st31,_notificationProps$st32,_defaultChatDisconnec7,_notificationProps$st33,_notificationProps$st34;notificationProps||(notificationProps={}),genericPropsObj=Object.assign({id:null!==(_notificationProps$id=notificationProps.id)&&void 0!==_notificationProps$id?_notificationProps$id:Constants.p.DefaultNotificationPaneId,dir:notificationProps.dir,generalStyleProps:Object.assign({},defaultChatDisconnectStyleProps_generalStyleProps,null===(_notificationProps$st29=notificationProps.styleProps)||void 0===_notificationProps$st29?void 0:_notificationProps$st29.generalStyleProps),containerClassName:null!==(_notificationProps$st30=null===(_notificationProps$st31=notificationProps.styleProps)||void 0===_notificationProps$st31||null===(_notificationProps$st32=_notificationProps$st31.classNames)||void 0===_notificationProps$st32?void 0:_notificationProps$st32.containerClassName)&&void 0!==_notificationProps$st30?_notificationProps$st30:null===(_defaultChatDisconnec7=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec7?void 0:_defaultChatDisconnec7.containerClassName,componentOverrides:notificationProps.componentOverrides,infoGroupStyleProps:Object.assign({},defaultChatDisconnectStyleProps_infoGroupStyleProps,null===(_notificationProps$st33=notificationProps.styleProps)||void 0===_notificationProps$st33?void 0:_notificationProps$st33.infoGroupStyleProps),buttonGroupStyleProps:Object.assign({},defaultChatDisconnectStyleProps_buttonGroupStyleProps,null===(_notificationProps$st34=notificationProps.styleProps)||void 0===_notificationProps$st34?void 0:_notificationProps$st34.buttonGroupStyleProps)},function populateTitleInternalProps(notificationProps){var _notificationProps$co,_notificationProps$co2,_notificationProps$co3,_notificationProps$co4,_notificationProps$st,_notificationProps$st2,_notificationProps$st3,_notificationProps$st4,_defaultChatDisconnec;return{hideTitle:null!==(_notificationProps$co=null===(_notificationProps$co2=notificationProps.controlProps)||void 0===_notificationProps$co2?void 0:_notificationProps$co2.hideTitle)&&void 0!==_notificationProps$co?_notificationProps$co:defaultChatDisconnectControlProps.hideTitle,titleText:null!==(_notificationProps$co3=null===(_notificationProps$co4=notificationProps.controlProps)||void 0===_notificationProps$co4?void 0:_notificationProps$co4.titleText)&&void 0!==_notificationProps$co3?_notificationProps$co3:defaultChatDisconnectControlProps.titleText,titleStyleProps:Object.assign({},defaultChatDisconnectStyleProps_titleStyleProps,null===(_notificationProps$st=notificationProps.styleProps)||void 0===_notificationProps$st?void 0:_notificationProps$st.titleStyleProps),titleClassName:null!==(_notificationProps$st2=null===(_notificationProps$st3=notificationProps.styleProps)||void 0===_notificationProps$st3||null===(_notificationProps$st4=_notificationProps$st3.classNames)||void 0===_notificationProps$st4?void 0:_notificationProps$st4.titleClassName)&&void 0!==_notificationProps$st2?_notificationProps$st2:null===(_defaultChatDisconnec=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec?void 0:_defaultChatDisconnec.titleClassName}}(notificationProps),function populateSubtitleInternalProps(notificationProps){var _notificationProps$co5,_notificationProps$co6,_notificationProps$co7,_notificationProps$co8,_notificationProps$st5,_notificationProps$st6,_notificationProps$st7,_notificationProps$st8,_defaultChatDisconnec2;return{hideSubtitle:null!==(_notificationProps$co5=null===(_notificationProps$co6=notificationProps.controlProps)||void 0===_notificationProps$co6?void 0:_notificationProps$co6.hideSubtitle)&&void 0!==_notificationProps$co5?_notificationProps$co5:defaultChatDisconnectControlProps.hideSubtitle,subtitleText:null!==(_notificationProps$co7=null===(_notificationProps$co8=notificationProps.controlProps)||void 0===_notificationProps$co8?void 0:_notificationProps$co8.subtitleText)&&void 0!==_notificationProps$co7?_notificationProps$co7:defaultChatDisconnectControlProps.subtitleText,subtitleStyleProps:Object.assign({},defaultChatDisconnectStyleProps_subtitleStyleProps,null===(_notificationProps$st5=notificationProps.styleProps)||void 0===_notificationProps$st5?void 0:_notificationProps$st5.subtitleStyleProps),subtitleClassName:null!==(_notificationProps$st6=null===(_notificationProps$st7=notificationProps.styleProps)||void 0===_notificationProps$st7||null===(_notificationProps$st8=_notificationProps$st7.classNames)||void 0===_notificationProps$st8?void 0:_notificationProps$st8.subtitleClassName)&&void 0!==_notificationProps$st6?_notificationProps$st6:null===(_defaultChatDisconnec2=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec2?void 0:_defaultChatDisconnec2.subtitleClassName}}(notificationProps),function populateHyperlinkInternalProps(notificationProps){var _notificationProps$co9,_notificationProps$co10,_notificationProps$co11,_notificationProps$co12,_notificationProps$co13,_notificationProps$co14,_notificationProps$co15,_notificationProps$co16,_notificationProps$st9,_notificationProps$st10,_notificationProps$st11,_notificationProps$st12,_notificationProps$st13,_defaultChatDisconnec3;return{hideHyperlink:null!==(_notificationProps$co9=null===(_notificationProps$co10=notificationProps.controlProps)||void 0===_notificationProps$co10?void 0:_notificationProps$co10.hideHyperlink)&&void 0!==_notificationProps$co9?_notificationProps$co9:defaultChatDisconnectControlProps.hideHyperlink,hyperlinkText:null!==(_notificationProps$co11=null===(_notificationProps$co12=notificationProps.controlProps)||void 0===_notificationProps$co12?void 0:_notificationProps$co12.hyperlinkText)&&void 0!==_notificationProps$co11?_notificationProps$co11:defaultChatDisconnectControlProps.hyperlinkText,hyperlinkAriaLabel:null!==(_notificationProps$co13=null===(_notificationProps$co14=notificationProps.controlProps)||void 0===_notificationProps$co14?void 0:_notificationProps$co14.hyperlinkAriaLabel)&&void 0!==_notificationProps$co13?_notificationProps$co13:defaultChatDisconnectControlProps.hyperlinkAriaLabel,hyperlinkHref:null!==(_notificationProps$co15=null===(_notificationProps$co16=notificationProps.controlProps)||void 0===_notificationProps$co16?void 0:_notificationProps$co16.hyperlinkHref)&&void 0!==_notificationProps$co15?_notificationProps$co15:defaultChatDisconnectControlProps.hyperlinkHref,hyperlinkStyleProps:Object.assign({},defaultChatDisconnectStyleProps_hyperlinkStyleProps,null===(_notificationProps$st9=notificationProps.styleProps)||void 0===_notificationProps$st9?void 0:_notificationProps$st9.hyperlinkStyleProps),hyperlinkHoverStyleProps:Object.assign({},defaultChatDisconnectStyleProps_hyperlinkHoverStyleProps,null===(_notificationProps$st10=notificationProps.styleProps)||void 0===_notificationProps$st10?void 0:_notificationProps$st10.hyperlinkHoverStyleProps),hyperlinkClassName:null!==(_notificationProps$st11=null===(_notificationProps$st12=notificationProps.styleProps)||void 0===_notificationProps$st12||null===(_notificationProps$st13=_notificationProps$st12.classNames)||void 0===_notificationProps$st13?void 0:_notificationProps$st13.hyperlinkClassName)&&void 0!==_notificationProps$st11?_notificationProps$st11:null===(_defaultChatDisconnec3=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec3?void 0:_defaultChatDisconnec3.hyperlinkClassName}}(notificationProps),function populateNotificationIconInternalProps(notificationProps){var _notificationProps$co17,_notificationProps$co18,_notificationProps$co19,_notificationProps$st14,_notificationProps$st15,_notificationProps$st16,_notificationProps$st17,_defaultChatDisconnec4,_notificationProps$st18;return{hideNotificationIcon:null!==(_notificationProps$co17=null===(_notificationProps$co18=notificationProps.controlProps)||void 0===_notificationProps$co18?void 0:_notificationProps$co18.hideIcon)&&void 0!==_notificationProps$co17?_notificationProps$co17:defaultChatDisconnectControlProps.hideIcon,notificationIconProps:Object.assign({},defaultChatDisconnectControlProps.notificationIconProps,null===(_notificationProps$co19=notificationProps.controlProps)||void 0===_notificationProps$co19?void 0:_notificationProps$co19.notificationIconProps),notificationIconStyleProps:Object.assign({},defaultChatDisconnectStyleProps_notificationIconStyleProps,null===(_notificationProps$st14=notificationProps.styleProps)||void 0===_notificationProps$st14?void 0:_notificationProps$st14.notificationIconStyleProps),notificationIconClassName:null!==(_notificationProps$st15=null===(_notificationProps$st16=notificationProps.styleProps)||void 0===_notificationProps$st16||null===(_notificationProps$st17=_notificationProps$st16.classNames)||void 0===_notificationProps$st17?void 0:_notificationProps$st17.notificationIconClassName)&&void 0!==_notificationProps$st15?_notificationProps$st15:null===(_defaultChatDisconnec4=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec4?void 0:_defaultChatDisconnec4.notificationIconClassName,notificationIconContainerStyleProps:Object.assign({},defaultChatDisconnectStyleProps_notificationIconContainerStyleProps,null===(_notificationProps$st18=notificationProps.styleProps)||void 0===_notificationProps$st18?void 0:_notificationProps$st18.notificationIconContainerStyleProps)}}(notificationProps),function populateDismissButtonInternalProps(notificationProps){var _notificationProps$co20,_notificationProps$co21,_notificationProps$co22,_notificationProps$st19,_notificationProps$st20,_notificationProps$st21,_notificationProps$st22,_notificationProps$st23,_defaultChatDisconnec5;return{hideDismissButton:null!==(_notificationProps$co20=null===(_notificationProps$co21=notificationProps.controlProps)||void 0===_notificationProps$co21?void 0:_notificationProps$co21.hideDismissButton)&&void 0!==_notificationProps$co20?_notificationProps$co20:defaultChatDisconnectControlProps.hideDismissButton,dismissButtonProps:Object.assign({onClick:handleDismissNotification},defaultChatDisconnectControlProps.dismissButtonProps,null===(_notificationProps$co22=notificationProps.controlProps)||void 0===_notificationProps$co22?void 0:_notificationProps$co22.dismissButtonProps),dismissButtonStyleProps:Object.assign({},defaultChatDisconnectStyleProps_dismissButtonStyleProps,null===(_notificationProps$st19=notificationProps.styleProps)||void 0===_notificationProps$st19?void 0:_notificationProps$st19.dismissButtonStyleProps),dismissButtonHoverStyleProps:Object.assign({},defaultChatDisconnectStyleProps_dismissButtonHoverStyleProps,null===(_notificationProps$st20=notificationProps.styleProps)||void 0===_notificationProps$st20?void 0:_notificationProps$st20.dismissButtonHoverStyleProps),dismissButtonClassName:null!==(_notificationProps$st21=null===(_notificationProps$st22=notificationProps.styleProps)||void 0===_notificationProps$st22||null===(_notificationProps$st23=_notificationProps$st22.classNames)||void 0===_notificationProps$st23?void 0:_notificationProps$st23.dismissButtonClassName)&&void 0!==_notificationProps$st21?_notificationProps$st21:null===(_defaultChatDisconnec5=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec5?void 0:_defaultChatDisconnec5.dismissButtonClassName}}(notificationProps),function populateCloseChatButtonInternalProps(notificationProps){var _notificationProps$co23,_notificationProps$co24,_notificationProps$co25,_notificationProps$st24,_notificationProps$st25,_notificationProps$st26,_notificationProps$st27,_notificationProps$st28,_defaultChatDisconnec6;return{hideCloseChatButton:null!==(_notificationProps$co23=null===(_notificationProps$co24=notificationProps.controlProps)||void 0===_notificationProps$co24?void 0:_notificationProps$co24.hideCloseChatButton)&&void 0!==_notificationProps$co23?_notificationProps$co23:defaultChatDisconnectControlProps.hideCloseChatButton,closeChatButtonProps:Object.assign({onClick:onCloseChatClick},defaultChatDisconnectControlProps.closeChatButtonProps,null===(_notificationProps$co25=notificationProps.controlProps)||void 0===_notificationProps$co25?void 0:_notificationProps$co25.closeChatButtonProps),closeChatButtonStyleProps:Object.assign({},defaultChatDisconnectStyleProps_closeChatButtonStyleProps,null===(_notificationProps$st24=notificationProps.styleProps)||void 0===_notificationProps$st24?void 0:_notificationProps$st24.closeChatButtonStyleProps),closeChatButtonHoverStyleProps:Object.assign({},defaultChatDisconnectStyleProps_closeChatButtonHoverStyleProps,null===(_notificationProps$st25=notificationProps.styleProps)||void 0===_notificationProps$st25?void 0:_notificationProps$st25.closeChatButtonHoverStyleProps),closeChatButtonClassName:null!==(_notificationProps$st26=null===(_notificationProps$st27=notificationProps.styleProps)||void 0===_notificationProps$st27||null===(_notificationProps$st28=_notificationProps$st27.classNames)||void 0===_notificationProps$st28?void 0:_notificationProps$st28.closeChatButtonClassName)&&void 0!==_notificationProps$st26?_notificationProps$st26:null===(_defaultChatDisconnec6=defaultChatDisconnectStyleProps_classNames)||void 0===_defaultChatDisconnec6?void 0:_defaultChatDisconnec6.closeChatButtonClassName}}(notificationProps))}(null==notificationPaneProps?void 0:notificationPaneProps.chatDisconnectNotificationProps);return Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.UXNotificationPaneCompleted,ElapsedTimeInMilliseconds:NotificationPaneStateful_uiTimer.milliSecondsElapsed})}),[]),Object(jsx_runtime.jsx)(cjs.NotificationPane,Object.assign({},genericPropsObj))};NotificationPaneStateful_NotificationPaneStateful.displayName="NotificationPaneStateful";var notificationpanestateful_NotificationPaneStateful=NotificationPaneStateful_NotificationPaneStateful;try{NotificationPaneStateful_NotificationPaneStateful.displayName="NotificationPaneStateful",NotificationPaneStateful_NotificationPaneStateful.__docgenInfo={description:"",displayName:"NotificationPaneStateful",props:{notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},notificationScenarioType:{defaultValue:null,description:"",name:"notificationScenarioType",required:!1,type:{name:"string"}},endChat:{defaultValue:null,description:"endChat: Internal Prop injected for triggering end of a chat using chatSDK\n@param adapter : The chat adapter for the live chat session\n@param skipEndChatSDK : If set to true endchat will skip chatSDK endChat call\n@param skipCloseChat : If set to true endchat will skip closing the live chat instance\n@param postMessageToOtherTab : If set to true endchat will send a message to other tabs(multi-tabs)",name:"endChat",required:!0,type:{name:"(adapter: any, skipEndChatSDK?: boolean | undefined, skipCloseChat?: boolean | undefined, postMessageToOtherTab?: boolean | undefined) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/notificationpanestateful/NotificationPaneStateful.tsx#NotificationPaneStateful"]={docgenInfo:NotificationPaneStateful_NotificationPaneStateful.__docgenInfo,name:"NotificationPaneStateful",path:"src/components/notificationpanestateful/NotificationPaneStateful.tsx#NotificationPaneStateful"})}catch(__react_docgen_typescript_loader_error){}var toastMiddleware_createToastMiddleware=function createToastMiddleware(notificationPaneProps,endChat){return function toastMiddleware(){return function(next){return function(card){var notification=card.notification;return notificationPaneProps&&notification.id===NotificationScenarios.ChatDisconnect?Object(jsx_runtime.jsx)(notificationpanestateful_NotificationPaneStateful,{notificationPaneProps:notificationPaneProps,notificationScenarioType:NotificationScenarios.ChatDisconnect,endChat:endChat}):next(card)}}}};var storemiddlewares_gifUploadMiddleware=function gifUploadMiddleware(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY){var _activity$attachments,_activity$channelData,_activity$channelData2,_activity$attachments2,activity=action.payload.activity;if((null==activity||null===(_activity$attachments=activity.attachments)||void 0===_activity$attachments?void 0:_activity$attachments.length)===(null==activity||null===(_activity$channelData=activity.channelData)||void 0===_activity$channelData||null===(_activity$channelData2=_activity$channelData.attachmentSizes)||void 0===_activity$channelData2?void 0:_activity$channelData2.length))null==activity||null===(_activity$attachments2=activity.attachments)||void 0===_activity$attachments2||_activity$attachments2.forEach((function(attachment){var thumbnailUrl=attachment.thumbnailUrl,contentUrl=attachment.contentUrl;attachment.contentType===Constants.e.GifContentType&&thumbnailUrl!==contentUrl&&(attachment.thumbnailUrl=contentUrl)}))}return next(action)}}},htmlPlayerMiddleware_disableHTMLPlayerDownloadButton=function disableHTMLPlayerDownloadButton(htmlTag){setTimeout((function(){for(var elements=document.getElementsByTagName(htmlTag),index=0;index<elements.length;index++)if(elements[index].getAttribute(Constants.e.controlsList)){if(-1===elements[index].getAttribute(Constants.e.controlsList).indexOf(Constants.e.nodownload)){var currentControlsListValue=elements[index].getAttribute(Constants.e.controlsList);elements[index].setAttribute(Constants.e.controlsList,currentControlsListValue+" "+Constants.e.nodownload)}}else elements[index].setAttribute(Constants.e.controlsList,Constants.e.nodownload)}),500)},storemiddlewares_htmlPlayerMiddleware=function htmlPlayerMiddleware(_ref){_ref.dispatch;return function(next){return function(action){var _action$payload,_action$payload$activ,_action$payload$activ2;return action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&(null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ||null===(_action$payload$activ2=_action$payload$activ.attachments)||void 0===_action$payload$activ2?void 0:_action$payload$activ2.length)>0&&(htmlPlayerMiddleware_disableHTMLPlayerDownloadButton(Constants.e.video),htmlPlayerMiddleware_disableHTMLPlayerDownloadButton(Constants.e.audio)),next(action)}}},simple_update_in_production_min=__webpack_require__("./node_modules/simple-update-in/dist/simple-update-in.production.min.js"),simple_update_in_production_min_default=__webpack_require__.n(simple_update_in_production_min),htmlTextMiddleware_processHTMLText=function processHTMLText(action,text,honorsTargetInHTMLLinks){var _htmlNode$tagName,htmlNode=function convertTextToHtmlNode(text){if(!text)return"";var element=document.createElement(Constants.j.div);try{text=purify_default.a.sanitize(text,{ADD_ATTR:["target"]}),element.innerHTML=text}catch(e){var errorMessage="Failed to purify and set innertHTML with text: "+text;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return element}(text),aNodes=htmlNode.getElementsByTagName(Constants.j.aTagName);if((null==aNodes?void 0:aNodes.length)>0)try{for(var index=0;index<aNodes.length;index++){var _aNode$tagName,aNode=aNodes[index];(null===(_aNode$tagName=aNode.tagName)||void 0===_aNode$tagName?void 0:_aNode$tagName.toLowerCase())===Constants.j.aTagName&&aNode.href&&(aNode.target&&honorsTargetInHTMLLinks||(aNode.target=Constants.e.blank),aNode.rel?(-1===aNode.rel.indexOf(Constants.j.noopenerTag)&&(aNode.rel+=" "+Constants.j.noopenerTag),-1===aNode.rel.indexOf(Constants.j.noreferrerTag)&&(aNode.rel+=" "+Constants.j.noreferrerTag)):aNode.rel=Constants.j.noopenerTag+" "+Constants.j.noreferrerTag)}action=simple_update_in_production_min_default()(action,[Constants.e.payload,Constants.e.activity,Constants.e.text],(function(){return htmlNode.innerHTML}))}catch(e){var errorMessage="Failed to apply action: ";try{errorMessage+=JSON.stringify(action)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return(null===(_htmlNode$tagName=htmlNode.tagName)||void 0===_htmlNode$tagName?void 0:_htmlNode$tagName.toLowerCase())===Constants.j.div&&0===htmlNode.children.length&&""===htmlNode.innerHTML.trim()&&(action=simple_update_in_production_min_default()(action,[Constants.e.payload,Constants.e.activity,Constants.e.text],(function(){return""}))),action},storemiddlewares_htmlTextMiddleware=function htmlTextMiddleware(honorsTargetInHTMLLinks){return function(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY)try{var _action$payload,_action$payload$activ,text=null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$activ=_action$payload.activity)||void 0===_action$payload$activ?void 0:_action$payload$activ.text;text&&(action=htmlTextMiddleware_processHTMLText(action,text,null!=honorsTargetInHTMLLinks&&honorsTargetInHTMLLinks))}catch(e){var errorMessage="Failed to validate action.";try{errorMessage+=JSON.stringify(action)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingHTMLTextMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return next(action)}}}};function preProcessingMiddleware_regeneratorRuntime(){preProcessingMiddleware_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var storemiddlewares_preProcessingMiddleware=function preProcessingMiddleware(_ref){_ref.dispatch;return function(next){return function(){var _ref2=function preProcessingMiddleware_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){preProcessingMiddleware_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(preProcessingMiddleware_regeneratorRuntime().mark((function _callee(action){var activity;return preProcessingMiddleware_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return action.type===WebChatActionType.DIRECT_LINE_POST_ACTIVITY&&((activity=action.payload.activity).from&&activity.from.role!==Constants.e.userMessageTag||(action=Object.assign({},action,{payload:Object.assign({},action.payload,{activity:Object.assign({},action.payload.activity,{textFormat:Constants.e.markdown})})}))),action.type===WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY&&action.payload.activity&&(action.payload.activity[Constants.e.actionType]=WebChatActionType.DIRECT_LINE_INCOMING_ACTIVITY),_context.abrupt("return",next(action));case 3:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()}},storemiddlewares_sanitizationMiddleware=function sanitizationMiddleware(_ref){_ref.dispatch;return function(next){return function(action){if(action.type===WebChatActionType.WEB_CHAT_SEND_MESSAGE)try{var _action$payload,_DOMPurify$sanitize,text=null===(_action$payload=action.payload)||void 0===_action$payload?void 0:_action$payload.text;if(text)text=null!==(_DOMPurify$sanitize=purify_default.a.sanitize(text,{ADD_ATTR:["target"]}))&&void 0!==_DOMPurify$sanitize?_DOMPurify$sanitize:" "}catch(e){var copyDataForTelemetry=Object.assign({},action,{payload:Object.assign({},action.payload,{text:void 0})}),errorMessage="Failed to apply action: ";try{errorMessage+=JSON.stringify(copyDataForTelemetry)}catch(e){errorMessage+=" (unable to stringify action)"}TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.ERROR,{Event:TelemetryEvent.ProcessingSanitizationMiddlewareFailed,ExceptionDetails:{ErrorData:errorMessage,Exception:e}})}return next(action)}}};function initWebChatComposer_toConsumableArray(arr){return function initWebChatComposer_arrayWithoutHoles(arr){if(Array.isArray(arr))return initWebChatComposer_arrayLikeToArray(arr)}(arr)||function initWebChatComposer_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function initWebChatComposer_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return initWebChatComposer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return initWebChatComposer_arrayLikeToArray(o,minLen)}(arr)||function initWebChatComposer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function initWebChatComposer_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function initWebChatComposer_regeneratorRuntime(){initWebChatComposer_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function initWebChatComposer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){initWebChatComposer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var LiveChatWidgetStateful_uiTimer;function LiveChatWidgetStateful_regeneratorRuntime(){LiveChatWidgetStateful_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function LiveChatWidgetStateful_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){LiveChatWidgetStateful_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function LiveChatWidgetStateful_slicedToArray(arr,i){return function LiveChatWidgetStateful_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LiveChatWidgetStateful_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LiveChatWidgetStateful_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LiveChatWidgetStateful_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LiveChatWidgetStateful_arrayLikeToArray(o,minLen)}(arr,i)||function LiveChatWidgetStateful_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LiveChatWidgetStateful_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LiveChatWidgetStateful_LiveChatWidgetStateful=function LiveChatWidgetStateful(props){var _props$webChatContain,_props$webChatContain2,_props$webChatContain3,_props$webChatContain4,_props$webChatContain5,_props$webChatContain6,_props$webChatContain7,_props$webChatContain8,_props$webChatContain9,_props$webChatContain10,_props$webChatContain11,_props$webChatContain12,_props$webChatContain13,_props$styleProps,_props$webChatContain14,_props$webChatContain15,_props$controlProps,_props$controlProps3,_state$appStates7,_props$webChatContain19,_state$appStates8,_props$webChatContain21,_props$webChatContain22,_props$controlProps$w3,_props$controlProps12,_props$draggableChatW,_props$draggableChatW2,_props$draggableChatW3,_chatWidgetDraggableC,_props$draggableChatW4,_props$draggableChatW5,_ref7,_livechatProps$webCha,_livechatProps$webCha2,_livechatProps$styleP,_livechatProps$contro,_livechatProps$contro2,_livechatProps$compon,_livechatProps$contro3,_livechatProps$compon2,_livechatProps$contro4,_livechatProps$compon3,_livechatProps$contro5,_livechatProps$compon4,_livechatProps$contro6,_livechatProps$compon5,_livechatProps$contro7,_livechatProps$compon6,_livechatProps$contro8,_livechatProps$compon7,_livechatProps$contro9,_livechatProps$compon8,_livechatProps$contro10,_livechatProps$contro11,_livechatProps$compon9,_livechatProps$contro12,_livechatProps$compon10,_livechatProps$contro13,_livechatProps$compon11,_livechatProps$compon12,_livechatProps$compon13;Object(react.useEffect)((function(){LiveChatWidgetStateful_uiTimer=createTimer(),TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXLiveChatWidgetStart,Description:"Live chat widget loading started.",CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]);var _useChatContextStore2=LiveChatWidgetStateful_slicedToArray(hooks_useChatContextStore(),2),state=_useChatContextStore2[0],dispatch=_useChatContextStore2[1],_useChatAdapterStore2=LiveChatWidgetStateful_slicedToArray(hooks_useChatAdapterStore(),2),adapter=_useChatAdapterStore2[0],setAdapter=_useChatAdapterStore2[1],_useState2=LiveChatWidgetStateful_slicedToArray(Object(react.useState)(Object.assign({},defaultWebChatContainerStatefulProps.webChatStyles,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.webChatStyles)),2),webChatStyles=_useState2[0],setWebChatStyles=_useState2[1],facadeChatSDK=LiveChatWidgetStateful_slicedToArray(hooks_useFacadeChatSDKStore(),1)[0],_useState4=LiveChatWidgetStateful_slicedToArray(Object(react.useState)(void 0),2),voiceVideoCallingSDK=_useState4[0],setVoiceVideoCallingSDK=_useState4[1],_useState6=LiveChatWidgetStateful_slicedToArray(Object(react.useState)(""),2),conversationId=_useState6[0],setConversationId=_useState6[1],Composer=botframework_webchat.Components.Composer,canStartProactiveChat=Object(react.useRef)(!0),bubbleBackground=null!==(_props$webChatContain2=null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3||null===(_props$webChatContain4=_props$webChatContain3.webChatStyles)||void 0===_props$webChatContain4?void 0:_props$webChatContain4.bubbleBackground)&&void 0!==_props$webChatContain2?_props$webChatContain2:null!==(_props$webChatContain5=null===(_props$webChatContain6=props.webChatContainerProps)||void 0===_props$webChatContain6||null===(_props$webChatContain7=_props$webChatContain6.adaptiveCardStyles)||void 0===_props$webChatContain7?void 0:_props$webChatContain7.background)&&void 0!==_props$webChatContain5?_props$webChatContain5:defaultAdaptiveCardStyles.background,bubbleTextColor=null!==(_props$webChatContain8=null===(_props$webChatContain9=props.webChatContainerProps)||void 0===_props$webChatContain9||null===(_props$webChatContain10=_props$webChatContain9.webChatStyles)||void 0===_props$webChatContain10?void 0:_props$webChatContain10.bubbleTextColor)&&void 0!==_props$webChatContain8?_props$webChatContain8:null!==(_props$webChatContain11=null===(_props$webChatContain12=props.webChatContainerProps)||void 0===_props$webChatContain12||null===(_props$webChatContain13=_props$webChatContain12.adaptiveCardStyles)||void 0===_props$webChatContain13?void 0:_props$webChatContain13.color)&&void 0!==_props$webChatContain11?_props$webChatContain11:defaultAdaptiveCardStyles.color,generalStyles={root:Object.assign({},getGeneralStylesForButton_getGeneralStylesForButton(state),null===(_props$styleProps=props.styleProps)||void 0===_props$styleProps?void 0:_props$styleProps.generalStyles)},scrollbarProps=Object.assign({},defaultScrollBarProps,null==props?void 0:props.scrollBarProps),sendBoxTextArea=null==props||null===(_props$webChatContain14=props.webChatContainerProps)||void 0===_props$webChatContain14||null===(_props$webChatContain15=_props$webChatContain14.sendBoxTextBox)||void 0===_props$webChatContain15?void 0:_props$webChatContain15.textarea;if(!0!==(null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.skipBroadcastChannelInit)){var _facadeChatSDK$getCha,_facadeChatSDK$getCha2,_props$controlProps$w,_props$controlProps2,broadcastServiceChannelName=function getBroadcastChannelName(widgetId,widgetInstanceId){return widgetInstanceId&&!isNullOrEmptyString(widgetInstanceId)?widgetInstanceId+"_"+widgetId:widgetId}(null===(_facadeChatSDK$getCha=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha||null===(_facadeChatSDK$getCha2=_facadeChatSDK$getCha.omnichannelConfig)||void 0===_facadeChatSDK$getCha2?void 0:_facadeChatSDK$getCha2.widgetId,null!==(_props$controlProps$w=null===(_props$controlProps2=props.controlProps)||void 0===_props$controlProps2?void 0:_props$controlProps2.widgetInstanceId)&&void 0!==_props$controlProps$w?_props$controlProps$w:"");Object(cjs.BroadcastServiceInitialize)(broadcastServiceChannelName)}TelemetryTimers.LcwLoadToChatButtonTimer=createTimer();var optionalParams,widgetElementId=(null===(_props$controlProps3=props.controlProps)||void 0===_props$controlProps3?void 0:_props$controlProps3.id)||"oc-lcw",currentMessageCountRef=Object(react.useRef)(0),widgetStateEventId="",lastLWICheckTimeRef=Object(react.useRef)(0),callInProgress=Object(react.useRef)(!1),activeCachedChatExist=!1,startChat=function(){var _ref=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee2(props,localState){var isReconnectTriggered,isChatValid,inMemoryState,_state$appStates4;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(isReconnectTriggered=function(){var _ref2=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee(){var noValidReconnectId,inMemoryState;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!0!==isReconnectEnabled(props.chatConfig)||reconnectChatHelper_isPersistentEnabled(props.chatConfig)){_context.next=7;break}return _context.next=3,handleChatReconnect(facadeChatSDK,props,dispatch,setAdapter,startChat_initStartChat,state);case 3:if(noValidReconnectId=_context.sent,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),noValidReconnectId||inMemoryState.appStates.conversationState!==ConversationState.Active&&inMemoryState.appStates.conversationState!==ConversationState.ReconnectChat){_context.next=7;break}return _context.abrupt("return",!0);case 7:return _context.abrupt("return",!1);case 8:case"end":return _context.stop()}}),_callee)})));return function isReconnectTriggered(){return _ref2.apply(this,arguments)}}(),isChatValid=!1,!0!==activeCachedChatExist){_context2.next=16;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading}),_context2.next=6,checkIfConversationStillValid(facadeChatSDK,dispatch,state);case 6:if(!0!==(isChatValid=_context2.sent)){_context2.next=15;break}return _context2.next=10,isReconnectTriggered();case 10:if(_context2.sent){_context2.next=14;break}return _context2.next=14,startChat_initStartChat(facadeChatSDK,dispatch,setAdapter,state,props,optionalParams);case 14:return _context2.abrupt("return");case 15:cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:"Chat found in cache but invalid as the conversation status is inactive."}});case 16:if(!1!==isChatValid){_context2.next=32;break}if(!localState){_context2.next=28;break}return _context2.next=20,isReconnectTriggered();case 20:if(_context2.sent){_context2.next=25;break}return inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),_context2.next=25,setPreChatAndInitiateChat(facadeChatSDK,dispatch,setAdapter,void 0,void 0,inMemoryState,props);case 25:return _context2.abrupt("return");case 28:if(!1!==(null==state||null===(_state$appStates4=state.appStates)||void 0===_state$appStates4?void 0:_state$appStates4.hideStartChatButton)){_context2.next=31;break}return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Closed}),_context2.abrupt("return");case 31:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.Loading});case 32:case"end":return _context2.stop()}}),_callee2)})));return function startChat(_x2,_x3){return _ref.apply(this,arguments)}}(),setupClientDataStore=function setupClientDataStore(){var widgetCacheId=utils_getWidgetCacheIdfromProps(props);if(void 0===props.contextDataStore){var _props$controlProps$c,_props$controlProps4,cacheTtlInMins=null!==(_props$controlProps$c=null==props||null===(_props$controlProps4=props.controlProps)||void 0===_props$controlProps4?void 0:_props$controlProps4.cacheTtlInMins)&&void 0!==_props$controlProps$c?_props$controlProps$c:Constants.e.CacheTtlInMinutes,storageType=!0===(null==props?void 0:props.useSessionStorage)?Constants.v.sessionStorage:Constants.v.localStorage;DataStoreManager.clientDataStore=defaultClientDataStoreProvider_defaultClientDataStoreProvider(cacheTtlInMins,storageType),function registerBroadcastServiceForStorage(widgetCacheId,ttlInMins,storageType){cjs.BroadcastService.getMessageByEventName(widgetCacheId).subscribe((function(msg){try{defaultClientDataStoreProvider_defaultClientDataStoreProvider(ttlInMins,storageType).setData(widgetCacheId,JSON.stringify(msg.payload))}catch(error){console.error("Error in setting data to localstorage",error)}}))}(widgetCacheId,cacheTtlInMins,storageType)}else DataStoreManager.clientDataStore=props.contextDataStore};Object(react.useEffect)((function(){var _props$controlProps5,_props$controlProps6,_props$controlProps7,_props$chatConfig,_props$chatConfig$Liv,_props$controlProps$d,_props$controlProps9,_props$chatConfig2,_props$chatConfig2$Ch,_state$appStates5,_props$controlProps8;(dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILING,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_FAILURE_TYPE,payload:StartChatFailureType.Generic}),state.domainStates.confirmationPaneConfirmedOptionClicked=!1,state.domainStates.confirmationState=Constants.d.NotSet,setupClientDataStore(),createInternetConnectionChangeHandler(state),dispatch({type:LiveChatWidgetActionType.SET_WIDGET_ELEMENT_ID,payload:widgetElementId}),dispatch({type:LiveChatWidgetActionType.SET_START_CHAT_BUTTON_DISPLAY,payload:(null===(_props$controlProps5=props.controlProps)||void 0===_props$controlProps5?void 0:_props$controlProps5.hideStartChatButton)||!1}),dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!1}),null!==(_props$controlProps6=props.controlProps)&&void 0!==_props$controlProps6&&_props$controlProps6.widgetInstanceId&&!isNullOrEmptyString(null===(_props$controlProps7=props.controlProps)||void 0===_props$controlProps7?void 0:_props$controlProps7.widgetInstanceId))&&dispatch({type:LiveChatWidgetActionType.SET_WIDGET_INSTANCE_ID,payload:null===(_props$controlProps8=props.controlProps)||void 0===_props$controlProps8?void 0:_props$controlProps8.widgetInstanceId});(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv?void 0:_props$chatConfig$Liv.msdyn_callingoptions)!==Constants.h.NoCalling&&initCallingSdk(facadeChatSDK,setVoiceVideoCallingSDK).then((function(sdkCreated){sdkCreated&&dispatch({type:LiveChatWidgetActionType.SET_E2VV_ENABLED,payload:!0})})),props.initialCustomContext&&dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:props.initialCustomContext});var globalDir=null!==(_props$controlProps$d=null===(_props$controlProps9=props.controlProps)||void 0===_props$controlProps9?void 0:_props$controlProps9.dir)&&void 0!==_props$controlProps$d?_props$controlProps$d:function getLocaleDirection(localeLCID){return-1===Constants.n.RTL_LOCALES.indexOf(localeLCID)?"ltr":"rtl"}(null===(_props$chatConfig2=props.chatConfig)||void 0===_props$chatConfig2||null===(_props$chatConfig2$Ch=_props$chatConfig2.ChatWidgetLanguage)||void 0===_props$chatConfig2$Ch?void 0:_props$chatConfig2$Ch.msdyn_localeid);dispatch({type:LiveChatWidgetActionType.SET_GLOBAL_DIR,payload:globalDir}),function setOptionalParams(){var _state$appStates,_state$domainStates,_state$appStates3,_state$appStates2;if(isUndefinedOrEmpty(null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.reconnectId))if(isUndefinedOrEmpty(null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates?void 0:_state$domainStates.liveChatContext)||(null==state||null===(_state$appStates3=state.appStates)||void 0===_state$appStates3?void 0:_state$appStates3.conversationState)!==ConversationState.Active)activeCachedChatExist=!1,optionalParams={};else{var _state$domainStates2;activeCachedChatExist=!0,optionalParams={liveChatContext:null==state||null===(_state$domainStates2=state.domainStates)||void 0===_state$domainStates2?void 0:_state$domainStates2.liveChatContext}}else activeCachedChatExist=!0,optionalParams={reconnectId:null==state||null===(_state$appStates2=state.appStates)||void 0===_state$appStates2?void 0:_state$appStates2.reconnectId}}(),!1===(null==state||null===(_state$appStates5=state.appStates)||void 0===_state$appStates5?void 0:_state$appStates5.hideStartChatButton)&&startChat(props)}),[]),Object(react.useEffect)((function(){var _state$appStates6;if(!0===(null==state||null===(_state$appStates6=state.appStates)||void 0===_state$appStates6?void 0:_state$appStates6.hideStartChatButton)){if(!0===state.appStates.outsideOperatingHours&&state.appStates.conversationState!==ConversationState.Active)return dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice}),void cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:"Out-of-office hours status is shown."}});cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatInitiated}),startChat(props,state)}}),[null==state||null===(_state$appStates7=state.appStates)||void 0===_state$appStates7?void 0:_state$appStates7.hideStartChatButton]),Object(react.useEffect)((function(){var _facadeChatSDK$getCha3,_facadeChatSDK$getCha4,_facadeChatSDK$getCha5,_facadeChatSDK$getCha6,_props$controlProps$w2,_props$controlProps11;cjs.BroadcastService.getMessageByEventName(BroadcastEvent.SetCustomContext).subscribe((function(msg){TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.CustomContextReceived,Description:"CustomContext received."}),dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:null==msg?void 0:msg.payload})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.StartProactiveChat).subscribe((function(msg){var _msg$payload,_msg$payload2,_msg$payload3;(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.StartProactiveChatEventReceived,Description:"Start proactive chat event received."}),!0===canStartProactiveChat.current)?function startProactiveChat(dispatch,notificationConfig,enablePreChat,inNewWindow){dispatch({type:LiveChatWidgetActionType.SET_PROACTIVE_CHAT_PARAMS,payload:{proactiveChatBodyTitle:notificationConfig&&notificationConfig.message?notificationConfig.message:"",proactiveChatEnablePrechat:null!=enablePreChat&&enablePreChat,proactiveChatInNewWindow:null!=inNewWindow&&inNewWindow}}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.ProactiveChat}),TelemetryHelper_TelemetryHelper.logLoadingEvent(LogLevel.INFO,{Event:TelemetryEvent.IncomingProactiveChatScreenLoaded,ElapsedTimeInMilliseconds:TelemetryTimers.LcwLoadToChatButtonTimer.milliSecondsElapsed,Description:"Incoming proactive chat loaded."})}(dispatch,null==msg||null===(_msg$payload=msg.payload)||void 0===_msg$payload?void 0:_msg$payload.notificationConfig,null==msg||null===(_msg$payload2=msg.payload)||void 0===_msg$payload2?void 0:_msg$payload2.enablePreChat,null==msg||null===(_msg$payload3=msg.payload)||void 0===_msg$payload3?void 0:_msg$payload3.inNewWindow):TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatAlreadyTriggered,Description:"Start proactive chat method called, when chat was already triggered."})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.HideChatVisibilityChangeEvent).subscribe(function(){var _ref3=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee3(event){var _event$payload,_props$controlProps10,_window,_window$location,_event$payload2,dateNow,conversationDetails;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(void 0===(null==event||null===(_event$payload=event.payload)||void 0===_event$payload?void 0:_event$payload.isChatHidden)){_context3.next=13;break}if(null!==(_props$controlProps10=props.controlProps)&&void 0!==_props$controlProps10&&_props$controlProps10.hideStartChatButton&&dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:null==event||null===(_event$payload2=event.payload)||void 0===_event$payload2?void 0:_event$payload2.isChatHidden}),dateNow=Date.now(),!isThisSessionPopout(null===(_window=window)||void 0===_window||null===(_window$location=_window.location)||void 0===_window$location?void 0:_window$location.href)){_context3.next=5;break}return _context3.abrupt("return");case 5:if(!(!1===callInProgress.current&&dateNow-lastLWICheckTimeRef.current>Constants.e.LWICheckOnVisibilityTimeout)){_context3.next=13;break}return lastLWICheckTimeRef.current=dateNow,callInProgress.current=!0,_context3.next=10,getConversationDetailsCall(facadeChatSDK);case 10:(null==(conversationDetails=_context3.sent)?void 0:conversationDetails.state)!==Constants.m.WrapUp&&(null==conversationDetails?void 0:conversationDetails.state)!==Constants.m.Closed||(dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!0}),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:"Chat disconnected due to timeout, left or removed."})),callInProgress.current=!1;case 13:case"end":return _context3.stop()}}),_callee3)})));return function(_x4){return _ref3.apply(this,arguments)}}()),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.NetworkReconnected).subscribe(LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee4(){var _window2,_window2$location,_inMemoryState$appSta,inMemoryState,conversationDetails,desc;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}),!isThisSessionPopout(null===(_window2=window)||void 0===_window2||null===(_window2$location=_window2.location)||void 0===_window2$location?void 0:_window2$location.href)&&(null==inMemoryState||null===(_inMemoryState$appSta=inMemoryState.appStates)||void 0===_inMemoryState$appSta?void 0:_inMemoryState$appSta.conversationState)===ConversationState.Active){_context4.next=3;break}return _context4.abrupt("return");case 3:return _context4.next=5,getConversationDetailsCall(facadeChatSDK);case 5:(null==(conversationDetails=_context4.sent)?void 0:conversationDetails.state)!==Constants.m.WrapUp&&(null==conversationDetails?void 0:conversationDetails.state)!==Constants.m.Closed||(dispatch({type:LiveChatWidgetActionType.SET_CHAT_DISCONNECT_EVENT_RECEIVED,payload:!0}),desc="Chat disconnected due to timeout, user went offline or blocked the device (including closing laptop)",TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:desc}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.OnWidgetError,payload:{errorMessage:desc}}));case 7:case"end":return _context4.stop()}}),_callee4)})))),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.SyncMinimize).subscribe((function(msg){var _msg$payload4;dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:null==msg||null===(_msg$payload4=msg.payload)||void 0===_msg$payload4?void 0:_msg$payload4.minimized})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.StartChat).subscribe((function(msg){var _msg$payload5,_msg$payload6,_msg$payload7,_msg$payload9,_inMemoryState$appSta2,_inMemoryState$appSta3,_inMemoryState$appSta4;if(state.appStates.outsideOperatingHours&&state.appStates.conversationState!==ConversationState.Active)return dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),void dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.OutOfOffice});if(isNullOrUndefined(null==msg||null===(_msg$payload5=msg.payload)||void 0===_msg$payload5?void 0:_msg$payload5.runtimeId)||(null==msg||null===(_msg$payload6=msg.payload)||void 0===_msg$payload6?void 0:_msg$payload6.runtimeId)===TelemetryManager.InternalTelemetryData.lcwRuntimeId){var _msg$payload8;if(null!=msg&&null!==(_msg$payload7=msg.payload)&&void 0!==_msg$payload7&&_msg$payload7.customContext)TelemetryHelper_TelemetryHelper.logActionEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.CustomContextReceived,Description:"CustomContext received through startChat event."}),dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:null==msg||null===(_msg$payload8=msg.payload)||void 0===_msg$payload8?void 0:_msg$payload8.customContext});TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.StartChatEventReceived,Description:"Start chat event received."});var _inMemoryState$domain,_inMemoryState$domain2,_inMemoryState$domain3,_inMemoryState$domain4,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null});if(inMemoryState.domainStates.customContext=null==msg||null===(_msg$payload9=msg.payload)||void 0===_msg$payload9?void 0:_msg$payload9.customContext,(null===(_inMemoryState$appSta2=inMemoryState.appStates)||void 0===_inMemoryState$appSta2?void 0:_inMemoryState$appSta2.conversationState)===ConversationState.Closed)return cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ChatInitiated}),void prepareStartChat(props,facadeChatSDK,inMemoryState,dispatch,setAdapter);if(!0===(null==inMemoryState||null===(_inMemoryState$appSta3=inMemoryState.appStates)||void 0===_inMemoryState$appSta3?void 0:_inMemoryState$appSta3.isMinimized)||void 0===(null==inMemoryState||null===(_inMemoryState$appSta4=inMemoryState.appStates)||void 0===_inMemoryState$appSta4?void 0:_inMemoryState$appSta4.isMinimized))return dispatch({type:LiveChatWidgetActionType.SET_MINIMIZED,payload:!1}),void cjs.BroadcastService.postMessage({eventName:BroadcastEvent.MaximizeChat,payload:{height:null==inMemoryState||null===(_inMemoryState$domain=inMemoryState.domainStates)||void 0===_inMemoryState$domain||null===(_inMemoryState$domain2=_inMemoryState$domain.widgetSize)||void 0===_inMemoryState$domain2?void 0:_inMemoryState$domain2.height,width:null==inMemoryState||null===(_inMemoryState$domain3=inMemoryState.domainStates)||void 0===_inMemoryState$domain3||null===(_inMemoryState$domain4=_inMemoryState$domain3.widgetSize)||void 0===_inMemoryState$domain4?void 0:_inMemoryState$domain4.width,lcwRuntimeId:TelemetryManager.InternalTelemetryData.lcwRuntimeId}})}}));var handleInitiateEndChatForPersistentChat=function(){var _ref5=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee5(msg,conversationDetails){var _msg$payload10,_msg$payload11,_msg$payload12,skipSessionCloseForPersistentChat,conversationState,_conversationDetails$,_yield$getPostChatCon,_state$domainStates3,postchatContext;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(skipSessionCloseForPersistentChat=typeof(null==msg||null===(_msg$payload10=msg.payload)||void 0===_msg$payload10?void 0:_msg$payload10[Constants.e.SkipSessionCloseForPersistentChatFlag])===Constants.e.String&&(null==msg||null===(_msg$payload11=msg.payload)||void 0===_msg$payload11?void 0:_msg$payload11[Constants.e.SkipSessionCloseForPersistentChatFlag]).toLowerCase()===Constants.e.true||!0===(null==msg||null===(_msg$payload12=msg.payload)||void 0===_msg$payload12?void 0:_msg$payload12[Constants.e.SkipSessionCloseForPersistentChatFlag]),TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Processing initiateEndChat for persistent chat",CustomProperties:{conversationDetails:conversationDetails}}),(conversationState=null==conversationDetails?void 0:conversationDetails.state)===Constants.m.Closed||conversationState===Constants.m.WrapUp){_context5.next=32;break}if(!skipSessionCloseForPersistentChat){_context5.next=25;break}if("true"!==(null===(_conversationDetails$=conversationDetails.canRenderPostChat)||void 0===_conversationDetails$?void 0:_conversationDetails$.toLowerCase())){_context5.next=23;break}return TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Processing initiateEndChat, fetching postChatContext"}),_context5.next=9,getPostChatContext(facadeChatSDK,state,dispatch);case 9:if(_context5.t1=_yield$getPostChatCon=_context5.sent,_context5.t0=null!==_context5.t1,!_context5.t0){_context5.next=13;break}_context5.t0=void 0!==_yield$getPostChatCon;case 13:if(!_context5.t0){_context5.next=17;break}_context5.t2=_yield$getPostChatCon,_context5.next=18;break;case 17:_context5.t2=null==state||null===(_state$domainStates3=state.domainStates)||void 0===_state$domainStates3?void 0:_state$domainStates3.postChatContext;case 18:if(!(postchatContext=_context5.t2)){_context5.next=23;break}return TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Processing initiateEndChat, initiatePostChat",CustomProperties:{postchatContext:postchatContext}}),_context5.next=23,initiatePostChat(props,conversationDetails,state,dispatch,postchatContext);case 23:_context5.next=30;break;case 25:return!1,!1,TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Processing initiateEndChat, trigger endChat"}),_context5.next=30,endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,false,false);case 30:_context5.next=33;break;case 32:cjs.BroadcastService.postMessage({eventName:BroadcastEvent.CloseChat});case 33:case"end":return _context5.stop()}}),_callee5)})));return function handleInitiateEndChatForPersistentChat(_x5,_x6){return _ref5.apply(this,arguments)}}();cjs.BroadcastService.getMessageByEventName(BroadcastEvent.InitiateEndChat).subscribe(function(){var _ref6=LiveChatWidgetStateful_asyncToGenerator(LiveChatWidgetStateful_regeneratorRuntime().mark((function _callee6(msg){var conversationDetails,chatConfig,isPersistent,persistedState;return LiveChatWidgetStateful_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Received InitiateEndChat BroadcastEvent.",CustomProperties:{ConversationStage:ConversationStage.ConversationEnd,payload:null==msg?void 0:msg.payload}}),_context6.next=3,getConversationDetailsCall(facadeChatSDK);case 3:if(conversationDetails=_context6.sent,chatConfig=props.chatConfig,isPersistent=reconnectChatHelper_isPersistentEnabled(chatConfig),TelemetryHelper_TelemetryHelper.logSDKEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.EndChatEventReceived,Description:"Processing initiateEndChat, fetched conversation details",CustomProperties:{conversationDetails:conversationDetails,isPersistent:isPersistent}}),!isPersistent||!conversationDetails){_context6.next=11;break}return _context6.next=10,handleInitiateEndChatForPersistentChat(msg,conversationDetails);case 10:return _context6.abrupt("return");case 11:if(!(persistedState=utils_getStateFromCache(utils_getWidgetCacheIdfromProps(props)))||persistedState.appStates.conversationState!==ConversationState.Active){_context6.next=19;break}TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.InitiateEndChatReceivedActiveChat}),dispatch({type:LiveChatWidgetActionType.SET_CONFIRMATION_STATE,payload:Constants.d.Ok}),dispatch({type:LiveChatWidgetActionType.SET_SHOW_CONFIRMATION,payload:!1}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:Constants.f.Customer}),_context6.next=24;break;case 19:return!0,!1,TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.InitiateEndChatReceived}),_context6.next=24,endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,true,false);case 24:case"end":return _context6.stop()}}),_callee6)})));return function(_x7){return _ref6.apply(this,arguments)}}()),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.InitiateEndChatOnBrowserUnload).subscribe((function(){initiateEndChatOnBrowserUnload()}));var endChatEventName=utils_getWidgetEndChatEventName(null===(_facadeChatSDK$getCha3=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha3||null===(_facadeChatSDK$getCha4=_facadeChatSDK$getCha3.omnichannelConfig)||void 0===_facadeChatSDK$getCha4?void 0:_facadeChatSDK$getCha4.orgId,null===(_facadeChatSDK$getCha5=facadeChatSDK.getChatSDK())||void 0===_facadeChatSDK$getCha5||null===(_facadeChatSDK$getCha6=_facadeChatSDK$getCha5.omnichannelConfig)||void 0===_facadeChatSDK$getCha6?void 0:_facadeChatSDK$getCha6.widgetId,null!==(_props$controlProps$w2=null===(_props$controlProps11=props.controlProps)||void 0===_props$controlProps11?void 0:_props$controlProps11.widgetInstanceId)&&void 0!==_props$controlProps$w2?_props$controlProps$w2:"");return cjs.BroadcastService.getMessageByEventName(endChatEventName).subscribe((function(msg){var _msg$payload13;if((null==msg||null===(_msg$payload13=msg.payload)||void 0===_msg$payload13?void 0:_msg$payload13.runtimeId)!==TelemetryManager.InternalTelemetryData.lcwRuntimeId)return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:"Received EndChat BroadcastEvent from other tabs. Closing this chat."}),endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!0,!1,!1),endChat_endChatStateCleanUp(dispatch),void endChat_chatSDKStateCleanUp(facadeChatSDK.getChatSDK())})),cjs.BroadcastService.getMessageByEventName("WidgetSize").subscribe((function(msg){dispatch({type:LiveChatWidgetActionType.SET_WIDGET_SIZE,payload:null==msg?void 0:msg.payload})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.RaiseErrorEvent).subscribe((function(){dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONFIG,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CUSTOM_CONTEXT,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_CHAT_TOKEN,payload:void 0}),dispatch({type:LiveChatWidgetActionType.SET_LIVE_CHAT_CONTEXT,payload:void 0})})),cjs.BroadcastService.getMessageByEventName(BroadcastEvent.UpdateConversationDataForTelemetry).subscribe((function(msg){var _msg$payload14,_msg$payload14$liveWo;null!==(_msg$payload14=msg.payload)&&void 0!==_msg$payload14&&null!==(_msg$payload14$liveWo=_msg$payload14.liveWorkItem)&&void 0!==_msg$payload14$liveWo&&_msg$payload14$liveWo.conversationId&&setConversationId(msg.payload.liveWorkItem.conversationId)})),function subscribeToSendCustomEvent(broadcastService,facadeChatSDK,customEventCallback){broadcastService.getMessageByEventName(Constants.e.sendCustomEvent).subscribe(customEventCallback(facadeChatSDK))}(cjs.BroadcastService,facadeChatSDK,customEventHandler_customEventCallback),defaultClientDataStoreProvider_isCookieAllowed(),function(){disposeTelemetryLoggers_disposeTelemetryLoggers()}}),[]),Object(react.useEffect)((function(){var _props$webChatContain16,_props$webChatContain17;(state.appStates.conversationState===ConversationState.Active&&(null==facadeChatSDK||facadeChatSDK.onNewMessage((function(){currentMessageCountRef.current++,dispatch({type:LiveChatWidgetActionType.SET_UNREAD_MESSAGE_COUNT,payload:currentMessageCountRef.current+1}),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.NewMessageNotification})}),{disablePolling:!0}),null==facadeChatSDK||facadeChatSDK.onAgentEndSession((function(event){var _inMemoryState$appSta5,_inMemoryState$appSta6,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null});if("participantsRemoved"in event&&(null==inMemoryState||null===(_inMemoryState$appSta5=inMemoryState.appStates)||void 0===_inMemoryState$appSta5?void 0:_inMemoryState$appSta5.conversationState)===ConversationState.Active)return!1===(null==inMemoryState||null===(_inMemoryState$appSta6=inMemoryState.appStates)||void 0===_inMemoryState$appSta6?void 0:_inMemoryState$appSta6.isConversationalSurveyEnabled)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})})),void TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.ParticipantsRemovedEvent,Description:"Participants removed event received."})}))),state.appStates.conversationState===ConversationState.InActive)&&(!1!==(null==props||null===(_props$webChatContain16=props.webChatContainerProps)||void 0===_props$webChatContain16||null===(_props$webChatContain17=_props$webChatContain16.renderingMiddlewareProps)||void 0===_props$webChatContain17?void 0:_props$webChatContain17.hideSendboxOnConversationEnd)&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})})))}),[state.appStates.conversationState]),Object(react.useEffect)((function(){canStartProactiveChat.current=state.appStates.conversationState===ConversationState.Closed&&!state.appStates.proactiveChatStates.proactiveChatInNewWindow}),[state.appStates.conversationState,state.appStates.proactiveChatStates.proactiveChatInNewWindow]),Object(react.useEffect)((function(){state.appStates.isMinimized?ActivityStreamHandler_ActivityStreamHandler.cork():setTimeout((function(){return ActivityStreamHandler_ActivityStreamHandler.uncork()}),500)}),[state.appStates.isMinimized]),Object(react.useEffect)((function(){if(!0===state.appStates.isMinimized&&state.appStates.unreadMessageCount>0){var customEvent={elementType:cjs.ElementType.Custom,eventName:BroadcastEvent.UnreadMessageCount,payload:""+state.appStates.unreadMessageCount};cjs.BroadcastService.postMessage(customEvent)}if(0===state.appStates.unreadMessageCount){currentMessageCountRef.current=-1;var _customEvent={elementType:cjs.ElementType.Custom,eventName:BroadcastEvent.UnreadMessageCount,payload:0};cjs.BroadcastService.postMessage(_customEvent)}}),[state.appStates.unreadMessageCount]),Object(react.useEffect)((function(){var _props$webChatContain18;setWebChatStyles(Object.assign({},webChatStyles,null===(_props$webChatContain18=props.webChatContainerProps)||void 0===_props$webChatContain18?void 0:_props$webChatContain18.webChatStyles))}),[null===(_props$webChatContain19=props.webChatContainerProps)||void 0===_props$webChatContain19?void 0:_props$webChatContain19.webChatStyles]),Object(react.useEffect)((function(){state.domainStates.confirmationState===Constants.d.Ok&&dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:Constants.f.Customer})}),[state.domainStates.confirmationState]),Object(react.useEffect)((function(){var _inMemoryState$appSta7,_inMemoryState$appSta8,_inMemoryState$appSta9,_inMemoryState$appSta10,_inMemoryState$appSta11,_inMemoryState$appSta12,_inMemoryState$appSta13,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null});if((null==inMemoryState||null===(_inMemoryState$appSta7=inMemoryState.appStates)||void 0===_inMemoryState$appSta7?void 0:_inMemoryState$appSta7.conversationEndedBy)!==Constants.f.NotSet){if(null!=inMemoryState&&null!==(_inMemoryState$appSta8=inMemoryState.appStates)&&void 0!==_inMemoryState$appSta8&&_inMemoryState$appSta8.startChatFailed||(null==inMemoryState||null===(_inMemoryState$appSta9=inMemoryState.appStates)||void 0===_inMemoryState$appSta9?void 0:_inMemoryState$appSta9.conversationState)===ConversationState.Postchat)return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.CustomerCloseChatOnFailureOrPostChat}),void endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!0,!1,!0);if((null==inMemoryState||null===(_inMemoryState$appSta10=inMemoryState.appStates)||void 0===_inMemoryState$appSta10?void 0:_inMemoryState$appSta10.conversationState)===ConversationState.InActive)return TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.CustomerCloseInactiveChat}),void endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!1,!1,!0);(null==inMemoryState||null===(_inMemoryState$appSta11=inMemoryState.appStates)||void 0===_inMemoryState$appSta11?void 0:_inMemoryState$appSta11.isConversationalSurveyEnabled)||(null==inMemoryState||null===(_inMemoryState$appSta12=inMemoryState.appStates)||void 0===_inMemoryState$appSta12?void 0:_inMemoryState$appSta12.conversationEndedBy)!==Constants.f.Agent&&(null==inMemoryState||null===(_inMemoryState$appSta13=inMemoryState.appStates)||void 0===_inMemoryState$appSta13?void 0:_inMemoryState$appSta13.conversationEndedBy)!==Constants.f.Bot||dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive}),prepareEndChat(props,facadeChatSDK,inMemoryState,dispatch,setAdapter,setWebChatStyles,adapter)}else TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:"conversationEndedBy is not set"})}),[null==state||null===(_state$appStates8=state.appStates)||void 0===_state$appStates8?void 0:_state$appStates8.conversationEndedBy]),Object(react.useEffect)((function(){var chatWidgetStateChangeEvent={eventName:widgetStateEventId=utils_getWidgetCacheIdfromProps(props),payload:Object.assign({},state)};cjs.BroadcastService.postMessage(chatWidgetStateChangeEvent)}),[state]),Object(react.useEffect)((function(){var _inMemoryState$appSta14,inMemoryState=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null});if(function handleChatDisconnect(props,state,setWebChatStyles){var _state$appStates,_state$domainStates$m,_state$domainStates,_state$domainStates$m2,_props$webChatContain,_props$webChatContain2,_props$webChatContain3,_props$webChatContain4,chatDisconnectState=null==state||null===(_state$appStates=state.appStates)||void 0===_state$appStates?void 0:_state$appStates.chatDisconnectEventReceived,chatDisconnectMessage=null!==(_state$domainStates$m=null==state||null===(_state$domainStates=state.domainStates)||void 0===_state$domainStates||null===(_state$domainStates$m2=_state$domainStates.middlewareLocalizedTexts)||void 0===_state$domainStates$m2?void 0:_state$domainStates$m2.MIDDLEWARE_BANNER_CHAT_DISCONNECT)&&void 0!==_state$domainStates$m?_state$domainStates$m:defaultMiddlewareLocalizedTexts.MIDDLEWARE_BANNER_CHAT_DISCONNECT,hideSendBoxOnConversationEnd=null==props||null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain||null===(_props$webChatContain2=_props$webChatContain.renderingMiddlewareProps)||void 0===_props$webChatContain2?void 0:_props$webChatContain2.hideSendboxOnConversationEnd;switch(chatDisconnectState){case!0:!1!==hideSendBoxOnConversationEnd&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!0})})),NotificationHandler_NotificationHandler.notifyWarning(NotificationScenarios.ChatDisconnect,chatDisconnectMessage),TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ChatDisconnectThreadEventReceived,Description:"Chat disconnected due to timeout, left or removed."});break;case!1:if(!0===(null==props||null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3||null===(_props$webChatContain4=_props$webChatContain3.webChatStyles)||void 0===_props$webChatContain4?void 0:_props$webChatContain4.hideSendBox))return;!1!==hideSendBoxOnConversationEnd&&setWebChatStyles((function(styles){return Object.assign({},styles,{hideSendBox:!1})}))}}(props,inMemoryState,setWebChatStyles),(null==inMemoryState||null===(_inMemoryState$appSta14=inMemoryState.appStates)||void 0===_inMemoryState$appSta14?void 0:_inMemoryState$appSta14.chatDisconnectEventReceived)&&adapter)try{adapter.end(),adapter.close()}catch(e){TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.ERROR,{Event:TelemetryEvent.EndingAdapterAfterDisconnectionError,Description:Constants.z.CloseAdapterAfterDisconnectionErrorString})}}),[state.appStates.chatDisconnectEventReceived]),Object(react.useEffect)((function(){var _props$webChatContain20;dispatch({type:LiveChatWidgetActionType.SET_RENDERING_MIDDLEWARE_PROPS,payload:null===(_props$webChatContain20=props.webChatContainerProps)||void 0===_props$webChatContain20?void 0:_props$webChatContain20.renderingMiddlewareProps})}),[null===(_props$webChatContain21=props.webChatContainerProps)||void 0===_props$webChatContain21?void 0:_props$webChatContain21.renderingMiddlewareProps]),Object(react.useEffect)((function(){TelemetryHelper_TelemetryHelper.logLoadingEventToAllTelemetry(LogLevel.INFO,{Event:TelemetryEvent.UXLiveChatWidgetCompleted,Description:"Live chat widget loading completed.",ElapsedTimeInMilliseconds:LiveChatWidgetStateful_uiTimer.milliSecondsElapsed,CustomProperties:{ConversationStage:ConversationStage.Initialization}})}),[]);var initiateEndChatOnBrowserUnload=function initiateEndChatOnBrowserUnload(){var _DataStoreManager$cli;TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.BrowserUnloadEventStarted,Description:"Browser unload event received."}),TelemetryHelper_TelemetryHelper.logSDKEvent(LogLevel.INFO,{Event:TelemetryEvent.PrepareEndChat,Description:Constants.s.BrowserUnload}),endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,!1,!1,!1),null===(_DataStoreManager$cli=DataStoreManager.clientDataStore)||void 0===_DataStoreManager$cli||_DataStoreManager$cli.removeData(widgetStateEventId),voiceVideoCallingSDK&&(null==voiceVideoCallingSDK||voiceVideoCallingSDK.close()),cjs.BroadcastService.postMessage({eventName:BroadcastEvent.ClosePopoutWindow})},endChatRelay=function endChatRelay(adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab){return endChat_endChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter,skipEndChatSDK,skipCloseChat,postMessageToOtherTab)},prepareStartChatRelay=function prepareStartChatRelay(){return prepareStartChat(props,facadeChatSDK,state,dispatch,setAdapter)},initStartChatRelay=function initStartChatRelay(optionalParams,persistedState){return startChat_initStartChat(facadeChatSDK,dispatch,setAdapter,state,props,optionalParams,persistedState)},confirmationPaneProps=function initConfirmationPropsComposer(props){var _props$confirmationPa,_props$footerProps$co,_props$footerProps,_props$footerProps$co2,_props$footerProps$co3,_props$footerProps2,_props$footerProps2$c,_props$confirmationPa2,confirmationPaneInputs,confirmationPanelocalizedTexts=Object.assign({},defaultConfirmationPaneLocalizedTexts,null==props||null===(_props$confirmationPa=props.confirmationPaneProps)||void 0===_props$confirmationPa?void 0:_props$confirmationPa.confirmationPaneLocalizedTexts),emailTranscriptDisabled=null!==(_props$footerProps$co=null===(_props$footerProps=props.footerProps)||void 0===_props$footerProps||null===(_props$footerProps$co2=_props$footerProps.controlProps)||void 0===_props$footerProps$co2?void 0:_props$footerProps$co2.hideEmailTranscriptButton)&&void 0!==_props$footerProps$co&&_props$footerProps$co,downloadTranscriptDisabled=null!==(_props$footerProps$co3=null===(_props$footerProps2=props.footerProps)||void 0===_props$footerProps2||null===(_props$footerProps2$c=_props$footerProps2.controlProps)||void 0===_props$footerProps2$c?void 0:_props$footerProps2$c.hideDownloadTranscriptButton)&&void 0!==_props$footerProps$co3&&_props$footerProps$co3;return confirmationPaneInputs=emailTranscriptDisabled||downloadTranscriptDisabled?emailTranscriptDisabled&&!downloadTranscriptDisabled?{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_DOWNLOAD_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_DOWNLOAD_TRANSCRIPT_ENABLED}:!emailTranscriptDisabled&&downloadTranscriptDisabled?{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_TRANSCRIPT_ENABLED}:{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_DEFAULT,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_DEFAULT}:{title:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_TITLE_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED,description:confirmationPanelocalizedTexts.CLOSE_CONFIRMATION_DIALOG_DESCRIPTION_FOR_EMAIL_AND_DOWNLOAD_TRANSCRIPT_ENABLED},Object.assign({},props.confirmationPaneProps,{controlProps:Object.assign({titleText:confirmationPaneInputs.title,subtitleText:confirmationPaneInputs.description},null===(_props$confirmationPa2=props.confirmationPaneProps)||void 0===_props$confirmationPa2?void 0:_props$confirmationPa2.controlProps)})}(props),webChatProps=function initWebChatComposer(props,state,dispatch,facadeChatSDK,endChat){var _props$webChatContain,_props$webChatContain2,_props$webChatContain3,_props$webChatContain4,_props$webChatContain5,_props$webChatContain6,_props$webChatContain7,_props$webChatContain8,_props$webChatContain9,_state$domainStates$l4,_state$domainStates$l5,_props$webChatContain14,_props$webChatContain15,_state$domainStates$r,_state$domainStates$r2,_props$webChatContain16,_props$webChatContain17,_state$domainStates$r3,_state$domainStates$r4,_state$domainStates$r5,_props$webChatContain18,_props$webChatContain19,_state$domainStates$l6,_state$domainStates$l7,_props$webChatContain20,_props$webChatContain21,_props$webChatContain22,_props$webChatContain23,_state$domainStates$r6,_state$domainStates$r7,_props$webChatContain24,_props$webChatContain25,_defaultWebChatContai,_props$webChatContain26,_props$webChatContain27,_defaultWebChatContai2,_props$webChatContain28,_props$webChatContain29,_props$webChatContain30,_props$webChatContain31;!function postDomPurifyActivities(){purify_default.a.addHook("afterSanitizeAttributes",(function(node){var target=node.getAttribute(Constants.e.Target);target===Constants.e.TargetSelf?node.setAttribute(Constants.e.Target,Constants.e.TargetTop):target||node.setAttribute(Constants.e.Target,Constants.e.Blank)}))}();var localizedTexts=Object.assign({},defaultMiddlewareLocalizedTexts,null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.localizedTexts),hyperlinkTextOverride=null!==(_props$webChatContain2=null===(_props$webChatContain3=props.webChatContainerProps)||void 0===_props$webChatContain3?void 0:_props$webChatContain3.hyperlinkTextOverride)&&void 0!==_props$webChatContain2?_props$webChatContain2:defaultWebChatContainerStatefulProps.hyperlinkTextOverride,disableNewLineMarkdownSupport=null!==(_props$webChatContain4=null===(_props$webChatContain5=props.webChatContainerProps)||void 0===_props$webChatContain5?void 0:_props$webChatContain5.disableNewLineMarkdownSupport)&&void 0!==_props$webChatContain4?_props$webChatContain4:defaultWebChatContainerStatefulProps.disableNewLineMarkdownSupport,disableMarkdownMessageFormatting=null!==(_props$webChatContain6=null===(_props$webChatContain7=props.webChatContainerProps)||void 0===_props$webChatContain7?void 0:_props$webChatContain7.disableMarkdownMessageFormatting)&&void 0!==_props$webChatContain6?_props$webChatContain6:defaultWebChatContainerStatefulProps.disableMarkdownMessageFormatting,opensMarkdownLinksInSameTab=null===(_props$webChatContain8=props.webChatContainerProps)||void 0===_props$webChatContain8?void 0:_props$webChatContain8.opensMarkdownLinksInSameTab,honorsTargetInHTMLLinks=null===(_props$webChatContain9=props.webChatContainerProps)||void 0===_props$webChatContain9?void 0:_props$webChatContain9.honorsTargetInHTMLLinks,markdown=createMarkdown_createMarkdown(disableMarkdownMessageFormatting,disableNewLineMarkdownSupport,opensMarkdownLinksInSameTab),webChatStore=WebChatStoreLoader.store;if(!webChatStore){var _state$domainStates$l,_state$domainStates$l2,_state$domainStates$l3,_ref4,_props$webChatContain10,conversationEndCallback=function(){var _ref=initWebChatComposer_asyncToGenerator(initWebChatComposer_regeneratorRuntime().mark((function _callee(){var conversationDetails;return initWebChatComposer_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,getConversationDetailsCall(facadeChatSDK);case 2:(null==(conversationDetails=_context.sent)?void 0:conversationDetails.participantType)===Constants.q.Bot?(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedThreadEventReceived,Description:"Conversation end by bot or timeout event received."}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:Constants.f.Bot})):(TelemetryHelper_TelemetryHelper.logActionEvent(LogLevel.INFO,{Event:TelemetryEvent.ConversationEndedThreadEventReceived,Description:"Conversation end by agent or timeout event received."}),dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_ENDED_BY,payload:Constants.f.Agent})),(null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.q.Bot&&(null==conversationDetails?void 0:conversationDetails.participantType)!==Constants.q.User||dispatch({type:LiveChatWidgetActionType.SET_POST_CHAT_PARTICIPANT_TYPE,payload:null==conversationDetails?void 0:conversationDetails.participantType});case 5:case"end":return _context.stop()}}),_callee)})));return function conversationEndCallback(){return _ref.apply(this,arguments)}}(),startConversationalSurveyCallback=function(){var _ref2=initWebChatComposer_asyncToGenerator(initWebChatComposer_regeneratorRuntime().mark((function _callee2(){return initWebChatComposer_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATIONAL_SURVEY_DISPLAY,payload:!0});case 1:case"end":return _context2.stop()}}),_callee2)})));return function startConversationalSurveyCallback(){return _ref2.apply(this,arguments)}}(),endConversationalSurveyCallback=function(){var _ref3=initWebChatComposer_asyncToGenerator(initWebChatComposer_regeneratorRuntime().mark((function _callee3(){return initWebChatComposer_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:dispatch({type:LiveChatWidgetActionType.SET_CONVERSATION_STATE,payload:ConversationState.InActive});case 1:case"end":return _context3.stop()}}),_callee3)})));return function endConversationalSurveyCallback(){return _ref3.apply(this,arguments)}}();webChatStore=botframework_webchat.createStore.apply(void 0,[{},storemiddlewares_preProcessingMiddleware,storemiddlewares_attachmentProcessingMiddleware,attachmentUploadValidatorMiddleware(null===(_state$domainStates$l=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l?void 0:_state$domainStates$l.allowedFileExtensions,null===(_state$domainStates$l2=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l2?void 0:_state$domainStates$l2.maxUploadFileSize,localizedTexts),customEventMiddleware(cjs.BroadcastService),queueOverflowHandlerMiddleware_createQueueOverflowMiddleware(state,dispatch),storemiddlewares_channelDataMiddleware((function addConversationalSurveyTagsCallback(action){var _inMemoryState$appSta;return(null===(_inMemoryState$appSta=executeReducer(state,{type:LiveChatWidgetActionType.GET_IN_MEMORY_STATE,payload:null}).appStates)||void 0===_inMemoryState$appSta?void 0:_inMemoryState$appSta.isConversationalSurvey)&&(action.payload.activity.channelData.tags.includes(Constants.e.c2ConversationalSurveyMessageTag)||action.payload.activity.channelData.tags.push(Constants.e.c2ConversationalSurveyMessageTag)),action})),conversationEndMiddleware(conversationEndCallback,startConversationalSurveyCallback,endConversationalSurveyCallback),dataMaskingMiddleware(null===(_state$domainStates$l3=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l3?void 0:_state$domainStates$l3.DataMaskingInfo),createMessageTimeStampMiddleware,createMessageSequenceIdOverrideMiddleware,citationsMiddleware_createCitationsMiddleware(state,dispatch),storemiddlewares_gifUploadMiddleware,storemiddlewares_htmlPlayerMiddleware,storemiddlewares_htmlTextMiddleware(honorsTargetInHTMLLinks),maxMessageSizeValidator(localizedTexts),storemiddlewares_sanitizationMiddleware,callActionMiddleware(),localizedStringsBotInitialsMiddleware_localizedStringsBotInitialsMiddleware((function(initials){dispatch({type:LiveChatWidgetActionType.SET_BOT_AVATAR_INITIALS,payload:initials})}))].concat(initWebChatComposer_toConsumableArray(null!==(_ref4=null===(_props$webChatContain10=props.webChatContainerProps)||void 0===_props$webChatContain10?void 0:_props$webChatContain10.storeMiddlewares)&&void 0!==_ref4?_ref4:[]))),WebChatStoreLoader.store=webChatStore}var isInitEventLogged,markdownRenderers=[new markdownrenderers_HyperlinkTextOverrideRenderer(hyperlinkTextOverride)],renderMarkdown=function renderMarkdown(text){var _props$webChatContain11,_props$webChatContain12;if(null!==(_props$webChatContain11=props.webChatContainerProps)&&void 0!==_props$webChatContain11&&null!==(_props$webChatContain12=_props$webChatContain11.webChatProps)&&void 0!==_props$webChatContain12&&_props$webChatContain12.renderMarkdown){var _props$webChatContain13;text=null===(_props$webChatContain13=props.webChatContainerProps)||void 0===_props$webChatContain13?void 0:_props$webChatContain13.webChatProps.renderMarkdown(text)}else{var render=disableMarkdownMessageFormatting?markdown.renderInline.bind(markdown):markdown.render.bind(markdown);text=render(text)}return markdownRenderers.forEach((function(renderer){text=renderer.render(text)})),text=purify_default.a.sanitize(text,{FORBID_TAGS:["form","button","script","div","input"],FORBID_ATTR:["action"],ADD_ATTR:["target"]})};return Object.assign({},defaultWebChatContainerStatefulProps.webChatProps,{dir:state.domainStates.globalDir,locale:changeLanguageCodeFormatForWebChat(Object(lib.getLocaleStringFromId)(null===(_state$domainStates$l4=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l4||null===(_state$domainStates$l5=_state$domainStates$l4.ChatWidgetLanguage)||void 0===_state$domainStates$l5?void 0:_state$domainStates$l5.msdyn_localeid)),store:webChatStore,activityMiddleware:null!==(_props$webChatContain14=props.webChatContainerProps)&&void 0!==_props$webChatContain14&&null!==(_props$webChatContain15=_props$webChatContain14.renderingMiddlewareProps)&&void 0!==_props$webChatContain15&&_props$webChatContain15.disableActivityMiddleware?void 0:activityMiddleware_createActivityMiddleware(renderMarkdown,null===(_state$domainStates$r=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r?void 0:_state$domainStates$r.systemMessageStyleProps,null===(_state$domainStates$r2=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r2?void 0:_state$domainStates$r2.userMessageStyleProps,localizedTexts),attachmentMiddleware:null!==(_props$webChatContain16=props.webChatContainerProps)&&void 0!==_props$webChatContain16&&null!==(_props$webChatContain17=_props$webChatContain16.renderingMiddlewareProps)&&void 0!==_props$webChatContain17&&_props$webChatContain17.disableAttachmentMiddleware?void 0:attachmentMiddleware_createAttachmentMiddleware(null!==(_state$domainStates$r3=null===(_state$domainStates$r4=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r4||null===(_state$domainStates$r5=_state$domainStates$r4.attachmentProps)||void 0===_state$domainStates$r5?void 0:_state$domainStates$r5.enableInlinePlaying)&&void 0!==_state$domainStates$r3?_state$domainStates$r3:defaultAttachmentProps_enableInlinePlaying),activityStatusMiddleware:null!==(_props$webChatContain18=props.webChatContainerProps)&&void 0!==_props$webChatContain18&&null!==(_props$webChatContain19=_props$webChatContain18.renderingMiddlewareProps)&&void 0!==_props$webChatContain19&&_props$webChatContain19.disableActivityStatusMiddleware?void 0:createActivityStatusMiddleware(Object(lib.getLocaleStringFromId)(null===(_state$domainStates$l6=state.domainStates.liveChatConfig)||void 0===_state$domainStates$l6||null===(_state$domainStates$l7=_state$domainStates$l6.ChatWidgetLanguage)||void 0===_state$domainStates$l7?void 0:_state$domainStates$l7.msdyn_localeid)),toastMiddleware:null!==(_props$webChatContain20=props.webChatContainerProps)&&void 0!==_props$webChatContain20&&null!==(_props$webChatContain21=_props$webChatContain20.renderingMiddlewareProps)&&void 0!==_props$webChatContain21&&_props$webChatContain21.disableToastMiddleware?void 0:toastMiddleware_createToastMiddleware(props.notificationPaneProps,endChat),renderMarkdown:renderMarkdown,avatarMiddleware:null!==(_props$webChatContain22=props.webChatContainerProps)&&void 0!==_props$webChatContain22&&null!==(_props$webChatContain23=_props$webChatContain22.renderingMiddlewareProps)&&void 0!==_props$webChatContain23&&_props$webChatContain23.disableAvatarMiddleware?void 0:avatarMiddleware_createAvatarMiddleware(null===(_state$domainStates$r6=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r6?void 0:_state$domainStates$r6.avatarStyleProps,null===(_state$domainStates$r7=state.domainStates.renderingMiddlewareProps)||void 0===_state$domainStates$r7?void 0:_state$domainStates$r7.avatarTextStyleProps),groupActivitiesMiddleware:null!==(_props$webChatContain24=props.webChatContainerProps)&&void 0!==_props$webChatContain24&&null!==(_props$webChatContain25=_props$webChatContain24.renderingMiddlewareProps)&&void 0!==_props$webChatContain25&&_props$webChatContain25.disableGroupActivitiesMiddleware||null===(_defaultWebChatContai=defaultWebChatContainerStatefulProps.webChatProps)||void 0===_defaultWebChatContai?void 0:_defaultWebChatContai.groupActivitiesMiddleware,typingIndicatorMiddleware:null!==(_props$webChatContain26=props.webChatContainerProps)&&void 0!==_props$webChatContain26&&null!==(_props$webChatContain27=_props$webChatContain26.renderingMiddlewareProps)&&void 0!==_props$webChatContain27&&_props$webChatContain27.disableTypingIndicatorMiddleware||null===(_defaultWebChatContai2=defaultWebChatContainerStatefulProps.webChatProps)||void 0===_defaultWebChatContai2?void 0:_defaultWebChatContai2.typingIndicatorMiddleware,onTelemetry:(isInitEventLogged=!1,function handleTelemetry(event){var level=event.level,name=event.name,loglevel=level?level.toUpperCase():"";if("init"!==(null==name?void 0:name.toLowerCase())||!isInitEventLogged){switch(loglevel){case LogLevel.DEBUG:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.DEBUG,event);break;case LogLevel.WARN:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.WARN,event);break;case LogLevel.ERROR:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.ERROR,event);break;case LogLevel.INFO:default:TelemetryHelper_TelemetryHelper.logWebChatEvent(LogLevel.INFO,event)}"init"===(null==name?void 0:name.toLowerCase())&&(isInitEventLogged=!0)}}),cardActionMiddleware:cardActionMiddleware_createCardActionMiddleware((null===(_props$webChatContain28=props.webChatContainerProps)||void 0===_props$webChatContain28?void 0:_props$webChatContain28.botMagicCode)||void 0),sendTypingIndicator:!0,overrideLocalizedStrings:getOverriddenLocalizedStrings(null===(_props$webChatContain29=props.webChatContainerProps)||void 0===_props$webChatContain29||null===(_props$webChatContain30=_props$webChatContain29.webChatProps)||void 0===_props$webChatContain30?void 0:_props$webChatContain30.overrideLocalizedStrings)},null===(_props$webChatContain31=props.webChatContainerProps)||void 0===_props$webChatContain31?void 0:_props$webChatContain31.webChatProps)}(props,state,dispatch,facadeChatSDK,endChatRelay),downloadTranscriptProps=common_createDownloadTranscriptProps(props.downloadTranscriptProps,Object.assign({},null==defaultWebChatContainerStatefulProps?void 0:defaultWebChatContainerStatefulProps.webChatStyles,null===(_props$webChatContain22=props.webChatContainerProps)||void 0===_props$webChatContain22?void 0:_props$webChatContain22.webChatStyles),props.webChatContainerProps),livechatProps=Object.assign({},props,{downloadTranscriptProps:downloadTranscriptProps}),chatWidgetDraggableConfig={elementId:widgetElementId,channel:null!==(_props$controlProps$w3=null===(_props$controlProps12=props.controlProps)||void 0===_props$controlProps12?void 0:_props$controlProps12.widgetInstanceId)&&void 0!==_props$controlProps$w3?_props$controlProps$w3:"lcw",disabled:!0!==(null===(_props$draggableChatW=props.draggableChatWidgetProps)||void 0===_props$draggableChatW?void 0:_props$draggableChatW.disabled)};!1===(null===(_props$draggableChatW2=props.draggableChatWidgetProps)||void 0===_props$draggableChatW2?void 0:_props$draggableChatW2.disabled)&&null!==(_props$draggableChatW3=props.draggableChatWidgetProps)&&void 0!==_props$draggableChatW3&&_props$draggableChatW3.targetIframe&&(chatWidgetDraggableConfig.disabled=!0);var headerDraggableConfig={draggableEventChannel:null!==(_chatWidgetDraggableC=chatWidgetDraggableConfig.channel)&&void 0!==_chatWidgetDraggableC?_chatWidgetDraggableC:"lcw",draggableEventEmitterTargetWindow:null!==(_props$draggableChatW4=props.draggableChatWidgetProps)&&void 0!==_props$draggableChatW4&&_props$draggableChatW4.targetIframe?window.parent:window,draggable:!0!==(null===(_props$draggableChatW5=props.draggableChatWidgetProps)||void 0===_props$draggableChatW5?void 0:_props$draggableChatW5.disabled)};!function setOcUserAgent(chatSDK){var _chatSDK$OCClient,_chatSDK$OCClient2;if(null!==(_chatSDK$OCClient=chatSDK.OCClient)&&void 0!==_chatSDK$OCClient&&_chatSDK$OCClient.ocUserAgent&&(null===(_chatSDK$OCClient2=chatSDK.OCClient)||void 0===_chatSDK$OCClient2||!_chatSDK$OCClient2.ocUserAgent.join(" ").includes("omnichannel-chat-widget/")))try{var userAgent="omnichannel-chat-widget/"+__webpack_require__(!function webpackMissingModule(){var e=new Error("Cannot find module '../../../package.json'");throw e.code="MODULE_NOT_FOUND",e}()).version;chatSDK.OCClient.ocUserAgent=[userAgent].concat(_toConsumableArray(chatSDK.OCClient.ocUserAgent))}catch(error){console.warn(error)}}(facadeChatSDK.getChatSDK());var directLine=null!==(_ref7=null!==(_livechatProps$webCha=null===(_livechatProps$webCha2=livechatProps.webChatContainerProps)||void 0===_livechatProps$webCha2?void 0:_livechatProps$webCha2.directLine)&&void 0!==_livechatProps$webCha?_livechatProps$webCha:adapter)&&void 0!==_ref7?_ref7:defaultWebChatContainerStatefulProps.directLine,userID=directLine.getState?null==directLine?void 0:directLine.getState("acs.userId"):"teamsvisitor",styleOptions=react_default.a.useMemo((function(){return Object.assign({},webChatStyles,{bubbleBackground:bubbleBackground,bubbleTextColor:bubbleTextColor})}),[webChatStyles,bubbleBackground,bubbleTextColor]);return Object(react.useEffect)((function(){state.domainStates.botAvatarInitials&&state.domainStates.botAvatarInitials!==webChatStyles.botAvatarInitials&&setWebChatStyles((function(styles){return Object.assign({},styles,{botAvatarInitials:state.domainStates.botAvatarInitials})}))}),[state.domainStates.botAvatarInitials]),directLine&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("style",{children:"\n            #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar {\n                width: "+scrollbarProps.width+";\n            }\n\n            #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-track {\n                background: "+scrollbarProps.trackBackgroundColor+";\n            }\n\n            #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-thumb {\n                background: "+scrollbarProps.thumbBackgroundColor+";\n                border-radius: "+scrollbarProps.thumbBorderRadius+";\n            }\n\n            #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-thumb:hover {\n                background: "+scrollbarProps.thumbHoverColor+";\n            }\n\n            /* High Contrast mode support - optimized for all variants */\n            @media (prefers-contrast: high), (-ms-high-contrast: active), (forced-colors: active) {\n                #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-track {\n                    background: Canvas !important;\n                    border: 1px solid CanvasText !important;\n                }\n\n                #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-thumb {\n                    background: CanvasText !important;\n                    border: 1px solid Canvas !important;\n                    min-height: 20px !important;\n                }\n\n                #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-thumb:hover {\n                    background: Highlight !important;\n                    border: 1px solid CanvasText !important;\n                }\n\n                #oc-lcw .webchat__basic-transcript__scrollable::-webkit-scrollbar-corner {\n                    background: Canvas !important;\n                }\n            }\n\n            .webchat__basic-transcript__activity-markdown-body > :last-child {\n                margin-bottom: 0px;\n            }\n           \n            .webchat__basic-transcript__activity-markdown-body > :first-child {\n                margin-top: 0px;\n            }\n                \n            .webchat__basic-transcript__activity-markdown-body img.webchat__render-markdown__external-link-icon {\n                background-image : url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIzIDMgMTggMTgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTcuMjUwMSA0LjUwMDE3SDEwLjc0OTVDMTEuMTYzNyA0LjUwMDE3IDExLjQ5OTUgNC44MzU5NiAxMS40OTk1IDUuMjUwMTdDMTEuNDk5NSA1LjYyOTg2IDExLjIxNzMgNS45NDM2NiAxMC44NTEzIDUuOTkzMzJMMTAuNzQ5NSA2LjAwMDE3SDcuMjQ5NzRDNi4wNzA3OSA1Ljk5OTYxIDUuMTAzNDkgNi45MDY1NiA1LjAwNzg2IDguMDYxMTJMNS4wMDAyOCA4LjIyMDAzTDUuMDAzMTIgMTYuNzUwN0M1LjAwMzQzIDE3Ljk0MTUgNS45Mjg4NSAxOC45MTYxIDcuMDk5NjYgMTguOTk0OUw3LjI1MzcxIDE5LjAwMDFMMTUuNzUxOCAxOC45ODg0QzE2Ljk0MTUgMTguOTg2OCAxNy45MTQ1IDE4LjA2MiAxNy45OTM1IDE2Ljg5MjNMMTcuOTk4NyAxNi43Mzg0VjEzLjIzMjFDMTcuOTk4NyAxMi44MTc5IDE4LjMzNDUgMTIuNDgyMSAxOC43NDg3IDEyLjQ4MjFDMTkuMTI4NCAxMi40ODIxIDE5LjQ0MjIgMTIuNzY0MyAxOS40OTE4IDEzLjEzMDNMMTkuNDk4NyAxMy4yMzIxVjE2LjczODRDMTkuNDk4NyAxOC43NDA3IDE3LjkyOTMgMjAuMzc2OSAxNS45NTI4IDIwLjQ4MjlMMTUuNzUzOCAyMC40ODg0TDcuMjU4MjcgMjAuNTAwMUw3LjA1NDk1IDIwLjQ5NDlDNS4xNDIzOSAyMC4zOTU0IDMuNjA4OTUgMTguODYyNyAzLjUwODM3IDE2Ljk1MDJMMy41MDMxMiAxNi43NTExTDMuNTAwODkgOC4yNTI3TDMuNTA1MjkgOC4wNTAyQzMuNjA1MzkgNi4xMzc0OSA1LjEzODY3IDQuNjA0NDkgNy4wNTA5NiA0LjUwNTI3TDcuMjUwMSA0LjUwMDE3SDEwLjc0OTVINy4yNTAxWk0xMy43NDgxIDMuMDAxNDZMMjAuMzAxOCAzLjAwMTk3TDIwLjQwMTQgMy4wMTU3NUwyMC41MDIyIDMuMDQzOTNMMjAuNTU5IDMuMDY4MDNDMjAuNjEyMiAzLjA5MTIyIDIwLjY2MzQgMy4xMjE2MyAyMC43MTExIDMuMTU4ODVMMjAuNzgwNCAzLjIyMTU2TDIwLjg2NDEgMy4zMjAxNEwyMC45MTgzIDMuNDEwMjVMMjAuOTU3IDMuNTAwNTdMMjAuOTc2MiAzLjU2NDc2TDIwLjk4OTggMy42Mjg2MkwyMC45OTkyIDMuNzIyODJMMjAuOTk5NyAxMC4yNTU0QzIwLjk5OTcgMTAuNjY5NiAyMC42NjM5IDExLjAwNTQgMjAuMjQ5NyAxMS4wMDU0QzE5Ljg3IDExLjAwNTQgMTkuNTU2MiAxMC43MjMyIDE5LjUwNjUgMTAuMzU3MUwxOS40OTk3IDEwLjI1NTRMMTkuNDk4OSA1LjU2MTQ3TDEyLjI3OTcgMTIuNzg0N0MxMi4wMTM0IDEzLjA1MSAxMS41OTY4IDEzLjA3NTMgMTEuMzAzMSAxMi44NTc1TDExLjIxOSAxMi43ODQ5QzEwLjk1MjcgMTIuNTE4NyAxMC45Mjg0IDEyLjEwMjEgMTEuMTQ2MiAxMS44MDg0TDExLjIxODggMTEuNzI0M0wxOC40MzY5IDQuNTAxNDZIMTMuNzQ4MUMxMy4zNjg0IDQuNTAxNDYgMTMuMDU0NiA0LjIxOTMxIDEzLjAwNSAzLjg1MzI0TDEyLjk5ODEgMy43NTE0NkMxMi45OTgxIDMuMzcxNzcgMTMuMjgwMyAzLjA1Nzk3IDEzLjY0NjQgMy4wMDgzMUwxMy43NDgxIDMuMDAxNDZaIiBmaWxsPSIjMjEyMTIxIiAvPjwvc3ZnPg==) !important;\n                height: .75em;\n                margin-left: .25em;\n            }\n\n            .webchat__link-definitions__header-text {\n                color: "+bubbleBackground+"\n            }\n            \n            .webchat__link-definitions__header-chevron {\n                color: "+bubbleBackground+"\n            }\n\n            "+((null==sendBoxTextArea?void 0:sendBoxTextArea.minHeight)&&"\n            .webchat__auto-resize-textarea.webchat__send-box-text-box__text-area {\n                min-height: "+(null==sendBoxTextArea?void 0:sendBoxTextArea.minHeight)+" !important;\n            }")+"\n            "}),Object(jsx_runtime.jsx)(draggable_DraggableChatWidget,Object.assign({},chatWidgetDraggableConfig,{children:Object(jsx_runtime.jsx)(Composer,Object.assign({},webChatProps,{userID:userID,styleOptions:styleOptions,directLine:directLine,children:Object(jsx_runtime.jsxs)(Stack.a,{id:widgetElementId,styles:generalStyles,className:null===(_livechatProps$styleP=livechatProps.styleProps)||void 0===_livechatProps$styleP?void 0:_livechatProps$styleP.className,children:[!(null!==(_livechatProps$contro=livechatProps.controlProps)&&void 0!==_livechatProps$contro&&_livechatProps$contro.hideChatButton)&&!(null!==(_livechatProps$contro2=livechatProps.controlProps)&&void 0!==_livechatProps$contro2&&_livechatProps$contro2.hideStartChatButton)&&componentController_shouldShowChatButton(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon=livechatProps.componentOverrides)||void 0===_livechatProps$compon?void 0:_livechatProps$compon.chatButton)||Object(jsx_runtime.jsx)(chatbuttonstateful_ChatButtonStateful,{buttonProps:livechatProps.chatButtonProps,outOfOfficeButtonProps:livechatProps.outOfOfficeChatButtonProps,startChat:prepareStartChatRelay})),!(null!==(_livechatProps$contro3=livechatProps.controlProps)&&void 0!==_livechatProps$contro3&&_livechatProps$contro3.hideProactiveChatPane)&&componentController_shouldShowProactiveChatPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon2=livechatProps.componentOverrides)||void 0===_livechatProps$compon2?void 0:_livechatProps$compon2.proactiveChatPane)||Object(jsx_runtime.jsx)(proactivechatpanestateful_ProactiveChatPaneStateful,{proactiveChatProps:livechatProps.proactiveChatPaneProps,startChat:prepareStartChatRelay})),!(null!==(_livechatProps$contro4=livechatProps.controlProps)&&void 0!==_livechatProps$contro4&&_livechatProps$contro4.hideHeader)&&componentController_shouldShowHeader(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon3=livechatProps.componentOverrides)||void 0===_livechatProps$compon3?void 0:_livechatProps$compon3.header)||Object(jsx_runtime.jsx)(headerstateful_HeaderStateful,Object.assign({headerProps:livechatProps.headerProps,outOfOfficeHeaderProps:livechatProps.outOfOfficeHeaderProps,endChat:endChatRelay},headerDraggableConfig))),!(null!==(_livechatProps$contro5=livechatProps.controlProps)&&void 0!==_livechatProps$contro5&&_livechatProps$contro5.hideLoadingPane)&&componentController_shouldShowLoadingPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon4=livechatProps.componentOverrides)||void 0===_livechatProps$compon4?void 0:_livechatProps$compon4.loadingPane)||Object(jsx_runtime.jsx)(loadingpanestateful_LoadingPaneStateful,{loadingPaneProps:livechatProps.loadingPaneProps,startChatErrorPaneProps:livechatProps.startChatErrorPaneProps})),!(null!==(_livechatProps$contro6=livechatProps.controlProps)&&void 0!==_livechatProps$contro6&&_livechatProps$contro6.hideErrorUIPane)&&componentController_shouldShowStartChatErrorPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon5=livechatProps.componentOverrides)||void 0===_livechatProps$compon5?void 0:_livechatProps$compon5.startChatErrorPane)||Object(jsx_runtime.jsx)(startchaterrorpanestateful_StartChatErrorPaneStateful,Object.assign({},livechatProps.startChatErrorPaneProps))),!(null!==(_livechatProps$contro7=livechatProps.controlProps)&&void 0!==_livechatProps$contro7&&_livechatProps$contro7.hideOutOfOfficeHoursPane)&&componentController_shouldShowOutOfOfficeHoursPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon6=livechatProps.componentOverrides)||void 0===_livechatProps$compon6?void 0:_livechatProps$compon6.outOfOfficeHoursPane)||Object(jsx_runtime.jsx)(ooohpanestateful_OOOHPaneStateful,Object.assign({},livechatProps.outOfOfficeHoursPaneProps))),!(null!==(_livechatProps$contro8=livechatProps.controlProps)&&void 0!==_livechatProps$contro8&&_livechatProps$contro8.hideReconnectChatPane)&&componentController_shouldShowReconnectChatPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon7=livechatProps.componentOverrides)||void 0===_livechatProps$compon7?void 0:_livechatProps$compon7.reconnectChatPane)||Object(jsx_runtime.jsx)(reconnectchatpanestateful_ReconnectChatPaneStateful,{reconnectChatProps:livechatProps.reconnectChatPaneProps,initStartChat:initStartChatRelay})),!(null!==(_livechatProps$contro9=livechatProps.controlProps)&&void 0!==_livechatProps$contro9&&_livechatProps$contro9.hidePreChatSurveyPane)&&componentController_shouldShowPreChatSurveyPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon8=livechatProps.componentOverrides)||void 0===_livechatProps$compon8?void 0:_livechatProps$compon8.preChatSurveyPane)||Object(jsx_runtime.jsx)(prechatsurveypanestateful_PreChatSurveyPaneStateful,{surveyProps:livechatProps.preChatSurveyPaneProps,initStartChat:initStartChatRelay})),!(null!==(_livechatProps$contro10=livechatProps.controlProps)&&void 0!==_livechatProps$contro10&&_livechatProps$contro10.hideCallingContainer)&&componentController_shouldShowCallingContainer(state)&&Object(jsx_runtime.jsx)(callingcontainerstateful_CallingContainerStateful,Object.assign({voiceVideoCallingSdk:voiceVideoCallingSDK},livechatProps.callingContainerProps)),!(null!==(_livechatProps$contro11=livechatProps.controlProps)&&void 0!==_livechatProps$contro11&&_livechatProps$contro11.hideWebChatContainer)&&componentController_shouldShowWebChatContainer(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon9=livechatProps.componentOverrides)||void 0===_livechatProps$compon9?void 0:_livechatProps$compon9.webChatContainer)||Object(jsx_runtime.jsx)(webchatcontainerstateful_WebChatContainerStateful,Object.assign({},livechatProps))),!(null!==(_livechatProps$contro12=livechatProps.controlProps)&&void 0!==_livechatProps$contro12&&_livechatProps$contro12.hideConfirmationPane)&&shouldShowConfirmationPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon10=livechatProps.componentOverrides)||void 0===_livechatProps$compon10?void 0:_livechatProps$compon10.confirmationPane)||Object(jsx_runtime.jsx)(confirmationpanestateful_ConfirmationPaneStateful,Object.assign({},confirmationPaneProps,{setPostChatContext:function setPostChatContextRelay(){return setPostChatContextAndLoadSurvey(facadeChatSDK,dispatch)},prepareEndChat:function prepareEndChatRelay(){return prepareEndChat(props,facadeChatSDK,state,dispatch,setAdapter,setWebChatStyles,adapter)}}))),!(null!==(_livechatProps$contro13=livechatProps.controlProps)&&void 0!==_livechatProps$contro13&&_livechatProps$contro13.hidePostChatLoadingPane)&&componentController_shouldShowPostChatLoadingPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon11=livechatProps.componentOverrides)||void 0===_livechatProps$compon11?void 0:_livechatProps$compon11.postChatLoadingPane)||Object(jsx_runtime.jsx)(postchatloadingpanestateful_PostChatLoadingPaneStateful,Object.assign({},livechatProps.postChatLoadingPaneProps))),componentController_shouldShowPostChatSurveyPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon12=livechatProps.componentOverrides)||void 0===_livechatProps$compon12?void 0:_livechatProps$compon12.postChatSurveyPane)||Object(jsx_runtime.jsx)(postchatsurveypanestateful_PostChatSurveyPaneStateful,Object.assign({},livechatProps.postChatSurveyPaneProps,livechatProps.chatSDK,{customerVoiceSurveyCorrelationId:conversationId}))),createFooter_createFooter(livechatProps,state),shouldShowEmailTranscriptPane(state)&&(Object(cjs.decodeComponentString)(null===(_livechatProps$compon13=livechatProps.componentOverrides)||void 0===_livechatProps$compon13?void 0:_livechatProps$compon13.emailTranscriptPane)||Object(jsx_runtime.jsx)(emailtranscriptpanestateful_EmailTranscriptPaneStateful,Object.assign({},livechatProps.emailTranscriptPane)))]})}))}))]})},livechatwidgetstateful_LiveChatWidgetStateful=LiveChatWidgetStateful_LiveChatWidgetStateful;try{LiveChatWidgetStateful_LiveChatWidgetStateful.displayName="LiveChatWidgetStateful",LiveChatWidgetStateful_LiveChatWidgetStateful.__docgenInfo={description:"",displayName:"LiveChatWidgetStateful",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},citationPaneProps:{defaultValue:null,description:"",name:"citationPaneProps",required:!1,type:{name:"ICitationPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}},useSessionStorage:{defaultValue:null,description:"",name:"useSessionStorage",required:!1,type:{name:"boolean"}},allowSdkChatSupport:{defaultValue:null,description:"",name:"allowSdkChatSupport",required:!1,type:{name:"boolean"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},draggableChatWidgetProps:{defaultValue:null,description:"",name:"draggableChatWidgetProps",required:!1,type:{name:"IDraggableChatWidgetProps"}},mock:{defaultValue:null,description:"",name:"mock",required:!1,type:{name:"IMockProps"}},featureConfigProps:{defaultValue:null,description:"",name:"featureConfigProps",required:!1,type:{name:"IFeatureConfigProps"}},appInsightsConfig:{defaultValue:null,description:"",name:"appInsightsConfig",required:!1,type:{name:"IAppInsightsConfig"}},persistentChatHistoryProps:{defaultValue:null,description:"",name:"persistentChatHistoryProps",required:!1,type:{name:"IPersistentChatHistoryProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/livechatwidgetstateful/LiveChatWidgetStateful.tsx#LiveChatWidgetStateful"]={docgenInfo:LiveChatWidgetStateful_LiveChatWidgetStateful.__docgenInfo,name:"LiveChatWidgetStateful",path:"src/components/livechatwidget/livechatwidgetstateful/LiveChatWidgetStateful.tsx#LiveChatWidgetStateful"})}catch(__react_docgen_typescript_loader_error){}var MockBotCommand,customerUser={id:"usedId",name:"User",role:"user"},botUser={id:"botId",name:"Bot",role:"bot"},agentUser={id:"AgentId",name:"John",role:"bot"},chatAdapterUtils_postEchoActivity=function postEchoActivity(activityObserver,activity,user){var delay=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,echoActivity=Object.assign({},activity,{id:Object(lib.uuidv4)(),from:Object.assign({},activity.from,user),timestamp:(new Date).toISOString()});setTimeout((function(){null==activityObserver||activityObserver.next(echoActivity)}),delay)},chatAdapterUtils_postBotMessageActivity=function postBotMessageActivity(activityObserver,text){var tags=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},botUser),text:text,type:"message",channelData:{tags:tags},timestamp:(new Date).toISOString()})}),arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3)},postSystemMessageActivity=function postSystemMessageActivity(activityObserver,text){chatAdapterUtils_postBotMessageActivity(activityObserver,text,"system",arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3)},chatAdapterUtils_postBotAttachmentActivity=function postBotAttachmentActivity(activityObserver){var attachments=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},botUser),attachments:attachments,type:"message",timestamp:(new Date).toISOString()})}),arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3)};!function(MockBotCommand){MockBotCommand.Bot="/bot",MockBotCommand.Card="/card",MockBotCommand.Help="/help",MockBotCommand.SendAttachment="send attachment",MockBotCommand.SendBotMessage="send bot message",MockBotCommand.SendSystemMessage="send system message",MockBotCommand.SendTyping="send typing",MockBotCommand.System="/system"}(MockBotCommand||(MockBotCommand={}));var MockBotCardCommandType,common_MockBotCommand=MockBotCommand;!function(MockBotCardCommandType){MockBotCardCommandType.Hero="hero",MockBotCardCommandType.Signin="signin",MockBotCardCommandType.Thumbnail="thumbnail"}(MockBotCardCommandType||(MockBotCardCommandType={}));var common_MockBotCardCommandType=MockBotCardCommandType;function DemoChatAdapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DemoChatAdapter_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var DemoChatAdapter_DemoChatAdapter=function(_MockAdapter){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DemoChatAdapter,_MockAdapter);var _super=_createSuper(DemoChatAdapter);function DemoChatAdapter(){var _this;return function DemoChatAdapter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DemoChatAdapter),_this=_super.call(this),setTimeout((function(){postSystemMessageActivity(_this.activityObserver,"You're currently using a demo.",0),chatAdapterUtils_postBotMessageActivity(_this.activityObserver,"Type `/help` to learn more",void 0,0)}),1e3),_this}return function DemoChatAdapter_createClass(Constructor,protoProps,staticProps){return protoProps&&DemoChatAdapter_defineProperties(Constructor.prototype,protoProps),staticProps&&DemoChatAdapter_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoChatAdapter,[{key:"postBotCommandsActivity",value:function postBotCommandsActivity(){var delay=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;chatAdapterUtils_postBotAttachmentActivity(this.activityObserver,[{contentType:"application/vnd.microsoft.card.thumbnail",content:{buttons:[{title:"Send system message",type:"imBack",value:"send system message"},{title:"Send typing",type:"imBack",value:"send typing"},{title:"Send bot message",type:"imBack",value:"send bot message"}],title:"Commands"}}],delay)}},{key:"postActivity",value:function postActivity(activity){if(activity&&(chatAdapterUtils_postEchoActivity(this.activityObserver,activity,customerUser),activity.text))switch(!0){case activity.text===common_MockBotCommand.Help:this.postBotCommandsActivity();break;case activity.text===common_MockBotCommand.SendSystemMessage:postSystemMessageActivity(this.activityObserver,"Contoso has joined the chat.");break;case activity.text===common_MockBotCommand.SendTyping:!function postBotTypingActivity(activityObserver){setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},botUser),type:"typing"})}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)}(this.activityObserver);break;case activity.text===common_MockBotCommand.SendAttachment:chatAdapterUtils_postBotAttachmentActivity(this.activityObserver,[{contentType:"image/jpeg",name:"600x400.jpg",contentUrl:"https://raw.githubusercontent.com/microsoft/omnichannel-chat-sdk/e7e75d4ede351e1cf2e52f13860d2284848c4af0/playwright/public/images/600x400.jpg"}]);break;case activity.text===common_MockBotCommand.SendBotMessage:chatAdapterUtils_postBotMessageActivity(this.activityObserver,"Hi, how can I help you?");break;case activity.text===common_MockBotCommand.Card+" "+common_MockBotCardCommandType.Signin:chatAdapterUtils_postBotAttachmentActivity(this.activityObserver,[{contentType:"application/vnd.microsoft.card.signin",content:{text:"Please login",buttons:[{type:"signin",title:"Signin",value:"https://login.live.com/"}]}}]);break;case activity.text===common_MockBotCommand.Card+" "+common_MockBotCardCommandType.Hero:chatAdapterUtils_postBotAttachmentActivity(this.activityObserver,[{contentType:"application/vnd.microsoft.card.hero",content:{buttons:[{title:"Bellevue",type:"imBack",value:"Bellevue"},{title:"Redmond",type:"imBack",value:"Redmond"},{title:"Seattle",type:"imBack",value:"Seattle"}],title:"Choose your location"}}]);break;case activity.text===common_MockBotCommand.Card+" "+common_MockBotCardCommandType.Thumbnail:chatAdapterUtils_postBotAttachmentActivity(this.activityObserver,[{contentType:"application/vnd.microsoft.card.thumbnail",content:{title:"Microsoft",subtitle:"Our mission is to empower every person and every organization on the planet to achieve more.",text:"Microsoft creates platforms and tools powered by AI to deliver innovative solutions that meet the evolving needs of our customers. The technology company is committed to making AI available broadly and doing so responsibly, with a mission to empower every person and every organization on the planet to achieve more.",images:[{alt:"Microsoft logo",url:"https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31"}],buttons:[{title:"Learn more",type:"openUrl",value:"https://www.microsoft.com/"}]}}]);break;case activity.text.startsWith(common_MockBotCommand.Bot+" "):chatAdapterUtils_postBotMessageActivity(this.activityObserver,activity.text.substring(5));break;case activity.text.startsWith(common_MockBotCommand.System+" "):postSystemMessageActivity(this.activityObserver,activity.text.substring(8))}return Observable.Observable.of(activity.id||"")}}]),DemoChatAdapter}(mockadapter_MockAdapter);function DemoChatSDK_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DemoChatSDK_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DemoChatSDK_setPrototypeOf(o,p){return DemoChatSDK_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DemoChatSDK_setPrototypeOf(o,p)}function DemoChatSDK_createSuper(Derived){var hasNativeReflectConstruct=function DemoChatSDK_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DemoChatSDK_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DemoChatSDK_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function DemoChatSDK_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DemoChatSDK_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function DemoChatSDK_getPrototypeOf(o){return DemoChatSDK_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DemoChatSDK_getPrototypeOf(o)}var DemoChatSDK_DemoChatSDK=function(_MockChatSDK){!function DemoChatSDK_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DemoChatSDK_setPrototypeOf(subClass,superClass)}(DemoChatSDK,_MockChatSDK);var _super=DemoChatSDK_createSuper(DemoChatSDK);function DemoChatSDK(){return function DemoChatSDK_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DemoChatSDK),_super.call(this)}return function DemoChatSDK_createClass(Constructor,protoProps,staticProps){return protoProps&&DemoChatSDK_defineProperties(Constructor.prototype,protoProps),staticProps&&DemoChatSDK_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DemoChatSDK,[{key:"createChatAdapter",value:function createChatAdapter(){return new DemoChatAdapter_DemoChatAdapter}}]),DemoChatSDK}(mockchatsdk_MockChatSDK);function DesignerChatAdapter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DesignerChatAdapter_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DesignerChatAdapter_setPrototypeOf(o,p){return DesignerChatAdapter_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DesignerChatAdapter_setPrototypeOf(o,p)}function DesignerChatAdapter_createSuper(Derived){var hasNativeReflectConstruct=function DesignerChatAdapter_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DesignerChatAdapter_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DesignerChatAdapter_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function DesignerChatAdapter_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DesignerChatAdapter_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function DesignerChatAdapter_getPrototypeOf(o){return DesignerChatAdapter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DesignerChatAdapter_getPrototypeOf(o)}var DesignerChatAdapter_DesignerChatAdapter=function(_MockAdapter){!function DesignerChatAdapter_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DesignerChatAdapter_setPrototypeOf(subClass,superClass)}(DesignerChatAdapter,_MockAdapter);var _super=DesignerChatAdapter_createSuper(DesignerChatAdapter);function DesignerChatAdapter(messages){var _this;return function DesignerChatAdapter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DesignerChatAdapter),(_this=_super.call(this)).messages=void 0,_this.messages=messages,_this.messages?_this.messages.length>0&&setTimeout((function(){var _this$messages;null===(_this$messages=_this.messages)||void 0===_this$messages||_this$messages.forEach((function(msg,index){_this.processMessage(msg,index)}))}),1e3):setTimeout((function(){chatAdapterUtils_postBotMessageActivity(_this.activityObserver,"Thank you for contacting us! How can I help you today?",void 0,0),chatAdapterUtils_postBotMessageActivity(_this.activityObserver,'Please accept terms and conditions to proceed. Visit the link for terms and conditions <a href="">here</a>.',void 0,0),_this.postUserActivity("I need to change my address.",0),chatAdapterUtils_postBotMessageActivity(_this.activityObserver,"Okay, let me connect you with a live agent.",void 0,100),postSystemMessageActivity(_this.activityObserver,"John has joined the chat",100),function postAgentMessageActivity(activityObserver,text){var tags=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},agentUser),text:text,type:"message",channelData:{tags:tags},timestamp:(new Date).toISOString()})}),arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3)}(_this.activityObserver,"I'd be happy to help you update your account.",void 0,100),_this.postUserActivity('I have trouble visiting the signin page <a href="">signin</a>.',0)}),1e3),_this}return function DesignerChatAdapter_createClass(Constructor,protoProps,staticProps){return protoProps&&DesignerChatAdapter_defineProperties(Constructor.prototype,protoProps),staticProps&&DesignerChatAdapter_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DesignerChatAdapter,[{key:"processMessage",value:function processMessage(msg,index){msg.text&&(msg.suggestedActions?function postAgentSuggestedActionsActivity(activityObserver,text,suggestedActions){setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},agentUser),text:text,type:"message",suggestedActions:suggestedActions,timestamp:(new Date).toISOString()})}),arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3)}(this.activityObserver,msg.text,msg.suggestedActions,100*index):chatAdapterUtils_postBotMessageActivity(this.activityObserver,msg.text,void 0,100*index)),msg.attachments&&msg.attachments.length>0&&function postAgentAttachmentActivity(activityObserver){var attachments=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],attachmentLayout=arguments.length>3?arguments[3]:void 0;setTimeout((function(){null==activityObserver||activityObserver.next({id:Object(lib.uuidv4)(),from:Object.assign({},agentUser),attachments:attachments,attachmentLayout:attachmentLayout,type:"message",timestamp:(new Date).toISOString()})}),arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3)}(this.activityObserver,msg.attachments,100*index,msg.attachmentLayout)}},{key:"postUserActivity",value:function postUserActivity(text){var _this2=this;setTimeout((function(){chatAdapterUtils_postEchoActivity(_this2.activityObserver,{text:text,from:Object.assign({},customerUser),type:"message"},customerUser,0)}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)}},{key:"postActivity",value:function postActivity(activity){return activity&&chatAdapterUtils_postEchoActivity(this.activityObserver,activity,customerUser),Observable.Observable.of(activity.id||"")}}]),DesignerChatAdapter}(mockadapter_MockAdapter);function DesignerChatSDK_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function DesignerChatSDK_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function DesignerChatSDK_setPrototypeOf(o,p){return DesignerChatSDK_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},DesignerChatSDK_setPrototypeOf(o,p)}function DesignerChatSDK_createSuper(Derived){var hasNativeReflectConstruct=function DesignerChatSDK_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DesignerChatSDK_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DesignerChatSDK_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function DesignerChatSDK_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DesignerChatSDK_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function DesignerChatSDK_getPrototypeOf(o){return DesignerChatSDK_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DesignerChatSDK_getPrototypeOf(o)}var DesignerChatSDK_DesignerChatSDK=function(_MockChatSDK){!function DesignerChatSDK_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DesignerChatSDK_setPrototypeOf(subClass,superClass)}(DesignerChatSDK,_MockChatSDK);var _super=DesignerChatSDK_createSuper(DesignerChatSDK);function DesignerChatSDK(){var _this;return function DesignerChatSDK_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DesignerChatSDK),(_this=_super.call(this)).mockMessages=void 0,_this.localeId=_this.getLiveChatConfig().ChatWidgetLanguage.msdyn_localeid,_this}return function DesignerChatSDK_createClass(Constructor,protoProps,staticProps){return protoProps&&DesignerChatSDK_defineProperties(Constructor.prototype,protoProps),staticProps&&DesignerChatSDK_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DesignerChatSDK,[{key:"createChatAdapter",value:function createChatAdapter(){return new DesignerChatAdapter_DesignerChatAdapter(this.mockMessages)}},{key:"getLiveChatConfig",value:function getLiveChatConfig(){return{LiveWSAndLiveChatEngJoin:{msdyn_widgetthemecolor:"19236002",msdyn_callingoptions:"192350000",msdyn_widgettitle:"Let's chat",msdyn_conversationmode:"192350000",msdyn_avatarurl:"https://oc-cdn-ocprod.azureedge.net/livechatwidget/images/chatIcon.svg",msdyn_name:"Let's Chat",msdyn_postconversationsurveyenable:"false",OutOfOperatingHours:"False",ShowWidget:"True"},ChatWidgetLanguage:{msdyn_localeid:"1033",msdyn_languagename:"English - United States"}}}}]),DesignerChatSDK}(mockchatsdk_MockChatSDK),common_overridePropsOnMockIfApplicable=function overridePropsOnMockIfApplicable(props){var _props$mock,_props$mock2,_props$mock3,_props$mock3$mockMess;null!=props&&null!==(_props$mock=props.mock)&&void 0!==_props$mock&&_props$mock.type&&"designer"===(null==props||null===(_props$mock2=props.mock)||void 0===_props$mock2?void 0:_props$mock2.type.toLowerCase())&&(props.webChatContainerProps||(props.webChatContainerProps={}),props.webChatContainerProps.webChatProps||(props.webChatContainerProps.webChatProps={}),props.webChatContainerProps.webChatStyles||(props.webChatContainerProps.webChatStyles={}),props.webChatContainerProps.webChatProps.overrideLocalizedStrings||(props.webChatContainerProps.webChatProps.overrideLocalizedStrings={}),props.webChatContainerProps=Object.assign({},props.webChatContainerProps,{webChatProps:Object.assign({disabled:!(null!=props&&null!==(_props$mock3=props.mock)&&void 0!==_props$mock3&&null!==(_props$mock3$mockMess=_props$mock3.mockMessages)&&void 0!==_props$mock3$mockMess&&_props$mock3$mockMess.length)},props.webChatContainerProps.webChatProps,{overrideLocalizedStrings:Object.assign({TEXT_INPUT_PLACEHOLDER:"Send a message . . ."},props.webChatContainerProps.webChatProps.overrideLocalizedStrings)}),webChatStyles:Object.assign({hideUploadButton:!1,sendBoxBackground:"rgb(243, 242, 241)"},props.webChatContainerProps.webChatStyles)}))},defaultInternalTelemetryData={environmentVersion:"prod",chatWidgetLocaleLCID:"1033",channelId:"lcw2.0"},defaultTelemetryConfiguration={telemetryDisabled:!1,disableConsoleLog:!1,telemetryLoggers:[],ariaConfigurations:defaultAriaConfig,chatWidgetVersion:"0.0.0-0",chatComponentVersion:"0.0.0-0",OCChatSDKVersion:"0.0.0-0"},defaultAppInsightsConfig={appInsightsDisabled:!0,appInsightsKey:""};function LiveChatWidget_slicedToArray(arr,i){return function LiveChatWidget_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LiveChatWidget_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function LiveChatWidget_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return LiveChatWidget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LiveChatWidget_arrayLikeToArray(o,minLen)}(arr,i)||function LiveChatWidget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LiveChatWidget_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LiveChatWidget_LiveChatWidget=function LiveChatWidget(props){var _props$featureConfigP,_props$chatConfig,_props$chatConfig$Liv,_props$chatConfig2,_props$chatConfig2$Li,reducer=function createReducer(){return createReducer_reducer}(),_useReducer=Object(react.useReducer)(reducer,function getLiveChatWidgetContextInitialState(props){var _props$controlProps$c,_props$controlProps,_props$webChatContain,isOutsideOperatingHours=function isOutsideOperatingHours(){var _props$chatConfig,_props$chatConfig$Liv,_props$chatConfig$Liv2;return"true"===(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv||null===(_props$chatConfig$Liv2=_props$chatConfig$Liv.OutOfOperatingHours)||void 0===_props$chatConfig$Liv2?void 0:_props$chatConfig$Liv2.toString().toLowerCase())},widgetCacheId=utils_getWidgetCacheIdfromProps(props),cacheTtlInMins=null!==(_props$controlProps$c=null==props||null===(_props$controlProps=props.controlProps)||void 0===_props$controlProps?void 0:_props$controlProps.cacheTtlInMins)&&void 0!==_props$controlProps$c?_props$controlProps$c:Constants.e.CacheTtlInMinutes,storageType=!0===(null==props?void 0:props.useSessionStorage)?Constants.v.sessionStorage:Constants.v.localStorage,initialState=defaultClientDataStoreProvider_defaultClientDataStoreProvider(cacheTtlInMins,storageType).getData(widgetCacheId);if(!isNullOrUndefined(initialState)){var initialStateFromCache=JSON.parse(initialState),outsideOperatingHours=isOutsideOperatingHours();return(initialStateFromCache.appStates.conversationState===ConversationState.Prechat||initialStateFromCache.appStates.conversationState===ConversationState.OutOfOffice||outsideOperatingHours&&initialStateFromCache.appStates.conversationState!==ConversationState.Active)&&(initialStateFromCache.appStates.conversationState=ConversationState.Closed,initialStateFromCache.appStates.isMinimized=void 0),initialStateFromCache.domainStates.liveChatConfig=props.chatConfig,initialStateFromCache.appStates.outsideOperatingHours=outsideOperatingHours,initialStateFromCache.domainStates.botAvatarInitials||(initialStateFromCache.domainStates.botAvatarInitials=defaultWebChatStyles.botAvatarInitials),initialStateFromCache}return{domainStates:{liveChatConfig:props.chatConfig,widgetElementId:"",citations:{},renderingMiddlewareProps:null===(_props$webChatContain=props.webChatContainerProps)||void 0===_props$webChatContain?void 0:_props$webChatContain.renderingMiddlewareProps,middlewareLocalizedTexts:defaultMiddlewareLocalizedTexts,preChatSurveyResponse:"{}",chatToken:void 0,postChatContext:void 0,telemetryInternalData:{},globalDir:"ltr",liveChatContext:void 0,customContext:void 0,widgetSize:void 0,widgetInstanceId:"",initialChatSdkRequestId:"",transcriptRequestId:"",confirmationPaneConfirmedOptionClicked:!1,confirmationState:Constants.d.NotSet,startChatFailureType:StartChatFailureType.Generic,botAvatarInitials:defaultWebChatStyles.botAvatarInitials},appStates:{conversationState:ConversationState.Closed,isMinimized:void 0,previousElementIdOnFocusBeforeModalOpen:null,startChatFailed:!1,outsideOperatingHours:isOutsideOperatingHours(),preChatResponseEmail:"",isAudioMuted:null,newMessage:!1,hideStartChatButton:!1,reconnectId:void 0,proactiveChatStates:{proactiveChatBodyTitle:"",proactiveChatEnablePrechat:!1,proactiveChatInNewWindow:!1},e2vvEnabled:!1,unreadMessageCount:0,conversationEndedBy:Constants.f.NotSet,chatDisconnectEventReceived:!1,selectedSurveyMode:null,postChatParticipantType:void 0,isConversationalSurvey:!1,isConversationalSurveyEnabled:!1},uiStates:{showConfirmationPane:!1,showStartChatErrorPane:!1,showEmailTranscriptPane:!1,showCallingPopup:!1,isIncomingCall:!0,disableVideoCall:!0,disableRemoteVideo:!0,disableSelfVideo:!0,focusChatButton:!1}}}(props)),_useReducer2=LiveChatWidget_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],_useState2=LiveChatWidget_slicedToArray(Object(react.useState)(void 0),2),adapter=_useState2[0],setAdapter=_useState2[1],_useState4=LiveChatWidget_slicedToArray(Object(react.useState)(void 0),2),facadeChatSDK=_useState4[0],setFacadeChatSDK=_useState4[1],chatSDK=function getMockChatSDKIfApplicable(chatSDK,mockProps){if(null!=mockProps&&mockProps.type)switch(mockProps.type.toLowerCase()){case"demo":chatSDK=new DemoChatSDK_DemoChatSDK;break;case"designer":(chatSDK=new DesignerChatSDK_DesignerChatSDK).mockMessages=null==mockProps?void 0:mockProps.mockMessages;break;default:chatSDK=new mockchatsdk_MockChatSDK}return chatSDK}(props.chatSDK,null==props?void 0:props.mock),disableReauthentication=!0===(null===(_props$featureConfigP=props.featureConfigProps)||void 0===_props$featureConfigP?void 0:_props$featureConfigP.disableReauthentication);if(common_overridePropsOnMockIfApplicable(props),!props.chatConfig)throw new Error("chatConfig is required");var _props$mock,isAuthenticatedChat=!(null===(_props$chatConfig=props.chatConfig)||void 0===_props$chatConfig||null===(_props$chatConfig$Liv=_props$chatConfig.LiveChatConfigAuthSettings)||void 0===_props$chatConfig$Liv||!_props$chatConfig$Liv.msdyn_javascriptclientfunction)||liveChatConfigUtils_isPersistentChatEnabled(null===(_props$chatConfig2=props.chatConfig)||void 0===_props$chatConfig2||null===(_props$chatConfig2$Li=_props$chatConfig2.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig2$Li?void 0:_props$chatConfig2$Li.msdyn_conversationmode);facadeChatSDK||setFacadeChatSDK(new FacadeChatSDK_FacadeChatSDK({chatSDK:chatSDK,chatConfig:props.chatConfig,isAuthenticated:isAuthenticatedChat,getAuthToken:null==props?void 0:props.getAuthToken,isSDKMocked:!isNullOrUndefined(null==props||null===(_props$mock=props.mock)||void 0===_props$mock?void 0:_props$mock.type)},disableReauthentication));return Object(react.useEffect)((function(){!function registerTelemetryLoggers(props,dispatch){var _props$liveChatContex,_props$liveChatContex2,telemetryConfig=Object.assign({},defaultTelemetryConfiguration,props.telemetryConfig);if(null!==(_props$liveChatContex=props.liveChatContextFromCache)&&void 0!==_props$liveChatContex&&null!==(_props$liveChatContex2=_props$liveChatContex.domainStates)&&void 0!==_props$liveChatContex2&&_props$liveChatContex2.telemetryInternalData){var _props$liveChatContex3,_props$liveChatContex4;TelemetryManager.InternalTelemetryData=null===(_props$liveChatContex3=props.liveChatContextFromCache)||void 0===_props$liveChatContex3||null===(_props$liveChatContex4=_props$liveChatContex3.domainStates)||void 0===_props$liveChatContex4?void 0:_props$liveChatContex4.telemetryInternalData}else{var _props$chatSDK,_props$chatSDK$omnich,_props$chatSDK2,_props$chatSDK2$omnic,_props$chatSDK3,_props$chatSDK3$omnic,_props$chatSDK4,_props$chatSDK4$omnic,_props$chatSDK5,_props$chatSDK5$omnic,_props$chatSDK6,_props$chatSDK6$omnic,_telemetryConfig$OCCh,_telemetryConfig$chat,_telemetryConfig$chat2,_props$chatSDK7,_props$chatSDK7$omnic,_props$chatSDK8,_props$chatSDK8$omnic,_props$chatSDK9,_props$chatSDK9$omnic,_telemetryConfig$LCWR,_props$chatConfig$Liv,telemetryData=Object.assign({},defaultInternalTelemetryData,{telemetryConfig:Object.assign({},defaultTelemetryConfiguration,telemetryConfig),ariaConfig:Object.assign({},defaultAriaConfig,null==telemetryConfig?void 0:telemetryConfig.ariaConfigurations),appInsightsConfig:Object.assign({},defaultAppInsightsConfig,props.appInsightsConfig)});if(props.chatConfig&&((telemetryData=TelemetryHelper_TelemetryHelper.addChatConfigDataToTelemetry(null==props?void 0:props.chatConfig,telemetryData)).chatConfigAppInsightsKey=null===(_props$chatConfig$Liv=props.chatConfig.LiveWSAndLiveChatEngJoin)||void 0===_props$chatConfig$Liv?void 0:_props$chatConfig$Liv.AppInsightsInstrumentationKey),null===(_props$chatSDK=props.chatSDK)||void 0===_props$chatSDK||null===(_props$chatSDK$omnich=_props$chatSDK.omnichannelConfig)||void 0===_props$chatSDK$omnich||!_props$chatSDK$omnich.orgId||0===(null===(_props$chatSDK2=props.chatSDK)||void 0===_props$chatSDK2||null===(_props$chatSDK2$omnic=_props$chatSDK2.omnichannelConfig)||void 0===_props$chatSDK2$omnic?void 0:_props$chatSDK2$omnic.orgId.trim().length))throw new Error("orgId is undefined in ChatSDK");if(null===(_props$chatSDK3=props.chatSDK)||void 0===_props$chatSDK3||null===(_props$chatSDK3$omnic=_props$chatSDK3.omnichannelConfig)||void 0===_props$chatSDK3$omnic||!_props$chatSDK3$omnic.widgetId||0===(null===(_props$chatSDK4=props.chatSDK)||void 0===_props$chatSDK4||null===(_props$chatSDK4$omnic=_props$chatSDK4.omnichannelConfig)||void 0===_props$chatSDK4$omnic?void 0:_props$chatSDK4$omnic.widgetId.trim().length))throw new Error("widgetId is undefined in ChatSDK");if(null===(_props$chatSDK5=props.chatSDK)||void 0===_props$chatSDK5||null===(_props$chatSDK5$omnic=_props$chatSDK5.omnichannelConfig)||void 0===_props$chatSDK5$omnic||!_props$chatSDK5$omnic.orgUrl||0===(null===(_props$chatSDK6=props.chatSDK)||void 0===_props$chatSDK6||null===(_props$chatSDK6$omnic=_props$chatSDK6.omnichannelConfig)||void 0===_props$chatSDK6$omnic?void 0:_props$chatSDK6$omnic.orgUrl.trim().length))throw new Error("orgUrl is undefined in ChatSDK");telemetryData.OCChatSDKVersion=null!==(_telemetryConfig$OCCh=telemetryConfig.OCChatSDKVersion)&&void 0!==_telemetryConfig$OCCh?_telemetryConfig$OCCh:"0.0.0-0",telemetryData.chatComponentVersion=null!==(_telemetryConfig$chat=telemetryConfig.chatComponentVersion)&&void 0!==_telemetryConfig$chat?_telemetryConfig$chat:"0.0.0-0",telemetryData.chatWidgetVersion=null!==(_telemetryConfig$chat2=telemetryConfig.chatWidgetVersion)&&void 0!==_telemetryConfig$chat2?_telemetryConfig$chat2:"0.0.0-0",telemetryData.orgId=null===(_props$chatSDK7=props.chatSDK)||void 0===_props$chatSDK7||null===(_props$chatSDK7$omnic=_props$chatSDK7.omnichannelConfig)||void 0===_props$chatSDK7$omnic?void 0:_props$chatSDK7$omnic.orgId,telemetryData.widgetId=null===(_props$chatSDK8=props.chatSDK)||void 0===_props$chatSDK8||null===(_props$chatSDK8$omnic=_props$chatSDK8.omnichannelConfig)||void 0===_props$chatSDK8$omnic?void 0:_props$chatSDK8$omnic.widgetId,telemetryData.orgUrl=null===(_props$chatSDK9=props.chatSDK)||void 0===_props$chatSDK9||null===(_props$chatSDK9$omnic=_props$chatSDK9.omnichannelConfig)||void 0===_props$chatSDK9$omnic?void 0:_props$chatSDK9$omnic.orgUrl,telemetryData.lcwRuntimeId=null!==(_telemetryConfig$LCWR=telemetryConfig.LCWRuntimeId)&&void 0!==_telemetryConfig$LCWR?_telemetryConfig$LCWR:utils_newGuid(),TelemetryManager.InternalTelemetryData=telemetryData,dispatch({type:LiveChatWidgetActionType.SET_TELEMETRY_DATA,payload:telemetryData})}TelemetryManager_RegisterLoggers()}(props,dispatch)}),[dispatch]),Object(jsx_runtime.jsx)(FacadeChatSDKStore.Provider,{value:[facadeChatSDK,setFacadeChatSDK],children:Object(jsx_runtime.jsx)(ChatSDKStore.Provider,{value:chatSDK,children:Object(jsx_runtime.jsx)(ChatAdapterStore.Provider,{value:[adapter,setAdapter],children:Object(jsx_runtime.jsx)(ChatContextStore.Provider,{value:[state,dispatch],children:Object(jsx_runtime.jsx)(livechatwidgetstateful_LiveChatWidgetStateful,Object.assign({},props))})})})})};LiveChatWidget_LiveChatWidget.displayName="LiveChatWidget";var LiveChatWidgetMockType,livechatwidget_LiveChatWidget=LiveChatWidget_LiveChatWidget;try{LiveChatWidget_LiveChatWidget.displayName="LiveChatWidget",LiveChatWidget_LiveChatWidget.__docgenInfo={description:"",displayName:"LiveChatWidget",props:{audioNotificationProps:{defaultValue:null,description:"",name:"audioNotificationProps",required:!1,type:{name:"IAudioNotificationProps"}},callingContainerProps:{defaultValue:null,description:"",name:"callingContainerProps",required:!1,type:{name:"ICallingContainerProps"}},chatButtonProps:{defaultValue:null,description:"",name:"chatButtonProps",required:!1,type:{name:"IChatButtonProps"}},chatConfig:{defaultValue:null,description:"",name:"chatConfig",required:!1,type:{name:"ChatConfig"}},chatSDK:{defaultValue:null,description:"",name:"chatSDK",required:!0,type:{name:"OmnichannelChatSDK"}},componentOverrides:{defaultValue:null,description:"",name:"componentOverrides",required:!1,type:{name:"ILiveChatWidgetComponentOverrides"}},confirmationPaneProps:{defaultValue:null,description:"",name:"confirmationPaneProps",required:!1,type:{name:"IConfirmationPaneStatefulProps"}},controlProps:{defaultValue:null,description:"",name:"controlProps",required:!1,type:{name:"ILiveChatWidgetControlProps"}},directLine:{defaultValue:null,description:"",name:"directLine",required:!1,type:{name:"any"}},downloadTranscriptProps:{defaultValue:null,description:"",name:"downloadTranscriptProps",required:!1,type:{name:"IDownloadTranscriptProps"}},emailTranscriptPane:{defaultValue:null,description:"",name:"emailTranscriptPane",required:!1,type:{name:"IEmailTranscriptPaneProps"}},footerProps:{defaultValue:null,description:"",name:"footerProps",required:!1,type:{name:"IFooterProps"}},headerProps:{defaultValue:null,description:"",name:"headerProps",required:!1,type:{name:"IHeaderProps"}},loadingPaneProps:{defaultValue:null,description:"",name:"loadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},outOfOfficeChatButtonProps:{defaultValue:null,description:"",name:"outOfOfficeChatButtonProps",required:!1,type:{name:"IChatButtonProps"}},outOfOfficeHeaderProps:{defaultValue:null,description:"",name:"outOfOfficeHeaderProps",required:!1,type:{name:"IHeaderProps"}},outOfOfficeHoursPaneProps:{defaultValue:null,description:"",name:"outOfOfficeHoursPaneProps",required:!1,type:{name:"IOOOHPaneProps"}},postChatLoadingPaneProps:{defaultValue:null,description:"",name:"postChatLoadingPaneProps",required:!1,type:{name:"ILoadingPaneProps"}},postChatSurveyPaneProps:{defaultValue:null,description:"",name:"postChatSurveyPaneProps",required:!1,type:{name:"IPostChatSurveyPaneStatefulProps"}},preChatSurveyPaneProps:{defaultValue:null,description:"",name:"preChatSurveyPaneProps",required:!1,type:{name:"IPreChatSurveyPaneProps"}},proactiveChatPaneProps:{defaultValue:null,description:"",name:"proactiveChatPaneProps",required:!1,type:{name:"IProactiveChatPaneStatefulProps"}},reconnectChatPaneProps:{defaultValue:null,description:"",name:"reconnectChatPaneProps",required:!1,type:{name:"IReconnectChatPaneStatefulProps"}},citationPaneProps:{defaultValue:null,description:"",name:"citationPaneProps",required:!1,type:{name:"ICitationPaneStatefulProps"}},startChatErrorPaneProps:{defaultValue:null,description:"",name:"startChatErrorPaneProps",required:!1,type:{name:"IStartChatErrorPaneProps"}},styleProps:{defaultValue:null,description:"",name:"styleProps",required:!1,type:{name:"ILiveChatWidgetStyleProps"}},telemetryConfig:{defaultValue:null,description:"",name:"telemetryConfig",required:!0,type:{name:"ITelemetryConfig"}},notificationPaneProps:{defaultValue:null,description:"",name:"notificationPaneProps",required:!1,type:{name:"INotificationPaneProps"}},webChatContainerProps:{defaultValue:null,description:"",name:"webChatContainerProps",required:!1,type:{name:"IWebChatContainerStatefulProps"}},liveChatContextFromCache:{defaultValue:null,description:"",name:"liveChatContextFromCache",required:!1,type:{name:"ILiveChatWidgetContext"}},contextDataStore:{defaultValue:null,description:"",name:"contextDataStore",required:!1,type:{name:"IContextDataStore"}},getAuthToken:{defaultValue:null,description:"",name:"getAuthToken",required:!1,type:{name:"((authClientFunction?: string) => Promise<string | null>)"}},scrollBarProps:{defaultValue:null,description:"",name:"scrollBarProps",required:!1,type:{name:"IScrollBarProps"}},useSessionStorage:{defaultValue:null,description:"",name:"useSessionStorage",required:!1,type:{name:"boolean"}},allowSdkChatSupport:{defaultValue:null,description:"",name:"allowSdkChatSupport",required:!1,type:{name:"boolean"}},initialCustomContext:{defaultValue:null,description:"",name:"initialCustomContext",required:!1,type:{name:"any"}},draggableChatWidgetProps:{defaultValue:null,description:"",name:"draggableChatWidgetProps",required:!1,type:{name:"IDraggableChatWidgetProps"}},mock:{defaultValue:null,description:"",name:"mock",required:!1,type:{name:"IMockProps"}},featureConfigProps:{defaultValue:null,description:"",name:"featureConfigProps",required:!1,type:{name:"IFeatureConfigProps"}},appInsightsConfig:{defaultValue:null,description:"",name:"appInsightsConfig",required:!1,type:{name:"IAppInsightsConfig"}},persistentChatHistoryProps:{defaultValue:null,description:"",name:"persistentChatHistoryProps",required:!1,type:{name:"IPersistentChatHistoryProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/livechatwidget/LiveChatWidget.tsx#LiveChatWidget"]={docgenInfo:LiveChatWidget_LiveChatWidget.__docgenInfo,name:"LiveChatWidget",path:"src/components/livechatwidget/LiveChatWidget.tsx#LiveChatWidget"})}catch(__react_docgen_typescript_loader_error){}function OmniChannelLiveChatWidget_stories_regeneratorRuntime(){OmniChannelLiveChatWidget_stories_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function OmniChannelLiveChatWidget_stories_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function OmniChannelLiveChatWidget_stories_toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function OmniChannelLiveChatWidget_stories_setPrototypeOf(o,p){return OmniChannelLiveChatWidget_stories_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},OmniChannelLiveChatWidget_stories_setPrototypeOf(o,p)}function OmniChannelLiveChatWidget_stories_createSuper(Derived){var hasNativeReflectConstruct=function OmniChannelLiveChatWidget_stories_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=OmniChannelLiveChatWidget_stories_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=OmniChannelLiveChatWidget_stories_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function OmniChannelLiveChatWidget_stories_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function OmniChannelLiveChatWidget_stories_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}(this,result)}}function OmniChannelLiveChatWidget_stories_getPrototypeOf(o){return OmniChannelLiveChatWidget_stories_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},OmniChannelLiveChatWidget_stories_getPrototypeOf(o)}!function(LiveChatWidgetMockType){LiveChatWidgetMockType.Test="Test",LiveChatWidgetMockType.Demo="Demo",LiveChatWidgetMockType.Designer="Designer"}(LiveChatWidgetMockType||(LiveChatWidgetMockType={}));__webpack_exports__.default={title:"Stateful Components/Live Chat Widget",component:livechatwidget_LiveChatWidget};var OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate=function LiveChatWidgetTemplate(args){return Object(jsx_runtime.jsx)(livechatwidget_LiveChatWidget,Object.assign({},args))};OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.displayName="LiveChatWidgetTemplate";var Default=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),telemetryConfigGlobal={appId:"00000000-0000-0000-0000-000000000000",orgId:"00000000-0000-0000-0000-000000000000",orgUrl:"https://contoso.crm.dynamics.com",telemetryDisabled:!0,chatComponentVersion:"111111",OCChatSDKVersion:"222222",chatWidgetVersion:"333333"},liveChatWidgetDefaultProps={chatSDK:new mockchatsdk_MockChatSDK,styleProps:{generalStyles:{width:"360px",height:"560px",top:"20px",left:"20px"}},persistentChatHistory:{persistentChatHistoryEnabled:!1},telemetryConfig:telemetryConfigGlobal};Default.args=liveChatWidgetDefaultProps;var MockChatSDKSurveyEnabled=function(_MockChatSDK){!function OmniChannelLiveChatWidget_stories_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&OmniChannelLiveChatWidget_stories_setPrototypeOf(subClass,superClass)}(MockChatSDKSurveyEnabled,_MockChatSDK);var _getPostChatSurveyContext,_super=OmniChannelLiveChatWidget_stories_createSuper(MockChatSDKSurveyEnabled);function MockChatSDKSurveyEnabled(){return function OmniChannelLiveChatWidget_stories_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockChatSDKSurveyEnabled),_super.apply(this,arguments)}return function OmniChannelLiveChatWidget_stories_createClass(Constructor,protoProps,staticProps){return protoProps&&OmniChannelLiveChatWidget_stories_defineProperties(Constructor.prototype,protoProps),staticProps&&OmniChannelLiveChatWidget_stories_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MockChatSDKSurveyEnabled,[{key:"getPreChatSurvey",value:function getPreChatSurvey(parseToJson){return'{"type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"TextBlock","text":"*Please Enter Name","wrap":true},{"type":"Input.Text","id":"{\\"Id\\":\\"33828761-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Name\\",\\"IsOption\\":false,\\"Order\\":1,\\"IsRequired\\":true,\\"QuestionText\\":\\"Please Enter Name\\"}","maxLength":100},{"type":"TextBlock","text":"Comments","wrap":true},{"type":"Input.Text","id":"{\\"Id\\":\\"5624f385-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Comments\\",\\"IsOption\\":false,\\"Order\\":2,\\"IsRequired\\":false,\\"QuestionText\\":\\"Comments\\"}","isMultiline":true,"maxLength":250},{"type":"TextBlock","text":"Options","wrap":true},{"type":"Input.ChoiceSet","id":"{\\"Id\\":\\"0b5d9408-10b1-ec11-983f-0022481e6d27\\",\\"Name\\":\\"Options\\",\\"IsOption\\":true,\\"Order\\":3,\\"IsRequired\\":false,\\"QuestionText\\":\\"Options\\"}","value":"{\\"Id\\":\\"135d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option2\\"}","style":"compact","isMultiSelect":false,"choices":[{"title":"Option2","value":"{\\"Id\\":\\"135d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option2\\"}"},{"title":"Option3","value":"{\\"Id\\":\\"145d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option3\\"}"},{"title":"Option1","value":"{\\"Id\\":\\"125d9408-10b1-ec11-983f-0022481e6d27\\",\\"Value\\":\\"Option1\\"}"}]},{"type":"Input.Toggle","id":"{\\"Id\\":\\"63a42fb5-9e8b-ec11-93b0-00224824654f\\",\\"Name\\":\\"Consent\\",\\"IsOption\\":false,\\"Order\\":4,\\"IsRequired\\":true,\\"QuestionText\\":\\"Agree to Terms and Conditions\\"}","title":"*Agree to Terms and Conditions","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","isSubtle":true,"text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","data":{"Type":"InputSubmit"},"title":"Submit"}]}'}},{key:"getPostChatSurveyContext",value:(_getPostChatSurveyContext=function OmniChannelLiveChatWidget_stories_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){OmniChannelLiveChatWidget_stories_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(OmniChannelLiveChatWidget_stories_regeneratorRuntime().mark((function _callee(){return OmniChannelLiveChatWidget_stories_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.sleep(1e3);case 2:return _context.abrupt("return",{surveyInviteLink:"https://customervoice.microsoft.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbRzBkKrakuj1CvYYDsfs8hTBUMUE4WUJHMEZEMjVPRTBTVUYzSzREN1Q1Ry4u&vt=72f988bf-86f1-41af-91ab-2d7cd011db47_33743ab6-750a-4598-b3d1-902bef8e51fd_637847096240000000_MSIT_Hash_j1mV7GqRPNf7lNpsWeFBAL46SoaB0vDccn8TMRuYnZ0%3d&lang=en-us&showmultilingual=false"});case 3:case"end":return _context.stop()}}),_callee,this)}))),function getPostChatSurveyContext(){return _getPostChatSurveyContext.apply(this,arguments)})},{key:"getConversationDetails",value:function getConversationDetails(){return{conversationId:"3ef7f16f-7d34-46f4-b5d3-fa7ce1b95def",canRenderPostChat:"True"}}}]),MockChatSDKSurveyEnabled}(mockchatsdk_MockChatSDK),MockChatConfig={ChatWidgetLanguage:{msdyn_localeid:"1033",msdyn_languagename:"English - United States"},DataMaskingInfo:{},LiveChatConfigAuthSettings:{},LiveChatVersion:2,LiveWSAndLiveChatEngJoin:{msdyn_postconversationsurveyenable:"true",msdyn_postconversationsurveymode:"192350000"},allowedFileExtensions:"",maxUploadFileSize:""},DefaultWithSurvey=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),liveChatWidgetDefaultWithSurveyProps={chatSDK:new MockChatSDKSurveyEnabled,chatConfig:MockChatConfig,styleProps:{generalStyles:{width:"360px",height:"560px",top:"20px",left:"20px"}},chatButtonProps:{styleProps:{generalStyleProps:{position:"absolute"}}},postChatSurveyPaneProps:{styleProps:{generalStyleProps:{position:"initial",height:"560px",width:"360px",borderRadius:"0 0 4px 4px",overflow:"auto"}}},persistentChatHistory:{persistentChatHistoryEnabled:!1},telemetryConfig:telemetryConfigGlobal};DefaultWithSurvey.args=liveChatWidgetDefaultWithSurveyProps;var Custom=OmniChannelLiveChatWidget_stories_LiveChatWidgetTemplate.bind({}),liveChatWidgetCustom={chatSDK:new MockChatSDKSurveyEnabled,chatConfig:MockChatConfig,styleProps:{generalStyles:{width:"423px",height:"600px",bottom:"20px",right:"20px",borderRadius:"10px"}},chatButtonProps:{controlProps:{hideNotificationBubble:!0,hideChatTextContainer:!0},styleProps:{generalStyleProps:{height:"50px",width:"50px",position:"absolute",cursor:"pointer",hoverBackgroundColor:"lightgrey",borderStyle:"",borderRadius:0,borderWidth:"0",boxShadow:""},iconStyleProps:{cursor:"pointer",align:"center",width:"100%",height:"100%",justifyContent:"center",backgroundImage:"url(https://www.freeiconspng.com/uploads/live-chat-icon-20.png)",backgroundSize:"100% 100%",borderStyle:"",borderRadius:0,borderWidth:"0",boxShadow:"","&:hover":{filter:"brightness(0.8)"},margin:0}}},headerProps:{controlProps:{hideIcon:!0,headerTitleProps:{id:"oc-lcw-header-title",text:"Support Chat"}},styleProps:{generalStyleProps:{borderRadius:"0px",backgroundColor:"#1b1a19",height:"40px"},closeButtonStyleProps:{color:"#2266E3"},minimizeButtonStyleProps:{color:"#2266E3"},titleStyleProps:{fontSize:"20px",fontFamily:"Segoe UI",margin:"0 0 0 10px",color:"white",fontWeight:"600"}}},loadingPaneProps:{controlProps:{titleText:"Support Chat",spinnerText:"We will be with you shortly",spinnerSize:3,hideSubtitle:!0,hideIcon:!0,hideSpinnerText:!0},styleProps:{generalStyleProps:{position:"initial",width:"100%",height:"100%",left:"0%",top:"0%",borderRadius:"0px",borderWidth:"0px",backgroundColor:"#1b1a19",alignItems:"center"},titleStyleProps:{color:"white",margin:"0 0 50px 0",fontSize:"24px",width:"auto",fontFamily:"Segoe UI",order:1,fontWeight:600}}},webChatContainerProps:{webChatStyles:{backgroundColor:"#1b1a19",botAvatarInitials:"",botAvatarImage:"https://www.freeiconspng.com/uploads/female-call-center-agent-vector-icon--people-icons--icons-download-14.png",bubbleBackground:"#0078d4",bubbleBorderRadius:0,bubbleBorderWidth:0,bubbleFromUserBackground:"#F7F7F9",bubbleFromUserBorderRadius:0,bubbleFromUserBorderWidth:0,bubbleFromUserTextColor:"black",bubbleImageHeight:300,bubbleMaxWidth:250,bubbleMinHeight:40,bubbleMinWidth:40,bubbleTextColor:"white",hideSendBox:!1,hideUploadButton:!0,primaryFont:"Segoe UI",rootHeight:"100%",rootWidth:"100%",sendBoxTextWrap:!0,sendBoxHeight:70,sendBoxMaxHeight:120,sendBoxBackground:"#F7F7F9",bubbleFromUserNubOffset:"bottom",bubbleNubOffset:"bottom",bubbleFromUserNubSize:8,bubbleNubSize:8,avatarBorderRadius:0,timestampFormat:"absolute"},renderingMiddlewareProps:{disableTypingIndicatorMiddleware:!0,disableAvatarMiddleware:!0,disableActivityMiddleware:!0}},confirmationPaneProps:{controlProps:{hideSubtitle:!0,titleText:"Are you sure you want to leave the conversation?",confirmButtonText:"Yes",cancelButtonText:"No"},styleProps:{generalStyleProps:{borderRadius:"0px",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",height:"100%",padding:"10px 20px",width:"100%",backgroundColor:"#1b1a19"},titleStyleProps:{fontFamily:"Segoe UI",marginBottom:"15px",color:"white"},confirmButtonStyleProps:{borderRadius:"0",backgroundColor:"#2266E3"},confirmButtonHoveredStyleProps:{borderRadius:"0"},cancelButtonStyleProps:{borderRadius:"0"},cancelButtonHoveredStyleProps:{borderRadius:"0"}}},preChatSurveyPaneProps:{controlProps:{adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#FFFFFF","subtle":"#FFFFFF"}},"backgroundColor":"rgb(27, 26, 25)"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}'},styleProps:{generalStyleProps:{backgroundColor:"#1b1a19",borderWidth:"1px"},adaptiveCardContainerStyleProps:{backgroundColor:"#1b1a19",borderStyle:"none"},customButtonStyleProps:{backgroundColor:"#2266E3",color:"#1b1a19"}}},footerProps:{controlProps:{hideAudioNotificationButton:!0,hideDownloadTranscriptButton:!0,hideEmailTranscriptButton:!0,leftGroup:{children:['{"$$typeof":"$$Symbol:react.element","type":"button","key":"1","ref":null,"props":{"role":"button","style":{"fontSize":"12px","margin":"10px","padding":"5px","fontFamily":"Segoe UI","cursor":"pointer","backgroundColor":"#0078D4","borderRadius":0,"borderStyle":"none","color":"white","fontWeight":400},"children":"Upload Attachment"},"_owner":null,"_store":{}}']},rightGroup:{children:['{"$$typeof":"$$Symbol:react.element","type":"div","key":"1","ref":null,"props":{"style":{"fontSize":"11px","fontFamily":"Segoe UI","margin":"10px","padding":"2px"},"children":" Microsoft 2022"},"_owner":null,"_store":{}}']}},styleProps:{generalStyleProps:{backgroundColor:"#1b1a19"}}},persistentChatHistory:{persistentChatHistoryEnabled:!1},telemetryConfig:telemetryConfigGlobal};Custom.args=liveChatWidgetCustom,Default.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},Default.parameters),DefaultWithSurvey.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},DefaultWithSurvey.parameters),Custom.parameters=Object.assign({storySource:{source:"(args) => <LiveChatWidget {...args}></LiveChatWidget>"}},Custom.parameters)},"./stories/component-stories/CallingContainer.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"currentCallMode",(function(){return currentCallMode})),__webpack_require__.d(__webpack_exports__,"incomingCall",(function(){return incomingCall}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Calling Container/Default",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.CallingContainer};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.CallingContainer,Object.assign({},args))};Template.displayName="Template";var defaultCallingContainerProps={controlProps:{id:"oc-lcw-callingcontainer",dir:"ltr",isIncomingCall:!1,hideCallingContainer:!1},styleProps:{generalStyleProps:{background:"#000",width:"100%",zIndex:100,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)"}}},currentCallMode=Template.bind({});currentCallMode.args=defaultCallingContainerProps;var incomingCallProps={controlProps:Object.assign({},defaultCallingContainerProps.controlProps,{isIncomingCall:!0}),styleProps:Object.assign({},defaultCallingContainerProps.styleProps)},incomingCall=Template.bind({});incomingCall.args=incomingCallProps,currentCallMode.parameters=Object.assign({storySource:{source:"(args) => <CallingContainer {...args}></CallingContainer>"}},currentCallMode.parameters),incomingCall.parameters=Object.assign({storySource:{source:"(args) => <CallingContainer {...args}></CallingContainer>"}},incomingCall.parameters)},"./stories/component-stories/ChatButton.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ChatButtonDefault",(function(){return ChatButtonDefault})),__webpack_require__.d(__webpack_exports__,"ChatButtonRTL",(function(){return ChatButtonRTL})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample1",(function(){return ChatButtonSample1})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample2",(function(){return ChatButtonSample2})),__webpack_require__.d(__webpack_exports__,"ChatButtonSample3",(function(){return ChatButtonSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/ChatButton",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatButton};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatButton,Object.assign({},args))};Template.displayName="Template";var defaultChatButtonProps={controlProps:{id:"lcw-components-chat-button",dir:"ltr",role:"button",ariaLabel:"live chat button",unreadMessageCount:"0",titleText:"Let's Chat!",subtitleText:"We're online.",onClick:function onClick(){alert("initiate chat")},hideChatButton:!1,hideChatIcon:!1,hideChatTextContainer:!1,hideChatSubtitle:!1,hideChatTitle:!1,hideNotificationBubble:!0},styleProps:{generalStyleProps:{backgroundColor:"#fff",borderColor:"#fff",borderRadius:"100px 100px 100px 99px",borderStyle:"solid",borderWidth:"1px",bottom:"0px",boxShadow:"0 0 4px rgb(102 102 102 / 50%)",cursor:"pointer",display:"flex",height:"60px",margin:"3px 3px 3px 3px",padding:"0px",position:"absolute",right:"0px",selectors:{":hover":{backgroundColor:"lightgrey"},":focus":{outline:"dotted 2px #000"}},width:"180px"},iconStyleProps:{align:"center",backgroundColor:"#315FA2",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"65% 65%",borderColor:"transparent",borderRadius:"50%",borderStyle:"solid",borderWidth:"1px",display:"flex",height:"60px",justifyContent:"center",margin:"-2px -2px -2px -3px",width:"62px"},notificationBubbleStyleProps:{backgroundColor:"#cc4a31",borderRadius:"50%",color:"#fff",fontFamily:"Segoe UI,Arial,sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:"bold",lineHeight:"22px",padding:"1px",position:"absolute",textAlign:"center",top:"-5px",minHeight:"24px",minWidth:"24px"},textContainerStyleProps:{display:"flex",flexDirection:"column",justifyContent:"center"},titleStyleProps:{color:"#262626",cursor:"pointer",display:"block",fontFamily:"'Segoe UI',Arial,sans-serif",fontSize:"16px",fontWeight:"bold",lineHeight:"19px",height:"22px",margin:"0px 14px 0px 14px",overflow:"hidden",textOverflow:"ellipsis !important",whiteSpace:"nowrap",width:"90px"},subtitleStyleProps:{alignItems:"center",color:"#666",cursor:"pointer",display:"block",fontFamily:"'Segoe UI',Arial,sans-serif",fontSize:"12px",fontWeight:"200",margin:"0px 14px 0px 14px",overflow:"hidden",textOverflow:"ellipsis !important",width:"max-content"}}},ChatButtonDefault=Template.bind({});ChatButtonDefault.args=defaultChatButtonProps;var chatButtonRTLProps={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{dir:"rtl",unreadMessageCount:"10",hideNotificationBubble:!1,titleText:"!",subtitleText:"We're online."}),styleProps:Object.assign({},defaultChatButtonProps.styleProps,{notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{backgroundColor:"#d53434"})})},ChatButtonRTL=Template.bind({});ChatButtonRTL.args=chatButtonRTLProps;var chatButtonSample1Props={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{dir:"rtl",unreadMessageCount:"1000",hideNotificationBubble:!1,hideChatIcon:!1,hideChatSubtitle:!0,titleText:"CHAT NOW !!!"}),styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderRadius:"0px 0px 0px 0px",width:"360px",backgroundColor:"#b9f73a",selectors:{":hover":{backgroundColor:"black"}}}),iconStyleProps:Object.assign({},defaultChatButtonProps.styleProps.iconStyleProps,{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CustomChatIconBase64+")",borderRadius:"unset",backgroundColor:"#b9f73a"}),notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{backgroundColor:"#d53434"}),textContainerStyleProps:Object.assign({},defaultChatButtonProps.styleProps.textContainerStyleProps),titleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.titleStyleProps,{width:"280px",fontSize:"40px",color:"#ff0000",height:"32px",lineHeight:"14px"})}},ChatButtonSample1=Template.bind({});ChatButtonSample1.args=chatButtonSample1Props;var chatButtonSample2Props={controlProps:Object.assign({},defaultChatButtonProps.controlProps,{hideChatTextContainer:!0,hideNotificationBubble:!1,unreadMessageCount:"1000"}),styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderStyle:"",boxShadow:"",width:"100px",height:"100px",backgroundColor:""}),iconStyleProps:Object.assign({},defaultChatButtonProps.styleProps.iconStyleProps,{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CustomChatIconBase64+")",left:"",borderRadius:"unset",backgroundColor:"",backgroundSize:"100% 100%",width:"100px",height:"100px"}),notificationBubbleStyleProps:Object.assign({},defaultChatButtonProps.styleProps.notificationBubbleStyleProps,{left:"60px",backgroundColor:"#d53434"})}},ChatButtonSample2=Template.bind({});ChatButtonSample2.args=chatButtonSample2Props;var chatButtonSample3Props={componentOverrides:{title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{color:"#8A2E2E",fontSize:"12px",fontWeight:"bold",margin:"0px 5px 0px 5px"},dir:"ltr",children:"Initiate new Chat."}),subtitle:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{color:"black",fontSize:"8px",margin:"0px 5px 0px 5px"},dir:"ltr",children:"Click Here!"})),iconContainer:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{})},styleProps:{generalStyleProps:Object.assign({},defaultChatButtonProps.styleProps.generalStyleProps,{borderStyle:"",boxShadow:"",width:"100px",height:"100px",backgroundColor:""})}},ChatButtonSample3=Template.bind({});ChatButtonSample3.args=chatButtonSample3Props,ChatButtonDefault.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonDefault.parameters),ChatButtonRTL.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonRTL.parameters),ChatButtonSample1.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample1.parameters),ChatButtonSample2.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample2.parameters),ChatButtonSample3.parameters=Object.assign({storySource:{source:"(args) => <ChatButton {...args}></ChatButton>"}},ChatButtonSample3.parameters)},"./stories/component-stories/ConfirmationPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneDefault",(function(){return ConfirmationPaneDefault})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneRTL",(function(){return ConfirmationPaneRTL})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample1",(function(){return ConfirmationPaneSample1})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample2",(function(){return ConfirmationPaneSample2})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample3",(function(){return ConfirmationPaneSample3})),__webpack_require__.d(__webpack_exports__,"ConfirmationPaneSample4",(function(){return ConfirmationPaneSample4}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/react/index.js");var _storybook_client_api__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@storybook/addons/dist/esm/hooks.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Stateless Components/Confirmation Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane};var ConfirmationPaneTemplate=function ConfirmationPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane,Object.assign({},args))};ConfirmationPaneTemplate.displayName="ConfirmationPaneTemplate";var defaultConfirmationPaneProps={controlProps:{id:"lcw-components-confirmation-pane",dir:"ltr",hideConfirmationPane:!1,hideTitle:!1,titleText:"Close chat",hideSubtitle:!1,subtitleText:"Do you really want to close this chat?",hideConfirmButton:!1,confirmButtonText:"Close",confirmButtonAriaLabel:"Close Chat",hideCancelButton:!1,cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel. Return to Chat",onConfirm:function onConfirm(){alert("on confirm")},onCancel:function onCancel(){alert("on cancel")}},styleProps:{generalStyleProps:{backgroundColor:"white",borderRadius:"2px",color:"black",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",height:"160px",padding:"10px 20px",width:"262px",position:"absolute",justifyContent:"center",alignItems:"center",display:"flex",flexFlow:"column",zIndex:"9999"},titleStyleProps:{color:"#323130",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"16px",fontWeight:"500",margin:"10px 0 0 0",width:"100%",textAlign:"center"},subtitleStyleProps:{color:"#605e5c",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"400",margin:"14px 0px",width:"100%",textAlign:"center"},buttonGroupStyleProps:{display:"flex",flexFlow:"row",justifyContent:"center",alignItems:"center",gap:"10px"},confirmButtonStyleProps:{backgroundColor:"rgba(9,72,159,1)",color:"white",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"500",height:"32px",width:"80px"},cancelButtonStyleProps:{backgroundColor:"white",fontFamily:"Segoe UI, Arial, sans-serif",fontSize:"14px",fontWeight:"500",height:"32px",width:"80px"}}},ConfirmationPaneDefault=ConfirmationPaneTemplate.bind({});ConfirmationPaneDefault.args=defaultConfirmationPaneProps;var ConfirmationPaneRTL=ConfirmationPaneTemplate.bind({});ConfirmationPaneRTL.args={controlProps:{dir:"rtl"}};var ConfirmationPaneSample1=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample1.args={controlProps:{id:"oc-lcw-confirmationpane-sample1",titleText:"Big Circle",subtitleText:"This is a big, big circle.",confirmButtonText:"Green",cancelButtonText:"Red"},styleProps:{generalStyleProps:{backgroundColor:"lightgrey",borderColor:"black",borderRadius:"50%",borderStyle:"solid",borderWidth:"2px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",color:"blue",fontFamily:"Times New Roman",fontSize:"10px",fontWeight:"300",height:"300px",margin:"",padding:"60px",width:"300px"},titleStyleProps:{fontFamily:"Times New Roman",fontSize:"30px",fontWeight:"700",borderStyle:"solid",borderWidth:"0 0 3px 0",borderColor:"black"},subtitleStyleProps:{fontSize:"16px",fontWeight:"400",color:"black",fontFamily:"Arial",margin:"30px 0 30px"},confirmButtonStyleProps:{backgroundColor:"green",borderRadius:"50%",height:"70px",margin:"0px 10px 0px 0px",width:"70px",color:"white",lineHeight:"70px"},confirmButtonHoveredStyleProps:{backgroundColor:"green",color:"white"},cancelButtonStyleProps:{backgroundColor:"red",borderRadius:"50%",height:"70px",width:"70px",color:"white",lineHeight:"70px"},cancelButtonHoveredStyleProps:{backgroundColor:"red",color:"white"}}};var ConfirmationPaneSample2=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample2.args={controlProps:{id:"oc-lcw-confirmationpane-sample2",titleText:"Only One Option",hideSubtitle:!0,hideCancelButton:!0,confirmButtonText:"The Only Button"},styleProps:{generalStyleProps:{backgroundColor:"white",borderColor:"grey",borderRadius:"2px",borderStyle:"solid",borderWidth:"1px",color:"blue",fontSize:"10px",fontWeight:"300",height:"130px",margin:"",padding:"10px",width:"150px",justifyContent:"start",alignItems:"start"},titleStyleProps:{fontSize:"14px",fontWeight:"500",borderStyle:"solid",borderWidth:"1px",borderColor:"black",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",width:"100px",textAlign:"end"},confirmButtonStyleProps:{backgroundColor:"black",height:"40px",margin:"",width:"100px",color:"white",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",textAlign:"end",padding:"0"},confirmButtonHoveredStyleProps:{backgroundColor:"black",color:"white"}}};var confirmationPaneSample3Props={controlProps:{id:"oc-lcw-confirmationpane-sample3",titleText:"COLUMN LAYOUT",subtitleText:"Try the buttons below",confirmButtonText:"Row layout",cancelButtonText:"Column layout"},styleProps:{generalStyleProps:{backgroundColor:"lightblue",color:"black",fontSize:"14px",fontWeight:"300",height:"250px",margin:"",padding:"0px",width:"150px",justifyContent:"center",alignItems:"center",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",flexFlow:"column"},titleStyleProps:{fontSize:"16px",fontWeight:"600",width:"100px"},subtitleStyleProps:{width:"100px"},buttonGroupStyleProps:{flexFlow:"column"},confirmButtonStyleProps:{backgroundColor:"white",height:"20px",width:"110px",color:"black",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",padding:"0"},confirmButtonHoveredStyleProps:{backgroundColor:"white",color:"black"},cancelButtonStyleProps:{backgroundColor:"white",height:"20px",margin:"",width:"110px",color:"black",lineHeight:"20px",boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",MozBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",WebkitBoxShadow:"0px 0px 2px rgba(0, 0, 0, 0.16), 0px 4px 8px rgba(0, 0, 0, 0.12)",padding:"0"},cancelButtonHoveredStyleProps:{backgroundColor:"white",color:"black"}}},ConfirmationPaneSample3=function ConfirmationPaneSample3(args){var _useArgs2=_slicedToArray(Object(_storybook_client_api__WEBPACK_IMPORTED_MODULE_14__.c)(),2),updateArgs=(_useArgs2[0],_useArgs2[1]);return args.controlProps.onConfirm=function switchToRowLayout(){updateArgs(Object.assign({},ConfirmationPaneSample3.args,{controlProps:Object.assign({},ConfirmationPaneSample3.args.controlProps,{titleText:"Row Layout"}),styleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps,{generalStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.generalStyleProps,{flexFlow:"row",buttonFlexDirection:"row",height:"100px",width:"500px"}),titleStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.titleStyleProps,{width:"80px"}),subtitleStyleProps:Object.assign({},ConfirmationPaneSample3.args.styleProps.subtitleStyleProps,{width:"80px"}),buttonGroupStyleProps:{flexFlow:"row"}})}))},args.controlProps.onCancel=function switchToColumnLayout(){updateArgs(confirmationPaneSample3Props)},Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.ConfirmationPane,Object.assign({},args))};ConfirmationPaneSample3.displayName="ConfirmationPaneSample3",ConfirmationPaneSample3.args=confirmationPaneSample3Props;var confirmationPaneSample4Props={componentOverrides:{title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("h2",{children:"Hello world"}),subtitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("input",{type:"text",placeholder:"This is a subtitle",style:{marginBottom:"10px"}}),confirmButton:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_15__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("button",{style:{color:"pink"},children:"Yes"})),cancelButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)("button",{style:{color:"yellow"},children:"No"})}},ConfirmationPaneSample4=ConfirmationPaneTemplate.bind({});ConfirmationPaneSample4.args=confirmationPaneSample4Props,ConfirmationPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneDefault.parameters),ConfirmationPaneRTL.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneRTL.parameters),ConfirmationPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample1.parameters),ConfirmationPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample2.parameters),ConfirmationPaneSample3.parameters=Object.assign({storySource:{source:'(args) => {\n    \n    const [_, updateArgs] = useArgs();\n\n    const switchToColumnLayout = () => {\n        updateArgs(confirmationPaneSample3Props);\n    };\n    \n    const switchToRowLayout = () => {\n        updateArgs({\n            ...ConfirmationPaneSample3.args,\n            controlProps: {\n                ...ConfirmationPaneSample3.args.controlProps,\n                titleText: "Row Layout"\n            },\n            styleProps: {\n                ...ConfirmationPaneSample3.args.styleProps,\n                generalStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.generalStyleProps, {\n                    flexFlow: "row",\n                    buttonFlexDirection: "row",\n                    height: "100px",\n                    width: "500px"\n                }),\n                titleStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.titleStyleProps, {\n                    width: "80px"\n                }),\n                subtitleStyleProps: Object.assign({}, ConfirmationPaneSample3.args.styleProps.subtitleStyleProps, {\n                    width: "80px"\n                }),\n                buttonGroupStyleProps: {\n                    flexFlow: "row"\n                }\n            }\n        });\n    };\n\n    args.controlProps.onConfirm = switchToRowLayout;\n    args.controlProps.onCancel = switchToColumnLayout;\n    return <ConfirmationPane {...args} ></ConfirmationPane>;\n}'}},ConfirmationPaneSample3.parameters),ConfirmationPaneSample4.parameters=Object.assign({storySource:{source:"(args) => <ConfirmationPane {...args}></ConfirmationPane>"}},ConfirmationPaneSample4.parameters)},"./stories/component-stories/CurrentCall.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultVideoCall",(function(){return DefaultVideoCall})),__webpack_require__.d(__webpack_exports__,"DefaultAudioCall",(function(){return DefaultAudioCall})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"componentOverrides",(function(){return componentOverrides})),__webpack_require__.d(__webpack_exports__,"CustomizedCurrentCall",(function(){return CustomizedCurrentCall}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./stories/component-stories/common/commandbutton/CommandButton.tsx")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Calling Container/Current Call",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CurrentCall};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CurrentCall,Object.assign({},args))};Template.displayName="Template";var defaultCurrentCallProps={controlProps:{id:"currentCall-container",nonActionIds:{currentCallActionGroupId:"currentCall-actionicons",currentCallFooterId:"currentCall-footer",remoteVideoTileId:"remoteVideo",selfVideoTileId:"selfVideo",videoTileGroupId:"currentCall-body"},hideMicButton:!1,hideVideoButton:!1,hideEndCallButton:!1,videoCallDisabled:!1,hideCallTimer:!1,onEndCallClick:function onEndCallClick(){alert("end call clicked")},onMicCallClick:function onMicCallClick(){alert("mute clicked")},onVideoOffClick:function onVideoOffClick(){alert("video off clicked")},middleGroup:{gap:1,children:[]},leftGroup:{gap:1,children:[]},rightGroup:{gap:1,children:[]},endCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"End Call",iconName:"DeclineCall",iconSize:18},micButtonProps:{id:"toggleAudio",type:"icon",ariaLabel:"Mute",toggleAriaLabel:"Unmute",iconName:"Microphone",toggleIconName:"MicOff2",iconSize:18},videoButtonProps:{id:"toggleVideo",type:"icon",ariaLabel:"Turn on camera",toggleAriaLabel:"Turn off camera",iconName:"Video",toggleIconName:"VideoOff",iconSize:18},callTimerProps:{id:"oc-lcw-CurrentCall-timer",showHours:!1,timerStyles:{color:"white",textAlign:"center",backgroundColor:"#3d3c3c",height:"45px",width:"50px",lineHeight:"40px",borderRadius:"2px",margin:"1px"}}},styleProps:{generalStyleProps:{background:"#292828",minHeight:"55px",width:"100%",borderRadius:"0 0 3px 3px"},micButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#3d3c3c",height:"45px",width:"50px",margin:"1px"},micButtonHoverStyleProps:{filter:"brightness(0.8)"},videoOffButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#3d3c3c",height:"45px",width:"50px",margin:"1px"},videoOffButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonStyleProps:{borderRadius:"2px",color:"#FFFFFF",backgroundColor:"#DC0000",lineHeight:"50px",height:"45px",width:"50px",fontSize:"18px"},currentCallTimerStyleProps:{borderRadius:"2px",margin:"1px",color:"#FFFFFF",paddingTop:"18px",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif",backgroundColor:"darkgrey",height:"45px",width:"50px",textAlign:"center"},videoTileStyleProps:{width:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},videoTileStyleWithVideoProps:{minHeight:"180px",width:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},remoteVideoStyleProps:{height:"100%",width:"100%",overflow:"hidden"},selfVideoStyleProps:{position:"absolute",right:"8px",bottom:"8px",width:"80px",minHeight:"50px",overflow:"hidden",borderRadius:"2px"},selfVideoMaximizeStyleProps:{position:"relative",width:"100%",minHeight:"50px",overflow:"hidden",borderRadius:"2px"},itemFocusStyleProps:{outline:"2px solid #fff"}}},customizedCurrentCallStyleProps={generalStyleProps:{background:"lightgrey",minHeight:"80px",borderRadius:"0 0 3px 3px"},micButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"double",borderColor:"blue",color:"blue",backgroundColor:"white",lineHeight:"50px",height:"50px",width:"50px",margin:"1px"},micButtonHoverStyleProps:{filter:"brightness(0.8)"},videoOffButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"blue",color:"blue",backgroundColor:"white",height:"50px",width:"50px",margin:"1px"},videoOffButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonHoverStyleProps:{filter:"brightness(0.8)"},endCallButtonStyleProps:{borderRadius:"50%",borderWidth:"1px",borderStyle:"solid",borderColor:"red",color:"white",backgroundColor:"red",height:"50px",width:"50px",margin:"1px"},currentCallTimerStyleProps:{borderRadius:"2px",margin:"1px",color:"white",paddingTop:"18px",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif",backgroundColor:"transparent",height:"50px",width:"55px",textAlign:"center"},videoTileStyleProps:{minHeight:"180px",height:"300px",backgroundColor:"transparent",width:"100%",maxWidth:"100%",marginLeft:"auto",marginRight:"auto",position:"relative"},remoteVideoStyleProps:{height:"100%",width:"100%",overflow:"hidden",backgroundColor:"#8ab2f2"},selfVideoStyleProps:{position:"absolute",left:"8px",bottom:"8px",width:"80px",height:"60px",overflow:"hidden",borderRadius:"2px",backgroundColor:"aliceblue"},itemFocusStyleProps:{border:"2px dotted blue"}},DefaultVideoCall=Template.bind({});DefaultVideoCall.args=defaultCurrentCallProps;var defaultAudioCallProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{videoCallDisabled:!0}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps)},DefaultAudioCall=Template.bind({});DefaultAudioCall.args=defaultAudioCallProps;var defaultRtl={controlProps:{id:"currentCall-container",nonActionIds:{currentCallActionGroupId:"currentCall-actionicons",currentCallFooterId:"currentCall-footer",remoteVideoTileId:"remoteVideo",selfVideoTileId:"selfVideo",videoTileGroupId:"currentCall-body"},hideMicButton:!1,hideVideoButton:!1,hideEndCallButton:!1,videoCallDisabled:!1,hideCallTimer:!1,onEndCallClick:function onEndCallClick(){alert("end call clicked")},onMicCallClick:function onMicCallClick(){alert("mute clicked")},onVideoOffClick:function onVideoOffClick(){alert("video off clicked")},middleGroup:{gap:1,children:[]},leftGroup:{gap:1,children:[]},rightGroup:{gap:1,children:[]},dir:"rtl",endCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"End Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallRejectButtonBase64,styles:{image:{height:"18px",width:"18px"}}}},micButtonProps:{id:"toggleAudio",type:"icon",ariaLabel:"Mute",toggleAriaLabel:"Unmute",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VoiceOnIconBase64,styles:{image:{height:"16px",width:"16px"}}},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VoiceOffIconBase64,styles:{image:{height:"16px",width:"16px"}}},iconSize:18},videoButtonProps:{id:"toggleVideo",type:"icon",ariaLabel:"Turn camera on",toggleAriaLabel:"Turn camera off",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoOnIconBase64,styles:{image:{height:"16px",width:"16px"}}},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoOffIconBase64,styles:{image:{height:"16px",width:"16px"}}},iconSize:18},callTimerProps:{id:"oc-lcw-CurrentCall-timer"}},styleProps:Object.assign({},defaultCurrentCallProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var currentCallSpeakerButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_4__.a,{iconName:"volume3",type:"icon",styles:customizedCurrentCallStyleProps.micButtonStyleProps}),componentOverridesProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{hideCallTimer:!0,hideVideoButton:!0,hideMicButton:!0,selfVideoDisabled:!1}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps,{generalStyleProps:{background:"#C8C8C8",minHeight:"60px",width:"100%",borderRadius:"4px 4px 4px 4px"},selfVideoStyleProps:{position:"absolute",right:"8px",bottom:"8px",width:"80px",minHeight:"50px",overflow:"hidden",borderRadius:"2px",backgroundColor:"blue"}})},componentOverrides=Template.bind({});componentOverrides.args=componentOverridesProps;var customCallTimerProps=Object.assign({},defaultCurrentCallProps.controlProps.callTimerProps,{showHours:!1}),customizedMiddleGroup=Object.assign({},defaultCurrentCallProps.controlProps.middleGroup,{gap:30,children:[currentCallSpeakerButton]}),customizedProps={controlProps:Object.assign({},defaultCurrentCallProps.controlProps,{hideCallTimer:!0,callTimerProps:customCallTimerProps,middleGroup:customizedMiddleGroup}),styleProps:Object.assign({},defaultCurrentCallProps.styleProps)};customizedProps.styleProps=customizedCurrentCallStyleProps,customizedProps.controlProps.callTimerProps.timerStyles={color:"blue",textAlign:"center",backgroundColor:"transparent",height:"50px",width:"55px",lineHeight:"40px",borderRadius:"2px"};var CustomizedCurrentCall=Template.bind({});CustomizedCurrentCall.args=customizedProps,DefaultVideoCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},DefaultVideoCall.parameters),DefaultAudioCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},DefaultAudioCall.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},Rtl.parameters),componentOverrides.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},componentOverrides.parameters),CustomizedCurrentCall.parameters=Object.assign({storySource:{source:"(args) => <CurrentCall {...args}></CurrentCall>"}},CustomizedCurrentCall.parameters)},"./stories/component-stories/Footer.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"WithComponentOverrides",(function(){return WithComponentOverrides})),__webpack_require__.d(__webpack_exports__,"Customized",(function(){return Customized}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/PrimaryButton/PrimaryButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/DefaultButton/DefaultButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/IconButton/IconButton.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Footer",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Footer};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Footer,Object.assign({},args))};Template.displayName="Template";var defaultFooterProps={controlProps:{id:"lcw-components-footer",hideDownloadTranscriptButton:!1,hideEmailTranscriptButton:!1,hideAudioNotificationButton:!1,onDownloadTranscriptClick:function onDownloadTranscriptClick(){alert("download transcript clicked")},onEmailTranscriptClick:function onEmailTranscriptClick(){alert("email transcript clicked")},onAudioNotificationClick:function onAudioNotificationClick(){alert("audio notification clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},downloadTranscriptButtonProps:{id:"oc-lcw-footer-downloadtranscript-button",type:"icon",iconName:"Download",ariaLabel:"Download chat transcript"},emailTranscriptButtonProps:{id:"oc-lcw-footer-emailtranscript-button",type:"icon",iconName:"Mail",ariaLabel:"Email Transcript"},audioNotificationButtonProps:{id:"oc-lcw-footer-audionotification-button",ariaLabel:"Turn sound off",toggleAriaLabel:"Turn sound on",iconName:"Volume3",toggleIconName:"Volume0"}},styleProps:{generalStyleProps:{background:"#fff",borderRadius:"0 0 4px 4px",minHeight:"25px",width:"100%",minWidth:"250px",padding:"0 10px 5px 10px"},downloadTranscriptButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},downloadTranscriptButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},emailTranscriptButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},emailTranscriptButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},audioNotificationButtonStyleProps:{color:"blue",fontSize:16,height:"25px",lineHeight:"25px",width:"25px"},audioNotificationButtonHoverStyleProps:{filter:"brightness(0.8)",backgroundColor:"#C8C8C8"},footerItemFocusStyleProps:{border:"2px dotted #000"}}},iconButtonStyles={root:{margin:0}};var defaultFooterOverridesProps=Object.assign({},defaultFooterProps,{componentOverrides:{DownloadTranscriptButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{text:"Download",onClick:function _downloadClicked(){alert("download clicked")},allowDisabledFocus:!0,styles:iconButtonStyles}),EmailTranscriptButton:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{text:"Email",onClick:function _emailClicked(){alert("email clicked")},allowDisabledFocus:!0,styles:iconButtonStyles})}}),Default=Template.bind({});Default.args=defaultFooterProps;var defaultRtl={controlProps:Object.assign({},defaultFooterProps.controlProps,{dir:"rtl",hideDownloadTranscriptButton:!0}),styleProps:Object.assign({},defaultFooterProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var WithComponentOverrides=Template.bind({});WithComponentOverrides.args=defaultFooterOverridesProps;var buttonStyleProps={root:{color:"blue",height:25,width:25}},calendarIconButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Calendar"},styles:buttonStyleProps,title:"Calendar"},"calendarIconButton"),emojiIconButton=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Emoji2"},styles:buttonStyleProps,title:"Sentiment"},"emojiIconButton"),customizedFooterProp={controlProps:{id:"oc-lcw-footer",hideDownloadTranscriptButton:!1,hideEmailTranscriptButton:!1,hideAudioNotificationButton:!1,onDownloadTranscriptClick:function onDownloadTranscriptClick(){alert("download transcript clicked")},onEmailTranscriptClick:function onEmailTranscriptClick(){alert("email transcript clicked")},onAudioNotificationClick:function onAudioNotificationClick(){alert("audio notification clicked")},leftGroup:{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{iconProps:{iconName:"Upload"},styles:buttonStyleProps,title:"Upload"},"uploadIconButton")]},middleGroup:{children:[calendarIconButton]},rightGroup:{children:[emojiIconButton]},downloadTranscriptButtonProps:{id:"oc-lcw-footer-downloadtranscript-button",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.TranscriptDownloadIconBase64},ariaLabel:"Download chat transcript"},emailTranscriptButtonProps:{id:"oc-lcw-footer-emailtranscript-button",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.TranscriptEmailIconBase64},ariaLabel:"Email Transcript"},audioNotificationButtonProps:{id:"oc-lcw-footer-audionotification-button",ariaLabel:"Turn sound off",toggleAriaLabel:"Turn sound on",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AudioNotificationOnIconBase64},imageToggleIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AudioNotificationOffIconBase64}}},styleProps:Object.assign({},defaultFooterProps.styleProps)},Customized=Template.bind({});Customized.args=customizedFooterProp,Default.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Default.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Rtl.parameters),WithComponentOverrides.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},WithComponentOverrides.parameters),Customized.parameters=Object.assign({storySource:{source:"(args) => <Footer {...args}></Footer>"}},Customized.parameters)},"./stories/component-stories/Header.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"CustomizedHeader",(function(){return CustomizedHeader})),__webpack_require__.d(__webpack_exports__,"CustomizedHeaderRtl",(function(){return CustomizedHeaderRtl}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/style-utilities/lib/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Icon/FontIcon.js"),_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./stories/component-stories/common/commandbutton/CommandButton.tsx"),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Header",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Header};var defaultHeaderProps={controlProps:{id:"oc-lcw-header",hideIcon:!1,hideTitle:!1,hideCloseButton:!1,hideMinimizeButton:!1,onMinimizeClick:function onMinimizeClick(){alert("minimize clicked")},onCloseClick:function onCloseClick(){alert("close clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},minimizeButtonProps:{id:"oc-lcw-header-minimize-button",type:"icon",iconName:"ChromeMinimize"},closeButtonProps:{id:"oc-lcw-header-close-button",type:"icon",iconName:"ChromeClose"},headerIconProps:{id:"oc-lcw-header-icon",src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ModernChatIconBase64,alt:"Chat Icon"},headerTitleProps:{id:"oc-lcw-header-title",text:"Let's Chat"}},styleProps:{generalStyleProps:{background:"#315fa2",borderRadius:"4px 4px 0 0",padding:"5px",minHeight:"50px",width:"100%",minWidth:"250px"},iconStyleProps:{height:"30px",width:"30px",margin:"5px 10px"},titleStyleProps:{fontSize:16,fontFamily:"Segoe UI, Arial, sans-serif",fontWeight:"450",color:"white",padding:"3px 0"},minimizeButtonStyleProps:{color:"white",margin:"5px 0",fontSize:"12px"},closeButtonStyleProps:{color:"white",margin:"5px 0",fontSize:"12px"},closeButtonHoverStyleProps:{filter:"brightness(0.8)"},minimizeButtonHoverStyleProps:{filter:"brightness(0.8)"},headerItemFocusStyleProps:{border:"2px dotted #000"}}},customHeaderProps={controlProps:{id:"oc-lcw-header",hideIcon:!1,hideTitle:!1,hideCloseButton:!1,hideMinimizeButton:!1,onMinimizeClick:function onMinimizeClick(){alert("minimize clicked")},onCloseClick:function onCloseClick(){alert("close clicked")},middleGroup:{children:[]},leftGroup:{children:[]},rightGroup:{children:[]},minimizeButtonProps:{id:"oc-lcw-header-minimizebutton",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.MinimizeChatButtonIconBase64,styles:{image:{height:"16px",width:"16px"}}}},closeButtonProps:{id:"oc-lcw-header-closebutton",type:"icon",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CloseChatButtonIconBase64,styles:{image:{height:"16px",width:"16px"}}}},headerIconProps:{id:"oc-lcw-header-icon",src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ModernChatIconBase64,alt:"Chat Icon"},headerTitleProps:{id:"oc-lcw-header-title",text:"Let's Chat"}},styleProps:defaultHeaderProps.styleProps},Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.Header,Object.assign({},args))};Template.displayName="Template";var Default=Template.bind({});Default.args=defaultHeaderProps;var customIconClass=Object(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.eb)({fontSize:40,margin:"0 0px",color:"yellow"}),stackStyles={root:Object(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.eb)({background:"blue",border:"1px solid blue",borderRadius:"50%",padding:"10px",margin:"10px",textAlign:"center",height:"60px",width:"60px"})},customIcon=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{styles:stackStyles,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{"aria-label":"ChatBot",iconName:"ChatBot",className:customIconClass,id:"oc-lcw-header-icon"})},"customIcon"),maximizeHeaderButtonProps={id:"oc-lcw-header-maximizebutton",type:"icon",iconName:"FullScreen",ariaLabel:"Maximize",styles:{color:"White"},onClick:function onClick(){alert("maximize clicked")}},maximizeButton=Object(react__WEBPACK_IMPORTED_MODULE_7__.createElement)(_common_commandbutton_CommandButton__WEBPACK_IMPORTED_MODULE_6__.a,Object.assign({},maximizeHeaderButtonProps,{key:"maximizeButton"})),advancedHeaderProps={controlProps:Object.assign({},defaultHeaderProps.controlProps,{hideIcon:!0,leftGroup:{children:[customIcon]},rightGroup:{children:[maximizeButton]},headerTitleProps:{id:"oc-lcw-headertitle",text:"hi, there!"}}),styleProps:{generalStyleProps:{background:"linear-gradient(0deg, rgba(34,193,195,1) 0%, rgba(253,187,45,1) 100%)",border:"1px solid green",borderRadius:"5px 5px 0 0",padding:"5px",resize:"vertical",overflowY:"hidden",maxHeight:"200px",MozBoxShadow:"0px 3px 4px #de1dde",WebkitBoxShadow:"0px 3px 4px #de1dde",boxShadow:"0px 3px 4px #de1dde",minHeight:"60px",width:"100%",minWidth:"250px"},iconStyleProps:{height:"50px",width:"50px"},titleStyleProps:{fontSize:18,fontFamily:"Segoe UI, Arial, sans-serif",fontWeight:600,color:"white"},minimizeButtonStyleProps:{color:"white"},closeButtonStyleProps:{color:"white"},headerItemFocusStyleProps:{border:"2px dotted #000"}}},CustomizedHeader=Template.bind({});CustomizedHeader.args=advancedHeaderProps;var customHeaderRtl={controlProps:Object.assign({},customHeaderProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},customHeaderProps.styleProps)},CustomizedHeaderRtl=Template.bind({});CustomizedHeaderRtl.args=customHeaderRtl,Default.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},Default.parameters),CustomizedHeader.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},CustomizedHeader.parameters),CustomizedHeaderRtl.parameters=Object.assign({storySource:{source:"(args) => <Header {...args}></Header>"}},CustomizedHeaderRtl.parameters)},"./stories/component-stories/IncomingCall.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Rtl",(function(){return Rtl})),__webpack_require__.d(__webpack_exports__,"ComponentOverrides",(function(){return ComponentOverrides}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Stack/Stack.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Label/Label.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Calling Container/Incoming Call",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.IncomingCall};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.IncomingCall,Object.assign({},args))};Template.displayName="Template";var defaultIncomingCallProps={controlProps:{id:"oc-lcw-incomingcall",dir:"ltr",ariaLabel:"Incoming call area",hideAudioCall:!1,hideVideoCall:!1,hideDeclineCall:!1,hideIncomingCallTitle:!1,onDeclineCallClick:function onDeclineCallClick(){alert("download transcript clicked")},onAudioCallClick:function onAudioCallClick(){alert("email transcript clicked")},onVideoCallClick:function onVideoCallClick(){alert("audio notification clicked")},middleGroup:{gap:5,children:[]},leftGroup:{gap:5,children:[]},rightGroup:{gap:5,children:[]},declineCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"Reject call",iconName:"DeclineCall",iconSize:20},audioCallButtonProps:{id:"callAcceptButton",type:"icon",ariaLabel:"Accept voice call",iconName:"IncomingCall",iconSize:20},videoCallButtonProps:{id:"videoCallAcceptButton",type:"icon",ariaLabel:"Accept video Call",iconName:"Video",iconSize:20},incomingCallTitle:{id:"incomingCallMessage",text:"Incoming Call"}},styleProps:{generalStyleProps:{background:"#000",padding:"5px",height:"60px"},audioCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#008000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18},audioCallButtonHoverStyleProps:{filter:"brightness(0.8)"},videoCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#008000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18},videoCallButtonHoverStyleProps:{filter:"brightness(0.8)"},declineCallButtonHoverStyleProps:{filter:"brightness(0.8)",border:"1px solid #000"},declineCallButtonStyleProps:{borderRadius:"50%",color:"#FFFFFF",backgroundColor:"#DC0000",lineHeight:"40px",height:"40px",width:"40px",fontSize:18,marginLeft:"5px"},incomingCallTitleStyleProps:{margin:"0 5px",color:"#FFFFFF",fontSize:12,fontFamily:"Segoe UI, Arial, sans-serif"},itemFocusStyleProps:{outline:"2px solid #FFFFFF"}}},Default=Template.bind({});Default.args=defaultIncomingCallProps;var defaultRtl={controlProps:{id:"incomingCallPopup",ariaLabel:"Incoming call area",hideAudioCall:!1,hideVideoCall:!1,hideDeclineCall:!1,hideIncomingCallTitle:!1,onDeclineCallClick:function onDeclineCallClick(){alert("download transcript clicked")},onAudioCallClick:function onAudioCallClick(){alert("email transcript clicked")},onVideoCallClick:function onVideoCallClick(){alert("audio notification clicked")},middleGroup:{gap:5,children:[]},leftGroup:{gap:5,children:[]},rightGroup:{gap:5,children:[]},dir:"rtl",declineCallButtonProps:{id:"callRejectButton",type:"icon",ariaLabel:"Decline Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallRejectButtonBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},audioCallButtonProps:{id:"callAcceptButton",type:"icon",ariaLabel:"Audio Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CallAcceptButtonBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},videoCallButtonProps:{id:"videoCallAcceptButton",type:"icon",ariaLabel:"Video Call",imageIconProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.VideoCallAcceptButtonIconBase64,styles:{image:{height:"18px",width:"18px"}}},iconSize:20},incomingCallTitle:{id:"incomingCallMessage",text:"Incoming Call"}},styleProps:Object.assign({},defaultIncomingCallProps.styleProps)},Rtl=Template.bind({});Rtl.args=defaultRtl;var componentOverrideProps={incomingCallTitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{horizontal:!0,children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_4__.a,{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.AgentIconBase64,styles:{root:{height:"50px",width:"50px"},image:{height:"50px",width:"50px"}}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a,{verticalAlign:"center",horizontalAlign:"baseline",styles:{root:{paddingLeft:"10px"}},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{styles:{root:{color:"white",fontSize:13,fontWeight:"bold",padding:0}},children:"Omnichannel Agent 007"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_5__.a,{styles:{root:{color:"white",fontSize:11,padding:0}},children:"Incoming call"})]})]})},componentOverridesProps={componentOverrides:Object.assign({},componentOverrideProps),controlProps:Object.assign({},defaultIncomingCallProps.controlProps,{hideVideoCall:!0}),styleProps:Object.assign({},defaultIncomingCallProps.styleProps,{generalStyleProps:{background:"#C8C8C8",padding:"5px",minHeight:"60px",width:"50%",borderRadius:"4px 4px 4px 4px"}})},ComponentOverrides=Template.bind({});ComponentOverrides.args=componentOverridesProps,Default.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},Default.parameters),Rtl.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},Rtl.parameters),ComponentOverrides.parameters=Object.assign({storySource:{source:"(args) => <IncomingCall {...args}></IncomingCall>"}},ComponentOverrides.parameters)},"./stories/component-stories/InputValidationPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DefaultEmailTranscript",(function(){return DefaultEmailTranscript})),__webpack_require__.d(__webpack_exports__,"DefaultRtlEmailTranscript",(function(){return DefaultRtlEmailTranscript})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),_src_common_Constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/common/Constants.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/Input Validation Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.InputValidationPane};var InputValidationPaneTemplate=function InputValidationPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.InputValidationPane,Object.assign({},args))};InputValidationPaneTemplate.displayName="InputValidationPaneTemplate";var defaultInputValidationPaneProps={controlProps:{id:"oclcw-emailTranscriptDialogContainer",dir:"ltr",hideInputValidationPane:!1,inputValidationPaneAriaLabel:"Email Chat Transcript Pane",hideTitle:!1,titleText:"Please provide e-mail address to send transcript",hideSubtitle:!1,subtitleText:"The transcript will be sent after the chat ends.",inputId:"oclcw-emailTranscriptDialogTextField",inputInitialText:"",hideInput:!1,inputAriaLabel:"Please provide e-mail address to send transcript. The transcript will be sent after the chat ends. Email address text area",inputWithErrorMessageBorderColor:"rgb(164, 38, 44)",invalidInputErrorMessageText:"Enter a valid email address.",isButtonGroupHorizontal:!0,hideSendButton:!1,enableSendButton:!1,sendButtonText:"Send",sendButtonAriaLabel:"Send",hideCancelButton:!1,cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel",onSend:function onSend(input){alert("on send")},onCancel:function onCancel(){alert("on cancel")},checkInput:function checkInput(input){return new RegExp(_src_common_Constants__WEBPACK_IMPORTED_MODULE_7__.t.EmailRegex).test(input)}},styleProps:{generalStyleProps:{backgroundColor:"#fff",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderColor:"rgba(138, 141, 145, .24)",borderTop:"solid",borderTopWidth:"1px",bottom:"0",left:"0",minHeight:"180px",padding:"10px",position:"absolute",width:"100%",zIndex:"9999"},headerGroupStyleProps:{marginBottom:"15px"},titleStyleProps:{color:"#323130",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"18px",fontWeight:"500",marginBottom:"5px"},subtitleStyleProps:{color:"#262626",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",lineHeight:"16px",marginBottom:"10px"},inputStyleProps:{boxSizing:"border-box",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"400",textIndent:"10px",width:"100%"},invalidInputErrorMessageStyleProps:{color:"#a4262c",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"12px",height:"16px,",lineHeight:"16px",marginTop:"4px"},buttonGroupStyleProps:{gap:"10px"},sendButtonStyleProps:{color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontWeight:"500",lineHeight:"19px",textOverflow:"ellipsis",whiteSpace:"nowrap"},cancelButtonStyleProps:{border:"solid",borderColor:"#e0e3e6",borderWidth:"2px",boxSizing:"border-box",color:"#000",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontWeight:"500",lineHeight:"19px",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},customReactNode=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("button",{style:{color:"rgb(255, 255, 255)",backgroundColor:"green",borderRadius:"30px",borderColor:"green",borderStyle:"solid",float:"left",height:"100px",margin:"10px",padding:"10px",width:"100px"},children:"This is a custom button"}),sampleTwoInputValidationPaneProps={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps),styleProps:{headerGroupStyleProps:{marginBottom:"0"},titleStyleProps:{backgroundColor:"yellow",borderRadius:"30px",height:"100px",margin:"10px",padding:"10px",width:"100px"},inputStyleProps:{margin:"10px",width:"300px"},sendButtonStyleProps:{backgroundColor:"purple",borderRadius:"30px",height:"100px",marginLeft:"10px",padding:"10px",width:"100px"},cancelButtonStyleProps:{backgroundColor:"red",borderRadius:"30px",height:"100px",marginLeft:"10px",padding:"10px",width:"100px"}},componentOverrides:{subtitle:customReactNode}},DefaultEmailTranscript=InputValidationPaneTemplate.bind({});DefaultEmailTranscript.args=defaultInputValidationPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps)},DefaultRtlEmailTranscript=InputValidationPaneTemplate.bind({});DefaultRtlEmailTranscript.args=defaultRtlProps;var sample1Props={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{isButtonGroupHorizontal:!1,enableSendButton:!0}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps)},Sample1=InputValidationPaneTemplate.bind({});Sample1.args=sample1Props;var Sample2=InputValidationPaneTemplate.bind({});Sample2.args=sampleTwoInputValidationPaneProps;var customReactNode1=Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_6__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{style:{backgroundColor:"purple",color:"white",fontSize:"18px",marginBottom:"10px"},children:"This is a custom div"})),customReactNode2=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{}),sample3Props={controlProps:Object.assign({},defaultInputValidationPaneProps.controlProps,{enableSendButton:!0}),styleProps:Object.assign({},defaultInputValidationPaneProps.styleProps),componentOverrides:Object.assign({},defaultInputValidationPaneProps.componentOverrides,{input:customReactNode1,invalidInputErrorMessage:customReactNode2})},Sample3=InputValidationPaneTemplate.bind({});Sample3.args=sample3Props,DefaultEmailTranscript.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},DefaultEmailTranscript.parameters),DefaultRtlEmailTranscript.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},DefaultRtlEmailTranscript.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <InputValidationPane {...args}></InputValidationPane>"}},Sample3.parameters)},"./stories/component-stories/LoadingPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LoadingPaneDefault",(function(){return LoadingPaneDefault})),__webpack_require__.d(__webpack_exports__,"LoadingPaneRTL",(function(){return LoadingPaneRTL})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample2",(function(){return LoadingPaneSample2})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample3",(function(){return LoadingPaneSample3})),__webpack_require__.d(__webpack_exports__,"LoadingPaneSample4",(function(){return LoadingPaneSample4}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _fluentui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Image/Image.types.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Spinner/Spinner.types.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Loading Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingPane};var LoadingPaneTemplate=function LoadingPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingPane,Object.assign({},args))};LoadingPaneTemplate.displayName="LoadingPaneTemplate";var defaultLoadingPaneProps={controlProps:{id:"oc-lcw-loadingpane",dir:"auto",hideLoadingPane:!1,hideIcon:!1,hideTitle:!1,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"live chat support ...",hideSpinner:!1,hideSpinnerText:!1,spinnerText:"Loading ..."},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderWidth:"3px",borderStyle:"solid",backgroundColor:"#315fa2",borderColor:"#F1F1F1",position:"absolute",justifyContent:"center",alignItems:"center"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"14px",color:"#F1F1F1",margin:"0px 0px 0px 0px",textAlign:"center",display:"flex",order:2,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"bold",fontSize:"18px",color:"#F1F1F1",margin:"0px 0px 50px 10px",textAlign:"center",display:"flex",order:3,alignSelf:"auto"},iconStyleProps:{borderRadius:"50%",backgroundColor:"#F1F1F1",boxShadow:"0px 0px 0.5px 7px #3F75AB",width:"86px",height:"86px",margin:"0px 0px 20px 0px",display:"flex",order:1,alignSelf:"auto"},iconImageProps:{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.ModernChatIconBase64,imageFit:_fluentui_react__WEBPACK_IMPORTED_MODULE_2__.b.center,width:"86px",height:"86px",shouldFadeIn:!1,shouldStartVisible:!0},spinnerStyleProps:{width:"42px",height:"42px",margin:"0px 0px 0px 0px",display:"flex",order:4,alignSelf:"auto"},spinnerTextStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"9px",color:"#F1F1F1",margin:"0px 0px 0px 5px",textAlign:"center",order:5,alignSelf:"auto"}}},sampleOneLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample1",dir:"rtl"}),styleProps:Object.assign({},defaultLoadingPaneProps.styleProps)},sampleTwoLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample2",hideIcon:!0,hideTitle:!0,hideSubtitle:!0,hideSpinnerText:!0,spinnerSize:_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a.large}),styleProps:Object.assign({},defaultLoadingPaneProps.styleProps,{generalStyleProps:{borderStyle:"dotted",borderRadius:"50%",borderWidth:"5px",backgroundColor:"#767676",backgroundSize:"250px",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.ModernChatIconBase64+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderColor:"",boxShadow:"0px 0px 10px 5px #B2B2B2",width:"380px",height:"380px",position:"absolute",left:"1%",top:"2%",justifyContent:"center",alignItems:"left",flexFlow:"row wrap"},spinnerStyleProps:{backgroundColor:"black",borderRadius:"40%",backgroundSize:"50px",width:"50px",height:"50px",margin:"250px 0px 0px 0px",order:1,alignSelf:"center"}})},sampleThreeLoadingPaneProps={controlProps:Object.assign({},defaultLoadingPaneProps.controlProps,{id:"oc-lcw-loadingpane-sample3",hideIcon:!0,titleText:"Please Wait ...",subtitleText:"Loading Content",spinnerText:"Processing ...",spinnerSize:_fluentui_react__WEBPACK_IMPORTED_MODULE_3__.a.large}),styleProps:{generalStyleProps:{borderStyle:"solid",borderRadius:"50%",borderWidth:"5px",backgroundColor:"#336669",backgroundSize:"",borderColor:"",boxShadow:"0px 0px 10px 3px #B2B2B2",width:"300px",height:"400px",position:"absolute",left:"15%",top:"20%",justifyContent:"center",alignItems:"left",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Brush Script MT', cursive",fontWeight:"normal",fontSize:"17px",color:"#F1F1F1",width:"100px",height:"10px",margin:"0px 0px 30px 50px",textAlign:"center",order:1,alignSelf:"auto"},subtitleStyleProps:{fontFamily:"'Courier New', monospace",fontWeight:"bold",fontSize:"22px",color:"#F1F1F1",width:"200px",height:"10px",margin:"0px 0px 50px 0px",textAlign:"center",order:2,alignSelf:"center"},spinnerStyleProps:{borderRadius:"50%",backgroundSize:"80px",width:"80px",height:"80px",margin:"0px 0px 0px 0px",order:4,alignSelf:"center"},spinnerTextStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"9px",color:"#F1F1F1",width:"100px",height:"10px",margin:"0px 0px 0px 4px",textAlign:"center",order:5,alignSelf:"center"}}},LoadingPaneDefault=LoadingPaneTemplate.bind({});LoadingPaneDefault.args=defaultLoadingPaneProps;var LoadingPaneRTL=LoadingPaneTemplate.bind({});LoadingPaneRTL.args=sampleOneLoadingPaneProps;var LoadingPaneSample2=LoadingPaneTemplate.bind({});LoadingPaneSample2.args=sampleTwoLoadingPaneProps;var LoadingPaneSample3=LoadingPaneTemplate.bind({});LoadingPaneSample3.args=sampleThreeLoadingPaneProps;var loadingPaneSample4Props={componentOverrides:{icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LegacyChatIconBase64}),title:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h2",{children:"Custom Title"}),subtitle:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{style:{marginBottom:"10px"},children:"Custom Subtitle"})),spinner:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_4__.LoadingSpinnerBase64}),spinnerText:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("p",{style:{marginTop:"10px"},children:"Custom Spinner Text"})}},LoadingPaneSample4=LoadingPaneTemplate.bind({});LoadingPaneSample4.args=loadingPaneSample4Props,LoadingPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneDefault.parameters),LoadingPaneRTL.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneRTL.parameters),LoadingPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample2.parameters),LoadingPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample3.parameters),LoadingPaneSample4.parameters=Object.assign({storySource:{source:"(args) => <LoadingPane {...args}></LoadingPane>"}},LoadingPaneSample4.parameters)},"./stories/component-stories/OOOHPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"OOOHPaneDefault",(function(){return OOOHPaneDefault})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample1",(function(){return OOOHPaneSample1})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample2",(function(){return OOOHPaneSample2})),__webpack_require__.d(__webpack_exports__,"OOOHPaneSample3",(function(){return OOOHPaneSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/OutOfOfficeHours Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.OutOfOfficeHoursPane};var OOOHPaneTemplate=function OOOHPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.OutOfOfficeHoursPane,Object.assign({},args))};OOOHPaneTemplate.displayName="OOOHPaneTemplate";var defaultOOOHPaneProps={controlProps:{id:"oc-lcw-outofofficehours-pane",dir:"auto",hideOOOHPane:!1,hideTitle:!1,titleText:"Thanks for contacting us. You have reached us outside of our operating hours. An agent will respond when we open."},styleProps:{generalStyleProps:{borderStyle:"solid",width:"360px",height:"560px",borderRadius:0,borderWidth:"3px",backgroundColor:"#FFFFFF",backgroundSize:"",backgroundImage:"",borderColor:"#F1F1F1",position:"absolute",justifyContent:"center",alignItems:"stretch",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"14px",color:"#000000",textAlign:"center",alignSelf:"auto"}}},sampleOneOOOHPaneProps={controlProps:Object.assign({},defaultOOOHPaneProps.controlProps,{id:"oc-lcw-outofofficehourspane-sample1",dir:"rtl"}),styleProps:Object.assign({},defaultOOOHPaneProps.styleProps)},sampleTwoOOOHPaneProps={controlProps:Object.assign({},defaultOOOHPaneProps.controlProps,{id:"oc-lcw-outofofficehourspane-sample2",titleText:"Sorry but we are not operating during these hours!!"}),styleProps:{generalStyleProps:{borderStyle:"dotted solid double dashed",borderRadius:"40%",borderWidth:"5px",backgroundColor:"#FFFFFF",backgroundSize:"200px",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ErrorIconBase64+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderColor:"#F2FFF1",boxShadow:"0px 0px 2px 3px #DDDDD7",width:"450px",height:"350px",position:"absolute",left:"20%",top:"20%",justifyContent:"center",alignItems:"stretch",flexFlow:"column wrap"},titleStyleProps:{fontFamily:"'Segoe UI',Arial,sans-serif",fontWeight:"normal",fontSize:"15px",color:"#000000",width:"400px",height:"300px",margin:"275px 0px 0px 20px",textAlign:"center",alignSelf:"auto"}}},OOOHPaneDefault=OOOHPaneTemplate.bind({});OOOHPaneDefault.args=defaultOOOHPaneProps;var OOOHPaneSample1=OOOHPaneTemplate.bind({});OOOHPaneSample1.args=sampleOneOOOHPaneProps;var OOOHPaneSample2=OOOHPaneTemplate.bind({});OOOHPaneSample2.args=sampleTwoOOOHPaneProps;var OOOHPaneSample3Props={componentOverrides:{title:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h2",{style:{textAlign:"center"},children:"Custom Message"}))}},OOOHPaneSample3=OOOHPaneTemplate.bind({});OOOHPaneSample3.args=OOOHPaneSample3Props,OOOHPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneDefault.parameters),OOOHPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample1.parameters),OOOHPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample2.parameters),OOOHPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <OutOfOfficeHoursPane {...args}></OutOfOfficeHoursPane>"}},OOOHPaneSample3.parameters)},"./stories/component-stories/PostChatSurveyPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PostChatSurveyPaneDefault",(function(){return PostChatSurveyPaneDefault})),__webpack_require__.d(__webpack_exports__,"PostChatSurveyPaneSample1",(function(){return PostChatSurveyPaneSample1}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/PostChatSurvey Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PostChatSurveyPane};var PostChatSurveyPaneTemplate=function PostChatSurveyPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PostChatSurveyPane,Object.assign({},args))};PostChatSurveyPaneTemplate.displayName="PostChatSurveyPaneTemplate";var PostChatSurveyPaneDefault=PostChatSurveyPaneTemplate.bind({});PostChatSurveyPaneDefault.args={controlProps:{id:"oc-lcw-postchatsurvey-pane",title:"Post chat survey pane",surveyURL:"https://tip.customervoice.microsoft.com/Pages/ResponsePage.aspx?id=YkJf70oOwkiRb-bmaZvb3VBXiZokKptMk8ceKB79-oxUQ0lCU0VMQ0IxWUE3WFgzVTJBMjNRNlVISSQlQCNjPTEu&vt=ef5f4262-0e4a-48c2-916f-e6e6699bdbdd_38720c9e-b284-47d0-aea0-f55e9699ee00_637783044550000000_TIP_Hash_07NiQh1yjku%2f4%2fB0UqFs5GZEwGEKXBNwhSuJJERkz3c%3d"},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderStyle:"solid",borderRadius:0,borderWidth:"3px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1"}}};var PostChatSurveyPaneSample1=PostChatSurveyPaneTemplate.bind({});PostChatSurveyPaneSample1.args={controlProps:{id:"oc-lcw-postchatsurvey-pane-sample1",title:"Post chat survey pane",surveyURL:"https://tip.customervoice.microsoft.com/Pages/ResponsePage.aspx?id=YkJf70oOwkiRb-bmaZvb3VBXiZokKptMk8ceKB79-oxUQ0lCU0VMQ0IxWUE3WFgzVTJBMjNRNlVISSQlQCNjPTEu&vt=ef5f4262-0e4a-48c2-916f-e6e6699bdbdd_38720c9e-b284-47d0-aea0-f55e9699ee00_637783044550000000_TIP_Hash_07NiQh1yjku%2f4%2fB0UqFs5GZEwGEKXBNwhSuJJERkz3c%3d"},styleProps:{generalStyleProps:{borderStyle:"solid",borderRadius:"4px",borderWidth:"3px",maxWidth:"390px",maxHeight:"450px",position:"absolute",left:"15%",top:"20%",backgroundColor:"#FFFFFF",borderColor:"#FFFFFF"}}},PostChatSurveyPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <PostChatSurveyPane {...args}></PostChatSurveyPane>"}},PostChatSurveyPaneDefault.parameters),PostChatSurveyPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <PostChatSurveyPane {...args}></PostChatSurveyPane>"}},PostChatSurveyPaneSample1.parameters)},"./stories/component-stories/PreChatSurveyPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneDefault",(function(){return PreChatSurveyPaneDefault})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample1",(function(){return PreChatSurveyPaneSample1})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample2",(function(){return PreChatSurveyPaneSample2})),__webpack_require__.d(__webpack_exports__,"PreChatSurveyPaneSample3",(function(){return PreChatSurveyPaneSample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/react/index.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");__webpack_exports__.default={title:"Stateless Components/PreChatSurvey Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PreChatSurveyPane};var PreChatSurveyPaneTemplate=function PreChatSurveyPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_3__.PreChatSurveyPane,Object.assign({},args))};PreChatSurveyPaneTemplate.displayName="PreChatSurveyPaneTemplate";var defaultPreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-default",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#000000"}},"backgroundColor":"#FFFFFF"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"name pls?","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"multi\\nmulti\\nmulti","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"options","isMultiSelect":false,"value":"1","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","isSubtle":true,"text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:{generalStyleProps:{width:"360px",height:"560px",borderStyle:"solid",borderRadius:"4px",borderWidth:"3px",backgroundColor:"#FFFFFF",borderColor:"#F1F1F1",overflowY:"auto"},customButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",color:"#FFFFFF"},adaptiveCardContainerStyleProps:{border:"1px solid #ECECEC",borderRadius:"4px",margin:"3%"}}},sampleOnePreChatSurveyPaneProps={controlProps:Object.assign({},defaultPreChatSurveyPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultPreChatSurveyPaneProps.styleProps)},sampleTwoPreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-sample2",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#000000"}},"backgroundColor":"#FFFFFF"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.1","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"TextBlock","text":"Fields marked with * are mandatory.","wrap":true,"color":"attention"},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"Name","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"multi\\nmulti\\nmulti","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"options","isMultiSelect":false,"value":"1","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.ChoiceSet","id":"965cc6dc-c6bf-4496-9006-38d686de965a","label":"What option do you want?","style":"expanded","isMultiSelect":false,"value":"1","choices":[{"title":"One","value":"1"},{"title":"Two","value":"2"},{"title":"Three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:Object.assign({},defaultPreChatSurveyPaneProps.styleProps)},sampleThreePreChatSurveyPaneProps={controlProps:{id:"oc-lcw-prechatsurveypane-sample3",dir:"auto",hidePreChatSurveyPane:!1,adaptiveCardHostConfig:'{"fontFamily":"Segoe UI, Helvetica Neue, sans-serif","containerStyles":{"default":{"foregroundColors":{"default":{"default":"#C3F60F"}},"backgroundColor":"#6A1E7A"}},"actions":{"actionsOrientation":"Vertical","actionAlignment":"stretch"}}',payload:'{"$schema":"http://adaptivecards.io/schemas/adaptive-card.json","type":"AdaptiveCard","version":"1.5","body":[{"type":"TextBlock","weight":"bolder","text":"Please answer below questions."},{"type":"Input.Text","id":"1e5e4e7a-8f0b-ec11-b6e6-000d3a305d38","label":"Name","maxLength":100,"isRequired":true,"errorMessage":"Name is required"},{"type":"Input.Text","id":"c7ed0164-e6a9-4cf6-ab03-819f60d0289f","label":"Company Name","style":"text","maxLength":100,"isRequired":true,"errorMessage":"Company Name is required"},{"type":"Input.Text","id":"7f8f5d6d-995e-ec11-8f8f-000d3a31376e","label":"How are you feeling today?","style":"text","isMultiline":true,"maxLength":250},{"type":"Input.Text","id":"03d7114a-5e87-4718-b60d-0e6802176875","label":"Comments","style":"text","isMultiline":true,"maxLength":250,"isRequired":true,"errorMessage":"Comments are required"},{"type":"Input.ChoiceSet","id":"e4bdf7cb-995e-ec11-8f8f-000d3a31376e","label":"Please Select One of the following","isMultiSelect":false,"isRequired":true,"errorMessage":"A choice is required","style":"compact","choices":[{"title":"one","value":"1"},{"title":"two","value":"2"},{"title":"three","value":"3"}]},{"type":"Input.Toggle","id":"b26011d2-995e-ec11-8f8f-000d3a31376e","title":"consent","valueOn":"True","valueOff":"False","value":"false"},{"type":"TextBlock","text":"Fields marked with * are mandatory.","wrap":true}],"actions":[{"type":"Action.Submit","title":"Submit","data":{"Type":"InputSubmit"}}]}',onSubmit:function onSubmit(values){alert("Submitted"+values)}},styleProps:{generalStyleProps:{borderStyle:"solid",borderWidth:"4px",backgroundColor:"#6A1E7A",maxWidth:"280px",maxHeight:"420px",position:"absolute",left:"15%",top:"20%",overflowY:"auto"},customButtonStyleProps:{backgroundColor:"#C3F60F",color:"#800080"},adaptiveCardContainerStyleProps:{border:"1px solid #C3F60F",borderRadius:"4px",margin:"10px 10px 0px 10px"}}},PreChatSurveyPaneDefault=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneDefault.args=defaultPreChatSurveyPaneProps;var PreChatSurveyPaneSample1=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample1.args=sampleOnePreChatSurveyPaneProps;var PreChatSurveyPaneSample2=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample2.args=sampleTwoPreChatSurveyPaneProps;var PreChatSurveyPaneSample3=PreChatSurveyPaneTemplate.bind({});PreChatSurveyPaneSample3.args=sampleThreePreChatSurveyPaneProps,PreChatSurveyPaneDefault.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneDefault.parameters),PreChatSurveyPaneSample1.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample1.parameters),PreChatSurveyPaneSample2.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample2.parameters),PreChatSurveyPaneSample3.parameters=Object.assign({storySource:{source:"(args) => <PreChatSurveyPane {...args}></PreChatSurveyPane>"}},PreChatSurveyPaneSample3.parameters)},"./stories/component-stories/ProactiveChatPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultRtl",(function(){return DefaultRtl})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Proactive Chat Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatPane};var ProactiveChatPaneTemplate=function ProactiveChatPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatPane,Object.assign({},args))};ProactiveChatPaneTemplate.displayName="ProactiveChatPaneTemplate";var defaultProactiveChatPaneProps={controlProps:{id:"oc-lcw-proactivechat",dir:"ltr",hideProactiveChatPane:!1,proactiveChatPaneAriaLabel:"Proactive Chat Pane",hideTitle:!1,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"Live chat support!",hideCloseButton:!1,closeButtonAriaLabel:"Close Button",isBodyContainerHorizantal:!1,hideBodyTitle:!1,bodyTitleText:"Hi! Have any questions? I am here to help.",hideStartButton:!1,startButtonText:"Chat Now",startButtonAriaLabel:"Chat Now",onClose:function onClose(){alert("on close")},onStart:function onStart(){alert("on start")}},styleProps:{generalStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderRadius:"8px",boxShadow:"0 0 4px rgb(102 102 102 / 50%)",bottom:"0",height:"auto",margin:"3px",minHeight:"133px",position:"absolute",right:"0",width:"245px",zIndex:"9999"},headerContainerStyleProps:{backgroundColor:"rgb(49, 95, 162)",backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ProactiveChatBannerBase64+")",backgroundPosition:"initial",backgroundRepeat:"no-repeat",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",height:"90px",padding:"10px 16px 10px 16px"},textContainerStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:"400",lineHeight:"19px",width:"95%"},titleStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif"},subtitleStyleProps:{color:"rgb(255, 255, 255)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"18px",fontWeight:"600"},closeButtonStyleProps:{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.CloseChatButtonIconBase64+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",color:"#605e5c",cursor:"pointer",height:"14px",lineHeight:"14px",textAlign:"center",width:"14px",zIndex:"inherit"},bodyTitleStyleProps:{color:"rgb(0, 0, 0)",display:"inline-block",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"14px",lineHeight:"19px",padding:"16px",overflow:"hidden",wordBreak:"break-word"},startButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",borderRadius:"40px",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",margin:"20px 16px 20px 16px",padding:"6px 23px 6px 23px",width:"50%",zIndex:"inherit"}}},sampleOneProactiveChatPaneProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps),styleProps:{closeButtonStyleProps:{height:"20px",width:"20px"},closeButtonHoveredStyleProps:{backgroundColor:"rgb(129, 133, 137)"},bodyTitleStyleProps:{alignItems:"center",display:"flex",textAlign:"center"},startButtonStyleProps:{borderRadius:"10px",height:"100px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},sampleTwoProactiveChatPaneProps={controlProps:{id:"oclcw-incomingproactivechat",dir:"ltr",hideProactiveChatPane:!1,proactiveChatPaneAriaLabel:"Proactive Chat Pane",hideTitle:!0,titleText:"Welcome to",hideSubtitle:!1,subtitleText:"Live chat support!",hideCloseButton:!1,isBodyContainerHorizantal:!0,hideBodyTitle:!1,hideStartButton:!1,startButtonText:"Chat Now",startButtonAriaLabel:"Chat Now",onStart:function onStart(){alert("on start")}},componentOverrides:{closeButton:Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{color:"rgb(255, 255, 255)",float:"right",backgroundColor:"green",borderRadius:"50px",fontSize:"10px",height:"20px",margin:"10px 10px 0 0",padding:"10px",width:"20px"},children:"End Chat"})),bodyTitle:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{style:{color:"rgb(255, 255, 255)",backgroundColor:"green",borderRadius:"30px",borderColor:"green",borderStyle:"solid",height:"80px",margin:"30px 15px 0 0",padding:"10px",width:"160px"},children:"This is a custom button"})},styleProps:{generalStyleProps:{borderColor:"black",borderRadius:"50px",borderStyle:"solid",borderWidth:"1px"},headerContainerStyleProps:{backgroundColor:"blue",borderRadius:"50px"},textContainerStyleProps:{borderRadius:"50px",margin:"10px 0 10px 10px"},bodyContainerStyleProps:{borderRadius:"50px",overflow:"auto",padding:"10px"},startButtonStyleProps:{backgroundColor:"black",borderRadius:"50px",height:"100px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},sampleThreeProactiveChatPaneProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps),styleProps:{generalStyleProps:{backgroundColor:"purple",boxShadow:"20px 20px 4px rgb(102 102 102 / 50%)",float:"right",height:"400px",position:"relative"},headerContainerStyleProps:{backgroundColor:"rgb(0, 0, 0)"},closeButtonStyleProps:{height:"20px",width:"20px"},closeButtonHoveredStyleProps:{backgroundColor:"rgb(129, 133, 137)"},bodyContainerStyleProps:{backgroundColor:"yellow",bottom:"20px",left:"20px",padding:"10px",position:"absolute",right:"20px"},startButtonStyleProps:{backgroundColor:"black",height:"30px",padding:"5px",width:"100px"},startButtonHoveredStyleProps:{backgroundColor:"rgb(169, 169, 169)",color:"rgb(0, 0, 0)"}}},Default=ProactiveChatPaneTemplate.bind({});Default.args=defaultProactiveChatPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultProactiveChatPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultProactiveChatPaneProps.styleProps)},DefaultRtl=ProactiveChatPaneTemplate.bind({});DefaultRtl.args=defaultRtlProps;var Sample1=ProactiveChatPaneTemplate.bind({});Sample1.args=sampleOneProactiveChatPaneProps;var Sample2=ProactiveChatPaneTemplate.bind({});Sample2.args=sampleTwoProactiveChatPaneProps;var Sample3=ProactiveChatPaneTemplate.bind({});Sample3.args=sampleThreeProactiveChatPaneProps,Default.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Default.parameters),DefaultRtl.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},DefaultRtl.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <ProactiveChatPane {...args}></ProactiveChatPane>"}},Sample3.parameters)},"./stories/component-stories/ReconnectChatPane.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"DefaultRtl",(function(){return DefaultRtl})),__webpack_require__.d(__webpack_exports__,"Sample1",(function(){return Sample1})),__webpack_require__.d(__webpack_exports__,"Sample2",(function(){return Sample2})),__webpack_require__.d(__webpack_exports__,"Sample3",(function(){return Sample3})),__webpack_require__.d(__webpack_exports__,"Sample4",(function(){return Sample4})),__webpack_require__.d(__webpack_exports__,"Sample5",(function(){return Sample5}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var _microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js"));__webpack_exports__.default={title:"Stateless Components/Reconnect Chat Pane",component:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ReconnectChatPane};var ReconnectChatPaneTemplate=function ReconnectChatPaneTemplate(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ReconnectChatPane,Object.assign({},args))};ReconnectChatPaneTemplate.displayName="ReconnectChatPaneTemplate";var defaultReconnectChatPaneProps={controlProps:{id:"oc-lcw-reconnectchat-pane",dir:"ltr",hideReconnectChatPane:!1,reconnectChatPaneAriaLabel:"Reconnect Chat Pane",hideTitle:!1,titleText:"Previous session detected",hideSubtitle:!1,subtitleText:"We have detected a previous chat session. Would you like to continue with your previous session?",hideIcon:!1,iconAriaLabel:"Reconnect Chat Pane Icon",isButtonGroupHorizontal:!1,hideContinueChatButton:!1,continueChatButtonText:"Continue conversation",continueChatButtonAriaLabel:"Continue conversation",hideStartNewChatButton:!1,startNewChatButtonText:"Start new conversation",startNewChatButtonAriaLabel:"Start new conversation",onContinueChat:function onContinueChat(){alert("on continue conversation")},onStartNewChat:function onStartNewChat(){alert("on start new conversation")},onMinimize:function onMinimize(){alert("on minimize")}},styleProps:{generalStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderColor:"#E6E6E6",borderRadius:"4px",borderStyle:"solid",borderWidth:"3px",padding:"15px",height:"100%",width:"100%"},wrapperStyleProps:{backgroundColor:"rgb(255, 255, 255)",borderColor:"#E6E6E6",borderRadius:"0 8px 8px 8px",borderStyle:"solid",borderWidth:"1px",padding:"20px",width:"100%"},titleStyleProps:{color:"rgb(0, 0, 0)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",lineHeight:"19px",marginBottom:"10px"},subtitleStyleProps:{color:"rgb(0, 0, 0)",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"400",lineHeight:"19px"},iconStyleProps:{backgroundImage:"url("+_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ChatReconnectIconBase64+")",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"200px",height:"130px",margin:"0 auto",width:"130px"},buttonGroupStyleProps:{alignItems:"stretch"},continueChatButtonStyleProps:{backgroundColor:"rgb(49, 95, 162)",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",height:"60px",marginBottom:"5px",padding:"4px 10px 5px 10px"},continueChatButtonHoveredStyleProps:{filter:"brightness(0.8)"},startNewChatButtonStyleProps:{backgroundColor:"rgb(0, 0, 0)",color:"rgb(255, 255, 255)",cursor:"pointer",fontFamily:"'Segoe UI', Arial, sans-serif",fontSize:"16px",fontWeight:"600",height:"60px",padding:"4px 10px 5px 10px"},startNewChatButtonHoveredStyleProps:{backgroundColor:"rgb(132, 132, 130)"}}},sampleThreeReconnectChatPaneProps={controlProps:{id:"lcw-components-reconnect-chat-pane",dir:"ltr",hideReconnectChatPane:!1,reconnectChatPaneAriaLabel:"Reconnect Chat Pane",hideTitle:!1,titleText:"Previous session detected",hideSubtitle:!0,subtitleText:"We have detected a previous chat session. Would you like to continue with your previous session?",hideIcon:!1,iconAriaLabel:"Reconnect Chat Pane Icon",isButtonGroupHorizontal:!1,hideContinueChatButton:!1,continueChatButtonText:"Continue conversation",continueChatButtonAriaLabel:"Continue conversation",hideStartNewChatButton:!0,startNewChatButtonText:"Start new conversation",startNewChatButtonAriaLabel:"Start new conversation",onContinueChat:function onContinueChat(){alert("on continue conversation")},onStartNewChat:function onStartNewChat(){alert("on start new conversation")}},styleProps:{generalStyleProps:{backgroundColor:"red",borderColor:"black",borderRadius:"20%",width:"600px"},wrapperStyleProps:{backgroundColor:"green",borderRadius:"20%"},titleStyleProps:{color:"white",fontSize:"20px",textAlign:"center"},buttonGroupStyleProps:{alignItems:"center"},continueChatButtonStyleProps:{fontSize:"20px",height:"200px",width:"200px"}}},Default=ReconnectChatPaneTemplate.bind({});Default.args=defaultReconnectChatPaneProps;var defaultRtlProps={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{dir:"rtl"}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps)},DefaultRtl=ReconnectChatPaneTemplate.bind({});DefaultRtl.args=defaultRtlProps;var sample1Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{isButtonGroupHorizontal:!0}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{iconStyleProps:{margin:"10px"},continueChatButtonStyleProps:{marginRight:"10px",width:"100%"},startNewChatButtonStyleProps:{width:"100%"}})},Sample1=ReconnectChatPaneTemplate.bind({});Sample1.args=sample1Props;var customReactNode=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h1",{style:{color:"blue",backgroundColor:"yellow"},children:"This is a custom element that overrides the icon"}),sample2Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps),componentOverrides:Object.assign({},defaultReconnectChatPaneProps.componentOverrides,{icon:customReactNode})},Sample2=ReconnectChatPaneTemplate.bind({});Sample2.args=sample2Props;var Sample3=ReconnectChatPaneTemplate.bind({});Sample3.args=sampleThreeReconnectChatPaneProps;var sample4Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{generalStyleProps:{width:"350px"}})},Sample4=ReconnectChatPaneTemplate.bind({});Sample4.args=sample4Props;var customReactNode1=Object(_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.encodeComponentString)(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("input",{type:"text",placeholder:"Input text"})),sample5Props={controlProps:Object.assign({},defaultReconnectChatPaneProps.controlProps,{isIncomingCall:!0}),styleProps:Object.assign({},defaultReconnectChatPaneProps.styleProps,{generalStyleProps:{width:"350px"}}),componentOverrides:Object.assign({},defaultReconnectChatPaneProps.componentOverrides,{continueChatButton:customReactNode1})},Sample5=ReconnectChatPaneTemplate.bind({});Sample5.args=sample5Props,Default.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Default.parameters),DefaultRtl.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},DefaultRtl.parameters),Sample1.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample1.parameters),Sample2.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample2.parameters),Sample3.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample3.parameters),Sample4.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample4.parameters),Sample5.parameters=Object.assign({storySource:{source:"(args) => <ReconnectChatPane {...args}></ReconnectChatPane>"}},Sample5.parameters)},"./stories/component-stories/common/commandbutton/CommandButton.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";var _fluentui_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/DefaultButton/DefaultButton.js"),_fluentui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@fluentui/react/lib/components/Button/IconButton/IconButton.js"),_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@microsoft/omnichannel-chat-components/lib/cjs/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function CommandButton(props){var iconProp=props.imageIconProps?{imageProps:props.imageIconProps}:{iconName:props.iconName,styles:{root:props.styles}},iconButtonStyles={root:props.styles,rootHovered:props.hoverStyles,rootFocused:props.focusStyles},handleOnClick=Object(react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((function(){if(null!=props&&props.onClick){var _props$customEvent,customEvent=null!==(_props$customEvent=props.customEvent)&&void 0!==_props$customEvent?_props$customEvent:{eventName:"onClick",elementType:_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.ElementType.Custom,elementId:null==props?void 0:props.id};_microsoft_omnichannel_chat_components__WEBPACK_IMPORTED_MODULE_2__.BroadcastService.postMessage(customEvent),null==props||props.onClick()}}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:["text"===props.type&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_0__.a,{id:props.id,text:props.text,ariaLabel:props.ariaLabel,onClick:handleOnClick,disabled:props.disabled,className:props.className,styles:iconButtonStyles}),"icon"===props.type&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fluentui_react__WEBPACK_IMPORTED_MODULE_1__.a,{id:props.id,iconProps:iconProp,title:props.ariaLabel,ariaLabel:props.ariaLabel,disabled:props.disabled,styles:iconButtonStyles,onClick:handleOnClick,className:props.className})]})}__webpack_exports__.a=CommandButton;try{CommandButton.displayName="CommandButton",CommandButton.__docgenInfo={description:"",displayName:"CommandButton",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"icon"'}]}},isAudioMuted:{defaultValue:null,description:"",name:"isAudioMuted",required:!1,type:{name:"boolean"}},iconName:{defaultValue:null,description:"",name:"iconName",required:!1,type:{name:"string"}},imageIconProps:{defaultValue:null,description:"",name:"imageIconProps",required:!1,type:{name:"IImageProps"}},toggleIconName:{defaultValue:null,description:"",name:"toggleIconName",required:!1,type:{name:"string"}},imageToggleIconProps:{defaultValue:null,description:"",name:"imageToggleIconProps",required:!1,type:{name:"IImageProps"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string"}},toggleAriaLabel:{defaultValue:null,description:"",name:"toggleAriaLabel",required:!1,type:{name:"string"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"IStyle"}},hoverStyles:{defaultValue:null,description:"",name:"hoverStyles",required:!1,type:{name:"IStyle"}},focusStyles:{defaultValue:null,description:"",name:"focusStyles",required:!1,type:{name:"IStyle"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},customEvent:{defaultValue:null,description:"",name:"customEvent",required:!1,type:{name:"ICustomEvent"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/component-stories/common/commandbutton/CommandButton.tsx#CommandButton"]={docgenInfo:CommandButton.__docgenInfo,name:"CommandButton",path:"stories/component-stories/common/commandbutton/CommandButton.tsx#CommandButton"})}catch(__react_docgen_typescript_loader_error){}},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-a11y/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-knobs/dist/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./stories/.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){},10:function(module,exports){},11:function(module,exports){},12:function(module,exports){},13:function(module,exports){},14:function(module,exports){},15:function(module,exports){},16:function(module,exports){},17:function(module,exports){},18:function(module,exports){},19:function(module,exports){},2:function(module,exports){},20:function(module,exports){},21:function(module,exports){},22:function(module,exports){},23:function(module,exports){},24:function(module,exports){},25:function(module,exports){},3:function(module,exports){},4:function(module,exports){},5:function(module,exports){},6:function(module,exports){},7:function(module,exports){},8:function(module,exports){},9:function(module,exports){}},[[0,5,6]]]);
//# sourceMappingURL=main.bf7808d8.iframe.bundle.js.map